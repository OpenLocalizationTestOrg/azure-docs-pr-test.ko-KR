



<span data-ttu-id="37f96-101">사용자의 환경과 선택 사항에 따라 스크립트를 사용하여 Azure 가상 네트워크, 저장소 계정, 클라우드 서비스, 도메인 컨트롤러, 원격 또는 로컬 SQL 데이터베이스, 헤드 노드, 추가 클러스터 노드를 포함한 모든 클러스터 인프라를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-101">Depending on your environment and choices, the script can create all the cluster infrastructure, including the Azure virtual network, storage accounts, cloud services, domain controller, remote or local SQL databases, head node, and additional cluster nodes.</span></span> <span data-ttu-id="37f96-102">또는 스크립트에서 기존 Azure 인프라를 사용하여 HPC 클러스터 노드만 만들 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-102">Alternatively, the script can use pre-existing Azure infrastructure and create only the HPC cluster nodes.</span></span>

<span data-ttu-id="37f96-103">HPC 팩 클러스터 계획에 대한 배경 정보는 HPC 팩 2012 R2 TechNet 라이브러리에서 [제품 평가 및 계획](https://technet.microsoft.com/library/jj899596.aspx)과 [시작하기](https://technet.microsoft.com/library/jj899590.aspx) 콘텐츠를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="37f96-103">For background information about planning an HPC Pack cluster, see the [Product Evaluation and Planning](https://technet.microsoft.com/library/jj899596.aspx) and [Getting Started](https://technet.microsoft.com/library/jj899590.aspx) content in the HPC Pack 2012 R2 TechNet Library.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="37f96-104">필수 조건</span><span class="sxs-lookup"><span data-stu-id="37f96-104">Prerequisites</span></span>
* <span data-ttu-id="37f96-105">**Azure 구독**: Azure Global 또는 Azure China 서비스의 구독을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-105">**Azure subscription**: You can use a subscription in either the Azure Global or Azure China service.</span></span> <span data-ttu-id="37f96-106">구독 제한은 배포할 수 있는 클러스터 노드의 수와 유형에 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-106">Your subscription limits affect the number and type of cluster nodes you can deploy.</span></span> <span data-ttu-id="37f96-107">자세한 내용은 [Azure 구독 및 서비스 제한, 할당량 및 제약 조건](../articles/azure-subscription-service-limits.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="37f96-107">For information, see [Azure subscription and service limits, quotas, and constraints](../articles/azure-subscription-service-limits.md).</span></span>
* <span data-ttu-id="37f96-108">**Azure PowerShell 0.8.10 이상이 설치 및 구성된 Windows 클라이언트 컴퓨터**: Azure 구독에 연결하기 위한 설치 지침 및 단계는 [Azure PowerShell 시작](/powershell/azureps-cmdlets-docs)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="37f96-108">**Windows client computer with Azure PowerShell 0.8.10 or later installed and configured**: See [Get started with Azure PowerShell](/powershell/azureps-cmdlets-docs) for installation instructions and steps to connect to your Azure subscription.</span></span>
* <span data-ttu-id="37f96-109">**HPC 팩 IaaS 배포 스크립트**: [Microsoft 다운로드 센터](https://www.microsoft.com/download/details.aspx?id=44949)에서 최신 버전의 스크립트를 다운로드하고 압축을 풉니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-109">**HPC Pack IaaS deployment script**: Download and unpack the latest version of the script from the [Microsoft Download Center](https://www.microsoft.com/download/details.aspx?id=44949).</span></span> <span data-ttu-id="37f96-110">`New-HPCIaaSCluster.ps1 –Version`을 실행하여 스크립트 버전을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-110">Check the version of the script by running `New-HPCIaaSCluster.ps1 –Version`.</span></span> <span data-ttu-id="37f96-111">이 문서는 버전 4.5.2의 스크립트를 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-111">This article is based on version 4.5.2 of the script.</span></span>
* <span data-ttu-id="37f96-112">**스크립트 구성 파일**: 스크립트가 HPC 클러스터를 구성하는 데 사용하는 XML 파일을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-112">**Script configuration file**: Create an XML file that the script uses to configure the HPC cluster.</span></span> <span data-ttu-id="37f96-113">정보 및 예제는 이 문서의 후반부에 나오는 단원 및 배포 스크립트와 함께 제공되는 Manual.rtf 파일을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="37f96-113">For information and examples, see sections later in this article and the file Manual.rtf that accompanies the deployment script.</span></span>

## <a name="syntax"></a><span data-ttu-id="37f96-114">구문</span><span class="sxs-lookup"><span data-stu-id="37f96-114">Syntax</span></span>
```PowerShell
New-HPCIaaSCluster.ps1 [-ConfigFile] <String> [-AdminUserName]<String> [[-AdminPassword] <String>] [[-HPCImageName] <String>] [[-LogFile] <String>] [-Force] [-NoCleanOnFailure] [-PSSessionSkipCACheck] [<CommonParameters>]
```
> [!NOTE]
> <span data-ttu-id="37f96-115">스크립트는 관리자 권한으로 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-115">Run the script as an administrator.</span></span>
> 
> 

### <a name="parameters"></a><span data-ttu-id="37f96-116">매개 변수</span><span class="sxs-lookup"><span data-stu-id="37f96-116">Parameters</span></span>
* <span data-ttu-id="37f96-117">**ConfigFile**: HPC 클러스터를 설명하는 구성 파일의 파일 경로를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-117">**ConfigFile**: Specifies the file path of the configuration file to describe the HPC cluster.</span></span> <span data-ttu-id="37f96-118">자세한 내용은 이 토픽의 구성 파일 또는 스크립트가 포함된 폴더의 Manual.rtf 파일을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="37f96-118">See more about the configuration file in this topic, or in the file Manual.rtf in the folder containing the script.</span></span>
* <span data-ttu-id="37f96-119">**AdminUserName**: 사용자 이름을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-119">**AdminUserName**: Specifies the user name.</span></span> <span data-ttu-id="37f96-120">스크립트로 도메인 포리스트를 만든 경우 모든 VM의 로컬 관리자 사용자 이름과 도메인 관리자 이름이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-120">If the domain forest is created by the script, this becomes the local administrator user name for all VMs and the domain administrator name.</span></span> <span data-ttu-id="37f96-121">도메인 포리스트가 이미 있는 경우에는 로컬 관리자 이름으로 도메인 사용자를 지정하여 HPC 팩을 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-121">If the domain forest already exists, this specifies the domain user as the local administrator user name to install HPC Pack.</span></span>
* <span data-ttu-id="37f96-122">**AdminPassword**: 관리자의 암호를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-122">**AdminPassword**: Specifies the administrator’s password.</span></span> <span data-ttu-id="37f96-123">명령줄에서 이 매개 변수를 지정하지 않은 경우 스크립트에서 암호를 입력하라는 메시지를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-123">If not specified in the command line, the script prompts you to input the password.</span></span>
* <span data-ttu-id="37f96-124">**HPCImageName**(선택 사항): HPC 클러스터를 배포하는 데 사용하는 HPC 팩 VM 이미지 이름을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-124">**HPCImageName** (optional): Specifies the HPC Pack VM image name used to deploy the HPC cluster.</span></span> <span data-ttu-id="37f96-125">Microsoft에서 제공한 Azure 마켓플레이스의 HPC 팩 이미지여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-125">It must be a Microsoft-provided HPC Pack image from the Azure Marketplace.</span></span> <span data-ttu-id="37f96-126">이 매개 변수를 지정하지 않을 경우(일반적으로 지정하는 것이 좋음) 스크립트에서 최근 게시된 [HPC Pack 2012 R2 이미지](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/)를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-126">If not specified (recommended usually), the script chooses the latest published [HPC Pack 2012 R2 image](https://azure.microsoft.com/marketplace/partners/microsoft/hpcpack2012r2onwindowsserver2012r2/).</span></span> <span data-ttu-id="37f96-127">최신 이미지는 HPC Pack 2012 R2 업데이트 3이 설치된 Windows Server 2012 R2 Datacenter를 기준으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-127">The latest image is based on Windows Server 2012 R2 Datacenter with HPC Pack 2012 R2 Update 3 installed.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="37f96-128">유효한 HPC 팩 이미지를 지정하지 않으면 배포가 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-128">Deployment fails if you don't specify a valid HPC Pack image.</span></span>
  > 
  > 
* <span data-ttu-id="37f96-129">**LogFile**(선택 사항): 배포 로그 파일 경로를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-129">**LogFile** (optional): Specifies the deployment log file path.</span></span> <span data-ttu-id="37f96-130">이 매개 변수를 지정하지 않을 경우 스크립트를 실행하는 컴퓨터의 temp 디렉터리에 로그 파일이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-130">If not specified, the script creates a log file in the temp directory of the computer running the script.</span></span>
* <span data-ttu-id="37f96-131">**Force**(선택 사항): 모든 확인 메시지를 표시하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-131">**Force** (optional): Suppresses all the confirmation prompts.</span></span>
* <span data-ttu-id="37f96-132">**NoCleanOnFailure**(선택 사항): 성공적으로 배포되지 않은 Azure VM을 제거하지 않도록 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-132">**NoCleanOnFailure** (optional): Specifies that the Azure VMs that are not successfully deployed are not removed.</span></span> <span data-ttu-id="37f96-133">배포를 계속하려면 스크립트를 다시 실행하기 전에 이러한 VM을 수동으로 제거합니다. 그렇지 않을 경우 배포가 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-133">Remove these VMs manually before rerunning the script to continue the deployment, or the deployment may fail.</span></span>
* <span data-ttu-id="37f96-134">**PSSessionSkipCACheck**(선택 사항): 이 스크립트에서 배포한 VM을 사용하는 모든 클라우드 서비스에서는 Azure가 자체 서명된 인증서를 자동으로 생성하며 클라우드 서비스의 모든 VM은 이 인증서를 기본 WinRM(Windows 원격 관리) 인증서로 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-134">**PSSessionSkipCACheck** (optional): For every cloud service with VMs deployed by this script, a self-signed certificate is automatically generated by Azure, and all the VMs in the cloud service use this certificate as the default Windows Remote Management (WinRM) certificate.</span></span> <span data-ttu-id="37f96-135">스크립트는 이러한 Azure VM에 HPC 기능을 배포하기 위해 기본적으로 이러한 인증서를 로컬 컴퓨터\\클라이언트 컴퓨터의 신뢰할 수 있는 루트 인증 기관 저장소에 일시적으로 설치하여 스크립트 실행 중 "신뢰할 수 없는 CA" 보안 오류를 표시하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-135">To deploy HPC features in these Azure VMs, the script by default temporarily installs these certificates in the Local Computer\\Trusted Root Certification Authorities store of the client computer to suppress the “not trusted CA” security error during script execution.</span></span> <span data-ttu-id="37f96-136">스크립트가 완료되면 인증서가 제거됩니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-136">The certificates are removed when the script finishes.</span></span> <span data-ttu-id="37f96-137">이 매개 변수를 지정할 경우 인증서가 클라이언트 컴퓨터에 설치되지 않고 보안 경고가 표시되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-137">If this parameter is specified, the certificates are not installed in the client computer, and the security warning is suppressed.</span></span>
  
  > [!IMPORTANT]
  > <span data-ttu-id="37f96-138">이 매개 변수는 프로덕션 배포에 권장되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-138">This parameter is not recommended for production deployments.</span></span>
  > 
  > 

### <a name="example"></a><span data-ttu-id="37f96-139">예제</span><span class="sxs-lookup"><span data-stu-id="37f96-139">Example</span></span>
<span data-ttu-id="37f96-140">다음 예제는 *MyConfigFile.xml*구성 파일을 사용하여 HPC 팩 클러스터를 만들며 클러스터 설치를 위한 관리자 자격 증명을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-140">The following example creates an HPC Pack cluster using the configuration file *MyConfigFile.xml*, and specifies administrator credentials for installing the cluster.</span></span>

```PowerShell
.\New-HPCIaaSCluster.ps1 –ConfigFile MyConfigFile.xml -AdminUserName <username> –AdminPassword <password>
```

### <a name="additional-considerations"></a><span data-ttu-id="37f96-141">추가 고려 사항</span><span class="sxs-lookup"><span data-stu-id="37f96-141">Additional considerations</span></span>
* <span data-ttu-id="37f96-142">이 스크립트는 HPC 팩 웹 포털 또는 HPC 팩 REST API를 통한 작업 제출을 선택적으로 활성화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-142">The script can optionally enable job submission through the HPC Pack web portal or the HPC Pack REST API.</span></span>
* <span data-ttu-id="37f96-143">추가 소프트웨어를 설치하거나 다른 설정을 구성하려는 경우 이 스크립트로 헤드 노드에서 사용자 지정 사전/사후 구성 스크립트를 선택적으로 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-143">The script can optionally run custom pre- and post-configuration scripts on the head node if you want to install additional software or configure other settings.</span></span>

## <a name="configuration-file"></a><span data-ttu-id="37f96-144">구성 파일</span><span class="sxs-lookup"><span data-stu-id="37f96-144">Configuration file</span></span>
<span data-ttu-id="37f96-145">배포 스크립트의 구성 파일은 XML 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-145">The configuration file for the deployment script is an XML file.</span></span> <span data-ttu-id="37f96-146">스키마 파일 HPCIaaSClusterConfig.xsd는 HPC 팩 IaaS 배포 스크립트 폴더에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-146">The schema file HPCIaaSClusterConfig.xsd is in the HPC Pack IaaS deployment script folder.</span></span> <span data-ttu-id="37f96-147">**IaaSClusterConfig** 는 배포 스크립트 폴더의 Manual.rtf 파일에 자세히 설명된 하위 요소가 포함된 구성 파일의 루트 요소입니다.</span><span class="sxs-lookup"><span data-stu-id="37f96-147">**IaaSClusterConfig** is the root element of the configuration file, which contains the child elements described in detail in the file Manual.rtf in the deployment script folder.</span></span>

