# <a name="secure-your-iot-deployment"></a><span data-ttu-id="3ec8f-101">IoT 배포 보안 유지</span><span class="sxs-lookup"><span data-stu-id="3ec8f-101">Secure your IoT deployment</span></span>
<span data-ttu-id="3ec8f-102">이 문서에서는 Azure IoT 기반 IoT(사물 인터넷) 인프라를 보호하기 위한 세부 정보를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-102">This article provides the next level of detail for securing the Azure IoT-based Internet of Things (IoT) infrastructure.</span></span> <span data-ttu-id="3ec8f-103">또한 각 구성 요소의 구성 및 배포에 대한 구현 수준의 세부 정보에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-103">It links to implementation level details for configuring and deploying each component.</span></span> <span data-ttu-id="3ec8f-104">그밖에도 다양한 경쟁 방법 간을 비교하고 선택 항목을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-104">It also provides comparisons and choices between various competing methods.</span></span>

<span data-ttu-id="3ec8f-105">Azure IoT 배포 보안 유지 과정은 다음과 같은 세 가지 보안 영역으로 나눌 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-105">Securing the Azure IoT deployment can be divided into the following three security areas:</span></span>

* <span data-ttu-id="3ec8f-106">**장치 보안**: 실제로 배포되는 동안 IoT 장치 보안 유지</span><span class="sxs-lookup"><span data-stu-id="3ec8f-106">**Device Security**: Securing the IoT device while it is deployed in the wild.</span></span>
* <span data-ttu-id="3ec8f-107">**연결 보안**: IoT 장치와 IoT Hub 간에 전송된 모든 데이터를 기밀 상태로 유지하고 변경 방지</span><span class="sxs-lookup"><span data-stu-id="3ec8f-107">**Connection Security**: Ensuring all data transmitted between the IoT device and IoT Hub is confidential and tamper-proof.</span></span>
* <span data-ttu-id="3ec8f-108">**클라우드 보안**: 데이터가 이동되고 클라우드에 저장되는 동안 보안을 유지하는 수단 제공</span><span class="sxs-lookup"><span data-stu-id="3ec8f-108">**Cloud Security**: Providing a means to secure data while it moves through, and is stored in the cloud.</span></span>

![세 가지 보안 영역][img-overview]

## <a name="secure-device-provisioning-and-authentication"></a><span data-ttu-id="3ec8f-110">보안 장치를 프로비전 및 인증</span><span class="sxs-lookup"><span data-stu-id="3ec8f-110">Secure device provisioning and authentication</span></span>
<span data-ttu-id="3ec8f-111">Azure IoT Suite는 다음 두 가지 방법으로 IoT 장치의 보안을 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-111">The Azure IoT Suite secures IoT devices by the following two methods:</span></span>

* <span data-ttu-id="3ec8f-112">각 장치에 대해 IoT Hub와 통신하는 데 사용할 수 있는 고유한 ID 키(보안 토큰) 제공</span><span class="sxs-lookup"><span data-stu-id="3ec8f-112">By providing a unique identity key (security tokens) for each device, which can be used by the device to communicate with the IoT Hub.</span></span>
* <span data-ttu-id="3ec8f-113">장치의 [X.509 인증서][lnk-x509] 및 개인 키를 IoT Hub에 장치를 인증하는 수단으로 사용</span><span class="sxs-lookup"><span data-stu-id="3ec8f-113">By using an on-device [X.509 certificate][lnk-x509] and private key as a means to authenticate the device to the IoT Hub.</span></span> <span data-ttu-id="3ec8f-114">이 인증 방법은 장치의 개인 키를 장치 외부에서 항상 알 수 없도록 하여 더 높은 수준의 보안을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-114">This authentication method ensures that the private key on the device is not known outside the device at any time, providing a higher level of security.</span></span>

<span data-ttu-id="3ec8f-115">보안 토큰 방법은 대칭 키를 각 호출에 연결하여 장치에서 IoT Hub에 대해 수행한 각 호출에 대한 인증을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-115">The security token method provides authentication for each call made by the device to IoT Hub by associating the symmetric key to each call.</span></span> <span data-ttu-id="3ec8f-116">X.509 기반 인증은 TLS 연결 설정의 일부로 물리적 레이어에서 IoT 장치 인증을 허용합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-116">X.509-based authentication allows authentication of an IoT device at the physical layer as part of the TLS connection establishment.</span></span> <span data-ttu-id="3ec8f-117">보안 토큰 기반 방법은 X.509 인증 없이 사용할 수 있으므로 덜 안전한 패턴입니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-117">The security-token-based method can be used without the X.509 authentication which is a less secure pattern.</span></span> <span data-ttu-id="3ec8f-118">두 방법 중에서 선택할 때는 우선, 개인 키를 안전하게 저장하는 데 필요한 장치 인증의 보안 수준 및 장치에 있는 보안 저장소의 가용성을 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-118">The choice between the two methods is primarily dictated by how secure the device authentication needs to be, and availability of secure storage on the device (to store the private key securely).</span></span>

## <a name="iot-hub-security-tokens"></a><span data-ttu-id="3ec8f-119">IoT Hub 보안 토큰</span><span class="sxs-lookup"><span data-stu-id="3ec8f-119">IoT Hub security tokens</span></span>
<span data-ttu-id="3ec8f-120">IoT Hub는 네트워크에서 토큰이 전송되는 것을 피하기 위해 보안 토큰을 사용하여 장치 및 서비스를 인증합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-120">IoT Hub uses security tokens to authenticate devices and services to avoid sending keys on the network.</span></span> <span data-ttu-id="3ec8f-121">또한 보안 토큰은 유효 기간 및 범위가 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-121">Additionally, security tokens are limited in time validity and scope.</span></span> <span data-ttu-id="3ec8f-122">Azure IoT SDK는 특별한 구성이 필요하지 않고 토큰을 자동으로 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-122">Azure IoT SDKs automatically generate tokens without requiring any special configuration.</span></span> <span data-ttu-id="3ec8f-123">그러나 일부 시나리오에서는 사용자가 보안 토큰을 직접 생성하고 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-123">Some scenarios, however, require the user to generate and use security tokens directly.</span></span> <span data-ttu-id="3ec8f-124">여기에는 MQTT, AMQP 또는 HTTP 표면의 직접 사용 또는 토큰 서비스 패턴의 구현이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-124">These include the direct use of the MQTT, AMQP, or HTTP surfaces, or the implementation of the token service pattern.</span></span>

<span data-ttu-id="3ec8f-125">보안 토큰의 구조 및 사용법에 대한 자세한 내용은 다음 문서에 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-125">More details on the structure of the security token and its usage can be found in the following articles:</span></span>

* <span data-ttu-id="3ec8f-126">[보안 토큰 구조][lnk-security-tokens]</span><span class="sxs-lookup"><span data-stu-id="3ec8f-126">[Security token structure][lnk-security-tokens]</span></span>
* <span data-ttu-id="3ec8f-127">[장치로 SAS 토큰 사용][lnk-sas-tokens]</span><span class="sxs-lookup"><span data-stu-id="3ec8f-127">[Using SAS tokens as a device][lnk-sas-tokens]</span></span>

<span data-ttu-id="3ec8f-128">각 IoT Hub에는 진행 중인 클라우드-장치 메시지를 포함하는 큐와 같은 서비스에 장치 단위 리소스를 만들고 장치 지향 끝점에 대한 액세스를 허용하는 데 사용할 수 있는 [ID 레지스트리][lnk-identity-registry]가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-128">Each IoT Hub has an [identity registry][lnk-identity-registry] that can be used to create per-device resources in the service, such as a queue that contains in-flight cloud-to-device messages, and to allow access to the device-facing endpoints.</span></span> <span data-ttu-id="3ec8f-129">IoT Hub ID 레지스트리는 장치 ID에 대한 보안 저장소와 솔루션을 위한 보안 키를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-129">The IoT Hub identity registry provides secure storage of device identities and security keys for a solution.</span></span> <span data-ttu-id="3ec8f-130">개별 또는 그룹 장치 ID를 허용 목록 또는 차단 목록에 추가하여 장치 액세스를 완벽하게 제어할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-130">Individual or groups of device identities can be added to an allow list, or a block list, enabling complete control over device access.</span></span> <span data-ttu-id="3ec8f-131">다음 문서에서는 ID 레지스트리의 구조 및 지원되는 작업에 대한 자세한 내용을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-131">The following articles provide more details on the structure of the identity registry and supported operations.</span></span>

<span data-ttu-id="3ec8f-132">[IoT Hub는 MQTT, AMQP 및 HTTP와 같은 프로토콜을 지원합니다][lnk-protocols].</span><span class="sxs-lookup"><span data-stu-id="3ec8f-132">[IoT Hub supports protocols such as MQTT, AMQP, and HTTP][lnk-protocols].</span></span> <span data-ttu-id="3ec8f-133">이러한 각 프로토콜은 IoT 장치에서 IoT Hub로의 보안 토큰을 다음과 같이 다르게 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-133">Each of these protocols use security tokens from the IoT device to IoT Hub differently:</span></span>

* <span data-ttu-id="3ec8f-134">AMQP: SASL PLAIN 및 AMQP 클레임 기반 보안(IoT Hub 수준 토큰의 경우 {policyName}@sas.root.{iothubName}, 장치 범위 토큰의 경우 {deviceId})</span><span class="sxs-lookup"><span data-stu-id="3ec8f-134">AMQP: SASL PLAIN and AMQP Claims-based security ({policyName}@sas.root.{iothubName} in the case of IoT hub-level tokens; {deviceId} in case of device-scoped tokens).</span></span>
* <span data-ttu-id="3ec8f-135">MQTT: CONNECT 패킷은 **사용자 이름** 필드에서는 {deviceId}을(를) {ClientId}, {IoThubhostname}/{deviceId}(으)로 사용하고, **암호** 필드에서는 SAS 토큰을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-135">MQTT: CONNECT packet uses {deviceId} as the {ClientId}, {IoThubhostname}/{deviceId} in the **Username** field and a SAS token in the **Password** field.</span></span>
* <span data-ttu-id="3ec8f-136">HTTP: 올바른 토큰은 권한 부여 요청 헤더에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-136">HTTP: Valid token is in the authorization request header.</span></span>

<span data-ttu-id="3ec8f-137">IoT Hub ID 레지스트리를 사용하여 장치별 보안 자격 증명 및 액세스 제어를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-137">IoT Hub identity registry can be used to configure per-device security credentials and access control.</span></span> <span data-ttu-id="3ec8f-138">그러나 [사용자 지정 장치 ID 레지스트리 및/또는 인증 체계][lnk-custom-auth]에 이미 상당한 투자를 한 IoT 솔루션의 경우 토큰 서비스를 만들어 IoT Hub가 있는 기존 인프라로 통합할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-138">However, if an IoT solution already has a significant investment in a [custom device identity registry and/or authentication scheme][lnk-custom-auth], it can be integrated into an existing infrastructure with IoT Hub by creating a token service.</span></span>

### <a name="x509-certificate-based-device-authentication"></a><span data-ttu-id="3ec8f-139">X.509 인증서 기반 장치 인증</span><span class="sxs-lookup"><span data-stu-id="3ec8f-139">X.509 certificate-based device authentication</span></span>
<span data-ttu-id="3ec8f-140">[장치 기반 X.509 인증서][lnk-use-x509] 및 연결된 개인/공개 키 쌍을 사용하면 물리적 계층에서 추가 인증이 수행될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-140">The use of a [device-based X.509 certificate][lnk-use-x509] and its associated private and public key pair allows additional authentication at the physical layer.</span></span> <span data-ttu-id="3ec8f-141">개인 키는 장치에 안전하게 저장되며 장치 외부에서 검색할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-141">The private key is stored securely in the device and is not discoverable outside the device.</span></span> <span data-ttu-id="3ec8f-142">X.509 인증서에는 장치 ID와 같은 장치 정보와 기타 조직 세부 정보가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-142">The X.509 certificate contains information about the device, such as device ID, and other organizational details.</span></span> <span data-ttu-id="3ec8f-143">인증서의 서명은 개인 키를 사용하여 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-143">A signature of the certificate is generated by using the private key.</span></span>

<span data-ttu-id="3ec8f-144">고급 장치 프로비전 흐름:</span><span class="sxs-lookup"><span data-stu-id="3ec8f-144">High-level device provisioning flow:</span></span>

* <span data-ttu-id="3ec8f-145">물리적 장치에 식별자 연결 - 장치 ID 및/또는 장치 제조 또는 위임 동안 장치에 연결된 X.509 인증서</span><span class="sxs-lookup"><span data-stu-id="3ec8f-145">Associate an identifier to a physical device – device identity and/or X.509 certificate associated to the device during device manufacturing or commissioning.</span></span>
* <span data-ttu-id="3ec8f-146">IoT Hub에서 해당 ID 항목 만들기 – 장치 ID 및 IoT Hub ID 레지스트리의 연결된 장치 정보</span><span class="sxs-lookup"><span data-stu-id="3ec8f-146">Create a corresponding identity entry in IoT Hub – device identity and associated device information in the IoT Hub identity registry.</span></span>
* <span data-ttu-id="3ec8f-147">X.509 인증서 지문을 IoT Hub ID 레지스트리에 안전하게 저장</span><span class="sxs-lookup"><span data-stu-id="3ec8f-147">Securely store X.509 certificate thumbprint in IoT Hub identity registry.</span></span>

### <a name="root-certificate-on-device"></a><span data-ttu-id="3ec8f-148">장치의 루트 인증서</span><span class="sxs-lookup"><span data-stu-id="3ec8f-148">Root certificate on device</span></span>
<span data-ttu-id="3ec8f-149">IoT Hub와의 보안 TLS 연결을 설정하는 동안 IoT 장치는 장치 SDK의 일부인 루트 인증서를 사용하여 IoT Hub를 인증합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-149">While establishing a secure TLS connection with IoT Hub, the IoT device authenticates IoT Hub using a root certificate which is part of the device SDK.</span></span> <span data-ttu-id="3ec8f-150">C 클라이언트 SDK의 경우 인증서는 repo의 루트 아래에 있는 "\\c\\certs" 폴더 아래에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-150">For the C client SDK the certificate is located under the folder "\\c\\certs" under the root of the repo.</span></span> <span data-ttu-id="3ec8f-151">이러한 루트 인증서는 수명이 길지만 만료되거나 해지될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-151">Though these root certificates are long-lived, they still may expire or be revoked.</span></span> <span data-ttu-id="3ec8f-152">장치의 인증서를 업데이트할 수 없는 경우 나중에 장치를 IoT Hub(또는 다른 클라우드 서비스)에 연결하지 못할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-152">If there is no way of updating the certificate on the device, the device may not be able to subsequently connect to the IoT Hub (or any other cloud service).</span></span> <span data-ttu-id="3ec8f-153">IoT 장치가 배포된 후에 루트 인증서를 업데이트하는 방법을 유지하면 이러한 위험을 효과적으로 완화하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-153">Having a means to update the root certificate once the IoT device is deployed will effectively mitigate this risk.</span></span>

## <a name="securing-the-connection"></a><span data-ttu-id="3ec8f-154">연결 보안</span><span class="sxs-lookup"><span data-stu-id="3ec8f-154">Securing the connection</span></span>
<span data-ttu-id="3ec8f-155">IoT 장치와 IoT Hub 간 인터넷 연결은 TLS(전송 계층 보안) 표준을 사용하여 보안이 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-155">Internet connection between the IoT device and IoT Hub is secured using the Transport Layer Security (TLS) standard.</span></span> <span data-ttu-id="3ec8f-156">Azure IoT는 [TLS 1.2][lnk-tls12], TLS 1.1 및 TLS 1.0을 순서대로 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-156">Azure IoT supports [TLS 1.2][lnk-tls12], TLS 1.1 and TLS 1.0, in this order.</span></span> <span data-ttu-id="3ec8f-157">TLS 1.0에 대한 지원은 이전 버전과의 호환성을 위해서만 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-157">Support for TLS 1.0 is provided for backward compatibility only.</span></span> <span data-ttu-id="3ec8f-158">TLS 1.2가 최상의 보안을 제공하므로 권장됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-158">It is recommended to use TLS 1.2 since it provides the most security.</span></span>

<span data-ttu-id="3ec8f-159">Azure IoT Suite는 다음 암호화 그룹을 순서대로 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-159">Azure IoT Suite supports the following Cipher Suites, in this order.</span></span>

| <span data-ttu-id="3ec8f-160">암호화 그룹</span><span class="sxs-lookup"><span data-stu-id="3ec8f-160">Cipher Suite</span></span> | <span data-ttu-id="3ec8f-161">길이</span><span class="sxs-lookup"><span data-stu-id="3ec8f-161">Length</span></span> |
| --- | --- |
| <span data-ttu-id="3ec8f-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-162">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA384 (0xc028) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="3ec8f-163">7680 bits RSA) FS</span><span class="sxs-lookup"><span data-stu-id="3ec8f-163">7680 bits RSA) FS</span></span> |<span data-ttu-id="3ec8f-164">256</span><span class="sxs-lookup"><span data-stu-id="3ec8f-164">256</span></span> |
| <span data-ttu-id="3ec8f-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-165">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0xc027) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="3ec8f-166">3072 bits RSA) FS</span><span class="sxs-lookup"><span data-stu-id="3ec8f-166">3072 bits RSA) FS</span></span> |<span data-ttu-id="3ec8f-167">128</span><span class="sxs-lookup"><span data-stu-id="3ec8f-167">128</span></span> |
| <span data-ttu-id="3ec8f-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-168">TLS\_ECDHE\_RSA\_WITH\_AES\_256\_CBC\_SHA (0xc014) ECDH secp384r1 (eq.</span></span> <span data-ttu-id="3ec8f-169">7680 bits RSA) FS</span><span class="sxs-lookup"><span data-stu-id="3ec8f-169">7680 bits RSA) FS</span></span> |<span data-ttu-id="3ec8f-170">256</span><span class="sxs-lookup"><span data-stu-id="3ec8f-170">256</span></span> |
| <span data-ttu-id="3ec8f-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-171">TLS\_ECDHE\_RSA\_WITH\_AES\_128\_CBC\_SHA (0xc013) ECDH secp256r1 (eq.</span></span> <span data-ttu-id="3ec8f-172">3072 bits RSA) FS</span><span class="sxs-lookup"><span data-stu-id="3ec8f-172">3072 bits RSA) FS</span></span> |<span data-ttu-id="3ec8f-173">128</span><span class="sxs-lookup"><span data-stu-id="3ec8f-173">128</span></span> |
| <span data-ttu-id="3ec8f-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span><span class="sxs-lookup"><span data-stu-id="3ec8f-174">TLS\_RSA\_WITH\_AES\_256\_GCM\_SHA384 (0x9d)</span></span> |<span data-ttu-id="3ec8f-175">256</span><span class="sxs-lookup"><span data-stu-id="3ec8f-175">256</span></span> |
| <span data-ttu-id="3ec8f-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span><span class="sxs-lookup"><span data-stu-id="3ec8f-176">TLS\_RSA\_WITH\_AES\_128\_GCM\_SHA256 (0x9c)</span></span> |<span data-ttu-id="3ec8f-177">128</span><span class="sxs-lookup"><span data-stu-id="3ec8f-177">128</span></span> |
| <span data-ttu-id="3ec8f-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span><span class="sxs-lookup"><span data-stu-id="3ec8f-178">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA256 (0x3d)</span></span> |<span data-ttu-id="3ec8f-179">256</span><span class="sxs-lookup"><span data-stu-id="3ec8f-179">256</span></span> |
| <span data-ttu-id="3ec8f-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span><span class="sxs-lookup"><span data-stu-id="3ec8f-180">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA256 (0x3c)</span></span> |<span data-ttu-id="3ec8f-181">128</span><span class="sxs-lookup"><span data-stu-id="3ec8f-181">128</span></span> |
| <span data-ttu-id="3ec8f-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span><span class="sxs-lookup"><span data-stu-id="3ec8f-182">TLS\_RSA\_WITH\_AES\_256\_CBC\_SHA (0x35)</span></span> |<span data-ttu-id="3ec8f-183">256</span><span class="sxs-lookup"><span data-stu-id="3ec8f-183">256</span></span> |
| <span data-ttu-id="3ec8f-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span><span class="sxs-lookup"><span data-stu-id="3ec8f-184">TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA (0x2f)</span></span> |<span data-ttu-id="3ec8f-185">128</span><span class="sxs-lookup"><span data-stu-id="3ec8f-185">128</span></span> |
| <span data-ttu-id="3ec8f-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span><span class="sxs-lookup"><span data-stu-id="3ec8f-186">TLS\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA (0xa)</span></span> |<span data-ttu-id="3ec8f-187">112</span><span class="sxs-lookup"><span data-stu-id="3ec8f-187">112</span></span> |

## <a name="securing-the-cloud"></a><span data-ttu-id="3ec8f-188">클라우드 보안</span><span class="sxs-lookup"><span data-stu-id="3ec8f-188">Securing the cloud</span></span>
<span data-ttu-id="3ec8f-189">Azure IoT Hub에서는 각 보안 키에 대해 [액세스 제어 정책][lnk-protocols]을 정의할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-189">Azure IoT Hub allows definition of [access control policies][lnk-protocols] for each security key.</span></span> <span data-ttu-id="3ec8f-190">또한 다음 권한 집합을 사용하여 각 IoT Hub의 끝점에 대한 액세스 권한을 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-190">It uses the following set of permissions to grant access to each of IoT Hub's endpoints.</span></span> <span data-ttu-id="3ec8f-191">사용 권한은 기능에 따라 IoT Hub에 대한 액세스를 제한합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-191">Permissions limit the access to an IoT Hub based on functionality.</span></span>

* <span data-ttu-id="3ec8f-192">**RegistryRead**.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-192">**RegistryRead**.</span></span> <span data-ttu-id="3ec8f-193">ID 레지스트리에 대한 읽기 액세스 권한을 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-193">Grants read access to the identity registry.</span></span> <span data-ttu-id="3ec8f-194">자세한 내용은 [ID 레지스트리][lnk-identity-registry]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-194">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="3ec8f-195">**RegistryReadWrite**.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-195">**RegistryReadWrite**.</span></span> <span data-ttu-id="3ec8f-196">ID 레지스트리에 대한 읽기 및 쓰기 액세스 권한을 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-196">Grants read and write access to the identity registry.</span></span> <span data-ttu-id="3ec8f-197">자세한 내용은 [ID 레지스트리][lnk-identity-registry]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-197">For more information, see [identity registry][lnk-identity-registry].</span></span>
* <span data-ttu-id="3ec8f-198">**ServiceConnect**.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-198">**ServiceConnect**.</span></span> <span data-ttu-id="3ec8f-199">클라우드 서비스 지향 통신 및 모니터링 중인 끝점에 대한 액세스를 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-199">Grants access to cloud service-facing communication and monitoring endpoints.</span></span> <span data-ttu-id="3ec8f-200">예를 들어 장치-클라우드 메시지를 받고 클라우드-장치 메시지를 보내며 해당 전달 승인을 검색할 수 있는 권한을 백 엔드 클라우드 서비스에 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-200">For example, it grants permission to back-end cloud services to receive device-to-cloud messages, send cloud-to-device messages, and retrieve the corresponding delivery acknowledgments.</span></span>
* <span data-ttu-id="3ec8f-201">**DeviceConnect**.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-201">**DeviceConnect**.</span></span> <span data-ttu-id="3ec8f-202">장치 지향 끝점에 대한 액세스를 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-202">Grants access to device-facing endpoints.</span></span> <span data-ttu-id="3ec8f-203">예를 들어 장치-클라우드 메시지를 보내고 클라우드-장치 메시지를 받을 수 있는 권한을 클라우드에 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-203">For example, it grants permission to send device-to-cloud messages and receive cloud-to-device messages.</span></span> <span data-ttu-id="3ec8f-204">이 권한은 장치에서 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-204">This permission is used by devices.</span></span>

<span data-ttu-id="3ec8f-205">장치 ID 키를 사용하거나 공유 액세스 키를 사용하는 등 두 가지 방법으로 [보안 토큰][lnk-sas-tokens]과 함께 IoT Hub에서 **DeviceConnect** 권한을 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-205">There are two ways to obtain **DeviceConnect** permissions with IoT Hub with [security tokens][lnk-sas-tokens]: using a device identity key, or a shared access key.</span></span> <span data-ttu-id="3ec8f-206">또한 장치에서 액세스할 수 있는 모든 기능이 `/devices/{deviceId}`접두사가 있는 끝점에서 디자인 시 노출되는 것을 유념해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-206">Moreover, it is important to note that all functionality accessible from devices is exposed by design on endpoints with prefix `/devices/{deviceId}`.</span></span>

<span data-ttu-id="3ec8f-207">[서비스 구성 요소는 적절한 권한을 부여하는 공유 액세스 정책을 사용하여 보안 토큰을 생성할 수 있습니다][lnk-service-tokens].</span><span class="sxs-lookup"><span data-stu-id="3ec8f-207">[Service components can only generate security tokens][lnk-service-tokens] using shared access policies granting the appropriate permissions.</span></span>

<span data-ttu-id="3ec8f-208">Azure IoT Hub 및 이 솔루션에 속할 수 있는 기타 서비스는 Azure Active Directory를 사용하여 사용자를 관리할 수 있도록 허용합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-208">Azure IoT Hub and other services which may be part of the solution allow management of users using the Azure Active Directory.</span></span>

<span data-ttu-id="3ec8f-209">Azure IoT Hub를 통해 수집된 데이터는 Azure Stream Analytics, Azure Blob Storage 등과 같은 다양한 서비스에서 사용될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-209">Data ingested by Azure IoT Hub can be consumed by a variety of services such as Azure Stream Analytics and Azure blob storage.</span></span> <span data-ttu-id="3ec8f-210">이러한 서비스는 관리 액세스를 허용합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-210">These services allow management access.</span></span> <span data-ttu-id="3ec8f-211">아래에서 이러한 서비스 및 사용 가능한 옵션에 대해 읽어보세요.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-211">Read more about these services and available options below:</span></span>

* <span data-ttu-id="3ec8f-212">[Azure DocumentDB][lnk-docdb]: 반구조화된 데이터에 대한 확장성 있고 완전히 인덱싱된 데이터베이스 서비스로 프로비전하는 장치에 대한 메타데이터(예: 특성, 구성 및 보안 속성)를 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-212">[Azure DocumentDB][lnk-docdb]: A scalable, fully-indexed database service for semi-structured data that manages metadata for the devices you provision, such as attributes, configuration, and security properties.</span></span> <span data-ttu-id="3ec8f-213">DocumentDB는 높은 성능 및 처리량 처리, 데이터의 스키마와 관계 없는 인덱싱 및 풍부한 SQL 쿼리 인터페이스를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-213">DocumentDB offers high-performance and high-throughput processing, schema-agnostic indexing of data, and a rich SQL query interface.</span></span>
* <span data-ttu-id="3ec8f-214">[Azure Stream Analytics][lnk-asa]: 장치, 센서, 인프라 및 응용 프로그램에서 실시간 정보를 파악하는 저비용 분석 솔루션을 빠르게 개발 및 배포하는 클라우드의 실시간 스트림 처리입니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-214">[Azure Stream Analytics][lnk-asa]: Real-time stream processing in the cloud that enables you to rapidly develop and deploy a low-cost analytics solution to uncover real-time insights from devices, sensors, infrastructure, and applications.</span></span> <span data-ttu-id="3ec8f-215">이 완전히 관리되는 서비스의 데이터를 높은 처리량, 낮은 대기 시간 및 복원력을 확보하면서 어떤 볼륨으로도 확장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-215">The data from this fully-managed service can scale to any volume while still achieving high throughput, low latency, and resiliency.</span></span>
* <span data-ttu-id="3ec8f-216">[Azure App Services][lnk-appservices]: 강력한 웹 및 모바일 앱을 빌드하기 위한 클라우드 플랫폼으로 클라우드 또는 온-프레미스 등 어디서나 데이터에 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-216">[Azure App Services][lnk-appservices]: A cloud platform to build powerful web and mobile apps that connect to data anywhere; in the cloud or on-premises.</span></span> <span data-ttu-id="3ec8f-217">iOS, Android 및 Windows를 위한 유용한 모바일 앱을 빌드하세요.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-217">Build engaging mobile apps for iOS, Android, and Windows.</span></span> <span data-ttu-id="3ec8f-218">수십 개의 클라우드 기반 서비스와 엔터프라이즈 응용 프로그램에 즉시 연결 가능하므로 귀사의 SaaS(Software as a Service) 및 엔터프라이즈 응용 프로그램과 통합이 용이합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-218">Integrate with your Software as a Service (SaaS) and enterprise applications with out-of-the-box connectivity to dozens of cloud-based services and enterprise applications.</span></span> <span data-ttu-id="3ec8f-219">가장 자주 사용하는 언어와 IDE(.NET, Node.js, PHP, Python 또는 Java)로 코딩하여 더욱 빨리 웹앱과 API를 빌드하세요.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-219">Code in your favorite language and IDE (.NET, Node.js, PHP, Python, or Java) to build web apps and APIs faster than ever.</span></span>
* <span data-ttu-id="3ec8f-220">[Logic Apps][lnk-logicapps]: Azure App Service의 Logic Apps 기능을 통해 IoT 솔루션을 기존의 LOB(기간 업무) 시스템에 통합하고 워크플로 프로세스를 자동화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-220">[Logic Apps][lnk-logicapps]: The Logic Apps feature of Azure App Service helps integrate your IoT solution to your existing line-of-business systems and automate workflow processes.</span></span> <span data-ttu-id="3ec8f-221">논리 앱을 사용하면 개발자는 트리거부터 시작하여 비즈니스 프로세스와 통합할 강력한 커넥터를 사용하는 규칙 및 작업으로 이루어진 일련의 단계를 수행하는 워크플로를 설계할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-221">Logic Apps enables developers to design workflows that start from a trigger and then execute a series of steps—rules and actions that use powerful connectors to integrate with your business processes.</span></span> <span data-ttu-id="3ec8f-222">논리 앱은 SaaS, 클라우드 기반 및 온-프레미스 응용 프로그램의 방대한 생태계에 즉시 연결을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-222">Logic Apps offers out-of-the-box connectivity to a vast ecosystem of SaaS, cloud-based, and on-premises applications.</span></span>
* <span data-ttu-id="3ec8f-223">[Azure Blob Storage][lnk-blob]: 장치가 클라우드로 전송하는 데이터에 대한 안정적이고 경제적인 클라우드 저장소입니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-223">[Azure blob storage][lnk-blob]: Reliable, economical cloud storage for the data that your devices send to the cloud.</span></span>

## <a name="conclusion"></a><span data-ttu-id="3ec8f-224">결론</span><span class="sxs-lookup"><span data-stu-id="3ec8f-224">Conclusion</span></span>
<span data-ttu-id="3ec8f-225">이 문서에서는 Azure IoT를 사용하여 IoT 인프라를 디자인 및 배포하기 위한 구현 수준 세부 정보의 개요를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-225">This article provides overview of implementation level details for designing and deploying an IoT infrastructure using Azure IoT.</span></span> <span data-ttu-id="3ec8f-226">각 구성 요소를 보안 상태로 구성하는 것은 전체 IoT 인프라 보안 설정에서 핵심이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-226">Configuring each component to be secure is key in securing the overall IoT infrastructure.</span></span> <span data-ttu-id="3ec8f-227">Azure IoT에서 사용할 수 있는 디자인 선택 옵션은 일정 수준의 유연성과 선택 다양성을 제공하지만 선택 항목마다 보안 문제가 관련되어 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-227">The design choices available in Azure IoT provide some level of flexibility and choice; however, each choice may have security implications.</span></span> <span data-ttu-id="3ec8f-228">위험/비용 평가를 통해 이러한 각 선택 옵션을 평가하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="3ec8f-228">It is recommended that each of these choices be evaluated through a risk/cost assessment.</span></span>

[img-overview]: media/iot-secure-your-deployment/overview.png

[lnk-security-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#security-token-structure
[lnk-sas-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-sas-tokens-in-a-device-app
[lnk-identity-registry]: ../articles/iot-hub/iot-hub-devguide-identity-registry.md
[lnk-protocols]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-custom-auth]: ../articles/iot-hub/iot-hub-devguide-security.md#custom-device-authentication
[lnk-x509]: http://www.itu.int/rec/T-REC-X.509-201210-I/en
[lnk-use-x509]: ../articles/iot-hub/iot-hub-devguide-security.md
[lnk-tls12]: https://tools.ietf.org/html/rfc5246
[lnk-service-tokens]: ../articles/iot-hub/iot-hub-devguide-security.md#use-security-tokens-from-service-components
[lnk-docdb]: https://azure.microsoft.com/services/documentdb/
[lnk-asa]: https://azure.microsoft.com/services/stream-analytics/
[lnk-appservices]: https://azure.microsoft.com/services/app-service/
[lnk-logicapps]: https://azure.microsoft.com/services/app-service/logic/
[lnk-blob]: https://azure.microsoft.com/services/storage/
