---
title: "Azure Active Directory B2C: 사용자 지정 정책 | Microsoft Docs"
description: "Azure Active Directory B2C 사용자 지정 정책에 대한 항목"
services: active-directory-b2c
documentationcenter: 
author: parakhj
manager: krassk
editor: parakhj
ms.assetid: 1ff398a4-2079-4615-94f1-57de22c0aad6
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.topic: article
ms.devlang: na
ms.date: 04/04/2017
ms.author: parakhj
ms.openlocfilehash: 33f62a33ea7a3fadb6e7b045de10df25f5edbe83
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-active-directory-b2c-custom-policies"></a><span data-ttu-id="f16bc-103">Azure Active Directory B2C: 사용자 지정 정책</span><span class="sxs-lookup"><span data-stu-id="f16bc-103">Azure Active Directory B2C: Custom policies</span></span>

[!INCLUDE [active-directory-b2c-advanced-audience-warning](../../includes/active-directory-b2c-advanced-audience-warning.md)]

## <a name="what-are-custom-policies"></a><span data-ttu-id="f16bc-104">사용자 지정 정책이란?</span><span class="sxs-lookup"><span data-stu-id="f16bc-104">What are custom policies?</span></span>

<span data-ttu-id="f16bc-105">사용자 지정 정책은 Azure AD B2C 테넌트의 동작을 정의하는 구성 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-105">Custom policies are configuration files that define the behavior of your Azure AD B2C tenant.</span></span> <span data-ttu-id="f16bc-106">Azure AD B2C 포털에서 가장 일반적인 ID 작업에 대해 **기본 제공 정책**이 미리 정의되는 반면 거의 무제한의 많은 작업을 완료하기 위해 ID 개발자는 사용자 지정 정책을 완벽하게 편집할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-106">Whereas **built-in policies** are predefined in the Azure AD B2C portal for the most common identity tasks, custom policies can be fully edited by an identity developer to complete a near unlimited number of tasks.</span></span> <span data-ttu-id="f16bc-107">사용자 지정 정책이 사용자 및 ID 시나리오에 알맞은지 확인하려면 계속 읽습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-107">Read on to determine if custom policies are right for you and your identity scenario.</span></span>

<span data-ttu-id="f16bc-108">**사용자 지정 정책 편집은 일부 사용자에게만 해당됩니다.**</span><span class="sxs-lookup"><span data-stu-id="f16bc-108">**Custom policy editing is not for everyone.**</span></span> <span data-ttu-id="f16bc-109">학습 곡선이 길고 시작 시간이 길면 비슷한 전문 지식을 유지하기 위해 향후 사용자 지정 정책을 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-109">The learning curve is demanding, the startup time is longer, and future changes to custom policies will require similar expertise to maintain.</span></span> <span data-ttu-id="f16bc-110">사용자 지정 정책을 사용하기 전에 먼저 시나리오에 대한 기본 제공 정책을 신중하게 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-110">Built-in policies should be carefully considered first for your scenario before using custom policies.</span></span>

## <a name="comparing-built-in-policies-and-custom-policies"></a><span data-ttu-id="f16bc-111">기본 제공 정책과 사용자 지정 정책 비교</span><span class="sxs-lookup"><span data-stu-id="f16bc-111">Comparing built-in policies and custom policies</span></span>

| | <span data-ttu-id="f16bc-112">기본 제공 정책</span><span class="sxs-lookup"><span data-stu-id="f16bc-112">Built-in policies</span></span> | <span data-ttu-id="f16bc-113">사용자 지정 정책</span><span class="sxs-lookup"><span data-stu-id="f16bc-113">Custom policies</span></span> |
|-|-------------------|-----------------|
|<span data-ttu-id="f16bc-114">대상 사용자</span><span class="sxs-lookup"><span data-stu-id="f16bc-114">Target users</span></span> | <span data-ttu-id="f16bc-115">ID 전문 지식이 있거나 없는 모든 앱 개발자</span><span class="sxs-lookup"><span data-stu-id="f16bc-115">All app developers with or without identity expertise</span></span> | <span data-ttu-id="f16bc-116">ID 전문가: 시스템 통합 서비스, 컨설턴트 및 사내 ID 팀입니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-116">Identity pros: systems integrators, consultants and in-house identity teams.</span></span> <span data-ttu-id="f16bc-117">OpenIDConnect 흐름에 만족하고 ID 공급자와 클레임 기반 인증을 이해합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-117">They are comfortable with OpenIDConnect flows, and understand identity providers and claims-based authentication</span></span> |
|<span data-ttu-id="f16bc-118">구성 방법</span><span class="sxs-lookup"><span data-stu-id="f16bc-118">Configuration method</span></span> | <span data-ttu-id="f16bc-119">사용자에게 친숙한 UI를 사용하는 Azure Portal</span><span class="sxs-lookup"><span data-stu-id="f16bc-119">Azure portal with a user-friendly UI</span></span> | <span data-ttu-id="f16bc-120">XML 파일 직접 편집 및 Azure Portal에 업로드</span><span class="sxs-lookup"><span data-stu-id="f16bc-120">Directly editing XML files and then uploading to the Azure portal</span></span> |
|<span data-ttu-id="f16bc-121">UI 사용자 지정</span><span class="sxs-lookup"><span data-stu-id="f16bc-121">UI customization</span></span> | <span data-ttu-id="f16bc-122">HTML, CSS 및 JScript 지원을 비롯한 전체 UI 사용자 지정(사용자 지정 도메인 필요)</span><span class="sxs-lookup"><span data-stu-id="f16bc-122">Full UI customization, including HTML, CSS, and jscript support(requires custom domain)</span></span><br><br><span data-ttu-id="f16bc-123">사용자 지정 문자열을 사용하여 다국어 지원</span><span class="sxs-lookup"><span data-stu-id="f16bc-123">Multilanguage support with Custom strings</span></span> | <span data-ttu-id="f16bc-124">동일</span><span class="sxs-lookup"><span data-stu-id="f16bc-124">Same</span></span> |
| <span data-ttu-id="f16bc-125">특성 사용자 지정</span><span class="sxs-lookup"><span data-stu-id="f16bc-125">Attribute customization</span></span> | <span data-ttu-id="f16bc-126">표준 및 사용자 지정 특성</span><span class="sxs-lookup"><span data-stu-id="f16bc-126">Standard and custom attributes</span></span> | <span data-ttu-id="f16bc-127">동일</span><span class="sxs-lookup"><span data-stu-id="f16bc-127">Same</span></span> |
|<span data-ttu-id="f16bc-128">토큰 및 세션 관리</span><span class="sxs-lookup"><span data-stu-id="f16bc-128">Token and session management</span></span> | <span data-ttu-id="f16bc-129">사용자 지정 토큰 및 다중 세션 옵션</span><span class="sxs-lookup"><span data-stu-id="f16bc-129">Custom token and multiple session options</span></span> | <span data-ttu-id="f16bc-130">동일</span><span class="sxs-lookup"><span data-stu-id="f16bc-130">Same</span></span> |
|<span data-ttu-id="f16bc-131">ID 공급자</span><span class="sxs-lookup"><span data-stu-id="f16bc-131">Identity Providers</span></span>| <span data-ttu-id="f16bc-132">**현재**: 미리 정의된 로컬, 소셜 공급자</span><span class="sxs-lookup"><span data-stu-id="f16bc-132">**Today**: predefined local, social provider</span></span><br><br><span data-ttu-id="f16bc-133">**이후**: 표준 기반 OIDC, SAML, OAuth</span><span class="sxs-lookup"><span data-stu-id="f16bc-133">**Future**: Standards-based OIDC, SAML, OAuth</span></span> | <span data-ttu-id="f16bc-134">**현재**: 표준 기반 OIDC, OAUTH, SAML</span><span class="sxs-lookup"><span data-stu-id="f16bc-134">**Today**: Standards-based OIDC, OAUTH, SAML</span></span><br><br><span data-ttu-id="f16bc-135">**이후**: WsFed</span><span class="sxs-lookup"><span data-stu-id="f16bc-135">**Future**: WsFed</span></span> |
|<span data-ttu-id="f16bc-136">ID 작업(예제)</span><span class="sxs-lookup"><span data-stu-id="f16bc-136">Identity Tasks (examples)</span></span> | <span data-ttu-id="f16bc-137">로컬 및 많은 소셜 계정을 사용하여 등록 또는 로그인</span><span class="sxs-lookup"><span data-stu-id="f16bc-137">Signup or SignIn with local and many social accounts</span></span><br><br><span data-ttu-id="f16bc-138">셀프 서비스 암호 재설정</span><span class="sxs-lookup"><span data-stu-id="f16bc-138">Self-Service Password Reset</span></span><br><br><span data-ttu-id="f16bc-139">프로필 편집</span><span class="sxs-lookup"><span data-stu-id="f16bc-139">Profile Edit</span></span><br><br><span data-ttu-id="f16bc-140">Multi-Factor Auth 시나리오</span><span class="sxs-lookup"><span data-stu-id="f16bc-140">Multi-Factor Auth scenarios</span></span><br><br><span data-ttu-id="f16bc-141">토큰 및 세션 사용자 지정</span><span class="sxs-lookup"><span data-stu-id="f16bc-141">Customize Tokens and sessions</span></span><br><br><span data-ttu-id="f16bc-142">액세스 토큰 흐름</span><span class="sxs-lookup"><span data-stu-id="f16bc-142">Access Token flows</span></span> | <span data-ttu-id="f16bc-143">사용자 지정 ID 공급자를 사용하는 기본 정책과 동일한 작업 완료 또는 사용자 지정 범위 사용</span><span class="sxs-lookup"><span data-stu-id="f16bc-143">Complete the same tasks as built-in policies using custom identity providers or use custom scopes</span></span><br><br><span data-ttu-id="f16bc-144">등록 시 다른 시스템에서 사용자 프로비전</span><span class="sxs-lookup"><span data-stu-id="f16bc-144">Provision user in another system at the time of registration</span></span><br><br><span data-ttu-id="f16bc-145">고유한 전자 메일 서비스 공급자를 사용하여 환영 전자 메일 보내기</span><span class="sxs-lookup"><span data-stu-id="f16bc-145">Send a welcome email using your own email service provider</span></span><br><br><span data-ttu-id="f16bc-146">B2C 외부 사용자 저장소 사용</span><span class="sxs-lookup"><span data-stu-id="f16bc-146">Use a user store outside B2C</span></span><br><br><span data-ttu-id="f16bc-147">API를 통해 신뢰할 수 있는 시스템을 사용하여 사용자 제공 정보의 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="f16bc-147">Validate user provided information with a trusted system via API</span></span> |

## <a name="policy-files"></a><span data-ttu-id="f16bc-148">정책 파일</span><span class="sxs-lookup"><span data-stu-id="f16bc-148">Policy files</span></span>

<span data-ttu-id="f16bc-149">사용자 지정 정책은 계층 구조 체인에서 서로를 참조하는 하나 또는 여러 XML 형식 파일로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-149">A custom policy is represented as one or several XML-formatted files which refer to each other in a hierarchical chain.</span></span> <span data-ttu-id="f16bc-150">XML 요소는 다른 요소 간에 클레임 스키마, 클레임 변환, 콘텐츠 정의, 클레임 공급자/기술 프로필 및 Userjourney 오케스트레이션 단계를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-150">The XML elements define: Claims schema, claims transformations, content definitions, claims providers/technical profiles, and Userjourney orchestration steps, among other elements.</span></span>

<span data-ttu-id="f16bc-151">세 가지 종류의 정책 파일을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-151">We recommend the use of three types of policy files:</span></span>

- <span data-ttu-id="f16bc-152">**기본 파일**은 Azure에서 전체 샘플을 제공하므로 대부분의 정의를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-152">**A BASE file**, which contains most of the definitions and for which Azure provides a complete sample.</span></span>  <span data-ttu-id="f16bc-153">문제 해결 및 정책을 장기적인 유지 관리에 도움이 되도록 이 파일을 최소한으로 변경하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-153">We recommend you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies</span></span>
- <span data-ttu-id="f16bc-154">**확장 파일**은 테넌트에 대한 고유한 구성 변경 내용을 보유합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-154">**an EXTensions file** that holds the unique configuration changes for your tenant</span></span>
- <span data-ttu-id="f16bc-155">**RP(신뢰 당사자) 파일**은 응용 프로그램 또는 서비스(즉, 신뢰 당사자)에 의해 직접 호출되는 단일 작업 중심 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-155">**a Relying Party (RP) file** which is the single task-focused file that is invoked directly by the application or service (aka Relying Party).</span></span>  <span data-ttu-id="f16bc-156">자세한 정보는 정책 파일 정의에 대한 문서를 읽어보세요.</span><span class="sxs-lookup"><span data-stu-id="f16bc-156">Read the article on Policy file definitions for more information.</span></span>  <span data-ttu-id="f16bc-157">각 고유 작업에는 고유한 RP이 필요하고 브랜딩 요구 사항에 따라 "전체 응용 프로그램 x 전체 사용 사례 수"일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-157">Each unique task requires its own RP and depending on branding requirements the number might be "total of applications x total number of use cases".</span></span>


<span data-ttu-id="f16bc-158">Azure AD B2C의 기본 제공 정책은 위에 표시된 3개의 파일 패턴을 따르지만 개발자는 포털이 확장 파일에 대한 변경 내용을 백그라운드에서 수행하는 동안 개발자는 RP(신뢰 당사자) 파일만을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-158">Built-in policies in Azure AD B2C follow the 3-file pattern depicted above, but the developer only sees the Relying Party (RP) file, while the portal makes changes in the background to the EXTenstions file.</span></span>

## <a name="core-concepts-you-should-know-when-using-custom-policies"></a><span data-ttu-id="f16bc-159">사용자 지정 정책을 사용하는 경우 알아야 할 핵심 개념</span><span class="sxs-lookup"><span data-stu-id="f16bc-159">Core concepts you should know when using custom policies</span></span>

### <a name="azure-active-directory-b2c"></a><span data-ttu-id="f16bc-160">Azure Active Directory B2C</span><span class="sxs-lookup"><span data-stu-id="f16bc-160">Azure Active Directory B2C</span></span>

<span data-ttu-id="f16bc-161">Azure의 CIAM(고객 ID 및 액세스 관리) 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-161">Azure’s customer identity and access management (CIAM) service.</span></span> <span data-ttu-id="f16bc-162">서비스에는 다음이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-162">The service includes:</span></span>

1. <span data-ttu-id="f16bc-163">특수한 용도의 Azure Active Directory 형태인 사용자 디렉터리는 Microsoft Graph를 통해 액세스할 수 있고 로컬 계정 및 페더레이션된 계정 모두에 대한 사용자 데이터를 보유합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-163">A user directory in the form of a special-purpose Azure Active Directory accessible via Microsoft Graph and which holds user data for both local accounts and federated accounts</span></span> 
2. <span data-ttu-id="f16bc-164">**ID 경험 프레임워크**에 액세스하여 사용자와 엔터티 간의 신뢰를 조정하고, ID/액세스 관리 작업을 완료하기 위해 이들 간에 클레임을 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-164">Access to the **Identity Experience Framework** which orchestrates trust between users and entities and passes claims between them to complete an identity/access management task</span></span> 
3. <span data-ttu-id="f16bc-165">STS(보안 토큰 서비스)는 ID 토큰, 새로 고침 토큰 및 액세스 토큰(및 해당하는 SAML 어설션)을 발급하고 유효성을 검사하여 리소스를 보호합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-165">A security token service (STS) issuing id tokens, refresh tokens, and access tokens (and equivalent SAML assertions) and validating them to protect resources.</span></span>

<span data-ttu-id="f16bc-166">Azure AD B2C는 시퀀스에서 ID 공급자, 사용자, 다른 시스템 및 로컬 사용자 디렉터리와 상호 작용하여 ID 작업(예: 사용자 로그인, 새 사용자 등록, 암호 재설정)을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-166">Azure AD B2C interacts with identity providers, users, other systems, and with the local user directory in sequence to achieve an identity task (e.g. login a user, register a new user, reset a password).</span></span> <span data-ttu-id="f16bc-167">다자간 신뢰를 설정하고 이러한 단계를 실행하는 기본 플랫폼을 ID 경험 프레임워크라고 하며, 정책(사용자 경험 또는 보안 프레임워크 정책이라고도 함)은 수행할 행위자, 작업, 프로토콜 및 일련의 단계를 명시적으로 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-167">The underlying platform which establishes multi-party trust and executes these steps is called the Identity Experience Framework and a policy (also called an user journey or a Trust framework policy) explicitly defines the actors, the actions, the protocols, and the sequence of steps to complete.</span></span>

### <a name="identity-experience-framework"></a><span data-ttu-id="f16bc-168">ID 경험 프레임워크</span><span class="sxs-lookup"><span data-stu-id="f16bc-168">Identity Experience Framework</span></span>

<span data-ttu-id="f16bc-169">OpenIDConnect, OAuth, SAML, WSFed 및 일부 비표준 형식(예: REST API 기반 시스템 간 클레임 교환)과 같은 표준 프로토콜 형식인 엔터티(광범위하게 클레임 공급자) 간의 신뢰를 조정하는 완전히 구성 가능한 정책 기반이며 클라우드 기반인 Azure 플랫폼입니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-169">A fully configurable, policy-driven, cloud-based Azure platform that orchestrates trust between entities (broadly Claims Providers) in standard protocol formats such as OpenIDConnect, OAuth, SAML, WSFed, and a few non-standard ones (e.g. REST API-based system-to-system claims exchanges).</span></span> <span data-ttu-id="f16bc-170">I2E는 HTML, CSS 및 jscript를 지원하는 사용자에게 친숙한 white labelled 환경을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-170">The I2E creates user-friendly, whitelabelled experiences that support HTML, CSS, and jscript.</span></span>  <span data-ttu-id="f16bc-171">현재 ID 경험 프레임워크는 Azure AD B2C 서비스의 컨텍스트에서만 사용할 수 있으며 CIAM과 관련된 작업에 우선적으로 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-171">Today, the Identity Experience Framework is available only in the context of the Azure AD B2C service and prioritized for tasks related to CIAM.</span></span>

### <a name="built-in-policies"></a><span data-ttu-id="f16bc-172">기본 제공 정책</span><span class="sxs-lookup"><span data-stu-id="f16bc-172">Built-in policies</span></span>

<span data-ttu-id="f16bc-173">작업을 수행 하는 가장 일반적으로 사용 된 id (즉, Azure AD B2C의 동작을 지시 하는 미리 정의 된 구성 파일</span><span class="sxs-lookup"><span data-stu-id="f16bc-173">Predefined configuration files that direct the behavior of Azure AD B2C to perform the most commonly used identity tasks (i.e.</span></span> <span data-ttu-id="f16bc-174">사용자 등록, 로그인, 암호 재설정) 및 해당 관계에 Azure AD B2C 미리 정의 하는 신뢰할 수 있는 당사자와 상호 작용 (예: Facebook id 공급자, LinkedIn, Microsoft 계정, Google 계정).</span><span class="sxs-lookup"><span data-stu-id="f16bc-174">user registration, signin, password reset) and interact with trusted parties whose relationship is also predefined in Azure AD B2C (e.g. Facebook identity provider, LinkedIn, Microsoft Account, Google accounts).</span></span>  <span data-ttu-id="f16bc-175">나중에 일반적으로 Azure Active Directory Premium, Active Directory/ADFS, Salesforce ID Provider와 같은 엔터프라이즈 영역에 있는 ID 공급자의 사용자 지정을 위해 기본 제공 정책을 제공할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-175">In the future, built-in policies may also provide for customization of identity providers which are typically in the enterprise realm such as Azure Active Directory Premium, Active Directory/ADFS, Salesforce ID Provider etc.</span></span>


### <a name="custom-policies"></a><span data-ttu-id="f16bc-176">사용자 지정 정책</span><span class="sxs-lookup"><span data-stu-id="f16bc-176">Custom policies</span></span>

<span data-ttu-id="f16bc-177">Azure AD B2C 테넌트에서 ID 경험 프레임워크의 동작을 정의하는 구성 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-177">Configuration files that define the behavior of Identity Experience Framework in your Azure AD B2C tenant.</span></span> <span data-ttu-id="f16bc-178">사용자 지정 정책은 신뢰 당사자(예: 응용 프로그램)에서 호출할 때 ID 경험 프레임워크에서 실행하는 하나 이상의 XML 파일(정책 파일 정의 참조)로 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-178">A custom policy is accessible as one or several XML files (see Policy Files definitions) which are executed by the Identity Experience Framework when invoked by a relying party (e.g. an application).</span></span> <span data-ttu-id="f16bc-179">사용자 지정 정책은 ID 개발자가 직접 편집하여 거의 무제한의 작업을 완료할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-179">Custom policies can be directly edited by an identity developer to complete a near unlimited number of tasks.</span></span> <span data-ttu-id="f16bc-180">사용자 지정 정책을 구성하는 개발자는 신뢰할 수 있는 관계를 세부적으로 신중하게 정의하여 메타데이터 끝점, 정확한 클레임 정의 교환을 포함하고 ID 공급자 각각의 필요에 따라 암호, 키 및 인증서를 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-180">Developers configuring custom policies must define the trusted relationships in careful detail to include metadata endpoints, exact claims exchange definitions, and configure secrets, keys and certificates as needed by each identity provider.</span></span>

## <a name="policy-file-definitions-for-identity-experience-framework-trustframeworks"></a><span data-ttu-id="f16bc-181">Trustframeworks ID 경험 프레임워크에 대한 정책 파일 정의</span><span class="sxs-lookup"><span data-stu-id="f16bc-181">Policy File Definitions for Identity Experience Framework Trustframeworks</span></span>

### <a name="policy-files"></a><span data-ttu-id="f16bc-182">정책 파일</span><span class="sxs-lookup"><span data-stu-id="f16bc-182">Policy Files</span></span>

<span data-ttu-id="f16bc-183">사용자 지정 정책은 계층 구조 체인에서 서로를 참조하는 하나 또는 여러 XML 형식 파일로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-183">A custom policy is represented as one or several XML-formatted files which refer to each other in a hierarchical chain.</span></span> <span data-ttu-id="f16bc-184">XML 요소는 다른 요소 간에 클레임 스키마, 클레임 변환, 콘텐츠 정의, 클레임 공급자/기술 프로필 및 Userjourney 오케스트레이션 단계를 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-184">The XML elements define: Claims schema, claims transformations, content definitions, claims providers/technical profiles, and Userjourney orchestration steps, among other elements.</span></span>  <span data-ttu-id="f16bc-185">세 가지 종류의 정책 파일을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-185">We recommend the use of three types of policy files:</span></span>

- <span data-ttu-id="f16bc-186">**기본 파일**은 Azure에서 전체 샘플을 제공하므로 대부분의 정의를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-186">**A BASE file**, which contains most of the definitions and for which Azure provides a complete sample.</span></span>  <span data-ttu-id="f16bc-187">문제 해결 및 정책을 장기적인 유지 관리에 도움이 되도록 이 파일을 최소한으로 변경하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-187">We recommend you make a minimum number of changes to this file to help with troubleshooting, and long-term maintenance of your policies</span></span>
- <span data-ttu-id="f16bc-188">**확장 파일**은 테넌트에 대한 고유한 구성 변경 내용을 보유합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-188">**an EXTensions file** that holds the unique configuration changes for your tenant</span></span>
- <span data-ttu-id="f16bc-189">**RP(신뢰 당사자) 파일**은 응용 프로그램 또는 서비스(즉, 신뢰 당사자)에 의해 직접 호출되는 단일 작업 중심 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-189">**a Relying Party (RP) file** which is the single task-focused file that is invoked directly by the application or service (aka Relying Party).</span></span>  <span data-ttu-id="f16bc-190">자세한 정보는 정책 파일 정의에 대한 문서를 읽어보세요.</span><span class="sxs-lookup"><span data-stu-id="f16bc-190">Read the article on Policy file definitions for more information.</span></span>  <span data-ttu-id="f16bc-191">각 고유 작업에는 고유한 RP이 필요하고 브랜딩 요구 사항에 따라 "전체 응용 프로그램 x 전체 사용 사례 수"일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-191">Each unique task requires its own RP and depending on branding requirements the number might be "total of applications x total number of use cases".</span></span>

![정책 파일 형식](media/active-directory-b2c-overview-custom/active-directory-b2c-overview-custom-policy-files.png)

| <span data-ttu-id="f16bc-193">정책 파일의 종류</span><span class="sxs-lookup"><span data-stu-id="f16bc-193">Type of policy file</span></span> | <span data-ttu-id="f16bc-194">예제 파일 이름</span><span class="sxs-lookup"><span data-stu-id="f16bc-194">Examples file name</span></span> | <span data-ttu-id="f16bc-195">권장되는 사용</span><span class="sxs-lookup"><span data-stu-id="f16bc-195">Recommended use</span></span> | <span data-ttu-id="f16bc-196">상속 원본</span><span class="sxs-lookup"><span data-stu-id="f16bc-196">Inherits from</span></span> |
|---------------------|--------------------|-----------------|---------------|
| <span data-ttu-id="f16bc-197">기본</span><span class="sxs-lookup"><span data-stu-id="f16bc-197">BASE</span></span> |<span data-ttu-id="f16bc-198">TrustFrameworkBase.xml</span><span class="sxs-lookup"><span data-stu-id="f16bc-198">TrustFrameworkBase.xml</span></span><br><br><span data-ttu-id="f16bc-199">Mytenant.onmicrosoft.com-B2C-1A_BASE1.xml</span><span class="sxs-lookup"><span data-stu-id="f16bc-199">Mytenant.onmicrosoft.com-B2C-1A_BASE1.xml</span></span> | <span data-ttu-id="f16bc-200">Microsoft에서 구성된 핵심 클레임 스키마, 클레임 변환, 클레임 공급자 및 사용자 경험을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-200">Includes the core claims schema, claims transformations, claims providers, and user journeys configured by Microsoft</span></span><br><br><span data-ttu-id="f16bc-201">이 파일에 대한 최소한의 변경</span><span class="sxs-lookup"><span data-stu-id="f16bc-201">Make minimal changes to this file</span></span> | <span data-ttu-id="f16bc-202">없음</span><span class="sxs-lookup"><span data-stu-id="f16bc-202">None</span></span> |
| <span data-ttu-id="f16bc-203">확장(EXT)</span><span class="sxs-lookup"><span data-stu-id="f16bc-203">Extension (EXT)</span></span> | <span data-ttu-id="f16bc-204">TrustFrameworkExtensions.xml</span><span class="sxs-lookup"><span data-stu-id="f16bc-204">TrustFrameworkExtensions.xml</span></span><br><br><span data-ttu-id="f16bc-205">Mytenant.onmicrosoft.com-B2C-1A_EXT.xml</span><span class="sxs-lookup"><span data-stu-id="f16bc-205">Mytenant.onmicrosoft.com-B2C-1A_EXT.xml</span></span> | <span data-ttu-id="f16bc-206">여기에서 기본 파일에 대한 변경 내용 통합</span><span class="sxs-lookup"><span data-stu-id="f16bc-206">Consolidate your changes to the BASE file here</span></span><br><br><span data-ttu-id="f16bc-207">수정된 클레임 공급자</span><span class="sxs-lookup"><span data-stu-id="f16bc-207">Modified claims providers</span></span><br><br><span data-ttu-id="f16bc-208">수정된 사용자 경험</span><span class="sxs-lookup"><span data-stu-id="f16bc-208">Modified user journeys</span></span><br><br><span data-ttu-id="f16bc-209">사용자 고유의 사용자 지정 스키마 정의</span><span class="sxs-lookup"><span data-stu-id="f16bc-209">Your own custom schema definitions</span></span> | <span data-ttu-id="f16bc-210">기본 파일</span><span class="sxs-lookup"><span data-stu-id="f16bc-210">BASE file</span></span> |
| <span data-ttu-id="f16bc-211">신뢰 당사자(RP)</span><span class="sxs-lookup"><span data-stu-id="f16bc-211">Relying Party (RP)</span></span> | <span data-ttu-id="f16bc-212">B2C_1A_sign_up_sign_in.xml</span><span class="sxs-lookup"><span data-stu-id="f16bc-212">B2C_1A_sign_up_sign_in.xml</span></span>| <span data-ttu-id="f16bc-213">여기에서 토큰 셰이프 및 세션 설정 변경</span><span class="sxs-lookup"><span data-stu-id="f16bc-213">Change token shape and session settings here</span></span>| <span data-ttu-id="f16bc-214">Extensions(EXT) 파일</span><span class="sxs-lookup"><span data-stu-id="f16bc-214">Extensions(EXT) file</span></span> |

### <a name="inheritance-model"></a><span data-ttu-id="f16bc-215">상속 모델</span><span class="sxs-lookup"><span data-stu-id="f16bc-215">Inheritance model</span></span>

<span data-ttu-id="f16bc-216">응용 프로그램에서 RP 정책 파일을 호출하면 B2C의 ID 경험 프레임워크에서 기본 파일, 확장 파일 및 마지막으로 RP 정책 파일의 모든 요소를 추가하여 현재 적용 중인 정책을 효과적으로 조합합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-216">When an application calls the RP Policy file, the Identity Experience Framework in B2C will add all the elements from BASE, then from EXTENSIONS, and lastly from the RP policy file to assemble the current policy in effect.</span></span>  <span data-ttu-id="f16bc-217">RP 파일에서 동일한 형식 및 이름이라는 요소는 확장에 있는 동일한 요소를 재정의하고 확장의 요소는 기본 요소를 재정의합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-217">Elements of the same type and name in the RP file will override those in the EXTENSIONS, and EXTENSIONS overrides BASE.</span></span>

<span data-ttu-id="f16bc-218">Azure AD B2C의 **기본 제공 정책**은 위에 표시된 3개의 파일 패턴을 따르지만 개발자는 포털이 확장 파일에 대한 변경 내용을 백그라운드에서 수행하는 동안 개발자는 RP(신뢰 당사자) 파일만을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-218">**Built-in policies** in Azure AD B2C follow the 3-file pattern depicted above, but the developer only sees the Relying Party (RP) file, while the portal makes changes in the background to the EXTenstions file.</span></span>  <span data-ttu-id="f16bc-219">모든 Azure AD B2C는 Azure B2C 팀의 제어 아래에서 자주 업데이트되는 기본 정책 파일을 공유합니다.</span><span class="sxs-lookup"><span data-stu-id="f16bc-219">All of Azure AD B2C shares a BASE policy file that is under the control of the Azure B2C team and is updated frequently.</span></span>
