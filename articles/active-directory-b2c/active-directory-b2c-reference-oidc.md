---
title: "OpenID Connect를 사용하는 웹 로그인 - Azure AD B2C | Microsoft Docs"
description: "OpenID Connect 인증 프로토콜의 Azure Active Directory 구현을 사용하여 웹 응용 프로그램을 빌드합니다."
services: active-directory-b2c
documentationcenter: 
author: saeedakhter-msft
manager: krassk
editor: parakhj
ms.assetid: 21d420c8-3c10-4319-b681-adf2e89e7ede
ms.service: active-directory-b2c
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/16/2017
ms.author: saeedakhter-msft
ms.openlocfilehash: b0c33a47dd0cae79eab32ac578448fae8bf59be5
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/29/2017
---
# <a name="azure-active-directory-b2c-web-sign-in-with-openid-connect"></a><span data-ttu-id="50917-103">Azure Active Directory B2C: OpenID Connect로 웹 로그인</span><span class="sxs-lookup"><span data-stu-id="50917-103">Azure Active Directory B2C: Web sign-in with OpenID Connect</span></span>
<span data-ttu-id="50917-104">OpenID Connect는 웹 응용 프로그램에 사용자를 안전하게 로그인하는 데 사용할 수 있도록 OAuth 2.0을 기반으로 하여 빌드된 인증 프로토콜입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-104">OpenID Connect is an authentication protocol, built on top of OAuth 2.0, that can be used to securely sign users in to web applications.</span></span> <span data-ttu-id="50917-105">OpenID Connect의 Azure AD B2C(Azure Active Directory B2C) 구현을 사용하여 웹 응용 프로그램의 등록, 로그인 및 기타 ID 관리 환경을 Azure AD( Azure Active Directory)로 아웃소싱할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-105">By using the Azure Active Directory B2C (Azure AD B2C) implementation of OpenID Connect, you can outsource sign-up, sign-in, and other identity management experiences in your web applications to Azure Active Directory (Azure AD).</span></span> <span data-ttu-id="50917-106">이 가이드에서는 언어에 관계 없이 이 작업을 수행하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="50917-106">This guide shows you how to do so in a language-independent manner.</span></span> <span data-ttu-id="50917-107">오픈 소스 라이브러리를 사용하지 않고 HTTP 메시지를 보내고 받는 방법을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-107">It describes how to send and receive HTTP messages without using any of our open-source libraries.</span></span>

<span data-ttu-id="50917-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html)는 *인증* 프로토콜로 사용하기 위해 OAuth 2.0 *권한 부여* 프로토콜을 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-108">[OpenID Connect](http://openid.net/specs/openid-connect-core-1_0.html) extends the OAuth 2.0 *authorization* protocol for use as an *authentication* protocol.</span></span> <span data-ttu-id="50917-109">OAuth를 통해 Single Sign-On을 수행할 수 있게 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-109">This allows you to perform single sign-on by using OAuth.</span></span> <span data-ttu-id="50917-110">클라이언트에서 사용자 ID를 확인하고 사용자에 대한 기본 프로필 정보를 얻을 수 있게 하는 보안 토큰인 *ID 토큰*의 개념을 소개합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-110">It introduces the concept of an *ID token*, which is a security token that allows the client to verify the identity of the user and obtain basic profile information about the user.</span></span>

<span data-ttu-id="50917-111">또한 OAuth 2.0을 확장하므로 앱에서 *액세스 토큰*을 안전하게 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-111">Because it extends OAuth 2.0, it also enables apps to securely acquire *access tokens*.</span></span> <span data-ttu-id="50917-112">access_token을 사용하여 [권한 부여 서버](active-directory-b2c-reference-protocols.md#the-basics)로 보안이 유지되는 리소스에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-112">You can use access_tokens to access resources that are secured by an [authorization server](active-directory-b2c-reference-protocols.md#the-basics).</span></span> <span data-ttu-id="50917-113">OpenID Connect는 서버에서 호스트되고 브라우저를 통해 액세스되는 웹 응용 프로그램을 빌드하는 경우에 권장됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-113">We recommend OpenID Connect if you're building a web application that is hosted on a server and accessed through a browser.</span></span> <span data-ttu-id="50917-114">Azure AD B2C를 사용하여 ID 관리를 모바일 또는 데스크톱 응용 프로그램에 추가하려는 경우 OpenID Connect 대신 [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) 을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-114">If you want to add identity management to your mobile or desktop applications by using Azure AD B2C, you should use [OAuth 2.0](active-directory-b2c-reference-oauth-code.md) rather than OpenID Connect.</span></span>

<span data-ttu-id="50917-115">Azure AD B2C는 단순한 인증 및 권한 부여 보다 더 많은 작업으로 표준 OpenID Connect 프로토콜을 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-115">Azure AD B2C extends the standard OpenID Connect protocol to do more than simple authentication and authorization.</span></span> <span data-ttu-id="50917-116">OpenID Connect를 사용하여 앱에 등록, 로그인 및 프로필 관리와 같은 사용자 환경을 추가할 수 있는 [정책 매개 변수](active-directory-b2c-reference-policies.md)를 소개합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-116">It introduces the [policy parameter](active-directory-b2c-reference-policies.md), which enables you to use OpenID Connect to add user experiences--such as sign-up, sign-in, and profile management--to your app.</span></span> <span data-ttu-id="50917-117">여기서는 OpenID Connect 및 정책을 사용하여 웹 응용 프로그램에서 이러한 환경을 각각 구현하는 방법 및</span><span class="sxs-lookup"><span data-stu-id="50917-117">Here, we show you how to use OpenID Connect and policies to implement each of these experiences in your web applications.</span></span> <span data-ttu-id="50917-118">웹 API에 액세스하기 위한 액세스 토큰을 얻는 방법도 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="50917-118">We'll also show you how to get access tokens for accessing web APIs.</span></span>

<span data-ttu-id="50917-119">다음 섹션의 예제 HTTP 요청에서는 fabrikamb2c.onmicrosoft.com 샘플 B2C 디렉터리뿐만 아니라 https://aadb2cplayground.azurewebsites.net 샘플 응용 프로그램 및 정책도 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-119">The example HTTP requests in the next section use our sample B2C directory, fabrikamb2c.onmicrosoft.com, as well as our sample application, https://aadb2cplayground.azurewebsites.net, and policies.</span></span> <span data-ttu-id="50917-120">이러한 값을 사용하여 직접 요청을 시도하거나 고유의 작업으로 바꿀 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-120">You're free to try out the requests yourself by using these values, or you can replace them with your own.</span></span>
<span data-ttu-id="50917-121">[사용자 고유의 B2C 테넌트, 응용 프로그램 및 정책을 가져오는](#use-your-own-b2c-directory)방법을 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-121">Learn how to [get your own B2C tenant, application, and policies](#use-your-own-b2c-directory).</span></span>

## <a name="send-authentication-requests"></a><span data-ttu-id="50917-122">인증 요청 보내기</span><span class="sxs-lookup"><span data-stu-id="50917-122">Send authentication requests</span></span>
<span data-ttu-id="50917-123">웹앱이 사용자를 인증하고 정책을 실행해야 하는 경우 사용자를 `/authorize` 끝점으로 보낼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-123">When your web app needs to authenticate the user and execute a policy, it can direct the user to the `/authorize` endpoint.</span></span> <span data-ttu-id="50917-124">이는 정책에 따라 사용자가 실제로 작업을 수행하는 흐름의 대화형 부분입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-124">This is the interactive portion of the flow, where the user takes action, depending on the policy.</span></span>

<span data-ttu-id="50917-125">이 요청에서 클라이언트는 `p` 매개 변수를 실행하기 위해 `scope` 매개 변수 및 정책에서 사용자로부터 가져와야 할 사용 권한을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-125">In this request, the client indicates the permissions that it needs to acquire from the user in the `scope` parameter and the policy to execute in the `p` parameter.</span></span> <span data-ttu-id="50917-126">각각 서로 다른 정책을 사용하는 세 가지 예제가 다음 섹션에서 제공됩니다(쉽게 읽을 수 있도록 줄 바꿈 적용).</span><span class="sxs-lookup"><span data-stu-id="50917-126">Three examples are provided in the following sections (with line breaks for readability), each using a different policy.</span></span> <span data-ttu-id="50917-127">각 요청의 작동 방식에 대해 이해하려면 요청을 브라우저에 붙여 넣고 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-127">To get a feel for how each request works, try pasting the request into a browser and running it.</span></span>

#### <a name="use-a-sign-in-policy"></a><span data-ttu-id="50917-128">로그인 정책 사용</span><span class="sxs-lookup"><span data-stu-id="50917-128">Use a sign-in policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_in
```

#### <a name="use-a-sign-up-policy"></a><span data-ttu-id="50917-129">등록 정책 사용</span><span class="sxs-lookup"><span data-stu-id="50917-129">Use a sign-up policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_sign_up
```

#### <a name="use-an-edit-profile-policy"></a><span data-ttu-id="50917-130">편집 프로필 정책 사용</span><span class="sxs-lookup"><span data-stu-id="50917-130">Use an edit-profile policy</span></span>
```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/authorize?
client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6
&response_type=code+id_token
&redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
&response_mode=form_post
&scope=openid%20offline_access
&state=arbitrary_data_you_can_receive_in_the_response
&nonce=12345
&p=b2c_1_edit_profile
```

| <span data-ttu-id="50917-131">매개 변수</span><span class="sxs-lookup"><span data-stu-id="50917-131">Parameter</span></span> | <span data-ttu-id="50917-132">Required?</span><span class="sxs-lookup"><span data-stu-id="50917-132">Required?</span></span> | <span data-ttu-id="50917-133">설명</span><span class="sxs-lookup"><span data-stu-id="50917-133">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="50917-134">client_id</span><span class="sxs-lookup"><span data-stu-id="50917-134">client_id</span></span> |<span data-ttu-id="50917-135">필수</span><span class="sxs-lookup"><span data-stu-id="50917-135">Required</span></span> |<span data-ttu-id="50917-136">[Azure 포털](https://portal.azure.com/) 이 앱에 할당된 응용 프로그램 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-136">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="50917-137">response_type</span><span class="sxs-lookup"><span data-stu-id="50917-137">response_type</span></span> |<span data-ttu-id="50917-138">필수</span><span class="sxs-lookup"><span data-stu-id="50917-138">Required</span></span> |<span data-ttu-id="50917-139">OpenID Connect의 ID 토큰을 포함해야 하는 응답 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-139">The response type, which must include an ID token for OpenID Connect.</span></span> <span data-ttu-id="50917-140">웹 API를 호출하기 위한 토큰이 웹앱에 필요한 경우 여기서 수행한 대로 `code+id_token`을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-140">If your web app also needs tokens for calling a web API, you can use `code+id_token`, as we've done here.</span></span> |
| <span data-ttu-id="50917-141">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="50917-141">redirect_uri</span></span> |<span data-ttu-id="50917-142">권장</span><span class="sxs-lookup"><span data-stu-id="50917-142">Recommended</span></span> |<span data-ttu-id="50917-143">앱에서 인증 응답을 보내고 받을 수 있는 앱의 `redirect_uri` 매개 변수입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-143">The `redirect_uri` parameter of your app, where authentication responses can be sent and received by your app.</span></span> <span data-ttu-id="50917-144">URL로 인코딩되어야 한다는 점을 제외하고는 포털에서 등록한 `redirect_uri` 매개 변수 중 하나와 정확히 일치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-144">It must exactly match one of the `redirect_uri` parameters that you registered in the portal, except that it must be URL encoded.</span></span> |
| <span data-ttu-id="50917-145">scope</span><span class="sxs-lookup"><span data-stu-id="50917-145">scope</span></span> |<span data-ttu-id="50917-146">필수</span><span class="sxs-lookup"><span data-stu-id="50917-146">Required</span></span> |<span data-ttu-id="50917-147">공백으로 구분된 범위 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-147">A space-separated list of scopes.</span></span> <span data-ttu-id="50917-148">단일 범위 값은 요청되는 두 가지 권한을 모두 Azure AD에 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-148">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="50917-149">`openid` 범위는 사용자에게 로그인하고 ID 토큰 형식으로 사용자에 대한 데이터를 가져올 권한을 나타냅니다(자세한 내용은 이 문서의 뒷부분 참조).</span><span class="sxs-lookup"><span data-stu-id="50917-149">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens (more to come on this later in the article).</span></span> <span data-ttu-id="50917-150">`offline_access` 범위는 웹앱에 대한 선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-150">The `offline_access` scope is optional for web apps.</span></span> <span data-ttu-id="50917-151">리소스에 장기간 액세스하기 위한 *새로 고침 토큰*이 앱에 필요함을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-151">It indicates that your app will need a *refresh token* for long-lived access to resources.</span></span> |
| <span data-ttu-id="50917-152">response_mode</span><span class="sxs-lookup"><span data-stu-id="50917-152">response_mode</span></span> |<span data-ttu-id="50917-153">권장</span><span class="sxs-lookup"><span data-stu-id="50917-153">Recommended</span></span> |<span data-ttu-id="50917-154">결과 권한 부여 코드를 앱에 다시 보내는 데 사용해야 하는 메서드입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-154">The method that should be used to send the resulting authorization code back to your app.</span></span> <span data-ttu-id="50917-155">`query`, `form_post` 또는 `fragment` 중 하나일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-155">It can be either `query`, `form_post`, or `fragment`.</span></span>  <span data-ttu-id="50917-156">최상의 보안을 위해 `form_post` 응답 모드를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-156">The `form_post` response mode is recommended for best security.</span></span> |
| <span data-ttu-id="50917-157">state</span><span class="sxs-lookup"><span data-stu-id="50917-157">state</span></span> |<span data-ttu-id="50917-158">권장</span><span class="sxs-lookup"><span data-stu-id="50917-158">Recommended</span></span> |<span data-ttu-id="50917-159">토큰 응답에도 반환되는 요청에 포함된 값입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-159">A value included in the request that is also returned in the token response.</span></span> <span data-ttu-id="50917-160">원하는 모든 콘텐츠의 문자열일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-160">It can be a string of any content that you want.</span></span> <span data-ttu-id="50917-161">일반적으로 교차 사이트 요청 위조 공격을 방지하기 위해 임의로 생성된 고유 값이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-161">A randomly generated unique value is typically used for preventing cross-site request forgery attacks.</span></span> <span data-ttu-id="50917-162">상태는 인증 요청이 발생하기 전 앱의 사용자 상태에 대한 정보(예: 사용한 페이지)를 인코드하는 데에도 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-162">The state is also used to encode information about the user's state in the app before the authentication request occurred, such as the page they were on.</span></span> |
| <span data-ttu-id="50917-163">nonce</span><span class="sxs-lookup"><span data-stu-id="50917-163">nonce</span></span> |<span data-ttu-id="50917-164">필수</span><span class="sxs-lookup"><span data-stu-id="50917-164">Required</span></span> |<span data-ttu-id="50917-165">앱에서 생성한 요청에 포함된 값이며, 결과 ID 토큰에 클레임으로 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-165">A value included in the request (generated by the app) that will be included in the resulting ID token as a claim.</span></span> <span data-ttu-id="50917-166">그러면 앱이 이 값을 확인하여 토큰 재생 공격을 완화시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-166">The app can then verify this value to mitigate token replay attacks.</span></span> <span data-ttu-id="50917-167">값은 일반적으로 요청의 출처를 식별하는 데 사용할 수 있는 임의의 고유 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-167">The value is typically a randomized unique string that can be used to identify the origin of the request.</span></span> |
| <span data-ttu-id="50917-168">p</span><span class="sxs-lookup"><span data-stu-id="50917-168">p</span></span> |<span data-ttu-id="50917-169">필수</span><span class="sxs-lookup"><span data-stu-id="50917-169">Required</span></span> |<span data-ttu-id="50917-170">실행할 정책입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-170">The policy that will be executed.</span></span> <span data-ttu-id="50917-171">B2C 테넌트에 생성된 정책의 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-171">It is the name of a policy that is created in your B2C tenant.</span></span> <span data-ttu-id="50917-172">정책 이름 값은 `b2c\_1\_`로 시작해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-172">The policy name value should begin with `b2c\_1\_`.</span></span> <span data-ttu-id="50917-173">정책에 대한 자세한 내용은 [확장할 수 있는 정책 프레임워크](active-directory-b2c-reference-policies.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="50917-173">Learn more about policies and the [extensible policy framework](active-directory-b2c-reference-policies.md).</span></span> |
| <span data-ttu-id="50917-174">prompt</span><span class="sxs-lookup"><span data-stu-id="50917-174">prompt</span></span> |<span data-ttu-id="50917-175">옵션</span><span class="sxs-lookup"><span data-stu-id="50917-175">Optional</span></span> |<span data-ttu-id="50917-176">필요한 사용자 상호 작용 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-176">The type of user interaction that is required.</span></span> <span data-ttu-id="50917-177">현재 유효한 값은 `login`뿐이며, 이는 사용자가 해당 요청에 대한 자격 증명을 입력하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-177">The only valid value at this time is `login`, which forces the user to enter their credentials on that request.</span></span> <span data-ttu-id="50917-178">Single Sign-On은 적용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-178">Single sign-on will not take effect.</span></span> |

<span data-ttu-id="50917-179">이 시점에서 정책의 워크플로를 완료하도록 사용자에게 요청합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-179">At this point, the user is asked to complete the policy's workflow.</span></span> <span data-ttu-id="50917-180">이 경우 정책을 정의한 방법에 따라 사용자 이름과 암호를 입력하거나, 소셜 ID로 로그인하거나, 디렉터리를 등록하거나, 다른 단계를 수행할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-180">This might involve the user entering their username and password, signing in with a social identity, signing up for the directory, or any other number of steps, depending on how the policy is defined.</span></span>

<span data-ttu-id="50917-181">사용자가 정책을 완료하면 Azure AD에서 `response_mode` 매개 변수에 지정된 메서드를 사용하여 표시된 `redirect_uri` 매개 변수에서 앱에 대한 응답을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-181">After the user completes the policy, Azure AD returns a response to your app at the indicated `redirect_uri` parameter, by using the method that is specified in the `response_mode` parameter.</span></span> <span data-ttu-id="50917-182">응답은 실행되는 정책과 관계 없이 앞의 경우 각각에 대해 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-182">The response is the same for each of the preceding cases, independent of the policy that is executed.</span></span>

<span data-ttu-id="50917-183">`response_mode=fragment` 를 사용한 성공적인 응답은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-183">A successful response using `response_mode=fragment` would look like:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
id_token=eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="50917-184">매개 변수</span><span class="sxs-lookup"><span data-stu-id="50917-184">Parameter</span></span> | <span data-ttu-id="50917-185">설명</span><span class="sxs-lookup"><span data-stu-id="50917-185">Description</span></span> |
| --- | --- |
| <span data-ttu-id="50917-186">id_token</span><span class="sxs-lookup"><span data-stu-id="50917-186">id_token</span></span> |<span data-ttu-id="50917-187">앱이 요청한 ID 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-187">The ID token that the app requested.</span></span> <span data-ttu-id="50917-188">ID 토큰을 사용하여 사용자 ID를 확인하고 사용자와 세션을 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-188">You can use the ID token to verify the user's identity and begin a session with the user.</span></span> <span data-ttu-id="50917-189">ID 토큰 및 해당 내용에 대한 자세한 내용은 [Azure AD B2C 토큰 참조](active-directory-b2c-reference-tokens.md)에 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-189">More details on ID tokens and their contents are included in the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |
| <span data-ttu-id="50917-190">코드</span><span class="sxs-lookup"><span data-stu-id="50917-190">code</span></span> |<span data-ttu-id="50917-191">`response_type=code+id_token`을 사용한 경우 앱에서 요청한 권한 부여 코드입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-191">The authorization code that the app requested, if you used `response_type=code+id_token`.</span></span> <span data-ttu-id="50917-192">앱에서는 권한 부여 코드를 사용하여 대상 리소스에 대한 액세스 토큰을 요청할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-192">The app can use the authorization code to request an access token for a target resource.</span></span> <span data-ttu-id="50917-193">인증 코드는 수명이 매우 짧습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-193">Authorization codes are very short-lived.</span></span> <span data-ttu-id="50917-194">일반적으로 약 10분 후에 만료됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-194">Typically, they expire after about 10 minutes.</span></span> |
| <span data-ttu-id="50917-195">state</span><span class="sxs-lookup"><span data-stu-id="50917-195">state</span></span> |<span data-ttu-id="50917-196">요청에 `state` 매개 변수가 포함되어 있으면 동일한 값이 응답에도 나타나야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-196">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="50917-197">앱에서 요청 및 응답의 `state` 값이 동일한지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-197">The app should verify that the `state` values in the request and response are identical.</span></span> |

<span data-ttu-id="50917-198">앱에서 적절하게 처리할 수 있도록 `redirect_uri` 매개 변수에 오류 응답을 보낼 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-198">Error responses can also be sent to the `redirect_uri` parameter so that the app can handle them appropriately:</span></span>

```
GET https://aadb2cplayground.azurewebsites.net/#
error=access_denied
&error_description=the+user+canceled+the+authentication
&state=arbitrary_data_you_can_receive_in_the_response
```

| <span data-ttu-id="50917-199">매개 변수를 포함해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-199">Parameter</span></span> | <span data-ttu-id="50917-200">설명</span><span class="sxs-lookup"><span data-stu-id="50917-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="50917-201">error</span><span class="sxs-lookup"><span data-stu-id="50917-201">error</span></span> |<span data-ttu-id="50917-202">발생하는 오류 유형을 분류하는 데 사용할 수 있고 오류에 대응하는 데 사용할 수 있는 오류 코드 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-202">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="50917-203">error_description</span><span class="sxs-lookup"><span data-stu-id="50917-203">error_description</span></span> |<span data-ttu-id="50917-204">개발자가 인증 오류의 근본 원인을 식별하도록 도울 수 있는 특정 오류 메시지입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-204">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |
| <span data-ttu-id="50917-205">state</span><span class="sxs-lookup"><span data-stu-id="50917-205">state</span></span> |<span data-ttu-id="50917-206">전체 설명은 이 섹션의 첫 번째 표를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="50917-206">See the full description in the first table in this section.</span></span> <span data-ttu-id="50917-207">요청에 `state` 매개 변수가 포함되어 있으면 동일한 값이 응답에도 나타나야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-207">If a `state` parameter is included in the request, the same value should appear in the response.</span></span> <span data-ttu-id="50917-208">앱에서 요청 및 응답의 `state` 값이 동일한지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-208">The app should verify that the `state` values in the request and response are identical.</span></span> |

## <a name="validate-the-id-token"></a><span data-ttu-id="50917-209">ID 토큰 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="50917-209">Validate the ID token</span></span>
<span data-ttu-id="50917-210">ID 토큰을 받는 것만으로는 사용자를 인증할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-210">Just receiving an ID token is not enough to authenticate the user.</span></span> <span data-ttu-id="50917-211">ID 토큰의 서명에 대한 유효성을 검사하고 앱의 요구 사항에 따라 토큰의 클레임을 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-211">You must validate the ID token's signature and verify the claims in the token per your app's requirements.</span></span> <span data-ttu-id="50917-212">Azure AD B2C는 [JWT(JSON 웹 토큰)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) 및 공개 키 암호화를 사용하여 토큰에 서명하고 토큰이 유효한지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-212">Azure AD B2C uses [JSON Web Tokens (JWTs)](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html) and public key cryptography to sign tokens and verify that they are valid.</span></span>

<span data-ttu-id="50917-213">기본 설정의 언어에 따라 JWT의 유효성 검사에 사용할 수 있는 다양한 공개 소스 라이브러리가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-213">There are many open-source libraries that are available for validating JWTs, depending on your language of preference.</span></span> <span data-ttu-id="50917-214">고유한 유효성 검사 논리를 구현하는 것보다 이러한 옵션을 탐색하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-214">We recommend exploring those options rather than implementing your own validation logic.</span></span> <span data-ttu-id="50917-215">여기의 정보는 올바르게 해당 라이브러리를 사용하는 방법을 파악하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-215">The information here will be useful in figuring out how to properly use those libraries.</span></span>

<span data-ttu-id="50917-216">Azure AD B2C에는 앱이 런타임에 Azure AD B2C에 대한 정보를 가져올 수 있게 해주는 OpenID Connect 메타데이터 끝점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-216">Azure AD B2C has an OpenID Connect metadata endpoint, which allows an app to fetch information about Azure AD B2C at runtime.</span></span> <span data-ttu-id="50917-217">이 정보에는 끝점, 토큰 콘텐츠 및 토큰 서명 키가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-217">This information includes endpoints, token contents, and token signing keys.</span></span> <span data-ttu-id="50917-218">B2C 테넌트에서 각 정책에 대한 JSON 메타데이터 문서가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-218">There is a JSON metadata document for each policy in your B2C tenant.</span></span> <span data-ttu-id="50917-219">예를 들어 `fabrikamb2c.onmicrosoft.com`의 `b2c_1_sign_in` 정책에 대한 메타데이터 문서는 다음 위치에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-219">For example, the metadata document for the `b2c_1_sign_in` policy in `fabrikamb2c.onmicrosoft.com` is located at:</span></span>

`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=b2c_1_sign_in`

<span data-ttu-id="50917-220">이 구성 문서의 속성 중 하나가 `jwks_uri`이며, 동일한 정책에 대한 값은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-220">One of the properties of this configuration document is `jwks_uri`, whose value for the same policy would be:</span></span>

<span data-ttu-id="50917-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span><span class="sxs-lookup"><span data-stu-id="50917-221">`https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/discovery/v2.0/keys?p=b2c_1_sign_in`.</span></span>

<span data-ttu-id="50917-222">ID 토큰에 서명하는 데 사용된 정책(및 메타데이터를 가져올 위치)을 결정하려면 두 가지 옵션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-222">To determine which policy was used in signing an ID token (and from where to fetch the metadata), you have two options.</span></span> <span data-ttu-id="50917-223">먼저 정책 이름이 ID 토큰의 `acr` 클레임에 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-223">First, the policy name is included in the `acr` claim in the ID token.</span></span> <span data-ttu-id="50917-224">ID 토큰에서 클레임을 구문 분석하는 방법에 대한 내용은 [Azure AD B2C 토큰 참조](active-directory-b2c-reference-tokens.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="50917-224">For information on how to parse the claims from an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="50917-225">다른 옵션은 요청을 실행할 때 `state` 매개 변수의 값에 정책을 인코딩한 다음 이를 디코딩하여 어떤 정책을 사용할지 결정하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-225">Your other option is to encode the policy in the value of the `state` parameter when you issue the request, and then decode it to determine which policy was used.</span></span> <span data-ttu-id="50917-226">두 방법 중 하나는 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-226">Either method is valid.</span></span>

<span data-ttu-id="50917-227">OpenID Connect 메타데이터 끝점에서 메타데이터 문서를 가져오면 이 끝점에 있는 RSA 256 공개 키를 사용하여 ID 토큰의 서명에 대한 유효성을 검사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-227">After you've acquired the metadata document from the OpenID Connect metadata endpoint, you can use the RSA 256 public keys (which are located at this endpoint) to validate the signature of the ID token.</span></span> <span data-ttu-id="50917-228">지정된 시점에 이 끝점에 나열된 키가 여러 개 있을 수 있으며, 각 키는 `kid` 클레임으로 식별됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-228">There might be multiple keys listed at this endpoint at any given point in time, each identified by a `kid` claim.</span></span> <span data-ttu-id="50917-229">ID 토큰의 헤더에는 `kid` 클레임도 포함되어 있으며, 이는 이러한 키 중에서 ID 토큰 서명에 사용된 키를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-229">The header of the ID token also contains a `kid` claim, which indicates which of these keys was used to sign the ID token.</span></span> <span data-ttu-id="50917-230">자세한 내용은 [Azure AD B2C 토큰 참조](active-directory-b2c-reference-tokens.md)(특히 [토큰 유효성 검사](active-directory-b2c-reference-tokens.md#token-validation) 섹션)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="50917-230">For more information, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md) (the section on [validating tokens](active-directory-b2c-reference-tokens.md#token-validation), in particular).</span></span>
<!--TODO: Improve the information on this-->

<span data-ttu-id="50917-231">ID 토큰의 서명에 대한 유효성을 검사한 후에는 확인해야 할 몇 가지 클레임이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-231">After you've validated the signature of the ID token, there are several claims that you need to verify.</span></span> <span data-ttu-id="50917-232">예:</span><span class="sxs-lookup"><span data-stu-id="50917-232">For instance:</span></span>

* <span data-ttu-id="50917-233">`nonce` 클레임의 유효성을 검사하여 토큰 재생 공격을 방지해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-233">You should validate the `nonce` claim to prevent token replay attacks.</span></span> <span data-ttu-id="50917-234">해당 값이 로그인 요청에 지정된 값이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-234">Its value should be what you specified in the sign-in request.</span></span>
* <span data-ttu-id="50917-235">`aud` 클레임의 유효성을 검사하여 앱에 대한 ID 토큰이 발급되었는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-235">You should validate the `aud` claim to ensure that the ID token was issued for your app.</span></span> <span data-ttu-id="50917-236">해당 값이 앱의 응용 프로그램  ID여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-236">Its value should be the application ID of your app.</span></span>
* <span data-ttu-id="50917-237">`iat` 및 `exp` 클레임의 유효성을 검사하여 ID 토큰이 만료되지 않았는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-237">You should validate the `iat` and `exp` claims to ensure that the ID token has not expired.</span></span>

<span data-ttu-id="50917-238">또한 수행해야 하는 몇 가지 추가 유효성 검사가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-238">There are also several more validations that you should perform.</span></span> <span data-ttu-id="50917-239">이러한 추가 유효성 검사는 [OpenID Connect 핵심 사양](http://openid.net/specs/openid-connect-core-1_0.html)(영문)에서 자세히 설명하고 있습니다.  시나리오에 따라 추가 클레임의 유효성을 검사할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-239">These are described in detail in the [OpenID Connect Core Spec](http://openid.net/specs/openid-connect-core-1_0.html).  You might also want to validate additional claims, depending on your scenario.</span></span> <span data-ttu-id="50917-240">몇 가지 일반적인 유효성 검사는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-240">Some common validations include:</span></span>

* <span data-ttu-id="50917-241">사용자/조직이 앱에 등록했는지 확인</span><span class="sxs-lookup"><span data-stu-id="50917-241">Ensuring that the user/organization has signed up for the app.</span></span>
* <span data-ttu-id="50917-242">사용자에게 적절한 권한 부여/권한이 있는지 확인</span><span class="sxs-lookup"><span data-stu-id="50917-242">Ensuring that the user has proper authorization/privileges.</span></span>
* <span data-ttu-id="50917-243">Azure Multi-Factor Authentication과 같은 특정 강도의 인증이 발생했는지 확인</span><span class="sxs-lookup"><span data-stu-id="50917-243">Ensuring that a certain strength of authentication has occurred, such as Azure Multi-Factor Authentication.</span></span>

<span data-ttu-id="50917-244">ID 토큰의 클레임에 대한 자세한 내용은 [Azure AD B2C 토큰 참조](active-directory-b2c-reference-tokens.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="50917-244">For more information on the claims in an ID token, see the [Azure AD B2C token reference](active-directory-b2c-reference-tokens.md).</span></span>

<span data-ttu-id="50917-245">ID 토큰의 유효성을 검사한 후에는 사용자가 포함된 세션을 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-245">After you have validated the ID token, you can begin a session with the user.</span></span> <span data-ttu-id="50917-246">앱에서 ID 토큰의 클레임을 사용하여 사용자 관련 정보를 가져올 수 있으며,</span><span class="sxs-lookup"><span data-stu-id="50917-246">You can use the claims in the ID token to obtain information about the user in your app.</span></span> <span data-ttu-id="50917-247">이 정보의 용도로 표시, 레코드 및 권한 부여가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-247">Uses for this information include display, records, and authorization.</span></span>

## <a name="get-a-token"></a><span data-ttu-id="50917-248">토큰 가져오기</span><span class="sxs-lookup"><span data-stu-id="50917-248">Get a token</span></span>
<span data-ttu-id="50917-249">웹앱에서 정책만 실행해야 하는 경우 다음 몇 가지 섹션을 건너뛸 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-249">If you need your web app to only execute policies, you can skip the next few sections.</span></span> <span data-ttu-id="50917-250">이러한 섹션은 Web API에 대해 인증된 호출을 수행해야 하며 Azure AD B2C로도 보호되는 웹앱에만 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-250">These sections are applicable only to web apps that need to make authenticated calls to a web API and are also protected by Azure AD B2C.</span></span>

<span data-ttu-id="50917-251">`response_type=code+id_token`을 사용하여 `POST` 요청을 `/token` 끝점으로 보내 원하는 리소스에 대한 토큰에 대해 얻은 권한 부여 코드를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-251">You can redeem the authorization code that you acquired (by using `response_type=code+id_token`) for a token to the desired resource by sending a `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="50917-252">현재 토큰을 요청할 수 있는 리소스는 앱 자체의 백 엔드 웹 API뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-252">Currently, the only resource that you can request a token for is your app's own back-end web API.</span></span> <span data-ttu-id="50917-253">자신에게 토큰을 요청하는 데 사용된 규칙은 앱의 클라이언트 ID를 범위로 사용하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-253">The convention for requesting a token to yourself is to use your app's client ID as the scope:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=authorization_code&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access&code=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>

```

| <span data-ttu-id="50917-254">매개 변수</span><span class="sxs-lookup"><span data-stu-id="50917-254">Parameter</span></span> | <span data-ttu-id="50917-255">Required?</span><span class="sxs-lookup"><span data-stu-id="50917-255">Required?</span></span> | <span data-ttu-id="50917-256">설명</span><span class="sxs-lookup"><span data-stu-id="50917-256">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="50917-257">p</span><span class="sxs-lookup"><span data-stu-id="50917-257">p</span></span> |<span data-ttu-id="50917-258">필수</span><span class="sxs-lookup"><span data-stu-id="50917-258">Required</span></span> |<span data-ttu-id="50917-259">권한 부여 코드를 획득하는 데 사용된 정책입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-259">The policy that was used to acquire the authorization code.</span></span> <span data-ttu-id="50917-260">이 요청에 다른 정책을 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-260">You cannot use a different policy in this request.</span></span> <span data-ttu-id="50917-261">이 매개 변수는 `POST` 본문이 아니라 쿼리 문자열에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-261">Note that you add this parameter to the query string, not to the `POST` body.</span></span> |
| <span data-ttu-id="50917-262">client_id</span><span class="sxs-lookup"><span data-stu-id="50917-262">client_id</span></span> |<span data-ttu-id="50917-263">필수</span><span class="sxs-lookup"><span data-stu-id="50917-263">Required</span></span> |<span data-ttu-id="50917-264">[Azure 포털](https://portal.azure.com/) 이 앱에 할당된 응용 프로그램 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-264">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="50917-265">grant_type</span><span class="sxs-lookup"><span data-stu-id="50917-265">grant_type</span></span> |<span data-ttu-id="50917-266">필수</span><span class="sxs-lookup"><span data-stu-id="50917-266">Required</span></span> |<span data-ttu-id="50917-267">권한 유형입니다. 인증 코드 흐름의 경우 `authorization_code`이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-267">The type of grant, which must be `authorization_code` for the authorization code flow.</span></span> |
| <span data-ttu-id="50917-268">scope</span><span class="sxs-lookup"><span data-stu-id="50917-268">scope</span></span> |<span data-ttu-id="50917-269">권장</span><span class="sxs-lookup"><span data-stu-id="50917-269">Recommended</span></span> |<span data-ttu-id="50917-270">공백으로 구분된 범위 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-270">A space-separated list of scopes.</span></span> <span data-ttu-id="50917-271">단일 범위 값은 요청되는 두 가지 권한을 모두 Azure AD에 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-271">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="50917-272">`openid` 범위는 사용자에게 로그인하고 id_token 매개 변수의 형식으로 사용자에 대한 데이터를 가져올 권한을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-272">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of id_token parameters.</span></span> <span data-ttu-id="50917-273">클라이언트와 동일한 응용 프로그램 ID로 표시되는 앱 자체의 백 엔드 웹 API에 토큰을 가져오는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-273">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="50917-274">`offline_access` 범위는 리소스에 장기간 액세스하기 위한 새로 고침 토큰이 앱에 필요함을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-274">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="50917-275">코드</span><span class="sxs-lookup"><span data-stu-id="50917-275">code</span></span> |<span data-ttu-id="50917-276">필수</span><span class="sxs-lookup"><span data-stu-id="50917-276">Required</span></span> |<span data-ttu-id="50917-277">흐름의 첫 번째 단계에서 얻은 권한 부여 코드입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-277">The authorization code that you acquired in the first leg of the flow.</span></span> |
| <span data-ttu-id="50917-278">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="50917-278">redirect_uri</span></span> |<span data-ttu-id="50917-279">필수</span><span class="sxs-lookup"><span data-stu-id="50917-279">Required</span></span> |<span data-ttu-id="50917-280">권한 부여 코드를 받은 응용 프로그램의 `redirect_uri` 매개 변수입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-280">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="50917-281">client_secret</span><span class="sxs-lookup"><span data-stu-id="50917-281">client_secret</span></span> |<span data-ttu-id="50917-282">필수</span><span class="sxs-lookup"><span data-stu-id="50917-282">Required</span></span> |<span data-ttu-id="50917-283">[Azure 포털](https://portal.azure.com/)에서 생성한 응용 프로그램 암호입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-283">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="50917-284">이 응용 프로그램 암호는 중요한 보안 아티팩트입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-284">This application secret is an important security artifact.</span></span> <span data-ttu-id="50917-285">서버에 안전하게 저장해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-285">You should store it securely on your server.</span></span> <span data-ttu-id="50917-286">또한 이 클라이언트 비밀도 정기적으로 회전해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-286">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="50917-287">성공적인 토큰 응답은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-287">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="50917-288">매개 변수</span><span class="sxs-lookup"><span data-stu-id="50917-288">Parameter</span></span> | <span data-ttu-id="50917-289">설명</span><span class="sxs-lookup"><span data-stu-id="50917-289">Description</span></span> |
| --- | --- |
| <span data-ttu-id="50917-290">not_before</span><span class="sxs-lookup"><span data-stu-id="50917-290">not_before</span></span> |<span data-ttu-id="50917-291">epoch 시간에서 토큰은 유효한 것으로 간주되는 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-291">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="50917-292">token_type</span><span class="sxs-lookup"><span data-stu-id="50917-292">token_type</span></span> |<span data-ttu-id="50917-293">토큰 형식 값입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-293">The token type value.</span></span> <span data-ttu-id="50917-294">Azure AD는 `Bearer` 유형만 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-294">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="50917-295">access_token</span><span class="sxs-lookup"><span data-stu-id="50917-295">access_token</span></span> |<span data-ttu-id="50917-296">사용자가 요청한 서명된 JWT 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-296">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="50917-297">scope</span><span class="sxs-lookup"><span data-stu-id="50917-297">scope</span></span> |<span data-ttu-id="50917-298">토큰이 유효한 범위입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-298">The scopes for which the token is valid.</span></span> <span data-ttu-id="50917-299">나중에 사용할 수 있도록 토큰 캐싱에 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-299">These can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="50917-300">expires_in</span><span class="sxs-lookup"><span data-stu-id="50917-300">expires_in</span></span> |<span data-ttu-id="50917-301">액세스 토큰이 유효한 시간(초)입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-301">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="50917-302">refresh_token</span><span class="sxs-lookup"><span data-stu-id="50917-302">refresh_token</span></span> |<span data-ttu-id="50917-303">OAuth 2.0 새로 고침 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-303">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="50917-304">앱은 현재 토큰이 만료된 후 이 토큰을 사용하여 추가 토큰을 획득할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-304">The app can use this token to acquire additional tokens after the current token expires.</span></span> <span data-ttu-id="50917-305">새로 고침 토큰은 수명이 길며, 오랜 시간 동안 리소스에 대한 액세스를 유지하는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-305">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="50917-306">자세한 내용은 [B2C 토큰 참조](active-directory-b2c-reference-tokens.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="50917-306">For more details, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> <span data-ttu-id="50917-307">새로 고침 토큰을 받으려면 권한 부여 및 토큰 요청 모두에서 `offline_access` 범위를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-307">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |

<span data-ttu-id="50917-308">오류 응답은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-308">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="50917-309">매개 변수</span><span class="sxs-lookup"><span data-stu-id="50917-309">Parameter</span></span> | <span data-ttu-id="50917-310">설명</span><span class="sxs-lookup"><span data-stu-id="50917-310">Description</span></span> |
| --- | --- |
| <span data-ttu-id="50917-311">error</span><span class="sxs-lookup"><span data-stu-id="50917-311">error</span></span> |<span data-ttu-id="50917-312">발생하는 오류 유형을 분류하는 데 사용할 수 있고 오류에 대응하는 데 사용할 수 있는 오류 코드 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-312">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="50917-313">error_description</span><span class="sxs-lookup"><span data-stu-id="50917-313">error_description</span></span> |<span data-ttu-id="50917-314">개발자가 인증 오류의 근본 원인을 식별하도록 도울 수 있는 특정 오류 메시지입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-314">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="use-the-token"></a><span data-ttu-id="50917-315">토큰 사용</span><span class="sxs-lookup"><span data-stu-id="50917-315">Use the token</span></span>
<span data-ttu-id="50917-316">액세스 토큰을 성공적으로 얻었으므로 이제 `Authorization` 헤더에 포함하여 백 엔드 웹 API에 대한 요청에서 토큰을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-316">Now that you've successfully acquired an access token, you can use the token in requests to your back-end web APIs by including it in the `Authorization` header:</span></span>

```
GET /tasks
Host: https://mytaskwebapi.com
Authorization: Bearer eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...
```

## <a name="refresh-the-token"></a><span data-ttu-id="50917-317">토큰 새로 고침</span><span class="sxs-lookup"><span data-stu-id="50917-317">Refresh the token</span></span>
<span data-ttu-id="50917-318">ID 토큰은 수명이 짧습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-318">ID tokens are short-lived.</span></span> <span data-ttu-id="50917-319">리소스에 계속 액세스하려면 만료된 후 새로 고쳐야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-319">You must refresh them after they expire to continue being able to access resources.</span></span> <span data-ttu-id="50917-320">이렇게 하려면 다른 `POST` 요청을 `/token` 끝점에 제출하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-320">You can do so by submitting another `POST` request to the `/token` endpoint.</span></span> <span data-ttu-id="50917-321">이번에는 `code` 매개 변수 대신 `refresh_token` 매개 변수를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-321">This time, provide the `refresh_token` parameter instead of the `code` parameter:</span></span>

```
POST fabrikamb2c.onmicrosoft.com/oauth2/v2.0/token?p=b2c_1_sign_in HTTP/1.1
Host: https://login.microsoftonline.com
Content-Type: application/x-www-form-urlencoded

grant_type=refresh_token&client_id=90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6&scope=openid offline_access&refresh_token=AwABAAAAvPM1KaPlrEqdFSBzjqfTGBCmLdgfSTLEMPGYuNHSUYBrq...&redirect_uri=urn:ietf:wg:oauth:2.0:oob&client_secret=<your-application-secret>
```

| <span data-ttu-id="50917-322">매개 변수</span><span class="sxs-lookup"><span data-stu-id="50917-322">Parameter</span></span> | <span data-ttu-id="50917-323">필수</span><span class="sxs-lookup"><span data-stu-id="50917-323">Required</span></span> | <span data-ttu-id="50917-324">설명</span><span class="sxs-lookup"><span data-stu-id="50917-324">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="50917-325">p</span><span class="sxs-lookup"><span data-stu-id="50917-325">p</span></span> |<span data-ttu-id="50917-326">필수</span><span class="sxs-lookup"><span data-stu-id="50917-326">Required</span></span> |<span data-ttu-id="50917-327">원래의 새로 고침 토큰을 얻는 데 사용된 정책입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-327">The policy that was used to acquire the original refresh token.</span></span> <span data-ttu-id="50917-328">이 요청에 다른 정책을 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-328">You cannot use a different policy in this request.</span></span> <span data-ttu-id="50917-329">이 매개 변수는 POST 본문이 아니라 쿼리 문자열에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-329">Note that you add this parameter to the query string, not to the POST body.</span></span> |
| <span data-ttu-id="50917-330">client_id</span><span class="sxs-lookup"><span data-stu-id="50917-330">client_id</span></span> |<span data-ttu-id="50917-331">필수</span><span class="sxs-lookup"><span data-stu-id="50917-331">Required</span></span> |<span data-ttu-id="50917-332">[Azure 포털](https://portal.azure.com/) 이 앱에 할당된 응용 프로그램 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-332">The application ID that the [Azure portal](https://portal.azure.com/) assigned to your app.</span></span> |
| <span data-ttu-id="50917-333">grant_type</span><span class="sxs-lookup"><span data-stu-id="50917-333">grant_type</span></span> |<span data-ttu-id="50917-334">필수</span><span class="sxs-lookup"><span data-stu-id="50917-334">Required</span></span> |<span data-ttu-id="50917-335">권한 부여 코드 흐름의 이 단계에 대한 새로 고침 토큰이어야 하는 권한 부여 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-335">The type of grant, which must be a refresh token for this leg of the authorization code flow.</span></span> |
| <span data-ttu-id="50917-336">scope</span><span class="sxs-lookup"><span data-stu-id="50917-336">scope</span></span> |<span data-ttu-id="50917-337">권장</span><span class="sxs-lookup"><span data-stu-id="50917-337">Recommended</span></span> |<span data-ttu-id="50917-338">공백으로 구분된 범위 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-338">A space-separated list of scopes.</span></span> <span data-ttu-id="50917-339">단일 범위 값은 요청되는 두 가지 권한을 모두 Azure AD에 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-339">A single scope value indicates to Azure AD both permissions that are being requested.</span></span> <span data-ttu-id="50917-340">`openid` 범위는 사용자에게 로그인하고 ID 토큰 형식으로 사용자에 대한 데이터를 가져올 권한을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-340">The `openid` scope indicates a permission to sign in the user and get data about the user in the form of ID tokens.</span></span> <span data-ttu-id="50917-341">클라이언트와 동일한 응용 프로그램 ID로 표시되는 앱 자체의 백 엔드 웹 API에 토큰을 가져오는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-341">It can be used to get tokens to your app's own back-end web API, which is represented by the same application ID as the client.</span></span> <span data-ttu-id="50917-342">`offline_access` 범위는 리소스에 장기간 액세스하기 위한 새로 고침 토큰이 앱에 필요함을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="50917-342">The `offline_access` scope indicates that your app will need a refresh token for long-lived access to resources.</span></span> |
| <span data-ttu-id="50917-343">redirect_uri</span><span class="sxs-lookup"><span data-stu-id="50917-343">redirect_uri</span></span> |<span data-ttu-id="50917-344">권장</span><span class="sxs-lookup"><span data-stu-id="50917-344">Recommended</span></span> |<span data-ttu-id="50917-345">권한 부여 코드를 받은 응용 프로그램의 `redirect_uri` 매개 변수입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-345">The `redirect_uri` parameter of the application where you received the authorization code.</span></span> |
| <span data-ttu-id="50917-346">refresh_token</span><span class="sxs-lookup"><span data-stu-id="50917-346">refresh_token</span></span> |<span data-ttu-id="50917-347">필수</span><span class="sxs-lookup"><span data-stu-id="50917-347">Required</span></span> |<span data-ttu-id="50917-348">흐름의 두 번째 단계에서 얻은 원래의 새로 고침 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-348">The original refresh token that you acquired in the second leg of the flow.</span></span> <span data-ttu-id="50917-349">새로 고침 토큰을 받으려면 권한 부여 및 토큰 요청 모두에서 `offline_access` 범위를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-349">Note that you must have used the scope `offline_access` in both the authorization and token requests in order to receive a refresh token.</span></span> |
| <span data-ttu-id="50917-350">client_secret</span><span class="sxs-lookup"><span data-stu-id="50917-350">client_secret</span></span> |<span data-ttu-id="50917-351">필수</span><span class="sxs-lookup"><span data-stu-id="50917-351">Required</span></span> |<span data-ttu-id="50917-352">[Azure 포털](https://portal.azure.com/)에서 생성한 응용 프로그램 암호입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-352">The application secret that you generated in the [Azure portal](https://portal.azure.com/).</span></span> <span data-ttu-id="50917-353">이 응용 프로그램 암호는 중요한 보안 아티팩트입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-353">This application secret is an important security artifact.</span></span> <span data-ttu-id="50917-354">서버에 안전하게 저장해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-354">You should store it securely on your server.</span></span> <span data-ttu-id="50917-355">또한 이 클라이언트 비밀도 정기적으로 회전해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-355">You should also rotate this client secret on a periodic basis.</span></span> |

<span data-ttu-id="50917-356">성공적인 토큰 응답은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-356">A successful token response looks like:</span></span>

```
{
    "not_before": "1442340812",
    "token_type": "Bearer",
    "access_token": "eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6Ik5HVEZ2ZEstZnl0aEV1Q...",
    "scope": "90c0fe63-bcf2-44d5-8fb7-b8bbc0b29dc6 offline_access",
    "expires_in": "3600",
    "refresh_token": "AAQfQmvuDy8WtUv-sd0TBwWVQs1rC-Lfxa_NDkLqpg50Cxp5Dxj0VPF1mx2Z...",
}
```
| <span data-ttu-id="50917-357">매개 변수</span><span class="sxs-lookup"><span data-stu-id="50917-357">Parameter</span></span> | <span data-ttu-id="50917-358">설명</span><span class="sxs-lookup"><span data-stu-id="50917-358">Description</span></span> |
| --- | --- |
| <span data-ttu-id="50917-359">not_before</span><span class="sxs-lookup"><span data-stu-id="50917-359">not_before</span></span> |<span data-ttu-id="50917-360">epoch 시간에서 토큰은 유효한 것으로 간주되는 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-360">The time at which the token is considered valid, in epoch time.</span></span> |
| <span data-ttu-id="50917-361">token_type</span><span class="sxs-lookup"><span data-stu-id="50917-361">token_type</span></span> |<span data-ttu-id="50917-362">토큰 형식 값입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-362">The token type value.</span></span> <span data-ttu-id="50917-363">Azure AD는 `Bearer` 유형만 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-363">The only type that Azure AD supports is `Bearer`.</span></span> |
| <span data-ttu-id="50917-364">access_token</span><span class="sxs-lookup"><span data-stu-id="50917-364">access_token</span></span> |<span data-ttu-id="50917-365">사용자가 요청한 서명된 JWT 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-365">The signed JWT token that you requested.</span></span> |
| <span data-ttu-id="50917-366">scope</span><span class="sxs-lookup"><span data-stu-id="50917-366">scope</span></span> |<span data-ttu-id="50917-367">토큰이 유효한 범위이며, 나중에 사용할 수 있도록 토큰 캐싱에 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-367">The scope that the token is valid for, which can be used for caching tokens for later use.</span></span> |
| <span data-ttu-id="50917-368">expires_in</span><span class="sxs-lookup"><span data-stu-id="50917-368">expires_in</span></span> |<span data-ttu-id="50917-369">액세스 토큰이 유효한 시간(초)입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-369">The length of time that the access token is valid (in seconds).</span></span> |
| <span data-ttu-id="50917-370">refresh_token</span><span class="sxs-lookup"><span data-stu-id="50917-370">refresh_token</span></span> |<span data-ttu-id="50917-371">OAuth 2.0 새로 고침 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-371">An OAuth 2.0 refresh token.</span></span> <span data-ttu-id="50917-372">앱은 현재 토큰이 만료된 후 이 토큰을 사용하여 추가 토큰을 획득할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-372">The app can use this token to acquire additional tokens after the current token expires.</span></span>  <span data-ttu-id="50917-373">새로 고침 토큰은 수명이 길며, 오랜 시간 동안 리소스에 대한 액세스를 유지하는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-373">Refresh tokens are long-lived and can be used to retain access to resources for extended periods of time.</span></span> <span data-ttu-id="50917-374">자세한 내용은 [B2C 토큰 참조](active-directory-b2c-reference-tokens.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="50917-374">For more detail, refer to the [B2C token reference](active-directory-b2c-reference-tokens.md).</span></span> |

<span data-ttu-id="50917-375">오류 응답은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-375">Error responses look like:</span></span>

```
{
    "error": "access_denied",
    "error_description": "The user revoked access to the app.",
}
```

| <span data-ttu-id="50917-376">매개 변수</span><span class="sxs-lookup"><span data-stu-id="50917-376">Parameter</span></span> | <span data-ttu-id="50917-377">설명</span><span class="sxs-lookup"><span data-stu-id="50917-377">Description</span></span> |
| --- | --- |
| <span data-ttu-id="50917-378">error</span><span class="sxs-lookup"><span data-stu-id="50917-378">error</span></span> |<span data-ttu-id="50917-379">발생하는 오류 유형을 분류하는 데 사용할 수 있고 오류에 대응하는 데 사용할 수 있는 오류 코드 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-379">An error-code string that can be used to classify types of errors that occur and that can be used to react to errors.</span></span> |
| <span data-ttu-id="50917-380">error_description</span><span class="sxs-lookup"><span data-stu-id="50917-380">error_description</span></span> |<span data-ttu-id="50917-381">개발자가 인증 오류의 근본 원인을 식별하도록 도울 수 있는 특정 오류 메시지입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-381">A specific error message that can help a developer identify the root cause of an authentication error.</span></span> |

## <a name="send-a-sign-out-request"></a><span data-ttu-id="50917-382">로그아웃 요청 보내기</span><span class="sxs-lookup"><span data-stu-id="50917-382">Send a sign-out request</span></span>
<span data-ttu-id="50917-383">앱에서 사용자를 로그아웃시키려는 경우 앱의 쿠키를 삭제하거나 그렇지 않은 경우 사용자로 세션을 지우는 것은 충분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-383">When you want to sign the user out of the app, it is not enough to clear your app's cookies or otherwise end the session with the user.</span></span> <span data-ttu-id="50917-384">또한 로그아웃할 Azure AD로 사용자를 리디렉션해야 합니다. 그러지 않으면 사용자가 자격 증명을 다시 입력하지 않고 앱을 다시 인증할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-384">You must also redirect the user to Azure AD to sign out. If you fail to do so, the user might be able to reauthenticate to your app without entering their credentials again.</span></span> <span data-ttu-id="50917-385">이는 Azure AD를 사용하는 유효한 Single Sign-On 세션이 있기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-385">This is because they will have a valid single sign-on session with Azure AD.</span></span>

<span data-ttu-id="50917-386">"ID 토큰 유효성 검사" 섹션의 앞부분에서 설명한 OpenID Connect 메타데이터 문서에 나열된 `end_session` 끝점으로 사용자를 리디렉션할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-386">You can simply redirect the user to the `end_session` endpoint that is listed in the OpenID Connect metadata document described earlier in the "Validate the ID token" section:</span></span>

```
GET https://login.microsoftonline.com/fabrikamb2c.onmicrosoft.com/oauth2/v2.0/logout?
p=b2c_1_sign_in
&post_logout_redirect_uri=https%3A%2F%2Faadb2cplayground.azurewebsites.net%2F
```

| <span data-ttu-id="50917-387">매개 변수</span><span class="sxs-lookup"><span data-stu-id="50917-387">Parameter</span></span> | <span data-ttu-id="50917-388">Required?</span><span class="sxs-lookup"><span data-stu-id="50917-388">Required?</span></span> | <span data-ttu-id="50917-389">설명</span><span class="sxs-lookup"><span data-stu-id="50917-389">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="50917-390">p</span><span class="sxs-lookup"><span data-stu-id="50917-390">p</span></span> |<span data-ttu-id="50917-391">필수</span><span class="sxs-lookup"><span data-stu-id="50917-391">Required</span></span> |<span data-ttu-id="50917-392">응용 프로그램에서 사용자를 로그아웃하는 데 사용하려는 정책입니다.</span><span class="sxs-lookup"><span data-stu-id="50917-392">The policy that you want to use to sign the user out of your application.</span></span> |
| <span data-ttu-id="50917-393">post_logout_redirect_uri</span><span class="sxs-lookup"><span data-stu-id="50917-393">post_logout_redirect_uri</span></span> |<span data-ttu-id="50917-394">권장</span><span class="sxs-lookup"><span data-stu-id="50917-394">Recommended</span></span> |<span data-ttu-id="50917-395">성공적으로 로그아웃한 후에 사용자가 리디렉션되는 URL입니다. 포함되지 않은 경우 Azure AD B2C에서 사용자에게 일반 메시지를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-395">The URL that the user should be redirected to after successful sign-out. If it is not included, Azure AD B2C shows the user a generic message.</span></span> |

> [!NOTE]
> <span data-ttu-id="50917-396">사용자를 `end_session` 끝점에 연결하면 Azure AD B2C를 사용하여 일부 사용자의 Single Sign-On 상태가 해제되지만, 사용자의 소셜 IDP(ID 공급자) 세션에서 해당 사용자를 로그아웃하지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-396">Although directing the user to the `end_session` endpoint will clear some of the user's single sign-on state with Azure AD B2C, it will not sign the user out of their social identity provider (IDP) session.</span></span> <span data-ttu-id="50917-397">사용자가 다음 로그인하는 동안 같은 IDP를 선택하는 경우 자격 증명을 입력하지 않아도 다시 인증됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-397">If the user selects the same IDP during a subsequent sign-in, they will be reauthenticated, without entering their credentials.</span></span> <span data-ttu-id="50917-398">사용자가 B2C 응용 프로그램에서 로그아웃하려는 경우 반드시 Facebook 계정을 로그아웃하려는 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="50917-398">If a user wants to sign out of your B2C application, it does not necessarily mean they want to sign out of their Facebook account.</span></span> <span data-ttu-id="50917-399">그러나 로컬 계정의 경우 사용자의 세션이 올바르게 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="50917-399">However, in the case of local accounts, the user's session will be ended properly.</span></span>
> 
> 

## <a name="use-your-own-b2c-tenant"></a><span data-ttu-id="50917-400">사용자 고유의 B2C 테넌트 사용</span><span class="sxs-lookup"><span data-stu-id="50917-400">Use your own B2C tenant</span></span>
<span data-ttu-id="50917-401">이러한 요청을 스스로 시도하려면 먼저 다음 세 단계를 수행한 다음 앞에서 설명한 예제 값을 자신의 고유한 값으로 바꾸어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-401">If you want to try these requests for yourself, you must first perform these three steps, and then replace the example values described earlier with your own:</span></span>

1. <span data-ttu-id="50917-402">[B2C 테넌트를 만들고](active-directory-b2c-get-started.md), 요청에서 테넌트의 이름을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-402">[Create a B2C tenant](active-directory-b2c-get-started.md), and use the name of your tenant in the requests.</span></span>
2. <span data-ttu-id="50917-403">응용 프로그램 ID를 얻기 위해 [응용 프로그램을 만듭니다](active-directory-b2c-app-registration.md).</span><span class="sxs-lookup"><span data-stu-id="50917-403">[Create an application](active-directory-b2c-app-registration.md) to obtain an application ID.</span></span> <span data-ttu-id="50917-404">앱에 웹앱/웹 API를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="50917-404">Include a web app/web API in your app.</span></span> <span data-ttu-id="50917-405">선택적으로 응용 프로그램 비밀을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="50917-405">Optionally, create an application secret.</span></span>
3. <span data-ttu-id="50917-406">[정책을 만들어](active-directory-b2c-reference-policies.md) 정책 이름을 얻습니다.</span><span class="sxs-lookup"><span data-stu-id="50917-406">[Create your policies](active-directory-b2c-reference-policies.md) to obtain your policy names.</span></span>

