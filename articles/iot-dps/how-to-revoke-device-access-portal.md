---
title: "Azure IoT Hub Device Provisioning 서비스에 대한 장치 액세스를 관리하는 방법 | Microsoft Docs"
description: "Azure Portal에서 DPS 서비스에 대한 장치 액세스를 취소하는 방법"
services: iot-dps
keywords: 
author: JimacoMS
ms.author: v-jamebr
ms.date: 12/22/2017
ms.topic: article
ms.service: iot-dps
documentationcenter: 
manager: timlt
ms.devlang: na
ms.custom: mvc
ms.openlocfilehash: 6f1dad648b228163219c8f722eed3897f4ba4d22
ms.sourcegitcommit: 48fce90a4ec357d2fb89183141610789003993d2
ms.translationtype: HT
ms.contentlocale: ko-KR
ms.lasthandoff: 01/12/2018
---
# <a name="how-to-revoke-device-access-to-your-provisioning-service-in-the-azure-portal"></a>Azure Portal에서 프로비전 서비스에 대한 장치 액세스를 취소하는 방법

IoT 솔루션과 같이 세간의 이목을 끄는 프로필 시스템에서는 적절한 장치 자격 증명 관리가 매우 중요합니다. 이러한 시스템에 대해서는 SAS 토큰 또는 X.509 인증서의 자격 증명이 손상될 수 있는 경우 장치 액세스를 취소하는 방법을 명확하게 계획하는 것이 가장 좋습니다. 이 문서에서는 프로비전 단계에서 장치 액세스를 취소하는 방법에 대해 설명합니다.

장치가 프로비전된 후 IoT 허브에 대한 장치 액세스를 취소하는 방법에 대해 알아봅니다. [장치 비활성화](https://docs.microsoft.com/azure/iot-hub/iot-hub-devguide-identity-registry#disable-devices)를 참조하세요.

> [!NOTE] 
> 액세스를 취소한 장치의 다시 시도 정책을 알고 있어야 합니다. 예를 들어 무한 다시 시도 정책이 있는 장치는 지속적으로 프로비전 서비스에 등록하려고 하고, 서비스 리소스를 사용하고, 성능에 영향을 미칠 수 있습니다.

## <a name="blacklist-devices-with-an-individual-enrollment-entry"></a>개별 등록 항목이 있는 차단 목록 장치

개별 등록은 단일 장치에 적용되며, X.509 인증서 또는 SAS 토큰을 증명 메커니즘으로 사용할 수 있습니다(실제 또는 가상 TPM에서). (SAS 토큰을 증명 메커니즘으로 사용하는 장치는 개별 등록을 통해서만 프로비전할 수 있습니다.) 개별 등록이 있는 장치를 차단 목록에 추가하려면 해당 등록 항목을 사용하지 않도록 설정하거나 삭제할 수 있습니다. 

- 장치를 일시적으로 차단 목록에 추가하려면 해당 등록 항목을 사용하지 않도록 설정하면 됩니다. 

    1. Azure Portal에 로그인하고 왼쪽 메뉴에서 **모든 리소스**를 클릭합니다.
    2. 리소스 목록에서 장치를 차단 목록에 추가하려는 프로비전 서비스를 클릭합니다.
    3. 프로비전 서비스에서 **등록 관리**를 클릭한 후 **개별 등록** 탭을 선택합니다.
    4. 차단 목록에 추가하려는 장치의 등록 항목을 클릭하여 엽니다. 
    5. 등록 목록 항목의 아래쪽에서 **사용 안 함**을 클릭한 다음 **저장**을 클릭합니다.  

        ![포털에서 개별 등록 항목 사용 해제](./media/how-to-revoke-device-access-portal/disable-individual-enrollment.png)
    
- 장치를 영구적으로 차단 목록에 추가하려면 해당 등록 항목을 삭제하면 됩니다.

    1. Azure Portal에 로그인하고 왼쪽 메뉴에서 **모든 리소스**를 클릭합니다.
    2. 리소스 목록에서 장치를 차단 목록에 추가하려는 프로비전 서비스를 클릭합니다.
    3. 프로비전 서비스에서 **등록 관리**를 클릭한 후 **개별 등록** 탭을 선택합니다.
    4. 차단 목록에 추가하려는 장치에 대한 등록 항목 옆에 있는 상자를 선택합니다. 
    5. 창 위쪽에서 **삭제**를 클릭한 다음, **예**를 클릭하여 등록을 제거할 것인지 확인합니다. 

        ![포털에서 개별 등록 항목 삭제](./media/how-to-revoke-device-access-portal/delete-individual-enrollment.png)
    
    6. 작업이 완료되면 개별 등록 목록에서 제거된 항목이 표시됩니다.  

## <a name="blacklist-an-x509-intermediate-or-root-ca-certificate-using-an-enrollment-group"></a>등록 그룹을 사용하여 차단 목록에 X.509 중간 또는 루트 CA 인증서 추가

X.509 인증서는 일반적으로 신뢰할 수 있는 인증서 체인에 정렬됩니다. 체인의 모든 단계에서 인증서가 손상되면, 신뢰가 끊어지고, Device Provisioning 서비스에서 인증서가 포함된 모든 체인의 장치 다운스트림을 프로비전하지 못하도록 방지하려면 해당 인증서가 차단 목록에 있어야 합니다. X.509 인증서 및 프로비전 서비스를 통해 사용되는 방법에 대한 자세한 내용은 [X.509 인증서](./concepts-security.md#x509-certificates)를 참조하세요. 

등록 그룹은 동일한 중간 또는 루트 CA에서 서명한 X.509 인증서의 일반적인 증명 메커니즘을 공유하는 장치에 대한 항목입니다. 등록 그룹 항목은 중간 또는 루트 CA와 연결된 X.509 인증서뿐만 아니라 해당 인증서가 인증서 체인에 있는 장치에서 공유하는 모든 구성 값(예: 쌍 상태 및 IoT 허브 연결)으로 구성됩니다. 인증서를 차단 목록에 추가하려면 등록 그룹을 사용하지 않도록 설정하거나 삭제할 수 있습니다.

- 인증서를 일시적으로 차단 목록에 추가하려면 해당 등록 그룹을 사용하지 않도록 설정하면 됩니다. 

    1. Azure Portal에 로그인하고 왼쪽 메뉴에서 **모든 리소스**를 클릭합니다.
    2. 리소스 목록에서 서명 인증서를 차단 목록에 추가하려는 프로비전 서비스를 클릭합니다.
    3. 프로비전 서비스에서 **등록 관리**를 클릭한 후 **등록 그룹** 탭을 선택합니다.
    4. 차단 목록에 추가하려는 인증서의 등록 그룹을 클릭하여 엽니다.
    5. 등록 그룹 항목의 왼쪽 위에서 **그룹 편집**을 클릭합니다.
    6. 등록 항목을 사용하지 않도록 설정하려면 **항목 사용** 스위치에서 **사용 안 함**을 선택한 다음 **저장**을 클릭합니다.  

        ![포털에서 등록 그룹 항목 사용 해제](./media/how-to-revoke-device-access-portal/disable-enrollment-group.png)

    
- 인증서를 영구적으로 차단 목록에 추가하려면 해당 등록 그룹을 삭제하면 됩니다.

    1. Azure Portal에 로그인하고 왼쪽 메뉴에서 **모든 리소스**를 클릭합니다.
    2. 리소스 목록에서 장치를 차단 목록에 추가하려는 프로비전 서비스를 클릭합니다.
    3. 프로비전 서비스에서 **등록 관리**를 클릭한 후 **등록 그룹** 탭을 선택합니다.
    4. 차단 목록에 추가하려는 인증서에 대한 등록 그룹 옆에 있는 상자를 선택합니다. 
    5. 창 위쪽에서 **삭제**를 클릭한 다음, **예**를 클릭하여 등록 그룹을 제거할 것인지 확인합니다. 

        ![포털에서 등록 그룹 항목 삭제](./media/how-to-revoke-device-access-portal/delete-enrollment-group.png)

    6. 작업이 완료되면 등록 그룹의 목록에서 제거된 항목이 표시됩니다.  

> [!NOTE]
> 인증서에 대한 등록 그룹을 삭제할 때 해당 인증서 체인에서 루트 인증서 또는 더 높은 수준의 다른 중간 인증서에 대해 사용하도록 설정된 등록 그룹이 있으면 이 인증서 체인에 해당 인증서가 있는 장치는 계속 등록할 수 있습니다.

## <a name="blacklist-specific-devices-in-an-enrollment-group"></a>등록 그룹의 차단 목록에 특정 장치 추가

X.509 증명 메커니즘을 구현하는 장치는 장치의 인증서 체인과 개인 키를 사용하여 인증합니다. 장치에서 Device Provisioning 서비스를 사용하여 연결하고 인증하는 경우, 서비스는 등록 그룹을 검색하기 전에 먼저 장치의 자격 증명과 일치하는 개별 등록을 찾아서 장치를 프로비전할 수 있는지 여부를 결정합니다. 서비스에서 장치에 대해 사용하지 않도록 설정된 개별 등록을 찾은 경우, 장치의 인증서 체인에서 중간 또는 루트 CA에 대해 사용하도록 설정된 등록 그룹이 있더라도 해당 장치는 연결되지 않습니다. 등록 그룹의 개별 장치를 차단 목록에 추가하려면 다음 단계를 수행합니다.

1. Azure Portal에 로그인하고 왼쪽 메뉴에서 **모든 리소스**를 클릭합니다.
2. 리소스 목록에서 차단 목록에 추가하려는 장치에 대한 등록 그룹이 포함된 프로비전 서비스를 클릭합니다.
3. 프로비전 서비스에서 **등록 관리**를 클릭한 후 **개별 등록** 탭을 선택합니다.
4. 위쪽에 있는 **추가** 단추를 클릭합니다. 
5. **X.509**를 장치에 대한 보안 메커니즘으로 선택하고 장치 인증서를 업로드합니다. 이 인증서는 인증을 위한 인증서를 생성하는 데 사용하는 장치에 설치된 최종 엔터티 서명 인증서입니다.
6. 장치에 대한 **IoT Hub 장치 ID**를 입력합니다. 
7. 등록 항목을 사용하지 않도록 설정하려면 **항목 사용** 스위치에서 **사용 안 함**을 선택합니다. 
8. **저장**을 클릭합니다. 등록이 성공적으로 만들어지면 장치가 **개별 그룹** 탭 아래에 표시됩니다. 

    ![포털에서 개별 등록 항목 사용 해제](./media/how-to-revoke-device-access-portal/disable-individual-enrollment.png)




