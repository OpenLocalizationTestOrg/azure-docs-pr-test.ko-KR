---
title: "Azure 데이터 레이크 저장소의 aaaEncryption | Microsoft Docs"
description: "Azure Data Lake Store에서 암호화 및 키 회전의 작동 방식 이해"
services: data-lake-store
documentationcenter: 
author: yagupta
manager: 
editor: 
ms.assetid: 
ms.service: data-lake-store
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 4/14/2017
ms.author: yagupta
ms.openlocfilehash: a9f3a2dce8232deba93005594d1e6a21e9c0cbee
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="encryption-of-data-in-azure-data-lake-store"></a><span data-ttu-id="384a0-103">Azure Data Lake Store의 데이터 암호화</span><span class="sxs-lookup"><span data-stu-id="384a0-103">Encryption of data in Azure Data Lake Store</span></span>

<span data-ttu-id="384a0-104">Azure Data Lake Store의 암호화를 통해 데이터를 보고하고 엔터프라이즈 보안 정책을 구현하고 규정 준수 요구 사항을 충족할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-104">Encryption in Azure Data Lake Store helps you protect your data, implement enterprise security policies, and meet regulatory compliance requirements.</span></span> <span data-ttu-id="384a0-105">이 문서는 hello 디자인의 개요를 제공 하 고 구현의 기술적인 측면도 hello 중 일부에 대해 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-105">This article provides an overview of hello design, and discusses some of hello technical aspects of implementation.</span></span>

<span data-ttu-id="384a0-106">Data Lake Store는 미사용 또는 전송 중인 데이터의 암호화를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-106">Data Lake Store supports encryption of data both at rest and in transit.</span></span> <span data-ttu-id="384a0-107">Data Lake Store는 미사용 데이터에 대해 기본적으로 투명한 암호화를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-107">For data at rest, Data Lake Store supports "on by default," transparent encryption.</span></span> <span data-ttu-id="384a0-108">이러한 용어의 의미를 좀 더 자세히 알아보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-108">Here is what these terms mean in a bit more detail:</span></span>

* <span data-ttu-id="384a0-109">**기본적으로**: hello 기본 설정은 새 데이터 레이크 저장소 계정을 만들 때 암호화를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-109">**On by default**: When you create a new Data Lake Store account, hello default setting enables encryption.</span></span> <span data-ttu-id="384a0-110">이제 데이터 레이크 저장소에 저장 된 데이터를 영구 미디어에 이전 암호화 된 toostoring 항상 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-110">Thereafter, data that is stored in Data Lake Store is always encrypted prior toostoring on persistent media.</span></span> <span data-ttu-id="384a0-111">이것은 모든 데이터에 대 한 hello 동작 하 고 계정을 만든 후 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-111">This is hello behavior for all data, and it cannot be changed after an account is created.</span></span>
* <span data-ttu-id="384a0-112">**투명 한**: 데이터 레이크 저장소에서 자동으로 toopersisting을 이전 하는 데이터를 암호화 하 고 이전 tooretrieval 데이터를 해독 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-112">**Transparent**: Data Lake Store automatically encrypts data prior toopersisting, and decrypts data prior tooretrieval.</span></span> <span data-ttu-id="384a0-113">hello 암호화 구성 되 고 hello 데이터 레이크 저장소 수준에서 관리자가 관리 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-113">hello encryption is configured and managed at hello Data Lake Store level by an administrator.</span></span> <span data-ttu-id="384a0-114">변경 내용이 없는 toohello 데이터 Api에 액세스 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-114">No changes are made toohello data access APIs.</span></span> <span data-ttu-id="384a0-115">따라서 암호화 때문에 Data Lake Store와 상호 작용하는 응용 프로그램 및 서비스를 변경할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-115">Thus, no changes are required in applications and services that interact with Data Lake Store because of encryption.</span></span>

<span data-ttu-id="384a0-116">전송되는 데이터(즉, 동작 중인 데이터)는 항상 Data Lake Store에서 암호화됩니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-116">Data in transit (also known as data in motion) is also always encrypted in Data Lake Store.</span></span> <span data-ttu-id="384a0-117">또한 tooencrypting 데이터 사전 toostoring toopersistent 미디어 hello 데이터는 항상 전송에 보호 HTTPS를 사용 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-117">In addition tooencrypting data prior toostoring toopersistent media, hello data is also always secured in transit by using HTTPS.</span></span> <span data-ttu-id="384a0-118">HTTPS는 hello hello 데이터 레이크 저장소 REST 인터페이스에 지원 되는 유일한 프로토콜입니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-118">HTTPS is hello only protocol that is supported for hello Data Lake Store REST interfaces.</span></span> <span data-ttu-id="384a0-119">hello 다음 그림에 데이터 레이크 저장소의 데이터 암호화 되는 방법을:</span><span class="sxs-lookup"><span data-stu-id="384a0-119">hello following diagram shows how data becomes encrypted in Data Lake Store:</span></span>

![Data Lake Store의 데이터 암호화 다이어그램](./media/data-lake-store-encryption/fig1.png)


## <a name="set-up-encryption-with-data-lake-store"></a><span data-ttu-id="384a0-121">Data Lake Store를 사용하여 암호화 설정</span><span class="sxs-lookup"><span data-stu-id="384a0-121">Set up encryption with Data Lake Store</span></span>

<span data-ttu-id="384a0-122">Data Lake Store 암호화는 계정을 만드는 동안 설정되며, 항상 기본적으로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-122">Encryption for Data Lake Store is set up during account creation, and it is always enabled by default.</span></span> <span data-ttu-id="384a0-123">Hello 키를 직접 관리 하거나 데이터 레이크 저장소 toomanage 허용 ç (이것이 hello 기본) 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-123">You can either manage hello keys yourself, or allow Data Lake Store toomanage them for you (this is hello default).</span></span>

<span data-ttu-id="384a0-124">자세한 내용은 [시작](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="384a0-124">For more information, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

## <a name="how-encryption-works-in-data-lake-store"></a><span data-ttu-id="384a0-125">Data Lake Store에서 암호화가 작동하는 방법</span><span class="sxs-lookup"><span data-stu-id="384a0-125">How encryption works in Data Lake Store</span></span>

<span data-ttu-id="384a0-126">hello 다음 정보에 설명 어떻게 toomanage 마스터 암호화 키를 설명 hello 세 가지 유형의 키 데이터 레이크 저장소에 대 한 데이터 암호화에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-126">hello following information covers how toomanage master encryption keys, and it explains hello three different types of keys you can use in data encryption for Data Lake Store.</span></span>

### <a name="master-encryption-keys"></a><span data-ttu-id="384a0-127">마스터 암호화 키</span><span class="sxs-lookup"><span data-stu-id="384a0-127">Master encryption keys</span></span>

<span data-ttu-id="384a0-128">Data Lake Store는 MEK(마스터 암호화 키)를 관리하는 두 가지 모드를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-128">Data Lake Store provides two modes for management of master encryption keys (MEKs).</span></span> <span data-ttu-id="384a0-129">지금은 해당 hello 마스터 암호화 키가 hello 최상위 수준 키를 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-129">For now, assume that hello master encryption key is hello top-level key.</span></span> <span data-ttu-id="384a0-130">액세스 toohello 마스터 암호화 키가 필요한 toodecrypt 데이터 레이크 저장소에 저장 된 데이터.</span><span class="sxs-lookup"><span data-stu-id="384a0-130">Access toohello master encryption key is required toodecrypt any data stored in Data Lake Store.</span></span>

<span data-ttu-id="384a0-131">hello 마스터 암호화 키를 관리 하기 위한 hello 두 모드는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-131">hello two modes for managing hello master encryption key are as follows:</span></span>

*   <span data-ttu-id="384a0-132">서비스 관리 키</span><span class="sxs-lookup"><span data-stu-id="384a0-132">Service managed keys</span></span>
*   <span data-ttu-id="384a0-133">고객 관리 키</span><span class="sxs-lookup"><span data-stu-id="384a0-133">Customer managed keys</span></span>

<span data-ttu-id="384a0-134">두 모드에서 Azure 키 자격 증명 모음에 저장 하 여 hello 마스터 암호화 키 보호 됩니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-134">In both modes, hello master encryption key is secured by storing it in Azure Key Vault.</span></span> <span data-ttu-id="384a0-135">주요 자격 증명 모음에 사용 되는 toosafeguard 암호화 키 일 수 있는 Azure에서 완벽 하 게 관리 되 고, 보안 수준이 높은 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-135">Key Vault is a fully managed, highly secure service on Azure that can be used toosafeguard cryptographic keys.</span></span> <span data-ttu-id="384a0-136">자세한 내용은 [Key Vault](https://azure.microsoft.com/services/key-vault)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="384a0-136">For more information, see [Key Vault](https://azure.microsoft.com/services/key-vault).</span></span>

<span data-ttu-id="384a0-137">다음은 hello hello MEKs 관리의 두 가지 모드에서 제공 하는 기능의 간략 한 비교입니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-137">Here is a brief comparison of capabilities provided by hello two modes of managing hello MEKs.</span></span>

|  | <span data-ttu-id="384a0-138">서비스 관리 키</span><span class="sxs-lookup"><span data-stu-id="384a0-138">Service managed keys</span></span> | <span data-ttu-id="384a0-139">고객 관리 키</span><span class="sxs-lookup"><span data-stu-id="384a0-139">Customer managed keys</span></span> |
| --- | --- | --- |
|<span data-ttu-id="384a0-140">데이터가 어떻게 저장되나요?</span><span class="sxs-lookup"><span data-stu-id="384a0-140">How is data stored?</span></span>|<span data-ttu-id="384a0-141">항상 암호화 된 이전 toobeing 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-141">Always encrypted prior toobeing stored.</span></span>|<span data-ttu-id="384a0-142">항상 암호화 된 이전 toobeing 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-142">Always encrypted prior toobeing stored.</span></span>|
|<span data-ttu-id="384a0-143">Hello 마스터 암호화 키 저장 위치</span><span class="sxs-lookup"><span data-stu-id="384a0-143">Where is hello Master Encryption Key stored?</span></span>|<span data-ttu-id="384a0-144">키 자격 증명 모음</span><span class="sxs-lookup"><span data-stu-id="384a0-144">Key Vault</span></span>|<span data-ttu-id="384a0-145">키 자격 증명 모음</span><span class="sxs-lookup"><span data-stu-id="384a0-145">Key Vault</span></span>|
|<span data-ttu-id="384a0-146">키 자격 증명 모음 외부에서 hello에 저장 된 키의 선택을 취소 하는 모든 암호화?</span><span class="sxs-lookup"><span data-stu-id="384a0-146">Are any encryption keys stored in hello clear outside of Key Vault?</span></span> |<span data-ttu-id="384a0-147">아니요</span><span class="sxs-lookup"><span data-stu-id="384a0-147">No</span></span>|<span data-ttu-id="384a0-148">아니요</span><span class="sxs-lookup"><span data-stu-id="384a0-148">No</span></span>|
|<span data-ttu-id="384a0-149">키 자격 증명 모음에서 검색할 수 MEK hello?</span><span class="sxs-lookup"><span data-stu-id="384a0-149">Can hello MEK be retrieved by Key Vault?</span></span>|<span data-ttu-id="384a0-150">아니요.</span><span class="sxs-lookup"><span data-stu-id="384a0-150">No.</span></span> <span data-ttu-id="384a0-151">MEK 주요 자격 증명 모음에 저장 된 hello, 후만 사용할 수 있습니다 암호화 및 암호 해독 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-151">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|<span data-ttu-id="384a0-152">아니요.</span><span class="sxs-lookup"><span data-stu-id="384a0-152">No.</span></span> <span data-ttu-id="384a0-153">MEK 주요 자격 증명 모음에 저장 된 hello, 후만 사용할 수 있습니다 암호화 및 암호 해독 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-153">After hello MEK is stored in Key Vault, it can only be used for encryption and decryption.</span></span>|
|<span data-ttu-id="384a0-154">소유자, 주요 자격 증명 모음 인스턴스와 hello MEK hello?</span><span class="sxs-lookup"><span data-stu-id="384a0-154">Who owns hello Key Vault instance and hello MEK?</span></span>|<span data-ttu-id="384a0-155">hello 데이터 레이크 저장소 서비스</span><span class="sxs-lookup"><span data-stu-id="384a0-155">hello Data Lake Store service</span></span>|<span data-ttu-id="384a0-156">Azure 구독에 속한 hello 주요 자격 증명 모음 인스턴스를 소유 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-156">You own hello Key Vault instance, which belongs in your own Azure subscription.</span></span> <span data-ttu-id="384a0-157">키 자격 증명 모음의 MEK hello 소프트웨어 또는 하드웨어에서 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-157">hello MEK in Key Vault can be managed by software or hardware.</span></span>|
|<span data-ttu-id="384a0-158">Hello Data Lake 저장소 서비스에 대 한 액세스 toohello MEK를 해지할 수 있습니까?</span><span class="sxs-lookup"><span data-stu-id="384a0-158">Can you revoke access toohello MEK for hello Data Lake Store service?</span></span>|<span data-ttu-id="384a0-159">아니요</span><span class="sxs-lookup"><span data-stu-id="384a0-159">No</span></span>|<span data-ttu-id="384a0-160">예.</span><span class="sxs-lookup"><span data-stu-id="384a0-160">Yes.</span></span> <span data-ttu-id="384a0-161">주요 자격 증명에 대 한 액세스 제어 목록을 관리할 수 있으며 hello Data Lake 저장소 서비스에 대 한 액세스 제어 항목 toohello 서비스 id를 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-161">You can manage access control lists in Key Vault, and remove access control entries toohello service identity for hello Data Lake Store service.</span></span>|
|<span data-ttu-id="384a0-162">영구적으로 hello MEK를 삭제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-162">Can you permanently delete hello MEK?</span></span>|<span data-ttu-id="384a0-163">아니요</span><span class="sxs-lookup"><span data-stu-id="384a0-163">No</span></span>|<span data-ttu-id="384a0-164">예.</span><span class="sxs-lookup"><span data-stu-id="384a0-164">Yes.</span></span> <span data-ttu-id="384a0-165">주요 자격 증명 모음에서 MEK hello를 삭제 하면 hello 데이터 레이크 저장소 서비스를 포함 하 여 모든 사용자가 hello hello Data Lake 저장소 계정에에서는 데이터를 해독할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-165">If you delete hello MEK from Key Vault, hello data in hello Data Lake Store account cannot be decrypted by anyone, including hello Data Lake Store service.</span></span> <br><br> <span data-ttu-id="384a0-166">명시적으로 백업한 hello MEK 이전 toodeleting 것 키 자격 증명 모음에서 hello MEK 복원할 수 및 hello 데이터 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-166">If you have explicitly backed up hello MEK prior toodeleting it from Key Vault, hello MEK can be restored, and hello data can then be recovered.</span></span> <span data-ttu-id="384a0-167">그러나 있습니다 백업 되지 않은 hello MEK 이전 toodeleting 것 키 자격 증명 모음에서 경우 hello 데이터 hello Data Lake 저장소 계정에서에서 되지 해독할 수 이후 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-167">However, if you have not backed up hello MEK prior toodeleting it from Key Vault, hello data in hello Data Lake Store account can never be decrypted thereafter.</span></span>|


<span data-ttu-id="384a0-168">이러한 차이 외에도 관리 하는 사람 MEK hello 및 hello 키 자격 증명 모음 인스턴스에 구문이 있는 hello 나머지 hello 디자인 모드에서 모두 동일 hello 됩니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-168">Aside from this difference of who manages hello MEK and hello Key Vault instance in which it resides, hello rest of hello design is hello same for both modes.</span></span>

<span data-ttu-id="384a0-169">Hello에 대 한 hello 모드 마스터 암호화 키를 선택 하는 경우 것이 중요 한 tooremember hello 다음 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-169">It's important tooremember hello following when you choose hello mode for hello master encryption keys:</span></span>

*   <span data-ttu-id="384a0-170">여부 toouse 고객 관리 되는 키 또는 관리 서비스 키 데이터 레이크 저장소 계정 프로 비전 할 때 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-170">You can choose whether toouse customer managed keys or service managed keys when you provision a Data Lake Store account.</span></span>
*   <span data-ttu-id="384a0-171">데이터 레이크 저장소 계정이 프로 비전 되 면 hello 모드를 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-171">After a Data Lake Store account is provisioned, hello mode cannot be changed.</span></span>

### <a name="encryption-and-decryption-of-data"></a><span data-ttu-id="384a0-172">데이터 암호화 및 암호 해독</span><span class="sxs-lookup"><span data-stu-id="384a0-172">Encryption and decryption of data</span></span>

<span data-ttu-id="384a0-173">세 가지 방법으로 데이터 암호화의 hello 디자인에 사용 되는 키의 수입니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-173">There are three types of keys that are used in hello design of data encryption.</span></span> <span data-ttu-id="384a0-174">다음 표에서 hello 요약을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-174">hello following table provides a summary:</span></span>

| <span data-ttu-id="384a0-175">키</span><span class="sxs-lookup"><span data-stu-id="384a0-175">Key</span></span>                   | <span data-ttu-id="384a0-176">약어</span><span class="sxs-lookup"><span data-stu-id="384a0-176">Abbreviation</span></span> | <span data-ttu-id="384a0-177">연결 대상</span><span class="sxs-lookup"><span data-stu-id="384a0-177">Associated with</span></span> | <span data-ttu-id="384a0-178">저장 위치</span><span class="sxs-lookup"><span data-stu-id="384a0-178">Storage location</span></span>                             | <span data-ttu-id="384a0-179">형식</span><span class="sxs-lookup"><span data-stu-id="384a0-179">Type</span></span>       | <span data-ttu-id="384a0-180">참고 사항</span><span class="sxs-lookup"><span data-stu-id="384a0-180">Notes</span></span>                                                                                                   |
|-----------------------|--------------|-----------------|----------------------------------------------|------------|---------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="384a0-181">마스터 암호화 키</span><span class="sxs-lookup"><span data-stu-id="384a0-181">Master Encryption Key</span></span> | <span data-ttu-id="384a0-182">MEK</span><span class="sxs-lookup"><span data-stu-id="384a0-182">MEK</span></span>          | <span data-ttu-id="384a0-183">Data Lake Store 계정</span><span class="sxs-lookup"><span data-stu-id="384a0-183">A Data Lake Store account</span></span> | <span data-ttu-id="384a0-184">키 자격 증명 모음</span><span class="sxs-lookup"><span data-stu-id="384a0-184">Key Vault</span></span>                              | <span data-ttu-id="384a0-185">비대칭</span><span class="sxs-lookup"><span data-stu-id="384a0-185">Asymmetric</span></span> | <span data-ttu-id="384a0-186">Data Lake Store 또는 사용자가 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-186">It can be managed by Data Lake Store or you.</span></span>                                                              |
| <span data-ttu-id="384a0-187">데이터 암호화 키</span><span class="sxs-lookup"><span data-stu-id="384a0-187">Data Encryption Key</span></span>   | <span data-ttu-id="384a0-188">DEK</span><span class="sxs-lookup"><span data-stu-id="384a0-188">DEK</span></span>          | <span data-ttu-id="384a0-189">Data Lake Store 계정</span><span class="sxs-lookup"><span data-stu-id="384a0-189">A Data Lake Store account</span></span> | <span data-ttu-id="384a0-190">영구 저장소, Data Lake Store 서비스에서 관리</span><span class="sxs-lookup"><span data-stu-id="384a0-190">Persistent storage, managed by Data Lake Store service</span></span> | <span data-ttu-id="384a0-191">대칭</span><span class="sxs-lookup"><span data-stu-id="384a0-191">Symmetric</span></span>  | <span data-ttu-id="384a0-192">DEK hello MEK hello로 암호화 됩니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-192">hello DEK is encrypted by hello MEK.</span></span> <span data-ttu-id="384a0-193">암호화 된 DEK는 영구 미디어에 저장 된 항목 번호입니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-193">hello encrypted DEK is what is stored on persistent media.</span></span> |
| <span data-ttu-id="384a0-194">블록 암호화 키</span><span class="sxs-lookup"><span data-stu-id="384a0-194">Block Encryption Key</span></span>  | <span data-ttu-id="384a0-195">BEK</span><span class="sxs-lookup"><span data-stu-id="384a0-195">BEK</span></span>          | <span data-ttu-id="384a0-196">데이터 블록</span><span class="sxs-lookup"><span data-stu-id="384a0-196">A block of data</span></span> | <span data-ttu-id="384a0-197">없음</span><span class="sxs-lookup"><span data-stu-id="384a0-197">None</span></span>                                         | <span data-ttu-id="384a0-198">대칭</span><span class="sxs-lookup"><span data-stu-id="384a0-198">Symmetric</span></span>  | <span data-ttu-id="384a0-199">hello BEK DEK hello 및 hello 데이터 블록에서 파생 됩니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-199">hello BEK is derived from hello DEK and hello data block.</span></span>                                                      |

<span data-ttu-id="384a0-200">hello 다음 다이어그램에서는 이러한 개념을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-200">hello following diagram illustrates these concepts:</span></span>

![데이터 암호화의 키](./media/data-lake-store-encryption/fig2.png)

#### <a name="pseudo-algorithm-when-a-file-is-toobe-decrypted"></a><span data-ttu-id="384a0-202">파일을 암호 해독 toobe 때 의사 알고리즘:</span><span class="sxs-lookup"><span data-stu-id="384a0-202">Pseudo algorithm when a file is toobe decrypted:</span></span>
1.  <span data-ttu-id="384a0-203">Hello DEK hello Data Lake 저장소 계정에 대 한 캐시 된 고 사용 준비가 인지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-203">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="384a0-204">그렇지 않은 경우 다음 읽을 hello 영구 저장소에서 DEK를 암호화 하 고 해독 tooKey 자격 증명 모음 toobe 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-204">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="384a0-205">캐시 hello 메모리에 DEK를 해독 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-205">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="384a0-206">준비 toouse 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-206">It is now ready toouse.</span></span>
2.  <span data-ttu-id="384a0-207">Hello 파일에 데이터의 모든 블록에 대 한:</span><span class="sxs-lookup"><span data-stu-id="384a0-207">For every block of data in hello file:</span></span>
    - <span data-ttu-id="384a0-208">읽기 hello 영구 저장소에서 데이터 블록을 암호화 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-208">Read hello encrypted block of data from persistent storage.</span></span>
    - <span data-ttu-id="384a0-209">DEK hello에서 BEK hello 및 hello 암호화 된 데이터 블록을 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-209">Generate hello BEK from hello DEK and hello encrypted block of data.</span></span>
    - <span data-ttu-id="384a0-210">Hello BEK toodecrypt 데이터를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-210">Use hello BEK toodecrypt data.</span></span>


#### <a name="pseudo-algorithm-when-a-block-of-data-is-toobe-encrypted"></a><span data-ttu-id="384a0-211">데이터 블록을 암호화 toobe 때 의사 알고리즘:</span><span class="sxs-lookup"><span data-stu-id="384a0-211">Pseudo algorithm when a block of data is toobe encrypted:</span></span>
1.  <span data-ttu-id="384a0-212">Hello DEK hello Data Lake 저장소 계정에 대 한 캐시 된 고 사용 준비가 인지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-212">Check if hello DEK for hello Data Lake Store account is cached and ready for use.</span></span>
    - <span data-ttu-id="384a0-213">그렇지 않은 경우 다음 읽을 hello 영구 저장소에서 DEK를 암호화 하 고 해독 tooKey 자격 증명 모음 toobe 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-213">If not, then read hello encrypted DEK from persistent storage, and send it tooKey Vault toobe decrypted.</span></span> <span data-ttu-id="384a0-214">캐시 hello 메모리에 DEK를 해독 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-214">Cache hello decrypted DEK in memory.</span></span> <span data-ttu-id="384a0-215">준비 toouse 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-215">It is now ready toouse.</span></span>
2.  <span data-ttu-id="384a0-216">Hello 블록의 데이터에 대 한 고유 BEK hello DEK에서 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-216">Generate a unique BEK for hello block of data from hello DEK.</span></span>
3.  <span data-ttu-id="384a0-217">Aes-256 암호화를 사용 하 여 hello BEK 사용 하 여 hello 데이터 블록을 암호화 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-217">Encrypt hello data block with hello BEK, by using AES-256 encryption.</span></span>
4.  <span data-ttu-id="384a0-218">영구 저장소에 hello 암호화 된 데이터 블록의 데이터를 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-218">Store hello encrypted data block of data on persistent storage.</span></span>

> [!NOTE] 
> <span data-ttu-id="384a0-219">성능상의 이유로 hello에 DEK의 선택을 취소 하는 hello 짧은 시간에 대 한 메모리에 캐시 된 하 고 나중에 즉시 지워집니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-219">For performance reasons, hello DEK in hello clear is cached in memory for a short time, and is immediately erased afterward.</span></span> <span data-ttu-id="384a0-220">영구 미디어에는 항상 MEK hello로 암호화 된 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-220">On persistent media, it is always stored encrypted by hello MEK.</span></span>

## <a name="key-rotation"></a><span data-ttu-id="384a0-221">키 회전</span><span class="sxs-lookup"><span data-stu-id="384a0-221">Key rotation</span></span>

<span data-ttu-id="384a0-222">고객이 관리 하는 키를 사용 하는 hello MEK 회전할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-222">When you are using customer-managed keys, you can rotate hello MEK.</span></span> <span data-ttu-id="384a0-223">tooset 고객이 관리 하는 키가 있는 데이터 레이크 저장소 계정을 참조 하는 방법을 toolearn [시작](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal)합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-223">toolearn how tooset up a Data Lake Store account with customer-managed keys, see [Getting started](https://docs.microsoft.com/azure/data-lake-store/data-lake-store-get-started-portal).</span></span>

### <a name="prerequisites"></a><span data-ttu-id="384a0-224">필수 조건</span><span class="sxs-lookup"><span data-stu-id="384a0-224">Prerequisites</span></span>

<span data-ttu-id="384a0-225">Hello Data Lake 저장소 계정 연결을 설정할 때 사용자 고유의 키 toouse 선택 했습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-225">When you set up hello Data Lake Store account, you have chosen toouse your own keys.</span></span> <span data-ttu-id="384a0-226">Hello 계정이 생성 된 다음에이 옵션을 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-226">This option cannot be changed after hello account has been created.</span></span> <span data-ttu-id="384a0-227">hello 다음 단계에서는 가정 고객이 관리 하는 키를 사용 하는 (즉, 키 자격 증명 모음에서 사용자 고유의 키를 선택 했습니다).</span><span class="sxs-lookup"><span data-stu-id="384a0-227">hello following steps assume that you are using customer-managed keys (that is, you have chosen your own keys from Key Vault).</span></span>

<span data-ttu-id="384a0-228">암호화에 대 한 hello 기본 옵션을 사용 하는 경우 데이터가 항상 암호화 데이터 레이크 저장소에서 관리 되는 키를 사용 하 여 note 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-228">Note that if you use hello default options for encryption, your data is always encrypted by using keys managed by Data Lake Store.</span></span> <span data-ttu-id="384a0-229">이 옵션에서는 없는 hello 기능 toorotate 키 데이터 레이크 저장소에서 관리 하는 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-229">In this option, you don't have hello ability toorotate keys, as they are managed by Data Lake Store.</span></span>

### <a name="how-toorotate-hello-mek-in-data-lake-store"></a><span data-ttu-id="384a0-230">Toorotate는 데이터 레이크 저장소의 MEK hello 하는 방법</span><span class="sxs-lookup"><span data-stu-id="384a0-230">How toorotate hello MEK in Data Lake Store</span></span>

1. <span data-ttu-id="384a0-231">Toohello 로그인 [Azure 포털](https://portal.azure.com/)합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-231">Sign in toohello [Azure portal](https://portal.azure.com/).</span></span>
2. <span data-ttu-id="384a0-232">데이터 레이크 저장소 계정에 연결 된 키를 저장 하는 toohello 주요 자격 증명 모음 인스턴스를 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-232">Browse toohello Key Vault instance that stores your keys associated with your Data Lake Store account.</span></span> <span data-ttu-id="384a0-233">**키**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-233">Select **Keys**.</span></span>

    ![Key Vault의 스크린샷](./media/data-lake-store-encryption/keyvault.png)

3.  <span data-ttu-id="384a0-235">데이터 레이크 저장소 계정과 연결 된 hello 키를 선택 하 고이 키의 새 버전을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-235">Select hello key associated with your Data Lake Store account, and create a new version of this key.</span></span> <span data-ttu-id="384a0-236">데이터 레이크 저장소 현재 지원함을 키의 키를 회전 tooa 새 버전을 참고 합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-236">Note that Data Lake Store currently only supports key rotation tooa new version of a key.</span></span> <span data-ttu-id="384a0-237">Tooa 다른 키를 회전을 지원 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-237">It doesn't support rotating tooa different key.</span></span>

   ![강조 표시된 새 버전에서 키 창의 스크린샷](./media/data-lake-store-encryption/keynewversion.png)

4.  <span data-ttu-id="384a0-239">Toohello 데이터 레이크 저장소 저장소 계정 이름을 찾아 선택 **암호화**합니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-239">Browse toohello Data Lake Store storage account, and select **Encryption**.</span></span>

    ![강조 표시된 암호화에서 Data Lake Store 저장소 계정 창의 스크린샷](./media/data-lake-store-encryption/select-encryption.png)

5.  <span data-ttu-id="384a0-241">새 키 버전의 hello 키를 사용할 수 있는지는 메시지가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-241">A message notifies you that a new key version of hello key is available.</span></span> <span data-ttu-id="384a0-242">클릭 **키 회전** tooupdate hello 키 toohello 새 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-242">Click **Rotate Key** tooupdate hello key toohello new version.</span></span>

    ![강조 표시된 메시지와 회전 키에서 Data Lake Store 창의 스크린샷](./media/data-lake-store-encryption/rotatekey.png)

<span data-ttu-id="384a0-244">이 작업에는 2 분 미만 취해야 되며 tookey 회전 인해 예상된 가동 중지 시간이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="384a0-244">This operation should take less than two minutes, and there is no expected downtime due tookey rotation.</span></span> <span data-ttu-id="384a0-245">Hello 작업이 완료 되 면 hello hello 키의 새 버전 사용 중인 경우</span><span class="sxs-lookup"><span data-stu-id="384a0-245">After hello operation is complete, hello new version of hello key is in use.</span></span>
