---
title: "Azure 응용 프로그램 게이트웨이에 대 한 모니터링 개요 aaaHealth | Microsoft Docs"
description: "Azure 응용 프로그램 게이트웨이의 기능을 모니터링 하는 hello에 대 한 자세한 내용은"
services: application-gateway
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
tags: azure-resource-manager
ms.assetid: 7eeba328-bb2d-4d3e-bdac-7552e7900b7f
ms.service: application-gateway
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 12/14/2016
ms.author: gwallace
ms.openlocfilehash: 5091d80394a354ff849ce7ccee8cc9d2fd0456db
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="application-gateway-health-monitoring-overview"></a><span data-ttu-id="31adf-103">응용 프로그램 게이트웨이 상태 모니터링 개요</span><span class="sxs-lookup"><span data-stu-id="31adf-103">Application Gateway health monitoring overview</span></span>

<span data-ttu-id="31adf-104">기본적으로 azure 응용 프로그램 게이트웨이 응용 프로그램은 백 엔드 풀의 모든 리소스의 hello 상태를 모니터링 하 고 자동으로 hello 풀에서 비정상으로 간주 하는 모든 리소스를 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-104">Azure Application Gateway by default monitors hello health of all resources in its back-end pool and automatically removes any resource considered unhealthy from hello pool.</span></span> <span data-ttu-id="31adf-105">응용 프로그램 게이트웨이 toomonitor hello 비정상 인스턴스를 계속 하 고 해당 추가 사용 가능 하 게 하 고 응답 toohealth 프로브 toohello 정상 백 엔드 풀을 백업 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-105">Application Gateway continues toomonitor hello unhealthy instances and adds them back toohello healthy back-end pool once they become available and respond toohealth probes.</span></span> <span data-ttu-id="31adf-106">응용 프로그램 게이트웨이 백 엔드 HTTP 설정 hello에에서 정의 된 동일한 포트 hello로 hello 상태 프로브를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-106">Application gateway sends hello health probes with hello same port that is defined in hello back-end HTTP settings.</span></span> <span data-ttu-id="31adf-107">이 구성을 통해 해당 hello 프로브 hello 동일한 포트 고객 tooconnect toohello 백 엔드 사용 될 수 있는지 테스트 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-107">This configuration ensures that hello probe is testing hello same port that customers would be using tooconnect toohello backend.</span></span>

![Application Gateway 프로브 예제][1]

<span data-ttu-id="31adf-109">또한 toousing 기본 상태 프로브 모니터링도 사용자 지정할 수 있습니다 hello 상태 프로브 toosuit 응용 프로그램의 요구 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-109">In addition toousing default health probe monitoring, you can also customize hello health probe toosuit your application's requirements.</span></span> <span data-ttu-id="31adf-110">이 문서에서는 기본 및 사용자 지정 상태 프로브를 모두 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-110">In this article, both default and custom health probes are covered.</span></span>

> [!NOTE]
> <span data-ttu-id="31adf-111">응용 프로그램 게이트웨이 서브넷에 NSG 있으면 포트 범위 65503 65534 인바운드 트래픽 hello 응용 프로그램 게이트웨이 서브넷에서 열어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-111">If there is an NSG on Application Gateway subnet, port ranges 65503-65534 should be opened on hello Application Gateway subnet for Inbound traffic.</span></span> <span data-ttu-id="31adf-112">이러한 포트는 hello 백 엔드 상태 API toowork 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-112">These ports are required for hello backend health API toowork.</span></span>

## <a name="default-health-probe"></a><span data-ttu-id="31adf-113">기본 상태 프로브</span><span class="sxs-lookup"><span data-stu-id="31adf-113">Default health probe</span></span>

<span data-ttu-id="31adf-114">응용 프로그램 게이트웨이는 사용자 지정 프로브 구성을 설정하지 않는 경우 기본 상태 프로브를 자동으로 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-114">An application gateway automatically configures a default health probe when you don't set up any custom probe configuration.</span></span> <span data-ttu-id="31adf-115">동작을 모니터링 하는 hello hello 백 엔드 풀에 대해 구성 된 HTTP 요청 toohello IP 주소 하 여 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-115">hello monitoring behavior works by making an HTTP request toohello IP addresses configured for hello back-end pool.</span></span> <span data-ttu-id="31adf-116">기본 프로브에 대해 https hello 백 엔드 http 설정 구성 된 경우 hello 프로브도 HTTPS를 사용 hello 백 엔드의 잘 tootest 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-116">For default probes if hello backend http settings are configured for HTTPS, hello probe uses HTTPS as well tootest health of hello backends.</span></span>

<span data-ttu-id="31adf-117">예: 포트 80에서 응용 프로그램 게이트웨이 toouse 백 엔드 서버 A, B 및 C tooreceive HTTP 네트워크 트래픽을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-117">For example: You configure your application gateway toouse back-end servers A, B, and C tooreceive HTTP network traffic on port 80.</span></span> <span data-ttu-id="31adf-118">세 명의 서버 hello 정상 HTTP 응답에 대 한 30 초 마다 테스트 hello 기본 상태 모니터링 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-118">hello default health monitoring tests hello three servers every 30 seconds for a healthy HTTP response.</span></span> <span data-ttu-id="31adf-119">정상 HTTP 응답은 [상태 코드](https://msdn.microsoft.com/library/aa287675.aspx) 200에서 399 사이입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-119">A healthy HTTP response has a [status code](https://msdn.microsoft.com/library/aa287675.aspx) between 200 and 399.</span></span>

<span data-ttu-id="31adf-120">서버 A에 대 한 hello 기본 프로브 확인이 실패 하면 hello 응용 프로그램 게이트웨이 백 엔드 풀에서 제거 하 고 네트워크 트래픽 흐름이 toothis 서버를 중지 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-120">If hello default probe check fails for server A, hello application gateway removes it from its back-end pool, and network traffic stops flowing toothis server.</span></span> <span data-ttu-id="31adf-121">hello 기본 프로브는 여전히 toocheck 서버에 대 한 30 초는 마다 계속합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-121">hello default probe still continues toocheck for server A every 30 seconds.</span></span> <span data-ttu-id="31adf-122">서버 A 응답 하는 경우 성공적으로 tooone 요청에서 기본 상태 검색, 정상 toohello 백 엔드 풀 및 toohello 서버를 다시 흐르기 트래픽 시작으로 다시 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-122">When server A responds successfully tooone request from a default health probe, it is added back as healthy toohello back-end pool, and traffic starts flowing toohello server again.</span></span>

### <a name="default-health-probe-settings"></a><span data-ttu-id="31adf-123">기본 상태 프로브 설정</span><span class="sxs-lookup"><span data-stu-id="31adf-123">Default health probe settings</span></span>

| <span data-ttu-id="31adf-124">프로브 속성</span><span class="sxs-lookup"><span data-stu-id="31adf-124">Probe property</span></span> | <span data-ttu-id="31adf-125">값</span><span class="sxs-lookup"><span data-stu-id="31adf-125">Value</span></span> | <span data-ttu-id="31adf-126">설명</span><span class="sxs-lookup"><span data-stu-id="31adf-126">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="31adf-127">프로브 URL</span><span class="sxs-lookup"><span data-stu-id="31adf-127">Probe URL</span></span> |<span data-ttu-id="31adf-128">http://127.0.0.1:\<port\>/</span><span class="sxs-lookup"><span data-stu-id="31adf-128">http://127.0.0.1:\<port\>/</span></span> |<span data-ttu-id="31adf-129">URL 경로</span><span class="sxs-lookup"><span data-stu-id="31adf-129">URL path</span></span> |
| <span data-ttu-id="31adf-130">간격</span><span class="sxs-lookup"><span data-stu-id="31adf-130">Interval</span></span> |<span data-ttu-id="31adf-131">30</span><span class="sxs-lookup"><span data-stu-id="31adf-131">30</span></span> |<span data-ttu-id="31adf-132">프로브 간격(초)</span><span class="sxs-lookup"><span data-stu-id="31adf-132">Probe interval in seconds</span></span> |
| <span data-ttu-id="31adf-133">시간 제한</span><span class="sxs-lookup"><span data-stu-id="31adf-133">Time-out</span></span> |<span data-ttu-id="31adf-134">30</span><span class="sxs-lookup"><span data-stu-id="31adf-134">30</span></span> |<span data-ttu-id="31adf-135">프로브 시간 제한(초)</span><span class="sxs-lookup"><span data-stu-id="31adf-135">Probe time-out in seconds</span></span> |
| <span data-ttu-id="31adf-136">비정상 임계값</span><span class="sxs-lookup"><span data-stu-id="31adf-136">Unhealthy threshold</span></span> |<span data-ttu-id="31adf-137">3</span><span class="sxs-lookup"><span data-stu-id="31adf-137">3</span></span> |<span data-ttu-id="31adf-138">프로브 재시도 횟수.</span><span class="sxs-lookup"><span data-stu-id="31adf-138">Probe retry count.</span></span> <span data-ttu-id="31adf-139">hello 연속 프로브 오류 발생 횟수 hello 비정상 임계값에 도달 하면 hello 백 엔드 서버가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-139">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!NOTE]
> <span data-ttu-id="31adf-140">hello 포트는 hello 동일 hello 백 엔드 HTTP 설정으로 포트입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-140">hello port is hello same port as hello back-end HTTP settings.</span></span>

<span data-ttu-id="31adf-141">hello 기본 검색만 보므로 http://127.0.0.1:\<포트\> toodetermine 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-141">hello default probe looks only at http://127.0.0.1:\<port\> toodetermine health status.</span></span> <span data-ttu-id="31adf-142">Tooconfigure hello 상태 프로브 toogo tooa 사용자 지정 URL이 필요 하거나 다른 설정을 수정할 경우에 단계를 수행 하는 hello에 설명 된 대로 사용자 지정 프로브를 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-142">If you need tooconfigure hello health probe toogo tooa custom URL or modify any other settings, you must use custom probes as described in hello following steps:</span></span>

## <a name="custom-health-probe"></a><span data-ttu-id="31adf-143">사용자 지정 상태 프로브</span><span class="sxs-lookup"><span data-stu-id="31adf-143">Custom health probe</span></span>

<span data-ttu-id="31adf-144">사용자 지정 프로브 toohave hello 상태 모니터링을 보다 세부적으로 제어를 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-144">Custom probes allow you toohave a more granular control over hello health monitoring.</span></span> <span data-ttu-id="31adf-145">사용자 지정 프로브를 사용할 때는 hello 백 엔드 풀 인스턴스 비정상으로 표시 하기 전에 hello 프로브 간격, URL 및 경로 tootest hello 및 실패 한 응답 tooaccept 수를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-145">When using custom probes, you can configure hello probe interval, hello URL and path tootest, and how many failed responses tooaccept before marking hello back-end pool instance as unhealthy.</span></span>

### <a name="custom-health-probe-settings"></a><span data-ttu-id="31adf-146">사용자 지정 상태 프로브 설정</span><span class="sxs-lookup"><span data-stu-id="31adf-146">Custom health probe settings</span></span>

<span data-ttu-id="31adf-147">hello 다음 표에서 사용자 지정 상태 검색의 hello 속성에 대 한 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-147">hello following table provides definitions for hello properties of a custom health probe.</span></span>

| <span data-ttu-id="31adf-148">프로브 속성</span><span class="sxs-lookup"><span data-stu-id="31adf-148">Probe property</span></span> | <span data-ttu-id="31adf-149">설명</span><span class="sxs-lookup"><span data-stu-id="31adf-149">Description</span></span> |
| --- | --- |
| <span data-ttu-id="31adf-150">이름</span><span class="sxs-lookup"><span data-stu-id="31adf-150">Name</span></span> |<span data-ttu-id="31adf-151">Hello 검색의 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-151">Name of hello probe.</span></span> <span data-ttu-id="31adf-152">이 이름은 백 엔드 HTTP 설정에 사용 되는 toorefer toohello 프로브입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-152">This name is used toorefer toohello probe in back-end HTTP settings.</span></span> |
| <span data-ttu-id="31adf-153">프로토콜</span><span class="sxs-lookup"><span data-stu-id="31adf-153">Protocol</span></span> |<span data-ttu-id="31adf-154">프로토콜은 toosend hello 프로브를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-154">Protocol used toosend hello probe.</span></span> <span data-ttu-id="31adf-155">hello 백 엔드 HTTP 설정에 정의 된 hello 프로토콜을 사용 하는 hello 프로브</span><span class="sxs-lookup"><span data-stu-id="31adf-155">hello probe uses hello protocol defined in hello back-end HTTP settings</span></span> |
| <span data-ttu-id="31adf-156">호스트</span><span class="sxs-lookup"><span data-stu-id="31adf-156">Host</span></span> |<span data-ttu-id="31adf-157">호스트 이름 toosend hello 프로브</span><span class="sxs-lookup"><span data-stu-id="31adf-157">Host name toosend hello probe.</span></span> <span data-ttu-id="31adf-158">다중 사이트를 Application Gateway에 구성하는 경우에만 적용할 수 있습니다. 그렇지 않으면 '127.0.0.1'을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-158">Applicable only when multi-site is configured on Application Gateway, otherwise use '127.0.0.1'.</span></span> <span data-ttu-id="31adf-159">이 값은 VM 호스트 이름과 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-159">This value is different from VM host name.</span></span> |
| <span data-ttu-id="31adf-160">Path</span><span class="sxs-lookup"><span data-stu-id="31adf-160">Path</span></span> |<span data-ttu-id="31adf-161">Hello 프로브의 상대 경로입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-161">Relative path of hello probe.</span></span> <span data-ttu-id="31adf-162">hello 유효한 경로가에서 시작 하 고 '/'입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-162">hello valid path starts from '/'.</span></span> |
| <span data-ttu-id="31adf-163">간격</span><span class="sxs-lookup"><span data-stu-id="31adf-163">Interval</span></span> |<span data-ttu-id="31adf-164">프로브 간격(초).</span><span class="sxs-lookup"><span data-stu-id="31adf-164">Probe interval in seconds.</span></span> <span data-ttu-id="31adf-165">이 값은 두 개의 연속 프로브 사이의 hello 시간 간격입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-165">This value is hello time interval between two consecutive probes.</span></span> |
| <span data-ttu-id="31adf-166">시간 제한</span><span class="sxs-lookup"><span data-stu-id="31adf-166">Time-out</span></span> |<span data-ttu-id="31adf-167">프로브 시간 제한(초)</span><span class="sxs-lookup"><span data-stu-id="31adf-167">Probe time-out in seconds.</span></span> <span data-ttu-id="31adf-168">이 시간 제한 기간 내에서 유효한 응답 받지 hello 프로브 실패로 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-168">If a valid response is not received within this time-out period, hello probe is marked as failed.</span></span>  |
| <span data-ttu-id="31adf-169">비정상 임계값</span><span class="sxs-lookup"><span data-stu-id="31adf-169">Unhealthy threshold</span></span> |<span data-ttu-id="31adf-170">프로브 재시도 횟수.</span><span class="sxs-lookup"><span data-stu-id="31adf-170">Probe retry count.</span></span> <span data-ttu-id="31adf-171">hello 연속 프로브 오류 발생 횟수 hello 비정상 임계값에 도달 하면 hello 백 엔드 서버가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-171">hello back-end server is marked down after hello consecutive probe failure count reaches hello unhealthy threshold.</span></span> |

> [!IMPORTANT]
> <span data-ttu-id="31adf-172">응용 프로그램 게이트웨이 단일 사이트에 대해 구성 된 경우 기본 hello 호스트에서 이름은로 지정 해야 '127.0.0.1', 그렇지 않으면 사용자 지정 프로브를 구성 하지 않는 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-172">If Application Gateway is configured for a single site, by default hello Host name should be specified as '127.0.0.1', unless otherwise configured in custom probe.</span></span>
> <span data-ttu-id="31adf-173">참조에 대 한 사용자 지정 프로브 보내집니다 너무\<프로토콜\>://\<호스트\>:\<포트\>\<경로\>합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-173">For reference a custom probe is sent too\<protocol\>://\<host\>:\<port\>\<path\>.</span></span> <span data-ttu-id="31adf-174">hello 사용 되는 포트 됩니다 hello 백 엔드 HTTP 설정에 정의 된 대로 동일한 포트를 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-174">hello port used will be hello same port as defined in hello back-end HTTP settings.</span></span>

## <a name="next-steps"></a><span data-ttu-id="31adf-175">다음 단계</span><span class="sxs-lookup"><span data-stu-id="31adf-175">Next steps</span></span>
<span data-ttu-id="31adf-176">응용 프로그램 게이트웨이 상태를 모니터링 하는 방법에 대 한 학습을 구성할 수 있습니다는 [사용자 지정 상태 프로브](application-gateway-create-probe-portal.md) hello Azure 포털에서에서 또는 [사용자 지정 상태 프로브](application-gateway-create-probe-ps.md) PowerShell 및 hello Azure 리소스 관리자를 사용 하 여 배포 모델입니다.</span><span class="sxs-lookup"><span data-stu-id="31adf-176">After learning about Application Gateway health monitoring, you can configure a [custom health probe](application-gateway-create-probe-portal.md) in hello Azure portal or a [custom health probe](application-gateway-create-probe-ps.md) using PowerShell and hello Azure Resource Manager deployment model.</span></span>

[1]: ./media/application-gateway-probe-overview/appgatewayprobe.png
