---
title: "Azure Cosmos DB의 일관성 수준 | Microsoft Docs"
description: "Azure Cosmos DB에는 최종 일관성, 가용성 및 대기 시간을 절충하여 조정하는 데 유용한 5가지 일관성 수준이 있습니다."
keywords: "최종 일관성, azure cosmos db, azure, Microsoft azure"
services: cosmos-db
author: mimig1
manager: jhubbard
editor: cgronlun
documentationcenter: 
ms.assetid: 3fe51cfa-a889-4a4a-b320-16bf871fe74c
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: mimig
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: a1ebec2285982c70aa9dc49950769fe18e2e2d0d
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/03/2017
---
# <a name="tunable-data-consistency-levels-in-azure-cosmos-db"></a><span data-ttu-id="457bd-104">Azure Cosmos DB의 튜닝 가능한 데이터 일관성 수준</span><span class="sxs-lookup"><span data-stu-id="457bd-104">Tunable data consistency levels in Azure Cosmos DB</span></span>
<span data-ttu-id="457bd-105">Azure Cosmos DB는 처음부터 모든 데이터 모델에 대한 전역 배포를 염두에 두고 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-105">Azure Cosmos DB is designed from the ground up with global distribution in mind for every data model.</span></span> <span data-ttu-id="457bd-106">예측 가능한 짧은 대기 시간을 보증하고, 99.99% 가용성 SLA와 여러 개의 잘 정의된 관대한 일관성 모델을 제공하도록 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-106">It is designed to offer predictable low latency guarantees, a 99.99% availability SLA, and multiple well-defined relaxed consistency models.</span></span> <span data-ttu-id="457bd-107">현재 Azure Cosmos DB는 5가지 일관성 수준(강력, 제한된 부실, 세션, 일관적인 접두사 및 최종)을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-107">Currently, Azure Cosmos DB provides five consistency levels: strong, bounded-staleness, session, consistent prefix, and eventual.</span></span> 

<span data-ttu-id="457bd-108">Azure Cosmos DB는 분산된 데이터베이스에서 흔히 제공하는 **강력**하고 **최종 일관성**있는 모델 외에도 신중하게 변환된 조작 가능한 3가지 일관성 모델을 제공하며 실제 사용 사례에서도 유용하다는 것이 입증되었습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-108">Besides **strong** and **eventual consistency** models commonly offered by distributed databases, Azure Cosmos DB offers three more carefully codified and operationalized consistency models, and has validated their usefulness against real world use cases.</span></span> <span data-ttu-id="457bd-109">이러한 일관성 모델은 **제한된 부실**, **세션** 및 **일관적인 접두사** 일관성 수준입니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-109">These are the **bounded staleness**, **session**, and **consistent prefix** consistency levels.</span></span> <span data-ttu-id="457bd-110">이 5가지 일관성 수준을 통해 일관성, 가용성, 대기 시간 사이에서 타당하게 절충합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-110">Collectively these five consistency levels enable you to make well-reasoned trade-offs between consistency, availability, and latency.</span></span> 

## <a name="distributed-databases-and-consistency"></a><span data-ttu-id="457bd-111">분산된 데이터베이스 및 일관성</span><span class="sxs-lookup"><span data-stu-id="457bd-111">Distributed databases and consistency</span></span>
<span data-ttu-id="457bd-112">상업적으로 분산된 데이터베이스는 입증 가능한 잘 정의된 일관성 선택 사항을 전혀 제공하지 않는 데이터베이스와, 두 가지 극단적인 프로그래밍 가능성 선택을 제공하는 데이터베이스(강력한 일관성, 결과적 일관성) 등의 두 가지 범주에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-112">Commercial distributed databases fall into two categories: databases that do not offer well-defined, provable consistency choices at all, and databases which offer two extreme programmability choices (strong vs. eventual consistency).</span></span> 

<span data-ttu-id="457bd-113">전자의 경우 응용 프로그램 개발자들이 복제 프로토콜을 세부적으로 구현해야 하는 부담이 있고 개발자들이 일관성, 가용성, 대기 시간 및 처리량 간의 상호 균형 유지가 어렵습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-113">The former burdens application developers with minutia of their replication protocols and expects them to make difficult tradeoffs between consistency, availability, latency, and throughput.</span></span> <span data-ttu-id="457bd-114">후자의 경우에는 두 가지 극단의 상황 중 하나를 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-114">The latter puts a pressure to choose one of the two extremes.</span></span> <span data-ttu-id="457bd-115">50여 개가 넘는 일관성 모델의 연구와 제안이 있지만 분산형 데이터베이스 커뮤니티에서는 강력하고 결과적인 일관성 이상으로 일관성 수준을 상용화하지 못하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-115">Despite the abundance of research and proposals for more than 50 consistency models, the distributed database community has not been able to commercialize consistency levels beyond strong and eventual consistency.</span></span> <span data-ttu-id="457bd-116">Cosmos DB에서는 개발자가 5개의 잘 정의된 일관성 모델을 일관성 스펙트럼(강력, 제한된 부실, [세션](http://dl.acm.org/citation.cfm?id=383631), 일관적인 접두사, 결과적)과 함께 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-116">Cosmos DB allows developers to choose between five well-defined consistency models along the consistency spectrum – strong, bounded staleness, [session](http://dl.acm.org/citation.cfm?id=383631), consistent prefix, and eventual.</span></span> 

![Azure Cosmos DB는 선택 가능한 여러 개의 잘 정의된(관대한) 일관성 모델을 제공합니다.](./media/consistency-levels/five-consistency-levels.png)

<span data-ttu-id="457bd-118">다음 표에서는 각 일관성 수준이 제공하는 특정 보증을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-118">The following table illustrates the specific guarantees each consistency level provides.</span></span>
 
<span data-ttu-id="457bd-119">**일관성 수준 및 보증**</span><span class="sxs-lookup"><span data-stu-id="457bd-119">**Consistency Levels and guarantees**</span></span>

| <span data-ttu-id="457bd-120">일관성 수준</span><span class="sxs-lookup"><span data-stu-id="457bd-120">Consistency Level</span></span> | <span data-ttu-id="457bd-121">보증</span><span class="sxs-lookup"><span data-stu-id="457bd-121">Guarantees</span></span> |
| --- | --- |
| <span data-ttu-id="457bd-122">강력</span><span class="sxs-lookup"><span data-stu-id="457bd-122">Strong</span></span> | <span data-ttu-id="457bd-123">선형화 가능성</span><span class="sxs-lookup"><span data-stu-id="457bd-123">Linearizability</span></span> |
| <span data-ttu-id="457bd-124">제한된 부실</span><span class="sxs-lookup"><span data-stu-id="457bd-124">Bounded Staleness</span></span> | <span data-ttu-id="457bd-125">일관적인 접두사</span><span class="sxs-lookup"><span data-stu-id="457bd-125">Consistent Prefix.</span></span> <span data-ttu-id="457bd-126">k 접두사 또는 t 간격을 통해 쓰기 뒤 읽기 지연</span><span class="sxs-lookup"><span data-stu-id="457bd-126">Reads lag behind writes by k prefixes or t interval</span></span> |
| <span data-ttu-id="457bd-127">세션</span><span class="sxs-lookup"><span data-stu-id="457bd-127">Session</span></span>   | <span data-ttu-id="457bd-128">일관적인 접두사</span><span class="sxs-lookup"><span data-stu-id="457bd-128">Consistent Prefix.</span></span> <span data-ttu-id="457bd-129">단조 읽기, 단조 쓰기, 쓰기 읽기, 읽기 뒤 쓰기</span><span class="sxs-lookup"><span data-stu-id="457bd-129">Monotonic reads, monotonic writes, read-your-writes, write-follows-reads</span></span> |
| <span data-ttu-id="457bd-130">일관적인 접두사</span><span class="sxs-lookup"><span data-stu-id="457bd-130">Consistent Prefix</span></span> | <span data-ttu-id="457bd-131">간격 없이 모든 업데이트의 일부 접두어의 업데이트 반환</span><span class="sxs-lookup"><span data-stu-id="457bd-131">Updates returned are some prefix of all the updates, with no gaps</span></span> |
| <span data-ttu-id="457bd-132">최종</span><span class="sxs-lookup"><span data-stu-id="457bd-132">Eventual</span></span>  | <span data-ttu-id="457bd-133">순서 외 읽기</span><span class="sxs-lookup"><span data-stu-id="457bd-133">Out of order reads</span></span> |

<span data-ttu-id="457bd-134">Cosmos DB 계정에 대해 기본 일관성 수준을 구성할 수 있습니다(나중에 특정 읽기 요청에 대한 일관성 덮어씀).</span><span class="sxs-lookup"><span data-stu-id="457bd-134">You can configure the default consistency level on your Cosmos DB account (and later override the consistency on a specific read request).</span></span> <span data-ttu-id="457bd-135">내부적으로 기본 일관성 수준은 여러 지역에 걸칠 수 있는 파티션 집합 안의 데이터에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-135">Internally, the default consistency level applies to data within the partition sets which may span regions.</span></span> <span data-ttu-id="457bd-136">테넌트의 약 73%는 세션 일관성을 사용하고 20%는 제한된 부실을 선호합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-136">About 73% of our tenants use session consistency and 20% prefer bounded staleness.</span></span> <span data-ttu-id="457bd-137">고객의 약 3%는 처음에 다양한 일관성 수준을 실험한 후 응용 프로그램에 맞는 특정 일관성을 선택하는 것으로 확인되었습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-137">We observe that approximately 3% of our customers experiment with various consistency levels initially before settling on a specific consistency choice for their application.</span></span> <span data-ttu-id="457bd-138">또한 테넌트의 2%만이 요청에 따라 일관성 수준을 재정의하는 것으로 확인되었습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-138">We also observe that only 2% of our tenants override consistency levels on a per request basis.</span></span> 

<span data-ttu-id="457bd-139">Cosmos DB에서 세션, 일관적인 접두사 및 최종 일관성에서의 읽기는 강력 또는 제한된 부실 일관성에서의 읽기보다 2배 저렴합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-139">In Cosmos DB, reads served at session, consistent prefix and eventual consistency are twice as cheap as reads with strong or bounded staleness consistency.</span></span> <span data-ttu-id="457bd-140">Cosmos DB는 가용성, 처리량 및 대기 시간과 함께 일관성 보장을 포함하여 업계 최고 수준의 포괄적인 99.99% SLA를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-140">Cosmos DB has industry leading comprehensive 99.99% SLAs including consistency guarantees along with availability, throughput, and latency.</span></span> <span data-ttu-id="457bd-141">우리는 서비스 원격 분석에 대해 지속적으로 작동하고 일관성 위반을 사용자에게 공개적으로 보고하는 [선형화 가능성 검사기](http://dl.acm.org/citation.cfm?id=1806634)를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-141">We employ a [linearizability checker](http://dl.acm.org/citation.cfm?id=1806634), which continuously operates over our service telemetry and openly reports any consistency violations to you.</span></span> <span data-ttu-id="457bd-142">제한된 부실의 경우 k 및 t 경계 위반을 모니터링하고 보고합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-142">For bounded staleness, we monitor and report any violations to k and t bounds.</span></span> <span data-ttu-id="457bd-143">또한 5가지 완화된 일관성 수준의 경우 [확률적 제한된 부실 메트릭](http://dl.acm.org/citation.cfm?id=2212359)을 사용자에게 직접 보고합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-143">For all five relaxed consistency levels, we also report the [probabilistic bounded staleness metric](http://dl.acm.org/citation.cfm?id=2212359) directly to you.</span></span>  

## <a name="scope-of-consistency"></a><span data-ttu-id="457bd-144">일관성 범위</span><span class="sxs-lookup"><span data-stu-id="457bd-144">Scope of consistency</span></span>
<span data-ttu-id="457bd-145">일관성의 세분성은 단일 사용자 요청에 따라 범위가 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-145">The granularity of consistency is scoped to a single user request.</span></span> <span data-ttu-id="457bd-146">쓰기 요청은 삽입, 바꾸기, upsert 또는 삭제 트랜잭션에 해당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-146">A write request may correspond to an insert, replace, upsert, or delete transaction.</span></span> <span data-ttu-id="457bd-147">쓰기와 마찬가지로 읽기/쿼리 트랜잭션도 단일 사용자 요청에 대해 범위가 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-147">As with writes, a read/query transaction is also scoped to a single user request.</span></span> <span data-ttu-id="457bd-148">사용자는 여러 파티션에 걸친 대량의 결과 세트에 페이지를 매겨야 할 수 있지만, 각 읽기 트랜잭션은 단일 페이지에 따라 범위가 지정되고 단일 패턴 내에서 서비스가 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-148">The user may be required to paginate over a large result-set, spanning multiple partitions, but each read transaction is scoped to a single page and served from within a single partition.</span></span>

## <a name="consistency-levels"></a><span data-ttu-id="457bd-149">일관성 수준</span><span class="sxs-lookup"><span data-stu-id="457bd-149">Consistency levels</span></span>
<span data-ttu-id="457bd-150">Cosmos DB 아래의 모든 컬렉션(및 데이터베이스)에 적용되는 데이터베이스 계정에서 기본 일관성 수준을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-150">You can configure a default consistency level on your database account that applies to all collections (and databases) under your Cosmos DB account.</span></span> <span data-ttu-id="457bd-151">기본적으로 사용자 정의 리소스에 대해 실행되는 모든 읽기 및 쿼리는 데이터베이스 계정에 지정된 기본 일관성 수준을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-151">By default, all reads and queries issued against the user-defined resources use the default consistency level specified on the database account.</span></span> <span data-ttu-id="457bd-152">지원되는 각 API를 사용하여 특정 읽기/쿼리 요청의 일관성 수준을 완화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-152">You can relax the consistency level of a specific read/query request using in each of the supported APIs.</span></span> <span data-ttu-id="457bd-153">Azure Cosmos DB 복제 프로토콜에서 지원하는 일관성 수준은 5가지가 있으며, 아래 설명처럼 특정 일관성 보증과 성능을 명확히 절충합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-153">There are five types of consistency levels supported by the Azure Cosmos DB replication protocol that provide a clear trade-off between specific consistency guarantees and performance, as described in this section.</span></span>

<span data-ttu-id="457bd-154">**강력**:</span><span class="sxs-lookup"><span data-stu-id="457bd-154">**Strong**:</span></span> 

* <span data-ttu-id="457bd-155">강력한 일관성은 [선형화 가능성](https://aphyr.com/posts/313-strong-consistency-models)을 보증하고, 읽기는 가장 최신 버전의 항목을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-155">Strong consistency offers a [linearizability](https://aphyr.com/posts/313-strong-consistency-models) guarantee with the reads guaranteed to return the most recent version of an item.</span></span> 
* <span data-ttu-id="457bd-156">강력한 일관성은 과반수 쿼럼의 복제본에서 지속적으로 커밋된 후에만 쓰기가 표시되도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-156">Strong consistency guarantees that a write is only visible after it is committed durably by the majority quorum of replicas.</span></span> <span data-ttu-id="457bd-157">쓰기는 동기적으로 주 복제본 및 쿼럼의 보조 복제본 둘 다에서 지속적으로 커밋되거나 중단됩니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-157">A write is either synchronously committed durably by both the primary and the quorum of secondaries, or it is aborted.</span></span> <span data-ttu-id="457bd-158">읽기는 항상 과반수의 읽기 쿼럼에서 승인됩니다. 클라이언트는 커밋되지 않은 쓰기나 부분 쓰기를 볼 수 없으며 항상 승인된 최신 쓰기를 읽습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-158">A read is always acknowledged by the majority read quorum, a client can never see an uncommitted or partial write and is always guaranteed to read the latest acknowledged write.</span></span> 
* <span data-ttu-id="457bd-159">강력한 일관성을 사용하도록 구성된 Azure Cosmos DB 계정은 Azure Cosmos DB 계정에 두 개 이상의 Azure 지역을 연결할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-159">Azure Cosmos DB accounts that are configured to use strong consistency cannot associate more than one Azure region with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="457bd-160">강력한 일관성이 적용된 읽기 작업(사용한 [요청 단위](request-units.md) 기준)의 비용은 세션 및 최종보다 많지만, 제한된 경의와 같습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-160">The cost of a read operation (in terms of [request units](request-units.md) consumed) with strong consistency is higher than session and eventual, but the same as bounded staleness.</span></span>

<span data-ttu-id="457bd-161">**제한된 부실**</span><span class="sxs-lookup"><span data-stu-id="457bd-161">**Bounded staleness**:</span></span> 

* <span data-ttu-id="457bd-162">제한된 부실 일관성은 적어도 항목의 *K* 버전이나 접두어 또는 *t* 시간 간격에 읽기가 쓰기보다 뒤처지게 합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-162">Bounded staleness consistency guarantees that the reads may lag behind writes by at most *K* versions or prefixes of an item or *t* time-interval.</span></span> 
* <span data-ttu-id="457bd-163">따라서 제한된 부실을 선택하는 경우 "부실"을 두 가지 방법, 즉 읽기가 쓰기보다 느린 항목 버전 번호 *K*와 시간 간격 *t*로 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-163">Therefore, when choosing bounded staleness, the "staleness" can be configured in two ways: number of versions *K* of the item by which the reads lag behind the writes, and the time interval *t*</span></span> 
* <span data-ttu-id="457bd-164">제한된 부실은 "부실 창" 내부를 제외하고 전체 전역 순서를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-164">Bounded staleness offers total global order except within the "staleness window."</span></span> <span data-ttu-id="457bd-165">"부실 창" 내부 및 외부 지역에 단조 읽기 보증이 존재합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-165">The monotonic read guarantees exists within a region both inside and outside the "staleness window."</span></span> 
* <span data-ttu-id="457bd-166">제한된 부실은 세션이나 최종 일관성보다 강력한 일관성 보증을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-166">Bounded staleness provides a stronger consistency guarantee than session or eventual consistency.</span></span> <span data-ttu-id="457bd-167">전역에 배포되는 응용 프로그램의 경우, 강력한 일관성을 가지기를 바라지만 가용성이 99.99%이고 대기 시간이 짧은 시나리오에서는 제한된 부실을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-167">For globally distributed applications, we recommend you use bounded staleness for scenarios where you would like to have strong consistency but also want 99.99% availability and low latency.</span></span> 
* <span data-ttu-id="457bd-168">제한된 부실로 구성된 Azure Cosmos DB 계정은 Azure Cosmos DB 계정이 있는 모든 Azure 지역과 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-168">Azure Cosmos DB accounts that are configured with bounded staleness consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="457bd-169">제한된 부실이 적용된 읽기 작업(사용한 요청 단위 기준)의 비용은 세션 및 최종 일관성보다 높지만, 강력한 일관성과 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-169">The cost of a read operation (in terms of RUs consumed) with bounded staleness is higher than session and eventual consistency, but the same as strong consistency.</span></span>

<span data-ttu-id="457bd-170">**세션**:</span><span class="sxs-lookup"><span data-stu-id="457bd-170">**Session**:</span></span> 

* <span data-ttu-id="457bd-171">강력한 일관성 수준과 제한된 부실 종속성 수준이 제공하는 전역 일관성 모델과 달리 세션 일관성 범위는 클라이언트 세션에 따라 범위가 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-171">Unlike the global consistency models offered by strong and bounded staleness consistency levels, session consistency is scoped to a client session.</span></span> 
* <span data-ttu-id="457bd-172">세션 일관성은 단조 읽기, 단조 쓰기, 사용자 고유 쓰기 읽기(RYW)를 보증하므로 장치 또는 사용자 세션이 관련된 모든 시나리오에 이상적입니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-172">Session consistency is ideal for all scenarios where a device or user session is involved since it guarantees monotonic reads, monotonic writes, and read your own writes (RYW) guarantees.</span></span> 
* <span data-ttu-id="457bd-173">세션 일관성으로 특정 세션에 예측 가능한 일관성을 제공하고, 쓰기 및 읽기 대기 시간이 가장 짧으면서도 최대한 많은 읽기 처리량을 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-173">Session consistency provides predictable consistency for a session, and maximum read throughput while offering the lowest latency writes and reads.</span></span> 
* <span data-ttu-id="457bd-174">세션 일관성으로 구성된 Azure Cosmos DB 계정은 Azure Cosmos DB 계정이 있는 모든 Azure 지역과 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-174">Azure Cosmos DB accounts that are configured with session consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="457bd-175">세션 일관성 수준의 읽기 작업의 비용(사용한 RU 기준)은 강력 및 제한된 부실 일관성 수준보다 적지만, 최종 일관성보다는 높습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-175">The cost of a read operation (in terms of RUs consumed) with session consistency level is less than strong and bounded staleness, but more than eventual consistency</span></span>

<span data-ttu-id="457bd-176"><a id="consistent-prefix"></a>
**일관적인 접두사**:</span><span class="sxs-lookup"><span data-stu-id="457bd-176"><a id="consistent-prefix"></a>
**Consistent Prefix**:</span></span> 

* <span data-ttu-id="457bd-177">일관적인 접두사는 추가 쓰기가 없을 경우 그룹 내의 복제본이 결국 수렴되도록 보장합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-177">Consistent prefix guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="457bd-178">일관적인 접두사는 읽기가 잘못된 쓰기를 볼 수 없도록 보장합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-178">Consistent prefix guarantees that reads never see out of order writes.</span></span> <span data-ttu-id="457bd-179">쓰기가 `A, B, C` 순서로 수행된 경우 클라이언트는 `A`, `A,B` 또는 `A,B,C`를 볼 수 있지만 `A,C` 또는 `B,A,C`처럼 잘못된 것은 볼 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-179">If writes were performed in the order `A, B, C`, then a client sees either `A`, `A,B`, or `A,B,C`, but never out of order like `A,C` or `B,A,C`.</span></span>
* <span data-ttu-id="457bd-180">일관적인 접두사로 구성된 Azure Cosmos DB 계정은 Azure Cosmos DB 계정이 있는 모든 Azure 지역과 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-180">Azure Cosmos DB accounts that are configured with consistent prefix consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 

<span data-ttu-id="457bd-181">**최종**:</span><span class="sxs-lookup"><span data-stu-id="457bd-181">**Eventual**:</span></span> 

* <span data-ttu-id="457bd-182">최종 일관성은 추가 쓰기가 없을 경우 그룹 내의 복제본이 결국 수렴되도록 보장합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-182">Eventual consistency guarantees that in absence of any further writes, the replicas within the group eventually converge.</span></span> 
* <span data-ttu-id="457bd-183">최종 일관성은 가장 약한 형태의 일관성으로, 클라이언트가 이전에 확인한 것보다 오래된 값을 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-183">Eventual consistency is the weakest form of consistency where a client may get the values that are older than the ones it had seen before.</span></span>
* <span data-ttu-id="457bd-184">최종 일관성은 읽기 일관성이 가장 약하지만 읽기와 쓰기 둘 다에서 대기 시간이 가장 짧습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-184">Eventual consistency provides the weakest read consistency but offers the lowest latency for both reads and writes.</span></span>
* <span data-ttu-id="457bd-185">최종 일관성으로 구성된 Azure Cosmos DB 계정은 Azure Cosmos DB 계정이 있는 모든 Azure 지역과 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-185">Azure Cosmos DB accounts that are configured with eventual consistency can associate any number of Azure regions with their Azure Cosmos DB account.</span></span> 
* <span data-ttu-id="457bd-186">최종 일관성 수준의 읽기 작업 비용(사용한 RU 기준)은 모든 Azure Cosmos DB 일관성 수준에서 가장 낮습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-186">The cost of a read operation (in terms of RUs consumed) with the eventual consistency level is the lowest of all the Azure Cosmos DB consistency levels.</span></span>

## <a name="configuring-the-default-consistency-level"></a><span data-ttu-id="457bd-187">기본 일관성 수준 구성</span><span class="sxs-lookup"><span data-stu-id="457bd-187">Configuring the default consistency level</span></span>
1. <span data-ttu-id="457bd-188">[Azure Portal](https://portal.azure.com/)의 표시줄에서 **Azure Cosmos DB**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-188">In the [Azure portal](https://portal.azure.com/), in the Jumpbar, click **Azure Cosmos DB**.</span></span>
2. <span data-ttu-id="457bd-189">**Azure Cosmos DB** 블레이드에서 수정할 데이터베이스 계정을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-189">In the **Azure Cosmos DB** blade, select the database account to modify.</span></span>
3. <span data-ttu-id="457bd-190">계정 블레이드에서 **기본 일관성**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-190">In the account blade, click **Default consistency**.</span></span>
4. <span data-ttu-id="457bd-191">**기본 일관성** 블레이드에서 새 일관성 수준을 선택하고 **저장**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-191">In the **Default Consistency** blade, select the new consistency level and click **Save**.</span></span>
   
    ![설정 아이콘 및 기본 일관성 항목이 강조 표시된 스크린샷](./media/consistency-levels/database-consistency-level-1.png)

## <a name="consistency-levels-for-queries"></a><span data-ttu-id="457bd-193">쿼리에 대한 일관성 수준</span><span class="sxs-lookup"><span data-stu-id="457bd-193">Consistency levels for queries</span></span>
<span data-ttu-id="457bd-194">기본적으로 사용자 정의 리소스에 대한 쿼리의 일관성 수준은 읽기 일관성 수준과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-194">By default, for user-defined resources, the consistency level for queries is the same as the consistency level for reads.</span></span> <span data-ttu-id="457bd-195">기본적으로 항목을 Cosmos DB 컨테이너에 삽입하거나 바꾸거나 삭제할 때마다 인덱스가 동기적으로 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-195">By default, the index is updated synchronously on each insert, replace, or delete of an item to the Cosmos DB container.</span></span> <span data-ttu-id="457bd-196">이렇게 하면 쿼리에 지점 읽기와 동일한 일관성 수준을 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-196">This enables the queries to honor the same consistency level as that of point reads.</span></span> <span data-ttu-id="457bd-197">Azure Cosmos DB는 쓰기 최적화되며 지속적인 대량 쓰기, 동기 인덱스 유지 관리 및 일관성 있는 쿼리 처리를 지원하지만 인덱스를 지연 업데이트하도록 특정 컬렉션을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-197">While Azure Cosmos DB is write optimized and supports sustained volumes of writes, synchronous index maintenance and serving consistent queries, you can configure certain collections to update their index lazily.</span></span> <span data-ttu-id="457bd-198">지연 인덱싱은 쓰기 성능을 더욱 향상하며 워크로드가 주로 읽기 중심인 대량 수집 시나리오에 적합합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-198">Lazy indexing further boosts the write performance and is ideal for bulk ingestion scenarios when a workload is primarily read-heavy.</span></span>  

| <span data-ttu-id="457bd-199">인덱싱 모드</span><span class="sxs-lookup"><span data-stu-id="457bd-199">Indexing Mode</span></span> | <span data-ttu-id="457bd-200">읽기</span><span class="sxs-lookup"><span data-stu-id="457bd-200">Reads</span></span> | <span data-ttu-id="457bd-201">쿼리</span><span class="sxs-lookup"><span data-stu-id="457bd-201">Queries</span></span> |
| --- | --- | --- |
| <span data-ttu-id="457bd-202">일관성(기본값)</span><span class="sxs-lookup"><span data-stu-id="457bd-202">Consistent (default)</span></span> |<span data-ttu-id="457bd-203">강력, 제한된 부실, 세션, 일관적인 접두사 또는 최종에서 선택</span><span class="sxs-lookup"><span data-stu-id="457bd-203">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="457bd-204">강력, 제한된 부실, 세션 또는 최종에서 선택</span><span class="sxs-lookup"><span data-stu-id="457bd-204">Select from strong, bounded staleness, session, or eventual</span></span> |
| <span data-ttu-id="457bd-205">지연</span><span class="sxs-lookup"><span data-stu-id="457bd-205">Lazy</span></span> |<span data-ttu-id="457bd-206">강력, 제한된 부실, 세션, 일관적인 접두사 또는 최종에서 선택</span><span class="sxs-lookup"><span data-stu-id="457bd-206">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="457bd-207">최종</span><span class="sxs-lookup"><span data-stu-id="457bd-207">Eventual</span></span> |
| <span data-ttu-id="457bd-208">없음</span><span class="sxs-lookup"><span data-stu-id="457bd-208">None</span></span> |<span data-ttu-id="457bd-209">강력, 제한된 부실, 세션, 일관적인 접두사 또는 최종에서 선택</span><span class="sxs-lookup"><span data-stu-id="457bd-209">Select from strong, bounded staleness, session, consistent prefix, or eventual</span></span> |<span data-ttu-id="457bd-210">해당 없음</span><span class="sxs-lookup"><span data-stu-id="457bd-210">Not applicable</span></span> |

<span data-ttu-id="457bd-211">읽기 요청과 마찬가지로 각 API에서 특정 쿼리 요청의 일관성 수준을 낮출 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-211">As with read requests, you can lower the consistency level of a specific query request in each API.</span></span>

## <a name="next-steps"></a><span data-ttu-id="457bd-212">다음 단계</span><span class="sxs-lookup"><span data-stu-id="457bd-212">Next steps</span></span>
<span data-ttu-id="457bd-213">장단점 및 일관성 수준에 대한 더 많은 읽기를 수행 하려는 경우 다음 리소스를 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-213">If you'd like to do more reading about consistency levels and tradeoffs, we recommend the following resources:</span></span>

* <span data-ttu-id="457bd-214">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="457bd-214">Doug Terry.</span></span> <span data-ttu-id="457bd-215">야구(비디오)를 통해 복제된 데이터 일관성을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-215">Replicated Data Consistency explained through baseball (video).</span></span>   
  [<span data-ttu-id="457bd-216">https://www.youtube.com/watch?v=gluIh8zd26I</span><span class="sxs-lookup"><span data-stu-id="457bd-216">https://www.youtube.com/watch?v=gluIh8zd26I</span></span>](https://www.youtube.com/watch?v=gluIh8zd26I)
* <span data-ttu-id="457bd-217">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="457bd-217">Doug Terry.</span></span> <span data-ttu-id="457bd-218">야구를 통해 복제된 데이터 일관성을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-218">Replicated Data Consistency explained through baseball.</span></span>   
  [<span data-ttu-id="457bd-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span><span class="sxs-lookup"><span data-stu-id="457bd-219">http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf</span></span>](http://research.microsoft.com/pubs/157411/ConsistencyAndBaseballReport.pdf)
* <span data-ttu-id="457bd-220">Doug Terry.</span><span class="sxs-lookup"><span data-stu-id="457bd-220">Doug Terry.</span></span> <span data-ttu-id="457bd-221">약하게 일관된 복제 데이터에 대한 세션 보장입니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-221">Session Guarantees for Weakly Consistent Replicated Data.</span></span>   
  [<span data-ttu-id="457bd-222">http://dl.acm.org/citation.cfm?id=383631</span><span class="sxs-lookup"><span data-stu-id="457bd-222">http://dl.acm.org/citation.cfm?id=383631</span></span>](http://dl.acm.org/citation.cfm?id=383631)
* <span data-ttu-id="457bd-223">Daniel Abadi.</span><span class="sxs-lookup"><span data-stu-id="457bd-223">Daniel Abadi.</span></span> <span data-ttu-id="457bd-224">최신 분산 데이터베이스 시스템 디자인에서 일관성 균형: CAP는 스토리의 일부일 뿐입니다”.</span><span class="sxs-lookup"><span data-stu-id="457bd-224">Consistency Tradeoffs in Modern Distributed Database Systems Design: CAP is only part of the story”.</span></span>   
  [<span data-ttu-id="457bd-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span><span class="sxs-lookup"><span data-stu-id="457bd-225">http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html</span></span>](http://computer.org/csdl/mags/co/2012/02/mco2012020037-abs.html)
* <span data-ttu-id="457bd-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span><span class="sxs-lookup"><span data-stu-id="457bd-226">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein, Ion Stoica.</span></span> <span data-ttu-id="457bd-227">실용적인 부분 쿼럼에 대한 PBS(확률적 제한된 부실)입니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-227">Probabilistic Bounded Staleness (PBS) for Practical Partial Quorums.</span></span>   
  [<span data-ttu-id="457bd-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span><span class="sxs-lookup"><span data-stu-id="457bd-228">http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf</span></span>](http://vldb.org/pvldb/vol5/p776_peterbailis_vldb2012.pdf)
* <span data-ttu-id="457bd-229">Werner Vogels.</span><span class="sxs-lookup"><span data-stu-id="457bd-229">Werner Vogels.</span></span> <span data-ttu-id="457bd-230">최종 일관성 - 재고되었습니다.</span><span class="sxs-lookup"><span data-stu-id="457bd-230">Eventual Consistent - Revisited.</span></span>    
  [<span data-ttu-id="457bd-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span><span class="sxs-lookup"><span data-stu-id="457bd-231">http://allthingsdistributed.com/2008/12/eventually_consistent.html</span></span>](http://allthingsdistributed.com/2008/12/eventually_consistent.html)
* <span data-ttu-id="457bd-232">Moni Naor, Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, 1998년 4월.</span><span class="sxs-lookup"><span data-stu-id="457bd-232">Moni Naor , Avishai Wool, The Load, Capacity, and Availability of Quorum Systems, SIAM Journal on Computing, v.27 n.2, p.423-447, April 1998.</span></span>
  [<span data-ttu-id="457bd-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span><span class="sxs-lookup"><span data-stu-id="457bd-233">http://epubs.siam.org/doi/abs/10.1137/S0097539795281232</span></span>](http://epubs.siam.org/doi/abs/10.1137/S0097539795281232)
* <span data-ttu-id="457bd-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, 2010년 6월 05-10, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span><span class="sxs-lookup"><span data-stu-id="457bd-234">Sebastian Burckhardt, Chris Dern, Macanal Musuvathi, Roy Tan, Line-up: a complete and automatic linearizability checker, Proceedings of the 2010 ACM SIGPLAN conference on Programming language design and implementation, June 05-10, 2010, Toronto, Ontario, Canada  [doi>10.1145/1806596.1806634] [http://dl.acm.org/citation.cfm?id=1806634](http://dl.acm.org/citation.cfm?id=1806634)</span></span>
* <span data-ttu-id="457bd-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, 2012년 4월 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span><span class="sxs-lookup"><span data-stu-id="457bd-235">Peter Bailis, Shivaram Venkataraman, Michael J. Franklin, Joseph M. Hellerstein , Ion Stoica, Probabilistically bounded staleness for practical partial quorums, Proceedings of the VLDB Endowment, v.5 n.8, p.776-787, April 2012 [http://dl.acm.org/citation.cfm?id=2212359](http://dl.acm.org/citation.cfm?id=2212359)</span></span>
