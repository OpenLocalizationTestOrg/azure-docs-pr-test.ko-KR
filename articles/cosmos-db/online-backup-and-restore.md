---
title: "aaaOnline Azure Cosmos DB 사용한 백업 및 복원 | Microsoft Docs"
description: "자세한 내용은 어떻게 tooperform 자동 백업 및 Azure Cosmos DB 데이터베이스에 복원 합니다."
keywords: "백업 및 복원, 온라인 백업"
services: cosmos-db
documentationcenter: 
author: RahulPrasad16
manager: jhubbard
editor: monicar
ms.assetid: 98eade4a-7ef4-4667-b167-6603ecd80b79
ms.service: cosmos-db
ms.workload: data-services
ms.tgt_pltfrm: na
ms.devlang: multiple
ms.topic: article
ms.date: 08/11/2017
ms.author: raprasa
ms.openlocfilehash: a0b464c95681dfc7b5462b02bf04c2c43d6bc16f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="automatic-online-backup-and-restore-with-azure-cosmos-db"></a><span data-ttu-id="ff528-104">Azure Cosmos DB로 자동 온라인 백업 및 복원</span><span class="sxs-lookup"><span data-stu-id="ff528-104">Automatic online backup and restore with Azure Cosmos DB</span></span>
<span data-ttu-id="ff528-105">Azure Cosmos DB는 자동으로 모든 데이터의 백업을 정기적으로 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-105">Azure Cosmos DB automatically takes backups of all your data at regular intervals.</span></span> <span data-ttu-id="ff528-106">hello 자동 백업은 hello 성능 또는 가용성 데이터베이스 작업의 영향을 주지 않고 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-106">hello automatic backups are taken without affecting hello performance or availability of your database operations.</span></span> <span data-ttu-id="ff528-107">모든 백업은 다른 저장소 서비스에 개별적으로 저장되고 이러한 백업은 지역 재해에 대한 복원을 위해 전역적으로 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-107">All your backups are stored separately in another storage service, and those backups are globally replicated for resiliency against regional disasters.</span></span> <span data-ttu-id="ff528-108">실수로 Comos DB 컨테이너를 삭제 하 고 나중에 데이터 복구 또는 재해 복구 솔루션을 필요한 hello 자동 백업 시나리오에 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-108">hello automatic backups are intended for scenarios when you accidentally delete your Comos DB container and later require data recovery or a disaster recovery solution.</span></span>  

<span data-ttu-id="ff528-109">이 문서는 hello 데이터 중복성 및 가용성이 Cosmos DB에 대해 간략하게 설명 빠른로 시작 하 고 백업에 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-109">This article starts with a quick recap of hello data redundancy and availability in Cosmos DB, and then discusses backups.</span></span> 

## <a name="high-availability-with-cosmos-db---a-recap"></a><span data-ttu-id="ff528-110">Cosmos DB를 사용한 고가용성 - 정리</span><span class="sxs-lookup"><span data-stu-id="ff528-110">High availability with Cosmos DB - a recap</span></span>
<span data-ttu-id="ff528-111">Cosmos DB은 설계 된 toobe [전 세계적으로 분산](distribute-data-globally.md) – 있습니다 tooscale 처리량 정책 기반 장애 조치 및 투명 한 멀티 호 밍 Api와 함께 여러 Azure 지역에 걸쳐 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-111">Cosmos DB is designed toobe [globally distributed](distribute-data-globally.md) – it allows you tooscale throughput across multiple Azure regions along with policy driven failover and transparent multi-homing APIs.</span></span> <span data-ttu-id="ff528-112">데이터베이스 시스템 제공으로 [99.99% 가용성 Sla](https://azure.microsoft.com/support/legal/sla/cosmos-db), toohello 클라이언트를 승인 하기 전에 모든 hello 쓰기 Cosmos DB에는 로컬 데이터 센터 내에서 복제본의 쿼럼에서 지 속력 있게 커밋된 toolocal 디스크.</span><span class="sxs-lookup"><span data-stu-id="ff528-112">As a database system offering [99.99% availability SLAs](https://azure.microsoft.com/support/legal/sla/cosmos-db), all hello writes in Cosmos DB are durably committed toolocal disks by a quorum of replicas within a local data center before acknowledging toohello client.</span></span> <span data-ttu-id="ff528-113">참고 Cosmos DB의 고가용성 hello 로컬 저장소에 의존 하 고 모든 외부 저장소 기술에 종속 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-113">Note that hello high availability of Cosmos DB relies on local storage and does not depend on any external storage technologies.</span></span> <span data-ttu-id="ff528-114">또한 데이터베이스 계정이 둘 이상의 Azure 지역과 연결되어 있는 경우 사용자의 쓰기도 다른 지역에 걸쳐 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-114">Additionally, if your database account is associated with more than one Azure region, your writes are replicated across other regions as well.</span></span> <span data-ttu-id="ff528-115">tooscale 낮은 대기 시간에 처리량 및 액세스 데이터를 많은 원하는 만큼 데이터베이스 계정과 연결 된 영역을 읽을 때 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-115">tooscale your throughput and access data at low latencies, you can have as many read regions associated with your database account as you like.</span></span> <span data-ttu-id="ff528-116">각 읽기에 (복제) hello 데이터 복제본 조합에 대해 지속적으로 유지 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-116">In each read region, hello (replicated) data is durably persisted across a replica set.</span></span>  

<span data-ttu-id="ff528-117">단일 Cosmos DB 컨테이너는 hello 다음 다이어그램에에서 볼 수 있듯이, [수평 분할 된](partition-data.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-117">As illustrated in hello following diagram, a single Cosmos DB container is [horizontally partitioned](partition-data.md).</span></span> <span data-ttu-id="ff528-118">"파티션을" hello 다음 다이어그램에서에서 원이 표시 되 고 각 파티션에 항상 사용 가능 복제본 집합을 통해.</span><span class="sxs-lookup"><span data-stu-id="ff528-118">A “partition” is denoted by a circle in hello following diagram, and each partition is made highly available via a replica set.</span></span> <span data-ttu-id="ff528-119">이 hello (X 축 hello로 표시)는 단일 Azure 지역 내에서 로컬 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-119">This is hello local distribution within a single Azure region (denoted by hello X axis).</span></span> <span data-ttu-id="ff528-120">또한 각 파티션 (해당 해당 복제 세트) 그런 다음는 전역적으로 배포 (예를 들어이 그림 hello 3 개의 영역-미국 동부, 미국 서 부 및 중앙 인도)에서 데이터베이스 계정에 연결 된 여러 지역에 걸쳐 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-120">Further, each partition (with its corresponding replica set) is then globally distributed across multiple regions associated with your database account (for example, in this illustration hello three regions – East US, West US and Central India).</span></span> <span data-ttu-id="ff528-121">"파티션 집합" hello는 세계적으로 분산 된 엔터티 (hello Y 축에 표시 됨) 각 지역에 데이터의 여러 복사본을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-121">hello “partition set” is a globally distributed entity comprising of multiple copies of your data in each region (denoted by hello Y axis).</span></span> <span data-ttu-id="ff528-122">Cosmos DB는 투명 하 게 장애 조치 toohello 재해가 발생할 경우 다음 영역 및 toohello 영역 데이터베이스 계정에 연결 된 우선 순위를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-122">You can assign priority toohello regions associated with your database account and Cosmos DB will transparently failover toohello next region in case of disaster.</span></span> <span data-ttu-id="ff528-123">수동으로 장애 조치 tootest hello 종단 간 응용 프로그램의 가용성을 시뮬레이션할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-123">You can also manually simulate failover tootest hello end-to-end availability of your application.</span></span>  

<span data-ttu-id="ff528-124">hello 다음 보여 주는 이미지 hello 높은 수준의 Cosmos DB와 함께 중복 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-124">hello following image illustrates hello high degree of redundancy with Cosmos DB.</span></span>

![높은 수준의 Cosmos DB와의 중복성](./media/online-backup-and-restore/redundancy.png)

![높은 수준의 Cosmos DB와의 중복성](./media/online-backup-and-restore/global-distribution.png)

## <a name="full-automatic-online-backups"></a><span data-ttu-id="ff528-127">전체, 자동, 온라인 백업</span><span class="sxs-lookup"><span data-stu-id="ff528-127">Full, automatic, online backups</span></span>
<span data-ttu-id="ff528-128">이런, 내 컨테이너 또는 데이터베이스를 삭제했습니다!</span><span class="sxs-lookup"><span data-stu-id="ff528-128">Oops, I deleted my container or database!</span></span> <span data-ttu-id="ff528-129">Cosmos DB와 함께 사용자 데이터를 뿐 아니라 hello 백업 데이터의 중복 높고 복원 력이 tooregional 재해를도 변경 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-129">With Cosmos DB, not only your data, but hello backups of your data are also made highly redundant and resilient tooregional disasters.</span></span> <span data-ttu-id="ff528-130">이러한 자동화된 백업은 현재 약 4시간마다 수행되고 항상 최근 2개의 백업이 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-130">These automated backups are currently taken approximately every four hours and latest 2 backups are stored at all times.</span></span> <span data-ttu-id="ff528-131">Hello 데이터를 실수로 삭제 또는 손상 되었거나, 하십시오 [Azure 지원에 문의](https://azure.microsoft.com/support/options/) 8 시간 이내입니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-131">If hello data is accidently dropped or corrupted, please [contact Azure support](https://azure.microsoft.com/support/options/) within 8 hours.</span></span> 

<span data-ttu-id="ff528-132">hello hello 성능 또는 가용성 데이터베이스 작업의 영향을 주지 않고 백업 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-132">hello backups are taken without affecting hello performance or availability of your database operations.</span></span> <span data-ttu-id="ff528-133">통합 문서 사용 하 여 프로 비전 된 RUs 또는 hello 성능에 영향을 주지 않고 및 hello 데이터베이스의 가용성에 영향을 주지 않고 cosmos DB hello 백그라운드에서 hello 백업을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-133">Cosmos DB takes hello backup in hello background without consuming your provisioned RUs or affecting hello performance and without affecting hello availability of your database.</span></span> 

<span data-ttu-id="ff528-134">Cosmos db 저장 된 데이터와 달리 hello 자동 백업은 Azure Blob 저장소 서비스에 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-134">Unlike your data that is stored inside Cosmos DB, hello automatic backups are stored in Azure Blob Storage service.</span></span> <span data-ttu-id="ff528-135">tooguarantee hello 낮은 대기 시간/효율적인 업로드 hello 백업 스냅숏이 Azure Blob 저장소에 업로드 된 tooan 인스턴스의 hello hello Cosmos DB 데이터베이스 계정의 현재 쓰기 지역와 동일한 영역입니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-135">tooguarantee hello low latency/efficient upload, hello snapshot of your backup is uploaded tooan instance of Azure Blob storage in hello same region as hello current write region of your Cosmos DB database account.</span></span> <span data-ttu-id="ff528-136">지역적 재해에 대 한 복구를 위해 Azure Blob 저장소에 백업 데이터의 각 스냅숏은 tooanother 지역의 지리적 중복 저장소 (GRS)를 통해 다시 복제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-136">For resiliency against regional disaster, each snapshot of your backup data in Azure Blob Storage is again replicated via geo-redundant storage (GRS) tooanother region.</span></span> <span data-ttu-id="ff528-137">hello 다음 다이어그램을 보여 줍니다 (모든 세 가지 주 파티션이 있는 West US에이 예에서) hello 전체 Cosmos DB 컨테이너 West US에 원격 Azure Blob 저장소 계정에 백업 됩니다 GRS 복제 tooEast 주세요.</span><span class="sxs-lookup"><span data-stu-id="ff528-137">hello following diagram shows that hello entire Cosmos DB container (with all three primary partitions in West US, in this example) is backed up in a remote Azure Blob Storage account in West US and then GRS replicated tooEast US.</span></span> 

<span data-ttu-id="ff528-138">hello 다음 보여 주는 이미지 GRS Azure 저장소에 있는 모든 Cosmos DB 엔터티의 정기적인 전체 백업이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-138">hello following image illustrates periodic full backups of all Cosmos DB entities in GRS Azure Storage.</span></span>

![GRS Azure Storage에 있는 모든 Cosmos DB 엔터티의 정기적인 전체 백업](./media/online-backup-and-restore/automatic-backup.png)

## <a name="backup-retention-period"></a><span data-ttu-id="ff528-140">백업 보존 기간</span><span class="sxs-lookup"><span data-stu-id="ff528-140">Backup retention period</span></span>
<span data-ttu-id="ff528-141">위에서 설명한 대로 Azure Cosmos DB는 데이터의 스냅샷을 4 시간 마다이 30 일 동안 모든 파티션의 hello 마지막 두 개의 스냅숏을 유지 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-141">As described above, Azure Cosmos DB takes snapshots of your data every four hours and retains hello last two snapshots of every partition for 30 days.</span></span> <span data-ttu-id="ff528-142">규정 준수 규칙당 스냅숏은 90일 후 제거됩니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-142">Per our compliance regulations, snapshots are purged after 90 days.</span></span>

<span data-ttu-id="ff528-143">Hello Azure Cosmos DB에서에서 hello 내보내기 tooJSON 옵션을 사용 하려면 고유한 스냅샷 toomaintain을 원하는 경우 [데이터 마이그레이션 도구](import-data.md#export-to-json-file) tooschedule 백업을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-143">If you want toomaintain your own snapshots, you can use hello export tooJSON option in hello Azure Cosmos DB [Data Migration tool](import-data.md#export-to-json-file) tooschedule additional backups.</span></span> 

## <a name="restoring-a-database-from-an-online-backup"></a><span data-ttu-id="ff528-144">온라인 백업에서 데이터베이스 복원</span><span class="sxs-lookup"><span data-stu-id="ff528-144">Restoring a database from an online backup</span></span>
<span data-ttu-id="ff528-145">데이터베이스 또는 컬렉션 실수로 삭제 한 경우 다음을 할 수 있습니다 [지원 티켓을 보관](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade) 또는 [Azure 지원에 전화](https://azure.microsoft.com/support/options/) hello 마지막 자동 백업에서 toorestore hello 데이터입니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-145">If you accidentally delete your database or collection, you can [file a support ticket](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade) or [call Azure support](https://azure.microsoft.com/support/options/) toorestore hello data from hello last automatic backup.</span></span> <span data-ttu-id="ff528-146">데이터 손상 문제 때문에 데이터베이스 toorestore 필요 하면 참조 [데이터 손상을 처리](#handling-data-corruption) tootake 추가 단계 통과 hello 백업에서 tooprevent hello 손상 데이터를 필요한 만큼 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-146">If you need toorestore your database because of data corruption issue, see [Handling data corruption](#handling-data-corruption) as you need tootake additional steps tooprevent hello corrupted data from penetrating hello backups.</span></span> <span data-ttu-id="ff528-147">복원 하 여 백업 toobe의 특정 스냅숏, Cosmos DB hello hello 해당 스냅숏에 대 한 백업 주기 동안 hello 데이터를 사용할 수 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-147">For a specific snapshot of your backup toobe restored, Cosmos DB requires that hello data was available for hello duration of hello backup cycle for that snapshot.</span></span>

## <a name="handling-data-corruption"></a><span data-ttu-id="ff528-148">데이터 손상 처리</span><span class="sxs-lookup"><span data-stu-id="ff528-148">Handling data corruption</span></span>
<span data-ttu-id="ff528-149">Azure Cosmos DB hello 시스템에서 모든 파티션의 hello 마지막 두 개의 백업을 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-149">Azure Cosmos DB retains hello last two backups of every partition in hello system.</span></span> <span data-ttu-id="ff528-150">이후 hello 마지막 버전 중 하나를 복원할 수 있습니다 (문서, 그래프, 테이블의 컬렉션) 컨테이너 또는 데이터베이스 실수로 삭제 되 면이 모델은 매우 잘 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-150">This model works very well when a container (collection of documents, graph, table) or a database is accidentally deleted since one of hello last versions can be restored.</span></span> <span data-ttu-id="ff528-151">그러나 hello에 대/소문자 Azure Cosmos DB hello 데이터 손상의 인식 하지 못할 때 사용자가 데이터 손상 문제가 발생할 수 있습니다, 고 hello 손상 시킨을 통과할 수 hello 백업 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-151">However, in hello case when when users may introduce a data corruption issue, Azure Cosmos DB may be unaware of hello data corruption, and it is possible that hello corruption may have penetrated hello backups.</span></span> <span data-ttu-id="ff528-152">손상이 발견 되는 즉시 백업이 손상 된 데이터로 덮어쓰여지지 않도록 보호 되도록 손상 hello 컨테이너 (컬렉션/그래프/테이블)를 삭제 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-152">As soon as corruption is detected, you should delete hello corrupted container (collection/graph/table) so that backups are protected from being overwritten with corrupted data.</span></span> <span data-ttu-id="ff528-153">Hello 사용자를 사용할 수 있으므로 마지막 백업 hello 4 시간 마다 이전에 있을 수 있습니다 [피드 변경](change-feed.md) toocapture 및 스토어 마지막 4 시간 동안의 데이터 hello 컨테이너를 삭제 하기 전에 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-153">Since hello last backup could be four hours old, hello user can employ [change feed](change-feed.md) toocapture and store hello last four hours worth of data before deleting hello container.</span></span>

## <a name="next-steps"></a><span data-ttu-id="ff528-154">다음 단계</span><span class="sxs-lookup"><span data-stu-id="ff528-154">Next steps</span></span>

<span data-ttu-id="ff528-155">tooreplicate 여러 데이터 센터에서 데이터베이스 참조 [Cosmos DB 전역적으로 사용 하 여 데이터 배포](distribute-data-globally.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-155">tooreplicate your database in multiple data centers, see [distribute your data globally with Cosmos DB](distribute-data-globally.md).</span></span> 

<span data-ttu-id="ff528-156">Azure 지원 센터에 toofile 문의 [hello Azure 포털에서에서 제출한](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade)합니다.</span><span class="sxs-lookup"><span data-stu-id="ff528-156">toofile contact Azure Support, [file a ticket from hello Azure portal](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade).</span></span>

