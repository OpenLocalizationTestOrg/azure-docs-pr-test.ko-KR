---
title: "Azure의 Linux 가상 컴퓨터에 대한 DNS 이름 확인 옵션"
description: "Azure IaaS의 Linux 가상 컴퓨터에 대한 이름 확인 시나리오(제공된 DNS 서비스, 하이브리드 외부 DNS 및 사용자 고유의 DNS 서버 포함)입니다."
services: virtual-machines
documentationcenter: na
author: RicksterCDN
manager: timlt
editor: tysonn
ms.assetid: 787a1e04-cebf-4122-a1b4-1fcf0a2bbf5f
ms.service: virtual-machines-linux
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/19/2016
ms.author: rclaus
ms.openlocfilehash: cc06ee9305b4d3034154a0825c1aea53fe446f80
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="dns-name-resolution-options-for-linux-virtual-machines-in-azure"></a><span data-ttu-id="d7ef5-103">Azure의 Linux 가상 컴퓨터에 대한 DNS 이름 확인 옵션</span><span class="sxs-lookup"><span data-stu-id="d7ef5-103">DNS Name Resolution options for Linux virtual machines in Azure</span></span>
<span data-ttu-id="d7ef5-104">Azure는 단일 가상 네트워크 내에 포함된 모든 가상 컴퓨터에 대해 기본적으로 DNS 이름 확인을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-104">Azure provides DNS name resolution by default for all virtual machines that are in a single virtual network.</span></span> <span data-ttu-id="d7ef5-105">Azure에서 호스트하는 가상 컴퓨터에서 자체 DNS 서비스를 구성하여 사용자 고유의 DNS 이름 확인 솔루션을 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-105">You can implement your own DNS name resolution solution by configuring your own DNS services on your virtual machines that Azure hosts.</span></span> <span data-ttu-id="d7ef5-106">다음 시나리오는 특정 상황에 적합한 솔루션을 선택하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-106">The following scenarios should help you choose the one that works for your situation.</span></span>

* [<span data-ttu-id="d7ef5-107">Azure에서 제공하는 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-107">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution)
* [<span data-ttu-id="d7ef5-108">자체 DNS 서버를 사용한 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-108">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server)

<span data-ttu-id="d7ef5-109">어떤 방법으로 이름을 확인할지는 사용하는 가상 컴퓨터와 역할 인스턴스가 서로 어떻게 통신해야 하는지에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-109">The type of name resolution that you use depends on how your virtual machines and role instances need to communicate with each other.</span></span>

<span data-ttu-id="d7ef5-110">다음 표에 각 시나리오 별로 해당하는 이름 확인 방법이 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-110">The following table illustrates scenarios and corresponding name resolution solutions:</span></span>

| <span data-ttu-id="d7ef5-111">**시나리오**</span><span class="sxs-lookup"><span data-stu-id="d7ef5-111">**Scenario**</span></span> | <span data-ttu-id="d7ef5-112">**솔루션**</span><span class="sxs-lookup"><span data-stu-id="d7ef5-112">**Solution**</span></span> | <span data-ttu-id="d7ef5-113">**접미사**</span><span class="sxs-lookup"><span data-stu-id="d7ef5-113">**Suffix**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="d7ef5-114">동일한 가상 네트워크에 있는 역할 인스턴스 또는 가상 컴퓨터 간 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-114">Name resolution between role instances or virtual machines in the same virtual network</span></span> |[<span data-ttu-id="d7ef5-115">Azure에서 제공하는 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-115">Name resolution that Azure provides</span></span>](#azure-provided-name-resolution) |<span data-ttu-id="d7ef5-116">호스트 이름 또는 FQDN(정규화된 도메인 이름)</span><span class="sxs-lookup"><span data-stu-id="d7ef5-116">hostname or fully-qualified domain name (FQDN)</span></span> |
| <span data-ttu-id="d7ef5-117">서로 다른 네트워크에 있는 역할 인스턴스 또는 가상 컴퓨터 간 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-117">Name resolution between role instances or virtual machines in different virtual networks</span></span> |<span data-ttu-id="d7ef5-118">Azure(DNS 프록시)에서 이름을 확인할 수 있도록 가상 컴퓨터 간에 쿼리를 전달하는 고객이 관리하는 DNS 서버.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-118">Customer-managed DNS servers that forward queries between virtual networks for resolution by Azure (DNS proxy).</span></span> <span data-ttu-id="d7ef5-119">[자체 DNS 서버를 이용한 이름 확인](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="d7ef5-119">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="d7ef5-120">FQDN만</span><span class="sxs-lookup"><span data-stu-id="d7ef5-120">FQDN only</span></span> |
| <span data-ttu-id="d7ef5-121">Azure의 역할 인스턴스 또는 가상 컴퓨터에서 온-프레미스 컴퓨터와 서비스 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-121">Resolution of on-premises computers and service names from role instances or virtual machines in Azure</span></span> |<span data-ttu-id="d7ef5-122">고객이 관리하는 DNS 서버(예: 온-프레미스 도메인 컨트롤러, 로컬 읽기 전용 도메인 컨트롤러 또는 영역 전송을 사용하여 동기화된 DNS 보조).</span><span class="sxs-lookup"><span data-stu-id="d7ef5-122">Customer-managed DNS servers (for example, on-premises domain controller, local read-only domain controller, or a DNS secondary synced by using zone transfers).</span></span> <span data-ttu-id="d7ef5-123">[자체 DNS 서버를 이용한 이름 확인](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="d7ef5-123">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="d7ef5-124">FQDN만</span><span class="sxs-lookup"><span data-stu-id="d7ef5-124">FQDN only</span></span> |
| <span data-ttu-id="d7ef5-125">온-프레미스 컴퓨터에서 Azure 호스트 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-125">Resolution of Azure hostnames from on-premises computers</span></span> |<span data-ttu-id="d7ef5-126">해당하는 가상 네트워크에서 고객이 관리하는 DNS 프록시 서버에 쿼리를 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-126">Forward queries to a customer-managed DNS proxy server in the corresponding virtual network.</span></span> <span data-ttu-id="d7ef5-127">프록시 서버는 이름 확인을 위해 Azure에 쿼리를 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-127">The proxy server forwards queries to Azure for resolution.</span></span> <span data-ttu-id="d7ef5-128">[자체 DNS 서버를 이용한 이름 확인](#name-resolution-using-your-own-dns-server).</span><span class="sxs-lookup"><span data-stu-id="d7ef5-128">See [Name resolution using your own DNS server](#name-resolution-using-your-own-dns-server).</span></span> |<span data-ttu-id="d7ef5-129">FQDN만</span><span class="sxs-lookup"><span data-stu-id="d7ef5-129">FQDN only</span></span> |
| <span data-ttu-id="d7ef5-130">내부 IP에 대한 역방향 DNS</span><span class="sxs-lookup"><span data-stu-id="d7ef5-130">Reverse DNS for internal IPs</span></span> |[<span data-ttu-id="d7ef5-131">자체 DNS 서버를 사용한 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-131">Name resolution using your own DNS server</span></span>](#name-resolution-using-your-own-dns-server) |<span data-ttu-id="d7ef5-132">해당 없음</span><span class="sxs-lookup"><span data-stu-id="d7ef5-132">n/a</span></span> |

## <a name="name-resolution-that-azure-provides"></a><span data-ttu-id="d7ef5-133">Azure에서 제공하는 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-133">Name resolution that Azure provides</span></span>
<span data-ttu-id="d7ef5-134">Azure에서는 공용 DNS 이름 확인과 함께, 동일한 가상 네트워크에 있는 가상 컴퓨터 및 역할 인스턴스에 대한 내부 이름 확인을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-134">Along with resolution of public DNS names, Azure provides internal name resolution for virtual machines and role instances that are in the same virtual network.</span></span> <span data-ttu-id="d7ef5-135">Azure Resource Manager 기반의 가상 네트워크에서 DNS 접미사는 가상 네트워크에서 일관적이며 FQDN이 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-135">In virtual networks that are based on Azure Resource Manager, the DNS suffix is consistent across the virtual network; the FQDN is not needed.</span></span> <span data-ttu-id="d7ef5-136">DNS 이름은 NIC(네트워크 인터페이스 카드)와 가상 컴퓨터에 모두 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-136">DNS names can be assigned to both network interface cards (NICs) and virtual machines.</span></span> <span data-ttu-id="d7ef5-137">Azure에서 제공하는 이름 확인은 별도로 구성할 필요가 없지만, 앞의 표에 나온 바와 같이 모든 배포 서비스에 적합한 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-137">Although the name resolution that Azure provides does not require any configuration, it is not the appropriate choice for all deployment scenarios, as seen on the preceding table.</span></span>

### <a name="features-and-considerations"></a><span data-ttu-id="d7ef5-138">기능 및 고려 사항</span><span class="sxs-lookup"><span data-stu-id="d7ef5-138">Features and considerations</span></span>
<span data-ttu-id="d7ef5-139">**기능:**</span><span class="sxs-lookup"><span data-stu-id="d7ef5-139">**Features:**</span></span>

* <span data-ttu-id="d7ef5-140">Azure에서 제공하는 이름 확인을 사용하기 위해 별도로 구성할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-140">No configuration is required to use name resolution that Azure provides.</span></span>
* <span data-ttu-id="d7ef5-141">Azure에서 제공하는 이름 확인 서비스는 가용성이 높습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-141">The name resolution service that Azure provides is highly available.</span></span> <span data-ttu-id="d7ef5-142">자체 DNS 서버 클러스터를 만들고 관리할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-142">You don't need to create and manage clusters of your own DNS servers.</span></span>
* <span data-ttu-id="d7ef5-143">Azure에서 제공하는 이름 확인 서비스는 자체 DNS 서버와 함께 사용하여 온-프레미스와 Azure 호스트 이름을 모두 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-143">The name resolution service that Azure provides can be used along with your own DNS servers to resolve both on-premises and Azure hostnames.</span></span>
* <span data-ttu-id="d7ef5-144">가상 네트워크의 가상 컴퓨터 간에 이름 확인이 제공되며 FQDN은 필요 없습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-144">Name resolution is provided between virtual machines in virtual networks without need for the FQDN.</span></span>
* <span data-ttu-id="d7ef5-145">자동으로 생성되는 이름 대신 배포를 가장 잘 설명해주는 호스트 이름을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-145">You can use hostnames that best describe your deployments rather than working with auto-generated names.</span></span>

<span data-ttu-id="d7ef5-146">**고려 사항:**</span><span class="sxs-lookup"><span data-stu-id="d7ef5-146">**Considerations:**</span></span>

* <span data-ttu-id="d7ef5-147">Azure에서 만드는 DNS 접미사는 수정할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-147">The DNS suffix that Azure creates cannot be modified.</span></span>
* <span data-ttu-id="d7ef5-148">사용자 고유의 레코드를 수동으로 등록할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-148">You cannot manually register your own records.</span></span>
* <span data-ttu-id="d7ef5-149">WINS 및 NetBIOS는 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-149">WINS and NetBIOS are not supported.</span></span>
* <span data-ttu-id="d7ef5-150">호스트 이름은 DNS와 호환되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-150">Hostnames must be DNS-compatible.</span></span>
    <span data-ttu-id="d7ef5-151">이름에는 0-9, a-z 및 '-'만 사용이 가능하며, '-'로 시작하거나 끝날 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-151">Names must use only 0-9, a-z, and '-', and they cannot start or end with a '-'.</span></span> <span data-ttu-id="d7ef5-152">RFC 3696 섹션을 2를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-152">See RFC 3696 Section 2.</span></span>
* <span data-ttu-id="d7ef5-153">DNS 쿼리 트래픽은 각 가상 컴퓨터에 대해 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-153">DNS query traffic is throttled for each virtual machine.</span></span> <span data-ttu-id="d7ef5-154">이 제한은 대부분의 응용 프로그램에 영향을 주지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-154">Throttling shouldn't impact most applications.</span></span>  <span data-ttu-id="d7ef5-155">요청 제한이 확인되는 경우 클라이언트쪽 캐싱이 사용하도록 설정되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-155">If request throttling is observed, ensure that client-side caching is enabled.</span></span>  <span data-ttu-id="d7ef5-156">자세한 내용은 [Azure에서 제공하는 이름 확인 활용](#getting-the-most-from-name-resolution-that-azure-provides)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-156">For more information, see [Getting the most from name resolution that Azure provides](#getting-the-most-from-name-resolution-that-azure-provides).</span></span>

### <a name="getting-the-most-from-name-resolution-that-azure-provides"></a><span data-ttu-id="d7ef5-157">Azure에서 제공하는 이름 확인 활용</span><span class="sxs-lookup"><span data-stu-id="d7ef5-157">Getting the most from name resolution that Azure provides</span></span>
<span data-ttu-id="d7ef5-158">**클라이언트쪽 캐싱:**</span><span class="sxs-lookup"><span data-stu-id="d7ef5-158">**Client-side caching:**</span></span>

<span data-ttu-id="d7ef5-159">일부 DNS 쿼리는 네트워크를 통해 전송되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-159">Some DNS queries are not sent across the network.</span></span> <span data-ttu-id="d7ef5-160">클라이언트쪽 캐싱을 사용하면 대기 시간을 줄이고 로컬 캐시에서 되풀이되는 DNS 쿼리를 확인하여 네트워크 불일치에 대한 복원력을 개선하는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-160">Client-side caching helps reduce latency and improve resilience to network inconsistencies by resolving recurring DNS queries from a local cache.</span></span> <span data-ttu-id="d7ef5-161">DNS 레코드는 레코드 새로 고침에 영향을 주지 않으면서 캐시가 가능한 오랫동안 레코드를 저장할 수 있도록 하는 TTL(Time-To-Live)을 포함하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-161">DNS records contain a Time-To-Live (TTL), which enables the cache to store the record for as long as possible without impacting record freshness.</span></span> <span data-ttu-id="d7ef5-162">결과적으로 클라이언트쪽 캐싱은 대부분의 상황에 적합합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-162">As a result, client-side caching is suitable for most situations.</span></span>

<span data-ttu-id="d7ef5-163">일부 Linux 배포판은 기본적으로 캐싱이 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-163">Some Linux distributions do not include caching by default.</span></span> <span data-ttu-id="d7ef5-164">로컬 캐시가 아직 없는 것으로 확인되면 각 Linux 가상 컴퓨터에 캐시를 추가하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-164">We recommend that you add a cache to each Linux virtual machine after you check that there isn't a local cache already.</span></span>

<span data-ttu-id="d7ef5-165">dnsmasq 같은 여러 가지 DNS 캐싱 패키지를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-165">Several different DNS caching packages, such as dnsmasq, are available.</span></span> <span data-ttu-id="d7ef5-166">다음은 가장 일반적인 배포판에 Dnsmasq를 설치하는 단계입니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-166">Here are the steps to install dnsmasq on the most common distributions:</span></span>

<span data-ttu-id="d7ef5-167">**Ubuntu(resolvconf 사용)**</span><span class="sxs-lookup"><span data-stu-id="d7ef5-167">**Ubuntu (uses resolvconf)**</span></span>
  * <span data-ttu-id="d7ef5-168">dnsmasq 패키지를 설치합니다("sudo apt-get install dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="d7ef5-168">Install the dnsmasq package (“sudo apt-get install dnsmasq”).</span></span>

<span data-ttu-id="d7ef5-169">**SUSE(netconf 사용)**:</span><span class="sxs-lookup"><span data-stu-id="d7ef5-169">**SUSE (uses netconf)**:</span></span>
1. <span data-ttu-id="d7ef5-170">dnsmasq 패키지를 설치합니다("sudo zypper install dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="d7ef5-170">Install the dnsmasq package (“sudo zypper install dnsmasq”).</span></span>
2. <span data-ttu-id="d7ef5-171">dnsmasq 서비스를 사용하도록 설정합니다("systemctl enable dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="d7ef5-171">Enable the dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="d7ef5-172">dnsmasq 서비스를 시작합니다("systemctl start dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="d7ef5-172">Start the dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="d7ef5-173">"/etc/sysconfig/network/config"를 편집하고 NETCONFIG_DNS_FORWARDER=""를 "dnsmasq"로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-173">Edit “/etc/sysconfig/network/config”, and change NETCONFIG_DNS_FORWARDER="" to ”dnsmasq”.</span></span>
5. <span data-ttu-id="d7ef5-174">캐시를 로컬 DNS 확인자로 설정하기 위해 resolv.conf("netconfig update")를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-174">Update resolv.conf ("netconfig update") to set the cache as the local DNS resolver.</span></span>

<span data-ttu-id="d7ef5-175">**Rogue Wave Software의 CentOS(이전의 OpenLogic. NetworkManager 사용)**</span><span class="sxs-lookup"><span data-stu-id="d7ef5-175">**CentOS by Rogue Wave Software (formerly OpenLogic; uses NetworkManager)**</span></span>
1. <span data-ttu-id="d7ef5-176">dnsmasq 패키지를 설치합니다("sudo yum install dnsmasq").</span><span class="sxs-lookup"><span data-stu-id="d7ef5-176">Install the dnsmasq package (“sudo yum install dnsmasq”).</span></span>
2. <span data-ttu-id="d7ef5-177">dnsmasq 서비스를 사용하도록 설정합니다("systemctl enable dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="d7ef5-177">Enable the dnsmasq service (“systemctl enable dnsmasq.service”).</span></span>
3. <span data-ttu-id="d7ef5-178">dnsmasq 서비스를 시작합니다("systemctl start dnsmasq.service").</span><span class="sxs-lookup"><span data-stu-id="d7ef5-178">Start the dnsmasq service (“systemctl start dnsmasq.service”).</span></span>
4. <span data-ttu-id="d7ef5-179">"prepend domain-name-servers 127.0.0.1;"을 "/etc/dhclient-eth0.conf"에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-179">Add “prepend domain-name-servers 127.0.0.1;” to “/etc/dhclient-eth0.conf”.</span></span>
5. <span data-ttu-id="d7ef5-180">캐시를 로컬 DNS 확인자로 설정하기 위해 네트워크 서비스("service network restart")를 다시 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-180">Restart the network service (“service network restart”) to set the cache as the local DNS resolver</span></span>

> [!NOTE]
> <span data-ttu-id="d7ef5-181">: 'dnsmasq' 패키지는 여러 DNS 캐시 중에 Linux에 사용할 수 있는 유일한 캐시입니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-181">: The 'dnsmasq' package is only one of the many DNS caches that are available for Linux.</span></span> <span data-ttu-id="d7ef5-182">사용하기 전에 본인의 요구 사항에 적합한지 확인하고 다른 캐시가 설치되어 있지 않은지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-182">Before you use it, check its suitability for your needs and that no other cache is installed.</span></span>
>
>

<span data-ttu-id="d7ef5-183">**클라이언트쪽 재시도**</span><span class="sxs-lookup"><span data-stu-id="d7ef5-183">**Client-side retries**</span></span>

<span data-ttu-id="d7ef5-184">DNS는 주로 UDP 프로토콜입니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-184">DNS is primarily a UDP protocol.</span></span> <span data-ttu-id="d7ef5-185">UDP 프로토콜은 메시지 배달을 보장하지 않으므로 DNS 프로토콜 자체에서 재시도 논리를 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-185">Because the UDP protocol doesn't guarantee message delivery, the DNS protocol itself handles retry logic.</span></span> <span data-ttu-id="d7ef5-186">각 DNS 클라이언트(운영 체제)는 작성자의 기본 설정에 따라 서로 다른 재시도 논리를 나타낼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-186">Each DNS client (operating system) can exhibit different retry logic depending on the creator's preference:</span></span>

* <span data-ttu-id="d7ef5-187">Windows 운영 체제는 1초 후 재시도한 후 2초, 4초 후 다시 재시도하고 또 다시 4초 후 재시도합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-187">Windows operating systems retry after one second and then again after another two, four, and another four seconds.</span></span>
* <span data-ttu-id="d7ef5-188">기본 Linux 설정에서는 5초 후 재시도합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-188">The default Linux setup retries after five seconds.</span></span>  <span data-ttu-id="d7ef5-189">1초 간격으로 5번 재시도하도록 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-189">You should change this to retry five times at one-second intervals.</span></span>  

<span data-ttu-id="d7ef5-190">Linux 가상 컴퓨터에서 현재 설정을 확인하려면 'cat /etc/resolv.conf'에서 'options' 줄을 확인합니다. 예를 들면 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-190">To check the current settings on a Linux virtual machine, 'cat /etc/resolv.conf', and look at the 'options' line, for example:</span></span>

    options timeout:1 attempts:5

<span data-ttu-id="d7ef5-191">resolv.conf 파일은 자동으로 생성되며 편집할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-191">The resolv.conf file is auto-generated and should not be edited.</span></span> <span data-ttu-id="d7ef5-192">'options' 줄을 추가하는 구체적인 단계는 배포판마다 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-192">The specific steps that add the 'options' line vary by distribution:</span></span>

<span data-ttu-id="d7ef5-193">**Ubuntu**(resolvconf 사용)</span><span class="sxs-lookup"><span data-stu-id="d7ef5-193">**Ubuntu** (uses resolvconf)</span></span>
1. <span data-ttu-id="d7ef5-194">options 줄을 '/etc/resolveconf/resolv.conf.d/head'에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-194">Add the options line to '/etc/resolveconf/resolv.conf.d/head'.</span></span>
2. <span data-ttu-id="d7ef5-195">'resolvconf -u'를 실행하여 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-195">Run 'resolvconf -u' to update.</span></span>

<span data-ttu-id="d7ef5-196">**SUSE**(netconf 사용)</span><span class="sxs-lookup"><span data-stu-id="d7ef5-196">**SUSE** (uses netconf)</span></span>
1. <span data-ttu-id="d7ef5-197">'timeout:1 attempts:5'를 '/etc/sysconfig/network/config'의 NETCONFIG_DNS_RESOLVER_OPTIONS="" 매개 변수에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-197">Add 'timeout:1 attempts:5' to the NETCONFIG_DNS_RESOLVER_OPTIONS="" parameter in '/etc/sysconfig/network/config'.</span></span>
2. <span data-ttu-id="d7ef5-198">'netconfig update'를 실행하여 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-198">Run 'netconfig update' to update.</span></span>

<span data-ttu-id="d7ef5-199">**Rogue Wave Software의 CentOS(이전의 OpenLogic)**(NetworkManager 사용)</span><span class="sxs-lookup"><span data-stu-id="d7ef5-199">**CentOS by Rogue Wave Software (formerly OpenLogic)** (uses NetworkManager)</span></span>
1. <span data-ttu-id="d7ef5-200">'echo "options timeout:1 attempts:5"'를 '/etc/NetworkManager/dispatcher.d/11-dhclient'에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-200">Add 'echo "options timeout:1 attempts:5"' to '/etc/NetworkManager/dispatcher.d/11-dhclient'.</span></span>
2. <span data-ttu-id="d7ef5-201">'service network restart'를 실행하여 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-201">Run 'service network restart' to update.</span></span>

## <a name="name-resolution-using-your-own-dns-server"></a><span data-ttu-id="d7ef5-202">자체 DNS 서버를 이용한 이름 확인</span><span class="sxs-lookup"><span data-stu-id="d7ef5-202">Name resolution using your own DNS server</span></span>
<span data-ttu-id="d7ef5-203">이름 확인 요구 사항이 Azure에서 제공하는 기능의 범위를 벗어날 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-203">Your name resolution needs may go beyond the features that Azure provides.</span></span> <span data-ttu-id="d7ef5-204">예를 들어 가상 네트워크 간 DNS 확인이 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-204">For example, you might require DNS resolution between virtual networks.</span></span> <span data-ttu-id="d7ef5-205">이 시나리오를 해결하기 위해 자체 DNS 서버를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-205">To cover this scenario, you can use your own DNS servers.</span></span>  

<span data-ttu-id="d7ef5-206">가상 네트워크에 있는 DNS 서버는 Azure의 재귀 확인자에게 DNS 쿼리를 전달하여 동일한 가상 네트워크에 있는 호스트 이름을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-206">DNS servers within a virtual network can forward DNS queries to recursive resolvers of Azure to resolve hostnames that are in the same virtual network.</span></span> <span data-ttu-id="d7ef5-207">예를 들어 Azure에서 실행되는 DNS 서버는 자체 DNS 영역 파일에 대한 DNS 쿼리에 응답하고 Azure에 다른 모든 쿼리를 전달할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-207">For example, a DNS server that runs in Azure can respond to DNS queries for its own DNS zone files and forward all other queries to Azure.</span></span> <span data-ttu-id="d7ef5-208">이 기능을 통해 가상 컴퓨터는 사용자의 영역 파일과 Azure에서 제공하는(전달자를 통해) 호스트 이름의 항목을 모두 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-208">This functionality enables virtual machines to see both your entries in your zone files and hostnames that Azure provides (via the forwarder).</span></span> <span data-ttu-id="d7ef5-209">Azure의 재귀 확인자에 대한 액세스는 가상 IP 168.63.129.16을 통해 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-209">Access to the recursive resolvers of Azure is provided via the virtual IP 168.63.129.16.</span></span>

<span data-ttu-id="d7ef5-210">또한 DNS 전달을 통해 가상 네트워크 간 DNS 확인이 가능하고 온-프레미스 컴퓨터가 Azure에서 제공하는 호스트 이름을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-210">DNS forwarding also enables DNS resolution between virtual networks and enables your on-premises machines to resolve hostnames that Azure provides.</span></span> <span data-ttu-id="d7ef5-211">가상 컴퓨터의 호스트 이름을 확인하려면 DNS 서버 가상 컴퓨터가 동일한 가상 네트워크에 있어야 하며 Azure에 호스트 이름 쿼리를 전달하도록 구성되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-211">To resolve a virtual machine's hostname, the DNS server virtual machine must reside in the same virtual network and be configured to forward hostname queries to Azure.</span></span> <span data-ttu-id="d7ef5-212">DNS 접미사는 가상 네트워크마다 다르기 때문에 올바른 가상 네트워크에 DNS 쿼리를 보내도록 조건부 전달 규칙을 사용하여 이름을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-212">Because the DNS suffix is different in each virtual network, you can use conditional forwarding rules to send DNS queries to the correct virtual network for resolution.</span></span> <span data-ttu-id="d7ef5-213">다음 이미지는 이 방법을 사용하여 가상 네트워크 간에 DNS를 확인하는 두 가상 네트워크 및 온-프레미스 네트워크를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-213">The following image shows two virtual networks and an on-premises network doing DNS resolution between virtual networks by using this method:</span></span>

![가상 네트워크 간의 DNS 확인](./media/azure-dns/inter-vnet-dns.png)

<span data-ttu-id="d7ef5-215">Azure에서 제공하는 이름 확인을 사용하는 경우 DHCP를 사용하여 각 가상 컴퓨터에 내부 DNS 접미사가 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-215">When you use name resolution that Azure provides, the internal DNS suffix is provided to each virtual machine by using DHCP.</span></span> <span data-ttu-id="d7ef5-216">자체 이름 확인 솔루션을 사용하는 경우 이 접미사는 다른 DNS 아키텍처에 방해가 되기 때문에 가상 컴퓨터에 제공되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-216">When you use your own name resolution solution, this suffix is not supplied to virtual machines because the suffix interferes with other DNS architectures.</span></span> <span data-ttu-id="d7ef5-217">FQDN으로 컴퓨터를 참조하거나 가상 컴퓨터에 접미사를 구성하려면 PowerShell 또는 API를 사용하여 접미사를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-217">To refer to machines by FQDN or to configure the suffix on your virtual machines, you can use PowerShell or the API to determine the suffix:</span></span>

* <span data-ttu-id="d7ef5-218">Azure Resource Manager에서 관리하는 가상 네트워크의 경우 [네트워크 인터페이스 카드](https://msdn.microsoft.com/library/azure/mt163668.aspx) 리소스를 통해 접미사가 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-218">For virtual networks that are managed by Azure Resource Manager, the suffix is available via the [network interface card](https://msdn.microsoft.com/library/azure/mt163668.aspx) resource.</span></span> <span data-ttu-id="d7ef5-219">또한 `azure network public-ip show <resource group> <pip name>` 명령을 실행하여 NIC의 FQDN을 포함하고 있는 공용 IP 세부 정보를 표시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-219">You can also run the `azure network public-ip show <resource group> <pip name>` command to display the details of your public IP, which includes the FQDN of the NIC.</span></span>

<span data-ttu-id="d7ef5-220">Azure에 전달하는 쿼리가 사용자 요구에 적합하지 않은 경우 자체 DNS 솔루션을 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-220">If forwarding queries to Azure doesn't suit your needs, you need to provide your own DNS solution.</span></span>  <span data-ttu-id="d7ef5-221">DNS 솔루션은 다음을 수행해야 합니다:</span><span class="sxs-lookup"><span data-stu-id="d7ef5-221">Your DNS solution needs to:</span></span>

* <span data-ttu-id="d7ef5-222">예를 들어 [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md)를 통해 적절한 호스트 이름 확인을 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-222">Provide appropriate hostname resolution, for example via [DDNS](../../virtual-network/virtual-networks-name-resolution-ddns.md).</span></span> <span data-ttu-id="d7ef5-223">DDNS를 사용하는 경우 DNS 레코드 청소 기능을 해제해야 할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-223">If you use DDNS, you might need to disable DNS record scavenging.</span></span> <span data-ttu-id="d7ef5-224">Azure의 DHCP 임대는 기간이 매우 길며 청소를 통해 DNS 레코드가 완전히 제거될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-224">DHCP leases of Azure are very long and scavenging may remove DNS records prematurely.</span></span>
* <span data-ttu-id="d7ef5-225">외부 도메인 이름을 확인할 수 있도록 적절한 재귀 확인을 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-225">Provide appropriate recursive resolution to allow resolution of external domain names.</span></span>
* <span data-ttu-id="d7ef5-226">제공하는 클라이언트에서 액세스 가능해야 하고(포트 53에서 TCP 및 UDP) 인터넷에 액세스할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-226">Be accessible (TCP and UDP on port 53) from the clients it serves and be able to access the Internet.</span></span>
* <span data-ttu-id="d7ef5-227">외부 에이전트로 인해 나타나는 위험을 완화하기 위해 인터넷의 액세스로부터 보호되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-227">Be secured against access from the Internet to mitigate threats posed by external agents.</span></span>

> [!NOTE]
> <span data-ttu-id="d7ef5-228">최상의 성능을 얻을 수 있도록 Azure DNS 서버에서 가상 컴퓨터를 사용할 때 IPv6를 비활성화하고 각 DNS 서버 가상 컴퓨터에 [인스턴스 수준 공용 IP](../../virtual-network/virtual-networks-instance-level-public-ip.md)를 할당합니다.</span><span class="sxs-lookup"><span data-stu-id="d7ef5-228">For best performance, when you use virtual machines in Azure DNS servers, disable IPv6 and assign an [Instance-Level Public IP](../../virtual-network/virtual-networks-instance-level-public-ip.md) to each DNS server virtual machine.</span></span>  
>
>
