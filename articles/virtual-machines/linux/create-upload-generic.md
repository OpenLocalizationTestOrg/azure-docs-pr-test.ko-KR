---
title: "aaaCreate 및 Azure에서 Linux VHD 업로드"
description: "Toocreate 알아보고 업로드는 Azure 가상 하드 디스크 (VHD)는 Linux 운영 체제를 포함 합니다."
services: virtual-machines-linux
documentationcenter: 
author: szarkos
manager: timlt
editor: tysonn
tags: azure-resource-manager,azure-service-management
ms.assetid: d351396c-95a0-4092-b7bf-c6aae0bbd112
ms.service: virtual-machines-linux
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 02/02/2017
ms.author: szark
ms.openlocfilehash: 208e15c035edb5520fc29ba8e4e71c42b041864d
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="information-for-non-endorsed-distributions"></a><span data-ttu-id="52d02-103">보증되지 않는 배포에 대한 정보</span><span class="sxs-lookup"><span data-stu-id="52d02-103">Information for Non-Endorsed Distributions</span></span>
[!INCLUDE [learn-about-deployment-models](../../../includes/learn-about-deployment-models-both-include.md)]

<span data-ttu-id="52d02-104">hello Azure 플랫폼 SLA 적용 hello 한 경우에 Linux 운영 체제를 실행 하는 toovirtual 컴퓨터의 hello [보증 배포판](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-104">hello Azure platform SLA applies toovirtual machines running hello Linux OS only when one of hello [endorsed distributions](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) is used.</span></span> <span data-ttu-id="52d02-105">Hello Azure 이미지 갤러리는 제공 되는 모든 Linux 배포판 보증 hello 필요한 구성으로 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-105">All Linux distributions that are provided in hello Azure image gallery are endorsed distributions with hello required configuration.</span></span>

* [<span data-ttu-id="52d02-106">Azure의 Linux - 보증 배포판</span><span class="sxs-lookup"><span data-stu-id="52d02-106">Linux on Azure - Endorsed Distributions</span></span>](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)
* [<span data-ttu-id="52d02-107">Microsoft Azure의 Linux 이미지 지원</span><span class="sxs-lookup"><span data-stu-id="52d02-107">Support for Linux images in Microsoft Azure</span></span>](https://support.microsoft.com/kb/2941892)

<span data-ttu-id="52d02-108">Azure에서 실행 되는 모든 분포에는 다양 한 필수 구성 요소 toohave hello 플랫폼에서 실행 가능성이 tooproperly toomeet이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-108">All distributions running on Azure will need toomeet a number of prerequisites toohave a chance tooproperly run on hello platform.</span></span>  <span data-ttu-id="52d02-109">이 문서는 결코 포괄적인 모든 분포는 다릅니다. 및 모든 hello 아래 조건 것은 아니며 있어야를 충족 하는 경우에 toosignificantly 조정 hello 플랫폼에서 올바르게 실행 하 여 Linux 시스템 tooensure 가능 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-109">This article is by no means comprehensive as every distribution is different; and it is quite possible that even if you meet all hello criteria below you will still need toosignificantly tweak your Linux system tooensure that it properly runs on hello platform.</span></span>

<span data-ttu-id="52d02-110">따라서 가능한 경우 [Azure 보증 배포판의 Linux](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) 중 하나를 사용하여 시작하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-110">It is for this reason that we recommend that you start with one of our [Linux on Azure Endorsed Distributions](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) when possible.</span></span> <span data-ttu-id="52d02-111">hello 다음 문서를 안내할 어떻게 tooprepare hello 다양 한 Azure에서 지원 되는 Linux 배포판을 보증 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-111">hello following articles will guide you through how tooprepare hello various endorsed Linux distributions that are supported on Azure:</span></span>

* <span data-ttu-id="52d02-112">**[CentOS 기반 배포](create-upload-centos.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="52d02-112">**[CentOS-based Distributions](create-upload-centos.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="52d02-113">**[Debian Linux](debian-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="52d02-113">**[Debian Linux](debian-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="52d02-114">**[Oracle Linux](oracle-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="52d02-114">**[Oracle Linux](oracle-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="52d02-115">**[Red Hat Enterprise Linux](redhat-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="52d02-115">**[Red Hat Enterprise Linux](redhat-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="52d02-116">**[SLES 및 openSUSE](suse-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="52d02-116">**[SLES & openSUSE](suse-create-upload-vhd.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>
* <span data-ttu-id="52d02-117">**[Ubuntu](create-upload-ubuntu.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span><span class="sxs-lookup"><span data-stu-id="52d02-117">**[Ubuntu](create-upload-ubuntu.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)**</span></span>

<span data-ttu-id="52d02-118">이 문서의 나머지 부분 hello 중점적으로 Azure에서 Linux 배포판을 실행 하기 위한 일반 지침입니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-118">hello rest of this article will focus on general guidance for running your Linux distribution on Azure.</span></span>

## <a name="general-linux-installation-notes"></a><span data-ttu-id="52d02-119">일반 Linux 설치 참고 사항</span><span class="sxs-lookup"><span data-stu-id="52d02-119">General Linux Installation Notes</span></span>
* <span data-ttu-id="52d02-120">hello VHDX 형식은 지원 되지 않습니다 Azure에서만 **고정 VHD**합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-120">hello VHDX format is not supported in Azure, only **fixed VHD**.</span></span>  <span data-ttu-id="52d02-121">Hyper-v 관리자를 사용 하 여 hello 디스크 tooVHD 형식을 변환 하거나 convert vhd cmdlet hello 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-121">You can convert hello disk tooVHD format using Hyper-V Manager or hello convert-vhd cmdlet.</span></span> <span data-ttu-id="52d02-122">VirtualBox를 사용 하는 경우 선택 하는 것이 즉 **고정 크기** 으로 반대로 toohello 기본 hello 디스크를 만들 때 동적으로 할당 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-122">If you are using VirtualBox this means selecting **Fixed size** as opposed toohello default dynamically allocated when creating hello disk.</span></span>
* <span data-ttu-id="52d02-123">Azure에서는 1세대 가상 컴퓨터만 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-123">Azure only supports generation 1 virtual machines.</span></span> <span data-ttu-id="52d02-124">가상 컴퓨터 1 및 고정 tooa 동적 확장 VHDX toohello VHD 파일 형식에서 디스크 크기의 세대를 변환할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-124">You can convert a generation 1 virtual machine from VHDX toohello VHD file format and from dynamically expanding tooa fixed sized disk.</span></span> <span data-ttu-id="52d02-125">하지만 가상 컴퓨터의 세대를 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-125">But you can't change a virtual machine's generation.</span></span> <span data-ttu-id="52d02-126">자세한 내용은 [Hyper-V에 1 또는 2세대 가상 컴퓨터를 만들어야 합니까?](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="52d02-126">For more information, see [Should I create a generation 1 or 2 virtual machine in Hyper-V?](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/plan/should-i-create-a-generation-1-or-2-virtual-machine-in-hyper-v)</span></span>
* <span data-ttu-id="52d02-127">hello 최대 허용 크기 hello에 대 한 VHD는 1, 023 GB입니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-127">hello maximum size allowed for hello VHD is 1,023 GB.</span></span>
* <span data-ttu-id="52d02-128">hello Linux 시스템을 설치할 때 *권장* LVM (종종 대부분의 설치에 대 한 hello 기본값) 보다는 표준 파티션을 사용 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-128">When installing hello Linux system it is *recommended* that you use standard partitions rather than LVM (often hello default for many installations).</span></span> <span data-ttu-id="52d02-129">OS 디스크 연결 toobe tooanother 해야 합니다. 경우에 특히 복제 된 Vm과 LVM 이름 충돌을 방지 합니다이 문제 해결을 위해 동일한 VM입니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-129">This will avoid LVM name conflicts with cloned VMs, particularly if an OS disk ever needs toobe attached tooanother identical VM for troubleshooting.</span></span> <span data-ttu-id="52d02-130">데이터 디스크에서 [LVM](configure-lvm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) 또는 [RAID](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-130">[LVM](configure-lvm.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) or [RAID](configure-raid.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) may be used on data disks.</span></span>
* <span data-ttu-id="52d02-131">UDF 파일 시스템 탑재에 대한 커널 지원이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-131">Kernel support for mounting UDF file systems is required.</span></span> <span data-ttu-id="52d02-132">첫 번째 부팅 Azure hello에-프로비저닝 구성 toohello Linux VM은 연결 된 toohello 게스트 UDF로 포맷 된 미디어를 통해 전달 됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-132">At first boot on Azure hello provisioning configuration is passed toohello Linux VM via UDF-formatted media that is attached toohello guest.</span></span> <span data-ttu-id="52d02-133">hello Azure Linux 에이전트는 해당 구성을 수 toomount hello UDF 파일 시스템 tooread 수 하 고 hello VM을 프로 비전 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-133">hello Azure Linux agent must be able toomount hello UDF file system tooread its configuration and provision hello VM.</span></span>
* <span data-ttu-id="52d02-134">2.6.37 버전 미만의 Linux 커널은 VM 크기가 더 클 때 Hyper-V에서 NUMA를 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-134">Linux kernel versions below 2.6.37 do not support NUMA on Hyper-V with larger VM sizes.</span></span> <span data-ttu-id="52d02-135">이 문제를 주로 영향 업스트림 hello를 사용 하 여 이전 분포 Red Hat 2.6.32 커널 RHEL 6.6 (커널 2.6.32 504)에서 수정 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-135">This issue primarily impacts older distributions using hello upstream Red Hat 2.6.32 kernel, and was fixed in RHEL 6.6 (kernel-2.6.32-504).</span></span> <span data-ttu-id="52d02-136">2.6.32-504 설정 해야 하는 보다 2.6.37, 다음 보다 오래 된 사용자 지정 커널 또는 이전 RHEL 기반 커널을 실행 하는 시스템 부팅 매개 변수를 hello `numa=off` hello 커널 grub.conf의 명령줄입니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-136">Systems running custom kernels older than 2.6.37, or RHEL-based kernels older than 2.6.32-504 must set hello boot parameter `numa=off` on hello kernel command-line in grub.conf.</span></span> <span data-ttu-id="52d02-137">자세한 내용은 Red Hat [KB 436883](https://access.redhat.com/solutions/436883)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="52d02-137">For more information see Red Hat [KB 436883](https://access.redhat.com/solutions/436883).</span></span>
* <span data-ttu-id="52d02-138">스왑 파티션을 hello OS 디스크에 구성 하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="52d02-138">Do not configure a swap partition on hello OS disk.</span></span> <span data-ttu-id="52d02-139">hello Linux 에이전트 구성된 toocreate hello 일시적인 리소스 디스크의 스왑 파일 일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-139">hello Linux agent can be configured toocreate a swap file on hello temporary resource disk.</span></span>  <span data-ttu-id="52d02-140">이 대 한 자세한 내용은 아래 hello 단계에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-140">More information about this can be found in hello steps below.</span></span>
* <span data-ttu-id="52d02-141">모든 hello Vhd 크기를 1MB의 배수인가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-141">All of hello VHDs must have sizes that are multiples of 1 MB.</span></span>

### <a name="installing-kernel-modules-without-hyper-v"></a><span data-ttu-id="52d02-142">Hyper-V 없이 커널 모듈 설치</span><span class="sxs-lookup"><span data-stu-id="52d02-142">Installing kernel modules without Hyper-V</span></span>
<span data-ttu-id="52d02-143">Azure는 Linux 특정 커널 모듈이 순서 toorun azure에서에 설치 되어 있어야 하므로 hello Hyper-v 하이퍼바이저에서 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-143">Azure runs on hello Hyper-V hypervisor, so Linux requires that certain kernel modules are installed in order toorun in Azure.</span></span> <span data-ttu-id="52d02-144">Hyper-v 외부에서 생성 된 VM이 있는 경우 hello Linux 설치 관리자 포함시킬지 여부 hello 드라이버 Hyper-v에 대 한 hello 초기 ramdisk (initrd 또는 initramfs)에서 실행 중인 없지 않은 한는 Hyper-v 환경입니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-144">If you have a VM that was created outside of Hyper-V, hello Linux installers may not include hello drivers for Hyper-V in hello initial ramdisk (initrd or initramfs) unless it detects that it is running an a Hyper-V environment.</span></span> <span data-ttu-id="52d02-145">다른 가상화 시스템 (예: Virtualbox, KVM 등) tooprepare Linux 이미지를 사용할 때는 hello 이상 toorebuild hello initrd tooensure 할 수 있습니다 `hv_vmbus` 및 `hv_storvsc` 커널 모듈은 hello 초기 ramdisk에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-145">When using a different virtualization system (i.e. Virtualbox, KVM, etc.) tooprepare your Linux image, you may need toorebuild hello initrd tooensure that at least hello `hv_vmbus` and `hv_storvsc` kernel modules are available on hello initial ramdisk.</span></span>  <span data-ttu-id="52d02-146">이것은 알려진된 문제 이상 hello 업스트림 Red Hat 분포에 따라 시스템에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-146">This is a known issue at least on systems based on hello upstream Red Hat distribution.</span></span>

<span data-ttu-id="52d02-147">hello initrd 또는 initramfs 이미지를 다시 작성 하기 위한 hello 메커니즘 hello 배포에 따라 달라질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-147">hello mechanism for rebuilding hello initrd or initramfs image may vary depending on hello distribution.</span></span> <span data-ttu-id="52d02-148">분포의 설명서를 참조 하거나 hello 적절 한 절차에 대 한 지원 하십시오.</span><span class="sxs-lookup"><span data-stu-id="52d02-148">Please consult your distribution's documentation or support for hello proper procedure.</span></span>  <span data-ttu-id="52d02-149">다음은 toorebuild initrd hello를 사용 하 여 hello 하는 방법에 대 한 하나의 예 `mkinitrd` 유틸리티:</span><span class="sxs-lookup"><span data-stu-id="52d02-149">Here is one example for how toorebuild hello initrd using hello `mkinitrd` utility:</span></span>

<span data-ttu-id="52d02-150">먼저, hello 기존 initrd 이미지를 백업 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-150">First, back up hello existing initrd image:</span></span>

    # cd /boot
    # sudo cp initrd-`uname -r`.img  initrd-`uname -r`.img.bak

<span data-ttu-id="52d02-151">다음으로 hello initrd hello로 다시 작성 `hv_vmbus` 및 `hv_storvsc` 커널 모듈:</span><span class="sxs-lookup"><span data-stu-id="52d02-151">Next, rebuild hello initrd with hello `hv_vmbus` and `hv_storvsc` kernel modules:</span></span>

    # sudo mkinitrd --preload=hv_storvsc --preload=hv_vmbus -v -f initrd-`uname -r`.img `uname -r`


### <a name="resizing-vhds"></a><span data-ttu-id="52d02-152">VHD 크기 조정</span><span class="sxs-lookup"><span data-stu-id="52d02-152">Resizing VHDs</span></span>
<span data-ttu-id="52d02-153">Azure에서 VHD 이미지를 정렬 하는 실제 크기 too1MB 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-153">VHD images on Azure must have a virtual size aligned too1MB.</span></span>  <span data-ttu-id="52d02-154">일반적으로 Hyper-V를 사용하여 만든 VHD는 이미 올바르게 조정되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-154">Typically, VHDs created using Hyper-V should already be aligned correctly.</span></span>  <span data-ttu-id="52d02-155">오류 메시지와 비슷한 toohello 다음 toocreate 할 때 나타날 수 있습니다 다음 VHD hello 올바르게 정렬 되지 않은 경우는 *이미지* VHD에서:</span><span class="sxs-lookup"><span data-stu-id="52d02-155">If hello VHD is not aligned correctly then you may receive an error message similar toohello following when you attempt toocreate an *image* from your VHD:</span></span>

    "hello VHD http://<mystorageaccount>.blob.core.windows.net/vhds/MyLinuxVM.vhd has an unsupported virtual size of 21475270656 bytes. hello size must be a whole number (in MBs).”

<span data-ttu-id="52d02-156">tooremedy hello Hyper-v 관리자 콘솔 이나 hello를 사용 하 여 VM 크기를 조정할 수 있습니다이 hello [RESIZE-VHD](http://technet.microsoft.com/library/hh848535.aspx) Powershell cmdlet.</span><span class="sxs-lookup"><span data-stu-id="52d02-156">tooremedy this you can resize hello VM using either hello Hyper-V Manager console or hello [Resize-VHD](http://technet.microsoft.com/library/hh848535.aspx) Powershell cmdlet.</span></span>  <span data-ttu-id="52d02-157">Windows 환경에서 실행 되지 않는 경우 다음 것은 toouse qemu img tooconvert (필요한 경우)이 좋으며 hello VHD의 크기를 조정 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-157">If you are not running in a Windows environment then it is recommended toouse qemu-img tooconvert (if needed) and resize hello VHD.</span></span>

> [!NOTE]
> <span data-ttu-id="52d02-158">VHD 형식이 잘못 지정되는 qemu-img 버전 >=2.2.1에 알려진 버그가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-158">There is a known bug in qemu-img versions >=2.2.1 that results in an improperly formatted VHD.</span></span> <span data-ttu-id="52d02-159">QEMU 2.6에서 hello 문제가 해결 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-159">hello issue has been fixed in QEMU 2.6.</span></span> <span data-ttu-id="52d02-160">Toouse 좋습니다 qemu-img 2.2.0 또는 소문자 또는 업데이트 too2.6 이상.</span><span class="sxs-lookup"><span data-stu-id="52d02-160">It is recommended toouse either qemu-img 2.2.0 or lower, or update too2.6 or higher.</span></span> <span data-ttu-id="52d02-161">참조: https://bugs.launchpad.net/qemu/+bug/1490611</span><span class="sxs-lookup"><span data-stu-id="52d02-161">Reference: https://bugs.launchpad.net/qemu/+bug/1490611.</span></span>
> 
> 

1. <span data-ttu-id="52d02-162">VHD를 사용 하 여 직접 도구와 같은 hello 크기 조정 `qemu-img` 또는 `vbox-manage` 부팅할 수 VHD 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-162">Resizing hello VHD directly using tools such as `qemu-img` or `vbox-manage` may result in an unbootable VHD.</span></span>  <span data-ttu-id="52d02-163">따라서 toofirst convert hello VHD tooa 원시 디스크 이미지 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-163">So it is recommended toofirst convert hello VHD tooa RAW disk image.</span></span>  <span data-ttu-id="52d02-164">원시 디스크 이미지 (KVM 같은 하이퍼바이저에 대 한 hello 기본값)로 이미 hello VM 이미지를 만든 경우이 단계를 건너뛸 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-164">If hello VM image was already created as RAW disk image (hello default for some Hypervisors such as KVM) then you may skip this step:</span></span>
   
       # qemu-img convert -f vpc -O raw MyLinuxVM.vhd MyLinuxVM.raw

2. <span data-ttu-id="52d02-165">Hello 필요한 실제 크기 hello hello 디스크 이미지 tooensure의 크기는 정렬 된 too1MB을 계산 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-165">Calculate hello required size of hello disk image tooensure that hello virtual size is aligned too1MB.</span></span>  <span data-ttu-id="52d02-166">hello bash 셸 스크립트를 따라이 도움이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-166">hello following bash shell script can assist with this.</span></span>  <span data-ttu-id="52d02-167">hello 스크립트 사용 하 여 "`qemu-img info`" toodetermine hello 디스크 이미지의 크기를 가상 hello hello 크기 toohello 계산 되며 다음 1MB:</span><span class="sxs-lookup"><span data-stu-id="52d02-167">hello script uses "`qemu-img info`" toodetermine hello virtual size of hello disk image and then calculates hello size toohello next 1MB:</span></span>
   
       rawdisk="MyLinuxVM.raw"
       vhddisk="MyLinuxVM.vhd"
   
       MB=$((1024*1024))
       size=$(qemu-img info -f raw --output json "$rawdisk" | \
              gawk 'match($0, /"virtual-size": ([0-9]+),/, val) {print val[1]}')
   
       rounded_size=$((($size/$MB + 1)*$MB))
       echo "Rounded Size = $rounded_size"

3. <span data-ttu-id="52d02-168">$Rounded_size를 사용 하 여 스크립트 위에 hello에 설정 된 대로 hello 원시 디스크의 크기를 조정 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-168">Resize hello raw disk using $rounded_size as set in hello above script:</span></span>
   
       # qemu-img resize MyLinuxVM.raw $rounded_size

4. <span data-ttu-id="52d02-169">Hello 원시 디스크 백 tooa를 변환 크기가 고정 된 VHD:</span><span class="sxs-lookup"><span data-stu-id="52d02-169">Now, convert hello RAW disk back tooa fixed-size VHD:</span></span>
   
       # qemu-img convert -f raw -o subformat=fixed -O vpc MyLinuxVM.raw MyLinuxVM.vhd

   <span data-ttu-id="52d02-170">또는 qemu 버전과 **2.6 +** hello 포함 `force_size` 옵션:</span><span class="sxs-lookup"><span data-stu-id="52d02-170">Or, with qemu version **2.6+** include hello `force_size` option:</span></span>

       # qemu-img convert -f raw -o subformat=fixed,force_size -O vpc MyLinuxVM.raw MyLinuxVM.vhd

## <a name="linux-kernel-requirements"></a><span data-ttu-id="52d02-171">Linux 커널 요구 사항</span><span class="sxs-lookup"><span data-stu-id="52d02-171">Linux Kernel Requirements</span></span>
<span data-ttu-id="52d02-172">hello Hyper-v와 Azure에 대 한 Linux 통합 서비스 (LIS) 드라이버 기여 하 직접 toohello 업스트림 Linux 커널을 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-172">hello Linux Integration Services (LIS) drivers for Hyper-V and Azure are contributed directly toohello upstream Linux kernel.</span></span> <span data-ttu-id="52d02-173">최신 Linux 커널 버전(예: 3.x)을 포함하는 대부분의 배포에서는 이러한 드라이버가 이미 제공되거나 이러한 드라이버의 백 포트 버전이 커널과 함께 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-173">Many distributions that include a recent Linux kernel version (i.e. 3.x) will have these drivers available already, or otherwise provide backported versions of these drivers with their kernels.</span></span>  <span data-ttu-id="52d02-174">이들이 드라이버 지속적으로 업데이트 하는 중에 새로운 수정 및 기능을 사용 하 여 hello 업스트림 커널 하므로 가능 하면 toorun 좋습니다는 [배포 보증](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) 이러한 수정 및 업데이트를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-174">These drivers are constantly being updated in hello upstream kernel with new fixes and features, so when possible it is recommended toorun an [endorsed distribution](endorsed-distros.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) that will include these fixes and updates.</span></span>

<span data-ttu-id="52d02-175">Red Hat Enterprise Linux 버전의 변형을 실행 하는 경우 **6.0-6.3**를 Hyper-v 용 LIS 드라이버 최신 tooinstall hello를 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-175">If you are running a variant of Red Hat Enterprise Linux versions **6.0-6.3**, then you will need tooinstall hello latest LIS drivers for Hyper-V.</span></span> <span data-ttu-id="52d02-176">hello 드라이버를 찾을 수 [이 위치의](http://go.microsoft.com/fwlink/p/?LinkID=254263&clcid=0x409)합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-176">hello drivers can be found [at this location](http://go.microsoft.com/fwlink/p/?LinkID=254263&clcid=0x409).</span></span> <span data-ttu-id="52d02-177">RHEL 기준으로 **6.4 +** (및 파생물) hello LIS 드라이버에 이미 포함 되어 있으므로 추가 설치 패키지 및 hello 커널 필요한 toorun Azure에서 해당 시스템 됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-177">As of RHEL **6.4+** (and derivatives) hello LIS drivers are already included with hello kernel and so no additional installation packages are needed toorun those systems on Azure.</span></span>

<span data-ttu-id="52d02-178">사용자 지정에 대 한 커널 필요한 경우에 보다 최신 커널 버전 toouse 것이 좋습니다 (즉, **3.8 +**).</span><span class="sxs-lookup"><span data-stu-id="52d02-178">If a custom kernel is required, it is recommended toouse a more recent kernel version (i.e. **3.8+**).</span></span> <span data-ttu-id="52d02-179">이러한 분포 또는 자신의 커널 유지 관리 하는 공급 업체에 대 한 작업에 필요한 tooregularly backport hello LIS 드라이버 커널에서 hello 업스트림 커널 tooyour 사용자 지정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-179">For those distributions or vendors who maintain their own kernel, some effort will be required tooregularly backport hello LIS drivers from hello upstream kernel tooyour custom kernel.</span></span>  <span data-ttu-id="52d02-180">비교적 최근 커널 버전을 이미 실행 중인 경우에 tookeep 트랙의 업스트림의 수정 hello LIS 드라이버 및 backport 것 필요에 따라 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-180">Even if you are already running a relatively recent kernel version, it is highly recommended tookeep track of any upstream fixes in hello LIS drivers and backport those as needed.</span></span> <span data-ttu-id="52d02-181">hello LIS 드라이버 소스 파일의 hello 위치가 hello에서 사용할 수 있는 [유지 관리자](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/MAINTAINERS) hello Linux 커널 소스 트리에 파일:</span><span class="sxs-lookup"><span data-stu-id="52d02-181">hello location of hello LIS driver source files is available in hello [MAINTAINERS](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/tree/MAINTAINERS) file in hello Linux kernel source tree:</span></span>

    F:    arch/x86/include/asm/mshyperv.h
    F:    arch/x86/include/uapi/asm/hyperv.h
    F:    arch/x86/kernel/cpu/mshyperv.c
    F:    drivers/hid/hid-hyperv.c
    F:    drivers/hv/
    F:    drivers/input/serio/hyperv-keyboard.c
    F:    drivers/net/hyperv/
    F:    drivers/scsi/storvsc_drv.c
    F:    drivers/video/fbdev/hyperv_fb.c
    F:    include/linux/hyperv.h
    F:    tools/hv/

<span data-ttu-id="52d02-182">최소한, 패치 다음 hello hello 없는 경우 Azure에서 toocause 문제 알려진는 하며 하므로 이러한 포함 되어야 합니다 hello 커널에 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-182">At a very minimum, hello absence of hello following patches have been known toocause problems on Azure and so these must be included in hello kernel.</span></span> <span data-ttu-id="52d02-183">이 목록에는 모든 배포에 대해 완전한 전체 정보가 포함되어 있지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-183">This list is by no means exhaustive or complete for all distributions:</span></span>

* [<span data-ttu-id="52d02-184">ata_piix: 기본적으로 디스크 toohello Hyper-v 드라이버를 연기</span><span class="sxs-lookup"><span data-stu-id="52d02-184">ata_piix: defer disks toohello Hyper-V drivers by default</span></span>](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/ata/ata_piix.c?id=cd006086fa5d91414d8ff9ff2b78fbb593878e3c)
* [<span data-ttu-id="52d02-185">storvsc: hello 재설정 경로에서 전송 중인 패킷의 대 한 계정</span><span class="sxs-lookup"><span data-stu-id="52d02-185">storvsc: Account for in-transit packets in hello RESET path</span></span>](https://git.kernel.org/cgit/linux/kernel/git/torvalds/linux.git/commit/drivers/scsi/storvsc_drv.c?id=5c1b10ab7f93d24f29b5630286e323d1c5802d5c)
* [<span data-ttu-id="52d02-186">storvsc: WRITE_SAME을 사용하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="52d02-186">storvsc: avoid usage of WRITE_SAME</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=3e8f4f4065901c8dfc51407e1984495e1748c090)
* [<span data-ttu-id="52d02-187">storvsc: RAID 및 가상 호스트 어댑터 드라이버에 대한 WRITE SAME 해제</span><span class="sxs-lookup"><span data-stu-id="52d02-187">storvsc: Disable WRITE SAME for RAID and virtual host adapter drivers</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=54b2b50c20a61b51199bedb6e5d2f8ec2568fb43)
* [<span data-ttu-id="52d02-188">storvsc: NULL 포인터 역참조 수정</span><span class="sxs-lookup"><span data-stu-id="52d02-188">storvsc: NULL pointer dereference fix</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=b12bb60d6c350b348a4e1460cd68f97ccae9822e)
* [<span data-ttu-id="52d02-189">storvsc: 링 버퍼 오류로 I/O가 중지됨</span><span class="sxs-lookup"><span data-stu-id="52d02-189">storvsc: ring buffer failures may result in I/O freeze</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/storvsc_drv.c?id=e86fb5e8ab95f10ec5f2e9430119d5d35020c951)
* [<span data-ttu-id="52d02-190">scsi_sysfs: __scsi_remove_device 이중 실행 방지</span><span class="sxs-lookup"><span data-stu-id="52d02-190">scsi_sysfs: protect against double execution of __scsi_remove_device</span></span>](https://git.kernel.org/cgit/linux/kernel/git/next/linux-next.git/commit/drivers/scsi/scsi_sysfs.c?id=be821fd8e62765de43cc4f0e2db363d0e30a7e9b)

## <a name="hello-azure-linux-agent"></a><span data-ttu-id="52d02-191">hello Azure Linux 에이전트</span><span class="sxs-lookup"><span data-stu-id="52d02-191">hello Azure Linux Agent</span></span>
<span data-ttu-id="52d02-192">hello [Azure Linux 에이전트](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) (waagent)가 필요 tooproperly Azure에서 Linux 가상 컴퓨터를 프로 비전 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-192">hello [Azure Linux Agent](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json) (waagent) is required tooproperly provision a Linux virtual machine in Azure.</span></span> <span data-ttu-id="52d02-193">Hello 최신 버전 가져오기, 파일 문제 또는 hello에 대 한 끌어오기 요청을 제출할 수 [Linux 에이전트 GitHub 리포지토리](https://github.com/Azure/WALinuxAgent)합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-193">You can get hello latest version, file issues or submit pull requests at hello [Linux Agent GitHub repo](https://github.com/Azure/WALinuxAgent).</span></span>

* <span data-ttu-id="52d02-194">hello Linux 에이전트는 hello Apache 2.0 라이선스에 따라 해제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-194">hello Linux agent is released under hello Apache 2.0 license.</span></span> <span data-ttu-id="52d02-195">많은 배포 이미 RPM deb 패키지에 대 한 제공 hello 에이전트 및 하므로 경우에 따라이 설치 하 고 업데이트할 수 약간의 노력으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-195">Many distributions already provide RPM or deb packages for hello agent, and so in some cases this can be installed and updated with little effort.</span></span>
* <span data-ttu-id="52d02-196">hello Azure Linux 에이전트는 Python v2.6 + 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-196">hello Azure Linux Agent requires Python v2.6+.</span></span>
* <span data-ttu-id="52d02-197">hello 에이전트는 hello python pyasn1 모듈도 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-197">hello agent also requires hello python-pyasn1 module.</span></span> <span data-ttu-id="52d02-198">대부분의 배포에서는 이 모듈이 설치 가능한 별도의 패키지로 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-198">Most distributions provide this as a separate package that can be installed.</span></span>
* <span data-ttu-id="52d02-199">일부 경우에 hello Azure Linux 에이전트 NetworkManager와 호환 되지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-199">In some cases hello Azure Linux Agent may not be compatible with NetworkManager.</span></span> <span data-ttu-id="52d02-200">다양 한 배포에서 제공 하는 hello RPM/Deb 패키지 충돌 toohello waagent 패키지로 NetworkManager를 구성 하 고 따라서 제거 하므로 NetworkManager hello Linux 에이전트 패키지를 설치 하는 경우.</span><span class="sxs-lookup"><span data-stu-id="52d02-200">Many of hello RPM/Deb packages provided by distributions configure NetworkManager as a conflict toohello waagent package, and thus will uninstall NetworkManager when you install hello Linux agent package.</span></span>

## <a name="general-linux-system-requirements"></a><span data-ttu-id="52d02-201">일반 Linux 시스템 요구 사항</span><span class="sxs-lookup"><span data-stu-id="52d02-201">General Linux System Requirements</span></span>

* <span data-ttu-id="52d02-202">GRUB 또는 GRUB2 tooinclude hello 매개 변수 뒤에 hello 커널 부팅 줄을 수정 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-202">Modify hello kernel boot line in GRUB or GRUB2 tooinclude hello following parameters.</span></span> <span data-ttu-id="52d02-203">또한 이렇게 하면 모든 콘솔 메시지 toohello 첫 번째 직렬 포트, Azure를 지원할 수 있는 문제를 디버깅 지원:</span><span class="sxs-lookup"><span data-stu-id="52d02-203">This will also ensure all console messages are sent toohello first serial port, which can assist Azure support with debugging issues:</span></span>
  
        console=ttyS0,115200n8 earlyprintk=ttyS0,115200 rootdelay=300
  
    <span data-ttu-id="52d02-204">또한 이렇게 하면 모든 콘솔 메시지 toohello 첫 번째 직렬 포트, Azure를 지원할 수 있는 문제를 디버깅 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-204">This will also ensure all console messages are sent toohello first serial port, which can assist Azure support with debugging issues.</span></span>
  
    <span data-ttu-id="52d02-205">또한 위의 toohello, 것이 좋습니다 너무*제거* 있을 경우 매개 변수 다음 hello:</span><span class="sxs-lookup"><span data-stu-id="52d02-205">In addition toohello above, it is recommended too*remove* hello following parameters if they exist:</span></span>
  
        rhgb quiet crashkernel=auto
  
    <span data-ttu-id="52d02-206">그래픽 도구 및 자동 부팅 toohello 직렬 포트에 보내 모든 hello 로그 toobe를 원하는 위치로 클라우드 환경에서 유용 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-206">Graphical and quiet boot are not useful in a cloud environment where we want all hello logs toobe sent toohello serial port.</span></span> <span data-ttu-id="52d02-207">hello `crashkernel` 옵션이 수 있습니다, 원하는 경우 구성 하는 왼쪽 이지만이 매개 변수 감소할 hello hello 128MB 이상의 VM에서에서 사용 가능한 메모리 크기는 hello 더 작은 VM 크기에 문제가 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-207">hello `crashkernel` option may be left configured if desired, but note that this parameter will reduce hello amount of available memory in hello VM by 128MB or more, which may be problematic on hello smaller VM sizes.</span></span>

* <span data-ttu-id="52d02-208">Hello Azure Linux 에이전트를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-208">Installing hello Azure Linux Agent</span></span>
  
    <span data-ttu-id="52d02-209">hello Azure Linux 에이전트는 Azure에서 Linux 이미지를 프로 비전 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-209">hello Azure Linux Agent is required for provisioning a Linux image on Azure.</span></span>  <span data-ttu-id="52d02-210">많은 배포 RPM 또는 Deb 패키지로 hello 에이전트 제공 (hello 패키지는 일반적으로 라고 'WALinuxAgent' 또는 'walinuxagent').</span><span class="sxs-lookup"><span data-stu-id="52d02-210">Many distributions provide hello agent as an RPM or Deb package (hello package is typically called 'WALinuxAgent' or 'walinuxagent').</span></span>  <span data-ttu-id="52d02-211">hello 에이전트 설치할 수도 있습니다 수동으로 hello에 hello 단계에 따라 [Linux 에이전트 가이드](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-211">hello agent can also be installed manually by following hello steps in hello [Linux Agent Guide](../windows/agent-user-guide.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>

* <span data-ttu-id="52d02-212">해당 hello SSH 서버를 설치 및 부팅 시 toostart을 구성을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-212">Ensure that hello SSH server is installed and configured toostart at boot time.</span></span>  <span data-ttu-id="52d02-213">일반적으로 hello 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-213">This is usually hello default.</span></span>

* <span data-ttu-id="52d02-214">Hello OS 디스크에 스왑 공간을 만들지 마십시오</span><span class="sxs-lookup"><span data-stu-id="52d02-214">Do not create swap space on hello OS disk</span></span>
  
    <span data-ttu-id="52d02-215">hello Azure Linux 에이전트 Azure에서 프로 비전 한 후 연결 된 toohello VM은 hello 로컬 리소스 디스크를 사용 하 여 스왑 공간을 자동으로 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-215">hello Azure Linux Agent can automatically configure swap space using hello local resource disk that is attached toohello VM after provisioning on Azure.</span></span> <span data-ttu-id="52d02-216">해당 하는 hello 로컬 리소스 디스크는 한 *임시* , 디스크 및 hello VM 프로 비전 해제 된 경우 비울 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-216">Note that hello local resource disk is a *temporary* disk, and might be emptied when hello VM is deprovisioned.</span></span> <span data-ttu-id="52d02-217">Hello Azure Linux 에이전트를 설치한 후 (이전 단계 참조) hello /etc/waagent.conf에 매개 변수를 적절 하 게 뒤 수정:</span><span class="sxs-lookup"><span data-stu-id="52d02-217">After installing hello Azure Linux Agent (see previous step), modify hello following parameters in /etc/waagent.conf appropriately:</span></span>
  
        ResourceDisk.Format=y
        ResourceDisk.Filesystem=ext4
        ResourceDisk.MountPoint=/mnt/resource
        ResourceDisk.EnableSwap=y
        ResourceDisk.SwapSizeMB=2048    ## NOTE: set this toowhatever you need it toobe.

* <span data-ttu-id="52d02-218">마지막 단계로 hello 명령을 toodeprovision hello 가상 컴퓨터를 다음을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-218">As a final step, run hello following commands toodeprovision hello virtual machine:</span></span>
  
        # sudo waagent -force -deprovision
        # export HISTSIZE=0
        # logout
  
  > [!NOTE]
  > <span data-ttu-id="52d02-219">Virtualbox hello 실행 한 후 다음 오류가 표시 될 수 있습니다 ' waagent-force-deprovision': `[Errno 5] Input/output error`합니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-219">On Virtualbox you may see hello following error after running 'waagent -force -deprovision': `[Errno 5] Input/output error`.</span></span> <span data-ttu-id="52d02-220">이 오류 메시지는 중요하지 않으므로 무시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-220">This error message is not critical and can be ignored.</span></span>
  > 
  > 

* <span data-ttu-id="52d02-221">그런 다음 hello 가상 컴퓨터를 tooshut 필요 하 고 hello VHD tooAzure 업로드 됩니다.</span><span class="sxs-lookup"><span data-stu-id="52d02-221">You will then need tooshut down hello virtual machine and upload hello VHD tooAzure.</span></span>

