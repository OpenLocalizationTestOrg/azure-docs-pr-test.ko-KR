---
title: "Azure Virtual Machines의 Always On 가용성 그룹 구성(클래식) | Microsoft Docs"
description: "Azure Virtual Machines로 Always On 가용성 그룹을 만듭니다. 이 자습서에서는 스크립트보다는 사용자 인터페이스 및 도구를 주로 사용합니다."
services: virtual-machines-windows
documentationcenter: na
author: MikeRayMSFT
manager: jhubbard
editor: 
tags: azure-service-management
ms.assetid: 8d48a3d2-79f8-4ab0-9327-2f30ee0b2ff1
ms.service: virtual-machines-sql
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 03/17/2017
ms.author: mikeray
ms.openlocfilehash: b360fe9f28eeb9b10c82fce729165b1b572ac3c6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="configure-always-on-availability-group-in-azure-virtual-machines-classic"></a><span data-ttu-id="e31e5-104">Azure Virtual Machines의 Always On 가용성 그룹 구성(클래식)</span><span class="sxs-lookup"><span data-stu-id="e31e5-104">Configure Always On availability group in Azure Virtual Machines (classic)</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="e31e5-105">클래식: UI</span><span class="sxs-lookup"><span data-stu-id="e31e5-105">Classic: UI</span></span>](../classic/portal-sql-alwayson-availability-groups.md)
> * <span data-ttu-id="e31e5-106">[클래식: PowerShell](../classic/ps-sql-alwayson-availability-groups.md)
</span><span class="sxs-lookup"><span data-stu-id="e31e5-106">[Classic: PowerShell](../classic/ps-sql-alwayson-availability-groups.md)
</span></span><br/>

<span data-ttu-id="e31e5-107">시작하기 전에 이제 Azure Resource Manager 모델에서 이 작업을 완료할 수 있는지 확인하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-107">Before you begin, consider that you can now complete this task in Azure Resource Manager model.</span></span> <span data-ttu-id="e31e5-108">새 배포에는 Azure Resource Manager 모델을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-108">We recommend Azure Resource Manager model for new deployments.</span></span> <span data-ttu-id="e31e5-109">[Azure Virtual Machines의 SQL Server Always On 가용성 그룹](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-109">See [SQL Server Always On availability groups on Azure virtual machines](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="e31e5-110">새로운 배포는 대부분 리소스 관리자 모델을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-110">Microsoft recommends that most new deployments use the Resource Manager model.</span></span> <span data-ttu-id="e31e5-111">Azure에는 리소스를 만들고 작업하기 위한 [리소스 관리자 및 클래식](../../../azure-resource-manager/resource-manager-deployment-model.md)이라는 두 가지 배포 모델이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-111">Azure has two different deployment models to create and work with resources: [Resource Manager and classic](../../../azure-resource-manager/resource-manager-deployment-model.md).</span></span> <span data-ttu-id="e31e5-112">이 문서에서는 클래식 배포 모델을 사용하는 방법을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-112">This article explains how to use the classic deployment model.</span></span> 

<span data-ttu-id="e31e5-113">Azure Resource Manager를 사용하여 이 작업을 완료하려면 [Azure Virtual Machines의 SQL Server AlwaysOn 가용성 그룹](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-113">To complete this task with the Azure Resource Manager model, see [SQL Server Always On availability groups on Azure virtual machines](../sql/virtual-machines-windows-portal-sql-availability-group-overview.md).</span></span>

<span data-ttu-id="e31e5-114">이 종단 간 자습서에서는 Azure Virtual Machines에서 실행되는 SQL Server Always On을 사용하여 가용성 그룹을 구현하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-114">This end-to-end tutorial shows you how to implement availability groups by using SQL Server Always On running on Azure Virtual Machines.</span></span>

<span data-ttu-id="e31e5-115">자습서 마지막에서 Azure의 SQL Server Always On 솔루션은 다음 요소로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-115">At the end of the tutorial, your SQL Server Always On solution in Azure will consist of the following elements:</span></span>

* <span data-ttu-id="e31e5-116">여러 서브넷과 프런트 엔드 및 백 엔드 서브넷을 포함하는 가상 네트워크</span><span class="sxs-lookup"><span data-stu-id="e31e5-116">A virtual network that contains multiple subnets and includes a frontend and a backend subnet</span></span>
* <span data-ttu-id="e31e5-117">Active Directory(Azure AD) 도메인을 포함한 도메인 컨트롤러</span><span class="sxs-lookup"><span data-stu-id="e31e5-117">A domain controller with an Active Directory (Azure AD) domain</span></span>
* <span data-ttu-id="e31e5-118">SQL Server를 실행하고 백 엔드 서브넷에 배포되고 Azure AD 도메인에 가입된 두 개의 가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="e31e5-118">Two virtual machines that run SQL Server and are deployed to the backend subnet and joined to the Azure AD domain</span></span>
* <span data-ttu-id="e31e5-119">노드 과반수 쿼럼 모델을 포함하는 3노드 장애 조치 클러스터</span><span class="sxs-lookup"><span data-stu-id="e31e5-119">A three-node failover cluster with the Node Majority quorum model</span></span>
* <span data-ttu-id="e31e5-120">가용성 데이터베이스의 두 개의 동기 커밋 복제본이 포함된 가용성 그룹</span><span class="sxs-lookup"><span data-stu-id="e31e5-120">An availability group that has two synchronous-commit replicas of an availability database</span></span>

<span data-ttu-id="e31e5-121">다음 그림은 솔루션을 그래픽으로 표현한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-121">The following illustration is a graphical representation of the solution.</span></span>

![Azure에서 가용성 그룹에 대한 테스트 랩 아키텍처](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC791912.png)

<span data-ttu-id="e31e5-123">이것은 가능한 구성 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-123">Note that this is one possible configuration.</span></span> <span data-ttu-id="e31e5-124">예를 들어 2복제본 가용성 그룹에 대한 가상 컴퓨터 수를 최소화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-124">For example, you can minimize the number of virtual machines for a two-replica availability group.</span></span> <span data-ttu-id="e31e5-125">이 구성에서는 도메인 컨트롤러를 2노드 클러스터의 쿼럼 파일 공유 감시로 사용하여 Azure에서 계산 시간을 단축합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-125">This configuration saves on compute hours in Azure by using the domain controller as the quorum file share witness in a two-node cluster.</span></span> <span data-ttu-id="e31e5-126">이 방법을 사용하면 설명된 구성에서 가상 컴퓨터 수가 하나씩 감소합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-126">This method reduces the virtual machine count by one from the illustrated configuration.</span></span>

<span data-ttu-id="e31e5-127">이 자습서에서는 다음을 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-127">This tutorial assumes the following:</span></span>

* <span data-ttu-id="e31e5-128">Azure 계정이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-128">You already have an Azure account.</span></span>
* <span data-ttu-id="e31e5-129">가상 컴퓨터 갤러리에서 GUI를 사용하여 SQL Server를 실행하는 클래식 가상 컴퓨터를 프로비전하는 방법을 알고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-129">You already know how to use the GUI in the virtual machine gallery to provision a classic virtual machine that runs SQL Server.</span></span>
* <span data-ttu-id="e31e5-130">Always On 가용성 그룹을 확실하게 이해하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-130">You already have a solid understanding of Always On availability groups.</span></span> <span data-ttu-id="e31e5-131">자세한 내용은 [Always On 가용성 그룹(SQL Server)](https://msdn.microsoft.com/library/hh510230.aspx)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-131">For more information, see [Always On Availability Groups (SQL Server)](https://msdn.microsoft.com/library/hh510230.aspx).</span></span>

> [!NOTE]
> <span data-ttu-id="e31e5-132">SharePoint와 Always On 가용성 그룹을 사용하는 것에 관심이 있는 경우 [Configure SQL Server 2012 Always On Availability Groups for SharePoint 2013](https://technet.microsoft.com/library/jj715261.aspx)(SharePoint 2013에 대해 SQL Server 2012 Always On 가용성 그룹 구성)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-132">If you are interested in using Always On availability groups with SharePoint, also see [Configure SQL Server 2012 Always On Availability Groups for SharePoint 2013](https://technet.microsoft.com/library/jj715261.aspx).</span></span>
> 
> 

## <a name="create-the-virtual-network-and-domain-controller-server"></a><span data-ttu-id="e31e5-133">가상 네트워크 및 도메인 컨트롤러 서버 만들기</span><span class="sxs-lookup"><span data-stu-id="e31e5-133">Create the virtual network and domain controller server</span></span>
<span data-ttu-id="e31e5-134">새로운 Azure 평가판 계정으로 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-134">You begin with a new Azure trial account.</span></span> <span data-ttu-id="e31e5-135">계정을 설정한 후 Azure 클래식 포털의 홈 화면이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-135">After you set up your account, you should be on the home screen of the Azure classic portal.</span></span>

1. <span data-ttu-id="e31e5-136">다음 스크린샷과 같이 페이지의 왼쪽 아래 모퉁이에서 **새로 만들기** 단추를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-136">Click the **New** button at the left corner of the bottom of the page, as shown in the following screenshot.</span></span>
   
    ![포털에서 새로 만들기 클릭](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665511.gif)
2. <span data-ttu-id="e31e5-138">다음 스크린샷과 같이 **네트워크 서비스** > **가상 네트워크** > **사용자 지정 만들기**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-138">Click **Network Services** > **Virtual Network** > **Custom Create**, as shown in the following screenshot.</span></span>
   
    ![가상 네트워크 만들기](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665512.gif)
3. <span data-ttu-id="e31e5-140">**가상 네트워크 만들기** 대화 상자에서 페이지를 단계별로 진행하고 다음 표의 설정을 사용하여 새 가상 네트워크를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-140">In the **CREATE A VIRTUAL NETWORK** dialog box, create a new virtual network by stepping through the pages and using the settings in the following table.</span></span> 
   
   | <span data-ttu-id="e31e5-141">Page</span><span class="sxs-lookup"><span data-stu-id="e31e5-141">Page</span></span> | <span data-ttu-id="e31e5-142">설정</span><span class="sxs-lookup"><span data-stu-id="e31e5-142">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="e31e5-143">가상 네트워크 세부 정보</span><span class="sxs-lookup"><span data-stu-id="e31e5-143">Virtual Network Details</span></span> |<span data-ttu-id="e31e5-144">**이름 = ContosoNET**</span><span class="sxs-lookup"><span data-stu-id="e31e5-144">**NAME = ContosoNET**</span></span><br/><span data-ttu-id="e31e5-145">**지역 = 미국 서부**</span><span class="sxs-lookup"><span data-stu-id="e31e5-145">**REGION = West US**</span></span> |
   | <span data-ttu-id="e31e5-146">DNS 서버 및 VPN 연결</span><span class="sxs-lookup"><span data-stu-id="e31e5-146">DNS Servers and VPN Connectivity</span></span> |<span data-ttu-id="e31e5-147">없음</span><span class="sxs-lookup"><span data-stu-id="e31e5-147">None</span></span> |
   | <span data-ttu-id="e31e5-148">가상 네트워크 주소 공간</span><span class="sxs-lookup"><span data-stu-id="e31e5-148">Virtual Network Address Spaces</span></span> |<span data-ttu-id="e31e5-149">다음 스크린샷에 설정이 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-149">Settings are shown in the following screenshot:</span></span> ![가상 네트워크 만들기](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784620.png) |
4. <span data-ttu-id="e31e5-151">DC(도메인 컨트롤러)로 사용할 가상 컴퓨터를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-151">Create the virtual machine that you will use as the domain controller (DC).</span></span> <span data-ttu-id="e31e5-152">다음 스크린샷과 같이 **새로 만들기** > **계산** > **가상 컴퓨터** > **갤러리에서**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-152">Click **New** > **Compute** > **Virtual Machine** > **From Gallery**, as shown in the following screenshot.</span></span>
   
    ![가상 컴퓨터 만들기](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784621.png)
5. <span data-ttu-id="e31e5-154">**가상 컴퓨터 만들기** 대화 상자에서 페이지를 단계별로 진행하고 다음 표의 설정을 사용하여 새 가상 컴퓨터를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-154">In the **CREATE A VIRTUAL MACHINE** dialog box, configure a new virtual machine by stepping through the pages and using the settings in the following table.</span></span> 
   
   | <span data-ttu-id="e31e5-155">Page</span><span class="sxs-lookup"><span data-stu-id="e31e5-155">Page</span></span> | <span data-ttu-id="e31e5-156">설정</span><span class="sxs-lookup"><span data-stu-id="e31e5-156">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="e31e5-157">가상 컴퓨터 운영 체제 선택</span><span class="sxs-lookup"><span data-stu-id="e31e5-157">Select the virtual machine operating system</span></span> |<span data-ttu-id="e31e5-158">Windows Server 2012 R2 Datacenter</span><span class="sxs-lookup"><span data-stu-id="e31e5-158">Windows Server 2012 R2 Datacenter</span></span> |
   | <span data-ttu-id="e31e5-159">가상 컴퓨터 구성</span><span class="sxs-lookup"><span data-stu-id="e31e5-159">Virtual machine configuration</span></span> |<span data-ttu-id="e31e5-160">**버전 릴리스 날짜** = (latest)</span><span class="sxs-lookup"><span data-stu-id="e31e5-160">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="e31e5-161">**가상 컴퓨터 이름** = ContosoDC</span><span class="sxs-lookup"><span data-stu-id="e31e5-161">**VIRTUAL MACHINE NAME** = ContosoDC</span></span><br/><span data-ttu-id="e31e5-162">**계층** = 표준</span><span class="sxs-lookup"><span data-stu-id="e31e5-162">**TIER** = STANDARD</span></span><br/><span data-ttu-id="e31e5-163">**크기** = A2(2코어)</span><span class="sxs-lookup"><span data-stu-id="e31e5-163">**SIZE** = A2 (2 cores)</span></span><br/><span data-ttu-id="e31e5-164">**새 사용자 이름** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="e31e5-164">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="e31e5-165">**새 암호** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-165">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="e31e5-166">**확인** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-166">**CONFIRM** = Contoso!000</span></span> |
   | <span data-ttu-id="e31e5-167">가상 컴퓨터 구성</span><span class="sxs-lookup"><span data-stu-id="e31e5-167">Virtual machine configuration</span></span> |<span data-ttu-id="e31e5-168">**클라우드 서비스** = 새 클라우드 서비스 만들기</span><span class="sxs-lookup"><span data-stu-id="e31e5-168">**CLOUD SERVICE** = Create a new cloud service</span></span><br/><span data-ttu-id="e31e5-169">**클라우드 서비스 DNS 이름** = 고유한 클라우드 서비스 이름</span><span class="sxs-lookup"><span data-stu-id="e31e5-169">**CLOUD SERVICE DNS NAME** = A unique cloud service name</span></span><br/><span data-ttu-id="e31e5-170">**DNS 이름** = 고유 이름(예: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="e31e5-170">**DNS NAME** = A unique name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="e31e5-171">**지역/선호도 그룹/가상 네트워크** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="e31e5-171">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="e31e5-172">**가상 네트워크 서브넷** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="e31e5-172">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="e31e5-173"> **계정** = 자동으로 생성된 Storage 계정 사용</span><span class="sxs-lookup"><span data-stu-id="e31e5-173">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="e31e5-174">**가용성 집합** = (없음)</span><span class="sxs-lookup"><span data-stu-id="e31e5-174">**AVAILABILITY SET** = (None)</span></span> |
   | <span data-ttu-id="e31e5-175">가상 컴퓨터 옵션</span><span class="sxs-lookup"><span data-stu-id="e31e5-175">Virtual machine options</span></span> |<span data-ttu-id="e31e5-176">기본값 사용</span><span class="sxs-lookup"><span data-stu-id="e31e5-176">Use defaults</span></span> |

<span data-ttu-id="e31e5-177">새 가상 컴퓨터를 구성한 후 가상 컴퓨터가 프로비전될 때까지 기다립니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-177">After you configure the new virtual machine, wait for the virtual machine to be provsioned.</span></span> <span data-ttu-id="e31e5-178">이 프로세스는 완료하는 데 다소 시간이 걸립니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-178">This process takes some time to finish.</span></span> <span data-ttu-id="e31e5-179">Azure 클래식 포털에서 **가상 컴퓨터** 탭을 클릭하면 ContosoDC 순환 상태가 **시작 중(프로비전)**에서 **중지됨**, **시작 중**, **실행 중(프로비전)**, 마지막으로 **실행 중**으로 표시될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-179">If you click the **Virtual Machine** tab in the Azure classic portal, you can see ContosoDC cycling states from **Starting (Provisioning)** to **Stopped**, **Starting**, **Running (Provisioning)**, and finally **Running**.</span></span>

<span data-ttu-id="e31e5-180">이제 DC 서버가 성공적으로 프로비전되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-180">The DC server is now successfully provisioned.</span></span> <span data-ttu-id="e31e5-181">다음으로 이 DC 서버에 Active Directory 도메인을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-181">Next, you will configure the Active Directory domain on this DC server.</span></span>

## <a name="configure-the-domain-controller"></a><span data-ttu-id="e31e5-182">도메인 컨트롤러 구성</span><span class="sxs-lookup"><span data-stu-id="e31e5-182">Configure the domain controller</span></span>
<span data-ttu-id="e31e5-183">다음 단계에서는 corp.contoso.com에 대한 도메인 컨트롤러로 ContosoDC 컴퓨터를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-183">In the following steps, you configure the ContosoDC machine as a domain controller for corp.contoso.com.</span></span>

1. <span data-ttu-id="e31e5-184">포털에서 **ContosoDC** 컴퓨터를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-184">In the portal, select the **ContosoDC** machine.</span></span> <span data-ttu-id="e31e5-185">**대시보드** 탭에서 **연결**을 클릭하여 원격 데스크톱 액세스를 위한 RDP(원격 데스크톱) 파일을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-185">On the **Dashboard** tab, click **Connect** to open a remote desktop (RDP) file for remote desktop access.</span></span>
   
    ![가상 컴퓨터에 연결](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784622.png)
2. <span data-ttu-id="e31e5-187">구성된 관리자 계정(**\AzureAdmin**) 및 암호(**Contoso!000**)로 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-187">Sign in with your configured administrator account (**\AzureAdmin**) and password (**Contoso!000**).</span></span>
3. <span data-ttu-id="e31e5-188">기본적으로 **서버 관리자** 대시보드가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-188">By default, the **Server Manager** dashboard should be displayed.</span></span>
4. <span data-ttu-id="e31e5-189">대시보드에서 **역할 및 기능 추가** 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-189">Click the **Add roles and features** link on the dashboard.</span></span>
   
    ![서버 탐색기 역할 추가](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784623.png)
5. <span data-ttu-id="e31e5-191">**서버 역할** 섹션이 표시될 때까지 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-191">Click **Next** until you get to the **Server Roles** section.</span></span>
6. <span data-ttu-id="e31e5-192">**Active Directory 도메인 서비스** 및 **DNS 서버** 역할을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-192">Select the **Active Directory Domain Services** and **DNS Server** roles.</span></span> <span data-ttu-id="e31e5-193">메시지가 표시되면 이러한 역할에 필요한 기능을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-193">When prompted, add more features that these roles require.</span></span>
   
   > [!NOTE]
   > <span data-ttu-id="e31e5-194">고정 IP 주소가 없다는 유효성 검사 경고 페이지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-194">You will get a validation warning that there is no static IP address.</span></span> <span data-ttu-id="e31e5-195">구성을 테스트하는 경우 **계속**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-195">If you are testing the configuration, click **Continue**.</span></span> <span data-ttu-id="e31e5-196">프로덕션 시나리오의 경우 [PowerShell을 사용하여 도메인 컨트롤러 컴퓨터의 고정 IP 주소를 설정](../../../virtual-network/virtual-networks-reserved-private-ip.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-196">For production scenarios [use PowerShell to set the static IP address of the domain controller machine](../../../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
   > 
   > 
   
    ![역할 추가 대화 상자](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784624.png)
7. <span data-ttu-id="e31e5-198">**확인** 섹션에 도달할 때까지 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-198">Click **Next** until you reach the **Confirmation** section.</span></span> <span data-ttu-id="e31e5-199">**필요한 경우 자동으로 대상 서버 다시 시작** 확인란을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-199">Select the **Restart the destination server automatically if required** check box.</span></span>
8. <span data-ttu-id="e31e5-200">**Install**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-200">Click **Install**.</span></span>
9. <span data-ttu-id="e31e5-201">기능이 설치된 후 **서버 관리자** 대시보드로 돌아갑니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-201">After the features are installed, return to the **Server Manager** dashboard.</span></span>
10. <span data-ttu-id="e31e5-202">왼쪽 창에서 새 **AD DS** 옵션을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-202">Select the new **AD DS** option on the left pane.</span></span>
11. <span data-ttu-id="e31e5-203">노란색 경고 표시줄에서 **자세히** 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-203">Click the **More** link on the yellow warning bar.</span></span>
    
     ![DNS 서버 가상 컴퓨터의 AD DS 대화 상자](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784625.png)
12. <span data-ttu-id="e31e5-205">**모든 서버 작업 세부 정보** 대화 상자의 **작업** 열에서 **이 서버를 도메인 컨트롤러로 승격**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-205">In the **Action** column of the **All Server Task Details** dialog box, click **Promote this server to a domain controller**.</span></span>
13. <span data-ttu-id="e31e5-206">**Active Directory 도메인 서비스 구성 마법사**에서 다음 값을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-206">In the **Active Directory Domain Services Configuration Wizard**, use the following values:</span></span>
    
    | <span data-ttu-id="e31e5-207">Page</span><span class="sxs-lookup"><span data-stu-id="e31e5-207">Page</span></span> | <span data-ttu-id="e31e5-208">설정</span><span class="sxs-lookup"><span data-stu-id="e31e5-208">Setting</span></span> |
    | --- | --- |
    | <span data-ttu-id="e31e5-209">배포 구성</span><span class="sxs-lookup"><span data-stu-id="e31e5-209">Deployment Configuration</span></span> |<span data-ttu-id="e31e5-210">**새 포리스트 추가** = 선택됨</span><span class="sxs-lookup"><span data-stu-id="e31e5-210">**Add a new forest** = Selected</span></span><br/><span data-ttu-id="e31e5-211">**루트 도메인 이름** = corp.contoso.com</span><span class="sxs-lookup"><span data-stu-id="e31e5-211">**Root domain name** = corp.contoso.com</span></span> |
    | <span data-ttu-id="e31e5-212">도메인 컨트롤러 옵션</span><span class="sxs-lookup"><span data-stu-id="e31e5-212">Domain Controller Options</span></span> |<span data-ttu-id="e31e5-213">**암호** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-213">**Password** = Contoso!000</span></span><br/><span data-ttu-id="e31e5-214">**암호 확인** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-214">**Confirm Password** = Contoso!000</span></span> |
14. <span data-ttu-id="e31e5-215">**다음**을 클릭하여 마법사의 다른 페이지를 진행합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-215">Click **Next** to go through the other pages in the wizard.</span></span> <span data-ttu-id="e31e5-216">**필수 구성 요소 확인** 페이지에서 다음 메시지가 표시되는지 확인합니다. **모든 필수 구성 요소 검사를 마쳤습니다**.</span><span class="sxs-lookup"><span data-stu-id="e31e5-216">On the **Prerequisites Check** page, verify that you see the following message: **All prerequisite checks passed successfully**.</span></span> <span data-ttu-id="e31e5-217">해당하는 모든 경고 메시지를 검토해야 하지만 설치는 계속할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-217">Note that you should review all applicable warning messages, but it is possible to continue with the installation.</span></span>
15. <span data-ttu-id="e31e5-218">**Install**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-218">Click **Install**.</span></span> <span data-ttu-id="e31e5-219">**ContosoDC** 가상 컴퓨터가 자동으로 다시 부팅됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-219">The **ContosoDC** virtual machine will automatically reboot.</span></span>

## <a name="configure-domain-accounts"></a><span data-ttu-id="e31e5-220">도메인 계정 구성</span><span class="sxs-lookup"><span data-stu-id="e31e5-220">Configure domain accounts</span></span>
<span data-ttu-id="e31e5-221">다음 단계에서는 나중에 사용하기 위해 Active Directory 계정을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-221">The next steps configure the Active Directory accounts for later use.</span></span>

1. <span data-ttu-id="e31e5-222">**ContosoDC** 컴퓨터에 다시 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-222">Sign back in to the **ContosoDC** machine.</span></span>
2. <span data-ttu-id="e31e5-223">**서버 관리자**에서 **도구** > **Active Directory 관리 센터**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-223">In **Server Manager**, click **Tools** > **Active Directory Administrative Center**.</span></span>
   
    ![Active Directory 관리 센터](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784626.png)
3. <span data-ttu-id="e31e5-225">**Active Directory 관리 센터**의 왼쪽 창에서 **corp(로컬)**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-225">In the **Active Directory Administrative Center**, select **corp (local)** in the left pane.</span></span>
4. <span data-ttu-id="e31e5-226">오른쪽 **작업** 창에서 **새로 만들기** > **사용자**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-226">On the right **Tasks** pane, click **New** > **User**.</span></span> <span data-ttu-id="e31e5-227">다음 설정을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-227">Use the following settings:</span></span>
   
   | <span data-ttu-id="e31e5-228">설정</span><span class="sxs-lookup"><span data-stu-id="e31e5-228">Setting</span></span> | <span data-ttu-id="e31e5-229">값</span><span class="sxs-lookup"><span data-stu-id="e31e5-229">Value</span></span> |
   | --- | --- |
   | <span data-ttu-id="e31e5-230">**이름**</span><span class="sxs-lookup"><span data-stu-id="e31e5-230">**First Name**</span></span> |<span data-ttu-id="e31e5-231">Install</span><span class="sxs-lookup"><span data-stu-id="e31e5-231">Install</span></span> |
   | <span data-ttu-id="e31e5-232">**사용자 SamAccountName**</span><span class="sxs-lookup"><span data-stu-id="e31e5-232">**User SamAccountName**</span></span> |<span data-ttu-id="e31e5-233">Install</span><span class="sxs-lookup"><span data-stu-id="e31e5-233">Install</span></span> |
   | <span data-ttu-id="e31e5-234">**암호**</span><span class="sxs-lookup"><span data-stu-id="e31e5-234">**Password**</span></span> |<span data-ttu-id="e31e5-235">Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-235">Contoso!000</span></span> |
   | <span data-ttu-id="e31e5-236">**암호 확인**</span><span class="sxs-lookup"><span data-stu-id="e31e5-236">**Confirm password**</span></span> |<span data-ttu-id="e31e5-237">Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-237">Contoso!000</span></span> |
   | <span data-ttu-id="e31e5-238">**기타 암호 옵션**</span><span class="sxs-lookup"><span data-stu-id="e31e5-238">**Other password options**</span></span> |<span data-ttu-id="e31e5-239">선택</span><span class="sxs-lookup"><span data-stu-id="e31e5-239">Selected</span></span> |
   | <span data-ttu-id="e31e5-240">**암호 사용 기간 제한 없음**</span><span class="sxs-lookup"><span data-stu-id="e31e5-240">**Password never expires**</span></span> |<span data-ttu-id="e31e5-241">선택</span><span class="sxs-lookup"><span data-stu-id="e31e5-241">Checked</span></span> |
5. <span data-ttu-id="e31e5-242">**확인**을 클릭하여 **Install** 사용자를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-242">Click **OK** to create the **Install** user.</span></span> <span data-ttu-id="e31e5-243">이 계정이 장애 조치(Failover) 클러스터 및 가용성 그룹을 구성하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-243">This account will be used to configure the failover cluster and the availability group.</span></span>
6. <span data-ttu-id="e31e5-244">동일한 단계로 두 개의 추가 사용자 **CORP\SQLSvc1** 및 **CORP\SQLSvc2**를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-244">Create two additional users, **CORP\SQLSvc1** and **CORP\SQLSvc2**, with the same steps.</span></span> <span data-ttu-id="e31e5-245">이러한 계정은 SQL Server 인스턴스에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-245">These accounts will be used for the SQL Server instances.</span></span> <span data-ttu-id="e31e5-246">그다음에 Windows 장애 조치(failover) 클러스터링을 구성하는 데 필요한 권한을 **CORP\Install**에 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-246">Next, you need to give **CORP\Install** the necessary permissions to configure Windows failover clustering.</span></span>
7. <span data-ttu-id="e31e5-247">**Active Directory 관리 센터**의 왼쪽 창에서 **corp(로컬)**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-247">In the **Active Directory Administrative Center**, click **corp (local)** in the left pane.</span></span> <span data-ttu-id="e31e5-248">**작업** 창에서 **속성**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-248">In the **Tasks** pane, click **Properties**.</span></span>
   
    ![CORP 사용자 속성](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784627.png)
8. <span data-ttu-id="e31e5-250">**확장**을 선택한 후 **보안** 탭에서 **고급** 단추를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-250">Select **Extensions**, and then click the **Advanced** button on the **Security** tab.</span></span>
9. <span data-ttu-id="e31e5-251">**corp 고급 보안 설정** 대화 상자에서 **추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-251">In the **Advanced Security Settings for corp** dialog box, click **Add**.</span></span>
10. <span data-ttu-id="e31e5-252">**보안 주체 선택**을 클릭하고, **CORP\Install**을 검색하고 나서, **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-252">Click **Select a principal**, search for **CORP\Install**, and then click **OK**.</span></span>
11. <span data-ttu-id="e31e5-253">**모든 속성 읽기** 및 **컴퓨터 개체 만들기** 권한을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-253">Select the **Read all properties** and **Create Computer objects** permissions.</span></span>
    
     ![Corp 사용자 권한](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784628.png)
12. <span data-ttu-id="e31e5-255">**확인**을 클릭한 후 **확인**을 한 번 더 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-255">Click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="e31e5-256">corp 속성 창을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-256">Close the corp properties window.</span></span>

<span data-ttu-id="e31e5-257">이제 Active Directory 및 사용자 개체를 구성했으므로 3개의 SQL Server 가상 컴퓨터를 만들고 이 도메인에 가입시킵니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-257">Now that you configured Active Directory and the user objects, you will create three SQL Server virtual machines and join them to this domain.</span></span>

## <a name="create-the-sql-server-virtual-machines"></a><span data-ttu-id="e31e5-258">SQL Server 가상 컴퓨터 만들기</span><span class="sxs-lookup"><span data-stu-id="e31e5-258">Create the SQL Server virtual machines</span></span>
<span data-ttu-id="e31e5-259">3개의 가상 컴퓨터를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-259">Create three virtual machines.</span></span> <span data-ttu-id="e31e5-260">하나는 클러스터 노드에 사용되고 두 개는 SQL Server에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-260">One is for a cluster node and two are for SQL Server.</span></span> <span data-ttu-id="e31e5-261">각 가상 컴퓨터를 만들려면 Azure 클래식 포털로 돌아가 **새로 만들기**,  > **계산** > **가상 컴퓨터** > **갤러리에서**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-261">To create each of the virtual machines, go back to the Azure classic portal, click **New** > **Compute** > **Virtual Machine** > **From Gallery**.</span></span> <span data-ttu-id="e31e5-262">다음으로 아래 표의 템플릿을 사용하면 가상 컴퓨터를 만드는 데 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-262">Then, use the templates in the following table to help you create the virtual machines.</span></span>

| <span data-ttu-id="e31e5-263">Page</span><span class="sxs-lookup"><span data-stu-id="e31e5-263">Page</span></span> | <span data-ttu-id="e31e5-264">VM1</span><span class="sxs-lookup"><span data-stu-id="e31e5-264">VM1</span></span> | <span data-ttu-id="e31e5-265">VM2</span><span class="sxs-lookup"><span data-stu-id="e31e5-265">VM2</span></span> | <span data-ttu-id="e31e5-266">VM3</span><span class="sxs-lookup"><span data-stu-id="e31e5-266">VM3</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="e31e5-267">가상 컴퓨터 운영 체제 선택</span><span class="sxs-lookup"><span data-stu-id="e31e5-267">Select the virtual machine operating system</span></span> |<span data-ttu-id="e31e5-268">**Windows Server 2012 R2 Datacenter**</span><span class="sxs-lookup"><span data-stu-id="e31e5-268">**Windows Server 2012 R2 Datacenter**</span></span> |<span data-ttu-id="e31e5-269">**SQL Server 2014 RTM Enterprise**</span><span class="sxs-lookup"><span data-stu-id="e31e5-269">**SQL Server 2014 RTM Enterprise**</span></span> |<span data-ttu-id="e31e5-270">**SQL Server 2014 RTM Enterprise**</span><span class="sxs-lookup"><span data-stu-id="e31e5-270">**SQL Server 2014 RTM Enterprise**</span></span> |
| <span data-ttu-id="e31e5-271">가상 컴퓨터 구성</span><span class="sxs-lookup"><span data-stu-id="e31e5-271">Virtual machine configuration</span></span> |<span data-ttu-id="e31e5-272">**버전 릴리스 날짜** = (latest)</span><span class="sxs-lookup"><span data-stu-id="e31e5-272">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="e31e5-273">**가상 컴퓨터 이름** = ContosoWSFCNode</span><span class="sxs-lookup"><span data-stu-id="e31e5-273">**VIRTUAL MACHINE NAME** = ContosoWSFCNode</span></span><br/><span data-ttu-id="e31e5-274">**계층** = 표준</span><span class="sxs-lookup"><span data-stu-id="e31e5-274">**TIER** = STANDARD</span></span><br/><span data-ttu-id="e31e5-275">**크기** = A2(2코어)</span><span class="sxs-lookup"><span data-stu-id="e31e5-275">**SIZE** = A2 (2 cores)</span></span><br/><span data-ttu-id="e31e5-276">**새 사용자 이름** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="e31e5-276">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="e31e5-277">**새 암호** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-277">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="e31e5-278">**확인** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-278">**CONFIRM** = Contoso!000</span></span> |<span data-ttu-id="e31e5-279">**버전 릴리스 날짜** = (latest)</span><span class="sxs-lookup"><span data-stu-id="e31e5-279">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="e31e5-280">**가상 컴퓨터 이름** = ContosoSQL1</span><span class="sxs-lookup"><span data-stu-id="e31e5-280">**VIRTUAL MACHINE NAME** = ContosoSQL1</span></span><br/><span data-ttu-id="e31e5-281">**계층** = 표준</span><span class="sxs-lookup"><span data-stu-id="e31e5-281">**TIER** = STANDARD</span></span><br/><span data-ttu-id="e31e5-282">**크기** = A3(4코어)</span><span class="sxs-lookup"><span data-stu-id="e31e5-282">**SIZE** = A3 (4 cores)</span></span><br/><span data-ttu-id="e31e5-283">**새 사용자 이름** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="e31e5-283">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="e31e5-284">**새 암호** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-284">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="e31e5-285">**확인** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-285">**CONFIRM** = Contoso!000</span></span> |<span data-ttu-id="e31e5-286">**버전 릴리스 날짜** = (latest)</span><span class="sxs-lookup"><span data-stu-id="e31e5-286">**VERSION RELEASE DATE** = (latest)</span></span><br/><span data-ttu-id="e31e5-287">**가상 컴퓨터 이름** = ContosoSQL2</span><span class="sxs-lookup"><span data-stu-id="e31e5-287">**VIRTUAL MACHINE NAME** = ContosoSQL2</span></span><br/><span data-ttu-id="e31e5-288">**계층** = 표준</span><span class="sxs-lookup"><span data-stu-id="e31e5-288">**TIER** = STANDARD</span></span><br/><span data-ttu-id="e31e5-289">**크기** = A3(4코어)</span><span class="sxs-lookup"><span data-stu-id="e31e5-289">**SIZE** = A3 (4 cores)</span></span><br/><span data-ttu-id="e31e5-290">**새 사용자 이름** = AzureAdmin</span><span class="sxs-lookup"><span data-stu-id="e31e5-290">**NEW USER NAME** = AzureAdmin</span></span><br/><span data-ttu-id="e31e5-291">**새 암호** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-291">**NEW PASSWORD** = Contoso!000</span></span><br/><span data-ttu-id="e31e5-292">**확인** = Contoso!000</span><span class="sxs-lookup"><span data-stu-id="e31e5-292">**CONFIRM** = Contoso!000</span></span> |
| <span data-ttu-id="e31e5-293">가상 컴퓨터 구성</span><span class="sxs-lookup"><span data-stu-id="e31e5-293">Virtual machine configuration</span></span> |<span data-ttu-id="e31e5-294">**클라우드 서비스** = 이전에 만든 고유한 클라우드 서비스 DNS 이름(예: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="e31e5-294">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="e31e5-295">**지역/선호도 그룹/가상 네트워크** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="e31e5-295">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="e31e5-296">**가상 네트워크 서브넷** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="e31e5-296">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="e31e5-297"> **계정** = 자동으로 생성된 Storage 계정 사용</span><span class="sxs-lookup"><span data-stu-id="e31e5-297">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="e31e5-298">**가용성 집합** = 가용성 집합 만들기</span><span class="sxs-lookup"><span data-stu-id="e31e5-298">**AVAILABILITY SET** = Create an availability set</span></span><br/><span data-ttu-id="e31e5-299">**가용성 집합 이름** = SQLHADR</span><span class="sxs-lookup"><span data-stu-id="e31e5-299">**AVAILABILITY SET NAME** = SQLHADR</span></span> |<span data-ttu-id="e31e5-300">**클라우드 서비스** = 이전에 만든 고유한 클라우드 서비스 DNS 이름(예: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="e31e5-300">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="e31e5-301">**지역/선호도 그룹/가상 네트워크** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="e31e5-301">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="e31e5-302">**가상 네트워크 서브넷** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="e31e5-302">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="e31e5-303"> **계정** = 자동으로 생성된 Storage 계정 사용</span><span class="sxs-lookup"><span data-stu-id="e31e5-303">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="e31e5-304">**가용성 집합** = SQLHADR(컴퓨터를 만든 후 가용성 집합을 구성할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-304">**AVAILABILITY SET** = SQLHADR (You can also configure the availability set after the machine has been created.</span></span> <span data-ttu-id="e31e5-305">SQLHADR 가용성 집합에 3개의 컴퓨터를 모두 할당합니다.)</span><span class="sxs-lookup"><span data-stu-id="e31e5-305">All three machines should be assigned to the SQLHADR availability set.)</span></span> |<span data-ttu-id="e31e5-306">**클라우드 서비스** = 이전에 만든 고유한 클라우드 서비스 DNS 이름(예: ContosoDC123)</span><span class="sxs-lookup"><span data-stu-id="e31e5-306">**CLOUD SERVICE** = Previously Created Unique Cloud Service DNS Name (ex: ContosoDC123)</span></span><br/><span data-ttu-id="e31e5-307">**지역/선호도 그룹/가상 네트워크** = ContosoNET</span><span class="sxs-lookup"><span data-stu-id="e31e5-307">**REGION/AFFINITY GROUP/VIRTUAL NETWORK** = ContosoNET</span></span><br/><span data-ttu-id="e31e5-308">**가상 네트워크 서브넷** = Back(10.10.2.0/24)</span><span class="sxs-lookup"><span data-stu-id="e31e5-308">**VIRTUAL NETWORK SUBNETS** = Back(10.10.2.0/24)</span></span><br/><span data-ttu-id="e31e5-309"> **계정** = 자동으로 생성된 Storage 계정 사용</span><span class="sxs-lookup"><span data-stu-id="e31e5-309">**STORAGE ACCOUNT** = Use an automatically generated storage account</span></span><br/><span data-ttu-id="e31e5-310">**가용성 집합** = SQLHADR(컴퓨터를 만든 후 가용성 집합을 구성할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-310">**AVAILABILITY SET** = SQLHADR (You can also configure the availability set after the machine has been created.</span></span> <span data-ttu-id="e31e5-311">SQLHADR 가용성 집합에 3개의 컴퓨터를 모두 할당합니다.)</span><span class="sxs-lookup"><span data-stu-id="e31e5-311">All three machines should be assigned to the SQLHADR availability set.)</span></span> |
| <span data-ttu-id="e31e5-312">가상 컴퓨터 옵션</span><span class="sxs-lookup"><span data-stu-id="e31e5-312">Virtual machine options</span></span> |<span data-ttu-id="e31e5-313">기본값 사용</span><span class="sxs-lookup"><span data-stu-id="e31e5-313">Use defaults</span></span> |<span data-ttu-id="e31e5-314">기본값 사용</span><span class="sxs-lookup"><span data-stu-id="e31e5-314">Use defaults</span></span> |<span data-ttu-id="e31e5-315">기본값 사용</span><span class="sxs-lookup"><span data-stu-id="e31e5-315">Use defaults</span></span> |

<br/>

> [!NOTE]
> <span data-ttu-id="e31e5-316">기본 계층 컴퓨터는 부하가 분산된 끝점을 지원하지 않기 때문에 이전 구성은 표준 계층 가상 컴퓨터를 제안합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-316">The previous configuration suggests STANDARD tier virtual machines, because BASIC tier machines do not support load-balanced endpoints.</span></span> <span data-ttu-id="e31e5-317">가용성 그룹 수신기를 만들려면 부하가 분산된 끝점이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-317">You need load-balanced endpoints later to create an availability group listener.</span></span> <span data-ttu-id="e31e5-318">또한 여기에서 제안하는 컴퓨터 크기는 Azure Virtual Machines에서 가용성 그룹 테스트를 위해 계획된 것입니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-318">Also, the machine sizes that are suggested here are meant for testing availability groups in Azure Virtual Machines.</span></span> <span data-ttu-id="e31e5-319">프로덕션 작업에서 최상의 성능을 얻으려면 [Azure 가상 컴퓨터의 SQL Server에 대한 성능 모범 사례](../sql/virtual-machines-windows-sql-performance.md)에서 SQL Server 컴퓨터 크기 및 구성에 대한 권장 사항을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-319">For the best performance on production workloads, see the recommendations for SQL Server machine sizes and configuration in [Performance best practices for SQL Server in Azure Virtual Machines](../sql/virtual-machines-windows-sql-performance.md).</span></span>
> 
> 

<span data-ttu-id="e31e5-320">3개의 가상 컴퓨터가 완전히 프로비전된 후 가상 컴퓨터를 **corp.contoso.com** 도메인에 가입시키고 컴퓨터에 CORP\Install 관리 권한을 부여해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-320">After the three virtual machines are fully provisioned, you need to join them to the **corp.contoso.com** domain and grant CORP\Install administrative rights to the machines.</span></span> <span data-ttu-id="e31e5-321">이렇게 하려면 3개의 가상 컴퓨터 각각에 대해 다음 단계를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-321">To do this, use the following steps for each of the three virtual machines.</span></span>

1. <span data-ttu-id="e31e5-322">먼저 기본 설정된 DNS 서버 주소를 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-322">First, change the preferred DNS server address.</span></span> <span data-ttu-id="e31e5-323">목록에서 가상 컴퓨터를 선택하고 **연결** 단추를 클릭하여 각 가상 컴퓨터의 RDP 파일을 로컬 디렉터리로 다운로드합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-323">Download each virtual machine's RDP file to your local directory by selecting the virtual machine in the list and clicking the **Connect** button.</span></span> <span data-ttu-id="e31e5-324">가상 컴퓨터를 선택하려면 다음 스크린샷과 같이 행의 첫 번째 셀을 제외하고 아무 곳이나 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-324">To select a virtual machine, click anywhere but the first cell in the row, as shown in the following screenshot.</span></span>
   
    ![RDP 파일 다운로드](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC664953.jpg)
2. <span data-ttu-id="e31e5-326">다운로드한 RDP 파일을 열고 구성된 관리자 계정(**BUILTIN\AzureAdmin**) 및 암호(**Contoso!000**)로 가상 컴퓨터에 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-326">Open the RDP file that you downloaded, and sign in to the virtual machine by using your configured administrator account (**BUILTIN\AzureAdmin**) and password (**Contoso!000**).</span></span>
3. <span data-ttu-id="e31e5-327">로그인한 후 **서버 관리자** 대시보드가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-327">After you sign in, you should see the **Server Manager** dashboard.</span></span> <span data-ttu-id="e31e5-328">왼쪽 창에서 **로컬 서버** 를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-328">Click **Local Server** in the left pane.</span></span>
4. <span data-ttu-id="e31e5-329">**DHCP에 의해 할당된 IPv4 주소, IPv6 사용 가능** 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-329">Click the **IPv4 address assigned by DHCP, IPv6 enabled** link.</span></span>
5. <span data-ttu-id="e31e5-330">**네트워크 연결** 대화 상자에서 네트워크 아이콘을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-330">In the **Network Connections** dialog box, click the network icon.</span></span>
   
    ![가상 컴퓨터 기본 설정 DNS 서버 변경](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784629.png)
6. <span data-ttu-id="e31e5-332">명령 모음에서 **이 연결의 설정 변경**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-332">On the command bar, click **Change the settings of this connection**.</span></span> <span data-ttu-id="e31e5-333">창의 크기에 따라 이 명령을 표시하기 위해 이중 오른쪽 화살표를 클릭해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-333">(Depending on the size of your window, you might have to click the double right arrow to see this command).</span></span>
7. <span data-ttu-id="e31e5-334">**인터넷 프로토콜 버전 4(TCP/IPv4)**를 선택하고 **속성**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-334">Select **Internet Protocol Version 4 (TCP/IPv4)**, and then click **Properties**.</span></span>
8. <span data-ttu-id="e31e5-335">**다음 DNS 서버 주소 사용**을 선택하고 **기본 설정 DNS 서버**에 **10.10.2.4**를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-335">Select **Use the following DNS server addresses** and then specify **10.10.2.4** in **Preferred DNS server**.</span></span>
9. <span data-ttu-id="e31e5-336">**10.10.2.4** 주소는 Azure 가상 네트워크에서 10.10.2.0/24 서브넷의 가상 컴퓨터에 할당된 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-336">The **10.10.2.4** address is the address that's assigned to a virtual machine in the 10.10.2.0/24 subnet in an Azure virtual network.</span></span> <span data-ttu-id="e31e5-337">가상 컴퓨터는 **ContosoDC**입니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-337">That virtual machine is **ContosoDC**.</span></span> <span data-ttu-id="e31e5-338">**ContosoDC**의 IP 주소를 확인하려면 다음 스크린샷과 같이 명령 프롬프트 창에서 **nslookup contosodc**를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-338">To verify **ContosoDC**'s IP address, use **nslookup contosodc** in the command prompt window, as shown in the following screenshot.</span></span>
   
    ![NSLOOKUP을 사용하여 도메인 컨트롤러에 대한 IP 주소 찾기](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC664954.jpg)
10. <span data-ttu-id="e31e5-340">**확인** > **닫기**를 클릭하여 변경 내용을 커밋합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-340">Click **OK** > **Close** to commit the changes.</span></span> <span data-ttu-id="e31e5-341">이제 가상 컴퓨터를 **corp.contoso.com**에 가입시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-341">You can now join the virtual machine to **corp.contoso.com**.</span></span>
11. <span data-ttu-id="e31e5-342">**로컬 서버** 창으로 돌아가 **WORKGROUP** 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-342">Back in the **Local Server** window, click the **WORKGROUP** link.</span></span>
12. <span data-ttu-id="e31e5-343">**컴퓨터 이름** 섹션에서 **변경**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-343">In the **Computer Name** section, click **Change**.</span></span>
13. <span data-ttu-id="e31e5-344">**도메인** 확인란을 선택하고, 텍스트 상자에 **corp.contoso.com**을 입력하고 나서, **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-344">Select the **Domain** check box, type **corp.contoso.com** in the text box, and then click **OK**.</span></span>
14. <span data-ttu-id="e31e5-345">**Windows 보안** 대화 상자에서 기본 도메인 관리자 계정에 대한 자격 증명(**CORP\AzureAdmin**) 및 암호(**Contoso!000**)를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-345">In the **Windows Security** dialog box, specify the credentials for the default domain administrator account (**CORP\AzureAdmin**) and the password (**Contoso!000**).</span></span>
15. <span data-ttu-id="e31e5-346">"corp.contoso.com 도메인 시작" 메시지가 표시되면 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-346">When you see the "Welcome to the corp.contoso.com domain" message, click **OK**.</span></span>
16. <span data-ttu-id="e31e5-347">대화 상자에서 **닫기** > **지금 다시 시작**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-347">Click **Close** > **Restart Now** in the dialog box.</span></span>

### <a name="add-the-corpinstall-user-as-an-administrator-on-each-virtual-machine"></a><span data-ttu-id="e31e5-348">각 가상 컴퓨터에서 Corp\Install 사용자를 관리자로 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-348">Add the Corp\Install user as an administrator on each virtual machine</span></span>
1. <span data-ttu-id="e31e5-349">가상 컴퓨터가 다시 시작될 때까지 기다렸다가 RDP 파일을 다시 열어 **BUILTIN\AzureAdmin** 계정으로 가상 컴퓨터에 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-349">Wait until the virtual machine restarts, and then open the RDP file again to sign in to the virtual machine by using the **BUILTIN\AzureAdmin** account.</span></span>
2. <span data-ttu-id="e31e5-350">**서버 관리자**에서 **도구** > **컴퓨터 관리**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-350">In **Server Manager** click **Tools** > **Computer Management**.</span></span>
   
    ![컴퓨터 관리](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784630.png)
3. <span data-ttu-id="e31e5-352">**컴퓨터 관리** 대화 상자에서 **로컬 사용자 및 그룹**을 확장한 후 **그룹**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-352">In the **Computer Management** dialog box, expand **Local Users and Groups**, and then click **Groups**.</span></span>
4. <span data-ttu-id="e31e5-353">**Administrators** 그룹을 두 번 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-353">Double-click the **Administrators** group.</span></span>
5. <span data-ttu-id="e31e5-354">**Administrators 속성** 대화 상자에서 **추가** 단추를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-354">In the **Administrators Properties** dialog box, click the **Add** button.</span></span>
6. <span data-ttu-id="e31e5-355">**CORP\Install** 사용자를 입력한 후 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-355">Enter the user **CORP\Install**, and then click **OK**.</span></span> <span data-ttu-id="e31e5-356">자격 증명에 대한 메시지가 표시되면 **AzureAdmin** 계정과 **Contoso!000** 암호를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-356">When prompted for credentials, use the **AzureAdmin** account with the **Contoso!000** password.</span></span>
7. <span data-ttu-id="e31e5-357">**확인**을 클릭하여 **Administrator 속성** 대화 상자를 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-357">Click **OK** to close the **Administrator Properties** dialog box.</span></span>

### <a name="add-the-failover-clustering-feature-to-each-virtual-machine"></a><span data-ttu-id="e31e5-358">장애 조치(Failover) 클러스터링 기능을 각 가상 컴퓨터에 추가</span><span class="sxs-lookup"><span data-stu-id="e31e5-358">Add the Failover Clustering feature to each virtual machine</span></span>
1. <span data-ttu-id="e31e5-359">**서버 관리자** 대시보드에서 **역할 및 기능 추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-359">In the **Server Manager** dashboard, click **Add roles and features**.</span></span>
2. <span data-ttu-id="e31e5-360">**할 및 기능 추가 마법사**에서 **기능** 페이지가 표시될 때까지 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-360">In the **Add Roles and Features Wizard**, click **Next** until you get to the **Features** page.</span></span>
3. <span data-ttu-id="e31e5-361">**장애 조치 클러스터링**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-361">Select **Failover Clustering**.</span></span> <span data-ttu-id="e31e5-362">메시지가 표시되면 다른 종속 기능을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-362">When prompted, add other dependent features.</span></span>
   
    ![장애 조치(Failover) 클러스터링 기능을 가상 컴퓨터에 추가](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784631.png)
4. <span data-ttu-id="e31e5-364">**다음**을 클릭한 후 **확인** 페이지에서 **설치**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-364">Click **Next**, and then click **Install** on the **Confirmation** page.</span></span>
5. <span data-ttu-id="e31e5-365">**장애 조치 클러스터링** 기능 설치가 완료되면 **닫기**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-365">When the **Failover Clustering** feature installation is finished, click **Close**.</span></span>
6. <span data-ttu-id="e31e5-366">가상 컴퓨터에서 로그아웃합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-366">Sign out of the virtual machine.</span></span>
7. <span data-ttu-id="e31e5-367">**ContosoWSFCNode**, **ContosoSQL1** 및 **ContosoSQL2**의 세 가지 서버에 대해 모두 이 섹션의 단계를 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-367">Repeat the steps in this section for all three servers: **ContosoWSFCNode**, **ContosoSQL1**, and **ContosoSQL2**.</span></span>

<span data-ttu-id="e31e5-368">이제 SQL Server 가상 컴퓨터가 프로비전되어 실행 중이지만 각 가상 컴퓨터에는 SQL Server에 대한 기본 옵션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-368">The SQL Server virtual machines are now provisioned and running, but each has the default options for SQL Server.</span></span>

## <a name="create-the-failover-cluster"></a><span data-ttu-id="e31e5-369">장애 조치 클러스터 만들기</span><span class="sxs-lookup"><span data-stu-id="e31e5-369">Create the failover cluster</span></span>
<span data-ttu-id="e31e5-370">이 섹션에서는 나중에 만들 가용성 그룹을 호스트하는 장애 조치(failover) 클러스터를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-370">In this section, you create the failover cluster that will host the availability group that you will create later.</span></span> <span data-ttu-id="e31e5-371">이제 장애 조치(failover) 클러스터에서 사용할 3개의 가상 컴퓨터 각각에 대해 다음이 완료되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-371">By now, you should have done the following to each of the three virtual machines that you will use in the failover cluster:</span></span>

* <span data-ttu-id="e31e5-372">Azure에서 가상 컴퓨터가 완전히 프로비전됨</span><span class="sxs-lookup"><span data-stu-id="e31e5-372">Fully provisioned the virtual machine in Azure</span></span>
* <span data-ttu-id="e31e5-373">가상 컴퓨터가 도메인에 가입됨</span><span class="sxs-lookup"><span data-stu-id="e31e5-373">Joined the virtual machine to the domain</span></span>
* <span data-ttu-id="e31e5-374">로컬 관리자 그룹에 **CORP\Install** 추가됨</span><span class="sxs-lookup"><span data-stu-id="e31e5-374">Added **CORP\Install** to the local Administrators group</span></span>
* <span data-ttu-id="e31e5-375">장애 조치(failover) 클러스터링 기능이 추가됨</span><span class="sxs-lookup"><span data-stu-id="e31e5-375">Added the failover clustering feature</span></span>

<span data-ttu-id="e31e5-376">각 가상 컴퓨터에서 이러한 모든 필수 구성 요소가 준비되어야 장애 조치(failover) 클러스터에 가입할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-376">All these are prerequisites on each virtual machine before you can join it to the failover cluster.</span></span>

<span data-ttu-id="e31e5-377">또한 Azure 가상 네트워크는 온-프레미스 네트워크와 다르게 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-377">Also, note that the Azure virtual network does not behave in the same way as an on-premises network.</span></span> <span data-ttu-id="e31e5-378">다음 순서로 클러스터를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-378">You need to create the cluster in the following order:</span></span>

1. <span data-ttu-id="e31e5-379">하나의 노드에 단일 노드 클러스터를 만듭니다(**ContosoSQL1**).</span><span class="sxs-lookup"><span data-stu-id="e31e5-379">Create a single-node cluster on one node (**ContosoSQL1**).</span></span>
2. <span data-ttu-id="e31e5-380">클러스터 IP 주소를 사용하지 않는 IP 주소로 수정합니다(**10.10.2.101**).</span><span class="sxs-lookup"><span data-stu-id="e31e5-380">Modify the cluster IP address to an unused IP address (**10.10.2.101**).</span></span>
3. <span data-ttu-id="e31e5-381">클러스터 이름을 온라인 상태로 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-381">Bring the cluster name online.</span></span>
4. <span data-ttu-id="e31e5-382">다른 노드(**ContosoSQL2** 및 **ContosoWSFCNode**)를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-382">Add the other nodes (**ContosoSQL2** and **ContosoWSFCNode**).</span></span>

<span data-ttu-id="e31e5-383">다음 단계를 사용하여 클러스터를 완전히 구성하는 작업을 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-383">Use the following steps to complete the tasks that fully configure the cluster.</span></span>

1. <span data-ttu-id="e31e5-384">**ContosoSQL1**에 대한 RDP 파일을 열고 도메인 계정 **CORP\Install**을 사용하여 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-384">Open the RDP file for **ContosoSQL1**, and sign in by using the domain account **CORP\Install**.</span></span>
2. <span data-ttu-id="e31e5-385">**서버 관리자** 대시보드에서 **도구** > **장애 조치(Failover) 클러스터 관리자**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-385">In the **Server Manager** dashboard, click **Tools** > **Failover Cluster Manager**.</span></span>
3. <span data-ttu-id="e31e5-386">왼쪽 창에서 **장애 조치(Failover) 클러스터 관리자**를 마우스 오른쪽 단추로 클릭하고 다음 스크린샷과 같이 **클러스터 만들기**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-386">In the left pane, right-click **Failover Cluster Manager**, and then click **Create a Cluster**, as shown in the following screenshot.</span></span>
   
    ![클러스터 만들기](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784632.png)
4. <span data-ttu-id="e31e5-388">클러스터 만들기 마법사에서 페이지를 단계별로 진행하고 다음 표의 설정을 사용하여 1노드 클러스터를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-388">In the Create Cluster Wizard, create a one-node cluster by stepping through the pages and using the settings in the following table:</span></span>
   
   | <span data-ttu-id="e31e5-389">Page</span><span class="sxs-lookup"><span data-stu-id="e31e5-389">Page</span></span> | <span data-ttu-id="e31e5-390">설정</span><span class="sxs-lookup"><span data-stu-id="e31e5-390">Settings</span></span> |
   | --- | --- |
   | <span data-ttu-id="e31e5-391">시작하기 전에</span><span class="sxs-lookup"><span data-stu-id="e31e5-391">Before You Begin</span></span> |<span data-ttu-id="e31e5-392">기본값 사용</span><span class="sxs-lookup"><span data-stu-id="e31e5-392">Use defaults</span></span> |
   | <span data-ttu-id="e31e5-393">서버 선택</span><span class="sxs-lookup"><span data-stu-id="e31e5-393">Select Servers</span></span> |<span data-ttu-id="e31e5-394">**서버 이름 입력**에 **ContosoSQL1**을 입력하고 **추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-394">Type **ContosoSQL1** in **Enter server name** and click **Add**</span></span> |
   | <span data-ttu-id="e31e5-395">유효성 검사 경고</span><span class="sxs-lookup"><span data-stu-id="e31e5-395">Validation Warning</span></span> |<span data-ttu-id="e31e5-396">**아니요. 이 클러스터에 대한 Microsoft의 지원이 필요 없으므로 유효성 검사 테스트를 실행하지 않습니다. [다음]을 클릭하면 클러스터 만들기를 계속합니다.**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-396">Select **No. I do not require support from Microsoft for this cluster, and therefore do not want to run the validation tests. When I click Next, continue creating the cluster**.</span></span> |
   | <span data-ttu-id="e31e5-397">클러스터 관리를 위한 액세스 지점</span><span class="sxs-lookup"><span data-stu-id="e31e5-397">Access Point for Administering the Cluster</span></span> |<span data-ttu-id="e31e5-398">**클러스터 이름**에 **Cluster1**을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-398">Type **Cluster1** in **Cluster Name**</span></span> |
   | <span data-ttu-id="e31e5-399">다음</span><span class="sxs-lookup"><span data-stu-id="e31e5-399">Confirmation</span></span> |<span data-ttu-id="e31e5-400">저장소 공간을 사용하지 않는 경우 기본값을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-400">Use defaults unless you are using Storage Spaces.</span></span> <span data-ttu-id="e31e5-401">이 표 다음에 있는 경고를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-401">See the warning following this table.</span></span> |
   
   > [!WARNING]
   > <span data-ttu-id="e31e5-402">여러 디스크를 저장소 풀로 그룹화하는 [저장소 공간](https://technet.microsoft.com/library/hh831739)을 사용 중인 경우 **확인** 페이지에서 **클러스터에 사용할 수 있는 모든 저장소를 추가하세요** 확인란을 선택 취소해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-402">If you are using [Storage Spaces](https://technet.microsoft.com/library/hh831739), which groups multiple disks into storage pools, you must clear the **Add all eligible storage to the cluster** check box on the **Confirmation** page.</span></span> <span data-ttu-id="e31e5-403">이 옵션을 선택 취소하지 않으면 가상 디스크가 클러스터 프로세스 중에 분리됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-403">If you do not clear this option, the virtual disks will be detached during the clustering process.</span></span> <span data-ttu-id="e31e5-404">그 결과, 저장소 공간이 클러스터에서 제거되고 PowerShell을 사용하여 다시 연결할 때까지 디스크 관리자 또는 탐색기에 표시되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-404">As a result, they will also not appear in Disk Manager or Explorer until the storage spaces are removed from the cluster and reattached by using PowerShell.</span></span>
   > 
   > 
5. <span data-ttu-id="e31e5-405">왼쪽 창에서 **장애 조치(Failover) 클러스터 관리자**를 확장하고 **Cluster1.corp.contoso.com**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-405">In the left pane, expand **Failover Cluster Manager**, and then click **Cluster1.corp.contoso.com**.</span></span>
6. <span data-ttu-id="e31e5-406">가운데 창에서 **클러스터 코어 리소스** 섹션으로 아래로 스크롤하고 **이름: Clutser1** 세부 정보를 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-406">In the center pane, scroll down to the **Cluster Core Resources** section, and expand the **Name: Clutser1** details.</span></span> <span data-ttu-id="e31e5-407">**이름** 및 **IP 주소** 리소스가 **실패** 상태에 모두 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-407">You should see both the **Name** and the **IP Address** resources in the **Failed** state.</span></span> <span data-ttu-id="e31e5-408">클러스터에 컴퓨터 자체와 같은 IP 주소가 할당되어 주소가 중복되므로 IP 주소 리소스는 온라인 상태로 전환할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-408">The IP address resource cannot be brought online because the cluster is assigned the same IP address as the machine itself, which is a duplicate address.</span></span>
7. <span data-ttu-id="e31e5-409">오류가 발생한 **IP 주소** 리소스를 마우스 오른쪽 단추로 클릭하고 **속성**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-409">Right-click the failed **IP Address** resource, and then click **Properties**.</span></span>
   
    ![클러스터 속성](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784633.png)
8. <span data-ttu-id="e31e5-411">**고정 IP 주소**를 선택하고, **주소** 텍스트 상자에 **10.10.2.101**을 지정하고 나서, **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-411">Select **Static IP Address**, specify **10.10.2.101** in the **Address** text box, and then click **OK**.</span></span>
9. <span data-ttu-id="e31e5-412">**클러스터 코어 리소스** 섹션에서 **이름: Cluster1**을 마우스 오른쪽 단추로 클릭하고 **온라인 상태로 전환**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-412">In the **Cluster Core Resources** section, right-click **Name: Cluster1**, and then click **Bring Online**.</span></span> <span data-ttu-id="e31e5-413">두 리소스가 모두 온라인 상태로 전환될 때까지 기다립니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-413">Wait until both resources are online.</span></span> <span data-ttu-id="e31e5-414">클러스터 이름 리소스가 온라인 상태가 되면 DC 서버는 새 Active Directory 컴퓨터 계정으로 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-414">When the cluster name resource comes online, the DC server is updated with a new Active Directory computer account.</span></span> <span data-ttu-id="e31e5-415">이 Active Directory 계정은 나중에 가용성 그룹 클러스터된 서비스를 실행하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-415">This Active Directory account will be used to run the availability group clustered service later.</span></span>
10. <span data-ttu-id="e31e5-416">클러스터에 나머지 노드를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-416">Add the remaining nodes to the cluster.</span></span> <span data-ttu-id="e31e5-417">브라우저 트리에서 **Cluster1.corp.contoso.com**을 마우스 오른쪽 단추로 클릭하고 다음 스크린샷과 같이 **노드 추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-417">In the browser tree, right-click **Cluster1.corp.contoso.com**, and then click **Add Node**, as shown in the following screenshot.</span></span>
    
     ![클러스터에 노드 추가](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC784634.png)
11. <span data-ttu-id="e31e5-419">**노드 추가 마법사**의 **서버 선택** 페이지에서 **다음**을 클릭하고, **서버 이름 입력**에 서버 이름을 입력하고 **추가**를 클릭하여 **ContosoSQL2** 및 **ContosoWSFCNode**를 목록에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-419">In the **Add Node Wizard**, click **Next** on the **Select Servers** page, add **ContosoSQL2** and **ContosoWSFCNode** to the list by typing the server name in **Enter server name** and then clicking **Add**.</span></span> <span data-ttu-id="e31e5-420">완료하면 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-420">When you are done, click **Next**.</span></span>
12. <span data-ttu-id="e31e5-421">**유효성 검사 경고** 페이지에서 **아니요**를 클릭합니다. 하지만 프로덕션 시나리오에서는 유효성 검사 테스트를 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-421">On the **Validation Warning** page, click **No**, although in a production scenario, you should perform the validation tests.</span></span> <span data-ttu-id="e31e5-422">그런 후 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-422">Then, click **Next**.</span></span>
13. <span data-ttu-id="e31e5-423">**확인** 페이지에서 **다음**을 클릭하여 노드를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-423">On the **Confirmation** page, click **Next** to add the nodes.</span></span>
    
    > [!WARNING]
    > <span data-ttu-id="e31e5-424">여러 디스크를 저장소 풀로 그룹화하는 [저장소 공간](https://technet.microsoft.com/library/hh831739)을 사용 중인 경우 **클러스터에 사용할 수 있는 모든 저장소를 추가하세요** 확인란을 선택 취소해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-424">If you are using [Storage Spaces](https://technet.microsoft.com/library/hh831739), which groups multiple disks into storage pools, you must clear the **Add all eligible storage to the cluster** check box.</span></span> <span data-ttu-id="e31e5-425">이 옵션을 선택 취소하지 않으면 가상 디스크가 클러스터 프로세스 중에 분리됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-425">If you do not clear this option, the virtual disks will be detached during the clustering process.</span></span> <span data-ttu-id="e31e5-426">그 결과, 저장소 공간이 클러스터에서 제거되고 PowerShell을 사용하여 다시 연결할 때까지 디스크 관리자 또는 탐색기에 표시되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-426">As a result, they will also not appear in Disk Manager or Explorer until the storage spaces are removed from cluster and reattached using PowerShell.</span></span>
    > 
    > 
14. <span data-ttu-id="e31e5-427">클러스터에 노드가 추가된 후 **마침**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-427">After the nodes are added to the cluster, click **Finish**.</span></span> <span data-ttu-id="e31e5-428">이제 장애 조치(Failover) 클러스터 관리자에 3개의 노드가 포함된 클러스터가 표시되고 **노드** 컨테이너에 목록으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-428">Failover Cluster Manager should now show that your cluster has three nodes and list them in the **Nodes** container.</span></span>
15. <span data-ttu-id="e31e5-429">원격 데스크톱 세션에서 로그아웃합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-429">Sign out of the remote desktop session.</span></span>

## <a name="prepare-the-sql-server-instances-for-availability-groups"></a><span data-ttu-id="e31e5-430">가용성 그룹에 대한 SQL Server 인스턴스 준비</span><span class="sxs-lookup"><span data-stu-id="e31e5-430">Prepare the SQL Server instances for availability groups</span></span>
<span data-ttu-id="e31e5-431">이 섹션에서는 **ContosoSQL1** 및 **contosoSQL2** 모두에 대해 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-431">In this section, you will do the following on both **ContosoSQL1** and **contosoSQL2**:</span></span>

* <span data-ttu-id="e31e5-432">필요한 권한이 기본 SQL Server 인스턴스로 설정된 **NT AUTHORITY\System**에 대한 로그인을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-432">Add a login for **NT AUTHORITY\System** with necessary permissions set to the default SQL Server instance.</span></span>
* <span data-ttu-id="e31e5-433">기본 SQL Server 인스턴스에 sysadmin 역할로 **CORP\Install**을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-433">Add **CORP\Install** as a sysadmin role to the default SQL Server instance.</span></span>
* <span data-ttu-id="e31e5-434">SQL Server의 원격 액세스를 위해 방화벽을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-434">Open the firewall for remote access of SQL Server.</span></span>
* <span data-ttu-id="e31e5-435">Always On 가용성 그룹 기능을 사용하도록 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-435">Enable the Always On availability groups feature.</span></span>
* <span data-ttu-id="e31e5-436">SQL Server 서비스 계정을 각각 **CORP\SQLSvc1** and **CORP\SQLSvc2**로 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-436">Change the SQL Server service account to **CORP\SQLSvc1** and **CORP\SQLSvc2**, respectively.</span></span>

<span data-ttu-id="e31e5-437">이 작업은 순서와 관계없이 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-437">These actions can be performed in any order.</span></span> <span data-ttu-id="e31e5-438">하지만 다음 단계는 순서대로 진행합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-438">Nevertheless, the following steps will walk through them in order.</span></span> <span data-ttu-id="e31e5-439">**ContosoSQL1** 및 **ContosoSQL2** 모두에 대해 다음 단계를 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-439">Follow the steps for both **ContosoSQL1** and **ContosoSQL2**:</span></span>

1. <span data-ttu-id="e31e5-440">가상 컴퓨터에 대한 원격 데스크톱 세션에서 로그아웃하지 않은 경우 지금 로그아웃합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-440">If you have not signed out of the remote desktop session for the virtual machine, do so now.</span></span>
2. <span data-ttu-id="e31e5-441">**ContosoSQL1** 및 **ContosoSQL2**에 대한 RDP 파일을 열고 **BUILTIN\AzureAdmin**으로 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-441">Open the RDP files for **ContosoSQL1** and **ContosoSQL2**, and sign in as **BUILTIN\AzureAdmin**.</span></span>
3. <span data-ttu-id="e31e5-442">**NT AUTHORITY\System**을 필요한 권한과 함께 SQL Server 로그인에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-442">Add **NT AUTHORITY\System** to the SQL Server logins with necessary permissions.</span></span> <span data-ttu-id="e31e5-443">**SQL Server Management Studio**를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-443">Open **SQL Server Management Studio**.</span></span>
4. <span data-ttu-id="e31e5-444">**연결** 을 클릭하여 기본 SQL Server 인스턴스에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-444">Click **Connect** to connect to the default SQL Server instance.</span></span>
5. <span data-ttu-id="e31e5-445">**개체 탐색기**에서 **보안**을 확장한 다음 **로그인**을 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-445">In **Object Explorer**, expand **Security**, and then expand **Logins**.</span></span>
6. <span data-ttu-id="e31e5-446">**NT AUTHORITY\System** 로그인을 마우스 오른쪽 단추로 클릭하고 **속성**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-446">Right-click the **NT AUTHORITY\System** login, and then click **Properties**.</span></span>
7. <span data-ttu-id="e31e5-447">로컬 서버에 대한 **보안 개체** 페이지에서 다음 사용 권한에 대해 **권한 부여**를 선택하고 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-447">On the **Securables** page, for the local server, select **Grant** for the following permissions, and then click **OK**.</span></span>
   
   * <span data-ttu-id="e31e5-448">가용성 그룹 변경</span><span class="sxs-lookup"><span data-stu-id="e31e5-448">Alter any availability group</span></span>
   * <span data-ttu-id="e31e5-449">SQL 연결</span><span class="sxs-lookup"><span data-stu-id="e31e5-449">Connect SQL</span></span>
   * <span data-ttu-id="e31e5-450">서버 상태 보기</span><span class="sxs-lookup"><span data-stu-id="e31e5-450">View server state</span></span>
8. <span data-ttu-id="e31e5-451">기본 SQL Server 인스턴스에 **sysadmin** 역할로 **CORP\Install**을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-451">Add **CORP\Install** as a **sysadmin** role to the default SQL Server instance.</span></span> <span data-ttu-id="e31e5-452">**개체 탐색기**에서 **로그인**을 마우스 오른쪽 단추로 클릭하고 **새 로그인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-452">In **Object Explorer**, right-click **Logins**, and then click **New Login**.</span></span>
9. <span data-ttu-id="e31e5-453">**로그인 이름**에 **CORP\Install**을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-453">Type **CORP\Install** in **Login name**.</span></span>
10. <span data-ttu-id="e31e5-454">**서버 역할** 페이지에서 **sysadmin**을 선택한 다음 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-454">On the **Server Roles** page, select **sysadmin**, and then click **OK**.</span></span> <span data-ttu-id="e31e5-455">로그인을 만든 후 **개체 탐색기**에서 **로그인**을 확장하여 로그인을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-455">After you create the login, you can see it by expanding **Logins** in **Object Explorer**.</span></span>
11. <span data-ttu-id="e31e5-456">SQL Server에 대한 방화벽 규칙을 만들려면 **시작** 화면에서 **고급 보안이 포함된 Windows 방화벽**을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-456">To create a firewall rule for SQL Server, on the **Start** screen, open **Windows Firewall with Advanced Security**.</span></span>
12. <span data-ttu-id="e31e5-457">왼쪽 창에서 **인바운드 규칙**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-457">In the left pane, select **Inbound Rules**.</span></span> <span data-ttu-id="e31e5-458">오른쪽 창에서 **새 규칙**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-458">In the right pane, click **New Rule**.</span></span>
13. <span data-ttu-id="e31e5-459">**규칙 유형** 페이지에서 **프로그램** > **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-459">On the **Rule Type** page, click **Program** > **Next**.</span></span>
14. <span data-ttu-id="e31e5-460">**프로그램** 페이지에서 **다음 프로그램 경로**를 선택하고, 텍스트 상자에 **%ProgramFiles%\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Binn\sqlservr.exe**를 입력하고 나서, **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-460">On the **Program** page, select **This program path**, type **%ProgramFiles%\Microsoft SQL Server\MSSQL12.MSSQLSERVER\MSSQL\Binn\sqlservr.exe** in the text box, and then click **Next**.</span></span> <span data-ttu-id="e31e5-461">이러한 지침을 따르지만 SQL Server 2012를 사용 중인 경우 SQL Server 디렉터리는 **MSSQL11.MSSQLSERVER**입니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-461">If you are following these directions but using SQL Server 2012, the SQL Server directory is **MSSQL11.MSSQLSERVER**.</span></span>
15. <span data-ttu-id="e31e5-462">**작업** 페이지에서 **연결 허용**을 선택한 상태로 유지하고 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-462">On the **Action** page, keep **Allow the connection** selected, and then click **Next**.</span></span>
16. <span data-ttu-id="e31e5-463">**프로필** 페이지에서 기본 설정을 그대로 적용하고 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-463">On the **Profile** page, accept the default settings, and then click **Next**.</span></span>
17. <span data-ttu-id="e31e5-464">**이름** 페이지에서 **이름** 텍스트 상자에 **SQL Server(프로그램 규칙)**와 같은 규칙 이름을 지정하고 **마침**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-464">On the **Name** page, specify a rule name, such as **SQL Server (Program Rule)**, in the **Name** text box, then click **Finish**.</span></span>
18. <span data-ttu-id="e31e5-465">**Always On 가용성 그룹** 기능을 사용하도록 설정하려면 **시작** 화면에서 **SQL Server 구성 관리자**를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-465">To enable the **Always On Availability Groups** feature, on the **Start** screen, open **SQL Server Configuration Manager**.</span></span>
19. <span data-ttu-id="e31e5-466">브라우저 트리에서 **SQL Server 서비스**를 클릭하고 **SQL Server (MSSQLSERVER)** 서비스를 마우스 오른쪽 단추로 클릭한 다음 **속성**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-466">In the browser tree, click **SQL Server Services**, right-click the **SQL Server (MSSQLSERVER)** service, and then click **Properties**.</span></span>
20. <span data-ttu-id="e31e5-467">**Always On 고가용성** 탭을 클릭하고, 다음 스크린샷과 같이 **Always On 가용성 그룹 사용**을 선택하고 나서, **적용**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-467">Click the **Always On High Availability** tab, select **Enable Always On Availability Groups**, as shown in the following screenshot, and then click **Apply**.</span></span> <span data-ttu-id="e31e5-468">대화 상자에서 **확인**을 클릭하고 아직 **속성** 대화 상자를 닫지 마세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-468">Click **OK** in the dialog box, and do not close the **Properties** dialog box yet.</span></span> <span data-ttu-id="e31e5-469">서비스 계정을 변경한 후에 SQL Server 서비스를 다시 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-469">You will restart the SQL Server service after you change the service account.</span></span>
    
     ![Always On 가용성 그룹 사용](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665520.gif)
21. <span data-ttu-id="e31e5-471">SQL Server 서비스 계정을 변경하려면 **로그온** 탭을 클릭하고, **계정 이름**에 **CORP\SQLSvc1**(**ContosoSQL1**인 경우) 또는 **CORP\SQLSvc2**(**ContosoSQL2**인 경우)를 입력하고, 암호를 입력 및 확인한 후, **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-471">To change the SQL Server service account, click the **Log On** tab, type **CORP\SQLSvc1** (for **ContosoSQL1**) or **CORP\SQLSvc2** (for **ContosoSQL2**) in **Account Name**, fill in and confirm the password, and then click **OK**.</span></span>
22. <span data-ttu-id="e31e5-472">열리는 대화 상자에서 **예**를 클릭하여 SQL Server 서비스를 다시 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-472">In the dialog box that opens, click **Yes** to restart the SQL Server service.</span></span> <span data-ttu-id="e31e5-473">SQL Server 서비스가 다시 시작된 후 **속성** 대화 상자에서 변경한 내용이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-473">After the SQL Server service restarts, changes that you made in the **Properties** dialog box are effective.</span></span>
23. <span data-ttu-id="e31e5-474">가상 컴퓨터에서 로그아웃합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-474">Sign out of the virtual machines.</span></span>

## <a name="create-the-availability-group"></a><span data-ttu-id="e31e5-475">가용성 그룹 만들기</span><span class="sxs-lookup"><span data-stu-id="e31e5-475">Create the availability group</span></span>
<span data-ttu-id="e31e5-476">이제 가용성 그룹을 구성할 준비가 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-476">You are now ready to configure an availability group.</span></span> <span data-ttu-id="e31e5-477">다음은 수행할 사항을 간략히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-477">Below is an outline of what you will do:</span></span>

* <span data-ttu-id="e31e5-478">**ContosoSQL1**에 새 데이터베이스(**MyDB1**)를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-478">Create a new database (**MyDB1**) on **ContosoSQL1**.</span></span>
* <span data-ttu-id="e31e5-479">데이터베이스의 전체 백업 및 트랜잭션 로그 백업을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-479">Take both a full backup and a transaction log backup of the database.</span></span>
* <span data-ttu-id="e31e5-480">**NORECOVERY** 옵션으로 전체 및 로그 백업을 **ContosoSQL2**로 복원합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-480">Restore the full and log backups to **ContosoSQL2** with the **NORECOVERY** option.</span></span>
* <span data-ttu-id="e31e5-481">동기 커밋, 자동 장애 조치(failover) 및 읽을 수 있는 보조 복제본으로 가용성 그룹(**AG1**)을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-481">Create the availability group (**AG1**) with synchronous commit, automatic failover, and readable secondary replicas.</span></span>

### <a name="create-the-mydb1-database-on-contososql1"></a><span data-ttu-id="e31e5-482">ContosoSQL1에 MyDB1 데이터베이스 만들기</span><span class="sxs-lookup"><span data-stu-id="e31e5-482">Create the MyDB1 database on ContosoSQL1</span></span>
1. <span data-ttu-id="e31e5-483">**ContosoSQL1** 및 **ContosoSQL2**에 대한 원격 데스크톱 세션에서 아직 로그아웃하지 않은 경우 지금 로그아웃합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-483">If you have not already signed out of the remote desktop sessions for **ContosoSQL1** and **ContosoSQL2**, do so now.</span></span>
2. <span data-ttu-id="e31e5-484">**ContosoSQL1**에 대한 RDP 파일을 열고 **CORP\Install**로 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-484">Open the RDP file for **ContosoSQL1**, and sign in as **CORP\Install**.</span></span>
3. <span data-ttu-id="e31e5-485">**파일 탐색기**에서 **C:\\** 아래에 **backup**이라는 디렉터리를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-485">In **File Explorer**, under **C:\\**, create a directory named **backup**.</span></span> <span data-ttu-id="e31e5-486">이 디렉터리는 데이터베이스를 백업 및 복원하는 데 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-486">You will use this directory to back up and restore your database.</span></span>
4. <span data-ttu-id="e31e5-487">새 디렉터리를 마우스 오른쪽 단추로 클릭하고 **공유 대상**을 가리킨 후 다음 스크린샷과 같이 **특정 사용자**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-487">Right-click the new directory, point to **Share with**, and then click **Specific people**, as shown in the following screenshot.</span></span>
   
    ![백업 폴더 만들기](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665521.gif)
5. <span data-ttu-id="e31e5-489">**CORP\SQLSvc1**을 추가하고 **읽기/쓰기** 권한을 부여합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-489">Add **CORP\SQLSvc1**, and then give it the **Read/Write** permission.</span></span> <span data-ttu-id="e31e5-490">**CORP\SQLSvc2**를 추가하고, 다음 스크린샷과 같이 **읽기** 권한을 부여하고 나서, **공유**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-490">Add **CORP\SQLSvc2**, and then give it the **Read** permission, as shown in the following screenshot, and then click **Share**.</span></span> <span data-ttu-id="e31e5-491">파일 공유 프로세스가 완료된 후 **완료**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-491">After the file-sharing process is finished, click **Done**.</span></span>
   
    ![백업 폴더에 대한 권한 부여](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665522.gif)
6. <span data-ttu-id="e31e5-493">데이터베이스를 만들려면 **시작** 메뉴에서 **SQL Server Management Studio**를 열고 **연결**을 클릭하여 기본 SQL Server 인스턴스에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-493">To create the database, from the **Start** menu, open **SQL Server Management Studio**, and then click **Connect** to connect to the default SQL Server instance.</span></span>
7. <span data-ttu-id="e31e5-494">**개체 탐색기**에서 **데이터베이스**를 마우스 오른쪽 단추로 클릭한 다음 **새 데이터베이스**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-494">In **Object Explorer**, right-click **Databases**, and then click **New Database**.</span></span>
8. <span data-ttu-id="e31e5-495">**데이터베이스 이름**에 **MyDB1**을 입력하고 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-495">In **Database name**, type **MyDB1**, and then click **OK**.</span></span>

### <a name="make-a-full-backup-of-mydb1-and-restore-it-on-contososql2"></a><span data-ttu-id="e31e5-496">MyDB1의 전체 백업 수행 및 ContosoSQL2에 복원</span><span class="sxs-lookup"><span data-stu-id="e31e5-496">Make a full backup of MyDB1 and restore it on ContosoSQL2</span></span>
1. <span data-ttu-id="e31e5-497">데이터베이스의 전체 백업을 만들려면 **개체 탐색기**에서 **데이터베이스**를 확장하고, **MyDB1**을 마우스 오른쪽 단추로 클릭하고, **작업**을 가리키고 나서, **백업**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-497">To make a full backup of the database, in **Object Explorer**, expand **Databases**, right-click **MyDB1**, point to **Tasks**, and then click **Back Up**.</span></span>
2. <span data-ttu-id="e31e5-498">**원본** 섹션에서 **백업 유형**을 **전체**로 설정된 상태로 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-498">In the **Source** section, keep **Backup type** set to **Full**.</span></span> <span data-ttu-id="e31e5-499">**대상** 섹션에서 **제거**를 클릭하여 백업 파일의 기본 파일 경로를 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-499">In the **Destination** section, click **Remove** to remove the default file path for the backup file.</span></span>
3. <span data-ttu-id="e31e5-500">**대상** 섹션에서 **추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-500">In the **Destination** section, click **Add**.</span></span>
4. <span data-ttu-id="e31e5-501">**파일 이름** 텍스트 상자에 **\\ContosoSQL1\backup\MyDB1.bak**를 입력하고, **확인**을 클릭하고 나서, **확인**을 다시 클릭하여 데이터베이스를 백업합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-501">In the **File name** text box, type **\\ContosoSQL1\backup\MyDB1.bak**, click **OK**, and then click **OK** again to back up the database.</span></span> <span data-ttu-id="e31e5-502">백업 작업이 완료되면 **확인**을 다시 클릭하여 대화 상자를 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-502">When the backup operation finishes, click **OK** again to close the dialog box.</span></span>
5. <span data-ttu-id="e31e5-503">데이터베이스의 트랜잭션 로그 백업을 만들려면 **개체 탐색기**에서 **데이터베이스**를 확장하고, **MyDB1**을 마우스 오른쪽 단추로 클릭하고, **작업**을 가리키고 나서, **백업**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-503">To make a transaction log backup of the database, in **Object Explorer**, expand **Databases**, right-click **MyDB1**, point to **Tasks**, and then click **Back Up**.</span></span>
6. <span data-ttu-id="e31e5-504">**백업 유형**에서 **트랜잭션 로그**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-504">In **Backup type**, select **Transaction Log**.</span></span> <span data-ttu-id="e31e5-505">**대상** 파일 경로를 앞에서 지정한 경로로 설정된 상태를 유지하고 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-505">Keep the **Destination** file path set to the one you specified earlier, and then click **OK**.</span></span> <span data-ttu-id="e31e5-506">백업 작업이 완료된 후 **확인**을 다시 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-506">After the backup operation finishes, click **OK** again.</span></span>
7. <span data-ttu-id="e31e5-507">**ContosoSQL2**에서 전체 및 트랜잭션 로그 백업을 복원하려면 **ContosoSQL2**에 대한 RDP 파일을 열고 **CORP\Install**로 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-507">To restore the full and transaction log backups on **ContosoSQL2**, open the RDP file for **ContosoSQL2**, and sign in as **CORP\Install**.</span></span> <span data-ttu-id="e31e5-508">**ContosoSQL1** 에 대한 원격 데스크톱 세션은 열린 상태로 둡니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-508">Leave the remote desktop session for **ContosoSQL1** open.</span></span>
8. <span data-ttu-id="e31e5-509">**시작** 메뉴에서 **SQL Server Management Studio**를 열고 **연결**을 클릭하여 기본 SQL Server 인스턴스에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-509">From the **Start** menu, open **SQL Server Management Studio**, and then click **Connect** to connect to the default SQL Server instance.</span></span>
9. <span data-ttu-id="e31e5-510">**개체 탐색기**에서 **데이터베이스**를 마우스 오른쪽 단추로 클릭하고 **데이터베이스 복원**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-510">In **Object Explorer**, right-click **Databases**, and then click **Restore Database**.</span></span>
10. <span data-ttu-id="e31e5-511">**원본** 섹션에서 **장치**를 선택하고 줄임표(**…**)를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-511">In the **Source** section, select **Device**, and click the ellipsis **…**</span></span> <span data-ttu-id="e31e5-512">단추를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-512">button.</span></span>
11. <span data-ttu-id="e31e5-513">**백업 장치 선택**에서 **추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-513">In **Select backup devices**, click **Add**.</span></span>
12. <span data-ttu-id="e31e5-514">**백업 파일 위치**에서 **\\ContosoSQL1\backup**을 입력하고, **새로 고침**을 클릭하고, **MyDB1.bak**를 선택하고, **확인**을 클릭하고 나서, **확인**을 다시 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-514">In **Backup file location**, type **\\ContosoSQL1\backup**, click **Refresh**, select **MyDB1.bak**, click **OK**, and then click **OK** again.</span></span> <span data-ttu-id="e31e5-515">그러면 **복원할 백업 세트** 창에 전체 백업 및 로그 백업이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-515">You should now see the full backup and the log backup in the **Backup sets to restore** pane.</span></span>
13. <span data-ttu-id="e31e5-516">**옵션** 페이지로 이동한 후 **복구 상태**에서 **RESTORE WITH NORECOVERY**를 선택하고 **확인**을 클릭하여 데이터베이스를 복원합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-516">Go to the **Options** page, select **RESTORE WITH NORECOVERY** in **Recovery state**, and then click **OK** to restore the database.</span></span> <span data-ttu-id="e31e5-517">복원 작업이 완료된 후 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-517">After the restore operation finishes, click **OK**.</span></span>

### <a name="create-the-availability-group"></a><span data-ttu-id="e31e5-518">가용성 그룹 만들기</span><span class="sxs-lookup"><span data-stu-id="e31e5-518">Create the availability group</span></span>
1. <span data-ttu-id="e31e5-519">**ContosoSQL1**에 대한 원격 데스크톱 세션으로 돌아갑니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-519">Go back to the remote desktop session for **ContosoSQL1**.</span></span> <span data-ttu-id="e31e5-520">SQL Server Management Studio의 **개체 탐색기**에서 **Always On 고가용성**을 마우스 오른쪽 단추로 클릭하고 다음 스크린샷과 같이 **새 가용성 그룹 마법사**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-520">In **Object Explorer** in SQL Server Management Studio, right-click **Always On High Availability**, and then click **New Availability Group Wizard**, as shown in the following screenshot.</span></span>
   
    ![새 가용성 그룹 마법사 시작](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665523.gif)
2. <span data-ttu-id="e31e5-522">**소개** 페이지에서 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-522">On the **Introduction** page, click **Next**.</span></span> <span data-ttu-id="e31e5-523">**가용성 그룹 이름 지정** 페이지에서 **가용성 그룹 이름**에 **AG1**을 입력하고 **다음**을 다시 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-523">On the **Specify Availability Group Name** page, type **AG1** in **Availability group name**, then click **Next** again.</span></span>
   
    ![새 가용성 그룹 마법사, 가용성 그룹 이름 지정](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665524.gif)
3. <span data-ttu-id="e31e5-525">**데이터베이스 선택** 페이지에서 **MyDB1**을 선택하고 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-525">On the **Select Databases** page, select **MyDB1**, and then click **Next**.</span></span> <span data-ttu-id="e31e5-526">원하는 주 복제본에서 전체 백업을 하나 이상 생성했으므로, 이러한 데이터베이스는 가용성 그룹의 필수 구성 요소를 충족합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-526">The database meets the prerequisites for an availability group because you have taken at least one full backup on the intended primary replica.</span></span>
   
    ![새 가용성 그룹 마법사, 데이터베이스 선택](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665525.gif)
4. <span data-ttu-id="e31e5-528">**복제본 지정** 페이지에서 **복제본 추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-528">on the **Specify Replicas** page, click **Add Replica**.</span></span>
   
    ![새 가용성 그룹 마법사, 복제본 지정](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665526.gif)
5. <span data-ttu-id="e31e5-530">**서버에 연결** 대화 상자에서 **서버 이름**에 **ContosoSQL2**를 입력하고 **연결**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-530">In the **Connect to Server** dialog box, type **ContosoSQL2** in **Server name**, and then click **Connect**.</span></span>
   
    ![새 가용성 그룹 마법사, 서버에 연결](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665527.gif)
6. <span data-ttu-id="e31e5-532">**복제본 지정** 페이지로 돌아가면 이제 **사용 가능한 복제본**에 **ContosoSQL2**가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-532">Back on the **Specify Replicas** page, you should now see **ContosoSQL2** listed in **Available Replicas**.</span></span> <span data-ttu-id="e31e5-533">다음 스크린샷과 같이 복제본을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-533">Configure the replicas as shown in the following screenshot.</span></span> <span data-ttu-id="e31e5-534">작업을 마쳤으면 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-534">When you are finished, click **Next**.</span></span>
   
    ![새 가용성 그룹 마법사, 복제본 지정(전체)](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665528.gif)
7. <span data-ttu-id="e31e5-536">**초기 데이터 동기화 선택** 페이지에서 **조인만**을 선택하고 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-536">On the **Select Initial Data Synchronization** page, select **Join only**, and then click **Next**.</span></span> <span data-ttu-id="e31e5-537">**ContosoSQL1**에서 전체 및 트랜잭션 백업을 만들고 이를 **ContosoSQL2**에서 복원할 때 이미 데이터 동기화를 수동으로 수행했습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-537">You already performed data synchronization manually when you made the full and transaction backups on **ContosoSQL1** and restored them on **ContosoSQL2**.</span></span> <span data-ttu-id="e31e5-538">데이터베이스에서 백업 및 복원 작업을 수행하지 않고 대신에 **전체** 를 선택하여 새 가용성 그룹 마법사가 데이터 동기화를 자동으로 수행하도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-538">You can choose not to perform the backup and restore operations on your database and instead select **Full** to let the New Availability Group Wizard perform data synchronization for you.</span></span> <span data-ttu-id="e31e5-539">그러나 일부 기업에서 사용하는 대형 데이터베이스의 경우에는 이 옵션을 사용하지 않는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-539">However, we do not recommend this option for very large databases that are found in some enterprises.</span></span>
   
    ![새 가용성 그룹 마법사, 초기 데이터 동기화 선택.](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665529.gif)
8. <span data-ttu-id="e31e5-541">**유효성 검사** 페이지에서 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-541">On the **Validation** page, click **Next**.</span></span> <span data-ttu-id="e31e5-542">이 페이지는 다음 스크린샷과 비슷하게 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-542">This page should look similar to the following screenshot.</span></span> <span data-ttu-id="e31e5-543">가용성 그룹 수신기가 구성되어 있지 않으므로 수신기 구성에 대한 경고가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-543">There is a warning for the listener configuration because you have not configured an availability group listener.</span></span> <span data-ttu-id="e31e5-544">이 자습서에서는 수신기를 구성하지 않으므로 이 경고를 무시해도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-544">You can ignore this warning, because this tutorial does not configure a listener.</span></span> <span data-ttu-id="e31e5-545">이 자습서를 완료한 후 수신기를 구성하려면 [Azure에서 Always On 가용성 그룹을 위해 ILB 수신기 구성](../classic/ps-sql-int-listener.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-545">To configure the listener after you complete this tutorial, see [Configure an ILB listener for Always On Availability Groups in Azure](../classic/ps-sql-int-listener.md).</span></span>
   
    ![새 가용성 그룹 마법사, 유효성 검사](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665530.gif)
9. <span data-ttu-id="e31e5-547">**요약** 페이지에서 **마침**을 클릭한 후 마법사에서 새 가용성 그룹을 구성하는 동안 기다립니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-547">On the **Summary** page, click **Finish**, and then wait while the wizard configures the new availability group.</span></span> <span data-ttu-id="e31e5-548">**진행률** 페이지에서 **자세한 내용**을 클릭하여 자세한 진행 상태를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-548">On the **Progress** page, you can click **More details** to view the detailed progress.</span></span> <span data-ttu-id="e31e5-549">마법사가 완료된 후 다음 스크린샷과 같이 **결과** 페이지를 검토하여 가용성 그룹이 올바르게 만들어졌는지 확인한 후 **닫기**를 클릭하여 마법사를 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-549">After the wizard finishes, inspect the **Results** page to verify that the availability group is successfully created, as shown in the following screenshot, and then click **Close** to exit the wizard.</span></span>
   
    ![새 가용성 그룹 마법사, 결과](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665531.gif)
10. <span data-ttu-id="e31e5-551">**개체 탐색기**에서 **Always On 고가용성**을 확장하고 **가용성 그룹**을 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-551">In **Object Explorer**, expand **Always On High Availability**, and then expand **Availability Groups**.</span></span> <span data-ttu-id="e31e5-552">이 컨테이너에 새 가용성 그룹이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-552">You should now see the new availability group in this container.</span></span> <span data-ttu-id="e31e5-553">**AG1(기본)**을 마우스 오른쪽 단추로 클릭하고 **대시보드 표시**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-553">Right-click **AG1 (Primary)**, and then click **Show Dashboard**.</span></span>
    
     ![가용성 그룹 대시보드 표시](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665532.gif)
11. <span data-ttu-id="e31e5-555">**Always On 대시보드**는 다음 스크린샷과 비슷하게 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-555">Your **Always On Dashboard** should look similar to the one in the following screenshot.</span></span> <span data-ttu-id="e31e5-556">복제본, 각 복제본의 장애 조치(failover) 모드 및 동기화 상태를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-556">You can see the replicas, the failover mode of each replica, and the synchronization state.</span></span>
    
     ![가용성 그룹 대시보드](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665533.gif)
12. <span data-ttu-id="e31e5-558">**서버 관리자**로 돌아가서 **도구**를 클릭하고 **장애 조치(Failover) 클러스터 관리자**를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-558">Return to **Server Manager**, click **Tools**, and then open **Failover Cluster Manager**.</span></span>
13. <span data-ttu-id="e31e5-559">**Cluster1.corp.contoso.com**과 **서비스 및 응용 프로그램**을 차례로 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-559">Expand **Cluster1.corp.contoso.com**, and then expand **Services and applications**.</span></span> <span data-ttu-id="e31e5-560">**역할**을 선택하고 **AG1** 가용성 그룹 역할이 만들어진 것을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-560">Select **Roles** and note that the **AG1** availability group role has been created.</span></span> <span data-ttu-id="e31e5-561">AG1에는 수신기를 구성하지 않았으므로 데이터베이스 클라이언트가 가용성 그룹에 연결할 수 있는 IP 주소가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-561">Note that AG1 does not have an IP address by which database clients can connect to the availability group, because you did not configure a listener.</span></span> <span data-ttu-id="e31e5-562">읽기/쓰기 작업을 위해 주 노드에 직접 연결하고 읽기 전용 쿼리를 위해 보조 노드에 직접 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-562">You can connect directly to the primary node for read-write operations and the secondary node for read-only queries.</span></span>
    
     ![장애 조치(Failover) 클러스터 관리자에서 AG](./media/virtual-machines-windows-classic-portal-sql-alwayson-availability-groups/IC665534.gif)

> [!WARNING]
> <span data-ttu-id="e31e5-564">장애 조치(Failover) 클러스터 관리자에서 가용성 그룹으로 장애 조치를 시도하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-564">Do not try to fail over the availability group from the Failover Cluster Manager.</span></span> <span data-ttu-id="e31e5-565">모든 장애 조치(failover) 작업은 SQL Server Management Studio의 **Always On 대시보드**에서 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-565">All failover operations should be performed from within **Always On Dashboard** in SQL Server Management Studio.</span></span> <span data-ttu-id="e31e5-566">자세한 내용은 [가용성 그룹에서 장애 조치(Failover) 클러스터 관리자 사용에 대한 제한 사항](https://msdn.microsoft.com/library/ff929171.aspx)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-566">For more information, see [Restrictions on Using The Failover Cluster Manager with Availability Groups](https://msdn.microsoft.com/library/ff929171.aspx).</span></span>
> 
> 

## <a name="next-steps"></a><span data-ttu-id="e31e5-567">다음 단계</span><span class="sxs-lookup"><span data-stu-id="e31e5-567">Next steps</span></span>
<span data-ttu-id="e31e5-568">이제 Azure에서 가용성 그룹을 만들어 SQL Server Always On을 성공적으로 구현했습니다.</span><span class="sxs-lookup"><span data-stu-id="e31e5-568">You have now successfully implemented SQL Server Always On by creating an availability group in Azure.</span></span> <span data-ttu-id="e31e5-569">이 가용성 그룹에 대한 수신기를 구성하려면 [Azure에서 Always On 가용성 그룹에 대한 ILB 수신기 구성](../classic/ps-sql-int-listener.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-569">To configure a listener for this availability group, see [Configure an ILB listener for Always On availability groups in Azure](../classic/ps-sql-int-listener.md).</span></span>

<span data-ttu-id="e31e5-570">Azure에서 SQL Server를 사용하는 방법에 대한 기타 정보는 [Azure 가상 컴퓨터의 SQL Server](../sql/virtual-machines-windows-sql-server-iaas-overview.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e31e5-570">For other information about using SQL Server in Azure, see [SQL Server on Azure Virtual Machines](../sql/virtual-machines-windows-sql-server-iaas-overview.md).</span></span>

