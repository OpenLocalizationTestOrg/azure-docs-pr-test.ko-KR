---
title: "Azure 가상 컴퓨터에서 SAP HANA에 대해 aaaBackup 가이드 | Microsoft Docs"
description: "Azure 가상 컴퓨터의 SAP HANA에 대한 두 가지 주요 백업 방법을 제공합니다"
services: virtual-machines-linux
documentationcenter: 
author: hermanndms
manager: timlt
editor: 
ms.service: virtual-machines-linux
ms.devlang: NA
ms.topic: article
ums.tgt_pltfrm: vm-linux
ms.workload: infrastructure-services
ms.date: 3/13/2017
ms.author: rclaus
ms.openlocfilehash: e651091bb5da2698ec8bf80cad405bfce5b192cf
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="backup-guide-for-sap-hana-on-azure-virtual-machines"></a><span data-ttu-id="4de9d-103">Azure Virtual Machines의 SAP HANA 백업 가이드</span><span class="sxs-lookup"><span data-stu-id="4de9d-103">Backup guide for SAP HANA on Azure Virtual Machines</span></span>

## <a name="getting-started"></a><span data-ttu-id="4de9d-104">시작하기</span><span class="sxs-lookup"><span data-stu-id="4de9d-104">Getting Started</span></span>

<span data-ttu-id="4de9d-105">Azure 가상 컴퓨터에서 실행 되는 SAP HANA에 대 한 백업 가이드 hello Azure 관련 항목 대해서만 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-105">hello backup guide for SAP HANA running on Azure virtual Machines will only describe Azure-specific topics.</span></span> <span data-ttu-id="4de9d-106">일반적인 SAP HANA 백업 관련된 항목에 대 한 설명서를 참조 hello SAP HANA (참조 _SAP HANA 백업 설명서_ 이 문서의 뒷부분에 나오는).</span><span class="sxs-lookup"><span data-stu-id="4de9d-106">For general SAP HANA backup related items, check hello SAP HANA documentation (see _SAP HANA backup documentation_ later in this article).</span></span>

<span data-ttu-id="4de9d-107">두 가지 주요 백업 기능은 SAP HANA에 대 한 Azure 가상 컴퓨터에이 문서의 hello 위주로 설명 됩니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-107">hello focus of this article is on two major backup possibilities for SAP HANA on Azure virtual machines:</span></span>

- <span data-ttu-id="4de9d-108">Azure Linux 가상 컴퓨터에서 HANA 백업 toohello 파일 시스템 (참조 [SAP HANA Azure에 백업 파일 수준](sap-hana-backup-file-level.md))</span><span class="sxs-lookup"><span data-stu-id="4de9d-108">HANA backup toohello file system in an Azure Linux Virtual Machine (see [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md))</span></span>
- <span data-ttu-id="4de9d-109">HANA 백업 저장소 스냅숏을 수동으로 hello Azure 저장소 blob 스냅숏 기능을 사용 하 여 또는 Azure 백업 서비스에 따라 (참조 [SAP HANA 백업 스냅숏을 기반으로 저장소](sap-hana-backup-storage-snapshots.md))</span><span class="sxs-lookup"><span data-stu-id="4de9d-109">HANA backup based on storage snapshots using hello Azure storage blob snapshot feature manually or Azure Backup Service (see [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md))</span></span>

<span data-ttu-id="4de9d-110">SAP HANA 백업 SAP HANA와 직접 타사 백업 도구 toointegrate 수 있는 API를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-110">SAP HANA offers a backup API, which allows third-party backup tools toointegrate directly with SAP HANA.</span></span> <span data-ttu-id="4de9d-111">(하는 아닌 경우이 가이드의 hello 범위 내에서) 현재 이 API를 기반으로 하여 SAP HANA와 Azure Backup 서비스를 직접 통합할 수는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-111">(That is not within hello scope of this guide.) There is no direct integration of SAP HANA with Azure Backup service available right now based on this API.</span></span>

<span data-ttu-id="4de9d-112">추가 제한 사항 tooOLAP 작업이 있는 단일 인스턴스로 GS5 Azure VM 유형에 SAP HANA은 공식적으로 지원 (참조 [인증 IaaS 플랫폼 찾을](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) hello SAP 웹 사이트에서).</span><span class="sxs-lookup"><span data-stu-id="4de9d-112">SAP HANA is officially supported on Azure VM type GS5 as single instance with an additional restriction tooOLAP workloads (see [Find Certified IaaS Platforms](https://global.sap.com/community/ebook/2014-09-02-hana-hardware/enEN/iaas.html) on hello SAP website).</span></span> <span data-ttu-id="4de9d-113">이 문서는 Azure의 SAP HANA에 대한 새 제품이 출시됨에 따라 업데이트될 예정입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-113">This article will be updated as new offerings for SAP HANA on Azure become available.</span></span>

<span data-ttu-id="4de9d-114">또한 Azure에서 사용할 수 있는 SAP HANA 하이브리드 솔루션도 있으며, 이 경우 SAP HANA는 물리적 서버에서 가상화되지 않은 상태로 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-114">There is also an SAP HANA hybrid solution available on Azure, where SAP HANA runs non-virtualized on physical servers.</span></span> <span data-ttu-id="4de9d-115">그러나 이 SAP HANA Azure 백업 가이드에서는 SAP HANA가 &quot;큰 인스턴스&quot;에서 실행되는 것이 아니라 Azure VM에서 실행되는 순수한 Azure 환경을 다루고 있습니다. 저장소 스냅숏을 기반으로 하는 &quot;큰 인스턴스&quot;에 대한이 백업 솔루션에 대한 자세한 내용은 [Azure의 SAP HANA(큰 인스턴스) 개요 및 아키텍처](hana-overview-architecture.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="4de9d-115">However, this SAP HANA Azure backup guide covers a pure Azure environment where SAP HANA runs in an Azure VM, not SAP HANA running on &quot;large instances.&quot; See [SAP HANA (large instances) overview and architecture on Azure](hana-overview-architecture.md) for more information about this backup solution on &quot;large instances&quot; based on storage snapshots.</span></span>

<span data-ttu-id="4de9d-116">Azure에서 지원되는 SAP 제품에 대한 일반 정보는 [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533)에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-116">General information about SAP products supported on Azure can be found in [SAP Note 1928533](https://launchpad.support.sap.com/#/notes/1928533).</span></span>

<span data-ttu-id="4de9d-117">hello 다음 세 가지 그림 현재 기본 Azure 기능을 사용 하 여 SAP HANA 백업 옵션 hello에 대 한 개요를 제공 및도 세 가지 잠재적인 이후 백업 시나리오를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-117">hello following three figures give an overview of hello SAP HANA backup options using native Azure capabilities currently, and also show three potential future backup scenarios.</span></span> <span data-ttu-id="4de9d-118">관련 문서 hello [SAP HANA Azure에 백업 파일 수준](sap-hana-backup-file-level.md) 및 [SAP HANA 백업 스냅숏을 기반으로 저장소](sap-hana-backup-storage-snapshots.md) SAP에 대 한 크기 및 성능 고려 사항 포함 하 여 좀 더 자세하게에서 이러한 옵션에 설명 크기가 멀티 테라바이트 HANA 백업 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-118">hello related articles [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) and [SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describe these options in more detail, including size and performance considerations for SAP HANA backups that are multi-terabytes in size.</span></span>

![이 그림 hello 현재 VM 상태 저장 하기 위한 두 가지 가능성을 보여 줍니다.](media/sap-hana-backup-guide/image001.png)

<span data-ttu-id="4de9d-120">이 그림에는 hello 가능성을 hello 현재 VM 상태를 Azure 백업 서비스 또는 VM 디스크의 수동 스냅숏을 통해 저장을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-120">This figure shows hello possibility of saving hello current VM state, either via Azure Backup service or manual snapshot of VM disks.</span></span> <span data-ttu-id="4de9d-121">이 방법은, 하나의 대상이 &#39; t toomanage SAP HANA 백업을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-121">With this approach, one doesn&#39;t have toomanage SAP HANA backups.</span></span> <span data-ttu-id="4de9d-122">hello 디스크 스냅숏 시나리오의 hello 과제는 파일 시스템 일관성 및 응용 프로그램에 일관 된 디스크 상태는입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-122">hello challenge of hello disk snapshot scenario is file system consistency, and an application-consistent disk state.</span></span> <span data-ttu-id="4de9d-123">hello 일관성 항목 hello 섹션에서 설명 _저장소 스냅샷을 사용할 때 SAP HANA 데이터 일관성_ 이 문서의 뒷부분에 나오는 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-123">hello consistency topic is discussed in hello section _SAP HANA data consistency when taking storage snapshots_ later in this article.</span></span> <span data-ttu-id="4de9d-124">기능 및 서비스 관련 tooSAP HANA 백업을 에서도이 문서의 뒷부분에 설명 된 Azure Backup의 제한 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-124">Capabilities and restrictions of Azure Backup service related tooSAP HANA backups are also discussed later in this article.</span></span>

![이 그림에서는 VM hello 내 백업 파일 SAP HANA를 수행 하기 위한 옵션을 보여 줍니다.](media/sap-hana-backup-guide/image002.png)

<span data-ttu-id="4de9d-126">이 수치는 SAP HANA 파일 백업 내 hello VM 저장 하는 다음 HANA 백업 파일 다양 한 도구를 사용 하 여 다른 위치에 대 한 옵션을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-126">This figure shows options for taking an SAP HANA file backup inside hello VM, and then storing it HANA backup files somewhere else using different tools.</span></span> <span data-ttu-id="4de9d-127">HANA 백업을 수행하면 스냅숏 기반 백업 솔루션보다 많은 시간이 필요하지만 무결성 및 일관성과 관련하여 장점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-127">Taking a HANA backup requires more time than a snapshot-based backup solution, but it has advantages regarding integrity and consistency.</span></span> <span data-ttu-id="4de9d-128">자세한 내용은 이 문서의 뒷부분에 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-128">More details are provided later in this article.</span></span>

![그림: 향후의 잠재적인 SAP HANA 백업 시나리오](media/sap-hana-backup-guide/image003.png)

<span data-ttu-id="4de9d-130">이 그림에서는 향후의 잠재적인 SAP HANA 백업 시나리오를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-130">This figure shows a potential future SAP HANA backup scenario.</span></span> <span data-ttu-id="4de9d-131">SAP HANA가 보조 복제에서 백업하는 것을 허용한다면 백업 전략에 추가 옵션을 추가하면 좋겠지만,</span><span class="sxs-lookup"><span data-stu-id="4de9d-131">If SAP HANA allowed taking backups from a replication secondary, it would add additional options for backup strategies.</span></span> <span data-ttu-id="4de9d-132">현재는 불가능 hello SAP HANA Wiki tooa 게시물에 따라:</span><span class="sxs-lookup"><span data-stu-id="4de9d-132">Currently it isn't possible according tooa post in hello SAP HANA Wiki:</span></span>

<span data-ttu-id="4de9d-133">_&quot;Hello 보조 쪽 가능한 tootake 백업을 입니까?_</span><span class="sxs-lookup"><span data-stu-id="4de9d-133">_&quot;Is it possible tootake backups on hello secondary side?_</span></span>

<span data-ttu-id="4de9d-134">_아니요, 현재 있습니다 수만 데이터와 로그 백업을 hello 기본 측에 합니다. 자동 로그 백업을 사용 하는 경우 감염 toohello 보조 쪽 후 hello 로그 백업이 있습니다 자동으로 작성 됩니다.&quot;_</span><span class="sxs-lookup"><span data-stu-id="4de9d-134">_No, currently you can only take data and log backups on hello primary side. If automatic log backup is enabled, after takeover toohello secondary side, hello log backups will automatically be written there.&quot;_</span></span>

## <a name="sap-resources-for-hana-backup"></a><span data-ttu-id="4de9d-135">HANA 백업을 위한 SAP 리소스</span><span class="sxs-lookup"><span data-stu-id="4de9d-135">SAP resources for HANA backup</span></span>

### <a name="sap-hana-backup-documentation"></a><span data-ttu-id="4de9d-136">SAP HANA 백업 설명서</span><span class="sxs-lookup"><span data-stu-id="4de9d-136">SAP HANA backup documentation</span></span>

- [<span data-ttu-id="4de9d-137">소개 tooSAP HANA 관리</span><span class="sxs-lookup"><span data-stu-id="4de9d-137">Introduction tooSAP HANA Administration</span></span>](https://help.sap.com/viewer/6b94445c94ae495c83a19646e7c3fd56/2.0.00/en-US)
- <span data-ttu-id="4de9d-138">[백업 및 복구 전략 계획](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)(영문)</span><span class="sxs-lookup"><span data-stu-id="4de9d-138">[Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)</span></span>
- <span data-ttu-id="4de9d-139">[ABAP DBACOCKPIT을 사용하여 HANA 백업 예약](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)(영문)</span><span class="sxs-lookup"><span data-stu-id="4de9d-139">[Schedule HANA Backup using ABAP DBACOCKPIT](http://www.hanatutorials.com/p/schedule-hana-backup-using-abap.html)</span></span>
- <span data-ttu-id="4de9d-140">[데이터 백업 예약(SAP HANA Cockpit)](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)(영문)</span><span class="sxs-lookup"><span data-stu-id="4de9d-140">[Schedule Data Backups (SAP HANA Cockpit)](http://help.sap.com/saphelp_hanaplatform/helpdata/en/6d/385fa14ef64a6bab2c97a3d3e40292/frameset.htm)</span></span>
- <span data-ttu-id="4de9d-141">[SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148): SAP HANA 백업에 대한 FAQ</span><span class="sxs-lookup"><span data-stu-id="4de9d-141">FAQ about SAP HANA backup in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148)</span></span>
- <span data-ttu-id="4de9d-142">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883): SAP HANA 데이터베이스 및 저장소 스냅숏에 대한 FAQ</span><span class="sxs-lookup"><span data-stu-id="4de9d-142">FAQ about SAP HANA database and storage snapshots in [SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)</span></span>
- <span data-ttu-id="4de9d-143">[SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529): 백업 및 복구에 부적합한 네트워크 파일 시스템</span><span class="sxs-lookup"><span data-stu-id="4de9d-143">Unsuitable network file systems for backup and recovery in [SAP Note 1820529](https://launchpad.support.sap.com/#/notes/1820529)</span></span>

### <a name="why-sap-hana-backup"></a><span data-ttu-id="4de9d-144">SAP HANA를 백업하는 이유</span><span class="sxs-lookup"><span data-stu-id="4de9d-144">Why SAP HANA backup?</span></span>

<span data-ttu-id="4de9d-145">Azure 저장소 가용성 및 안정성 hello 유틸리티로 제공 (참조 [Azure 저장소 소개 tooMicrosoft](../../../storage/common/storage-introduction.md) Azure 저장소에 대 한 자세한 내용은).</span><span class="sxs-lookup"><span data-stu-id="4de9d-145">Azure storage offers availability and reliability out of hello box (see [Introduction tooMicrosoft Azure Storage](../../../storage/common/storage-introduction.md) for more information about Azure storage).</span></span>

<span data-ttu-id="4de9d-146">hello에 대 한 최소 &quot;백업&quot; hello keeping hello Azure Sla에 toorely Azure Vhd 연결 된 toohello SAP HANA 서버 VM에서 SAP HANA 데이터 및 로그 파일은 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-146">hello minimum for &quot;backup&quot; is toorely on hello Azure SLAs, keeping hello SAP HANA data and log files on Azure VHDs attached toohello SAP HANA server VM.</span></span> <span data-ttu-id="4de9d-147">이 방법에서는 VM 실패 하지만 하지 잠재적인 손상 toohello SAP HANA 데이터 및 로그 파일 또는 데이터 나 파일을 실수로 삭제와 같은 논리 오류를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-147">This approach covers VM failures, but not potential damage toohello SAP HANA data and log files, or logical errors like deleting data or files by accident.</span></span> <span data-ttu-id="4de9d-148">또한 규정 준수 또는 법적 이유로도 백업이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-148">Backups are also required for compliance or legal reasons.</span></span> <span data-ttu-id="4de9d-149">요약하자면, SAP HANA 백업은 항상 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-149">In short, there is always a need for SAP HANA backups.</span></span>

### <a name="how-tooverify-correctness-of-sap-hana-backup"></a><span data-ttu-id="4de9d-150">어떻게 SAP HANA 백업의 tooverify 정확성</span><span class="sxs-lookup"><span data-stu-id="4de9d-150">How tooverify correctness of SAP HANA backup</span></span>
<span data-ttu-id="4de9d-151">저장소 스냅숏을 사용하는 경우 다른 시스템에서 테스트 복원을 실행하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-151">When using storage snapshots, running a test restore on a different system is recommended.</span></span> <span data-ttu-id="4de9d-152">이 방법은 백업이 백업 및 복원 작업에 대 한 올바르고 내부 프로세스 예상 대로 인지 방식으로 tooensure를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-152">This approach provides a way tooensure that a backup is correct, and internal processes for backup and restore work as expected.</span></span> <span data-ttu-id="4de9d-153">이 중요 한 점은 장애물 온-프레미스에이 목적을 위해 필요한 리소스를 일시적으로 제공 하 여 훨씬 더 쉽게 tooaccomplish hello 클라우드에서 되었기 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-153">While this is a significant hurdle on-premises, it is much easier tooaccomplish in hello cloud by providing necessary resources temporarily for this purpose.</span></span>

<span data-ttu-id="4de9d-154">간단한 복원을 수행하고 HANA가 가동 중인지 확인하는 것만으로는 충분하지 않다는 것을 명심해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-154">Keep in mind that doing a simple restore and checking if HANA is up and running is not sufficient.</span></span> <span data-ttu-id="4de9d-155">이상적으로 하나 테이블 일관성 검사 toobe 세밀 하 게 복원 하는 hello 데이터베이스 인지를 실행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-155">Ideally, one should run a table consistency check toobe sure that hello restored database is fine.</span></span> <span data-ttu-id="4de9d-156">SAP HANA는 [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584)에서 설명하는 여러 종류의 일관성 검사를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-156">SAP HANA offers several kinds of consistency checks described in [SAP Note 1977584](https://launchpad.support.sap.com/#/notes/1977584).</span></span>

<span data-ttu-id="4de9d-157">Hello SAP 웹 사이트에서도 hello 테이블 일관성 검사에 대 한 정보를 찾을 수 [테이블 및 카탈로그 일관성 검사](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b)합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-157">Information about hello table consistency check can also be found on hello SAP website at [Table and Catalog Consistency Checks](http://help.sap.com/saphelp_hanaplatform/helpdata/en/25/84ec2e324d44529edc8221956359ea/content.htm#loio9357bf52c7324bee9567dca417ad9f8b).</span></span>

<span data-ttu-id="4de9d-158">표준 파일 백업의 경우 테스트 복원이 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-158">For standard file backups, a test restore is not necessary.</span></span> <span data-ttu-id="4de9d-159">SAP HANA 도구 toocheck 백업 복원에 사용할 수 있도록: hdbbackupdiag 및 hdbbackupcheck 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-159">There are two SAP HANA tools that help toocheck which backup can be used for restore: hdbbackupdiag and hdbbackupcheck.</span></span> <span data-ttu-id="4de9d-160">이러한 도구에 대한 자세한 내용은 [복구가 가능한지 수동으로 확인](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm)(영문)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="4de9d-160">See [Manually Checking Whether a Recovery is Possible](https://help.sap.com/saphelp_hanaplatform/helpdata/en/77/522ef1e3cb4d799bab33e0aeb9c93b/content.htm) for more information about these tools.</span></span>

### <a name="pros-and-cons-of-hana-backup-versus-storage-snapshot"></a><span data-ttu-id="4de9d-161">HANA 백업 및 저장소 스냅숏의 장단점</span><span class="sxs-lookup"><span data-stu-id="4de9d-161">Pros and cons of HANA backup versus storage snapshot</span></span>

<span data-ttu-id="4de9d-162">SAP 대상이 &#39; t 제공 기본 설정 tooeither HANA 백업 저장소 스냅숏 비교 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-162">SAP doesn&#39;t give preference tooeither HANA backup versus storage snapshot.</span></span> <span data-ttu-id="4de9d-163">하나는 toouse hello 상황 및 사용 가능한 저장소 기술에 따라 결정할 수 있도록의 장단점을 나열 (참조 [계획 Your 백업 및 복구 전략](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="4de9d-163">It lists their pros and cons, so one can determine which toouse depending on hello situation and available storage technology (see [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm)).</span></span>

<span data-ttu-id="4de9d-164">파일 시스템 일관성을 보장 하지 않으면 Azure, Azure blob 스냅숏 기능 대상이 & #39 hello hello 팩트에 주의 on (참조 [PowerShell과 함께 사용 하 여 blob 스냅숏을](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span><span class="sxs-lookup"><span data-stu-id="4de9d-164">On Azure, be aware of hello fact that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency (see [Using blob snapshots with PowerShell](https://blogs.msdn.microsoft.com/cie/2016/05/17/using-blob-snapshots-with-powershell/)).</span></span> <span data-ttu-id="4de9d-165">다음 섹션, hello _저장소 스냅샷을 사용할 때 SAP HANA 데이터 일관성_,이 기능에 대 한 몇 가지 고려 사항에 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-165">hello next section, _SAP HANA data consistency when taking storage snapshots_, discusses some considerations regarding this feature.</span></span>

<span data-ttu-id="4de9d-166">또한 하나는이 문서에 설명 된 대로 blob 스냅숏과 함께 자주 작업 하는 경우 요금이 청구 될 hello toounderstand: [어떻게 스냅숏에서 요금이 발생 이해](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)-것 큰 &#39; Azure를 사용 하 여 직접적으로 t 가상 디스크입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-166">In addition, one has toounderstand hello billing implications when working frequently with blob snapshots as described in this article: [Understanding How Snapshots Accrue Charges](/rest/api/storageservices/understanding-how-snapshots-accrue-charges)—it isn&#39;t as obvious as using Azure virtual disks.</span></span>

### <a name="sap-hana-data-consistency-when-taking-storage-snapshots"></a><span data-ttu-id="4de9d-167">저장소 스냅숏을 만들 때의 SAP HANA 데이터 일관성</span><span class="sxs-lookup"><span data-stu-id="4de9d-167">SAP HANA data consistency when taking storage snapshots</span></span>

<span data-ttu-id="4de9d-168">저장소 스냅숏을 만들 때 파일 시스템 및 응용 프로그램 일관성은 복잡한 문제입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-168">File system and application consistency is a complex issue when taking storage snapshots.</span></span> <span data-ttu-id="4de9d-169">가장 쉬운 방법은 tooavoid 문제 hello SAP HANA 아래로 tooshut 거 나 hello 전체 가상 컴퓨터 일 수도 있음.</span><span class="sxs-lookup"><span data-stu-id="4de9d-169">hello easiest way tooavoid problems would be tooshut down SAP HANA, or maybe even hello whole virtual machine.</span></span> <span data-ttu-id="4de9d-170">종료는 데모 또는 프로토타입, 심지어는 개발 시스템에서도 수행할 수 있지만, 프로덕션 시스템에서는 옵션이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-170">A shutdown might be doable with a demo or prototype, or even a development system, but it is not an option for a production system.</span></span>

<span data-ttu-id="4de9d-171">Azure에서 하나에 파일 시스템 일관성을 보장 하지 않으면 Azure blob 스냅숏 기능 대상이 & #39 hello 염두에서 tookeep 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-171">On Azure, one has tookeep in mind that hello Azure blob snapshot feature doesn&#39;t guarantee file system consistency.</span></span> <span data-ttu-id="4de9d-172">하지만 제대로 작동 기능을 스냅숏 SAP HANA hello를 사용 하 여 가상 디스크만 관련 된 경우.</span><span class="sxs-lookup"><span data-stu-id="4de9d-172">It works fine however by using hello SAP HANA snapshot feature, as long as there is only a single virtual disk involved.</span></span> <span data-ttu-id="4de9d-173">하지만 단일 디스크 된 경우에 추가 항목 toobe 확인.</span><span class="sxs-lookup"><span data-stu-id="4de9d-173">But even with a single disk, additional items have toobe checked.</span></span> <span data-ttu-id="4de9d-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883)에는 저장소 스냅숏을 통한 SAP HANA 백업에 대한 중요한 정보가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-174">[SAP Note 2039883](https://launchpad.support.sap.com/#/notes/2039883) has important information about SAP HANA backups via storage snapshots.</span></span> <span data-ttu-id="4de9d-175">예를 들어에 대해 언급 hello XFS 파일 시스템으로는 필요한 toorun **xfs\_고정** tooguarantee 일관성 스냅숏 저장소를 시작 하기 전에 (참조 [xfs\_freeze(8)-Linux 매뉴얼 페이지](https://linux.die.net/man/8/xfs_freeze) 대 한 자세한 내용은 **xfs\_고정**).</span><span class="sxs-lookup"><span data-stu-id="4de9d-175">For example, it mentions that, with hello XFS file system, it is necessary toorun **xfs\_freeze** before starting a storage snapshot tooguarantee consistency (see [xfs\_freeze(8) - Linux man page](https://linux.die.net/man/8/xfs_freeze) for details on **xfs\_freeze**).</span></span>

<span data-ttu-id="4de9d-176">hello 항목 일관성의 단일 파일 시스템 여러 디스크/볼륨에 걸쳐 있는 경우에서 더 어려운 됩니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-176">hello topic of consistency becomes even more challenging in a case where a single file system spans multiple disks/volumes.</span></span> <span data-ttu-id="4de9d-177">예를 들어 mdadm 또는 LVM 및 스트라이핑을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-177">For example, by using mdadm or LVM and striping.</span></span> <span data-ttu-id="4de9d-178">SAP Note 상태 위에서 언급 한 hello:</span><span class="sxs-lookup"><span data-stu-id="4de9d-178">hello SAP Note mentioned above states:</span></span>

<span data-ttu-id="4de9d-179">_&quot;SAP HANA 데이터 볼륨에 따라 저장소 스냅숏을 만드는 동안 hello 저장 시스템 I/O tooguarantee 일관성에 염두에서에 둬야 하지만 즉, 스냅샷 작성 SAP HANA 서비스 관련 데이터 볼륨의 원자 단위 연산을 해야 합니다.&quot;_</span><span class="sxs-lookup"><span data-stu-id="4de9d-179">_&quot;But keep in mind that hello storage system has tooguarantee I/O consistency while creating a storage snapshot per SAP HANA data volume, i.e. snapshotting of an SAP HANA service-specific data volume must be an atomic operation.&quot;_</span></span>

<span data-ttu-id="4de9d-180">Azure는 4 개의 가상 디스크를 확장 하는 XFS 파일 시스템을 되어 있는 경우 hello 다음 단계에서는 hello HANA 데이터 영역을 나타내는 일관 된 스냅숏을:</span><span class="sxs-lookup"><span data-stu-id="4de9d-180">Assuming there is an XFS file system spanning four Azure virtual disks, hello following steps provide a consistent snapshot that represents hello HANA data area:</span></span>

- <span data-ttu-id="4de9d-181">HANA 스냅숏 준비</span><span class="sxs-lookup"><span data-stu-id="4de9d-181">HANA snapshot prepare</span></span>
- <span data-ttu-id="4de9d-182">Hello 파일 시스템 고정 (사용 예를 들어 **xfs\_고정**)</span><span class="sxs-lookup"><span data-stu-id="4de9d-182">Freeze hello file system (for example, use **xfs\_freeze**)</span></span>
- <span data-ttu-id="4de9d-183">Azure에서 필요한 모든 Blob 스냅숏 만들기</span><span class="sxs-lookup"><span data-stu-id="4de9d-183">Create all necessary blob snapshots on Azure</span></span>
- <span data-ttu-id="4de9d-184">Hello 파일 시스템 고정을 취소합니다</span><span class="sxs-lookup"><span data-stu-id="4de9d-184">Unfreeze hello file system</span></span>
- <span data-ttu-id="4de9d-185">Hello HANA 스냅숏 확인</span><span class="sxs-lookup"><span data-stu-id="4de9d-185">Confirm hello HANA snapshot</span></span>

<span data-ttu-id="4de9d-186">위의 hello 안전 하 게 보호 되지 않은에 파일 시스템에 관계 없이 모든 경우 toobe toouse hello 프로시저 사용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-186">Recommendation is toouse hello procedure above in all cases toobe on hello safe side, no matter which file system.</span></span> <span data-ttu-id="4de9d-187">또는 단일 디스크를 사용하거나 여러 디스크에서 mdadm 또는 LVM을 통해 스트라이핑합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-187">Or if it is a single disk or striping, via mdadm or LVM across multiple disks.</span></span>

<span data-ttu-id="4de9d-188">것은 중요 한 tooconfirm hello HANA 스냅숏입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-188">It is important tooconfirm hello HANA snapshot.</span></span> <span data-ttu-id="4de9d-189">기한 toohello &quot;쓰기 시 복사&quot; SAP HANA에는 추가 디스크 공간에 있는 동안이 사용 해야 합니다. 스냅숏 준비 모드입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-189">Due toohello &quot;Copy-on-Write,&quot; SAP HANA might not require additional disk space while in this snapshot-prepare mode.</span></span> <span data-ttu-id="4de9d-190">&#39; s 수 없습니다. 또한 toostart 새 백업을 hello SAP HANA 스냅숏 확인 될 때까지 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-190">It&#39;s also not possible toostart new backups until hello SAP HANA snapshot is confirmed.</span></span>

<span data-ttu-id="4de9d-191">Azure 백업 서비스는 Azure VM 확장 tootake hello 파일 시스템 일관성 care of를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-191">Azure Backup service uses Azure VM extensions tootake care of hello file system consistency.</span></span> <span data-ttu-id="4de9d-192">이러한 VM 확장은 독립 실행형으로 제공되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-192">These VM extensions are not available for standalone usage.</span></span> <span data-ttu-id="4de9d-193">SAP HANA 일관성 toomanage 아직 하나 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-193">One still has toomanage SAP HANA consistency.</span></span> <span data-ttu-id="4de9d-194">Hello 관련된 문서 참조 [파일 수준에서 SAP HANA Azure 백업의](sap-hana-backup-file-level.md) 자세한 정보에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-194">See hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) for more information.</span></span>

### <a name="sap-hana-backup-scheduling-strategy"></a><span data-ttu-id="4de9d-195">SAP HANA 백업 일정 전략</span><span class="sxs-lookup"><span data-stu-id="4de9d-195">SAP HANA backup scheduling strategy</span></span>

<span data-ttu-id="4de9d-196">SAP HANA 문서 hello [계획 Your 백업 및 복구 전략](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) a basic 상태 toodo 백업을 계획:</span><span class="sxs-lookup"><span data-stu-id="4de9d-196">hello SAP HANA article [Planning Your Backup and Recovery Strategy](https://help.sap.com/saphelp_hanaplatform/helpdata/en/ef/085cd5949c40b788bba8fd3c65743e/content.htm) states a basic plan toodo backups:</span></span>

- <span data-ttu-id="4de9d-197">저장소 스냅숏(매일)</span><span class="sxs-lookup"><span data-stu-id="4de9d-197">Storage snapshot (daily)</span></span>
- <span data-ttu-id="4de9d-198">파일 또는 백업 형식을 사용한 전체 데이터 백업(매주 1회)</span><span class="sxs-lookup"><span data-stu-id="4de9d-198">Complete data backup using file or bacint format (once a week)</span></span>
- <span data-ttu-id="4de9d-199">자동 로그 백업</span><span class="sxs-lookup"><span data-stu-id="4de9d-199">Automatic log backups</span></span>

<span data-ttu-id="4de9d-200">필요에 따라 저장소 스냅숏 없이 완전히 이동할 수 있습니다. 증분 또는 차등 백업과 같은 HANA 델타 백업으로 대체할 수 있습니다([델타 백업](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)(영문) 참조).</span><span class="sxs-lookup"><span data-stu-id="4de9d-200">Optionally, one could go completely without storage snapshots; they could be replaced by HANA delta backups, like incremental or differential backups (see [Delta Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)).</span></span>

<span data-ttu-id="4de9d-201">hello HANA 관리 가이드 목록의 예를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-201">hello HANA Administration guide provides an example list.</span></span> <span data-ttu-id="4de9d-202">백업 시퀀스의 다음 hello를 사용 하 여 시간에 SAP HANA tooa 특정 시점을 복구 하나 하도록 제안 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-202">It suggests that one recover SAP HANA tooa specific point in time using hello following sequence of backups:</span></span>

1. <span data-ttu-id="4de9d-203">전체 데이터 백업</span><span class="sxs-lookup"><span data-stu-id="4de9d-203">Full data backup</span></span>
2. <span data-ttu-id="4de9d-204">차등 백업</span><span class="sxs-lookup"><span data-stu-id="4de9d-204">Differential backup</span></span>
3. <span data-ttu-id="4de9d-205">증분 백업 1</span><span class="sxs-lookup"><span data-stu-id="4de9d-205">Incremental backup 1</span></span>
4. <span data-ttu-id="4de9d-206">증분 백업 2</span><span class="sxs-lookup"><span data-stu-id="4de9d-206">Incremental backup 2</span></span>
5. <span data-ttu-id="4de9d-207">로그 백업</span><span class="sxs-lookup"><span data-stu-id="4de9d-207">Log backups</span></span>

<span data-ttu-id="4de9d-208">Toowhen 및 특정 백업 유형을 수행할 얼마나 자주 정확한 일정에 관한 없으면 가능한 toogive 일반적인 지침-너무 고객 전용 이며 hello 시스템에서 발생 하는 데이터 변경 내용에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-208">Regarding an exact schedule as toowhen and how often a specific backup type should happen, it is not possible toogive a general guideline—it is too customer-specific, and depends on how many data changes occur in hello system.</span></span> <span data-ttu-id="4de9d-209">일반적인 지침으로 볼 수 있는 SAP 측면에서 기본 권장 구성이 2 개는 toomake 하나의 전체 HANA 백업 일주일에 한 번입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-209">One basic recommendation from SAP side, which can be seen as general guidance, is toomake one full HANA backup once a week.</span></span>
<span data-ttu-id="4de9d-210">에 대 한 로그 백업 hello SAP HANA 설명서를 참조 하십시오. [로그 백업을](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm)합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-210">Regarding log backups, see hello SAP HANA documentation [Log Backups](https://help.sap.com/saphelp_hanaplatform/helpdata/en/c3/bb7e33bb571014a03eeabba4e37541/content.htm).</span></span>

<span data-ttu-id="4de9d-211">SAP hello 백업 카탈로그 tookeep의 몇 가지 정리 작업을 수행 하 권장에서 무한 증가 하 고 (참조 [백업 카탈로그 및 백업 저장소에 대 한 à](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="4de9d-211">SAP also recommends doing some housekeeping of hello backup catalog tookeep it from growing infinitely (see [Housekeeping for Backup Catalog and Backup Storage](http://help.sap.com/saphelp_hanaplatform/helpdata/en/ca/c903c28b0e4301b39814ef41dbf568/content.htm)).</span></span>

### <a name="sap-hana-configuration-files"></a><span data-ttu-id="4de9d-212">SAP HANA 구성 파일</span><span class="sxs-lookup"><span data-stu-id="4de9d-212">SAP HANA configuration files</span></span>

<span data-ttu-id="4de9d-213">hello FAQ에 명시 된 대로 [SAP 참고 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA 구성 파일의 일부분이 아닌 표준 HANA 백업 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-213">As stated in hello FAQ in [SAP Note 1642148](https://launchpad.support.sap.com/#/notes/1642148), hello SAP HANA configuration files are not part of a standard HANA backup.</span></span> <span data-ttu-id="4de9d-214">필수 toorestore 시스템 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-214">They are not essential toorestore a system.</span></span> <span data-ttu-id="4de9d-215">hello HANA 구성은 hello 복원 후 수동으로 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-215">hello HANA configuration could be changed manually after hello restore.</span></span> <span data-ttu-id="4de9d-216">Tooget hello 같은 사용자 지정 구성 하나 있을 것 경우 hello 복원 프로세스는 동안 필요한 tooback hello HANA 구성 파일을 개별적으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-216">In case one would like tooget hello same custom configuration during hello restore process, it is necessary tooback up hello HANA configuration files separately.</span></span>

<span data-ttu-id="4de9d-217">동일 파일 시스템을 백업 하 고 다음 함께 toohello 최종 저장소 대상와 같은 모든 요소를 복사 tooa 전용 HANA 백업 파일 시스템, 구성 파일 toohello hello 복사도 하나 표준 HANA 백업 하려는 경우 blob 저장소 냉각용 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-217">If standard HANA backups are going tooa dedicated HANA backup file system, one could also copy hello configuration files toohello same backup filesystem, and then copy everything together toohello final storage destination like cool blob storage.</span></span>

### <a name="sap-hana-cockpit"></a><span data-ttu-id="4de9d-218">SAP HANA Cockpit</span><span class="sxs-lookup"><span data-stu-id="4de9d-218">SAP HANA Cockpit</span></span>

<span data-ttu-id="4de9d-219">SAP HANA Cockpit hello 가능성을 모니터링 하 고 브라우저를 통해 SAP HANA 관리를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-219">SAP HANA Cockpit offers hello possibility of monitoring and managing SAP HANA via a browser.</span></span> <span data-ttu-id="4de9d-220">또한 SAP HANA 백업 처리를 허용 하 고 따라서 대체 tooSAP HANA Studio ABAP DBACOCKPIT으로 사용할 수 있습니다 (참조 [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) 자세한 정보에 대 한).</span><span class="sxs-lookup"><span data-stu-id="4de9d-220">It also allows handling of SAP HANA backups, and therefore can be used as an alternative tooSAP HANA Studio and ABAP DBACOCKPIT (see [SAP HANA Cockpit](https://help.sap.com/saphelp_hanaplatform/helpdata/en/73/c37822444344f3973e0e976b77958e/content.htm) for more information).</span></span>

![이 그림 hello SAP HANA Cockpit 데이터베이스 관리 화면을 보여 줍니다.](media/sap-hana-backup-guide/image004.png)

<span data-ttu-id="4de9d-222">이 그림에서는 hello SAP HANA Cockpit 데이터베이스 관리 화면 및 왼쪽 hello hello 백업 타일입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-222">This figure shows hello SAP HANA Cockpit Database Administration Screen, and hello backup tile on hello left.</span></span> <span data-ttu-id="4de9d-223">보는 hello 백업 타일 로그인 계정에 대 한 적절 한 사용자 권한이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-223">Seeing hello backup tile requires appropriate user permissions for login account.</span></span>

![진행 중인 백업을 모니터링하는 SAP HANA Cockpit](media/sap-hana-backup-guide/image005.png)

<span data-ttu-id="4de9d-225">백업 진행 중 이므로 하 고, 완료 된 후 모든 hello 백업 세부 정보는 사용할 수 있는 SAP HANA Cockpit에 모니터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-225">Backups can be monitored in SAP HANA Cockpit while they are ongoing and, once it is finished, all hello backup details are available.</span></span>

![Gnome 데스크톱과 함께 Azure SLES 12 VM에서 Firefox를 사용하는 예](media/sap-hana-backup-guide/image006.png)

<span data-ttu-id="4de9d-227">위의 스크린샷에서 hello Azure Windows VM에서 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-227">hello previous screenshots were made from an Azure Windows VM.</span></span> <span data-ttu-id="4de9d-228">이 스크린샷은 Gnome 데스크톱과 함께 Azure SLES 12 VM에서 Firefox를 사용하는 예입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-228">This one is an example using Firefox on an Azure SLES 12 VM with Gnome desktop.</span></span> <span data-ttu-id="4de9d-229">SAP HANA Cockpit hello 옵션 toodefine SAP HANA 백업 일정이 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-229">It shows hello option toodefine SAP HANA backup schedules in SAP HANA Cockpit.</span></span> <span data-ttu-id="4de9d-230">또한 위에 나온 것 처럼, 날짜/시간을 접두사로 hello 백업 파일에 대 한 제안 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-230">As one can also see, it suggests date/time as a prefix for hello backup files.</span></span> <span data-ttu-id="4de9d-231">SAP HANA Studio hello 기본 접두사는 &quot;완료\_데이터\_백업&quot; 전체 파일 백업을 수행 하는 경우.</span><span class="sxs-lookup"><span data-stu-id="4de9d-231">In SAP HANA Studio, hello default prefix is &quot;COMPLETE\_DATA\_BACKUP&quot; when doing a full file backup.</span></span> <span data-ttu-id="4de9d-232">고유한 접두사를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-232">Using a unique prefix is recommended.</span></span>

### <a name="sap-hana-backup-encryption"></a><span data-ttu-id="4de9d-233">SAP HANA 백업 암호화</span><span class="sxs-lookup"><span data-stu-id="4de9d-233">SAP HANA backup encryption</span></span>

<span data-ttu-id="4de9d-234">SAP HANA에서는 데이터 및 로그의 암호화를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-234">SAP HANA offers encryption of data and log.</span></span> <span data-ttu-id="4de9d-235">SAP HANA 데이터 및 로그를 암호화 하지 경우 다음 hello 백업도 암호화 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-235">If SAP HANA data and log are not encrypted, then hello backups are also not encrypted.</span></span> <span data-ttu-id="4de9d-236">중인지 toohello 고객 toouse 일종의 공급 업체 솔루션 tooencrypt hello SAP HANA 백업 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-236">It is up toohello customer toouse some form of third-party solution tooencrypt hello SAP HANA backups.</span></span> <span data-ttu-id="4de9d-237">참조 [데이터 및 로그 볼륨 암호화](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind 한 SAP HANA 암호화에 대 한 자세한 정보.</span><span class="sxs-lookup"><span data-stu-id="4de9d-237">See [Data and Log Volume Encryption](https://help.sap.com/saphelp_hanaplatform/helpdata/en/dc/01f36fbb5710148b668201a6e95cf2/content.htm) toofind out more about SAP HANA encryption.</span></span>

<span data-ttu-id="4de9d-238">Microsoft Azure에서 고객 hello 암호화 기능 tooencrypt IaaS VM을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-238">On Microsoft Azure, a customer could use hello IaaS VM encryption feature tooencrypt.</span></span> <span data-ttu-id="4de9d-239">예를 들어 전용된 데이터 디스크가 연결 된 toohello VM을 사용 하 여은 사용 되는 toostore SAP HANA 백업 보내어 해당이 디스크의 복사본을 만들 수 하나 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-239">For example, one could use dedicated data disks attached toohello VM, which are used toostore SAP HANA backups, then make copies of these disks.</span></span>

<span data-ttu-id="4de9d-240">Azure 백업 서비스에서 암호화 된 Vm/디스크를 처리할 수 있습니다 (참조 [를 tooback 및 복원 방법을 Azure 백업을 사용 하 여 가상 컴퓨터를 암호화](../../../backup/backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="4de9d-240">Azure Backup service can handle encrypted VMs/disks (see [How tooback up and restore encrypted virtual machines with Azure Backup](../../../backup/backup-azure-vms-encryption.md)).</span></span>

<span data-ttu-id="4de9d-241">또 다른 옵션 toomaintain hello SAP HANA VM 및 해당 디스크를 암호화 하지 않고 되 고 암호화가 사용 하는 저장소 계정에 hello SAP HANA 백업 파일을 저장 합니다. (참조 [미사용 데이터에 대 한 Azure 저장소 서비스 암호화](../../../storage/common/storage-service-encryption.md)) .</span><span class="sxs-lookup"><span data-stu-id="4de9d-241">Another option would be toomaintain hello SAP HANA VM and its disks without encryption, and store hello SAP HANA backup files in a storage account for which encryption was enabled (see [Azure Storage Service Encryption for Data at Rest](../../../storage/common/storage-service-encryption.md)).</span></span>

## <a name="test-setup"></a><span data-ttu-id="4de9d-242">테스트 설정</span><span class="sxs-lookup"><span data-stu-id="4de9d-242">Test setup</span></span>

### <a name="test-virtual-machine-on-azure"></a><span data-ttu-id="4de9d-243">Azure에서 가상 컴퓨터 테스트</span><span class="sxs-lookup"><span data-stu-id="4de9d-243">Test Virtual Machine on Azure</span></span>

<span data-ttu-id="4de9d-244">백업/복원 테스트를 수행 하는 hello에 설치 된 Azure GS5 VM에서 SAP HANA 사용 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-244">An SAP HANA installation in an Azure GS5 VM was used for hello following backup/restore tests.</span></span>

![이 그림 hello hello HANA 테스트 VM에 대 한 Azure 포털 개요의 일부를 보여 줍니다.](media/sap-hana-backup-guide/image007.png)

<span data-ttu-id="4de9d-246">이 그림에서는 hello hello HANA 테스트 VM에 대 한 Azure 포털 개요의 일부를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-246">This figure shows part of hello Azure portal overview for hello HANA test VM.</span></span>

### <a name="test-backup-size"></a><span data-ttu-id="4de9d-247">백업 크기 테스트</span><span class="sxs-lookup"><span data-stu-id="4de9d-247">Test backup size</span></span>

![이 그림 hello HANA Studio에서 백업 콘솔에서 가져왔으면 고 hello HANA 인덱스 서버에 대 한 229 GB의 hello 백업 파일 크기를 표시](media/sap-hana-backup-guide/image008.png)

<span data-ttu-id="4de9d-249">더미 테이블 되었습니다 채워진 데이터 tooget 200 개가 넘는 GB tooderive 현실적인 성능 데이터의 전체 데이터 백업 크기입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-249">A dummy table was filled up with data tooget a total data backup size of over 200 GB tooderive realistic performance data.</span></span> <span data-ttu-id="4de9d-250">hello 그림 hello HANA Studio에서 백업 콘솔에서 가져왔으면 및 229 GB hello HANA 인덱스 서버에 대 한 hello 백업 파일 크기를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-250">hello figure was taken from hello backup console in HANA Studio and shows hello backup file size of 229 GB for hello HANA index server.</span></span> <span data-ttu-id="4de9d-251">Hello 테스트에 대 한 hello 기본 백업 접두사 "COMPLETE_DATA_BACKUP" SAP HANA Studio에서 사용 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-251">For hello tests, hello default backup prefix "COMPLETE_DATA_BACKUP" in SAP HANA Studio was used.</span></span> <span data-ttu-id="4de9d-252">실제 프로덕션 시스템에서는 더 유용한 접두사를 정의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-252">In real production systems, a more useful prefix should be defined.</span></span> <span data-ttu-id="4de9d-253">SAP HANA Cockpit에서 날짜/시간을 제안합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-253">SAP HANA Cockpit suggests date/time.</span></span>

### <a name="test-tool-toocopy-files-directly-tooazure-storage"></a><span data-ttu-id="4de9d-254">테스트 도구 toocopy 파일을 직접 tooAzure 저장소</span><span class="sxs-lookup"><span data-stu-id="4de9d-254">Test tool toocopy files directly tooAzure storage</span></span>

<span data-ttu-id="4de9d-255">tootransfer SAP HANA 백업 파일 모두 대상과 것을 지원 하기 때문에 직접 tooAzure blob 저장소 또는 Azure 파일 공유 hello blobxfer 도구를 사용 하는 tooits 명령줄 인터페이스 인해 자동화 스크립트에 쉽게 통합할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-255">tootransfer SAP HANA backup files directly tooAzure blob storage, or Azure file shares, hello blobxfer tool was used because it supports both targets and it can be easily integrated into automation scripts due tooits command-line interface.</span></span> <span data-ttu-id="4de9d-256">hello blobxfer 도구에서 사용할 수는 [GitHub](https://github.com/Azure/blobxfer)합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-256">hello blobxfer tool is available on [GitHub](https://github.com/Azure/blobxfer).</span></span>

### <a name="test-backup-size-estimation"></a><span data-ttu-id="4de9d-257">테스트 백업 크기 추정</span><span class="sxs-lookup"><span data-stu-id="4de9d-257">Test backup size estimation</span></span>

<span data-ttu-id="4de9d-258">SAP HANA의 중요 한 tooestimate hello 백업 크기는</span><span class="sxs-lookup"><span data-stu-id="4de9d-258">It is important tooestimate hello backup size of SAP HANA.</span></span> <span data-ttu-id="4de9d-259">이 예상치는 다양 한 백업 파일에 대 한 hello 최대 백업 파일 크기를 정의 하 여 tooimprove 성능 도움이 due tooparallelism 파일 복사 중입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-259">This estimate helps tooimprove performance by defining hello max backup file size for a number of backup files, due tooparallelism during a file copy.</span></span> <span data-ttu-id="4de9d-260">(자세한 내용은 이 문서의 뒷부분에서 설명합니다.) 결정 해야 하나 toodo 백업 또는 델타 전체 백업 (증분 또는 차등) 여부.</span><span class="sxs-lookup"><span data-stu-id="4de9d-260">(Those details are explained later in this article.) One must also decide whether toodo a full backup or a delta backup (incremental or differential).</span></span>

<span data-ttu-id="4de9d-261">다행히은 hello 백업 파일의 hello 크기를 예상 하는 간단한 SQL 문: **선택 \* m에서\_백업\_크기\_양이나** (참조 [ 예상 hello 공간 필요한에 hello 파일 시스템 데이터 백업에 대 한](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span><span class="sxs-lookup"><span data-stu-id="4de9d-261">Fortunately, there is a simple SQL statement that estimates hello size of hello backup files: **select \* from M\_BACKUP\_SIZE\_ESTIMATIONS** (see [Estimate hello Space Needed in hello File System for a Data Backup](https://help.sap.com/saphelp_hanaplatform/helpdata/en/7d/46337b7a9c4c708d965b65bc0f343c/content.htm)).</span></span>

![이 SQL 문은의 hello 출력 hello 전체 데이터 백업 디스크의 실제 크기 hello 거의 정확 하 게 일치](media/sap-hana-backup-guide/image009.png)

<span data-ttu-id="4de9d-263">Hello 테스트 시스템에이 SQL 문은의 hello 출력 hello 전체 데이터 백업 디스크의 실제 크기 hello 거의 정확 하 게 일치합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-263">For hello test system, hello output of this SQL statement matches almost exactly hello real size of hello full data backup on disk.</span></span>

### <a name="test-hana-backup-file-size"></a><span data-ttu-id="4de9d-264">테스트 HANA 백업 파일 크기</span><span class="sxs-lookup"><span data-stu-id="4de9d-264">Test HANA backup file size</span></span>

![hello HANA Studio에 대 한 백업 콘솔에서는 HANA 백업 파일의 한 toorestrict hello 최대 파일 크기](media/sap-hana-backup-guide/image010.png)

<span data-ttu-id="4de9d-266">hello HANA Studio 백업 콘솔 HANA 백업 파일의 한 toorestrict hello 최대 파일 크기를 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-266">hello HANA Studio backup console allows one toorestrict hello max file size of HANA backup files.</span></span> <span data-ttu-id="4de9d-267">Hello 샘플 환경에서 해당 기능을 사용 하면 가능한 tooget 대신 하나의 230 GB의 백업 파일에 여러 개의 더 작은 백업 파일입니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-267">In hello sample environment, that feature makes it possible tooget multiple smaller backup files instead of one 230-GB backup file.</span></span> <span data-ttu-id="4de9d-268">파일 크기가 성능에 상당한 영향 (hello 관련된 문서 참조 [파일 수준에서 SAP HANA Azure 백업의](sap-hana-backup-file-level.md)).</span><span class="sxs-lookup"><span data-stu-id="4de9d-268">Smaller file size has a significant impact on performance (see hello related article [SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md)).</span></span>

## <a name="summary"></a><span data-ttu-id="4de9d-269">요약</span><span class="sxs-lookup"><span data-stu-id="4de9d-269">Summary</span></span>

<span data-ttu-id="4de9d-270">다음 표에서 hello를 Azure 가상 컴퓨터에서 실행 되는 SAP HANA 데이터베이스 솔루션 tooback의 장점 및 단점을 표시 하는 hello 테스트 결과에 따라 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-270">Based on hello test results hello following tables show pros and cons of solutions tooback up an SAP HANA database running on Azure virtual machines.</span></span>

<span data-ttu-id="4de9d-271">**SAP HANA toohello 파일 시스템 및 복사 백업에 백업 파일 나중에 toohello 마지막 백업 대상**</span><span class="sxs-lookup"><span data-stu-id="4de9d-271">**Back up SAP HANA toohello file system and copy backup files afterwards toohello final backup destination**</span></span>

|<span data-ttu-id="4de9d-272">해결 방법</span><span class="sxs-lookup"><span data-stu-id="4de9d-272">Solution</span></span>                                           |<span data-ttu-id="4de9d-273">장점</span><span class="sxs-lookup"><span data-stu-id="4de9d-273">Pros</span></span>                                 |<span data-ttu-id="4de9d-274">단점</span><span class="sxs-lookup"><span data-stu-id="4de9d-274">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="4de9d-275">VM 디스크에서 HANA 백업 유지</span><span class="sxs-lookup"><span data-stu-id="4de9d-275">Keep HANA backups on VM disks</span></span>                      |<span data-ttu-id="4de9d-276">추가 관리 작업 없음</span><span class="sxs-lookup"><span data-stu-id="4de9d-276">No additional management efforts</span></span>     |<span data-ttu-id="4de9d-277">로컬 VM 디스크 공간 사용</span><span class="sxs-lookup"><span data-stu-id="4de9d-277">Eats up local VM disk space</span></span>           |
|<span data-ttu-id="4de9d-278">Blobxfer 도구 toocopy 백업 파일 tooblob 저장소</span><span class="sxs-lookup"><span data-stu-id="4de9d-278">Blobxfer tool toocopy backup files tooblob storage</span></span> |<span data-ttu-id="4de9d-279">병렬 처리 수준 toocopy 여러 파일, choice toouse 쿨 blob 저장소</span><span class="sxs-lookup"><span data-stu-id="4de9d-279">Parallelism toocopy multiple files, choice toouse cool blob storage</span></span> | <span data-ttu-id="4de9d-280">추가 도구 유지 관리 및 사용자 지정 스크립팅</span><span class="sxs-lookup"><span data-stu-id="4de9d-280">Additional tool maintenance and custom scripting</span></span> | 
|<span data-ttu-id="4de9d-281">Powershell 또는 CLI를 통한 Blob 복사</span><span class="sxs-lookup"><span data-stu-id="4de9d-281">Blob copy via Powershell or CLI</span></span>                    |<span data-ttu-id="4de9d-282">추가 도구 필요하지 않음, Azure Powershell 또는 CLI를 통해 수행할 수 있음</span><span class="sxs-lookup"><span data-stu-id="4de9d-282">No additional tool necessary, can be accomplished via Azure Powershell or CLI</span></span> |<span data-ttu-id="4de9d-283">수동 프로세스 고객에 게 tootake care of 스크립트 작성 및 복원에 대 한 복사 된 blob 관리</span><span class="sxs-lookup"><span data-stu-id="4de9d-283">manual process, customer has tootake care of scripting and management of copied blobs for restore</span></span>|
|<span data-ttu-id="4de9d-284">복사본 tooNFS 공유</span><span class="sxs-lookup"><span data-stu-id="4de9d-284">Copy tooNFS share</span></span>                                  |<span data-ttu-id="4de9d-285">전처리 hello HANA 서버에 영향을 주지 않고 다른 VM에서 백업 파일의</span><span class="sxs-lookup"><span data-stu-id="4de9d-285">Post-processing of backup files on other VM without impact on hello HANA server</span></span>|<span data-ttu-id="4de9d-286">느린 복사 프로세스</span><span class="sxs-lookup"><span data-stu-id="4de9d-286">Slow copy process</span></span>|
|<span data-ttu-id="4de9d-287">Blobxfer 복사 tooAzure 파일 서비스</span><span class="sxs-lookup"><span data-stu-id="4de9d-287">Blobxfer copy tooAzure File Service</span></span>                |<span data-ttu-id="4de9d-288">로컬 VM 디스크 공간 사용 안 함</span><span class="sxs-lookup"><span data-stu-id="4de9d-288">Doesn't eat up space on local VM disks</span></span>|<span data-ttu-id="4de9d-289">HANA 백업에서 직접 쓰기 지원 안 함, 현재 파일 공유 크기 제한은 5TB임</span><span class="sxs-lookup"><span data-stu-id="4de9d-289">No direct write support by HANA backup, size restriction of file share currently at 5 TB</span></span>|
|<span data-ttu-id="4de9d-290">Azure Backup 에이전트</span><span class="sxs-lookup"><span data-stu-id="4de9d-290">Azure Backup Agent</span></span>                                 | <span data-ttu-id="4de9d-291">선호하는 솔루션이 될 것임</span><span class="sxs-lookup"><span data-stu-id="4de9d-291">Would be preferred solution</span></span>         | <span data-ttu-id="4de9d-292">Linux에서는 현재 사용할 수 없음</span><span class="sxs-lookup"><span data-stu-id="4de9d-292">Currently not available on Linux</span></span>    |



<span data-ttu-id="4de9d-293">**저장소 스냅숏에 기반한 SAP HANA 백업**</span><span class="sxs-lookup"><span data-stu-id="4de9d-293">**Backup SAP HANA based on storage snapshots**</span></span>

|<span data-ttu-id="4de9d-294">해결 방법</span><span class="sxs-lookup"><span data-stu-id="4de9d-294">Solution</span></span>                                           |<span data-ttu-id="4de9d-295">장점</span><span class="sxs-lookup"><span data-stu-id="4de9d-295">Pros</span></span>                                 |<span data-ttu-id="4de9d-296">단점</span><span class="sxs-lookup"><span data-stu-id="4de9d-296">Cons</span></span>                                  |
|---------------------------------------------------|-------------------------------------|--------------------------------------|
|<span data-ttu-id="4de9d-297">Azure Backup 서비스</span><span class="sxs-lookup"><span data-stu-id="4de9d-297">Azure Backup Service</span></span>                               | <span data-ttu-id="4de9d-298">Blob 스냅숏에 기반한 VM 백업 허용</span><span class="sxs-lookup"><span data-stu-id="4de9d-298">Allows VM backup based on blob snapshots</span></span> | <span data-ttu-id="4de9d-299">파일 수준 복원을 사용 하지 않을 경우에 새 VM 만들기 hello hello 요구 새 SAP HANA 라이선스 키에 다음 사용 하는 hello 복원 프로세스에 대 한 필요</span><span class="sxs-lookup"><span data-stu-id="4de9d-299">When not using file level restore, it requires hello creation of a new VM for hello restore process, which then implies hello need of a new SAP HANA license key</span></span>|
|<span data-ttu-id="4de9d-300">수동 Blob 스냅숏</span><span class="sxs-lookup"><span data-stu-id="4de9d-300">Manual blob snapshots</span></span>                              | <span data-ttu-id="4de9d-301">유연성 toocreate 및 복원 특정 VM 디스크를 변경 하지 않고 hello 고유 VM ID</span><span class="sxs-lookup"><span data-stu-id="4de9d-301">Flexibility toocreate and restore specific VM disks without changing hello unique VM ID</span></span>|<span data-ttu-id="4de9d-302">Hello 고객 toobe 있는 모든 수동 작업</span><span class="sxs-lookup"><span data-stu-id="4de9d-302">All manual work, which has toobe done by hello customer</span></span>|

## <a name="next-steps"></a><span data-ttu-id="4de9d-303">다음 단계</span><span class="sxs-lookup"><span data-stu-id="4de9d-303">Next steps</span></span>
* <span data-ttu-id="4de9d-304">[SAP HANA Azure에 백업 파일 수준](sap-hana-backup-file-level.md) hello 파일 기반 백업 옵션에 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-304">[SAP HANA Azure Backup on file level](sap-hana-backup-file-level.md) describes hello file-based backup option.</span></span>
* <span data-ttu-id="4de9d-305">[SAP HANA 백업 스냅숏을 기반으로 저장소](sap-hana-backup-storage-snapshots.md) hello 저장소 스냅숏 기반 백업 옵션에 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-305">[SAP HANA backup based on storage snapshots](sap-hana-backup-storage-snapshots.md) describes hello storage snapshot-based backup option.</span></span>
* <span data-ttu-id="4de9d-306">tooestablish 고가용성 및 (대형 인스턴스) Azure에서 SAP HANA의 재해 복구 계획의 참조 toolearn [SAP HANA (대형 인스턴스) 고가용성 및 재해 복구 Azure에서](hana-overview-high-availability-disaster-recovery.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="4de9d-306">toolearn how tooestablish high availability and plan for disaster recovery of SAP HANA on Azure (large instances), see [SAP HANA (large instances) high availability and disaster recovery on Azure](hana-overview-high-availability-disaster-recovery.md).</span></span>
