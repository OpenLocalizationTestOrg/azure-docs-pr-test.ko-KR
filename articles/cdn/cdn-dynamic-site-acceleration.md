---
title: "Azure CDN을 통해 동적 사이트 가속"
description: "동적 사이트 가속 심층 분석"
services: cdn
documentationcenter: 
author: smcevoy
manager: erikre
editor: 
ms.assetid: 
ms.service: cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/02/2017
ms.author: v-semcev
ms.openlocfilehash: be2719e0e02c8bc69800ef4a3e7da3c3164cb9dd
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/18/2017
---
# <a name="dynamic-site-acceleration-via-azure-cdn"></a>Azure CDN을 통해 동적 사이트 가속

소셜 미디어소셜 미디어, 전자 상거래 및 하이퍼 개인 설정 웹의 폭발적 증가로 인해 최종 사용자에게 제공되는 콘텐츠의 증가율도 실시간으로 빠르게 성장합니다. 사용자는 브라우저, 위치, 장치 또는 네트워크와 독립된 빠르고 안정적인 개인 설정 웹 환경을 기대합니다. 그러나 이러한 환경을 구성하는 매우 혁신적인 기능도 페이지 다운로드 속도를 저하시키고 소비자 환경의 품질을 위험에 노출합니다. 

표준 CDN 기능에는 고정 파일의 배달 속도를 향상시키기 위해 파일을 최종 사용자에게 가깝게 캐시하는 기능이 포함됩니다. 그러나 동적 웹 응용 프로그램에서 서버가 사용자 동작에 대한 응답으로 콘텐츠를 생성하기 때문에 에지 위치에 해당 콘텐츠를 캐싱할 수 없습니다. 이러한 콘텐츠의 배달 속도를 향상시키는 작업은 기존의 에지 캐싱보다 더 복잡하고 배달할 전체 데이터 경로에 있는 각 요소를 처음부터 세밀하게 조정하는 종단 간 솔루션이 필요합니다. Azure CDN DSA(동적 사이트 가속)을 사용하여 동적 콘텐츠가 포함된 웹 페이지의 성능이 크게 향상되었습니다.

Akamai 및 Verizon의 Azure CDN은 끝점을 만드는 동안 **최적화 목표** 메뉴를 통해 DSA 최적화를 제공합니다.

## <a name="configuring-cdn-endpoint-to-accelerate-delivery-of-dynamic-files"></a>동적 파일 배달을 가속화하도록 CDN 끝점 구성

끝점을 만드는 동안 **최적화 목표** 속성 선택 영역에서 **동적 사이트 가속** 옵션을 선택하여 Azure Portal을 통해 동적 파일의 배달을 최적화하도록 CDN 끝점을 구성할 수 있습니다. REST API나 클라이언트 SDK를 사용하여 프로그래밍 방식으로 같은 작업을 수행할 수도 있습니다. 

### <a name="probe-path"></a>프로브 경로
프로브 경로는 동적 사이트 가속에 지정된 기능이고 생성을 위해 유효한 프로브 경로가 필요합니다. DSA는 원본에 위치한 작은 *프로브 경로* 파일을 사용하여 CDN에 대한 네트워크 라우팅 구성을 최적화합니다. 사이트에 샘플 파일을 다운로드하고 업로드하거나 약 10KB인 원본의 기존 자산이 있는 경우 프로브 경로에 대신 사용할 수 있습니다.

> [!Note]
> DSA 사용 시 별도 요금이 발생합니다. 자세한 내용은 [가격 책정 페이지](https://azure.microsoft.com/pricing/details/cdn/)를 참조하세요.

다음 스크린샷에서는 Azure Portal을 통한 프로세스를 보여줍니다.
 
![새 CDN 끝점 추가](./media/cdn-dynamic-site-acceleration/01_Endpoint_Profile.png) 

*그림 1: CDN 프로필에서 새 CDN 끝점 추가*
 
![DSA를 사용하여 새 CDN 끝점 만들기](./media/cdn-dynamic-site-acceleration/02_Optimized_DSA.png)  

*그림 2: 동적 사이트 가속 최적화가 선택된 CDN 끝점 만들기*

CDN 끝점을 만든 다음에는 특정 조건에 맞는 모든 파일에 대해 DSA 최적화를 적용합니다. 다음 섹션에서는 DSA 최적화에 대해 자세히 설명합니다.

## <a name="dsa-optimization-using-azure-cdn"></a>Azure CDN을 사용하여 DSA 최적화

Azure CDN의 동적 사이트 가속을 통해 다음 기술을 사용하는 동적 자산 배달 속도가 향상됩니다.

-   경로 최적화
-   TCP 최적화
-   개체 사전 인출(Akamai에만 해당)
-   모바일 이미지 압축(Akamai에만 해당)

### <a name="route-optimization"></a>경로 최적화

인터넷이 매우 동적이기 때문에 경로 최적화가 중요합니다. 여기서 트래픽 및 일시적인 중단은 지속적으로 네트워크 토폴로지를 변경합니다. BGP(경계 게이트웨이 프로토콜)는 인터넷의 라우팅 프로토콜이지만 중계 PoP(Point of Presence) 서버를 통한 더 빠른 경로가 있을 수 있습니다. 

경로 최적화는 사이트에 계속 액세스할 수 있고 동적 콘텐츠를 가능한 가장 빠르고 가장 안정적인 경로를 통해 최종 사용자에게 배달하도록 원본에 최적인 경로를 선택합니다. 

Akamai 네트워크는 원본과 CDN 에지 간에 가장 빠른 경로를 결정하기 위해 오픈 인터넷에 기본 BGP 경로를 사용할 뿐만 아니라 실시간 데이터를 수집하고 Akamai 서버에서 다른 노드를 통한 다양한 경로를 비교하는 기술을 사용합니다. 이러한 기술은 인터넷 정체 지점과 긴 경로를 회피합니다. 

마찬가지로, Verizon 네트워크는 Anycast DNS, 고용량 지원 PoP 및 상태 점검 조합을 사용하여 클라이언트에서 원본까지 최상의 경로 데이터에 대한 최적의 게이트웨이를 결정합니다.
 
결과적으로 완전히 동적인 트랜잭션 콘텐츠를 캐시할 수 없는 경우에도 보다 빠르고 안정적으로 최종 사용자에게 전달할 수 있습니다. 

### <a name="tcp-optimizations"></a>TCP 최적화

TCP(Transmission Control Protocol)는 IP 네트워크의 응용 프로그램 간에 정보를 전달하는 데 사용되는 인터넷 프로토콜 모음의 표준입니다.  기본적으로 대규모의 비효율성이 발생하는 네트워크 정체를 방지하는 제한뿐만 아니라 TCP 연결을 설정하는 데 필요한 몇 가지 요청이 있습니다. Akamai의 Azure CDN은 3개의 영역을 최적화하여 이 문제를 다룹니다. 

 - 느린 시작 제거
 - 영구 연결 활용
 - TCP 패킷 매개 변수 조정(Akamai에만 해당)

#### <a name="eliminating-slow-start"></a>느린 시작 제거

*느린 시작*은 네트워크를 통해 전송되는 데이터 양을 제한하여 네트워크 정체를 방지하는 TCP 프로토콜의 일부입니다. 이 기능은 최대값에 도달하거나 패킷 손실이 감지될 때까지 먼저 발신자와 수신자 사이의 작은 정체 창 크기로 시작합니다.

Akamai 및 Verizon의 Azure CDN은 세 단계로 느린 시작을 제거합니다.

1.  Akamai와 Verizon의 네트워크 모두 상태 및 대역폭 모니터링을 사용하여 에지 PoP 서버 간 연결의 대역폭을 측정합니다.
2. 에지 PoP 서버 간에 메트릭이 공유되므로 서버는 주위의 다른 PoP의 네트워크 조건 및 서버 상태에 대해 알게 됩니다.  
3. 이제 CDN 에지 서버는 근접한 다른 CDN 에지 서버와 통신할 때 최적의 창 크기와 같은 일부 전송 매개 변수에 대해 가정할 수 있습니다. 이 단계는 CDN 에지 서버 간의 연결 상태가 더 많은 패킷의 데이터를 전송할 수 있는 경우 초기 정체 창 크기를 늘릴 수 있음을 의미합니다.  

#### <a name="leveraging-persistent-connections"></a>영구 연결 활용

CDN을 사용하면 원본에 직접 연결된 사용자와 비교하여 원본 서버에 연결된 고유한 컴퓨터 수가 줄어듭니다. 또한 Akamai 및 Verizon의 Azure CDN은 사용자 요청을 풀링하여 원본과 연결 수를 줄입니다.

앞서 언급했듯이 TCP 연결에는 새 연결을 설정하는 과정에서 몇 가지 요청을 받습니다. "HTTP 연결 유지"라고도 하는 영구 연결은 여러 HTTP 요청에 기존 TCP 연결을 다시 사용하여 왕복 시간을 저장하고 배달 속도를 향상시킵니다. 

또한 Verizon 네트워크는 TCP 연결을 통해 정기적인 연결 유지 패킷을 보내 열린 연결이 닫히지 않게 해줍니다.

#### <a name="tuning-tcp-packet-parameters"></a>TCP 패킷 매개 변수 조정

또한 Akamai에서 Azure CDN은 서버 간 연결을 제어하는 매개 변수를 조정하고 다음 기법을 수행하여 사이트에서 포함된 콘텐츠를 검색하는 데 필요한 긴 장거리 왕복 시간을 감소시킵니다.

1.  초기 정체 창을 증가시키면 승인을 기다리지 않고 더 패킷을 이동할 수 있습니다.
2.  초기 재전송 시간 제한을 감소시키면 손실을 감지하고 재전송을 더 빠르게 수행할 수 있습니다.
3.  전송 중에 손실된 패킷을 가정하기 전에 대기 시간을 줄이기 위해 최소 및 최대 재전송 시간 제한을 감소시킵니다.

### <a name="object-prefetch-akamai-only"></a>개체 사전 인출(Akamai에만 해당)

대부분의 웹 사이트는 이미지 및 스크립트와 같은 다양한 리소스를 참조하는 HTML 페이지로 구성됩니다. 일반적으로 클라이언트가 웹 페이지를 요청하면 브라우저는 먼저 HTML 개체를 다운로드하고 구문을 분석한 다음 전체 페이지를 로드하는 데 필요한 연결된 자산을 추가로 요청합니다. 

*사전 인출*은 HTML이 브라우저에 제공되는 반면 브라우저에서 이러한 개체를 요청하기 전에 HTML 페이지에 포함된 이미지 및 스크립트를 검색하는 기술입니다. 

사전 인출에서 **사전 인출** 옵션은 CDN이 HTML 기반 페이지를 클라이언트의 브라우저에 제공하는 시점에 켜집니다. CDN은 HTML 파일의 구문을 분석하고, 연결된 리소스를 추가로 요청하고, 해당 캐시에 저장합니다. 클라이언트에서 연결된 자산을 요청하는 경우 CDN 에지 서버에는 이미 요청된 개체가 있으므로 원본에 왕복하지 않고 즉시 제공할 수 있습니다. 이 최적화는 캐시할 수 있는 콘텐츠 및 캐시할 수 없는 콘텐츠에 모두 제공됩니다.

### <a name="adaptive-image-compression-akamai-only"></a>적응 이미지 압축(Akamai에만 해당)

특히 모바일과 같은 일부 장치는 때때로 네트워크 속도가 저하되는 경우가 있습니다. 이러한 시나리오에서는 사용자가 고해상도 이미지를 오래 기다리지 않고 해당 웹 페이지에서 작은 이미지를 신속하게 수신할 수 있다는 장점이 있습니다.

이 기능은 자동으로 네트워크 품질을 모니터링하여 네트워크가 느려지는 경우 배달 속도를 개선하기 위해 표준 JPEG 압축 메서드를 사용합니다.

적응 이미지 압축 | 파일 확장명  
--- | ---  
JPEG 압축 | .jpg, .jpeg, .jpe, .jig, .jgig, .jgi

## <a name="caching"></a>구성

원본에 캐시 컨트롤을 포함하고 응답에서 헤더가 만료된 경우에도 DSA를 통해 캐싱이 CDN에서 기본적으로 해제되어 있습니다. DSA는 각 클라이언트에 고유하므로 캐싱되어서는 안 되는 일반적으로 동적 자산에 사용되기 때문에 이 기본값은 해제되어 있으며, 기본값으로 캐싱을 설정하면 이 기능이 중단될 수 있습니다.

고정 자산과 동적 자산이 혼합된 웹 사이트가 있는 경우 최상의 성능을 얻기 위해서는 하이브리드 접근 방식을 취하는 것이 가장 좋습니다. 

Verizon Premium에 ADN을 사용하고 있는 경우 규칙 엔진을 사용하여 특정 사례에 캐싱을 다시 사용 설정할 수 있습니다.  

대안은 2개의 CDN 끝점을 사용하는 것입니다. DSA 지원 끝점은 동적 자산을 제공하고, 일반 웹 제공 등의 고정 최적화 유형의 다른 끝점은 캐싱 가능한 자산을 제공하는 것입니다. 이 대안을 달성하려면 웹 페이지 URL을 수정하여 사용하려는 CDN 끝점의 자산에 직접 연결해야 합니다. 

예: `mydynamic.azureedge.net/index.html`은 동적 페이지이고 DSA 끝점에서 로드됩니다.  html 페이지는 `mystatic.azureedge.net/banner.jpg` 및 `mystatic.azureedge.net/scripts.js` 등의 정적 CDN 끝점에서 로드한 JavaScript 라이브러리 또는 이미지와 같은 여러 정적 자산을 참조합니다. 

ASP.NET 웹 응용 프로그램의 컨트롤러를 사용하여 특정 CDN URL을 통해 콘텐츠를 제공하는 방법은 [여기](https://docs.microsoft.com/azure/cdn/cdn-cloud-service-with-cdn#controller)에서 예를 확인할 수 있습니다.




