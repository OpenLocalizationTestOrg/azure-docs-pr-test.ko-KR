---
title: "장애 조치 그룹 및 활성 지역 복제 - Azure SQL Database | Microsoft Docs"
description: "활성 지역 복제가 있는 자동 장애 조치 그룹을 사용하면 Azure 데이터 센터에서 데이터베이스의 4개 복제본을 설치하고 가동 중단 발생 시 자동으로 장애 조치를 수행할 수 있습니다."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 9a2171f59c6192115dc1820e7f033fd783c9e077
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/29/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="21993-103">개요: 장애 조치 그룹 및 활성 지역 복제</span><span class="sxs-lookup"><span data-stu-id="21993-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="21993-104">활성 지역 복제를 사용하면 동일하거나 다른 데이터 센터 위치(하위 지역)에 최대 4개의 읽기 기능한 보조 데이터베이스를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-104">Active geo-replication enables you to configure up to four readable secondary databases in the same or different data center locations (regions).</span></span> <span data-ttu-id="21993-105">데이터 센터 정전 또는 주 데이터베이스에 연결하지 못하는 경우 쿼리 및 장애 조치(failover)에 보조 데이터베이스를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-105">Secondary databases are available for querying and for failover in the case of a data center outage or the inability to connect to the primary database.</span></span> <span data-ttu-id="21993-106">장애 조치는 사용자의 응용 프로그램에서 수동으로 시작되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-106">The failover must be initiated manually by the application of the user.</span></span> <span data-ttu-id="21993-107">장애 조치 후 새 주 데이터베이스에는 다른 연결 끝점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-107">After failover, the new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="21993-108">활성 지역 복제는 모든 지역의 현재 모든 서비스 계층에 있는 모든 데이터베이스에 대해 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="21993-109">Azure SQL Database 자동 장애 조치 그룹(미리 보기 상태)은 규모에 맞게 지역에서 복제 관계, 연결 및 장애 조치를 자동으로 관리하도록 설계된 SQL Database 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed to automatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="21993-110">이 기능을 사용하면 고객은 주 지역에서 SQL Database 서비스의 가용성을 완전히 또는 부분적으로 상실하게 하는 치명적인 지역적 장애 또는 계획되지 않은 다른 이벤트가 발생한 후에 보조 지역의 여러 관련 데이터베이스를 자동으로 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-110">With it, the customers gain the ability to automatically recover multiple related databases in the secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of the SQL Database service’s availability in the primary region.</span></span> <span data-ttu-id="21993-111">또한 읽을 수 있는 보조 데이터베이스를 사용하여 읽기 전용 워크로드를 오프로드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-111">Additionally, they can use the readable secondary databases to offload read-only workloads.</span></span>  <span data-ttu-id="21993-112">자동 장애 조치 그룹에는 여러 데이터베이스가 포함되므로 주 서버에서 이 그룹을 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-112">Because auto-failover groups involve multiple databases they must be configured on the primary server.</span></span> <span data-ttu-id="21993-113">기본 서버와 보조 서버는 모두 동일한 구독에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-113">Both primary and secondary servers must be in the same subscription.</span></span> <span data-ttu-id="21993-114">자동 장애 조치 그룹은 그룹의 모든 데이터베이스를 다른 지역에 있는 하나의 보조 서버로만 복제할 수 있도록 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-114">Auto-failover groups support replication of all databases in the group to only one secondary server in a different region.</span></span> <span data-ttu-id="21993-115">자동 장애 조치 그룹 없는 활성 지역 복제는 모든 지역에서 최대 4개의 보조 서버를 허용합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-115">Active geo-replication, without auto-failover groups, allows up to 4 secondaries in any region.</span></span>

<span data-ttu-id="21993-116">활성 지역 복제를 사용 중이고 어떤 이유로든 주 데이터베이스가 실패하거나 단순히 오프라인으로 전환해야 하는 경우 장애 조치를 보조 데이터베이스 중 하나로 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs to be taken offline, you can initiate failover to any of your secondary databases.</span></span> <span data-ttu-id="21993-117">장애 조치가 보조 데이터베이스 중 하나로 활성화된 경우 모든 다른 보조가 새 보조로 자동으로 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-117">When failover is activated to one of the secondary databases, all other secondaries are automatically linked to the new primary.</span></span> <span data-ttu-id="21993-118">자동 장애 조치 그룹(미리 보기 상태)을 사용하여 데이터베이스 복구를 관리하고 그룹의 데이터베이스 중 하나 이상에 영향을 미치는 가동 중단이 발생하면 자동 장애 조치를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-118">If you are using auto-failover groups (in-preview) to manage database recovery and any outage that impacts one or several of the databases in the group results in automatic failover.</span></span> <span data-ttu-id="21993-119">응용 프로그램 요구 사항에 가장 부합하는 자동 장애 조치 정책을 구성하거나 수동 활성화를 옵트아웃하고 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-119">You can configure the auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="21993-120">또한 자동 장애 조치 그룹(미리 보기 상태)은 장애 조치하는 동안 변경되지 않는 읽기-쓰기 및 읽기 전용 수신기 끝점을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="21993-121">수동 또는 자동 장애 조치 활성화를 사용하는지 여부에 관계 없이 장애 조치는 그룹의 모든 보조 데이터베이스를 주 데이터베이스로 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in the group to primary.</span></span> <span data-ttu-id="21993-122">데이터베이스 장애 조치가 완료되면 끝점을 새 지역으로 리디렉션하도록 DNS 레코드를 자동으로 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-122">After the database failover is completed, the DNS record is automatically updated to redirect the end-points to the new region.</span></span>

<span data-ttu-id="21993-123">활성 지역 복제를 사용하여 서버 또는 탄력적 풀에 있는 개별 데이터베이스 또는 데이터베이스 집합의 복제 및 장애 조치를 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="21993-124">[Azure Portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md) 또는 [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx)를 사용하여 이 작업을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-124">You can do that using the [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or the [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="21993-125">장애 조치(failover) 후에는 새로운 주 데이터베이스에서 서버 및 데이터베이스의 인증 요구 사항이 구성되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-125">After failover, ensure the authentication requirements for your server and database are configured on the new primary.</span></span> <span data-ttu-id="21993-126">자세한 내용은 [재해 복구 후의 SQL Database 보안](sql-database-geo-replication-security-config.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="21993-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="21993-127">이는 활성 지역 복제 및 자동 장애 조치 그룹(미리 보기 상태) 모두에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-127">This applies both to active geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="21993-128">활성 지역 복제는 SQL Server의 [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) 기술을 활용하여 RCSI(읽기 커밋된 스냅숏 격리)를 통해 주 데이터베이스의 커밋된 트랜잭션을 보조 데이터베이스로 비동기적으로 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-128">Active geo-replication leverages the [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server to asynchronously replicate committed transactions on the primary database to a secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="21993-129">자동 장애 조치 그룹은 활성 지역 복제를 기반으로 하는 그룹 의미 체계를 제공하지만 동일한 비동기 복제 메커니즘이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-129">Auto-failover groups provide the group semantics on top of active geo-replication but the same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="21993-130">지정된 지점에서 보조 데이터베이스는 주 데이터베이스보다 약간 뒤에 있을 수 있는 반면 보조 데이터는 절대 부분 트랜잭션을 갖지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-130">While at any given point, the secondary database might be slightly behind the primary database, the secondary data is guaranteed to never have partial transactions.</span></span> <span data-ttu-id="21993-131">지역 간 중복을 사용하면 자연 재해, 인간의 치명적인 실수 또는 악의적 행위로 인해 데이터 센터의 일부 또는 전체가 영구적으로 손실되더라도 응용 프로그램을 빠르게 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-131">Cross-region redundancy enables applications to quickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="21993-132">특정 RPO 데이터를 [비즈니스 연속성 개요](sql-database-business-continuity.md)에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-132">The specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="21993-133">다음 그림은 미국 중북부 지역에 주 데이터베이스, 미국 중남부 지역에 보조 데이터베이스가 구성된 활성 지역 복제의 예입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-133">The following figure shows an example of active geo-replication configured with a primary in the North Central US region and secondary in the South Central US region.</span></span>

![지역에서 복제 관계](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="21993-135">보조 데이터베이스를 읽을 수 있기 때문에 보고 작업과 같은 읽기 전용 워크로드를 오프로드하는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-135">Because the secondary databases are readable, they can be used to offload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="21993-136">활성 지역 복제를 사용하는 경우 주 데이터베이스와 동일한 지역에 보조 데이터베이스를 만들 수 있지만 치명적인 장애에 대한 응용 프로그램의 복원성을 높이지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-136">If you are using active geo-replication, it is possible to create the secondary database in the same region with the primary, but it does not increase the application's resilience to catastrophic failures.</span></span> <span data-ttu-id="21993-137">자동 장애 조치 그룹(미리 보기 상태)을 사용하는 경우 보조 데이터베이스는 항상 다른 지역에 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="21993-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="21993-138">활성 지역 복제는 재해 복구 외에도 다음과 같은 시나리오에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-138">In addition to disaster recovery active geo-replication can be used in the following scenarios:</span></span>

* <span data-ttu-id="21993-139">**데이터베이스 마이그레이션**: 활성 지역 복제를 사용하여 최소 가동 중지 시간으로 하나의 서버에서 다른 온라인으로 데이터베이스를 마이그레이션할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-139">**Database migration**: You can use active geo-replication to migrate a database from one server to another online with minimum downtime.</span></span>
* <span data-ttu-id="21993-140">**응용 프로그램 업그레이드**: 응용 프로그램을 업그레이드하는 동안 추가 보조 데이터베이스를 장애 복구 복사본으로 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="21993-141">실제 비즈니스 연속성을 달성하기 위해 데이터 센터 간에 데이터베이스 중복을 추가하는 것은 솔루션의 일부입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-141">To achieve real business continuity, adding database redundancy between datacenters is only part of the solution.</span></span> <span data-ttu-id="21993-142">치명적인 오류 후 응용 프로그램(서비스) 종단 간 복구에는 서비스 및 모든 종속성 서비스를 구성하는 모든 구성 요소의 복구가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute the service and any dependent services.</span></span> <span data-ttu-id="21993-143">이러한 구성 요소의 예에는 클라이언트 소프트웨어(예: 사용자 지정 JavaScript를 사용한 브라우저), 웹 프런트 엔드, 저장소 및 DNS가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-143">Examples of these components include the client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="21993-144">모든 구성 요소는 동일한 오류에 탄력적이며 응용 프로그램의 복구 시간 목표(RTO) 내에서 사용할 수 있는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-144">It is critical that all components are resilient to the same failures and become available within the recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="21993-145">따라서 모든 종속성 서비스를 확인하고 제고하는 보장 사항 및 기능을 이해해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-145">Therefore, you need to identify all dependent services and understand the guarantees and capabilities they provide.</span></span> <span data-ttu-id="21993-146">그런 다음 의존하는 서비스 장애 조치 중 서비스 기능을 확인하도록 적절한 단계를 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-146">Then, you must take adequate steps to ensure that your service functions during the failover of the services on which it depends.</span></span> <span data-ttu-id="21993-147">재해 복구를 위한 솔루션 설계에 대한 자세한 내용은 [활성 지역 복제를 사용하여 재해 복구를 위한 클라우드 솔루션 설계](sql-database-designing-cloud-solutions-for-disaster-recovery.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="21993-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="21993-148">활성 지역 복제 기능</span><span class="sxs-lookup"><span data-stu-id="21993-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="21993-149">활성 지역 복제 기능은 다음과 같은 필수 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-149">The active geo-replication feature provides the following essential capabilities:</span></span>
* <span data-ttu-id="21993-150">**자동 비동기 복제**: 보조 데이터베이스는 기존 데이터베이스에 추가하는 방법으로만 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding to an existing database.</span></span> <span data-ttu-id="21993-151">보조 데이터베이스는 모든 Azure SQL Database 서버에 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-151">The secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="21993-152">한번 만들면 보조 데이터베이스는 주 데이터베이스에서 복사된 데이터로 채워집니다.</span><span class="sxs-lookup"><span data-stu-id="21993-152">Once created, the secondary database is populated with the data copied from the primary database.</span></span> <span data-ttu-id="21993-153">이 프로세스를 시드라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-153">This process is known as seeding.</span></span> <span data-ttu-id="21993-154">보조 데이터베이스가 생성 및 시드되면 주 데이터베이스에 대한 업데이트가 보조 데이터베이스에 자동으로 비동기적으로 복사됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-154">After secondary database has been created and seeded, updates to the primary database are asynchronously replicated to the secondary database automatically.</span></span> <span data-ttu-id="21993-155">비동기 복제에서는 트랜잭션이 보조 데이터베이스에 복제되기 전에 주 데이터베이스에 커밋됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-155">Asynchronous replication means that transactions are committed on the primary database before they are replicated to the secondary database.</span></span> 
* <span data-ttu-id="21993-156">**읽을 수 있는 보조 데이터베이스**: 응용 프로그램은 주 데이터베이스에 액세스하는 데 사용된 동일한 보안 주체를 사용하여 읽기 전용 작업에 대한 보조 데이터베이스에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using the same or different security principals used for accessing the primary database.</span></span> <span data-ttu-id="21993-157">보조 데이터베이스에서 실행되는 쿼리 때문에 주 데이터베이스(로그 재생)의 업데이트 복제가 지연되지 않도록 보장하기 위해 보조 데이터베이스는 스냅숏 격리 모드에서 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-157">The secondary databases operate in snapshot isolation mode to ensure replication of the updates of the primary (log replay) is not delayed by queries executed on the secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="21993-158">주 데이터베이스에서 수신하는 스키마 업데이트가 있는 경우 보조 데이터베이스에 스키마 잠금이 필요하므로 보조 데이터베이스의 로그 재생이 지연됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-158">The log replay is delayed on the secondary database if there are schema updates that it is receiving from the Primary that require a schema lock on the secondary database.</span></span> 
   > 

* <span data-ttu-id="21993-159">**여러 번 읽을 수 있는 보조 데이터베이스**: 둘 이상의 보조 데이터베이스는 주 데이터베이스와 응용 프로그램의 중복성 및 보호 수준을 높입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for the primary database and application.</span></span> <span data-ttu-id="21993-160">보조 데이터베이스가 여러 개 있는 경우 보조 데이터베이스 중 하나가 실패하더라도 응용 프로그램이 계속해서 보호됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-160">If multiple secondary databases exist, the application remains protected even if one of the secondary databases fails.</span></span> <span data-ttu-id="21993-161">보조 데이터베이스가 하나밖에 없는 경우 새 보조 데이터베이스를 만들 때까지 응용 프로그램이 더 높은 위험에 노출됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-161">If there is only one secondary database, and it fails, the application is exposed to higher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="21993-162">활성 지역 복제를 사용하여 전역으로 분산된 응용 프로그램을 빌드하고 5개 이상의 지역에 있는 데이터에 대한 읽기 전용 액세스를 제공해야 하는 경우 보조 데이터베이스의 보조 데이터베이스를 만들 수 있습니다(체이닝으로 알려진 프로세스).</span><span class="sxs-lookup"><span data-stu-id="21993-162">If you are using active geo-replication to build a globally distributed application and need to provide read-only access to data in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="21993-163">이렇게 하면 거의 제한이 없는 규모의 데이터베이스 복제를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="21993-164">또한 체이닝을 사용하면 주 데이터베이스의 복제 오버헤드가 줄어듭니다.</span><span class="sxs-lookup"><span data-stu-id="21993-164">In addition, chaining reduces the overhead of replication from the primary database.</span></span> <span data-ttu-id="21993-165">단점은 리프가 가장 많은 보조 데이터베이스의 복제 지연 시간이 증가하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-165">The trade-off is the increased replication lag on the leaf-most secondary databases.</span></span> <span data-ttu-id="21993-166">등 4가지 유형의 클러스터가 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-166">.</span></span> 
   >

* <span data-ttu-id="21993-167">**탄력적 풀 데이터베이스 지원**: 모든 탄력적 풀의 모든 데이터베이스에 대해 활성 지역 복제를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="21993-168">보조 데이터베이스는 또 다른 탄력적 풀에 있어도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-168">The secondary database can be in another elastic pool.</span></span> <span data-ttu-id="21993-169">일반 데이터베이스의 경우 서비스 계층이 같은 한, 보조 데이터베이스가 탄력적 풀일 수 있고 그 반대도 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-169">For regular databases, the secondary can be an elastic pool and vice versa as long as the service tiers are the same.</span></span> 
* <span data-ttu-id="21993-170">**보조 데이터베이스에서 구성 가능한 성능 수준**: 보조 데이터베이스는 주 데이터베이스보다 낮은 성능 수준에서 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-170">**Configurable performance level of the secondary database**: A secondary database can be created with lower performance level than the primary.</span></span> <span data-ttu-id="21993-171">동일한 서비스 계층을 확보하려면 주 데이터베이스와 보조 데이터베이스 모두 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-171">Both primary and secondary databases are required to have the same service tier.</span></span> <span data-ttu-id="21993-172">데이터베이스 쓰기 활동이 많은 응용 프로그램에는 이 방법을 권장하지 않습니다. 복제 지연이 증가하고, 그로 인해 장애 조치(failover) 후 후속 데이터 손실의 위험이 높기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-172">This option is not recommended for applications with high database write activity because the increased replication lag increases the risk of substantial data loss after a failover.</span></span> <span data-ttu-id="21993-173">뿐만 아니라 장애 조치(failover) 후 새로운 주 데이터베이스가 더 높은 성능 수준으로 업그레이드될 때까지 응용 프로그램 성능이 영향을 받습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-173">In addition, after failover the application’s performance is impacted until the new primary is upgraded to a higher performance level.</span></span> <span data-ttu-id="21993-174">Azure Portal의 로그 IO 백분율 차트는 복제 부하를 유지하는 데 필요한 보조 데이터베이스의 최소 성능 수준을 예상하는 데 유용하게 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-174">The log IO percentage chart on Azure portal provides a good way to estimate the minimal performance level of the secondary that is required to sustain the replication load.</span></span> <span data-ttu-id="21993-175">예를 들어 주 데이터베이스가 P6(1000 DTU)이면 해당 로그 IO 백분율은 50%이고 보조 데이터베이스는 최소한 P4(500 DTU) 이상이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% the secondary needs to be at least P4 (500 DTU).</span></span> <span data-ttu-id="21993-176">[sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) 또는 [ys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) 데이터베이스 뷰를 사용하여 로그 IO 데이터를 검색할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-176">You can also retrieve the log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="21993-177">SQL Database 성능 수준에 대한 자세한 내용은 [SQL Database 옵션 및 성능](sql-database-service-tiers.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="21993-177">For more information on the SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="21993-178">**사용자 제어 장애 조치(failover) 및 장애 복구**: 보조 데이터베이스는 응용 프로그램 또는 사용자에 의해 언제든지 주 데이터베이스 역할로 전환될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-178">**User-controlled failover and failback**: A secondary database can explicitly be switched to the primary role at any time by the application or the user.</span></span> <span data-ttu-id="21993-179">실제로 가동이 중단되면 보조 데이터베이스를 즉시 주 데이터베이스로 승격하는 "계획되지 않음" 옵션을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-179">During a real outage the “unplanned” option should be used, which immediately promotes a secondary to be the primary.</span></span> <span data-ttu-id="21993-180">중지된 주 데이터베이스가 복구되어 작동 가능한 상태가 되면 시스템에서는 복구된 주 데이터베이스를 자동으로 보조 데이터베이스로 표시하고 새로운 주 데이터베이스와 함께 최신 상태로 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-180">When the failed primary recovers and is available again, the system automatically marks the recovered primary as a secondary and bring it up-to-date with the new primary.</span></span> <span data-ttu-id="21993-181">주 데이터베이스가 가장 최근의 변경 사항을 보조 데이터베이스로 복제하기 전에 중단될 경우 비동기 복제의 특성상 계획되지 않은 장애 조치(failover)가 진행되는 동안 소량의 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-181">Due to the asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates the most recent changes to the secondary.</span></span> <span data-ttu-id="21993-182">보조 데이터베이스가 여러 개 있는 주 데이터베이스가 중단되면 시스템에서 사용자의 개입 없이 자동으로 복제 관계를 다시 구성하고 남아 있는 보조 데이터베이스를 새로 승격되는 주 데이터베이스에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-182">When a primary with multiple secondaries fails over, the system automatically reconfigures the replication relationships and links the remaining secondaries to the newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="21993-183">장애 조치(failover)를 일으킨 작동 중단 상황이 완화된 후에는 응용 프로그램을 주 지역으로 반환하는 것이 바람직할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-183">After the outage that caused the failover is mitigated, it may be desirable to return the application to the primary region.</span></span> <span data-ttu-id="21993-184">장애 조치(failover)를 수행하려면 “계획됨” 옵션을 사용하여 명령을 호출해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-184">To do that, the failover command should be invoked with the “planned” option.</span></span> 
* <span data-ttu-id="21993-185">**자격 증명과 방화벽 규칙의 동기화 유지**: 지역에서 복제된 데이터베이스에 [데이터베이스 방화벽 규칙](sql-database-firewall-configure.md)을 사용할 것을 권장합니다. 데이터베이스 방화벽 규칙을 데이터베이스와 함께 복제하면 모든 보조 데이터베이스가 주 데이터베이스와 동일한 방화벽 규칙을 갖기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with the database to ensure all secondary databases have the same firewall rules as the primary.</span></span> <span data-ttu-id="21993-186">이렇게 하면 고객이 주 데이터베이스 및 보조 데이터베이스를 호스팅하는 서버에서 수동으로 방화벽 규칙을 구성하고 유지 관리할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-186">This approach eliminates the need for customers to manually configure and maintain firewall rules on servers hosting both the primary and secondary databases.</span></span> <span data-ttu-id="21993-187">마찬가지로, 데이터 액세스에 [포함된 데이터베이스 사용자](sql-database-manage-logins.md)를 사용하면 주 데이터베이스와 보조 데이터베이스의 사용자 자격 증명이 항상 똑같기 때문에 장애 조치(failover) 시에 로그인과 암호가 불일치하여 중단되는 일이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have the same user credentials so during a failover, there is no disruptions due to mismatches with logins and passwords.</span></span> <span data-ttu-id="21993-188">[Azure Active Directory](../active-directory/active-directory-whatis.md)가 추가되면서 고객은 주 데이터베이스 및 보조 데이터베이스에 대한 사용자 액세스를 관리할 수 있으므로 데이터베이스의 자격 증명을 모두 관리할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-188">With the addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access to both primary and secondary databases and eliminating the need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="21993-189">자동 장애 조치 그룹 기능</span><span class="sxs-lookup"><span data-stu-id="21993-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="21993-190">자동 장애 조치 그룹 기능은 그룹 수준 복제 및 자동 장애 조치를 지원하여 활성 지역 복제의 강력한 추상화를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="21993-191">또한 추가 수신기 끝점을 제공하여 장애 조치 후 SQL 연결 문자열을 변경할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-191">In addition, it removes the necessity to change the SQL connection string after failover by providing the additional listener end-points.</span></span> 

* <span data-ttu-id="21993-192">**장애 조치 그룹**: 다른 지역의 두 서버 (기본 및 보조 서버) 간에 하나 이상의 장애 조치 그룹을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="21993-193">주 지역의 가동 중단으로 인해 주 데이터베이스 전체 또는 일부를 사용할 수 없게 되는 경우를 대비하여 각 그룹에 한 단위로 복구되는 하나 또는 여러 개의 데이터베이스가 포함될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due to an outage in the primary region.</span></span>  
* <span data-ttu-id="21993-194">**주 서버**: 장애 조치 그룹에서 주 데이터베이스를 호스팅하는 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-194">**Primary server**: A server that hosts the primary databases in the failover group.</span></span>
* <span data-ttu-id="21993-195">**보조 서버**: 장애 조치 그룹에서 보조 데이터베이스를 호스팅하는 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-195">**Secondary server**: A server that hosts the secondary databases in the failover group.</span></span> <span data-ttu-id="21993-196">보조 서버는 주 서버와 동일한 지역에 있을 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-196">The secondary server cannot be in the same region as the primary server.</span></span>
* <span data-ttu-id="21993-197">**장애 조치 그룹에 데이터베이스 추가**: 서버 내 또는 탄력적 풀 내의 여러 데이터베이스를 동일한 장애 조치 그룹에 배치할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-197">**Adding databases to failover group**: You can put several databases within a server or within an elastic pool into the same failover group.</span></span> <span data-ttu-id="21993-198">그룹에 독립 실행형 데이터베이스를 추가하면 동일한 버전과 성능 수준을 사용하는 보조 데이터베이스가 자동으로 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="21993-198">If you add a standalone database to the group, it automatically creates a secondary database using the same edition and performance level.</span></span> <span data-ttu-id="21993-199">탄력적 풀에 주 데이터베이스가 있으면 보조 서버가 동일한 이름을 가진 탄력적 풀에 자동으로 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="21993-199">If the primary database is in an elastic pool, the secondary is automatically created in the elastic pool with the same name.</span></span> <span data-ttu-id="21993-200">보조 서버에 보조 데이터베이스가 이미 있는 데이터베이스를 추가하면 해당 지역 복제가 그룹에 상속됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-200">If you add a database that already has a secondary database in the secondary server, that geo-replication is inherited by the group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="21993-201">장애 조치 그룹에 속하지 않은 서버에 보조 데이터베이스가 이미 있는 데이터베이스를 추가하면 새 보조 데이터베이스가 보조 서버에 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="21993-201">When adding a database that already has a secondary database in a server that is not part of the failover group, a new secondary is created in the secondary server.</span></span> 
   >

* <span data-ttu-id="21993-202">**장애 조치(failover) 그룹 읽기-쓰기 수신기**: 현재 주 서버 URL을 가리키는 **&lt;failover-group-name&gt;.database.windows.net** 형식의 DNS CNAME 레코드입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points to the current primary server URL.</span></span> <span data-ttu-id="21993-203">장애 조치 후 주 데이터베이스가 변경되면 읽기-쓰기 SQL 응용 프로그램이 해당 주 데이터베이스에 투명하게 다시 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-203">It allows the read-write SQL applications to transparently reconnect to the primary database when the primary changes after failover.</span></span> 
* <span data-ttu-id="21993-204">**장애 조치(failover) 그룹 읽기 전용 수신기**: 현재 보조 서버 URL을 가리키는 **&lt;failover-group-name&gt;.secondary.database.windows.net** 형식의 DNS CNAME 레코드입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points to the secondary server’s URL.</span></span> <span data-ttu-id="21993-205">읽기 전용 SQL 응용 프로그램은 지정된 부하 분산 규칙을 사용하여 보조 데이터베이스에 투명하게 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-205">It allows the read-only SQL applications to transparently connect to the secondary database using the specified load-balancing rules.</span></span> <span data-ttu-id="21993-206">필요에 따라 보조 서버를 사용할 수 없을 때 읽기 전용 트래픽을 주 서버로 자동으로 리디렉션할지 여부를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-206">Optionally you can specify if you want the read-only traffic to be automatically re-directed to the primary server when the secondary server is not available.</span></span>
* <span data-ttu-id="21993-207">**자동 장애 조치 정책**: 기본적으로 장애 조치 그룹은 자동 장애 조치 정책으로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-207">**Automatic failover policy**: By default, the failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="21993-208">장애가 검색되는 즉시 시스템에서 장애 조치를 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-208">The system triggers failover as soon as the failure is detected.</span></span> <span data-ttu-id="21993-209">응용 프로그램에서 장애 조치 워크플로를 제어하려는 경우 자동 장애 조치를 해제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-209">If you want to control the failover workflow from the application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="21993-210">**수동 장애 조치**: 자동 장애 조치 구성에 관계 없이 언제든지 장애 조치를 수동으로 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-210">**Manual failover**: You can initiate failover manually at any time regardless of the automatic failover configuration.</span></span> <span data-ttu-id="21993-211">자동 장애 조치 정책이 구성되지 않은 경우 장애 조치 그룹의 데이터베이스를 복구하려면 수동 장애 조치를 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-211">If automatic failover policy is not configured manual failover is required to recover databases in the failover group.</span></span> <span data-ttu-id="21993-212">강제 장애 조치 또는 친숙한 장애 조치(전체 데이터 동기화 사용)를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="21993-213">후자는 활성 서버를 주 지역으로 다시 배치하는 데 사용될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-213">The latter could be used to relocate the active server to the primary region.</span></span> <span data-ttu-id="21993-214">장애 조치가 완료되면 올바른 서버에 대한 연결을 보장하도록 DNS 레코드가 자동으로 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-214">When failover is completed the DNS records are automatically updated to ensure connectivity to the correct server.</span></span>
* <span data-ttu-id="21993-215">**데이터 손실이 있는 유예 기간**: 주 및 보조 데이터베이스가 비동기 복제를 사용하여 동기화되기 때문에 장애 조치로 인해 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-215">**Grace period with data loss**: Because the primary and secondary databases are synchronized using asynchronous replication the failover may result in data loss.</span></span> <span data-ttu-id="21993-216">응용 프로그램의 데이터 손실 허용 오차를 반영하도록 자동 장애 조치 정책을 사용자 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-216">You can customize the automatic failover policy to reflect your application’s tolerance to data loss.</span></span> <span data-ttu-id="21993-217">**GracePeriodWithDataLossHours**를 구성하여 데이터 손실이 발생할 수 있는 장애 조치를 시작하기 전에 시스템에서 대기하는 시간을 제어할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-217">By configuring **GracePeriodWithDataLossHours**, you can control how long the system waits before initiating the failover that is likely to result data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="21993-218">시스템에서 그룹의 데이터베이스가 아직 온라인 상태에 있음(예: 가동 중단이 서비스 제어 평면에만 영향을 미침)을 검색하면 **GracePeriodWithDataLossHours**에서 설정한 값에 관계 없이 전체 데이터 동기화(친숙한 장애 조치)를 통해 장애 조치를 즉시 활성화합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-218">When system detects that the databases in the group are still online (for example, the outage only impacted the service control plane), it immediately activates the failover with full data synchronization (friendly failover) regardless of the value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="21993-219">이 동작은 복구 중 데이터가 손실되지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-219">This behavior ensures that there is no data loss during the recovery.</span></span> <span data-ttu-id="21993-220">유예 기간은 친숙한 장애 조치를 수행할 수 없는 경우에만 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-220">The grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="21993-221">유예 기간이 만료되기 전에 가동 중단이 완화되면 장애 조치가 활성화되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-221">If the outage is mitigated before the grace period expires, the failover is not activated.</span></span>
   >

* <span data-ttu-id="21993-222">**여러 장애 조치 그룹**: 동일한 서버 쌍에 대해 여러 장애 조치 그룹을 구성하여 장애 조치의 크기를 제어할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-222">**Multiple failover groups**: You can configure multiple failover groups for the same pair of servers to control the scale of failovers.</span></span> <span data-ttu-id="21993-223">각 그룹은 독립적으로 장애 조치됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-223">Each group fails over independently.</span></span> <span data-ttu-id="21993-224">다중 테넌트 응용 프로그램에서 탄력적 풀을 사용하는 경우 이 기능을 사용하여 각 풀에 주 및 보조 데이터베이스를 혼합할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-224">If your multi-tenant application uses elastic pools, you can use this capability to mix primary and secondary databases in each pool.</span></span> <span data-ttu-id="21993-225">이렇게 하면 테넌트의 절반에 대해서만 가동 중단에 따른 영향을 줄일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-225">This way you can reduce the impact of an outage to only half of the tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="21993-226">항상 사용 가능한 서비스를 빌드하는 모범 사례</span><span class="sxs-lookup"><span data-stu-id="21993-226">Best practices of building highly available service</span></span>

<span data-ttu-id="21993-227">Azure SQL Database를 사용하는 항상 사용 가능한 서비스를 빌드하려면 사용자는 다음 지침을 따라야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-227">To build a highly available service that uses Azure SQL database the customers should follow these guidelines:</span></span>
- <span data-ttu-id="21993-228">**장애 조치(failover) 그룹 사용**: 다른 지역의 두 서버(기본 및 보조 서버) 간에 하나 이상의 장애 조치(failover) 그룹을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="21993-229">주 지역의 가동 중단으로 인해 주 데이터베이스 전체 또는 일부를 사용할 수 없게 되는 경우를 대비하여 각 그룹에 한 단위로 복구되는 하나 또는 여러 개의 데이터베이스가 포함될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due to an outage in the primary region.</span></span> <span data-ttu-id="21993-230">장애 조치(failover) 그룹을 사용하는 경우 주 데이터베이스와 서비스 목표가 동일한 지역 보조 데이터베이스가 작성됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-230">The failover group creates geo-secondary database with the same service objective as the primary.</span></span> <span data-ttu-id="21993-231">장애 조치 그룹에 기존 지역에서 복제 관계를 추가하는 경우 보조 데이터베이스가 주 데이터베이스와 동일한 서비스 수준 목표를 갖도록 구성했는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-231">If you add an existing geo-replication relationship to the failover group make sure the geo-secondary is configured with the same service level objective as the primary.</span></span>
- <span data-ttu-id="21993-232">**OLTP 작업용 읽기-쓰기 수신기 사용**: OLTP 작업을 수행할 때 **&lt;failover-group-name&gt;.database.windows.net**을 서버 URL로 사용하면 자동으로 주 데이터베이스에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as the server URL and the connections will be automatically directed to the primary.</span></span> <span data-ttu-id="21993-233">이 URL은 장애 조치(failover) 후에 변경되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-233">This URL will not change after the failover.</span></span>  
<span data-ttu-id="21993-234">장애 조치(failover) 시에는 DNS 레코드가 업데이트되므로 클라이언트 DNS 캐시를 새로 고친 후에만 클라이언트 연결이 새 주 데이터베이스로 리디렉션됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-234">Note the failover involves updating the DNS record so the client connections will be redirected to the new primary only after the client DNS cache is refreshed.</span></span>
- <span data-ttu-id="21993-235">**읽기 전용 작업용 읽기 전용 수신기 사용**: 특정 데이터가 부실해도 정상적으로 수행 가능한 논리적으로 격리된 읽기 전용 작업이 있는 경우에는 응용 프로그램에서 보조 데이터베이스를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant to certain staleness of data, you can use the secondary database in the application.</span></span> <span data-ttu-id="21993-236">읽기 전용 세션의 경우 **&lt;failover-group-name&gt;.secondary.database.windows.net**을 서버 URL로 사용하면 자동으로 보조 데이터베이스에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as the server URL and the connection will be automatically directed to the secondary.</span></span> <span data-ttu-id="21993-237">또한 **ApplicationIntent=ReadOnly**를 사용하여 연결 문자열 읽기 의도를 표시하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="21993-238">**성능 저하에 대비**: SQL 장애 조치 결정은 응용 프로그램의 나머지 부분 또는 사용되는 다른 서비스에서 독립적입니다.</span><span class="sxs-lookup"><span data-stu-id="21993-238">**Be prepared for perf degradation**: SQL failover decision is independent from the rest of the application or other services used.</span></span> <span data-ttu-id="21993-239">응용 프로그램은 한 지역의 일부 구성 요소 및 나머지 지역의 일부 구성 요소와 "혼합"될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-239">The application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="21993-240">성능 저하를 방지하려면 DR 지역에서 중복 응용 프로그램 배포를 확인하고 이 문서의 지침을 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="21993-240">To avoid the degradation, ensure the redundant application deployment in the DR region and follow the guidelines in this article.</span></span>  
<span data-ttu-id="21993-241">DR 지역의 응용 프로그램이 다른 연결 문자열을 사용하지 않아도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-241">Note the application in the DR region does not have to use a different connection string.</span></span>  
- <span data-ttu-id="21993-242">**데이터 손실에 대비**: 가동 중지가 검색되는 경우 SQL은 중요한 지식에 대한 데이터 손실이 없으면 읽기-쓰기 장애 조치(failover)를 자동으로 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss to the best of our knowledge.</span></span> <span data-ttu-id="21993-243">그렇지 않으면 **GracePeriodWithDataLossHours**에서 지정한 기간 동안 대기합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-243">Otherwise, it waits for the period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="21993-244">**GracePeriodWithDataLossHours**를 지정한 경우 데이터 손실에 대비합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="21993-245">일반적으로 중단 시에 Azure에서는 가용성을 우선으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="21993-246">데이터 손실을 방지하려는 경우 **GracePeriodWithDataLossHours**를 24시간과 같은 충분히 큰 숫자로 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-246">If you cannot afford data loss, make sure to set **GracePeriodWithDataLossHours** to a sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="21993-247">주 데이터베이스 업그레이드 또는 다운그레이드</span><span class="sxs-lookup"><span data-stu-id="21993-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="21993-248">보조 데이터베이스와의 연결을 해제하지 않고 주 데이터베이스를 다른 성능 수준(동일한 서비스 계층 내)으로 업그레이드 또는 다운그레이드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-248">You can upgrade or downgrade a primary database to a different performance level (within the same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="21993-249">업그레이드하는 경우에는 보조 데이터베이스를 먼저 업그레이드한 다음에 주 데이터베이스를 업그레이드하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-249">When upgrading, we recommend that you upgrade the secondary database first, and then upgrade the primary.</span></span> <span data-ttu-id="21993-250">다운그레이드하는 경우에는 반대 순서로 주 데이터베이스를 먼저 다운그레이드하고 보조 데이터베이스를 다운그레이드합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-250">When downgrading, reverse the order: downgrade the primary first, and then downgrade the secondary.</span></span> <span data-ttu-id="21993-251">데이터베이스를 다른 서비스 계층으로 업그레이드하거나 다운그레이드할 때 이 권장 사항이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-251">When you upgrade or downgrade the database to a different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="21993-252">장애 조치 그룹 구성의 일부로 보조 데이터베이스를 만든 경우 보조 데이터베이스를 다운그레이드하지 않는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-252">If you created secondary database as part of the failover group configuration it is not recommended to downgrade the secondary database.</span></span> <span data-ttu-id="21993-253">이렇게 하면 장애 조치가 활성화된 후 데이터 계층에서 일반 워크로드를 처리할 수 있을 만큼 충분한 용량을 갖출 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-253">This is to ensure your data tier has sufficient capacity to process your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-the-loss-of-critical-data"></a><span data-ttu-id="21993-254">중요한 데이터 손실 방지</span><span class="sxs-lookup"><span data-stu-id="21993-254">Preventing the loss of critical data</span></span>
<span data-ttu-id="21993-255">광역 네트워크의 높은 대기 시간으로 인해 연속 복사는 비동기 복제 메커니즘을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-255">Due to the high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="21993-256">비동기 복제를 수행하면 오류가 발생하는 경우에 일부 데이터 손실은 불가피합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="21993-257">그러나 일부 응용 프로그램은 데이터 손실이 없어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="21993-258">이러한 중요한 업데이트를 보호하기 위해 응용 프로그램 개발자는 트랜잭션을 커밋한 후 즉시 [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) 시스템 프로시저를 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-258">To protect these critical updates, an application developer can call the [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing the transaction.</span></span> <span data-ttu-id="21993-259">**sp_wait_for_database_copy_sync** 호출은 마지막으로 커밋된 트랜잭션이 보조 데이터베이스로 전송될 때까지 호출 스레드를 차단합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-259">Calling **sp_wait_for_database_copy_sync** blocks the calling thread until the last committed transaction has been transmitted to the secondary database.</span></span> <span data-ttu-id="21993-260">그러나 전송된 트랜잭션이 보조 데이터베이스에서 재생 및 커밋될 때까지 기다리지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-260">However, it does not wait for the transmitted transactions to be replayed and committed on the secondary.</span></span> <span data-ttu-id="21993-261">**sp_wait_for_database_copy_sync**는 그 범위가 특정 연속 복사 링크로 한정됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-261">**sp_wait_for_database_copy_sync** is scoped to a specific continuous copy link.</span></span> <span data-ttu-id="21993-262">주 데이터베이스에 대한 연결 권한이 있는 모든 사용자는 이 프로시저를 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-262">Any user with the connection rights to the primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="21993-263">**sp_wait_for_database_copy_sync**는 장애 조치 후 데이터 손실을 방지하지만 읽기 액세스를 위한 전체 동기화를 보장하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="21993-264">**sp_wait_for_database_copy_sync** 프로시저 호출로 인한 지연은 심각할 수 있으며 호출 시 트랜잭션 로그의 크기에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="21993-264">The delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on the size of the transaction log at the time of the call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="21993-265">장애 조치(failover) 그룹 및 활성 지역 복제를 프로그래밍 방식으로 관리</span><span class="sxs-lookup"><span data-stu-id="21993-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="21993-266">앞에서 설명한 대로 자동 장애 조치 그룹(미리 보기 상태)과 활성 지역 복제는 Azure PowerShell 및 REST API를 사용하여 프로그래밍 방식으로 관리할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and the REST API.</span></span> <span data-ttu-id="21993-267">다음 표는 사용 가능한 명령의 집합을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="21993-267">The following tables describe the set of commands available.</span></span>

<span data-ttu-id="21993-268">**Azure Resource Manager API 및 역할 기반 보안**: 활성 지역 복제는 관리를 위해 [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) 및 [Azure PowerShell cmdlet](https://docs.microsoft.com/powershell/azure/overview)을 비롯한 Azure Resource Manager API 집합을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including the [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="21993-269">이러한 API는 리소스 그룹을 사용해야 하며 RBAC(역할 기반 보안)를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-269">These APIs require the use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="21993-270">액세스 역할을 구현하는 방법에 대한 자세한 내용은 [Azure 역할 기반 액세스 제어](../active-directory/role-based-access-control-what-is.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="21993-270">For more information on how to implement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="21993-271">활성 지역 복제의 여러 새로운 기능은 [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) 기반 [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) 및 [Azure SQL Database PowerShell cmdlet](https://msdn.microsoft.com/library/azure/mt574084.aspx)에서만 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="21993-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="21993-272">이전 버전과의 호환성을 위해 [(클래식) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) 및 [Azure SQL Database(클래식) cmdlet](https://msdn.microsoft.com/library/azure/dn546723.aspx)이 지원되므로 Azure Resource Manager 기반 API를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-272">The [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using the Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="21993-273">SQL 데이터베이스 장애 조치를 사용 하 여 TRANSACT-SQL을 사용 하 여 관리</span><span class="sxs-lookup"><span data-stu-id="21993-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="21993-274">명령</span><span class="sxs-lookup"><span data-stu-id="21993-274">Command</span></span> | <span data-ttu-id="21993-275">설명</span><span class="sxs-lookup"><span data-stu-id="21993-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="21993-276">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="21993-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="21993-277">기존 데이터베이스에 대한 보조 데이터베이스를 만들고 데이터 복제를 시작하려면 ADD SECONDARY ON SERVER 인수를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-277">Use ADD SECONDARY ON SERVER argument to create a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="21993-278">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="21993-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="21993-279">장애 조치를 시작하기 위해 보조 데이터베이스를 기본 데이터베이스로 전환하려면 FAILOVER 또는 FORCE_FAILOVER_ALLOW_DATA_LOSS를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS to switch a secondary database to be primary to initiate failover</span></span> |
| [<span data-ttu-id="21993-280">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="21993-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="21993-281">SQL Database와 지정된 보조 데이터베이스 간의 데이터 복제를 종료하려면 REMOVE SECONDARY ON SERVER를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-281">Use REMOVE SECONDARY ON SERVER to terminate a data replication between a SQL Database and the specified secondary database.</span></span> |
| [<span data-ttu-id="21993-282">sys.geo_replication_links(Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="21993-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="21993-283">Azure SQL Database 논리 서버의 각 데이터베이스에 대한 모든 기존 복제 링크에 대한 정보를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-283">Returns information about all existing replication links for each database on the Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="21993-284">sys.dm_geo_replication_link_status(Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="21993-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="21993-285">지정된 SQL Database의 복제 링크에 대한 마지막 복제 시간, 마지막 복제 지연 및 기타 정보를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="21993-285">Gets the last replication time, last replication lag, and other information about the replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="21993-286">sys.dm_operation_status(Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="21993-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="21993-287">복제 링크의 상태를 비롯한 모든 데이터베이스 작업에 대한 상태를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-287">Shows the status for all database operations including the status of the replication links.</span></span> |
| [<span data-ttu-id="21993-288">sp_wait_for_database_copy_sync(Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="21993-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="21993-289">커밋된 모든 트랜잭션이 복제되고 활성 보조 데이터베이스에서 승인될 때까지 응용 프로그램이 대기하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-289">causes the application to wait until all committed transactions are replicated and acknowledged by the active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="21993-290">SQL 데이터베이스 장애 조치를 사용 하 여 PowerShell을 사용 하 여 관리</span><span class="sxs-lookup"><span data-stu-id="21993-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="21993-291">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="21993-291">Cmdlet</span></span> | <span data-ttu-id="21993-292">설명</span><span class="sxs-lookup"><span data-stu-id="21993-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="21993-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="21993-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="21993-294">하나 이상의 데이터베이스를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="21993-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="21993-295">New-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="21993-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="21993-296">기존 데이터베이스에 대한 보조 데이터베이스를 만들고 데이터 복제를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="21993-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="21993-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="21993-298">장애 조치를 시작하기 위해 보조 데이터베이스로 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-298">Switches a secondary database to be primary to initiate failover.</span></span> |
| [<span data-ttu-id="21993-299">Remove-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="21993-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="21993-300">SQL 데이터베이스와 지정된 보조 데이터베이스 간의 데이터 복제를 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-300">Terminates data replication between a SQL Database and the specified secondary database.</span></span> |
| [<span data-ttu-id="21993-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="21993-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="21993-302">Azure SQL Database와 리소스 그룹 또는 SQL Server 간의 지역에서 복제 링크를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="21993-302">Gets the geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="21993-303">New-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="21993-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="21993-304">장애 조치 그룹을 만들고 주 및 보조 서버 모두에 등록합니다</span><span class="sxs-lookup"><span data-stu-id="21993-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="21993-305">Remove-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="21993-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="21993-306">서버에서 장애 조치 그룹을 제거하고 그룹에 포함된 모든 보조 데이터베이스를 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-306">Removes the failover group from the server and deletes all secondary databases included the group</span></span> |
| [<span data-ttu-id="21993-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="21993-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="21993-308">장애 조치 그룹 구성을 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-308">Retrieves the failover group configuration</span></span> |
| [<span data-ttu-id="21993-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="21993-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="21993-310">장애 조치 그룹의 구성을 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-310">Modifies the configuration of the failover group</span></span> |
| [<span data-ttu-id="21993-311">Switch-AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="21993-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="21993-312">장애 조치 그룹의 장애 조치를 보조 서버로 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-312">Triggers failover of the failover group to the secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="21993-313">샘플 스크립트에 대해서는 [활성 지역 복제를 사용하여 단일 데이터베이스 구성 및 장애 조치(failover)](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [활성 지역 복제를 사용하여 풀된 데이터베이스 구성 및 장애 조치(failover)](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md) 및 [단일 데이터베이스에 대한 장애 조치(failover) 그룹 구성 및 장애 조치(failover)(미리 보기)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="21993-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-the-rest-api"></a><span data-ttu-id="21993-314">REST API를 사용하여 SQL Database 장애 조치(failover) 관리</span><span class="sxs-lookup"><span data-stu-id="21993-314">Manage SQL database failover using the REST API</span></span>
| <span data-ttu-id="21993-315">API</span><span class="sxs-lookup"><span data-stu-id="21993-315">API</span></span> | <span data-ttu-id="21993-316">설명</span><span class="sxs-lookup"><span data-stu-id="21993-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="21993-317">데이터베이스 생성 또는 업데이트(createMode=Restore)</span><span class="sxs-lookup"><span data-stu-id="21993-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="21993-318">주 보조 데이터베이스 또는 보조 데이터베이스를 만들거나, 업데이트하거나, 복원합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="21993-319">데이터베이스 만들기 또는 업데이트 상태 가져오기</span><span class="sxs-lookup"><span data-stu-id="21993-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="21993-320">만들기 작업 동안 상태를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-320">Returns the status during a create operation.</span></span> |
| [<span data-ttu-id="21993-321">보조 데이터베이스를 주 데이터베이스로 설정(계획된 장애 조치(failover))</span><span class="sxs-lookup"><span data-stu-id="21993-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="21993-322">현재 주 복제본 데이터베이스에서 장애 조치(failover)를 통해 주 복제본 데이터베이스로 사용할 데이터베이스를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-322">Sets which replica database is primary by failing over from the current primary replica database.</span></span> |
| [<span data-ttu-id="21993-323">보조 데이터베이스를 주 데이터베이스로 설정(계획되지 않은 장애 조치(failover))</span><span class="sxs-lookup"><span data-stu-id="21993-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="21993-324">현재 주 복제본 데이터베이스에서 장애 조치(failover)를 통해 주 복제본 데이터베이스로 사용할 데이터베이스를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-324">Sets which replica database is primary by failing over from the current primary replica database.</span></span> <span data-ttu-id="21993-325">이 작업으로 인해 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="21993-326">복제 링크 가져오기</span><span class="sxs-lookup"><span data-stu-id="21993-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="21993-327">지역에서 복제 파트너 관계의 지정된 SQL 데이터베이스에 대한 특정 복제 링크를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="21993-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="21993-328">sys.geo_replication_links 카탈로그 뷰에 표시되는 정보를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-328">It retrieves the information visible in the sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="21993-329">복제 링크 - 데이터베이스 기준 목록</span><span class="sxs-lookup"><span data-stu-id="21993-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="21993-330">지역에서 복제 파트너 관계의 지정된 SQL 데이터베이스에 대한 모든 복제 링크를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="21993-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="21993-331">sys.geo_replication_links 카탈로그 뷰에 표시되는 정보를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-331">It retrieves the information visible in the sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="21993-332">복제 링크 삭제</span><span class="sxs-lookup"><span data-stu-id="21993-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="21993-333">데이터베이스 복제 링크를 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-333">Deletes a database replication link.</span></span> <span data-ttu-id="21993-334">장애 조치(failover) 중에 수행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="21993-335">[장애 조치(failover) 그룹 만들기 또는 업데이트]/rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="21993-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="21993-336">장애 조치(failover) 그룹을 만들거나 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="21993-337">장애 조치(failover) 그룹 삭제</span><span class="sxs-lookup"><span data-stu-id="21993-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="21993-338">서버에서 장애 조치 그룹을 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-338">Removes the failover group from the server</span></span> |
| [<span data-ttu-id="21993-339">장애 조치(failover)(계획됨)</span><span class="sxs-lookup"><span data-stu-id="21993-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="21993-340">현재 주 서버에서 이 서버로 장애 조치(failover)합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-340">Fails over from the current primary server to this server.</span></span> |
| [<span data-ttu-id="21993-341">장애 조치(failover)로 인한 데이터 손실 허용</span><span class="sxs-lookup"><span data-stu-id="21993-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="21993-342">현재 주 서버에서 이 서버로 장애 조치(failover)합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-342">ails over from the current primary server to this server.</span></span> <span data-ttu-id="21993-343">이 작업으로 인해 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="21993-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="21993-344">장애 조치 그룹 가져오기</span><span class="sxs-lookup"><span data-stu-id="21993-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="21993-345">장애 조치(failover) 그룹을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="21993-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="21993-346">서버별 장애 조치(failover) 그룹 나열</span><span class="sxs-lookup"><span data-stu-id="21993-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="21993-347">서버에 있는 장애 조치(failover) 그룹을 나열합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-347">Lists the failover groups in a server.</span></span> |
| [<span data-ttu-id="21993-348">장애 조치(failover) 그룹 업데이트</span><span class="sxs-lookup"><span data-stu-id="21993-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="21993-349">장애 조치(failover) 그룹을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="21993-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="21993-350">다음 단계</span><span class="sxs-lookup"><span data-stu-id="21993-350">Next steps</span></span>
* <span data-ttu-id="21993-351">샘플 스크립트에 대해서는 다음을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="21993-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="21993-352">활성 지역 복제를 사용하여 단일 데이터베이스 구성 및 장애 조치(failover)</span><span class="sxs-lookup"><span data-stu-id="21993-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="21993-353">활성 지역 복제를 사용하여 풀된 데이터베이스 구성 및 장애 조치(failover)</span><span class="sxs-lookup"><span data-stu-id="21993-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="21993-354">단일 데이터베이스에 대한 장애 조치(failover) 그룹 구성 및 장애 조치(failover)(미리 보기)</span><span class="sxs-lookup"><span data-stu-id="21993-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="21993-355">비즈니스 연속성의 개요 및 시나리오를 보려면 [비즈니스 연속성 개요](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="21993-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="21993-356">Azure SQL Database 자동화 백업에 대한 자세한 내용은 [SQL Database 자동화 백업](sql-database-automated-backups.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="21993-356">To learn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="21993-357">복구를 위해 자동화된 백업을 사용하는 방법을 알아보려면 [서비스에서 시작한 백업에서 데이터베이스 복원](sql-database-recovery-using-backups.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="21993-357">To learn about using automated backups for recovery, see [Restore a database from the service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="21993-358">새로운 주 서버 및 데이터베이스의 인증 요구 사항에 대해 알아보려면 [재해 복구 후의 SQL Database 보안](sql-database-geo-replication-security-config.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="21993-358">To learn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

