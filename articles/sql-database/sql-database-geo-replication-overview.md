---
title: "aaaFailover 그룹 및 활성 지리적 복제-Azure SQL 데이터베이스 | Microsoft Docs"
description: "활성 지리적 복제와 자동 장애 조치 그룹 hello Azure 데이터 센터 중 하나에서 데이터베이스 및 가동 중단의 hello 이벤트에서 autoomatically 장애 조치의 toosetup 4 복제본이 있습니다."
services: sql-database
documentationcenter: na
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2a29f657-82fb-4283-9a83-e14a144bfd93
ms.service: sql-database
ms.custom: business continuity
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: NA
ms.date: 07/10/2017
ms.author: sashan
ms.openlocfilehash: 7a39af8505624c0f19c5abccff051af836b1f9bc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="overview-failover-groups-and-active-geo-replication"></a><span data-ttu-id="139b3-103">개요: 장애 조치 그룹 및 활성 지역 복제</span><span class="sxs-lookup"><span data-stu-id="139b3-103">Overview: Failover groups and active geo-replication</span></span>
<span data-ttu-id="139b3-104">활성 지리적 복제 하면 tooconfigure toofour hello에 읽기 가능한 보조 데이터베이스를 동일한 또는 다른 데이터 센터 위치 (지역).</span><span class="sxs-lookup"><span data-stu-id="139b3-104">Active geo-replication enables you tooconfigure up toofour readable secondary databases in hello same or different data center locations (regions).</span></span> <span data-ttu-id="139b3-105">보조 데이터베이스는 쿼리 및 데이터 센터 가동 중단 또는 hello 불가능 tooconnect toohello 주 데이터베이스의 hello 경우에서 장애 조치에 대해 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-105">Secondary databases are available for querying and for failover in hello case of a data center outage or hello inability tooconnect toohello primary database.</span></span> <span data-ttu-id="139b3-106">hello 장애 조치 hello 사용자의 hello 응용 프로그램에 의해 수동으로 시작 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-106">hello failover must be initiated manually by hello application of hello user.</span></span> <span data-ttu-id="139b3-107">장애 조치 후 새 주 서버 hello는 다른 연결 끝점을 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-107">After failover, hello new primary has a different connection end-point.</span></span> 

> [!NOTE]
> <span data-ttu-id="139b3-108">활성 지역 복제는 모든 지역의 현재 모든 서비스 계층에 있는 모든 데이터베이스에 대해 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-108">Active geo-replication is available for all databases in all service tiers in all regions.</span></span>
>  

<span data-ttu-id="139b3-109">Azure SQL 데이터베이스 자동 장애 조치 그룹 (에서-미리 보기)는 SQL 데이터베이스 기능 tooautomatically 지리적 복제 관계, 연결 및 규모에 장애 조치 관리 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-109">Azure SQL Database auto-failover groups (in-preview) is a SQL Database feature designed tooautomatically manage geo-replication relationship, connectivity, and failover at scale.</span></span> <span data-ttu-id="139b3-110">Hello 고객 이득 hello 기능 tooautomatically 국가별의 치명적 오류 또는 SQL 데이터베이스 서비스의 hello 전체 또는 부분 손실이 발생 하는 기타 계획 되지 않은 이벤트 후 hello 보조 지역에서 여러 관련된 데이터베이스 복구 기본 지역의 hello 가용성입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-110">With it, hello customers gain hello ability tooautomatically recover multiple related databases in hello secondary region after catastrophic regional failures or other unplanned events that result in full or partial loss of hello SQL Database service’s availability in hello primary region.</span></span> <span data-ttu-id="139b3-111">또한 hello 읽기 가능한 보조 데이터베이스 toooffload 읽기 전용 작업을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-111">Additionally, they can use hello readable secondary databases toooffload read-only workloads.</span></span>  <span data-ttu-id="139b3-112">자동 장애 조치 그룹이 여러 데이터베이스를 포함 하기 때문에 주 서버 hello 구성 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-112">Because auto-failover groups involve multiple databases they must be configured on hello primary server.</span></span> <span data-ttu-id="139b3-113">기본 및 보조 서버 hello에 있어야 합니다. 동일한 구독 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-113">Both primary and secondary servers must be in hello same subscription.</span></span> <span data-ttu-id="139b3-114">자동 장애 조치 그룹 hello 그룹 tooonly 한 보조 서버에서 다른 지역에 모든 데이터베이스의 복제를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-114">Auto-failover groups support replication of all databases in hello group tooonly one secondary server in a different region.</span></span> <span data-ttu-id="139b3-115">활성 지리적 복제, 자동 장애 조치 그룹 없이 모든 지역에서 too4 보조 복제본을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-115">Active geo-replication, without auto-failover groups, allows up too4 secondaries in any region.</span></span>

<span data-ttu-id="139b3-116">주 데이터베이스 실패 이유 또는 단순히 오프 라인으로 전환 하는 요구 toobe 및을 활성 지리적 복제를 사용 하는 경우에 보조 데이터베이스의 장애 조치 tooany를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-116">If you are using active geo-replication and for any reason your primary database fails, or simply needs toobe taken offline, you can initiate failover tooany of your secondary databases.</span></span> <span data-ttu-id="139b3-117">모든 보조 복제본은 자동으로 연결 된 toohello hello 보조 데이터베이스의 활성화 된 tooone 장애 조치의 경우 새 주 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-117">When failover is activated tooone of hello secondary databases, all other secondaries are automatically linked toohello new primary.</span></span> <span data-ttu-id="139b3-118">자동 장애 조치를 사용 하는 경우 (에서-미리 보기) toomanage 데이터베이스 복구 및 hello 그룹 결과 자동 장애 조치에서의 hello 데이터베이스 중 하나 또는 여러에 영향을 주는 모든 중단을 그룹화 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-118">If you are using auto-failover groups (in-preview) toomanage database recovery and any outage that impacts one or several of hello databases in hello group results in automatic failover.</span></span> <span data-ttu-id="139b3-119">응용 프로그램 요구 사항에 가장 잘 맞는 hello 자동 장애 조치 정책을 구성할 수 있습니다 또는 옵트아웃 하 고 수동 정품 인증을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-119">You can configure hello auto-failover policy that best meets your application needs, or you can opt out and use manual activation.</span></span> <span data-ttu-id="139b3-120">또한 자동 장애 조치 그룹(미리 보기 상태)은 장애 조치하는 동안 변경되지 않는 읽기-쓰기 및 읽기 전용 수신기 끝점을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-120">In addition, auto-failover groups (in-preview) provide read-write and read-only listener end-points that remain unchanged during failovers.</span></span> <span data-ttu-id="139b3-121">자동 또는 수동 장애 조치 정품 인증을 사용 하 든 hello 그룹 tooprimary에 모든 보조 데이터베이스를 전환 하는 장애 조치입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-121">Whether you use manual or automatic failover activation, failover switches all secondary databases in hello group tooprimary.</span></span> <span data-ttu-id="139b3-122">Hello 데이터베이스 장애 조치 완료 되 면 hello DNS 레코드에는 자동으로 업데이트 된 tooredirect hello 끝점이 모두 toohello 새 영역입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-122">After hello database failover is completed, hello DNS record is automatically updated tooredirect hello end-points toohello new region.</span></span>

<span data-ttu-id="139b3-123">활성 지역 복제를 사용하여 서버 또는 탄력적 풀에 있는 개별 데이터베이스 또는 데이터베이스 집합의 복제 및 장애 조치를 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-123">You can manage replication and failover of an individual database or a set of databases on a server or in an elastic pool using active geo-replication.</span></span> <span data-ttu-id="139b3-124">사용 하 여 해당 하는 작업을 수행할 수 hello [Azure 포털](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [TRANSACT-SQL](sql-database-geo-replication-transact-sql.md), 또는 hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-124">You can do that using hello [Azure portal](sql-database-geo-replication-portal.md), [PowerShell](sql-database-geo-replication-powershell.md), [Transact-SQL](sql-database-geo-replication-transact-sql.md), or hello [REST API](https://msdn.microsoft.com/library/azure/mt163685.aspx).</span></span> <span data-ttu-id="139b3-125">장애 조치 후 서버 및 데이터베이스에 대 한 hello 인증 요구 사항을 hello 새 주 데이터베이스에 구성 되어를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-125">After failover, ensure hello authentication requirements for your server and database are configured on hello new primary.</span></span> <span data-ttu-id="139b3-126">자세한 내용은 [재해 복구 후의 SQL Database 보안](sql-database-geo-replication-security-config.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="139b3-126">For details, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span> <span data-ttu-id="139b3-127">이 두 tooactive 지리적 복제 및 자동 장애 조치 그룹 (에서-미리 보기) 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-127">This applies both tooactive geo-replication and auto-failover groups (in-preview).</span></span>

<span data-ttu-id="139b3-128">활성 지리적 복제 이용 하 여 hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) tooasynchronously SQL Server의 기술 hello 주 데이터베이스 tooa 보조 데이터베이스 읽기 커밋된 스냅숏 격리 (RCSI)를 사용 하 여 커밋된 트랜잭션을 복제 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-128">Active geo-replication leverages hello [Always On](https://docs.microsoft.com/sql/database-engine/availability-groups/windows/overview-of-always-on-availability-groups-sql-server) technology of SQL Server tooasynchronously replicate committed transactions on hello primary database tooa secondary database using read committed snapshot isolation (RCSI).</span></span> <span data-ttu-id="139b3-129">자동 장애 조치 그룹 활성 지리적 복제 하지만 동일한 비동기 복제 메커니즘을 사용 하는 hello 위에 hello 그룹 의미 체계를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-129">Auto-failover groups provide hello group semantics on top of active geo-replication but hello same asynchronous replication mechanism is used.</span></span> <span data-ttu-id="139b3-130">지정된 된 지점에 있는 동안 hello 보조 데이터베이스는 hello 주 데이터베이스 보다 약간 있을 수 있으며, hello 보조 데이터는 toonever 있는 부분 트랜잭션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-130">While at any given point, hello secondary database might be slightly behind hello primary database, hello secondary data is guaranteed toonever have partial transactions.</span></span> <span data-ttu-id="139b3-131">지역 간 중복성을 영구히의 응용 프로그램 tooquickly 복구를 전체 데이터 센터 또는 자연 재해, 심각한 사용자 오류 또는 악의적인 행위로 인해 발생 하는 데이터 센터의 일부분을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-131">Cross-region redundancy enables applications tooquickly recover from a permanent loss of an entire datacenter or parts of a datacenter caused by natural disasters, catastrophic human errors, or malicious acts.</span></span> <span data-ttu-id="139b3-132">hello 특정 RPO 데이터에서 찾을 수 있습니다 [개요의 비즈니스 연속성](sql-database-business-continuity.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-132">hello specific RPO data can be found at [Overview of Business Continuity](sql-database-business-continuity.md).</span></span>

<span data-ttu-id="139b3-133">hello 다음 그림의 예가 나와 활성 지리적 복제 구성 된 hello North Central US 지역은에서 기본 및 보조 hello 미국 중남부 지역에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-133">hello following figure shows an example of active geo-replication configured with a primary in hello North Central US region and secondary in hello South Central US region.</span></span>

![지역에서 복제 관계](./media/sql-database-active-geo-replication/geo-replication-relationship.png)

<span data-ttu-id="139b3-135">Hello 보조 데이터베이스를 읽을 수 있으므로 작업을 보고와 같은 사용된 toooffload 읽기 전용 작업을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-135">Because hello secondary databases are readable, they can be used toooffload read-only workloads such as reporting jobs.</span></span> <span data-ttu-id="139b3-136">활성 지리적 복제를 사용 하는 경우 가능한 toocreate hello에 대 한 보조 데이터베이스 hello에 hello 주 하지만와 동일한 지역 hello 응용 프로그램의 복원 력을 toocatastrophic 오류 증가 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-136">If you are using active geo-replication, it is possible toocreate hello secondary database in hello same region with hello primary, but it does not increase hello application's resilience toocatastrophic failures.</span></span> <span data-ttu-id="139b3-137">자동 장애 조치 그룹(미리 보기 상태)을 사용하는 경우 보조 데이터베이스는 항상 다른 지역에 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-137">If you are using auto-failover groups (in-preview), your secondary database is always created in a different region.</span></span>

<span data-ttu-id="139b3-138">또한 toodisaster 복구 활성 지리적 복제는 다음 시나리오는 hello에 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-138">In addition toodisaster recovery active geo-replication can be used in hello following scenarios:</span></span>

* <span data-ttu-id="139b3-139">**데이터베이스 마이그레이션**: 최소 가동 중지 시간을 활성 지리적 복제 toomigrate 하나의 서버 tooanother 온라인에서 데이터베이스를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-139">**Database migration**: You can use active geo-replication toomigrate a database from one server tooanother online with minimum downtime.</span></span>
* <span data-ttu-id="139b3-140">**응용 프로그램 업그레이드**: 응용 프로그램을 업그레이드하는 동안 추가 보조 데이터베이스를 장애 복구 복사본으로 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-140">**Application upgrades**: You can create an extra secondary as a fail back copy during application upgrades.</span></span>

<span data-ttu-id="139b3-141">tooachieve 실제 비즈니스 연속성, 데이터 센터 간 데이터베이스 중복성 추가 것 hello 솔루션의 일부분에 불과합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-141">tooachieve real business continuity, adding database redundancy between datacenters is only part of hello solution.</span></span> <span data-ttu-id="139b3-142">치명적인 오류 필요 hello 서비스를 구성 하는 모든 구성 요소와 모든 종속 서비스의 복구 후에 응용 프로그램 (서비스)에 종단 간를 복구 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-142">Recovering an application (service) end-to-end after a catastrophic failure requires recovery of all components that constitute hello service and any dependent services.</span></span> <span data-ttu-id="139b3-143">이러한 구성 요소의 예로 hello 클라이언트 소프트웨어 (예를 들어 사용자 지정 JavaScript 사용 하 여 브라우저), 웹 프런트 엔드, 저장소 및 DNS를 들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-143">Examples of these components include hello client software (for example, a browser with a custom JavaScript), web front ends, storage, and DNS.</span></span> <span data-ttu-id="139b3-144">모든 구성 요소는 복원 력이 toohello 동일한 오류 및 응용 프로그램의 hello 복구 시간 목표 (RTO) 내에서 사용할 수 있게 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-144">It is critical that all components are resilient toohello same failures and become available within hello recovery time objective (RTO) of your application.</span></span> <span data-ttu-id="139b3-145">따라서 모든 종속 서비스 tooidentify 필요 하 고 hello 보장 및 제공 하는 기능을 이해 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-145">Therefore, you need tooidentify all dependent services and understand hello guarantees and capabilities they provide.</span></span> <span data-ttu-id="139b3-146">그런 다음 적절 한 단계 tooensure 하는 동안 서비스 함수 hello 종속 된 hello 서비스의 장애 조치를 수행 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-146">Then, you must take adequate steps tooensure that your service functions during hello failover of hello services on which it depends.</span></span> <span data-ttu-id="139b3-147">재해 복구를 위한 솔루션 설계에 대한 자세한 내용은 [활성 지역 복제를 사용하여 재해 복구를 위한 클라우드 솔루션 설계](sql-database-designing-cloud-solutions-for-disaster-recovery.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="139b3-147">For more information about designing solutions for disaster recovery, see [Designing Cloud Solutions for Disaster Recovery Using active geo-replication](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>

## <a name="active-geo-replication-capabilities"></a><span data-ttu-id="139b3-148">활성 지역 복제 기능</span><span class="sxs-lookup"><span data-stu-id="139b3-148">Active geo-replication capabilities</span></span>
<span data-ttu-id="139b3-149">hello 활성 지리적 복제 기능에서는 hello를 다음 필수 기능을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-149">hello active geo-replication feature provides hello following essential capabilities:</span></span>
* <span data-ttu-id="139b3-150">**자동 비동기 복제**: tooan 기존 데이터베이스를 추가 하 여 보조 데이터베이스 에서만 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-150">**Automatic Asynchronous Replication**: You can only create a secondary database by adding tooan existing database.</span></span> <span data-ttu-id="139b3-151">모든 Azure SQL 데이터베이스 서버에서 보조 hello는 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-151">hello secondary can be created in any Azure SQL Database server.</span></span> <span data-ttu-id="139b3-152">를 만든 후 보조 데이터베이스 hello hello 주 데이터베이스에서 복사 하는 hello 데이터로 채워집니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-152">Once created, hello secondary database is populated with hello data copied from hello primary database.</span></span> <span data-ttu-id="139b3-153">이 프로세스를 시드라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-153">This process is known as seeding.</span></span> <span data-ttu-id="139b3-154">보조 데이터베이스를 생성 하 고 시드 된 후 업데이트 toohello 주 데이터베이스는 비동기적으로 자동으로 toohello 보조 데이터베이스를 복제 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-154">After secondary database has been created and seeded, updates toohello primary database are asynchronously replicated toohello secondary database automatically.</span></span> <span data-ttu-id="139b3-155">비동기 복제는 복제 된 toohello 보조 데이터베이스를 되기 전에 트랜잭션은 hello 주 데이터베이스에서 커밋됩니다 의미 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-155">Asynchronous replication means that transactions are committed on hello primary database before they are replicated toohello secondary database.</span></span> 
* <span data-ttu-id="139b3-156">**읽기 가능한 보조 데이터베이스**: 읽기 전용 작업을 사용 하 여 hello 동일 하거나 서로 다른 보안 주체 hello 주 데이터베이스에 액세스 하기 위해 사용 되는 응용 프로그램에서 보조 데이터베이스를 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-156">**Readable secondary databases**: An application can access a secondary database for read-only operations using hello same or different security principals used for accessing hello primary database.</span></span> <span data-ttu-id="139b3-157">hello 보조 데이터베이스에서에서 작동 스냅숏 격리 모드 tooensure 복제의 기본 hello hello 업데이트 (로그 재생) 쿼리가 hello 보조에서 실행 하 여 지연 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-157">hello secondary databases operate in snapshot isolation mode tooensure replication of hello updates of hello primary (log replay) is not delayed by queries executed on hello secondary.</span></span>

   > [!NOTE]
   > <span data-ttu-id="139b3-158">업데이트가 있는 경우 스키마 hello hello 보조 데이터베이스에 스키마 잠금이 필요로 하는 기본에서에서 수신 하는지 hello 로그 재생 hello 보조 데이터베이스에서 지연 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-158">hello log replay is delayed on hello secondary database if there are schema updates that it is receiving from hello Primary that require a schema lock on hello secondary database.</span></span> 
   > 

* <span data-ttu-id="139b3-159">**읽기 가능한 보조 복제본을 여러**: 둘 이상의 보조 데이터베이스 중복성 및 hello 주 데이터베이스와 응용 프로그램에 대 한 보호 수준을 증가 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-159">**Multiple readable secondaries**: Two or more secondary databases increase redundancy and level of protection for hello primary database and application.</span></span> <span data-ttu-id="139b3-160">여러 보조 데이터베이스가 있으면 hello 보조 데이터베이스 중 하나에 오류가 발생 해도 hello 응용 프로그램 보호가 유지 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-160">If multiple secondary databases exist, hello application remains protected even if one of hello secondary databases fails.</span></span> <span data-ttu-id="139b3-161">Hello 응용 프로그램이 노출 될 보조 데이터베이스를 하나만 실패할 경우 새 보조 데이터베이스를 만들 때까지 toohigher 위험 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-161">If there is only one secondary database, and it fails, hello application is exposed toohigher risk until a new secondary database is created.</span></span>

   > [!NOTE]
   > <span data-ttu-id="139b3-162">활성 지리적 복제 toobuild 전 세계적으로 분산된 응용 프로그램을 사용 하는 경우 필요한 tooprovide 읽기 전용 액세스 toodata 4 개 이상의 영역에는 보조 데이터베이스 (체인으로 알려진 프로세스)의 보조을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-162">If you are using active geo-replication toobuild a globally distributed application and need tooprovide read-only access toodata in more than 4 regions, you can create secondary of a secondary (a process known as chaining).</span></span> <span data-ttu-id="139b3-163">이렇게 하면 거의 제한이 없는 규모의 데이터베이스 복제를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-163">This way you can achieve virtually unlimited scale of database replication.</span></span> <span data-ttu-id="139b3-164">또한 체인 hello 주 데이터베이스에서 복제의 hello 오버 헤드를 줄입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-164">In addition, chaining reduces hello overhead of replication from hello primary database.</span></span> <span data-ttu-id="139b3-165">hello 대신 hello 리프 대부분 보조 데이터베이스에서 hello 증가 복제 지연 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-165">hello trade-off is hello increased replication lag on hello leaf-most secondary databases.</span></span> <span data-ttu-id="139b3-166">에서도 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-166">.</span></span> 
   >

* <span data-ttu-id="139b3-167">**탄력적 풀 데이터베이스 지원**: 모든 탄력적 풀의 모든 데이터베이스에 대해 활성 지역 복제를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-167">**Support of elastic pool databases**: Active geo-replication can be configured for any database in any elastic pool.</span></span> <span data-ttu-id="139b3-168">hello 보조 데이터베이스는 다른 탄력적 풀에 있는 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-168">hello secondary database can be in another elastic pool.</span></span> <span data-ttu-id="139b3-169">일반 데이터베이스에 대 한 보조 hello 탄력적 풀 수 있고 그 반대로 hello 서비스 계층은으로 hello 동일 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-169">For regular databases, hello secondary can be an elastic pool and vice versa as long as hello service tiers are hello same.</span></span> 
* <span data-ttu-id="139b3-170">**Hello 보조 데이터베이스의 구성 가능한 성능 수준을**: 보조 데이터베이스를 기본 hello에 비해 더 낮은 성능 수준으로 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-170">**Configurable performance level of hello secondary database**: A secondary database can be created with lower performance level than hello primary.</span></span> <span data-ttu-id="139b3-171">기본 및 보조 데이터베이스는 필수 toohave hello와 동일한 서비스 계층입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-171">Both primary and secondary databases are required toohave hello same service tier.</span></span> <span data-ttu-id="139b3-172">이 방법은 권장 되지 않습니다 응용 프로그램에 대 한 높은 데이터베이스 쓰기 활동 hello 증가 복제 지연 장애 조치 후 hello 상당한 데이터 손실 위험을 증가 하기 때문에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-172">This option is not recommended for applications with high database write activity because hello increased replication lag increases hello risk of substantial data loss after a failover.</span></span> <span data-ttu-id="139b3-173">또한 새 hello 될 때까지 장애 조치 hello 응용 프로그램의 성능이 저하 되어 후 기본는 업그레이드 된 tooa 더 높은 성능 수준입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-173">In addition, after failover hello application’s performance is impacted until hello new primary is upgraded tooa higher performance level.</span></span> <span data-ttu-id="139b3-174">hello Azure 포털에 로그 IO 백분율 차트 제공 좋은 방법 tooestimate hello 필요한 toosustain hello 복제 부하를 보조 hello의 최소한의 성능 수준입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-174">hello log IO percentage chart on Azure portal provides a good way tooestimate hello minimal performance level of hello secondary that is required toosustain hello replication load.</span></span> <span data-ttu-id="139b3-175">예를 들어 주 데이터베이스를 P6 (1000 DTU) 보조 50 %hello 필요한 toobe 최소한 해당 로그 IO 백분율 이며 P4 (500 DTU).</span><span class="sxs-lookup"><span data-stu-id="139b3-175">For example, if your Primary database is P6 (1000 DTU) and its log IO percent is 50% hello secondary needs toobe at least P4 (500 DTU).</span></span> <span data-ttu-id="139b3-176">Hello 로그 IO 사용 하 여 데이터를 검색할 수도 있습니다 [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) 또는 [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) 데이터베이스 뷰.</span><span class="sxs-lookup"><span data-stu-id="139b3-176">You can also retrieve hello log IO data using [sys.resource_stats](https://msdn.microsoft.com/library/dn269979.aspx) or [sys.dm_db_resource_stats](https://msdn.microsoft.com/library/dn800981.aspx) database views.</span></span>  <span data-ttu-id="139b3-177">Hello SQL 데이터베이스 성능 수준에 대 한 자세한 내용은 참조 하십시오. [SQL 데이터베이스 옵션 및 성능](sql-database-service-tiers.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-177">For more information on hello SQL Database performance levels, see [SQL Database options and performance](sql-database-service-tiers.md).</span></span> 
* <span data-ttu-id="139b3-178">**사용자 제어 장애 조치 및 장애 복구**: 보조 데이터베이스에 명시적으로 언제 든 지 hello 응용 프로그램 또는 hello 사용자가 주 역할로 전환 된 toohello 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-178">**User-controlled failover and failback**: A secondary database can explicitly be switched toohello primary role at any time by hello application or hello user.</span></span> <span data-ttu-id="139b3-179">실제 정지 hello 하는 동안 "계획 되지 않은" 옵션 사용 하는지는 즉시 보조 toobe hello 주를 올립니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-179">During a real outage hello “unplanned” option should be used, which immediately promotes a secondary toobe hello primary.</span></span> <span data-ttu-id="139b3-180">실패 한 주 hello 복구 하 고 ´ ï ´ 다시 hello 시스템 자동으로 표시 hello 보조 데이터베이스로 기본을 복구할 hello 새 주 데이터베이스를 최신 상태로 전환 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-180">When hello failed primary recovers and is available again, hello system automatically marks hello recovered primary as a secondary and bring it up-to-date with hello new primary.</span></span> <span data-ttu-id="139b3-181">복제의 비동기 특성 toohello, 기한 적은 양의 데이터 손실 될 수 있습니다 계획 되지 않은 장애 조치를 수행 하는 동안 기본 hello 가장 최근 변경 내용을 toohello 보조 복제 되기 전에 실패 하는 경우.</span><span class="sxs-lookup"><span data-stu-id="139b3-181">Due toohello asynchronous nature of replication, a small amount of data can be lost during unplanned failovers if a primary fails before it replicates hello most recent changes toohello secondary.</span></span> <span data-ttu-id="139b3-182">여러 개의 보조 복제본으로 한 기본 장애 조치, hello 시스템 hello 복제 관계를 자동으로 재구성 하 고 링크 hello 새로 보조 toohello 남아 있는 모든 사용자 개입이 필요 없이 기본 승격 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-182">When a primary with multiple secondaries fails over, hello system automatically reconfigures hello replication relationships and links hello remaining secondaries toohello newly promoted primary without requiring any user intervention.</span></span> <span data-ttu-id="139b3-183">Hello 장애 조치를 발생 시킨 hello 중단 완화 될 후 바람직한 tooreturn hello 응용 프로그램 toohello 기본 지역 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-183">After hello outage that caused hello failover is mitigated, it may be desirable tooreturn hello application toohello primary region.</span></span> <span data-ttu-id="139b3-184">hello 장애 조치 명령은 hello로 호출할지, toodo "계획 된" 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-184">toodo that, hello failover command should be invoked with hello “planned” option.</span></span> 
* <span data-ttu-id="139b3-185">**자격 증명 및 방화벽 규칙을 동기화 유지**:를 사용 하는 것이 좋습니다 [데이터베이스 방화벽 규칙](sql-database-firewall-configure.md) 지리적으로 복제 된 데이터베이스에 대 한 이러한 규칙 hello 데이터베이스 tooensure로 복제할 수 있도록 모든 보조 데이터베이스의 경우 기본 hello와 같은 방화벽 규칙을 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-185">**Keeping credentials and firewall rules in sync**: We recommend using [database firewall rules](sql-database-firewall-configure.md) for geo-replicated databases so these rules can be replicated with hello database tooensure all secondary databases have hello same firewall rules as hello primary.</span></span> <span data-ttu-id="139b3-186">이 방법은 toomanually 구성 하 고 모두 hello 주 데이터베이스와 보조 데이터베이스를 호스팅하는 서버에서 방화벽 규칙을 유지 관리 하는 고객에 대 한 hello 필요성을 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-186">This approach eliminates hello need for customers toomanually configure and maintain firewall rules on servers hosting both hello primary and secondary databases.</span></span> <span data-ttu-id="139b3-187">마찬가지로, 사용 하 여 [포함 된 데이터베이스 사용자](sql-database-manage-logins.md) 데이터에 대 한 액세스 사용 주 및 보조 데이터베이스는 항상 동일한 사용자의 자격 증명 이므로 장애 조치 중 없습니다 중단 hello 게 로그인이 있는 due toomismatches 및 암호입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-187">Similarly, using [contained database users](sql-database-manage-logins.md) for data access ensures both primary and secondary databases always have hello same user credentials so during a failover, there is no disruptions due toomismatches with logins and passwords.</span></span> <span data-ttu-id="139b3-188">Hello 추가 [Azure Active Directory](../active-directory/active-directory-whatis.md), 고객 사용자 액세스 tooboth 기본 및 보조 데이터베이스를 관리할 수 있습니다 및 데이터베이스에 대 한 자격 증명을 완전히 관리에 필요한 hello를 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-188">With hello addition of [Azure Active Directory](../active-directory/active-directory-whatis.md), customers can manage user access tooboth primary and secondary databases and eliminating hello need for managing credentials in databases altogether.</span></span>

## <a name="auto-failover-group-capabilities"></a><span data-ttu-id="139b3-189">자동 장애 조치 그룹 기능</span><span class="sxs-lookup"><span data-stu-id="139b3-189">Auto-failover group capabilities</span></span>

<span data-ttu-id="139b3-190">자동 장애 조치 그룹 기능은 그룹 수준 복제 및 자동 장애 조치를 지원하여 활성 지역 복제의 강력한 추상화를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-190">Auto-failover groups feature provides a powerful abstraction of active geo-replication by supporting group level replication and automatic failover.</span></span> <span data-ttu-id="139b3-191">또한 hello 추가 수신기 끝점을 제공 하 여 장애 조치 후 hello 필요 toochange hello SQL 연결 문자열을 제거 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-191">In addition, it removes hello necessity toochange hello SQL connection string after failover by providing hello additional listener end-points.</span></span> 

* <span data-ttu-id="139b3-192">**장애 조치 그룹**: 다른 지역의 두 서버 (기본 및 보조 서버) 간에 하나 이상의 장애 조치 그룹을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-192">**Failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="139b3-193">각 그룹은 일부 또는 모든 주 복제본은 tooan 정전 hello 기본 지역으로 인해 사용할 수 없게 되는 경우 하나의 단위로 복구 하는 하나 또는 여러 데이터베이스를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-193">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span>  
* <span data-ttu-id="139b3-194">**주 서버**: hello hello 장애 조치 그룹의 주 데이터베이스를 호스팅하는 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-194">**Primary server**: A server that hosts hello primary databases in hello failover group.</span></span>
* <span data-ttu-id="139b3-195">**보조 서버**: hello hello 장애 조치 그룹에 보조 데이터베이스를 호스팅하는 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-195">**Secondary server**: A server that hosts hello secondary databases in hello failover group.</span></span> <span data-ttu-id="139b3-196">hello 보조 서버 hello에 있을 수 없습니다 hello 주 서버와 동일한 영역입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-196">hello secondary server cannot be in hello same region as hello primary server.</span></span>
* <span data-ttu-id="139b3-197">**추가 데이터베이스 toofailover 그룹**: 서버 내에서 여러 데이터베이스를 넣을 수도 있고 내는 탄력적인 풀 hello에 동일한 그룹 장애 조치 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-197">**Adding databases toofailover group**: You can put several databases within a server or within an elastic pool into hello same failover group.</span></span> <span data-ttu-id="139b3-198">보조 데이터베이스를 자동으로 만듭니다 독립 실행형 데이터베이스 toohello 그룹을 추가 하는 경우 동일한 버전 및 성능 수준 hello를 사용 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-198">If you add a standalone database toohello group, it automatically creates a secondary database using hello same edition and performance level.</span></span> <span data-ttu-id="139b3-199">Hello 주 데이터베이스는 탄력적인 풀에 있으면 hello 보조가 자동으로 생성 hello 탄력적 풀 hello로 동일한 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-199">If hello primary database is in an elastic pool, hello secondary is automatically created in hello elastic pool with hello same name.</span></span> <span data-ttu-id="139b3-200">Hello 보조 서버에서 보조 데이터베이스에 이미 있는 데이터베이스를 추가 하는 경우 해당 지리적 복제 hello 그룹에 의해 상속 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-200">If you add a database that already has a secondary database in hello secondary server, that geo-replication is inherited by hello group.</span></span>

   > [!NOTE]
   > <span data-ttu-id="139b3-201">이미 hello 그룹 장애 조치의 포함 되지 않은 서버에서 보조 데이터베이스를 포함 하는 데이터베이스를 추가할 때 새 보조 데이터베이스 hello 보조 서버에 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-201">When adding a database that already has a secondary database in a server that is not part of hello failover group, a new secondary is created in hello secondary server.</span></span> 
   >

* <span data-ttu-id="139b3-202">**읽기 / 쓰기 Failover 수신기**:으로 형성 된 A DNS CNAME 레코드  **&lt;장애 조치 그룹 이름&gt;. database.windows.net** toohello 현재 주 서버 URL을 가리키는 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-202">**Failover group read-write listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.database.windows.net** that points toohello current primary server URL.</span></span> <span data-ttu-id="139b3-203">읽기 / 쓰기 SQL 응용 프로그램 hello 허용 tootransparently hello 기본 장애 조치 후 변경 될 때 toohello 주 데이터베이스를 다시 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-203">It allows hello read-write SQL applications tootransparently reconnect toohello primary database when hello primary changes after failover.</span></span> 
* <span data-ttu-id="139b3-204">**장애 조치 그룹 읽기 전용 수신기**:으로 형성 된 A DNS CNAME 레코드  **&lt;장애 조치 그룹 이름&gt;. secondary.database.windows.net** toohello 보조 서버 URL을 가리키는 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-204">**Failover group read-only listener**: A DNS CNAME record formed as **&lt;failover-group-name&gt;.secondary.database.windows.net** that points toohello secondary server’s URL.</span></span> <span data-ttu-id="139b3-205">읽기 전용 tootransparently 연결 된 SQL 응용 프로그램 hello 허용 toohello 보조 데이터베이스 hello를 사용 하 여 부하 분산 규칙을 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-205">It allows hello read-only SQL applications tootransparently connect toohello secondary database using hello specified load-balancing rules.</span></span> <span data-ttu-id="139b3-206">필요에 따라 읽기 전용 hello를 원하는 경우 트래픽 toobe 자동으로 리디렉션하여 toohello 주 서버 hello 보조 서버를 사용할 수 없는 경우 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-206">Optionally you can specify if you want hello read-only traffic toobe automatically re-directed toohello primary server when hello secondary server is not available.</span></span>
* <span data-ttu-id="139b3-207">**자동 장애 조치 정책**: 기본적으로 hello 그룹 장애 조치는 자동 장애 조치 정책으로 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-207">**Automatic failover policy**: By default, hello failover group is configured with an automatic failover policy.</span></span> <span data-ttu-id="139b3-208">hello 시스템 hello 오류가 검색 되는 즉시 장애 조치를 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-208">hello system triggers failover as soon as hello failure is detected.</span></span> <span data-ttu-id="139b3-209">Toocontrol hello hello 응용 프로그램에서 워크플로 장애 조치 하려는 경우 자동 장애 조치를 해제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-209">If you want toocontrol hello failover workflow from hello application, you can turn off automatic failover.</span></span> 
* <span data-ttu-id="139b3-210">**수동 장애 조치**: hello 자동 장애 조치 구성에 관계 없이 언제 든 수동으로 장애 조치를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-210">**Manual failover**: You can initiate failover manually at any time regardless of hello automatic failover configuration.</span></span> <span data-ttu-id="139b3-211">자동 장애 조치 정책 구성 된 수동 장애 조치 없는 경우에 hello 그룹 장애 조치에에서 필요한 toorecover 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-211">If automatic failover policy is not configured manual failover is required toorecover databases in hello failover group.</span></span> <span data-ttu-id="139b3-212">강제 장애 조치 또는 친숙한 장애 조치(전체 데이터 동기화 사용)를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-212">You can initiate forced or friendly failover (with full data synchronization).</span></span> <span data-ttu-id="139b3-213">후자의 hello 사용된 toorelocate hello 활성 서버 toohello 기본 지역 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-213">hello latter could be used toorelocate hello active server toohello primary region.</span></span> <span data-ttu-id="139b3-214">장애 조치 완료 되 면 hello DNS 레코드는 자동으로 업데이트 된 tooensure 연결 toohello 올바른 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-214">When failover is completed hello DNS records are automatically updated tooensure connectivity toohello correct server.</span></span>
* <span data-ttu-id="139b3-215">**데이터 손실 된 경우 유예 기간이**: 비동기 복제 hello 장애 조치를 사용 하 여 hello 기본 및 보조 데이터베이스를 동기화 하기 때문에 데이터 손실이 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-215">**Grace period with data loss**: Because hello primary and secondary databases are synchronized using asynchronous replication hello failover may result in data loss.</span></span> <span data-ttu-id="139b3-216">응용 프로그램의 허용 오차 toodata 손실 hello 자동 장애 조치 정책 tooreflect를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-216">You can customize hello automatic failover policy tooreflect your application’s tolerance toodata loss.</span></span> <span data-ttu-id="139b3-217">구성 하 여 **GracePeriodWithDataLossHours**, hello 시스템 데이터가 손실 될 가능성이 tooresult 있는 hello 장애 조치를 시작 하기 전에 대기 하는 시간을 제어할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-217">By configuring **GracePeriodWithDataLossHours**, you can control how long hello system waits before initiating hello failover that is likely tooresult data loss.</span></span> 

   > [!NOTE]
   > <span data-ttu-id="139b3-218">Hello 그룹의 hello 데이터베이스가 여전히 온라인 상태 인지 시스템을 감지 하는 경우 (예를 들어 hello 중단만 영향을 주지 hello 서비스 제어 평면) hello 값에 관계 없이 전체 데이터 동기화 (친숙 한 장애 조치) hello 장애 조치를 즉시 활성화 설정한 **GracePeriodWithDataLossHours**합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-218">When system detects that hello databases in hello group are still online (for example, hello outage only impacted hello service control plane), it immediately activates hello failover with full data synchronization (friendly failover) regardless of hello value set by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="139b3-219">이 동작은 hello 복구 중 데이터가 손실 되지 않습니다 보장 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-219">This behavior ensures that there is no data loss during hello recovery.</span></span> <span data-ttu-id="139b3-220">hello 유예 기간 친숙 한 장애 조치 하는 경우에 적용이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-220">hello grace period takes effect only when a friendly failover is not possible.</span></span> <span data-ttu-id="139b3-221">Hello 유예 기간이 만료 되기 전에 hello 중단 완화는 hello 장애 조치 활성화 되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-221">If hello outage is mitigated before hello grace period expires, hello failover is not activated.</span></span>
   >

* <span data-ttu-id="139b3-222">**여러 장애 조치 그룹**: hello에 대 한 여러 장애 조치 그룹을 구성할 수 있습니다 된 장애 조치 하는 서버 toocontrol hello 범위의 동일한 쌍입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-222">**Multiple failover groups**: You can configure multiple failover groups for hello same pair of servers toocontrol hello scale of failovers.</span></span> <span data-ttu-id="139b3-223">각 그룹은 독립적으로 장애 조치됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-223">Each group fails over independently.</span></span> <span data-ttu-id="139b3-224">탄력적 풀을 사용 하 여 다중 테 넌 트 응용 프로그램에는 각 풀의이 기능 toomix 주 데이터베이스와 보조 데이터베이스를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-224">If your multi-tenant application uses elastic pools, you can use this capability toomix primary and secondary databases in each pool.</span></span> <span data-ttu-id="139b3-225">이 방법은 hello 테 넌 트의 절반 중단 tooonly의 hello 영향을 줄일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-225">This way you can reduce hello impact of an outage tooonly half of hello tenants.</span></span>

## <a name="best-practices-of-building-highly-available-service"></a><span data-ttu-id="139b3-226">항상 사용 가능한 서비스를 빌드하는 모범 사례</span><span class="sxs-lookup"><span data-stu-id="139b3-226">Best practices of building highly available service</span></span>

<span data-ttu-id="139b3-227">Azure SQL 데이터베이스의 고객 hello를 사용 하는 항상 사용 가능한 서비스 toobuild 다음이 지침을 따라야 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-227">toobuild a highly available service that uses Azure SQL database hello customers should follow these guidelines:</span></span>
- <span data-ttu-id="139b3-228">**장애 조치(failover) 그룹 사용**: 다른 지역의 두 서버(기본 및 보조 서버) 간에 하나 이상의 장애 조치(failover) 그룹을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-228">**Use failover group**: One or many failover groups can be created between two servers in different regions (primary and secondary servers).</span></span> <span data-ttu-id="139b3-229">각 그룹은 일부 또는 모든 주 복제본은 tooan 정전 hello 기본 지역으로 인해 사용할 수 없게 되는 경우 하나의 단위로 복구 하는 하나 또는 여러 데이터베이스를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-229">Each group can include one or several databases that are recovered as a unit in case all or some primary databases become unavailable due tooan outage in hello primary region.</span></span> <span data-ttu-id="139b3-230">hello 그룹 장애 조치 동일 서비스 목표 기본 hello로 hello로 지역 보조 데이터베이스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-230">hello failover group creates geo-secondary database with hello same service objective as hello primary.</span></span> <span data-ttu-id="139b3-231">같은 서비스 수준 목표도 hello로 구성 된 기존 지리적 복제 관계 toohello 장애 조치 그룹 확인 되었는지 hello 지역-보조를 추가 하는 경우 기본 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-231">If you add an existing geo-replication relationship toohello failover group make sure hello geo-secondary is configured with hello same service level objective as hello primary.</span></span>
- <span data-ttu-id="139b3-232">**OLTP 워크 로드에 대 한 읽기 / 쓰기 수신기를 사용 하 여**: OLTP 작업 사용을 수행할 때  **&lt;장애 조치 그룹 이름&gt;. database.windows.net** hello 서버 URL과 hello 연결 될 때 자동으로 지정 된 toohello 주입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-232">**Use read-write listener for OLTP workload**: When performing OLTP operations use **&lt;failover-group-name&gt;.database.windows.net** as hello server URL and hello connections will be automatically directed toohello primary.</span></span> <span data-ttu-id="139b3-233">이 URL hello 장애 조치 후 변경 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-233">This URL will not change after hello failover.</span></span>  
<span data-ttu-id="139b3-234">참고 hello 장애 조치 hello hello 클라이언트 연결을 리디렉션된 toohello 새 주 후에 hello 클라이언트 DNS 캐시를 새로 고칠 수 있도록 DNS 레코드를 업데이트 하는 작업이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-234">Note hello failover involves updating hello DNS record so hello client connections will be redirected toohello new primary only after hello client DNS cache is refreshed.</span></span>
- <span data-ttu-id="139b3-235">**읽기 전용 작업에 대 한 읽기 전용 수신기를 사용 하 여**: hello 응용 프로그램에서 hello 보조 데이터베이스를 논리적으로 격리 된 읽기 전용 작업이 있는 데이터의 허용 toocertain 부실을 설정한 경우 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-235">**Use read-only listener for read-only workload**: If you have a logically isolated read-only workload that is tolerant toocertain staleness of data, you can use hello secondary database in hello application.</span></span> <span data-ttu-id="139b3-236">읽기 전용 세션 사용에 대 한  **&lt;장애 조치 그룹 이름&gt;. secondary.database.windows.net** 내용이 자동으로 지정 된 toohello 보조 되므로 hello 서버 URL과 hello 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-236">For read-only sessions use **&lt;failover-group-name&gt;.secondary.database.windows.net** as hello server URL and hello connection will be automatically directed toohello secondary.</span></span> <span data-ttu-id="139b3-237">또한 **ApplicationIntent=ReadOnly**를 사용하여 연결 문자열 읽기 의도를 표시하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-237">It is also recommended that you indicate in connection string read intent by using **ApplicationIntent=ReadOnly**.</span></span> 
- <span data-ttu-id="139b3-238">**성능 저하를 위해 준비할**: SQL 장애 조치 의사 결정은 hello 나머지 hello 응용 프로그램 또는 사용 하는 다른 서비스와에서는 독립적입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-238">**Be prepared for perf degradation**: SQL failover decision is independent from hello rest of hello application or other services used.</span></span> <span data-ttu-id="139b3-239">hello 응용 프로그램의 한 영역 및 다른 일부 구성 요소와 "mixed" 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-239">hello application may be “mixed” with some components in one region and some in another.</span></span> <span data-ttu-id="139b3-240">tooavoid hello 저하 hello DR 영역의 hello 중복 응용 프로그램 배포를 확인 하 고 hello이이 문서의 지침을 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-240">tooavoid hello degradation, ensure hello redundant application deployment in hello DR region and follow hello guidelines in this article.</span></span>  
<span data-ttu-id="139b3-241">참고 hello 응용 프로그램 hello DR 지역에 없는 toouse 다른 연결 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-241">Note hello application in hello DR region does not have toouse a different connection string.</span></span>  
- <span data-ttu-id="139b3-242">**데이터 손실에 대 한 준비**: 가동 중단 감지 되 면 SQL 자동으로 트리거하는 읽기 / 쓰기 failover 한 최상의 데이터 손실 toohello 0은 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-242">**Prepare for data loss**: If an outage is detected, SQL automatically triggers read-write failover if there is zero data loss toohello best of our knowledge.</span></span> <span data-ttu-id="139b3-243">그렇지 않으면 때까지 대기 하 여 지정한 hello 기간 **GracePeriodWithDataLossHours**합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-243">Otherwise, it waits for hello period you specified by **GracePeriodWithDataLossHours**.</span></span> <span data-ttu-id="139b3-244">**GracePeriodWithDataLossHours**를 지정한 경우 데이터 손실에 대비합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-244">If you specified **GracePeriodWithDataLossHours**, be prepared for data loss.</span></span> <span data-ttu-id="139b3-245">일반적으로 중단 시에 Azure에서는 가용성을 우선으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-245">In general, during outages, Azure favors availability.</span></span> <span data-ttu-id="139b3-246">데이터가 손실 될 수 없는 경우 확인 되었는지 tooset **GracePeriodWithDataLossHours** 24 시간과 같이 tooa 충분히 큰 수입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-246">If you cannot afford data loss, make sure tooset **GracePeriodWithDataLossHours** tooa sufficiently large number, such as 24 hours.</span></span> 


## <a name="upgrading-or-downgrading-a-primary-database"></a><span data-ttu-id="139b3-247">주 데이터베이스 업그레이드 또는 다운그레이드</span><span class="sxs-lookup"><span data-stu-id="139b3-247">Upgrading or downgrading a primary database</span></span>
<span data-ttu-id="139b3-248">주 데이터베이스 tooa 다양 한 성능 수준을 다운 그레이드 하거나 업그레이드할 수 있습니다 (hello 내에서 동일한 서비스 계층) 모든 보조 데이터베이스가 연결을 끊지 않고 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-248">You can upgrade or downgrade a primary database tooa different performance level (within hello same service tier) without disconnecting any secondary databases.</span></span> <span data-ttu-id="139b3-249">업그레이드 하는 경우 hello 보조 데이터베이스를 먼저 업그레이드 하 고 다음 hello 주를 업그레이드 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-249">When upgrading, we recommend that you upgrade hello secondary database first, and then upgrade hello primary.</span></span> <span data-ttu-id="139b3-250">Hello 순서를 반대로 다운 그레이드 하는 경우: 먼저 hello 주를 다운 그레이드 하 고 다음 hello 보조 데이터베이스를 다운 그레이드 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-250">When downgrading, reverse hello order: downgrade hello primary first, and then downgrade hello secondary.</span></span> <span data-ttu-id="139b3-251">업그레이드 하거나 hello 데이터베이스 tooa 다양 한 서비스 계층을 다운 그레이드할 때이 권장 사항은 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-251">When you upgrade or downgrade hello database tooa different service tier this recommendation is enforced.</span></span> 

> [!NOTE]
> <span data-ttu-id="139b3-252">Hello 장애 조치 그룹 구성의 일부분으로 보조 데이터베이스를 만든 경우 것은 권장된 toodowngrade hello 보조 데이터베이스가 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-252">If you created secondary database as part of hello failover group configuration it is not recommended toodowngrade hello secondary database.</span></span> <span data-ttu-id="139b3-253">이 tooensure 데이터 계층에 충분 한 용량 tooprocess 하면 정기 작업 후 장애 조치 활성화 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-253">This is tooensure your data tier has sufficient capacity tooprocess your regular workload after failover is activated.</span></span> 
>

## <a name="preventing-hello-loss-of-critical-data"></a><span data-ttu-id="139b3-254">Hello 중요 한 데이터 손실을 방지</span><span class="sxs-lookup"><span data-stu-id="139b3-254">Preventing hello loss of critical data</span></span>
<span data-ttu-id="139b3-255">광역 네트워크의 높은 대기 시간이 toohello 인해 연속 복사는 비동기 복제 메커니즘을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-255">Due toohello high latency of wide area networks, continuous copy uses an asynchronous replication mechanism.</span></span> <span data-ttu-id="139b3-256">비동기 복제를 수행하면 오류가 발생하는 경우에 일부 데이터 손실은 불가피합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-256">Asynchronous replication makes some data loss unavoidable if a failure occurs.</span></span> <span data-ttu-id="139b3-257">그러나 일부 응용 프로그램은 데이터 손실이 없어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-257">However, some applications may require no data loss.</span></span> <span data-ttu-id="139b3-258">tooprotect 이러한 중요 업데이트, 응용 프로그램 개발자 hello를 호출할 수 [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) hello 트랜잭션을 커밋한 직후 시스템 프로시저입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-258">tooprotect these critical updates, an application developer can call hello [sp_wait_for_database_copy_sync](https://msdn.microsoft.com/library/dn467644.aspx) system procedure immediately after committing hello transaction.</span></span> <span data-ttu-id="139b3-259">호출 **sp_wait_for_database_copy_sync** hello 마지막으로 커밋된 트랜잭션의 될 때까지 호출 스레드 블록 hello toohello 보조 데이터베이스를 전송 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-259">Calling **sp_wait_for_database_copy_sync** blocks hello calling thread until hello last committed transaction has been transmitted toohello secondary database.</span></span> <span data-ttu-id="139b3-260">그러나 것 대기 하지 않는 전송 hello 트랜잭션 toobe 재생 하 고 보조 hello에서 커밋 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-260">However, it does not wait for hello transmitted transactions toobe replayed and committed on hello secondary.</span></span> <span data-ttu-id="139b3-261">**sp_wait_for_database_copy_sync** 범위가 지정 된 tooa 특정 연속 복사 링크입니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-261">**sp_wait_for_database_copy_sync** is scoped tooa specific continuous copy link.</span></span> <span data-ttu-id="139b3-262">Hello 연결 권한 toohello 주 데이터베이스와 모든 사용자는이 절차를 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-262">Any user with hello connection rights toohello primary database can call this procedure.</span></span>

> [!NOTE]
> <span data-ttu-id="139b3-263">**sp_wait_for_database_copy_sync**는 장애 조치 후 데이터 손실을 방지하지만 읽기 액세스를 위한 전체 동기화를 보장하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-263">**sp_wait_for_database_copy_sync** will prevent data loss after failover, but it will not guarantee full synchronization for read access.</span></span> <span data-ttu-id="139b3-264">hello로 인해 지연이 발생 한 **sp_wait_for_database_copy_sync** 프로시저 호출 중요 한 hello 호출의 hello 시 hello 트랜잭션 로그의 hello 크기에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-264">hello delay caused by a **sp_wait_for_database_copy_sync** procedure call can be significant and depends on hello size of hello transaction log at hello time of hello call.</span></span> 
> 

## <a name="programmatically-managing-failover-groups-and-active-geo-replication"></a><span data-ttu-id="139b3-265">장애 조치(failover) 그룹 및 활성 지역 복제를 프로그래밍 방식으로 관리</span><span class="sxs-lookup"><span data-stu-id="139b3-265">Programmatically managing failover groups and active geo-replication</span></span>
<span data-ttu-id="139b3-266">설명한 것 처럼, 자동 장애 조치 그룹 (에서-미리 보기) 및 활성 지리적 복제 Azure PowerShell을 사용 하 여 프로그래밍 방식으로 관리할 수 있습니다 및 REST API hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-266">As discussed previously, auto-failover groups (in-preview) and active geo-replication can also be managed programmatically using Azure PowerShell and hello REST API.</span></span> <span data-ttu-id="139b3-267">다음 표에서 hello hello 명령 집합을 사용할 수 있는 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-267">hello following tables describe hello set of commands available.</span></span>

<span data-ttu-id="139b3-268">**Azure 리소스 관리자 API 및 역할 기반 보안**: 활성 지리적 복제 hello를 포함 하 여 관리를 위한 Azure 리소스 관리자 Api 집합이 포함 되어 [Azure SQL 데이터베이스 REST API](https://docs.microsoft.com/rest/api/sql/) 및 [Azure PowerShell cmdlet](https://docs.microsoft.com/powershell/azure/overview)합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-268">**Azure Resource Manager API and role-based security**: Active geo-replication includes a set of Azure Resource Manager APIs for management, including hello [Azure SQL Database REST API](https://docs.microsoft.com/rest/api/sql/) and [Azure PowerShell cmdlets](https://docs.microsoft.com/powershell/azure/overview).</span></span> <span data-ttu-id="139b3-269">이러한 Api는 hello 리소스 그룹을 사용 해야 하 고 역할 기반 보안 (RBAC)를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-269">These APIs require hello use of resource groups and support role-based security (RBAC).</span></span> <span data-ttu-id="139b3-270">Tooimplement 역할을 액세스 하는 방법에 대 한 자세한 내용은 참조 하십시오. [신속히 알아봅니다 액세스 제어](../active-directory/role-based-access-control-what-is.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-270">For more information on how tooimplement access roles, see [Azure Role-Based Access Control](../active-directory/role-based-access-control-what-is.md).</span></span>

> [!NOTE]
> <span data-ttu-id="139b3-271">활성 지역 복제의 여러 새로운 기능은 [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) 기반 [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) 및 [Azure SQL Database PowerShell cmdlet](https://msdn.microsoft.com/library/azure/mt574084.aspx)에서만 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-271">Many new features of active geo-replication are only supported using [Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) based [Azure SQL REST API](https://msdn.microsoft.com/library/azure/mt163571.aspx) and [Azure SQL Database PowerShell cmdlets](https://msdn.microsoft.com/library/azure/mt574084.aspx).</span></span> <span data-ttu-id="139b3-272">hello [(클래식) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) 및 [(클래식) Azure SQL 데이터베이스 cmdlet](https://msdn.microsoft.com/library/azure/dn546723.aspx) Azure 리소스 관리자 기반 Api를 사용 하는 것이 좋습니다 hello를 사용 하 여 이전 버전과 호환성을 위해 지원 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-272">hello [(classic) REST API](https://msdn.microsoft.com/library/azure/dn505719.aspx) and [Azure SQL Database (classic) cmdlets](https://msdn.microsoft.com/library/azure/dn546723.aspx) are supported for backward compatibility so using hello Azure Resource Manager-based APIs are recommended.</span></span> 
> 

## <a name="manage-sql-database-failover-using-using-transact-sql"></a><span data-ttu-id="139b3-273">SQL 데이터베이스 장애 조치를 사용 하 여 TRANSACT-SQL을 사용 하 여 관리</span><span class="sxs-lookup"><span data-stu-id="139b3-273">Manage SQL database failover using using Transact-SQL</span></span>

| <span data-ttu-id="139b3-274">명령</span><span class="sxs-lookup"><span data-stu-id="139b3-274">Command</span></span> | <span data-ttu-id="139b3-275">설명</span><span class="sxs-lookup"><span data-stu-id="139b3-275">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="139b3-276">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="139b3-276">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="139b3-277">기존 데이터베이스에 대 한 보조 서버에 추가 인수 toocreate 보조 데이터베이스를 사용 하 고 데이터 복제 시작</span><span class="sxs-lookup"><span data-stu-id="139b3-277">Use ADD SECONDARY ON SERVER argument toocreate a secondary database for an existing database and starts data replication</span></span> |
| [<span data-ttu-id="139b3-278">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="139b3-278">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="139b3-279">장애 조치 나 FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch 보조 데이터베이스 toobe 기본 tooinitiate 장애 조치를 사용 하 여</span><span class="sxs-lookup"><span data-stu-id="139b3-279">Use FAILOVER or FORCE_FAILOVER_ALLOW_DATA_LOSS tooswitch a secondary database toobe primary tooinitiate failover</span></span> |
| [<span data-ttu-id="139b3-280">ALTER DATABASE (Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="139b3-280">ALTER DATABASE (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt574871.aspx) |<span data-ttu-id="139b3-281">보조 ON 서버 제거 tooterminate SQL 데이터베이스와 보조 데이터베이스를 지정된 하는 hello 간의 데이터 복제를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-281">Use REMOVE SECONDARY ON SERVER tooterminate a data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="139b3-282">sys.geo_replication_links(Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="139b3-282">sys.geo_replication_links (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575501.aspx) |<span data-ttu-id="139b3-283">Hello Azure SQL 데이터베이스 논리 서버에 각 데이터베이스에 대 한 모든 기존 복제 링크에 대 한 정보를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-283">Returns information about all existing replication links for each database on hello Azure SQL Database logical server.</span></span> |
| [<span data-ttu-id="139b3-284">sys.dm_geo_replication_link_status(Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="139b3-284">sys.dm_geo_replication_link_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/mt575504.aspx) |<span data-ttu-id="139b3-285">가져옵니다 마지막 복제 시간, 마지막 복제 지연 시간 및 지정된 된 SQL 데이터베이스에 대 한 hello 복제 링크에 대 한 기타 정보 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-285">Gets hello last replication time, last replication lag, and other information about hello replication link for a given SQL database.</span></span> |
| [<span data-ttu-id="139b3-286">sys.dm_operation_status(Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="139b3-286">sys.dm_operation_status (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn270022.aspx) |<span data-ttu-id="139b3-287">Hello 복제 링크의 hello 상태를 비롯 한 모든 데이터베이스 작업에 대 한 hello 상태가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-287">Shows hello status for all database operations including hello status of hello replication links.</span></span> |
| [<span data-ttu-id="139b3-288">sp_wait_for_database_copy_sync(Azure SQL Database)</span><span class="sxs-lookup"><span data-stu-id="139b3-288">sp_wait_for_database_copy_sync (Azure SQL Database)</span></span>](https://msdn.microsoft.com/library/dn467644.aspx) |<span data-ttu-id="139b3-289">커밋된 모든 트랜잭션이 복제 되 고 hello 활성 보조 데이터베이스에서 승인할 때까지 응용 프로그램 toowait hello 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-289">causes hello application toowait until all committed transactions are replicated and acknowledged by hello active secondary database.</span></span> |
|  | |

## <a name="manage-sql-database-failover-using-using-powershell"></a><span data-ttu-id="139b3-290">SQL 데이터베이스 장애 조치를 사용 하 여 PowerShell을 사용 하 여 관리</span><span class="sxs-lookup"><span data-stu-id="139b3-290">Manage SQL database failover using using PowerShell</span></span>

| <span data-ttu-id="139b3-291">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="139b3-291">Cmdlet</span></span> | <span data-ttu-id="139b3-292">설명</span><span class="sxs-lookup"><span data-stu-id="139b3-292">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="139b3-293">Get-AzureRmSqlDatabase</span><span class="sxs-lookup"><span data-stu-id="139b3-293">Get-AzureRmSqlDatabase</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabase) |<span data-ttu-id="139b3-294">하나 이상의 데이터베이스를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-294">Gets one or more databases.</span></span> |
| [<span data-ttu-id="139b3-295">New-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="139b3-295">New-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/new-azurermsqldatabasesecondary) |<span data-ttu-id="139b3-296">기존 데이터베이스에 대한 보조 데이터베이스를 만들고 데이터 복제를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-296">Creates a secondary database for an existing database and starts data replication.</span></span> |
| [<span data-ttu-id="139b3-297">Set-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="139b3-297">Set-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasesecondary) |<span data-ttu-id="139b3-298">보조 데이터베이스 toobe 기본 tooinitiate 장애 조치를 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-298">Switches a secondary database toobe primary tooinitiate failover.</span></span> |
| [<span data-ttu-id="139b3-299">Remove-AzureRmSqlDatabaseSecondary</span><span class="sxs-lookup"><span data-stu-id="139b3-299">Remove-AzureRmSqlDatabaseSecondary</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasesecondary) |<span data-ttu-id="139b3-300">SQL 데이터베이스와 보조 데이터베이스를 지정된 하는 hello 간의 데이터 복제를 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-300">Terminates data replication between a SQL Database and hello specified secondary database.</span></span> |
| [<span data-ttu-id="139b3-301">Get-AzureRmSqlDatabaseReplicationLink</span><span class="sxs-lookup"><span data-stu-id="139b3-301">Get-AzureRmSqlDatabaseReplicationLink</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasereplicationlink) |<span data-ttu-id="139b3-302">Azure SQL 데이터베이스와 리소스 그룹 또는 SQL Server 간의 hello 지역 간 복제 링크를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-302">Gets hello geo-replication links between an Azure SQL Database and a resource group or SQL Server.</span></span> |
| [<span data-ttu-id="139b3-303">New-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="139b3-303">New-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="139b3-304">장애 조치 그룹을 만들고 주 및 보조 서버 모두에 등록합니다</span><span class="sxs-lookup"><span data-stu-id="139b3-304">This command creates a failover group and registers it on both primary and secondary servers</span></span>|
| [<span data-ttu-id="139b3-305">Remove-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="139b3-305">Remove-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/remove-azurermsqldatabasefailovergroup) | <span data-ttu-id="139b3-306">Hello 서버에서 그룹을 장애 조치 hello를 제거 하 고 모든 보조 데이터베이스가 포함 된 hello 그룹 삭제</span><span class="sxs-lookup"><span data-stu-id="139b3-306">Removes hello failover group from hello server and deletes all secondary databases included hello group</span></span> |
| [<span data-ttu-id="139b3-307">Get-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="139b3-307">Get-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/get-azurermsqldatabasefailovergroup) | <span data-ttu-id="139b3-308">검색 hello 장애 조치 그룹 구성</span><span class="sxs-lookup"><span data-stu-id="139b3-308">Retrieves hello failover group configuration</span></span> |
| [<span data-ttu-id="139b3-309">Set-AzureRmSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="139b3-309">Set-AzureRmSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/set-azurermsqldatabasefailovergroup) |   <span data-ttu-id="139b3-310">Hello 그룹 장애 조치의 hello 구성을 수정합니다</span><span class="sxs-lookup"><span data-stu-id="139b3-310">Modifies hello configuration of hello failover group</span></span> |
| [<span data-ttu-id="139b3-311">Switch-AzureRMSqlDatabaseFailoverGroup</span><span class="sxs-lookup"><span data-stu-id="139b3-311">Switch-AzureRMSqlDatabaseFailoverGroup</span></span>](/powershell/module/azurerm.sql/switch-azurermsqldatabasefailovergroup) | <span data-ttu-id="139b3-312">트리거 hello 장애 조치 그룹 toohello 보조 서버로 장애 조치</span><span class="sxs-lookup"><span data-stu-id="139b3-312">Triggers failover of hello failover group toohello secondary server</span></span> |
|  | |

> [!IMPORTANT]
> <span data-ttu-id="139b3-313">샘플 스크립트에 대해서는 [활성 지역 복제를 사용하여 단일 데이터베이스 구성 및 장애 조치(failover)](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [활성 지역 복제를 사용하여 풀된 데이터베이스 구성 및 장애 조치(failover)](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md) 및 [단일 데이터베이스에 대한 장애 조치(failover) 그룹 구성 및 장애 조치(failover)(미리 보기)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="139b3-313">For sample scripts, see [Configure and failover a single database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-database-powershell.md), [Configure and failover a pooled database using active geo-replication](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md), and  [Configure and failover a failover group for a single database (preview)](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md.</span></span>
>

## <a name="manage-sql-database-failover-using-hello-rest-api"></a><span data-ttu-id="139b3-314">SQL 데이터베이스 장애 조치 hello REST API를 사용 하 여 관리</span><span class="sxs-lookup"><span data-stu-id="139b3-314">Manage SQL database failover using hello REST API</span></span>
| <span data-ttu-id="139b3-315">API</span><span class="sxs-lookup"><span data-stu-id="139b3-315">API</span></span> | <span data-ttu-id="139b3-316">설명</span><span class="sxs-lookup"><span data-stu-id="139b3-316">Description</span></span> |
| --- | --- |
| [<span data-ttu-id="139b3-317">데이터베이스 생성 또는 업데이트(createMode=Restore)</span><span class="sxs-lookup"><span data-stu-id="139b3-317">Create or Update Database (createMode=Restore)</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="139b3-318">주 보조 데이터베이스 또는 보조 데이터베이스를 만들거나, 업데이트하거나, 복원합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-318">Creates, updates, or restores a primary or a secondary database.</span></span> |
| [<span data-ttu-id="139b3-319">데이터베이스 만들기 또는 업데이트 상태 가져오기</span><span class="sxs-lookup"><span data-stu-id="139b3-319">Get Create or Update Database Status</span></span>](/rest/api/sql/Databases/CreateOrUpdate) |<span data-ttu-id="139b3-320">만들기 작업 하는 동안 hello 상태를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-320">Returns hello status during a create operation.</span></span> |
| [<span data-ttu-id="139b3-321">보조 데이터베이스를 주 데이터베이스로 설정(계획된 장애 조치(failover))</span><span class="sxs-lookup"><span data-stu-id="139b3-321">Set Secondary Database as Primary (Planned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinkss#ReplicationLinks_Failover) |<span data-ttu-id="139b3-322">Hello 현재 주 복제본 데이터베이스에서 장애 조치 하 여 기본 있는 복제본 데이터베이스를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-322">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> |
| [<span data-ttu-id="139b3-323">보조 데이터베이스를 주 데이터베이스로 설정(계획되지 않은 장애 조치(failover))</span><span class="sxs-lookup"><span data-stu-id="139b3-323">Set Secondary Database as Primary (Unplanned Failover)</span></span>](https://docs.microsoft.com/rest/api/sql/replicationlinks#ReplicationLinks_FailoverAllowDataLoss) |<span data-ttu-id="139b3-324">Hello 현재 주 복제본 데이터베이스에서 장애 조치 하 여 기본 있는 복제본 데이터베이스를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-324">Sets which replica database is primary by failing over from hello current primary replica database.</span></span> <span data-ttu-id="139b3-325">이 작업으로 인해 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-325">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="139b3-326">복제 링크 가져오기</span><span class="sxs-lookup"><span data-stu-id="139b3-326">Get Replication Link</span></span>](/rest/api/sql/replicationlinks/get) |<span data-ttu-id="139b3-327">지역에서 복제 파트너 관계의 지정된 SQL 데이터베이스에 대한 특정 복제 링크를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-327">Gets a specific replication link for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="139b3-328">Hello sys.geo_replication_links 카탈로그 뷰에 표시 hello 정보를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-328">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="139b3-329">복제 링크 - 데이터베이스 기준 목록</span><span class="sxs-lookup"><span data-stu-id="139b3-329">Replication Links - List By Database</span></span>](/rest/api/sql/replicationlinks/listbydatabase) | <span data-ttu-id="139b3-330">지역에서 복제 파트너 관계의 지정된 SQL 데이터베이스에 대한 모든 복제 링크를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-330">Gets all replication links for a given SQL database in a geo-replication partnership.</span></span> <span data-ttu-id="139b3-331">Hello sys.geo_replication_links 카탈로그 뷰에 표시 hello 정보를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-331">It retrieves hello information visible in hello sys.geo_replication_links catalog view.</span></span> |
| [<span data-ttu-id="139b3-332">복제 링크 삭제</span><span class="sxs-lookup"><span data-stu-id="139b3-332">Delete Replication Link</span></span>](/rest/api/sql/databases/delete) | <span data-ttu-id="139b3-333">데이터베이스 복제 링크를 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-333">Deletes a database replication link.</span></span> <span data-ttu-id="139b3-334">장애 조치(failover) 중에 수행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-334">Cannot be done during failover.</span></span> |
| <span data-ttu-id="139b3-335">[장애 조치(failover) 그룹 만들기 또는 업데이트]/rest/api/sql/failovergroups/createorupdate)</span><span class="sxs-lookup"><span data-stu-id="139b3-335">[Create or Update Failover Group]/rest/api/sql/failovergroups/createorupdate)</span></span> | <span data-ttu-id="139b3-336">장애 조치(failover) 그룹을 만들거나 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-336">Creates or updates a failover group</span></span> |
| [<span data-ttu-id="139b3-337">장애 조치(failover) 그룹 삭제</span><span class="sxs-lookup"><span data-stu-id="139b3-337">Delete Failover Group</span></span>](/rest/api/sql/failovergroups/delete) | <span data-ttu-id="139b3-338">Hello 서버에서 그룹을 장애 조치 hello를 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-338">Removes hello failover group from hello server</span></span> |
| [<span data-ttu-id="139b3-339">장애 조치(failover)(계획됨)</span><span class="sxs-lookup"><span data-stu-id="139b3-339">Failover (Planned)</span></span>](/rest/api/sql/failovergroups/failover) | <span data-ttu-id="139b3-340">현재 주 서버 toothis 서버 hello에서에서 장애 조치 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-340">Fails over from hello current primary server toothis server.</span></span> |
| [<span data-ttu-id="139b3-341">장애 조치(failover)로 인한 데이터 손실 허용</span><span class="sxs-lookup"><span data-stu-id="139b3-341">Force Failover Allow Data Loss</span></span>](/rest/api/sql/failovergroups/forcefailoverallowdataloss) |<span data-ttu-id="139b3-342">현재 주 서버 toothis 서버 hello 통해 ails 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-342">ails over from hello current primary server toothis server.</span></span> <span data-ttu-id="139b3-343">이 작업으로 인해 데이터가 손실될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-343">This operation might result in data loss.</span></span> |
| [<span data-ttu-id="139b3-344">장애 조치 그룹 가져오기</span><span class="sxs-lookup"><span data-stu-id="139b3-344">Get Failover Group</span></span>](/rest/api/sql/failovergroups/get) | <span data-ttu-id="139b3-345">장애 조치(failover) 그룹을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-345">Gets a failover group.</span></span> |
| [<span data-ttu-id="139b3-346">서버별 장애 조치(failover) 그룹 나열</span><span class="sxs-lookup"><span data-stu-id="139b3-346">List Failover Groups By Server</span></span>](/rest/api/sql/failovergroups/listbyserver) | <span data-ttu-id="139b3-347">서버에서 hello 장애 조치 그룹을 나열 합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-347">Lists hello failover groups in a server.</span></span> |
| [<span data-ttu-id="139b3-348">장애 조치(failover) 그룹 업데이트</span><span class="sxs-lookup"><span data-stu-id="139b3-348">Update Failover Group</span></span>](/rest/api/sql/failovergroups/update) | <span data-ttu-id="139b3-349">장애 조치(failover) 그룹을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-349">Updates a failover group.</span></span> |
|  | |

## <a name="next-steps"></a><span data-ttu-id="139b3-350">다음 단계</span><span class="sxs-lookup"><span data-stu-id="139b3-350">Next steps</span></span>
* <span data-ttu-id="139b3-351">샘플 스크립트에 대해서는 다음을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="139b3-351">For sample scripts, see:</span></span>
   - [<span data-ttu-id="139b3-352">활성 지역 복제를 사용하여 단일 데이터베이스 구성 및 장애 조치(failover)</span><span class="sxs-lookup"><span data-stu-id="139b3-352">Configure and failover a single database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-database-powershell.md)
   - [<span data-ttu-id="139b3-353">활성 지역 복제를 사용하여 풀된 데이터베이스 구성 및 장애 조치(failover)</span><span class="sxs-lookup"><span data-stu-id="139b3-353">Configure and failover a pooled database using active geo-replication</span></span>](scripts/sql-database-setup-geodr-and-failover-pool-powershell.md)
   - [<span data-ttu-id="139b3-354">단일 데이터베이스에 대한 장애 조치(failover) 그룹 구성 및 장애 조치(failover)(미리 보기)</span><span class="sxs-lookup"><span data-stu-id="139b3-354">Configure and failover a failover group for a single database (preview)</span></span>](scripts/sql-database-setup-geodr-failover-database-failover-group-powershell.md)
* <span data-ttu-id="139b3-355">비즈니스 연속성의 개요 및 시나리오를 보려면 [비즈니스 연속성 개요](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="139b3-355">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="139b3-356">Azure SQL 데이터베이스 자동화 된 백업에 대 한 toolearn 참조 [SQL 데이터베이스 자동화 된 백업을](sql-database-automated-backups.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-356">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="139b3-357">복구를 위한 자동화 된 백업을 사용 하는 방법에 대 한 toolearn 참조 [hello 서비스 개시 백업에서 데이터베이스를 복원](sql-database-recovery-using-backups.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-357">toolearn about using automated backups for recovery, see [Restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="139b3-358">새 주 서버 및 데이터베이스에 대 한 인증 요구 사항에 대 한 toolearn 참조 [재해 복구 후 SQL 데이터베이스 보안](sql-database-geo-replication-security-config.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="139b3-358">toolearn about authentication requirements for a new primary server and database, see [SQL Database security after disaster recovery](sql-database-geo-replication-security-config.md).</span></span>

