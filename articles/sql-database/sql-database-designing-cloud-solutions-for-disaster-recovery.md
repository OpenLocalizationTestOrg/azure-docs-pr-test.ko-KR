---
title: "Azure SQL 데이터베이스를 사용 하 여 aaaDesign 항상 사용 가능한 서비스 | Microsoft Docs"
description: "Azure SQL Database를 사용하여 항상 사용 가능한 서비스를 위한 응용 프로그램 디자인에 대해 알아봅니다."
keywords: "클라우드 재해 복구, 재해 복구 솔루션, 앱 데이터 백업, 지역에서 복제, 무중단 업무 방식 계획"
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: e8a346ac-dd08-41e7-9685-46cebca04582
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: data-management
ms.date: 04/21/2017
ms.author: sashan
ms.openlocfilehash: 815f754ba7014cd8a1108a2d84c2a8f71d7030a5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="designing-highly-available-services-using-azure-sql-database"></a><span data-ttu-id="b7454-104">Azure SQL Database를 사용하여 항상 사용 가능한 서비스 디자인</span><span class="sxs-lookup"><span data-stu-id="b7454-104">Designing highly available services using Azure SQL Database</span></span>

<span data-ttu-id="b7454-105">사용을 빌드하고 Azure SQL 데이터베이스에서 항상 사용 가능한 서비스를 배포 하는 경우 [장애 조치 그룹 및 활성 지리적 복제](sql-database-geo-replication-overview.md) tooprovide 복원 력 tooregional 오류 및 치명적 작동 중단 및 사용에 대 한 빠른 복구 toohello 보조 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-105">When building and deploying highly available services on Azure SQL Database, you use [failover groups and active geo-replication](sql-database-geo-replication-overview.md) tooprovide resilience tooregional failures and catastrophic outages and enable fast recovery toohello secondary databases.</span></span> <span data-ttu-id="b7454-106">이 문서 일반적인 응용 프로그램 패턴을 중점적으로 다루며 hello 이점과 hello 응용 프로그램 배포 요구 사항 대상으로 hello 서비스 수준 계약에 따라 각 옵션의 장단점을 설명 트래픽 대기 시간 및 비용입니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-106">This article focuses on common application patterns and discusses hello benefits and trade-offs of each option depending on hello application deployment requirements, hello service level agreement you are targeting, traffic latency, and costs.</span></span> <span data-ttu-id="b7454-107">탄력적 풀의 활성 지역 복제에 대한 자세한 내용은 [탄력적 풀 재해 복구 전략](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b7454-107">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>

## <a name="design-pattern-1-active-passive-deployment-for-cloud-disaster-recovery-with-a-co-located-database"></a><span data-ttu-id="b7454-108">디자인 패턴 1: 함께 배치된 데이터베이스와 클라우드 재해 복구에 대한 활성-수동 배포</span><span class="sxs-lookup"><span data-stu-id="b7454-108">Design pattern 1: Active-passive deployment for cloud disaster recovery with a co-located database</span></span>
<span data-ttu-id="b7454-109">이 옵션은 다음 특징 hello로 응용 프로그램에 가장 적합 한:</span><span class="sxs-lookup"><span data-stu-id="b7454-109">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="b7454-110">단일 Azure 지역의 활성 인스턴스</span><span class="sxs-lookup"><span data-stu-id="b7454-110">Active instance in a single Azure region</span></span>
* <span data-ttu-id="b7454-111">읽기 / 쓰기 (RW)에 대 한 강력한 종속성 toodata 액세스</span><span class="sxs-lookup"><span data-stu-id="b7454-111">Strong dependency on read-write (RW) access toodata</span></span>
* <span data-ttu-id="b7454-112">Hello 웹 응용 프로그램과 hello 데이터베이스 간에 지역 간 연결 toolatency 캡슐화 된 트래픽과 비용 인해 허용 되지 않는</span><span class="sxs-lookup"><span data-stu-id="b7454-112">Cross-region connectivity between hello web application and hello database is not acceptable due toolatency and traffic cost</span></span>    

<span data-ttu-id="b7454-113">이 경우 hello 응용 프로그램 배포 토폴로지는 모든 응용 프로그램 구성 요소는 영향을 않고 하나의 단위로 toofailover 국가별 재해를 처리 하기 위한 최적화 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-113">In this case, hello application deployment topology is optimized for handling regional disasters when all application components are impacted and need toofailover as a unit.</span></span> <span data-ttu-id="b7454-114">지리적 중복성을 위해 hello 응용 프로그램 논리와 hello 데이터베이스 복제 tooanother 지역 있더라도 hello 정상 조건 하에서 hello 응용 프로그램 작업에 사용 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-114">For geographic redundancy, hello application logic and hello database are replicated tooanother region but they are not used for hello application workload under hello normal conditions.</span></span> <span data-ttu-id="b7454-115">hello 보조 지역에 hello 응용 프로그램에 구성 된 toouse SQL 연결 문자열 toohello 보조 데이터베이스 여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-115">hello application in hello secondary region should be configured toouse a SQL connection string toohello secondary database.</span></span> <span data-ttu-id="b7454-116">트래픽 관리자 설정 toouse [장애 조치 라우팅 방법을](../traffic-manager/traffic-manager-configure-failover-routing-method.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-116">Traffic manager is set up toouse [failover routing method](../traffic-manager/traffic-manager-configure-failover-routing-method.md).</span></span>  

> [!NOTE]
> <span data-ttu-id="b7454-117">[Azure Traffic Manager](../traffic-manager/traffic-manager-overview.md)는 이 문서 전체에서 설명을 위한 용도로만 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-117">[Azure traffic manager](../traffic-manager/traffic-manager-overview.md) is used throughout this article for illustration purposes only.</span></span> <span data-ttu-id="b7454-118">장애 조치(failover) 라우팅 메서드를 지원하는 모든 부하 분산 솔루션을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-118">You can use any load-balancing solution that supports failover routing method.</span></span>    
>

<span data-ttu-id="b7454-119">다음 다이어그램 hello 중단 하기 전에이 구성을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-119">hello following diagram shows this configuration before an outage.</span></span>

![SQL Database 지역에서 복제 구성](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-1.png)

<span data-ttu-id="b7454-122">Hello 기본 지역에서 중단, 후 hello SQL 데이터베이스 서비스는 hello 해당 주 데이터베이스에 액세스할 수 없고 hello 자동 장애 조치 정책 hello 매개 변수를 기준으로 장애 조치 toohello 보조 데이터베이스를 트리거할 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-122">After an outage in hello primary region, hello SQL Database service detects that hello primary database is not accessible and trigger a failover toohello secondary database based on hello parameters of hello automatic failover policy.</span></span> <span data-ttu-id="b7454-123">응용 프로그램 SLA에 따라 tooconfigure hello 중단의 hello 검색과 자체 hello 장애 조치 사이의 유예 기간을 결정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-123">Depending on your application SLA, you can decide tooconfigure a grace period between hello detection of hello outage and hello failover itself.</span></span> <span data-ttu-id="b7454-124">유예 기간을 구성 hello 위험이 감소의 데이터 손실 toohello 하는 경우 hello 중지가 치명적인 hello 영역의 가용성을 신속 하 게 복원할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-124">Configuring a grace period reduces hello risk of data loss toohello cases where hello outage is catastrophic and availability in hello region cannot be quickly restored.</span></span> <span data-ttu-id="b7454-125">Hello 장애 조치 그룹 트리거 hello hello 데이터베이스의 장애 조치 전에 hello 끝점 장애 조치가 hello 트래픽 관리자가 시작 되 면 hello 웹 응용 프로그램은 수 tooreconnect toohello 데이터베이스가 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-125">If hello endpoint failover is initiated by hello traffic manager before hello failover group triggers hello failover of hello database, hello web application is not able tooreconnect toohello database.</span></span> <span data-ttu-id="b7454-126">hello 응용 프로그램의 시도 tooreconnect는 hello 데이터베이스 장애 조치가 완료 되는 즉시 자동으로 성공 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-126">hello application’s attempt tooreconnect automatically succeeds as soon as hello database failover completes.</span></span> 

> [!NOTE]
> <span data-ttu-id="b7454-127">tooachieve hello 응용 프로그램 및 hello 데이터베이스의 장애 조치를 완벽 하 게 조정, 직접 모니터링 방법을 시도해 볼 하 고 hello 웹 응용 프로그램 끝점 및 hello 데이터베이스의 수동 장애 조치를 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-127">tooachieve fully coordinated failover of hello application and hello databases, you should devise your own monitoring method and use manual failover of hello web application endpoints and hello databases.</span></span>
>

<span data-ttu-id="b7454-128">모두 hello 응용 프로그램의 끝점 및 hello 데이터베이스의 hello 장애 조치 완료 되 면 hello 응용 프로그램을 다시 시작 시작 hello 영역 B에서에서 hello 사용자 요청을 처리 및 hello 주 데이터베이스에서 이제 이므로 hello 데이터베이스와 함께 유지 됩니다. 2. 지역 Hello 다음 다이어그램은이 시나리오를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-128">After hello failover of both hello application’s endpoints and hello database completes, hello application will re-start processing hello user requests in hello region B and will remain co-located with hello database because hello primary database is now in region B. This scenario is illustrated in hello following diagram.</span></span> <span data-ttu-id="b7454-129">모든 다이어그램에서 실선은 활성 연결을 나타내고, 점선은 일시 중단된 연결을 나타내며, 중지 기호는 작업 트리거를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-129">In all diagrams, solid lines indicate active connections, dotted lines indicate suspended connections, and stop signs indicate action triggers.</span></span>

![지리적 복제: 장애 조치 toosecondary 데이터베이스입니다.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-2.png)

<span data-ttu-id="b7454-132">Hello 보조 지역에서 가동 중단 될 경우 주 hello와 hello 보조 데이터베이스 간의 복제 링크 hello 일시 중단 하지만 hello 주 데이터베이스에 영향을 받지 때문에 hello 장애 조치가 트리거됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-132">If an outage happens in hello secondary region, hello replication link between hello primary and hello secondary database is suspended but hello failover is not triggered because hello primary database is not impacted.</span></span> <span data-ttu-id="b7454-133">hello 응용 프로그램의 가용성이 경우 변경 되지 않습니다. 하지만 hello 응용 프로그램 작동 노출 된 하며 따라서 경우에서 높은 위험에 두 영역 실패 연속적으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-133">hello application's availability is not changed in this case, but hello application operates exposed and therefore at higher risk in case both regions fail in succession.</span></span>

> [!NOTE]
> <span data-ttu-id="b7454-134">재해 복구를 위해 응용 프로그램 배포 제한 tootwo 영역 hello 구성을 권장 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-134">For disaster recovery we recommend hello configuration with application deployment limited tootwo regions.</span></span> <span data-ttu-id="b7454-135">즉, 대부분의 hello Azure 지역 있는 두 개의 영역입니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-135">This is because most of hello Azure geographies have only two regions.</span></span> <span data-ttu-id="b7454-136">이 구성은 두 영역에서 동시에 발생하는 치명적인 오류로부터 응용 프로그램을 보호하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-136">This configuration will not protect your application from a simultaneous catastrophic failure of both regions.</span></span>  <span data-ttu-id="b7454-137">이러한 발생 가능성이 없는 실패 시 [지리적 복원 작업](sql-database-disaster-recovery.md#recover-using-geo-restore)을 사용하여 세 번째 지역에서 데이터베이스를 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-137">In an unlikely event of such a failure, you can recover your databases in a third region using [geo-restore operation](sql-database-disaster-recovery.md#recover-using-geo-restore).</span></span>
>

<span data-ttu-id="b7454-138">Hello 중단 완화 될 되 면 hello 보조 데이터베이스는 주 hello로 자동으로 동기화 다시 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-138">Once hello outage is mitigated, hello secondary database will automatically re-synchronize with hello primary.</span></span> <span data-ttu-id="b7454-139">동기화 하는 동안 기본 hello의 성능이 약간 영향을 받을 수 toobe 동기화 해야 하는 데이터 양을 hello에 따라 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-139">During synchronization, performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="b7454-140">hello 다음 다이어그램에서는 hello 보조 지역에서 가동 중단 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-140">hello following diagram illustrates an outage in hello secondary region.</span></span>

![주 데이터베이스와 동기화된 보조 데이터베이스](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern1-3.png)

<span data-ttu-id="b7454-143">hello 키 **장점** 이 디자인 패턴의 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-143">hello key **advantages** of this design pattern are:</span></span>

* <span data-ttu-id="b7454-144">hello 동일한 웹 응용 프로그램 배포 tooboth regions입니다 없이 지역별 구성과 추가 논리 tooreact toohello 장애 조치 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-144">hello same web application is deployed tooboth regions without any region-specific configuration and no additional logic tooreact toohello failover.</span></span> 
* <span data-ttu-id="b7454-145">hello 응용 프로그램의 성능을 hello 웹 응용 프로그램으로 장애 조치의 영향을 받지 않습니다 및 hello 데이터베이스는 항상 같은 위치에 배치 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-145">hello application's performance is not impacted by failover as hello web application and hello database are always co-located.</span></span>

<span data-ttu-id="b7454-146">주 hello **단점이** hello 중복 응용 프로그램은 hello 보조 지역에 대 한 인스턴스는 재해 복구에만 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-146">hello main **tradeoff** is that hello redundant application instance in hello secondary region is only used for disaster recovery.</span></span>

## <a name="design-pattern-2-active-active-deployment-for-application-load-balancing"></a><span data-ttu-id="b7454-147">디자인 패턴 2: 응용 프로그램 부하 분산에 대한 활성-활성 배포</span><span class="sxs-lookup"><span data-stu-id="b7454-147">Design pattern 2: Active-active deployment for application load balancing</span></span>
<span data-ttu-id="b7454-148">이 클라우드 재해 복구 옵션은 응용 프로그램에 가장 적합 한 특징에 따라 hello로:</span><span class="sxs-lookup"><span data-stu-id="b7454-148">This cloud disaster recovery option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="b7454-149">데이터베이스의 높은 비율과 toowrites를 읽습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-149">High ratio of database reads toowrites</span></span>
* <span data-ttu-id="b7454-150">데이터베이스 읽기 대기 시간 보다 중요 한 hello 최종 사용자 환경에 대 한 hello 쓰기 대기 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-150">Database read latency is more critical for hello end-user experience than hello write latency</span></span> 
* <span data-ttu-id="b7454-151">읽기 전용 논리가 다른 연결 문자열을 사용하여 읽기-쓰기 논리에서 분리될 수 있음</span><span class="sxs-lookup"><span data-stu-id="b7454-151">Read-only logic can be separated from read-write logic by using a different connection string</span></span>
* <span data-ttu-id="b7454-152">읽기 전용 논리가 hello 최신 업데이트와 완전히 동기화 되는 데이터에 종속 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-152">Read-only logic does not depend on data being fully synchronized with hello latest updates</span></span>  

<span data-ttu-id="b7454-153">응용 프로그램에 이러한 특징이 있으면 hello 최종 사용자 연결에 걸쳐 부하 분산 서로 다른 지역에 여러 개의 응용 프로그램 인스턴스가 상당히 개선 될 수 hello 전체적인 최종 사용자 경험 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-153">If your applications have these characteristics, load balancing hello end-user connections across multiple application instances in different regions can substantially improve hello overall end-user experience.</span></span> <span data-ttu-id="b7454-154">Hello DR 쌍으로 선택 해야 하는 hello 영역 중 두 및 hello 그룹 장애 조치 이러한 영역에 hello 데이터베이스를 포함 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-154">Two of hello regions should be selected as hello DR pair and hello failover group should include hello databases in these regions.</span></span> <span data-ttu-id="b7454-155">tooimplement 부하 분산 각 지역의 있어야 끝점과 hello 읽기 / 쓰기 (RW) 연결 된 논리 toohello 읽기 / 쓰기 수신기 hello 그룹 장애 조치의 hello 응용 프로그램의 활성 인스턴스가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-155">tooimplement load-balancing, each region should have an active instance of hello application with hello read-write (RW) logic connected toohello read-write listener endpoint of hello failover group.</span></span> <span data-ttu-id="b7454-156">해당 hello가 자동으로 시작 됩니다 hello 주 데이터베이스는 중단으로 영향을 보장 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-156">It will guarantee that hello failover will be automatically initiated if hello primary database is impacted by an outage.</span></span> <span data-ttu-id="b7454-157">해당 지역에서 toohello 데이터베이스 hello 읽기 전용 논리 (RO) hello 웹 응용 프로그램에 직접 연결 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-157">hello read-only logic (RO) in hello web application should connect directly toohello database in that region.</span></span> <span data-ttu-id="b7454-158">트래픽 관리자 toouse를 설정 해야 [성능 라우팅](../traffic-manager/traffic-manager-configure-performance-routing-method.md) 와 [끝점 모니터링](../traffic-manager/traffic-manager-monitoring.md) 각 응용 프로그램 인스턴스에 대해 사용 하도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-158">Traffic manager should be set up toouse [performance routing](../traffic-manager/traffic-manager-configure-performance-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for each application instance.</span></span>

<span data-ttu-id="b7454-159">패턴 #1에서와 같이 유사한 모니터링 응용 프로그램 배포를 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-159">As in pattern #1, you should consider deploying a similar monitoring application.</span></span> <span data-ttu-id="b7454-160">하지만 #1 패턴과 달리 응용 프로그램을 모니터링 하는 hello 됩니다를 hello 끝점 장애 조치를 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-160">But unlike pattern #1, hello monitoring application will not be responsible for triggering hello end-point failover.</span></span>

> [!NOTE]
> <span data-ttu-id="b7454-161">이 패턴에서 둘 이상의 보조 데이터베이스를 사용 하는 동안 hello 영역 B의 보조만 장애 조치에 대해 사용 되며 hello 그룹 장애 조치의 일부가 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-161">While this pattern uses more than one secondary database, only hello secondary in Region B  would be used for failover and should be part of hello failover group.</span></span>
>

<span data-ttu-id="b7454-162">트래픽 관리자 성능 라우팅 toodirect hello 사용자 연결 toohello 응용 프로그램 인스턴스 가장 가까운 toohello 사용자의 지리적 위치에 대해 구성 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-162">Traffic manager should be configured for performance routing toodirect hello user connections toohello application instance closest toohello user's geographic location.</span></span> <span data-ttu-id="b7454-163">다음 다이어그램 hello 중단 하기 전에이 구성을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-163">hello following diagram illustrates this configuration before an outage.</span></span>

![중단 없는: 성능 라우팅 toonearest 응용 프로그램입니다.](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-1.png)

<span data-ttu-id="b7454-166">그룹을 장애 조치 hello hello B. 지역에 보조 영역 A toohello에서 주 데이터베이스의 장애 조치를 자동으로 시작 데이터베이스 정전 hello 영역 A에서에서 검색 된 경우 읽기 / 쓰기 연결 hello 웹 응용 프로그램에 영향을 받지 하므로 hello 읽기 / 쓰기 수신기 끝점 tooregion B도 자동으로 업데이트 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-166">If a database outage is detected in hello region A, hello failover group will automatically initiate failover of hello primary database in region A toohello secondary in region B. It will also automatically update hello read-write listener endpoint tooregion B so read-write connections in hello web application will not be impacted.</span></span> <span data-ttu-id="b7454-167">hello 트래픽 관리자는 hello 오프 라인 끝점 hello 라우팅 테이블에서 제외 됩니다 있지만 라우팅 hello 최종 사용자 트래픽 toohello 나머지 온라인 인스턴스 계속 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-167">hello traffic manager will exclude hello offline end-point from hello routing table but will continue routing hello end-user traffic toohello remaining online instances.</span></span> <span data-ttu-id="b7454-168">hello 읽기 전용 SQL 연결 문자열에는 영향이 없습니다 hello에 항상 toohello 데이터베이스를 가리키는지으로 같은 지역입니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-168">hello read-only SQL connection strings will not be impacted as they always point toohello database in hello same region.</span></span> 

<span data-ttu-id="b7454-169">다음 다이어그램 hello hello hello 장애 조치 후 새 구성을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-169">hello following diagram illustrates hello new configuration after hello failover.</span></span>

![장애 조치 후 구성](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-2.png)

<span data-ttu-id="b7454-172">Hello 보조 영역 중 하나에 중단 시간 발생 한 경우 hello 트래픽 관리자는 자동으로 제거 hello 오프 라인 끝점 해당 지역에서 hello 라우팅 테이블에서.</span><span class="sxs-lookup"><span data-stu-id="b7454-172">In case of an outage in one of hello secondary regions, hello traffic manager will automatically remove hello offline end-point in that region from hello routing table.</span></span> <span data-ttu-id="b7454-173">hello 복제 채널 toohello 보조 데이터베이스가 해당 지역에서 일시 중단 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-173">hello replication channel toohello secondary database in that region will be suspended.</span></span> <span data-ttu-id="b7454-174">Hello 나머지 영역이이 시나리오에서 추가 사용자 트래픽을 get, 때문에 hello 중단 하는 동안 hello 응용 프로그램의 성능 영향을 미칩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-174">Because hello remaining regions get additional user traffic in this scenario, hello application's performance will be impacted during hello outage.</span></span> <span data-ttu-id="b7454-175">일단 hello 중단 완화 될 hello hello 영향을 받는 지역에 보조 데이터베이스는 즉시와 동기화 될 기본 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-175">Once hello outage is mitigated, hello secondary database in hello impacted region will be immediately synchronized with hello primary.</span></span> <span data-ttu-id="b7454-176">Hello 하는 동안 기본 hello의 동기화 성능이 약간 영향을 받을 수 toobe 동기화 해야 하는 데이터 양을 hello에 따라 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-176">During hello synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span> <span data-ttu-id="b7454-177">hello 다음 다이어그램 2. 지역에서 가동 중단을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-177">hello following diagram illustrates an outage in region B.</span></span>

![보조 지역에서 중단](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern2-3.png)

<span data-ttu-id="b7454-180">hello 키 **장점은** 이 디자인의 패턴은 여러 보조 tooachieve hello 최적의 사용자 성능 간에 hello 응용 프로그램 작업 부하를 확장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-180">hello key **advantage** of this design pattern is that you can scale hello application workload across multiple secondaries tooachieve hello optimal end-user performance.</span></span> <span data-ttu-id="b7454-181">hello **장단점** 이 옵션은:</span><span class="sxs-lookup"><span data-stu-id="b7454-181">hello **tradeoffs** of this option are:</span></span>

* <span data-ttu-id="b7454-182">Hello 응용 프로그램 인스턴스 및 데이터베이스 간에 읽기 / 쓰기 연결에는 다양 한 비용 및 대기 시간</span><span class="sxs-lookup"><span data-stu-id="b7454-182">Read-write connections between hello application instances and database have varying latency and cost</span></span>
* <span data-ttu-id="b7454-183">Hello 중단 하는 동안 응용 프로그램 성능이 저하 되어</span><span class="sxs-lookup"><span data-stu-id="b7454-183">Application performance is impacted during hello outage</span></span>

> [!NOTE]
> <span data-ttu-id="b7454-184">유사한 방법을 사용할 수 toooffload 특수화 작업, 비즈니스 인텔리전스 도구 또는 백업을 보고 등의 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-184">A similar approach can be used toooffload specialized workloads such as reporting jobs, business intelligence tools, or backups.</span></span> <span data-ttu-id="b7454-185">이러한 작업 상당히 많은 데이터베이스 리소스를 소비 하는 일반적으로 따라서 것이 좋습니다 지정 하는 hello 중 보조 데이터베이스에 대 한 hello 성능 수준 일치 toohello 예상 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-185">Typically, these workloads consume significant database resources therefore it is recommended that you designate one of hello secondary databases for them with hello performance level matched toohello anticipated workload.</span></span>
>

## <a name="design-pattern-3-active-passive-deployment-for-data-preservation"></a><span data-ttu-id="b7454-186">디자인 패턴 3: 데이터 보존에 대한 활성-수동 배포</span><span class="sxs-lookup"><span data-stu-id="b7454-186">Design pattern 3: Active-passive deployment for data preservation</span></span>
<span data-ttu-id="b7454-187">이 옵션은 다음 특징 hello로 응용 프로그램에 가장 적합 한:</span><span class="sxs-lookup"><span data-stu-id="b7454-187">This option is best suited for applications with hello following characteristics:</span></span>

* <span data-ttu-id="b7454-188">어떤 경우든 데이터 손실은 비즈니스에 큰 위험이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-188">Any data loss is high business risk.</span></span> <span data-ttu-id="b7454-189">hello 중지가 치명적인 하는 경우에 hello 데이터베이스 장애 조치 최후의 수단으로 사용 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-189">hello database failover can only be used as a last resort if hello outage is catastrophic.</span></span>
* <span data-ttu-id="b7454-190">hello 응용 프로그램 작업의 읽기 전용 및 읽기 / 쓰기 모드를 지원 하며 일정 기간에 대 한 "읽기 전용 모드"에서 작동할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-190">hello application supports read-only and read-write modes of operations and can operate in "read-only mode" for a period of time.</span></span>

<span data-ttu-id="b7454-191">이 패턴에서는 hello 응용 프로그램 hello 읽기 / 쓰기 연결 시작 시간 초과 오류가 발생 했습니다. tooread 전용 모드를 전환 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-191">In this pattern, hello application switches tooread-only mode when hello read-write connections start getting time-out errors.</span></span> <span data-ttu-id="b7454-192">hello 웹 응용 프로그램은 배포 된 tooboth 영역 및 연결 toohello 읽기 / 쓰기 수신기 끝점 및 다른 연결 toohello 읽기 전용 수신기 끝점을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-192">hello Web Application is deployed tooboth regions and include a connection toohello read-write listener endpoint and different connection toohello read-only listener endpoint.</span></span> <span data-ttu-id="b7454-193">hello 트래픽 관리자 toouse를 설정 해야 [장애 조치 라우팅](../traffic-manager/traffic-manager-configure-failover-routing-method.md) 와 [끝점 모니터링](../traffic-manager/traffic-manager-monitoring.md) 각 지역에 hello 응용 프로그램 끝점에 대해 사용 하도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-193">hello Traffic manager should be set up toouse [failover routing](../traffic-manager/traffic-manager-configure-failover-routing-method.md) with [end-point monitoring](../traffic-manager/traffic-manager-monitoring.md) enabled for hello application endpoint in each region.</span></span>

<span data-ttu-id="b7454-194">다음 다이어그램 hello 중단 하기 전에이 구성을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-194">hello following diagram illustrates this configuration before an outage.</span></span>

![장애 조치 전 활성-수동 배포](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-1.png)

<span data-ttu-id="b7454-197">2. 지역에 사용자 트래픽을 toohello 응용 프로그램 인스턴스가 자동으로 전환 hello 트래픽 관리자에서 연결 오류 tooregion A를 발견 하면 이이 패턴을 사용 하 여 설정한 hello 유예 기간 데이터 손실 tooa 충분히 높은 값, 예: 24 시간 동안 중요 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-197">When hello traffic manager detects a connectivity failure tooregion A, it automatically switches user traffic toohello application instance in region B. With this pattern, it is important that you set hello grace period with data loss tooa sufficiently high value, e.g. 24 hours.</span></span> <span data-ttu-id="b7454-198">Hello 중단 기간 내에 완화 될 경우 데이터 손실이 방지 됩니다는 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-198">It will ensure that data loss is prevented if hello outage is mitigated within that time.</span></span> <span data-ttu-id="b7454-199">Hello hello 영역 B의에서 웹 응용 프로그램 활성화 되 면 hello 읽기 / 쓰기 작업 실패 하기 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-199">When hello Web application in hello region B is activated hello read-write operations will start failing.</span></span> <span data-ttu-id="b7454-200">이 시점에서 toohello 읽기-쓰기 모드로 전환 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-200">At that point, it should switch toohello read-only mode.</span></span> <span data-ttu-id="b7454-201">이 모드 hello 요청 자동 경로 toohello 보조 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-201">In this mode hello requests will be automatically routed toohello secondary database.</span></span> <span data-ttu-id="b7454-202">치명적인 오류 hello의 hello 대/소문자 hello 유예 기간 내 중단 문제가 완화 되지 않습니다 및 그룹을 장애 조치 hello hello 장애 조치를 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-202">In hello case of a catastrophic failure hello outage will not be mitigated within hello grace period and hello failover group will trigger hello failover.</span></span> <span data-ttu-id="b7454-203">해당 hello 후 읽기 / 쓰기 수신기를 사용할 수 있으며 hello 호출 tooit 실패 중지 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-203">After that hello read-write listener will become available and hello calls tooit will stop failing.</span></span> <span data-ttu-id="b7454-204">다음 다이어그램 hello에서이 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-204">This is illustrated by hello following diagram.</span></span>

![작동 중단: 읽기 전용 모드의 응용 프로그램](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-2.png)

<span data-ttu-id="b7454-207">Hello 유예 기간 내 hello 기본 지역의 hello 가동 중단은 완화 트래픽 관리자 연결의 hello 복원 hello 기본 지역에서 감지 하 고 사용자 트래픽이 백 toohello 응용 프로그램 인스턴스 1. 지역에서 전환 다시 시작 하 고 hello 주 데이터베이스를 사용 하 여 1. 지역에 읽기 / 쓰기 모드에서 작동 하는 해당 응용 프로그램 인스턴스</span><span class="sxs-lookup"><span data-stu-id="b7454-207">If hello outage in hello primary region is mitigated within hello grace period, traffic manager detects hello restoration of connectivity in hello primary region and switches user traffic back toohello application instance in region A. That application instance resumes and operates in read-write mode using hello primary database in region A.</span></span>

<span data-ttu-id="b7454-208">Hello 영역 B는 중단 시 hello 트래픽 관리자가 영역 B 및 hello 장애 조치 그룹 스위치 hello 읽기 전용 수신기 tooregion A. hello 응용 프로그램 끝점의 hello 오류를 검색 이 중단 hello 최종 사용자 환경에 영향을 주지 않습니다 하지만 hello 중단 하는 동안 hello 주 데이터베이스가 노출 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-208">In case of an outage in hello region B, hello traffic manager detects hello failure of hello application end-point in region B and hello failover group switches hello read-only listener tooregion A. This outage does not impact hello end-user experience but hello primary database will be exposed during hello outage.</span></span> <span data-ttu-id="b7454-209">다음 다이어그램 hello에서이 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-209">This is illustrated by hello following diagram.</span></span>

![중단: 보조 데이터베이스](./media/sql-database-designing-cloud-solutions-for-disaster-recovery/pattern3-3.png)

<span data-ttu-id="b7454-212">Hello 중단 완화 될 hello 보조 데이터베이스는 즉시 동기화 기본 hello로 고 hello 읽기 전용 수신기 바뀌면된 백 toohello B. 지역에 보조 데이터베이스는 동기화 하는 동안 hello 기본의 성능 약간 영향을 받을 수 toobe 동기화 해야 하는 데이터 양을 hello에 따라 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-212">Once hello outage is mitigated, hello secondary database is immediately synchronized with hello primary and hello read-only listener is switched back toohello secondary database in region B. During synchronization performance of hello primary could be slightly impacted depending on hello amount of data that needs toobe synchronized.</span></span>

<span data-ttu-id="b7454-213">이 디자인 패턴에는 다음과 같은 여러 **장점**이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-213">This design pattern has several **advantages**:</span></span>

* <span data-ttu-id="b7454-214">Hello 임시 중단 하는 동안 데이터 손실을 방지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-214">It avoids data loss during hello temporary outages.</span></span>
* <span data-ttu-id="b7454-215">트래픽 관리자가 구성 가능 hello 연결 오류를 검색 하는 속도에 대해서만 가동 중지 시간에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-215">Downtime depends only on how quickly traffic manager detects hello connectivity failure, which is configurable.</span></span>

<span data-ttu-id="b7454-216">hello **단점이** 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-216">hello **tradeoff** is:</span></span>

* <span data-ttu-id="b7454-217">응용 프로그램에는 읽기 전용 모드에 toooperate 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-217">Application must be able toooperate in read-only mode.</span></span>

> [!NOTE]
> <span data-ttu-id="b7454-218">Hello 영역은 영구 서비스 중단 시 수동으로 활성화 데이터베이스 장애 조치 한 있습니다 hello 데이터 손실 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-218">In case of a permanent service outage in hello region, you manually activate database failover and accept hello data loss.</span></span> <span data-ttu-id="b7454-219">hello 응용 프로그램 읽기 / 쓰기 액세스 toohello 데이터베이스와 보조 지역 hello 작동 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-219">hello application will be functional in hello secondary region with read-write access toohello database.</span></span>
>

## <a name="business-continuity-planning-choose-an-application-design-for-cloud-disaster-recovery"></a><span data-ttu-id="b7454-220">무중단 업무 방식 계획: 클라우드 재해 복구에 대한 응용 프로그램 디자인 선택</span><span class="sxs-lookup"><span data-stu-id="b7454-220">Business continuity planning: Choose an application design for cloud disaster recovery</span></span>
<span data-ttu-id="b7454-221">특정 클라우드 재해 복구 전략을 결합 하거나 응용 프로그램의 toobest 충족 hello 요구 이러한 디자인 패턴을 확장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-221">Your specific cloud disaster recovery strategy can combine or extend these design patterns toobest meet hello needs of your application.</span></span>  <span data-ttu-id="b7454-222">앞서 언급 했 듯이 hello 선택 하는 전략은 hello toooffer tooyour 고객을 응용 프로그램 배포 토폴로지를 hello SLA 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-222">As mentioned earlier, hello strategy you choose is based on hello SLA you want toooffer tooyour customers and hello application deployment topology.</span></span> <span data-ttu-id="b7454-223">toohelp 결정 하는 데, 다음 표에 hello hello 예상된 데이터 손실 또는 복구 지점 목표 (RPO) 및 복구 예상된 시간 (ERT)를 기반으로 hello 선택 항목을 비교 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7454-223">toohelp guide your decision, hello following table compares hello choices based on hello estimated data loss or recovery point objective (RPO) and estimated recovery time (ERT).</span></span>

| <span data-ttu-id="b7454-224">패턴</span><span class="sxs-lookup"><span data-stu-id="b7454-224">Pattern</span></span> | <span data-ttu-id="b7454-225">RPO</span><span class="sxs-lookup"><span data-stu-id="b7454-225">RPO</span></span> | <span data-ttu-id="b7454-226">ERT</span><span class="sxs-lookup"><span data-stu-id="b7454-226">ERT</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="b7454-227">배치된 데이터베이스 액세스로 재해 복구에 대한 활성-수동 배포</span><span class="sxs-lookup"><span data-stu-id="b7454-227">Active-passive deployment for disaster recovery with co-located database access</span></span> |<span data-ttu-id="b7454-228">읽기-쓰기 액세스 < 5초</span><span class="sxs-lookup"><span data-stu-id="b7454-228">Read-write access < 5 sec</span></span> |<span data-ttu-id="b7454-229">장애 감지 시간 + DNS TTL</span><span class="sxs-lookup"><span data-stu-id="b7454-229">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="b7454-230">응용 프로그램 부하 분산에 대한 활성-활성 배포</span><span class="sxs-lookup"><span data-stu-id="b7454-230">Active-active deployment for application load balancing</span></span> |<span data-ttu-id="b7454-231">읽기-쓰기 액세스 < 5초</span><span class="sxs-lookup"><span data-stu-id="b7454-231">Read-write access < 5 sec</span></span> |<span data-ttu-id="b7454-232">장애 감지 시간 + DNS TTL</span><span class="sxs-lookup"><span data-stu-id="b7454-232">Failure detection time + DNS TTL</span></span> |
| <span data-ttu-id="b7454-233">데이터 보존에 대한 활성-수동 배포</span><span class="sxs-lookup"><span data-stu-id="b7454-233">Active-passive deployment for data preservation</span></span> |<span data-ttu-id="b7454-234">읽기 전용 액세스 < 5초</span><span class="sxs-lookup"><span data-stu-id="b7454-234">Read-only access < 5 sec</span></span> | <span data-ttu-id="b7454-235">읽기 전용 액세스 = 0</span><span class="sxs-lookup"><span data-stu-id="b7454-235">Read-only access = 0</span></span> |
||<span data-ttu-id="b7454-236">읽기-쓰기 액세스 = 0</span><span class="sxs-lookup"><span data-stu-id="b7454-236">Read-write access = zero</span></span> | <span data-ttu-id="b7454-237">읽기-쓰기 액세스 = 장애 감지 시간 + 데이터 손실이 있는 유예 기간</span><span class="sxs-lookup"><span data-stu-id="b7454-237">Read-write access = Failure detection time + grace period with data loss</span></span> |
|||

## <a name="next-steps"></a><span data-ttu-id="b7454-238">다음 단계</span><span class="sxs-lookup"><span data-stu-id="b7454-238">Next steps</span></span>
* <span data-ttu-id="b7454-239">Azure SQL 데이터베이스 자동화 된 백업에 대 한 toolearn 참조 [자동화 된 백업을 SQL 데이터베이스](sql-database-automated-backups.md)</span><span class="sxs-lookup"><span data-stu-id="b7454-239">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md)</span></span>
* <span data-ttu-id="b7454-240">비즈니스 연속성의 개요 및 시나리오를 보려면 [비즈니스 연속성 개요](sql-database-business-continuity.md)</span><span class="sxs-lookup"><span data-stu-id="b7454-240">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md)</span></span>
* <span data-ttu-id="b7454-241">복구를 위한 자동화 된 백업을 사용 하는 방법에 대 한 toolearn 참조 [hello 서비스 개시 백업에서 데이터베이스를 복원 합니다.](sql-database-recovery-using-backups.md)</span><span class="sxs-lookup"><span data-stu-id="b7454-241">toolearn about using automated backups for recovery, see [restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md)</span></span>
* <span data-ttu-id="b7454-242">빠른 복구 옵션에 대 한 toolearn 참조 [활성 지리적 복제](sql-database-geo-replication-overview.md)</span><span class="sxs-lookup"><span data-stu-id="b7454-242">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md)</span></span>  
* <span data-ttu-id="b7454-243">보관을 위해 자동화 된 백업을 사용 하는 방법에 대 한 toolearn 참조 [데이터베이스 복사](sql-database-copy.md)</span><span class="sxs-lookup"><span data-stu-id="b7454-243">toolearn about using automated backups for archiving, see [database copy](sql-database-copy.md)</span></span>
* <span data-ttu-id="b7454-244">탄력적 풀의 활성 지역 복제에 대한 자세한 내용은 [탄력적 풀 재해 복구 전략](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b7454-244">For information about active geo-replication with Elastic Pools, see [Elastic Pool disaster recovery strategies](sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool.md).</span></span>
