---
title: "재해 복구 솔루션 설계 - Azure SQL Database | Microsoft Docs"
description: "올바른 장애 조치 패턴을 선택하여 재해 복구를 위한 클라우드 솔루션을 설계하는 방법에 대해 알아봅니다."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2db99057-0c79-4fb0-a7f1-d1c057ec787f
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/07/2017
ms.author: sashan;carlrab
ms.openlocfilehash: 4f5131fdd2ca83e7a0a2f986a2fa1e3551814c6e
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="disaster-recovery-strategies-for-applications-using-sql-database-elastic-pools"></a><span data-ttu-id="03796-103">SQL Database 탄력적 풀을 사용하는 응용 프로그램에 대한 재해 복구 전략</span><span class="sxs-lookup"><span data-stu-id="03796-103">Disaster recovery strategies for applications using SQL Database elastic pools</span></span>
<span data-ttu-id="03796-104">수년에 걸쳐 클라우드 서비스가 간단하지 않으며 치명적인 문제가 발생한다는 점을 발견했습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-104">Over the years we have learned that cloud services are not foolproof and catastrophic incidents happen.</span></span> <span data-ttu-id="03796-105">SQL Database는 이러한 문제가 발생할 때 응용 프로그램의 비즈니스 연속성을 위해 제공할 몇 가지 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-105">SQL Database provides several capabilities to provide for the business continuity of your application when these incidents occur.</span></span> <span data-ttu-id="03796-106">[탄력적 풀](sql-database-elastic-pool.md) 및 단일 데이터베이스는 동일한 종류의 재해 복구 기능을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-106">[Elastic pools](sql-database-elastic-pool.md) and single databases support the same kind of disaster recovery capabilities.</span></span> <span data-ttu-id="03796-107">이 문서에서는 이러한 SQL 데이터베이스 비즈니스 연속성 기능을 활용하는 탄력적 풀에 대한 몇 가지 DR 전략을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-107">This article describes several DR strategies for elastic pools that leverage these SQL Database business continuity features.</span></span>

<span data-ttu-id="03796-108">이 문서에서는 다음과 같은 canonical SaaS ISV 응용 프로그램 패턴을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-108">This article uses the following canonical SaaS ISV application pattern:</span></span>

<span data-ttu-id="03796-109"><i>최신 클라우드 기반 웹 응용 프로그램은 각 최종 사용자에 대해 하나의 SQL Database를 프로비전합니다. ISV에는 많은 고객이 있으므로 테넌트 데이터베이스라고 하는 많은 데이터베이스를 사용합니다. 일반적으로 테넌트 데이터베이스에는 예측할 수 없는 활동 패턴이 있으므로 ISV는 데이터베이스 비용을 확장된 기간 동안 잘 예측할 수 있도록 탄력적 풀을 사용합니다. 또한 탄력적 풀은 사용자 활동이 급증하는 경우 성능 관리를 단순화합니다. 테넌트 데이터베이스 외에도 응용 프로그램은 사용자 프로필, 보안을 관리하고 사용 패턴 등을 수집하는 데 여러 데이터베이스도 사용합니다. 개별 테넌트의 가용성은 응용 프로그램의 전체 가용성에 영향을 주지 않습니다. 하지만, 관리 데이터베이스의 성능과 가용성은 응용 프로그램의 기능에 중요하며 관리 데이터베이스가 오프라인 상태이면 전체 응용 프로그램도 오프라인 상태입니다.</i></span><span class="sxs-lookup"><span data-stu-id="03796-109"><i>A modern cloud-based web application provisions one SQL database for each end user. The ISV has many customers and therefore uses many databases, known as tenant databases. Because the tenant databases typically have unpredictable activity patterns, the ISV uses an elastic pool to make the database cost very predictable over extended periods of time. The elastic pool also simplifies the performance management when the user activity spikes. In addition to the tenant databases the application also uses several databases to manage user profiles, security, collect usage patterns etc. Availability of the individual tenants does not impact the application’s availability as whole. However, the availability and performance of management databases is critical for the application’s function and if the management databases are offline the entire application is offline.</i></span></span>  

<span data-ttu-id="03796-110">이 문서에서는 비용에 민감한 시작 응용 프로그램에서 엄격한 가용성 요구 사항이 포함된 응용 프로그램에 걸친 시나리오를 다루는 DR 전략을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-110">This article discusses DR strategies covering a range of scenarios from cost sensitive startup applications to ones with stringent availability requirements.</span></span>

## <a name="scenario-1-cost-sensitive-startup"></a><span data-ttu-id="03796-111">시나리오 1.</span><span class="sxs-lookup"><span data-stu-id="03796-111">Scenario 1.</span></span> <span data-ttu-id="03796-112">비용에 민감한 시작</span><span class="sxs-lookup"><span data-stu-id="03796-112">Cost sensitive startup</span></span>
<span data-ttu-id="03796-113"><i>신규 사업체이며 비용에 매우 민감합니다.  응용 프로그램의 배포 및 관리를 단순화하려면 개별 고객을 위해 제한된 SLA를 보유할 수 있습니다. 하지만 응용 프로그램 전체가 오프라인이 되는 것은 절대 원하지 않습니다.</i></span><span class="sxs-lookup"><span data-stu-id="03796-113"><i>I am a startup business and am extremely cost sensitive.  I want to simplify deployment and management of the application and I can have a limited SLA for individual customers. But I want to ensure the application as a whole is never offline.</i></span></span>

<span data-ttu-id="03796-114">단순성 요구 사항을 충족하려면 모든 테넌트 데이터베이스를 선택한 Azure 지역에서 하나의 탄력적 풀로 배포하고 관리 데이터베이스를 지역 복제된 단일 데이터베이스로 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-114">To satisfy the simplicity requirement, deploy all tenant databases into one elastic pool in the Azure region of your choice and deploy management databases as geo-replicated single databases.</span></span> <span data-ttu-id="03796-115">테넌트의 재해 복구를 위해 추가 비용 없이 제공되는 지역 복원을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-115">For the disaster recovery of tenants, use geo-restore, which comes at no additional cost.</span></span> <span data-ttu-id="03796-116">관리 데이터베이스의 가용성을 보장하려면 자동 장애 조치 그룹(미리 보기 상태)을 사용하여 다른 지역으로 지역 복제합니다(1단계).</span><span class="sxs-lookup"><span data-stu-id="03796-116">To ensure the availability of the management databases, geo-replicate them to another region using an auto-failover group (in-preview) (step 1).</span></span> <span data-ttu-id="03796-117">이 시나리오에서 재해 복구를 구성하는 지속적인 비용은 보조 데이터베이스의 총 비용과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-117">The ongoing cost of the disaster recovery configuration in this scenario is equal to the total cost of the secondary databases.</span></span> <span data-ttu-id="03796-118">이 구성은 다음 다이어그램에 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-118">This configuration is illustrated on the next diagram.</span></span>

![그림 1](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-1.png)

<span data-ttu-id="03796-120">주 지역에서 중단이 발생한 경우 응용 프로그램을 온라인 상태로 복구하는 단계는 다음 다이어그램에 설명되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-120">If an outage occurs in the primary region, the recovery steps to bring your application online are illustrated by the next diagram.</span></span>

* <span data-ttu-id="03796-121">장애 조치 그룹에서 DR 지역으로의 관리 데이터베이스 장애 조치를 자동으로 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-121">The failover group initiates automatic failover of the management database to the DR region.</span></span> <span data-ttu-id="03796-122">응용 프로그램이 새 주 데이터베이스에 자동으로 다시 연결되며, 모든 새 계정과 테넌트 데이터베이스가 DR 지역에 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="03796-122">The application is automatically reconnected to the new primary and all new accounts and tenant databases are created in the DR region.</span></span> <span data-ttu-id="03796-123">기존 고객은 자신의 데이터를 임시로 사용할 수 없음을 확인하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-123">The existing customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="03796-124">원래 풀과 동일한 구성으로 탄력적 풀을 만듭니다(2).</span><span class="sxs-lookup"><span data-stu-id="03796-124">Create the elastic pool with the same configuration as the original pool (2).</span></span>
* <span data-ttu-id="03796-125">지역 복원을 사용하여 테넌트 데이터베이스의 복사본을 만듭니다(3).</span><span class="sxs-lookup"><span data-stu-id="03796-125">Use geo-restore to create copies of the tenant databases (3).</span></span> <span data-ttu-id="03796-126">최종 사용자 연결로 개별 복원 트리거를 고려하거나 다른 응용 프로그램 특정 우선 순위 체계를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-126">You can consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>


<span data-ttu-id="03796-127">이때 응용 프로그램은 DR 영역에서 다시 온라인 상태이지만 일부 고객은 데이터에 액세스할 때 지연을 경험하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-127">At this point your application is back online in the DR region, but some customers experience delay when accessing their data.</span></span>

![그림 2](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-2.png)

<span data-ttu-id="03796-129">일시적인 중단인 경우 DR 지역에서 모든 데이터베이스 복원이 완료되기 전에 Azure에서 주 지역이 복구될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-129">If the outage was temporary, it is possible that the primary region is recovered by Azure before all the database restores are complete in the DR region.</span></span> <span data-ttu-id="03796-130">이 경우에 주 지역으로 응용 프로그램을 다시 이동하도록 오케스트레이션합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-130">In this case, orchestrate moving the application back to the primary region.</span></span> <span data-ttu-id="03796-131">이 프로세스는 다음 다이어그램에 설명된 단계를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-131">The process takes the steps illustrated on the next diagram.</span></span>

* <span data-ttu-id="03796-132">미해결된 모든 지역 복원 요청을 취소합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-132">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="03796-133">관리 데이터베이스를 주 지역으로 장애 조치합니다(5).</span><span class="sxs-lookup"><span data-stu-id="03796-133">Fail over the management databases to the primary region (5).</span></span> <span data-ttu-id="03796-134">지역의 복구 후에 이전 주 데이터베이스는 자동으로 보조 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-134">After the region’s recovery, the old primaries have automatically become secondaries.</span></span> <span data-ttu-id="03796-135">이제 역할을 다시 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-135">Now they switch roles again.</span></span> 
* <span data-ttu-id="03796-136">주 지역을 다시 가리키도록 응용 프로그램의 연결 문자열을 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-136">Change the application's connection string to point back to the primary region.</span></span> <span data-ttu-id="03796-137">이제 모든 새 계정 및 테넌트 데이터베이스가 주 지역에 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-137">Now all new accounts and tenant databases are created in the primary region.</span></span> <span data-ttu-id="03796-138">일부 기존 고객은 자신의 데이터를 임시로 사용할 수 없음을 확인하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-138">Some existing customers see their data temporarily unavailable.</span></span>   
* <span data-ttu-id="03796-139">DR 풀에서 모든 데이터베이스를 읽기 전용으로 설정하여 DR 지역에서 수정할 수 없도록 합니다(6).</span><span class="sxs-lookup"><span data-stu-id="03796-139">Set all databases in the DR pool to read-only to ensure they cannot be modified in the DR region (6).</span></span> 
* <span data-ttu-id="03796-140">복구 이후에 변경된 DR 풀에 있는 각 데이터베이스에 대해 기본 풀에 있는 해당 데이터베이스의 이름을 변경하거나 삭제합니다(7).</span><span class="sxs-lookup"><span data-stu-id="03796-140">For each database in the DR pool that has changed since the recovery, rename or delete the corresponding databases in the primary pool (7).</span></span> 
* <span data-ttu-id="03796-141">DR 풀에서 기본 풀로 업데이트된 데이터베이스를 복사합니다(8).</span><span class="sxs-lookup"><span data-stu-id="03796-141">Copy the updated databases from the DR pool to the primary pool (8).</span></span> 
* <span data-ttu-id="03796-142">DR 풀을 삭제합니다(9).</span><span class="sxs-lookup"><span data-stu-id="03796-142">Delete the DR pool (9)</span></span>

<span data-ttu-id="03796-143">이때 응용 프로그램은 기본 풀에서 모든 테넌트 데이터베이스를 사용할 수 있는 주 지역에서 온라인 상태가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-143">At this point your application is online in the primary region with all tenant databases available in the primary pool.</span></span>

![그림 3](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-3.png)

<span data-ttu-id="03796-145">이 전략의 주요 **장점** 은 데이터 계층 중복성을 위해 지속적으로 발생하는 비용이 낮은 것입니다.</span><span class="sxs-lookup"><span data-stu-id="03796-145">The key **benefit** of this strategy is low ongoing cost for data tier redundancy.</span></span> <span data-ttu-id="03796-146">백업은 응용 프로그램 다시 쓰기 없이 추가 비용이 발생하지 않으면서 SQL 데이터베이스 서비스에 의해 자동으로 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-146">Backups are taken automatically by the SQL Database service with no application rewrite and at no additional cost.</span></span>  <span data-ttu-id="03796-147">탄력적 데이터베이스를 복원한 경우에만 비용이 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-147">The cost is incurred only when the elastic databases are restored.</span></span> <span data-ttu-id="03796-148">**단점**은 모든 테넌트 데이터베이스를 전체 복구하는 데 상당한 시간이 소요된다는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="03796-148">The **trade-off** is that the complete recovery of all tenant databases takes significant time.</span></span> <span data-ttu-id="03796-149">소요되는 시간은 DR 지역에서 시작할 총 복원 수와 테넌트 데이터베이스의 전체 크기에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="03796-149">The length of time depends on the total number of restores you initiate in the DR region and overall size of the tenant databases.</span></span> <span data-ttu-id="03796-150">일부 테넌트의 복원을 다른 복원보다 우선하더라도 기존 고객 데이터베이스에 전체 영향을 최소화하기 위해 서비스가 조정하고 제한하므로 동일한 지역에서 시작된 모든 다른 복원과 경쟁하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-150">Even if you prioritize some tenants' restores over others, you are competing with all the other restores that are initiated in the same region as the service arbitrates and throttles to minimize the overall impact on the existing customers' databases.</span></span> <span data-ttu-id="03796-151">또한 DR 지역에 새 탄력적 풀이 생성될 때까지는 테넌트 데이터베이스의 복구를 시작할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-151">In addition, the recovery of the tenant databases cannot start until the new elastic pool in the DR region is created.</span></span>

## <a name="scenario-2-mature-application-with-tiered-service"></a><span data-ttu-id="03796-152">시나리오 2.</span><span class="sxs-lookup"><span data-stu-id="03796-152">Scenario 2.</span></span> <span data-ttu-id="03796-153">계층화된 서비스를 포함하는 완성도 높은 응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="03796-153">Mature application with tiered service</span></span>
<span data-ttu-id="03796-154"><i>계층화된 서비스 제품 및 평가판 고객/유료 고객을 위한 다양한 SLA를 포함하는 완성도 높은 SaaS 응용 프로그램입니다. 평가판 고객을 위해 가능한 비용을 절감해야 합니다. 평가판 고객은 중단 시간이 있을 수 있지만 중단 시간이 발생할 가능성을 줄이고 싶습니다. 유료 고객의 경우 중단 시간이 있을 경우 고객이 이탈할 위험이 있습니다. 따라서 유료 고객이 항상 데이터에 액세스할 수 있도록 하고 싶습니다.</i></span><span class="sxs-lookup"><span data-stu-id="03796-154"><i>I am a mature SaaS application with tiered service offers and different SLAs for trial customers and for paying customers. For the trial customers, I have to reduce the cost as much as possible. Trial customers can take downtime but I want to reduce its likelihood. For the paying customers, any downtime is a flight risk. So I want to make sure that paying customers are always able to access their data.</i></span></span> 

<span data-ttu-id="03796-155">이 시나리오를 지원하려면 별도의 탄력적 풀에 배치하여 평가판 테넌트와 유료 테넌트를 분리합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-155">To support this scenario, separate the trial tenants from paid tenants by putting them into separate elastic pools.</span></span> <span data-ttu-id="03796-156">평가판 고객은 테넌트당 낮은 eDTU와 적은 SLA를 포함하며 복구 시간이 더 깁니다.</span><span class="sxs-lookup"><span data-stu-id="03796-156">The trial customers have lower eDTU per tenant and lower SLA with a longer recovery time.</span></span> <span data-ttu-id="03796-157">유료 고객은 테넌트당 높은 eDTU와 많은 SLA를 제공하는 풀에 있게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-157">The paying customers are in a pool with higher eDTU per tenant and a higher SLA.</span></span> <span data-ttu-id="03796-158">가장 짧은 복구 시간을 보장하기 위해 유료 고객의 테넌트 데이터베이스는 지역 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-158">To guarantee the lowest recovery time, the paying customers' tenant databases are geo-replicated.</span></span> <span data-ttu-id="03796-159">이 구성은 다음 다이어그램에 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-159">This configuration is illustrated on the next diagram.</span></span> 

![그림 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-4.png)

<span data-ttu-id="03796-161">첫 번째 시나리오와 마찬가지로 관리 데이터베이스는 매우 활동적이므로 이 경우 단일 지역 복제 데이터베이스를 사용합니다(1).</span><span class="sxs-lookup"><span data-stu-id="03796-161">As in the first scenario, the management databases are quite active so you use a single geo-replicated database for it (1).</span></span> <span data-ttu-id="03796-162">이렇게 하면 새 고객 구독, 프로필 업데이트 및 기타 관리 작업에 대한 성능을 예측할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-162">This ensures the predictable performance for new customer subscriptions, profile updates, and other management operations.</span></span> <span data-ttu-id="03796-163">주 관리 데이터베이스가 있는 지역이 주 지역이 되며 보조 관리 데이터베이스가 있는 지역이 DR 지역이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-163">The region in which the primaries of the management databases reside is the primary region and the region in which the secondaries of the management databases reside is the DR region.</span></span>

<span data-ttu-id="03796-164">유료 고객의 테넌트 데이터베이스는 주 지역에 프로비전된 "유료" 풀에 활성 데이터베이스를 포함하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-164">The paying customers’ tenant databases have active databases in the “paid” pool provisioned in the primary region.</span></span> <span data-ttu-id="03796-165">DR 지역에서 동일한 이름으로 보조 풀을 프로비전합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-165">Provision a secondary pool with the same name in the DR region.</span></span> <span data-ttu-id="03796-166">각 테넌트는 보조 풀로 지역 복제됩니다(2).</span><span class="sxs-lookup"><span data-stu-id="03796-166">Each tenant is geo-replicated to the secondary pool (2).</span></span> <span data-ttu-id="03796-167">이렇게 하면 장애 조치를 사용하여 모든 테넌트 데이터베이스를 신속하게 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-167">This enables quick recovery of all tenant databases using failover.</span></span> 

<span data-ttu-id="03796-168">주 지역에서 중단이 발생한 경우 응용 프로그램을 온라인 상태로 복구하는 단계는 다음 다이어그램에 설명되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-168">If an outage occurs in the primary region, the recovery steps to bring your application online are illustrated in the next diagram:</span></span>

![그림 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-5.png)

* <span data-ttu-id="03796-170">관리 데이터베이스를 DR 지역으로 즉시 장애 조치합니다(3).</span><span class="sxs-lookup"><span data-stu-id="03796-170">Immediately fail over the management databases to the DR region (3).</span></span>
* <span data-ttu-id="03796-171">DR 지역을 가리키도록 응용 프로그램의 연결 문자열을 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-171">Change the application’s connection string to point to the DR region.</span></span> <span data-ttu-id="03796-172">이제 모든 새 계정 및 테넌트 데이터베이스가 DR 지역에 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-172">Now all new accounts and tenant databases are created in the DR region.</span></span> <span data-ttu-id="03796-173">기존 평가판 고객은 자신의 데이터를 임시로 사용할 수 없음을 확인하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-173">The existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="03796-174">유료 테넌트의 데이터베이스를 DR 지역의 풀로 장애 조치하여 가용성을 즉시 복원합니다(4).</span><span class="sxs-lookup"><span data-stu-id="03796-174">Fail over the paid tenant's databases to the pool in the DR region to immediately restore their availability (4).</span></span> <span data-ttu-id="03796-175">장애 조치는 신속한 메타데이터 수준 변경이므로 최종 사용자 연결에 의해 필요 시 개별 장애 조치를 트리거하는 최적화를 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-175">Since the failover is a quick metadata level change, consider an optimization where the individual failovers are triggered on demand by the end-user connections.</span></span> 
* <span data-ttu-id="03796-176">보조 데이터베이스가 보조인 동안 변경 로그를 처리할 용량만 필요로 하므로 보조 풀 eDTU 크기가 기본 풀보다 작은 경우 모든 테넌트의 전체 워크로드를 수용하도록 풀 용량을 즉시 늘립니다(5).</span><span class="sxs-lookup"><span data-stu-id="03796-176">If your secondary pool eDTU size was lower than the primary because the secondary databases only required the capacity to process the change logs while they were secondaries, immediately increase the pool capacity now to accommodate the full workload of all tenants (5).</span></span> 
* <span data-ttu-id="03796-177">DR 지역에 동일한 이름 및 구성으로 평가판 고객의 데이터베이스에 대해 새 탄력적 풀을 만듭니다(6).</span><span class="sxs-lookup"><span data-stu-id="03796-177">Create the new elastic pool with the same name and the same configuration in the DR region for the trial customers' databases (6).</span></span> 
* <span data-ttu-id="03796-178">평가판 고객의 풀을 만든 후 지역 복원을 사용하여 개별 평가판 테넌트 데이터베이스를 새 풀로 복원합니다(7).</span><span class="sxs-lookup"><span data-stu-id="03796-178">Once the trial customers’ pool is created, use geo-restore to restore the individual trial tenant databases into the new pool (7).</span></span> <span data-ttu-id="03796-179">최종 사용자 연결로 개별 복원 트리거를 고려하거나 다른 응용 프로그램 특정 우선 순위 체계를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-179">Consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>

<span data-ttu-id="03796-180">이때 DR 지역에서 응용 프로그램이 다시 온라인 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="03796-180">At this point your application is back online in the DR region.</span></span> <span data-ttu-id="03796-181">모든 유료 고객은 자신의 데이터에 액세스할 수 있으나 평가판 고객은 데이터에 액세스할 때 지연을 경험하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-181">All paying customers have access to their data while the trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="03796-182">DR 지역에서 응용 프로그램을 복원한 *후* Azure에 의해 주 지역이 복구된 경우 해당 지역에서 응용 프로그램을 계속 실행하거나 주 지역으로 장애 복구하도록 결정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-182">When the primary region is recovered by Azure *after* you have restored the application in the DR region you can continue running the application in that region or you can decide to fail back to the primary region.</span></span> <span data-ttu-id="03796-183">장애 조치 프로세스가 완료되기 *전에* 주 지역이 복구된 경우 바로 장애 복구를 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-183">If the primary region is recovered *before* the failover process is completed, consider failing back right away.</span></span> <span data-ttu-id="03796-184">이 장애 복구에는 다음 다이어그램에 표시된 단계를 거칩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-184">The failback takes the steps illustrated in the next diagram:</span></span> 

![그림 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-6.png)

* <span data-ttu-id="03796-186">미해결된 모든 지역 복원 요청을 취소합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-186">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="03796-187">관리 데이터베이스를 장애 조치합니다(8).</span><span class="sxs-lookup"><span data-stu-id="03796-187">Fail over the management databases (8).</span></span> <span data-ttu-id="03796-188">지역의 복구 후 이전 주 데이터베이스는 자동으로 보조 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-188">After the region’s recovery, the old primary automatically become the secondary.</span></span> <span data-ttu-id="03796-189">이제 다시 주 항목이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-189">Now it becomes the primary again.</span></span>  
* <span data-ttu-id="03796-190">유료 테넌트 데이터베이스를 장애 조치합니다(9).</span><span class="sxs-lookup"><span data-stu-id="03796-190">Fail over the paid tenant databases (9).</span></span> <span data-ttu-id="03796-191">마찬가지로 지역의 복구 후 이전 주 데이터베이스는 자동으로 보조 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-191">Similarly, after the region’s recovery, the old primaries automatically become the secondaries.</span></span> <span data-ttu-id="03796-192">이제 다시 주 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-192">Now they become the primaries again.</span></span> 
* <span data-ttu-id="03796-193">DR 지역에서 변경된 복원된 평가판 데이터베이스를 읽기 전용으로 설정합니다(10).</span><span class="sxs-lookup"><span data-stu-id="03796-193">Set the restored trial databases that have changed in the DR region to read-only (10).</span></span>
* <span data-ttu-id="03796-194">복구 이후에 변경된 평가판 고객 DR 풀에 있는 각 데이터베이스에 대해 평가판 고객 기본 풀에 있는 해당 데이터베이스의 이름을 변경하거나 삭제합니다(11).</span><span class="sxs-lookup"><span data-stu-id="03796-194">For each database in the trial customers DR pool that changed since the recovery, rename or delete the corresponding database in the trial customers primary pool (11).</span></span> 
* <span data-ttu-id="03796-195">DR 풀에서 기본 풀로 업데이트된 데이터베이스를 복사합니다(12).</span><span class="sxs-lookup"><span data-stu-id="03796-195">Copy the updated databases from the DR pool to the primary pool (12).</span></span> 
* <span data-ttu-id="03796-196">DR 풀을 삭제합니다(13).</span><span class="sxs-lookup"><span data-stu-id="03796-196">Delete the DR pool (13)</span></span> 

> [!NOTE]
> <span data-ttu-id="03796-197">장애 조치 작업은 비동기입니다.</span><span class="sxs-lookup"><span data-stu-id="03796-197">The failover operation is asynchronous.</span></span> <span data-ttu-id="03796-198">복구 시간을 최소화하기 위해 적어도 20개의 데이터베이스 배치에서 테넌트 데이터베이스의 장애 조치 명령을 실행하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-198">To minimize the recovery time it is important that you execute the tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 
> 

<span data-ttu-id="03796-199">이 전략의 주요 **장점** 은 유료 고객에게 가장 높은 SLA를 제공한다는 점입니다.</span><span class="sxs-lookup"><span data-stu-id="03796-199">The key **benefit** of this strategy is that it provides the highest SLA for the paying customers.</span></span> <span data-ttu-id="03796-200">또한 평가판 DR 풀이 만들어지는 즉시 새 평가판이 차단 해제되도록 보장합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-200">It also guarantees that the new trials are unblocked as soon as the trial DR pool is created.</span></span> <span data-ttu-id="03796-201">**단점**은 이러한 설정이 유료 고객을 위한 보조 DR 풀의 비용으로 테넌트 데이터베이스의 총 비용을 증가시킨다는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="03796-201">The **trade-off** is that this setup increases the total cost of the tenant databases by the cost of the secondary DR pool for paid customers.</span></span> <span data-ttu-id="03796-202">또한 보조 풀 크기가 다른 경우 유료 고객은 장애 조치 후에 DR 지역에서 풀 업그레이드가 완료될 때까지 성능 저하를 경험하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-202">In addition, if the secondary pool has a different size, the paying customers experience lower performance after failover until the pool upgrade in the DR region is completed.</span></span> 

## <a name="scenario-3-geographically-distributed-application-with-tiered-service"></a><span data-ttu-id="03796-203">시나리오 3.</span><span class="sxs-lookup"><span data-stu-id="03796-203">Scenario 3.</span></span> <span data-ttu-id="03796-204">계층화된 서비스를 포함하는 지리적으로 분산된 응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="03796-204">Geographically distributed application with tiered service</span></span>
<span data-ttu-id="03796-205"><i>계층화된 서비스 제품을 포함한 완성도 높은 SaaS 응용 프로그램이 있습니다. 일시적인 중단이라도 고객 불만족으로 이어질 수 있으므로 유료 고객에게 매우 파격적인 SLA를 제공하고 중단이 발생할 때 미치는 위험을 최소화하고 싶습니다. 유료 고객은 자신의 데이터에 항상 액세스할 수 있어야 한다는 것이 중요합니다. 평가판은 무료이며 평가판 사용 기간에는 SLA가 제공되지 않습니다. </i></span><span class="sxs-lookup"><span data-stu-id="03796-205"><i>I have a mature SaaS application with tiered service offers. I want to offer a very aggressive SLA to my paid customers and minimize the risk of impact when outages occur because even brief interruption can cause customer dissatisfaction. It is critical that the paying customers can always access their data. The trials are free and an SLA is not offered during the trial period. </i></span></span> 

<span data-ttu-id="03796-206">이 시나리오를 지원하려면 세 개의 별도의 탄력적 풀을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-206">To support this scenario, use three separate elastic pools.</span></span> <span data-ttu-id="03796-207">데이터베이스당 높은 eDTU가 있는 크기가 같은 두 개의 풀을 프로비전하여 유료 고객의 테넌트 데이터베이스를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-207">Provision two equal size pools with high eDTUs per database in two different regions to contain the paid customers' tenant databases.</span></span> <span data-ttu-id="03796-208">평가판 테넌트를 포함하는 세 번째 풀은 데이터베이스당 낮은 eDTU를 포함하고 두 지역 중 하나에 프로비전될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-208">The third pool containing the trial tenants can have lower eDTUs per database and be provisioned in one of the two regions.</span></span>

<span data-ttu-id="03796-209">중단 중에 가장 짧은 복구 시간을 보장하기 위해 유료 고객의 테넌트 데이터베이스를 두 지역 각각에서 주 데이터베이스의 50%로 지역 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-209">To guarantee the lowest recovery time during outages, the paying customers' tenant databases are geo-replicated with 50% of the primary databases in each of the two regions.</span></span> <span data-ttu-id="03796-210">마찬가지로 각 지역은 보조 데이터베이스의 50%를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-210">Similarly, each region has 50% of the secondary databases.</span></span> <span data-ttu-id="03796-211">이러한 방식에서 지역이 오프라인 상태이면 유료 고객 데이터베이스의 50%만 영향을 받고 장애 조치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-211">This way, if a region is offline, only 50% of the paid customers' databases are impacted and have to fail over.</span></span> <span data-ttu-id="03796-212">다른 데이터베이스는 그대로 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-212">The other databases remain intact.</span></span> <span data-ttu-id="03796-213">이 구성은 다음 다이어그램에서 설명됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-213">This configuration is illustrated in the following diagram:</span></span>

![그림 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-7.png)

<span data-ttu-id="03796-215">이전 시나리오와 마찬가지로 관리 데이터베이스는 매우 활동적이므로 단일 지역 복제 데이터베이스로 구성합니다(1).</span><span class="sxs-lookup"><span data-stu-id="03796-215">As in the previous scenarios, the management databases are quite active so configure them as single geo-replicated databases (1).</span></span> <span data-ttu-id="03796-216">이렇게 하면 새 고객 구독, 프로필 업데이트 및 기타 관리 작업의 성능을 예측할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-216">This ensures the predictable performance of the new customer subscriptions, profile updates and other management operations.</span></span> <span data-ttu-id="03796-217">지역 A는 관리 데이터베이스에 대한 주 지역이고 지역 B는 관리 데이터베이스의 복구에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-217">Region A is the primary region for the management databases and the region B is used for recovery of the management databases.</span></span>

<span data-ttu-id="03796-218">유료 고객의 테넌트 데이터베이스도 지역 복제되지만 주 데이터베이스 및 보조 데이터베이스는 지역 A 및 지역 B로 분할됩니다(2).</span><span class="sxs-lookup"><span data-stu-id="03796-218">The paying customers’ tenant databases are also geo-replicated but with primaries and secondaries split between region A and region B (2).</span></span> <span data-ttu-id="03796-219">이러한 방식에서 중단으로 영향을 받는 테넌트 주 데이터베이스는 다른 지역으로 장애 조치될 수 있으며 사용 가능하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-219">This way, the tenant primary databases impacted by the outage can fail over to the other region and become available.</span></span> <span data-ttu-id="03796-220">테넌트 데이터베이스의 나머지 절반은 전혀 영향을 받지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-220">The other half of the tenant databases are not be impacted at all.</span></span> 

<span data-ttu-id="03796-221">다음 다이어그램은 지역 A에서 중단이 발생할 경우 수행할 복구 단계를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="03796-221">The next diagram illustrates the recovery steps to take if  an outage occurs in region A.</span></span>

![그림 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-8.png)

* <span data-ttu-id="03796-223">관리 데이터베이스를 지역 B로 즉시 장애 조치합니다(3).</span><span class="sxs-lookup"><span data-stu-id="03796-223">Immediately fail over the management databases to region B (3).</span></span>
* <span data-ttu-id="03796-224">지역 B에서 관리 데이터베이스를 가리키도록 응용 프로그램의 연결 문자열을 변경합니다. 새 계정 및 테넌트 데이터베이스가 지역 B에 생성되고 기존 테넌트 데이터베이스도 이 지역에서 찾을 수 있도록 관리 데이터베이스를 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-224">Change the application’s connection string to point to the management databases in region B. Modify the management databases to make sure the new accounts and tenant databases are created in region B and the existing tenant databases are found there as well.</span></span> <span data-ttu-id="03796-225">기존 평가판 고객은 자신의 데이터를 임시로 사용할 수 없음을 확인하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-225">The existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="03796-226">유료 테넌트의 데이터베이스를 지역 B의 풀 2로 장애 조치하여 가용성을 즉시 복원합니다(4).</span><span class="sxs-lookup"><span data-stu-id="03796-226">Fail over the paid tenant's databases to pool 2 in region B to immediately restore their availability (4).</span></span> <span data-ttu-id="03796-227">장애 조치는 신속한 메타데이터 수준 변경이므로 최종 사용자 연결에 의해 필요 시 개별 장애 조치를 트리거하도록 최적화를 고려할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-227">Since the failover is a quick metadata level change, you may consider an optimization where the individual failovers are triggered on demand by the end-user connections.</span></span> 
* <span data-ttu-id="03796-228">이제 풀 2가 주 데이터베이스만을 포함하므로 풀의 총 워크로드가 증가하고 eDTU 크기를 즉시 증가시킬 수 있습니다(5).</span><span class="sxs-lookup"><span data-stu-id="03796-228">Since now pool 2 contains only primary databases, the total workload in the pool increases and can immediately increase its eDTU size (5).</span></span> 
* <span data-ttu-id="03796-229">지역 B에 동일한 이름 및 구성으로 평가판 고객의 데이터베이스에 대해 새 탄력적 풀을 만듭니다(6).</span><span class="sxs-lookup"><span data-stu-id="03796-229">Create the new elastic pool with the same name and the same configuration in the region B for the trial customers' databases (6).</span></span> 
* <span data-ttu-id="03796-230">풀을 만든 후 지역 복원을 사용하여 개별 평가판 테넌트 데이터베이스를 풀로 복원합니다(7).</span><span class="sxs-lookup"><span data-stu-id="03796-230">Once the pool is created use geo-restore to restore the individual trial tenant database into the pool (7).</span></span> <span data-ttu-id="03796-231">최종 사용자 연결로 개별 복원 트리거를 고려하거나 다른 응용 프로그램 특정 우선 순위 체계를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-231">You can consider triggering the individual restores by the end-user connections or use some other application-specific priority scheme.</span></span>

> [!NOTE]
> <span data-ttu-id="03796-232">장애 조치 작업은 비동기입니다.</span><span class="sxs-lookup"><span data-stu-id="03796-232">The failover operation is asynchronous.</span></span> <span data-ttu-id="03796-233">복구 시간을 최소화하기 위해 적어도 20개의 데이터베이스 배치에서 테넌트 데이터베이스의 장애 조치 명령을 실행하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-233">To minimize the recovery time, it is important that you execute the tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 

<span data-ttu-id="03796-234">이때 응용 프로그램은 지역 B에서 다시 온라인 상태입니다. 모든 유료 고객은 자신의 데이터에 액세스할 수 있으나 평가판 고객은 데이터에 액세스할 때 지연을 경험하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-234">At this point your application is back online in region B. All paying customers have access to their data while the trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="03796-235">지역 A를 복구할 때 평가판 고객에 대해 지역 B를 사용할지 지역 A에서 평가판 고객 풀을 사용하도록 장애 복구할지 결정해야 합니다. 한 가지 조건은 복구 이후 수정된 평가판 테넌트 데이터베이스의 비율(%)일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-235">When region A is recovered you need to decide if you want to use region B for trial customers or failback to using the trial customers pool in region A. One criteria could be the % of trial tenant databases modified since the recovery.</span></span> <span data-ttu-id="03796-236">결정에 관계 없이 두 개의 풀 사이 유료 테넌트는 균형을 재조정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-236">Regardless of that decision, you need to re-balance the paid tenants between two pools.</span></span> <span data-ttu-id="03796-237">다음 다이어그램은 평가판 테넌트 데이터베이스가 A 영역으로 장애 복구할 때의 프로세스를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="03796-237">the next diagram illustrates the process when the trial tenant databases fail back to region A.</span></span>  

![그림 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-9.png)

* <span data-ttu-id="03796-239">평가판 DR 풀에 대해 미해결된 모든 지역 복원 요청을 취소합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-239">Cancel all outstanding geo-restore requests to trial DR pool.</span></span>   
* <span data-ttu-id="03796-240">관리 데이터베이스를 장애 조치합니다(8).</span><span class="sxs-lookup"><span data-stu-id="03796-240">Fail over the management database (8).</span></span> <span data-ttu-id="03796-241">지역의 복구 후 이전 주 데이터베이스는 자동으로 보조 데이터베이스가 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-241">After the region’s recovery, the old primary automatically became the secondary.</span></span> <span data-ttu-id="03796-242">이제 다시 주 항목이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-242">Now it becomes the primary again.</span></span>  
* <span data-ttu-id="03796-243">풀 1로 장애 복구할 유료 테넌트 데이터베이스를 선택하고 보조 데이터베이스로 장애 조치를 시작합니다(9).</span><span class="sxs-lookup"><span data-stu-id="03796-243">Select which paid tenant databases fail back to pool 1 and initiate failover to their secondaries (9).</span></span> <span data-ttu-id="03796-244">지역의 복구 후 풀 1에 있는 모든 데이터베이스는 자동으로 보조 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-244">After the region’s recovery, all databases in pool 1 automatically became secondaries.</span></span> <span data-ttu-id="03796-245">이제 그 중 50%가 다시 주 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03796-245">Now 50% of them become primaries again.</span></span> 
* <span data-ttu-id="03796-246">풀 2의 크기를 원래 eDTU로 줄입니다(10).</span><span class="sxs-lookup"><span data-stu-id="03796-246">Reduce the size of pool 2 to the original eDTU (10).</span></span>
* <span data-ttu-id="03796-247">지역 B의 모든 복원된 평가판 데이터베이스를 읽기 전용으로 설정합니다(11).</span><span class="sxs-lookup"><span data-stu-id="03796-247">Set all restored trial databases in the region B to read-only (11).</span></span>
* <span data-ttu-id="03796-248">복구 이후에 변경된 평가판 DR 풀에 있는 각 데이터베이스에 대해 평가판 기본 풀에 있는 해당 데이터베이스의 이름을 변경하거나 삭제합니다(12).</span><span class="sxs-lookup"><span data-stu-id="03796-248">For each database in the trial DR pool that has changed since the recovery, rename or delete the corresponding database in the trial primary pool (12).</span></span> 
* <span data-ttu-id="03796-249">DR 풀에서 기본 풀로 업데이트된 데이터베이스를 복사합니다(13).</span><span class="sxs-lookup"><span data-stu-id="03796-249">Copy the updated databases from the DR pool to the primary pool (13).</span></span> 
* <span data-ttu-id="03796-250">DR 풀을 삭제합니다(14).</span><span class="sxs-lookup"><span data-stu-id="03796-250">Delete the DR pool (14)</span></span> 

<span data-ttu-id="03796-251">이 전략의 주요 **장점** 은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-251">The key **benefits** of this strategy are:</span></span>

* <span data-ttu-id="03796-252">중단이 테넌트 데이터베이스의 50% 미만에만 영향을 줄 수 있도록 하므로 유료 고객에게 가장 파격적인 SLA를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-252">It supports the most aggressive SLA for the paying customers because it ensures that an outage cannot impact more than 50% of the tenant databases.</span></span> 
* <span data-ttu-id="03796-253">복구 중에 평가판 DR 풀이 만들어지는 즉시 새 평가판이 차단 해제되도록 보장합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-253">It guarantees that the new trials are unblocked as soon as the trail DR pool is created during the recovery.</span></span> 
* <span data-ttu-id="03796-254">따라서 풀 1과 풀 2에서 보조 데이터베이스 중 50%가 주 데이터베이스보다 덜 활성화되도록 보장되므로 풀 용량을 더욱 효율적으로 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-254">It allows more efficient use of the pool capacity as 50% of secondary databases in pool 1 and pool 2 are guaranteed to be less active than the primary databases.</span></span>

<span data-ttu-id="03796-255">주요 **단점** 은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-255">The main **trade-offs** are:</span></span>

* <span data-ttu-id="03796-256">관리 데이터베이스에 대한 CRUD 작업에서 지역 A에 연결된 최종 사용자에 대한 대기 시간이 지역 B에 연결된 최종 사용자보다 낮습니다. 작업이 주 관리 데이터베이스에 대해 실행되기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="03796-256">The CRUD operations against the management databases have lower latency for the end users connected to region A than for the end users connected to region B as they are executed against the primary of the management databases.</span></span>
* <span data-ttu-id="03796-257">따라서 관리 데이터베이스에 대해 보다 복잡한 설계가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-257">It requires more complex design of the management database.</span></span> <span data-ttu-id="03796-258">예를 들어 각 테넌트 레코드는 장애 조치 및 장애 복구 중에 변경해야 하는 위치 태그를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-258">For example, each tenant record has a location tag that needs to be changed during failover and failback.</span></span>  
* <span data-ttu-id="03796-259">유료 고객은 지역 B에서 풀 업그레이드가 완료될 때까지 평소보다 성능 저하를 경험할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-259">The paying customers may experience lower performance than usual until the pool upgrade in region B is completed.</span></span> 

## <a name="summary"></a><span data-ttu-id="03796-260">요약</span><span class="sxs-lookup"><span data-stu-id="03796-260">Summary</span></span>
<span data-ttu-id="03796-261">이 문서는 SaaS ISV 다중 테넌트 응용 프로그램에서 사용하는 데이터베이스 계층에 대한 재해 복구 전략에 중점을 둡니다.</span><span class="sxs-lookup"><span data-stu-id="03796-261">This article focuses on the disaster recovery strategies for the database tier used by a SaaS ISV multi-tenant application.</span></span> <span data-ttu-id="03796-262">비즈니스 모델, 고객에게 제공할 SLA, 예산 제약 등 응용 프로그램의 요구에 따라 전략을 선택합니다. 각 설명된 전략에는 장단점이 나와 있어 합리적인 의사 결정이 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-262">The strategy you choose is based on the needs of the application, such as the business model, the SLA you want to offer to your customers, budget constraint etc. Each described strategy outlines the benefits and trade-off so you could make an informed decision.</span></span> <span data-ttu-id="03796-263">또한 특정 응용 프로그램은 다른 Azure 구성 요소를 포함할 가능성이 높습니다.</span><span class="sxs-lookup"><span data-stu-id="03796-263">Also, your specific application likely includes other Azure components.</span></span> <span data-ttu-id="03796-264">따라서 해당 비즈니스 연속성 지침을 검토하고 데이터베이스 계층의 복구를 오케스트레이션합니다.</span><span class="sxs-lookup"><span data-stu-id="03796-264">So you review their business continuity guidance and orchestrate the recovery of the database tier with them.</span></span> <span data-ttu-id="03796-265">Azure에서 데이터베이스 응용 프로그램 복구를 관리하는 방법에 대해 자세히 알아보려면 [재해 복구를 위한 클라우드 솔루션 설계](sql-database-designing-cloud-solutions-for-disaster-recovery.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03796-265">To learn more about managing recovery of database applications in Azure, refer to [Designing cloud solutions for disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>  

## <a name="next-steps"></a><span data-ttu-id="03796-266">다음 단계</span><span class="sxs-lookup"><span data-stu-id="03796-266">Next steps</span></span>
* <span data-ttu-id="03796-267">Azure SQL 데이터베이스 자동화 백업에 대한 자세한 내용은 [SQL 데이터베이스 자동화 백업](sql-database-automated-backups.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03796-267">To learn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="03796-268">비즈니스 연속성의 개요 및 시나리오를 보려면 [비즈니스 연속성 개요](sql-database-business-continuity.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03796-268">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="03796-269">복구를 위해 자동화된 백업을 사용하는 방법을 알아보려면 [서비스에서 시작한 백업에서 데이터베이스 복원](sql-database-recovery-using-backups.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03796-269">To learn about using automated backups for recovery, see [restore a database from the service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="03796-270">빠른 복구 옵션에 대해 알아보려면 [활성 지역 복제](sql-database-geo-replication-overview.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03796-270">To learn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>
* <span data-ttu-id="03796-271">보관을 위해 자동화된 백업을 사용하는 방법을 알아보려면 [데이터베이스 복사](sql-database-copy.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03796-271">To learn about using automated backups for archiving, see [database copy](sql-database-copy.md).</span></span>

