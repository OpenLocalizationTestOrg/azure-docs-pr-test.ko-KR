---
title: "Azure SQL 데이터베이스-aaaDesign 재해 복구 솔루션 | Microsoft Docs"
description: "자세한 내용은 방법 toodesign hello 오른쪽 장애 조치 패턴을 선택 하 여 재해 복구용 클라우드 솔루션입니다."
services: sql-database
documentationcenter: 
author: anosov1960
manager: jhubbard
editor: monicar
ms.assetid: 2db99057-0c79-4fb0-a7f1-d1c057ec787f
ms.service: sql-database
ms.custom: business continuity
ms.devlang: NA
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 04/07/2017
ms.author: sashan;carlrab
ms.openlocfilehash: 9d9eca7570c7a01c992d0b33d449721709b471c3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="disaster-recovery-strategies-for-applications-using-sql-database-elastic-pools"></a><span data-ttu-id="c4735-103">SQL Database 탄력적 풀을 사용하는 응용 프로그램에 대한 재해 복구 전략</span><span class="sxs-lookup"><span data-stu-id="c4735-103">Disaster recovery strategies for applications using SQL Database elastic pools</span></span>
<span data-ttu-id="c4735-104">Hello 년 동안 클라우드 서비스는 완벽 아닙니다 및 재해가 발생 우리 방법을 배웠습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-104">Over hello years we have learned that cloud services are not foolproof and catastrophic incidents happen.</span></span> <span data-ttu-id="c4735-105">SQL 데이터베이스는 이러한 인시던트 발생 하는 경우 응용 프로그램의 비즈니스 연속성 hello에 대 한 몇 가지 기능 tooprovide를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-105">SQL Database provides several capabilities tooprovide for hello business continuity of your application when these incidents occur.</span></span> <span data-ttu-id="c4735-106">[탄력적 풀](sql-database-elastic-pool.md) 단일 데이터베이스는 hello를 지원 하 고 동일한 유형의 재해 복구 기능이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-106">[Elastic pools](sql-database-elastic-pool.md) and single databases support hello same kind of disaster recovery capabilities.</span></span> <span data-ttu-id="c4735-107">이 문서에서는 이러한 SQL 데이터베이스 비즈니스 연속성 기능을 활용하는 탄력적 풀에 대한 몇 가지 DR 전략을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-107">This article describes several DR strategies for elastic pools that leverage these SQL Database business continuity features.</span></span>

<span data-ttu-id="c4735-108">이 문서에서는 hello 정식 SaaS ISV 응용 프로그램 패턴을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-108">This article uses hello following canonical SaaS ISV application pattern:</span></span>

<span data-ttu-id="c4735-109"><i>최신 클라우드 기반 웹 응용 프로그램에는 각 최종 사용자에 대 한 하나의 SQL 데이터베이스 프로 비전합니다. 많은 고객에 따라서 테 넌 트 데이터베이스 라고 하는 많은 데이터베이스를 사용 하는 ISV hello 합니다. Hello 테 넌 트 데이터베이스에서 일반적으로 예측할 수 없는 활동 패턴을 가지 므 hello ISV 상당한 시간 통한는 탄력적인 풀 toomake hello 데이터베이스 비용 가장 확실 한 메시지를 사용 합니다. hello 탄력적 풀 hello 사용자 활동에 급증 하는 경우 또한 hello 성능 관리를 간소화 합니다. 또한 toohello 테 넌 트 데이터베이스 hello 응용 프로그램 에서도 사용 하 여 여러 데이터베이스 toomanage 사용자 프로필, 보안, 사용 패턴 등을 수집 합니다. Hello 개별 테 넌 트의 가용성을 hello 응용 프로그램의 가용성을 전체적으로 영향을 주지 않습니다. 그러나 hello 관리 데이터베이스의 가용성과 성능을 hello 응용 프로그램의 함수에 대 한 중요 한 이며 hello 관리 데이터베이스가 오프 라인 hello 전체 응용 프로그램 경우 오프 라인 상태입니다.</i></span><span class="sxs-lookup"><span data-stu-id="c4735-109"><i>A modern cloud-based web application provisions one SQL database for each end user. hello ISV has many customers and therefore uses many databases, known as tenant databases. Because hello tenant databases typically have unpredictable activity patterns, hello ISV uses an elastic pool toomake hello database cost very predictable over extended periods of time. hello elastic pool also simplifies hello performance management when hello user activity spikes. In addition toohello tenant databases hello application also uses several databases toomanage user profiles, security, collect usage patterns etc. Availability of hello individual tenants does not impact hello application’s availability as whole. However, hello availability and performance of management databases is critical for hello application’s function and if hello management databases are offline hello entire application is offline.</i></span></span>  

<span data-ttu-id="c4735-110">이 문서에서는 다양 한 엄격한 가용성 요구 사항과 비용 중요 한 시작 응용 프로그램 tooones에서 시나리오를 다루는 DR 전략을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-110">This article discusses DR strategies covering a range of scenarios from cost sensitive startup applications tooones with stringent availability requirements.</span></span>

## <a name="scenario-1-cost-sensitive-startup"></a><span data-ttu-id="c4735-111">시나리오 1.</span><span class="sxs-lookup"><span data-stu-id="c4735-111">Scenario 1.</span></span> <span data-ttu-id="c4735-112">비용에 민감한 시작</span><span class="sxs-lookup"><span data-stu-id="c4735-112">Cost sensitive startup</span></span>
<span data-ttu-id="c4735-113"><i>신규 사업체이며 비용에 매우 민감합니다.  원하는 hello 응용 프로그램의 toosimplify 배포 및 관리 하 고 개별 고객에 대 한 제한 된 SLA를 할 수 있습니다. 하지만 전체는 오프 라인으로 tooensure hello 응용 프로그램을 하겠습니다.</i></span><span class="sxs-lookup"><span data-stu-id="c4735-113"><i>I am a startup business and am extremely cost sensitive.  I want toosimplify deployment and management of hello application and I can have a limited SLA for individual customers. But I want tooensure hello application as a whole is never offline.</i></span></span>

<span data-ttu-id="c4735-114">toosatisfy hello 단순성 요구 사항, hello 선택한 Azure 지역에서에서 탄력적인 풀을 하나에 모든 테 넌 트 데이터베이스를 배포 하 고 관리 데이터베이스를 단일 데이터베이스가 지리적 복제를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-114">toosatisfy hello simplicity requirement, deploy all tenant databases into one elastic pool in hello Azure region of your choice and deploy management databases as geo-replicated single databases.</span></span> <span data-ttu-id="c4735-115">테 넌 트의 hello 재해 복구를 위한 지리적 복원 추가 비용 없이 유사 하를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-115">For hello disaster recovery of tenants, use geo-restore, which comes at no additional cost.</span></span> <span data-ttu-id="c4735-116">tooensure hello 가용성 관리 데이터베이스에 지리적 복제에 hello 자동 장애 조치 그룹 (에서-미리 보기) (1 단계)를 사용 하 여 tooanother 영역입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-116">tooensure hello availability of hello management databases, geo-replicate them tooanother region using an auto-failover group (in-preview) (step 1).</span></span> <span data-ttu-id="c4735-117">이 시나리오에서는 hello 재해 복구 구성의 지속적인 비용 hello 같은 toohello hello 보조 데이터베이스의 총 비용이입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-117">hello ongoing cost of hello disaster recovery configuration in this scenario is equal toohello total cost of hello secondary databases.</span></span> <span data-ttu-id="c4735-118">이 구성은 hello 다음 다이어그램에 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-118">This configuration is illustrated on hello next diagram.</span></span>

![그림 1](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-1.png)

<span data-ttu-id="c4735-120">응용 프로그램을 온라인 hello 복구 단계 toobring hello 기본 지역에서 중단이 발생할 경우 hello 다음 다이어그램에 설명 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-120">If an outage occurs in hello primary region, hello recovery steps toobring your application online are illustrated by hello next diagram.</span></span>

* <span data-ttu-id="c4735-121">그룹을 장애 조치 hello hello 관리 데이터베이스 toohello DR 영역의 자동 장애 조치를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-121">hello failover group initiates automatic failover of hello management database toohello DR region.</span></span> <span data-ttu-id="c4735-122">hello 응용 프로그램은 자동으로 다시 연결 된 toohello 새로운 기본 및 모든 새 계정 및 테 넌 트 데이터베이스 hello DR 지역에 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-122">hello application is automatically reconnected toohello new primary and all new accounts and tenant databases are created in hello DR region.</span></span> <span data-ttu-id="c4735-123">hello 기존 고객 일시적으로 사용할 수 없는 데이터를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-123">hello existing customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="c4735-124">Hello로 hello 탄력적 풀을 만들 동일한 구성으로 hello 원래 풀 (2).</span><span class="sxs-lookup"><span data-stu-id="c4735-124">Create hello elastic pool with hello same configuration as hello original pool (2).</span></span>
* <span data-ttu-id="c4735-125">(3) hello 테 넌 트 데이터베이스의 지역에서 복원은 toocreate 복사본을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-125">Use geo-restore toocreate copies of hello tenant databases (3).</span></span> <span data-ttu-id="c4735-126">Hello 최종 사용자 연결을 통해서도 hello 개별 복원을 트리거하는 것이 좋습니다 하거나 일부 다른 응용 프로그램 관련 우선 순위 체계를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-126">You can consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>


<span data-ttu-id="c4735-127">이 시점에서 응용 프로그램 다시 온라인 상태로 hello DR 영역의 않으며 일부 고객 데이터에 액세스 하는 경우 지연이 발생할입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-127">At this point your application is back online in hello DR region, but some customers experience delay when accessing their data.</span></span>

![그림 2](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-2.png)

<span data-ttu-id="c4735-129">Hello 중단 임시 되었으면 있기 hello DR 영역의 모든 hello 데이터베이스 복원 완료 하기 전에 해당 hello 기본 지역의 Azure에서 복구 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-129">If hello outage was temporary, it is possible that hello primary region is recovered by Azure before all hello database restores are complete in hello DR region.</span></span> <span data-ttu-id="c4735-130">이 경우 기본 지역 이동 hello 응용 프로그램 백 toohello를 오케스트레이션 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-130">In this case, orchestrate moving hello application back toohello primary region.</span></span> <span data-ttu-id="c4735-131">hello 프로세스는 hello 다음 다이어그램에 표시 된 hello 단계 걸립니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-131">hello process takes hello steps illustrated on hello next diagram.</span></span>

* <span data-ttu-id="c4735-132">미해결된 모든 지역 복원 요청을 취소합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-132">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="c4735-133">장애 조치 hello 관리 데이터베이스 toohello 기본 지역 (5).</span><span class="sxs-lookup"><span data-stu-id="c4735-133">Fail over hello management databases toohello primary region (5).</span></span> <span data-ttu-id="c4735-134">Hello 지역의 복구 후 hello 이전 보관 자동으로 되 고 보조 복제본 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-134">After hello region’s recovery, hello old primaries have automatically become secondaries.</span></span> <span data-ttu-id="c4735-135">이제 역할을 다시 전환합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-135">Now they switch roles again.</span></span> 
* <span data-ttu-id="c4735-136">Hello 응용 프로그램의 연결 문자열 toopoint 백 toohello 주 영역을 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-136">Change hello application's connection string toopoint back toohello primary region.</span></span> <span data-ttu-id="c4735-137">이제 모든 새 계정 및 테 넌 트 데이터베이스 hello 기본 지역에 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-137">Now all new accounts and tenant databases are created in hello primary region.</span></span> <span data-ttu-id="c4735-138">일부 기존 고객은 자신의 데이터를 임시로 사용할 수 없음을 확인하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-138">Some existing customers see their data temporarily unavailable.</span></span>   
* <span data-ttu-id="c4735-139">Hello DR 풀 tooread 전용 tooensure hello DR 영역 (6)에서 수정할 수 없는에 모든 데이터베이스를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-139">Set all databases in hello DR pool tooread-only tooensure they cannot be modified in hello DR region (6).</span></span> 
* <span data-ttu-id="c4735-140">각 데이터베이스에에서 대해 hello hello 복구 이후 변경 된 DR 풀, 바꾸거나 hello hello 기본 풀 (7)에서 해당 데이터베이스를 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-140">For each database in hello DR pool that has changed since hello recovery, rename or delete hello corresponding databases in hello primary pool (7).</span></span> 
* <span data-ttu-id="c4735-141">복사 hello hello DR 풀 toohello 기본 풀 (8)에서 데이터베이스를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-141">Copy hello updated databases from hello DR pool toohello primary pool (8).</span></span> 
* <span data-ttu-id="c4735-142">Hello DR 풀 (9)를 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-142">Delete hello DR pool (9)</span></span>

<span data-ttu-id="c4735-143">이 시점에서 응용 프로그램은 테 넌 트의에서 모든 데이터베이스를 사용할 수 있는 기본 풀 hello와 기본 지역의 hello 온라인입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-143">At this point your application is online in hello primary region with all tenant databases available in hello primary pool.</span></span>

![그림 3](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-3.png)

<span data-ttu-id="c4735-145">hello 키 **활용** 이 전략은 데이터 계층 중복성을 위해 지속적으로 낮은 비용입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-145">hello key **benefit** of this strategy is low ongoing cost for data tier redundancy.</span></span> <span data-ttu-id="c4735-146">백업은은 hello 추가 비용 없이 없는 응용 프로그램 다시 쓰기와 SQL 데이터베이스 서비스에서 자동으로 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-146">Backups are taken automatically by hello SQL Database service with no application rewrite and at no additional cost.</span></span>  <span data-ttu-id="c4735-147">hello 비용이 hello 탄력적 데이터베이스가 복원 되는 경우에 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-147">hello cost is incurred only when hello elastic databases are restored.</span></span> <span data-ttu-id="c4735-148">hello **절충** 모든 테 넌 트 데이터베이스의 완전 복구 hello 상당한 시간이 한다는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-148">hello **trade-off** is that hello complete recovery of all tenant databases takes significant time.</span></span> <span data-ttu-id="c4735-149">hello 시간의 길이에 따라 달라 집니다 hello DR 시작 하는 복원의 총 수 hello 지역 및 데이터베이스를 테 넌 트 hello의 전체 크기입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-149">hello length of time depends on hello total number of restores you initiate in hello DR region and overall size of hello tenant databases.</span></span> <span data-ttu-id="c4735-150">경쟁 하는 다른 일부 테 넌 트의 복원 우선 순위를 지정할 경우에 모든 hello로에서 시작 되는 다른 복원 hello 동일한 지역 hello 서비스 arbitrates 및 toominimize 나와 있는 대로 hello 기존 고객의 데이터베이스에 대 한 전반적인 영향 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-150">Even if you prioritize some tenants' restores over others, you are competing with all hello other restores that are initiated in hello same region as hello service arbitrates and throttles toominimize hello overall impact on hello existing customers' databases.</span></span> <span data-ttu-id="c4735-151">또한 hello 테 넌 트 데이터베이스의 복구 hello hello hello DR 지역에 새 탄력적 풀을 만들 때까지 시작할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-151">In addition, hello recovery of hello tenant databases cannot start until hello new elastic pool in hello DR region is created.</span></span>

## <a name="scenario-2-mature-application-with-tiered-service"></a><span data-ttu-id="c4735-152">시나리오 2.</span><span class="sxs-lookup"><span data-stu-id="c4735-152">Scenario 2.</span></span> <span data-ttu-id="c4735-153">계층화된 서비스를 포함하는 완성도 높은 응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="c4735-153">Mature application with tiered service</span></span>
<span data-ttu-id="c4735-154"><i>계층화된 서비스 제품 및 평가판 고객/유료 고객을 위한 다양한 SLA를 포함하는 완성도 높은 SaaS 응용 프로그램입니다. Hello 평가판 고객에 대 한 가능한 한 비용 tooreduce hello가 있습니다. 평가판 고객 가동 중지 시간 필요로 하지만 tooreduce 발생할 가능성을 하겠습니다. 유료 고객 hello에 대 한 가동 중지 시간은 비행 위험 합니다. 유료 고객 수 tooaccess 항상 내용이 toomake 원하는 하므로 데이터입니다.</i></span><span class="sxs-lookup"><span data-stu-id="c4735-154"><i>I am a mature SaaS application with tiered service offers and different SLAs for trial customers and for paying customers. For hello trial customers, I have tooreduce hello cost as much as possible. Trial customers can take downtime but I want tooreduce its likelihood. For hello paying customers, any downtime is a flight risk. So I want toomake sure that paying customers are always able tooaccess their data.</i></span></span> 

<span data-ttu-id="c4735-155">이 시나리오에서는 별도 hello에서 평가용 테 넌 트 toosupport를 별도 탄력적 풀으로 관리 하 여 테 넌 트 지불 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-155">toosupport this scenario, separate hello trial tenants from paid tenants by putting them into separate elastic pools.</span></span> <span data-ttu-id="c4735-156">hello 평가판 고객 테 넌 트 및 복구 시간이 더 길어집니다와 낮은 SLA 당 낮은 eDTU를 해야합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-156">hello trial customers have lower eDTU per tenant and lower SLA with a longer recovery time.</span></span> <span data-ttu-id="c4735-157">hello 유료 고객은 테 넌 트와 더 높은 SLA 당 더 높은 eDTU와 풀에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-157">hello paying customers are in a pool with higher eDTU per tenant and a higher SLA.</span></span> <span data-ttu-id="c4735-158">tooguarantee hello 가장 낮은 복구 시간 hello 유료 고객의 테 넌 트 데이터베이스 지리적으로 복제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-158">tooguarantee hello lowest recovery time, hello paying customers' tenant databases are geo-replicated.</span></span> <span data-ttu-id="c4735-159">이 구성은 hello 다음 다이어그램에 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-159">This configuration is illustrated on hello next diagram.</span></span> 

![그림 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-4.png)

<span data-ttu-id="c4735-161">Hello 첫 번째 시나리오와 마찬가지로 hello 관리 데이터베이스는 매우 활성 하므로 (1)에 대 한 단일 지리적으로 복제 된 데이터베이스를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-161">As in hello first scenario, hello management databases are quite active so you use a single geo-replicated database for it (1).</span></span> <span data-ttu-id="c4735-162">이렇게 하면 새 고객 구독, 프로필 업데이트 및 기타 관리 작업에 대 한 예측 가능한 성능을 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-162">This ensures hello predictable performance for new customer subscriptions, profile updates, and other management operations.</span></span> <span data-ttu-id="c4735-163">hello는 hello 관리 데이터베이스의 hello 됨으로 거주 지역의 hello 기본 지역 이며는 hello 관리 데이터베이스의 보조 복제본 hello 거주 하는 hello 영역이 DR hello 영역입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-163">hello region in which hello primaries of hello management databases reside is hello primary region and hello region in which hello secondaries of hello management databases reside is hello DR region.</span></span>

<span data-ttu-id="c4735-164">hello 유료 고객의 테 넌 트 데이터베이스 활성 데이터베이스가 있는 hello "지불" hello 기본 지역에서 프로 비전 하는 풀에에서 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-164">hello paying customers’ tenant databases have active databases in hello “paid” pool provisioned in hello primary region.</span></span> <span data-ttu-id="c4735-165">Hello hello DR 지역에 이름과 같은 이름을 사용 하 여 보조 풀 프로 비전 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-165">Provision a secondary pool with hello same name in hello DR region.</span></span> <span data-ttu-id="c4735-166">각 테 넌 트 toohello 지리적 복제 보조 풀 (2)입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-166">Each tenant is geo-replicated toohello secondary pool (2).</span></span> <span data-ttu-id="c4735-167">이렇게 하면 장애 조치를 사용하여 모든 테넌트 데이터베이스를 신속하게 복구할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-167">This enables quick recovery of all tenant databases using failover.</span></span> 

<span data-ttu-id="c4735-168">응용 프로그램을 온라인 hello 복구 단계 toobring hello 기본 지역에서 중단이 발생할 경우 hello 다음 다이어그램에 설명 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-168">If an outage occurs in hello primary region, hello recovery steps toobring your application online are illustrated in hello next diagram:</span></span>

![그림 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-5.png)

* <span data-ttu-id="c4735-170">즉시 hello 관리 데이터베이스 toohello DR 영역 (3)에 실패 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-170">Immediately fail over hello management databases toohello DR region (3).</span></span>
* <span data-ttu-id="c4735-171">Hello 응용 프로그램의 연결 문자열 toopoint toohello DR 영역을 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-171">Change hello application’s connection string toopoint toohello DR region.</span></span> <span data-ttu-id="c4735-172">이제 모든 새 계정 및 테 넌 트 데이터베이스 hello DR 지역에 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-172">Now all new accounts and tenant databases are created in hello DR region.</span></span> <span data-ttu-id="c4735-173">hello 기존 평가판 고객 일시적으로 사용할 수 없는 데이터를 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="c4735-173">hello existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="c4735-174">장애 조치 hello DR 영역 tooimmediately에서 테 넌 트의 데이터베이스 toohello 풀 유료 hello 가능성 (4)을 복원 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-174">Fail over hello paid tenant's databases toohello pool in hello DR region tooimmediately restore their availability (4).</span></span> <span data-ttu-id="c4735-175">Hello 장애 조치 한 빠른 메타 데이터 수준 변경 이므로 여기서 hello 개별 장애 조치 hello 최종 사용자 연결에서 필요에 따라 트리거되는 최적화를 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-175">Since hello failover is a quick metadata level change, consider an optimization where hello individual failovers are triggered on demand by hello end-user connections.</span></span> 
* <span data-ttu-id="c4735-176">Hello만 필요한 hello 용량 tooprocess hello 변경 하는 동안 기록 된 보조 데이터베이스는 보조 데이터베이스는 즉시 hello 풀 용량 늘리기 때문에 보조 풀 eDTU 크기가 hello 기본 보다 낮은 경우 이제 tooaccommodate hello 전체 모든 테 넌 트 (5)의 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-176">If your secondary pool eDTU size was lower than hello primary because hello secondary databases only required hello capacity tooprocess hello change logs while they were secondaries, immediately increase hello pool capacity now tooaccommodate hello full workload of all tenants (5).</span></span> 
* <span data-ttu-id="c4735-177">동일한 이름을 지정 하 고 동일한 hello hello로 hello 새로운 탄력적 풀을 만듭니다 (6) hello 평가판 고객의 데이터베이스에 대 한 hello DR 지역에 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-177">Create hello new elastic pool with hello same name and hello same configuration in hello DR region for hello trial customers' databases (6).</span></span> 
* <span data-ttu-id="c4735-178">Hello 평가판 고객의 풀을 만든 후 (7) hello 새 풀으로 지역에서 복원은 toorestore hello 개별 평가판 테 넌 트 데이터베이스를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-178">Once hello trial customers’ pool is created, use geo-restore toorestore hello individual trial tenant databases into hello new pool (7).</span></span> <span data-ttu-id="c4735-179">Hello 최종 사용자 연결을 통해서도 hello 개별 복원을 트리거하는 것이 좋습니다 하거나 일부 다른 응용 프로그램 관련 우선 순위 체계를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-179">Consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>

<span data-ttu-id="c4735-180">이 시점에서 응용 프로그램은 hello DR 영역에 다시 온라인 상태로 전환 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-180">At this point your application is back online in hello DR region.</span></span> <span data-ttu-id="c4735-181">모든 유료 고객에 대 한 액세스 권한이 tootheir 데이터 hello 평가판 고객 데이터에 액세스 하는 경우 지연 시간을 경험 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-181">All paying customers have access tootheir data while hello trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="c4735-182">Azure에서 기본 지역 hello를 복구 하는 경우 *후* hello 응용 프로그램 계속 해당 지역에서 hello 응용 프로그램을 실행할 수 있습니다 hello DR 지역에서 복원 하거나 toofail 백 toohello 기본 지역을 결정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-182">When hello primary region is recovered by Azure *after* you have restored hello application in hello DR region you can continue running hello application in that region or you can decide toofail back toohello primary region.</span></span> <span data-ttu-id="c4735-183">기본 지역 hello를 복구 하는 경우 *전에* hello 장애 조치 프로세스가 완료 되 면 바로 다시 실패 한 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-183">If hello primary region is recovered *before* hello failover process is completed, consider failing back right away.</span></span> <span data-ttu-id="c4735-184">hello 장애 복구 hello 다음 다이어그램에 표시 된 hello 단계를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-184">hello failback takes hello steps illustrated in hello next diagram:</span></span> 

![그림 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-6.png)

* <span data-ttu-id="c4735-186">미해결된 모든 지역 복원 요청을 취소합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-186">Cancel all outstanding geo-restore requests.</span></span>   
* <span data-ttu-id="c4735-187">장애 조치 hello 관리 데이터베이스 (8).</span><span class="sxs-lookup"><span data-stu-id="c4735-187">Fail over hello management databases (8).</span></span> <span data-ttu-id="c4735-188">Hello 지역의 복구 후 hello 기존 기본 항목이 자동으로 항목이 hello 보조 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-188">After hello region’s recovery, hello old primary automatically become hello secondary.</span></span> <span data-ttu-id="c4735-189">이제 데이터베이스가 다시 기본 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-189">Now it becomes hello primary again.</span></span>  
* <span data-ttu-id="c4735-190">장애 조치 (9) 테 넌 트 데이터베이스를 유료 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-190">Fail over hello paid tenant databases (9).</span></span> <span data-ttu-id="c4735-191">마찬가지로, hello 지역의 복구 후 hello 이전 보관 자동으로 상태가 hello 보조 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-191">Similarly, after hello region’s recovery, hello old primaries automatically become hello secondaries.</span></span> <span data-ttu-id="c4735-192">이제 다시 되 hello 보관 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-192">Now they become hello primaries again.</span></span> 
* <span data-ttu-id="c4735-193">집합 hello hello DR 지역 tooread 전용 (10)에서 변경 된 평가판 데이터베이스를 복원 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-193">Set hello restored trial databases that have changed in hello DR region tooread-only (10).</span></span>
* <span data-ttu-id="c4735-194">Hello 복구 이후 변경 된 hello 평가판 고객 DR 풀에서 각 데이터베이스에 대해 이름 바꾸기 또는 hello hello 평가판 고객 기본 풀 (11)에 해당 데이터베이스를 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-194">For each database in hello trial customers DR pool that changed since hello recovery, rename or delete hello corresponding database in hello trial customers primary pool (11).</span></span> 
* <span data-ttu-id="c4735-195">복사 hello hello DR 풀 toohello 기본 풀 (12)에서 데이터베이스를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-195">Copy hello updated databases from hello DR pool toohello primary pool (12).</span></span> 
* <span data-ttu-id="c4735-196">Hello DR 풀 (13)를 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-196">Delete hello DR pool (13)</span></span> 

> [!NOTE]
> <span data-ttu-id="c4735-197">hello 장애 조치 작업이 비동기 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-197">hello failover operation is asynchronous.</span></span> <span data-ttu-id="c4735-198">최소 20 데이터베이스의 일괄 처리로 hello 테 넌 트 데이터베이스 장애 조치 명령을 실행 하면 반드시 toominimize hello 복구 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-198">toominimize hello recovery time it is important that you execute hello tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 
> 

<span data-ttu-id="c4735-199">hello 키 **활용** 이 전략의 유료 고객 hello에 대 한 가장 높은 SLA hello 제공 한다는 점입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-199">hello key **benefit** of this strategy is that it provides hello highest SLA for hello paying customers.</span></span> <span data-ttu-id="c4735-200">Hello 평가판 DR 풀을 만들 때 즉시 hello 새 평가판 차단이 해제 되 보장 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-200">It also guarantees that hello new trials are unblocked as soon as hello trial DR pool is created.</span></span> <span data-ttu-id="c4735-201">hello **절충** 고객이 지불이 설치 프로그램에 대 한 보조 DR 풀 hello hello 비용이 hello 테 넌 트 데이터베이스의 hello 총 비용 증가 한다는 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-201">hello **trade-off** is that this setup increases hello total cost of hello tenant databases by hello cost of hello secondary DR pool for paid customers.</span></span> <span data-ttu-id="c4735-202">또한 hello 보조 풀 크기가 다른 경우 hello 유료 고객 성능이 낮은 장애 조치 후 hello hello DR 영역의 풀 업그레이드가 완료 될 때까지 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-202">In addition, if hello secondary pool has a different size, hello paying customers experience lower performance after failover until hello pool upgrade in hello DR region is completed.</span></span> 

## <a name="scenario-3-geographically-distributed-application-with-tiered-service"></a><span data-ttu-id="c4735-203">시나리오 3.</span><span class="sxs-lookup"><span data-stu-id="c4735-203">Scenario 3.</span></span> <span data-ttu-id="c4735-204">계층화된 서비스를 포함하는 지리적으로 분산된 응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="c4735-204">Geographically distributed application with tiered service</span></span>
<span data-ttu-id="c4735-205"><i>계층화된 서비스 제품을 포함한 완성도 높은 SaaS 응용 프로그램이 있습니다. 고객을 지불 하는 매우 공격적 SLA toomy toooffer를 원하고 잠깐 중단 된 고객 불만족 발생할 수 있으므로 중단이 발생할 때 hello 위험 영향을 최소화 합니다. 것이 중요 해당 hello 유료 고객 데이터에 항상 액세스할 수 있습니다. hello 평가판 수 있고 hello 평가판 기간 동안 SLA는 제공 되지 않습니다.</i></span><span class="sxs-lookup"><span data-stu-id="c4735-205"><i>I have a mature SaaS application with tiered service offers. I want toooffer a very aggressive SLA toomy paid customers and minimize hello risk of impact when outages occur because even brief interruption can cause customer dissatisfaction. It is critical that hello paying customers can always access their data. hello trials are free and an SLA is not offered during hello trial period. </i></span></span> 

<span data-ttu-id="c4735-206">toosupport이이 시나리오를 사용 하 여 세 가지 별도 탄력적 풀이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-206">toosupport this scenario, use three separate elastic pools.</span></span> <span data-ttu-id="c4735-207">두 개의 서로 다른 지역 toocontain hello 데이터베이스당 높은 Edtu와 두 개의 동일한 크기 풀 프로 비전 지불 고객의 테 넌 트 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-207">Provision two equal size pools with high eDTUs per database in two different regions toocontain hello paid customers' tenant databases.</span></span> <span data-ttu-id="c4735-208">hello hello 평가용 테 넌 트를 포함 하는 세 번째 풀 데이터베이스당 Edtu를 더 낮은 수 있으며 hello 두 지역 중 하나에서 프로 비전 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-208">hello third pool containing hello trial tenants can have lower eDTUs per database and be provisioned in one of hello two regions.</span></span>

<span data-ttu-id="c4735-209">tooguarantee hello 가장 낮은 복구 시간 동안 작동 중단을 hello 유료 고객의 테 넌 트 데이터베이스 hello 각 hello 두 지역에서 주 데이터베이스의 50%로 지리적으로 복제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-209">tooguarantee hello lowest recovery time during outages, hello paying customers' tenant databases are geo-replicated with 50% of hello primary databases in each of hello two regions.</span></span> <span data-ttu-id="c4735-210">마찬가지로, 각 지역에는 hello 보조 데이터베이스의 50%입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-210">Similarly, each region has 50% of hello secondary databases.</span></span> <span data-ttu-id="c4735-211">이러한 방식으로 영역 오프 라인인 경우 hello 유료 고객의 데이터베이스 중 50%만 영향을 받는 및 toofail에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-211">This way, if a region is offline, only 50% of hello paid customers' databases are impacted and have toofail over.</span></span> <span data-ttu-id="c4735-212">hello 다른 데이터베이스 그대로 유지 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-212">hello other databases remain intact.</span></span> <span data-ttu-id="c4735-213">이 구성은 hello 다음 다이어그램에서에서 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-213">This configuration is illustrated in hello following diagram:</span></span>

![그림 4](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-7.png)

<span data-ttu-id="c4735-215">Hello 관리 데이터베이스는 매우 활성 hello 이전 시나리오에 있으므로 데이터베이스를 구성에 단일 지리적 복제 (1).</span><span class="sxs-lookup"><span data-stu-id="c4735-215">As in hello previous scenarios, hello management databases are quite active so configure them as single geo-replicated databases (1).</span></span> <span data-ttu-id="c4735-216">이렇게 하면 hello 새로운 고객 구독, 프로필 업데이트 및 기타 관리 작업의 예측 가능한 성능을 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-216">This ensures hello predictable performance of hello new customer subscriptions, profile updates and other management operations.</span></span> <span data-ttu-id="c4735-217">영역 A hello 관리 데이터베이스에 대 한 기본 지역 hello 이며 hello 영역 B hello 관리 데이터베이스의 복구에 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-217">Region A is hello primary region for hello management databases and hello region B is used for recovery of hello management databases.</span></span>

<span data-ttu-id="c4735-218">기본 및 보조 영역 A와 B (2) 지역 간에 분할 이지만 hello 유료 고객의 테 넌 트 데이터베이스 지리적 복제는 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-218">hello paying customers’ tenant databases are also geo-replicated but with primaries and secondaries split between region A and region B (2).</span></span> <span data-ttu-id="c4735-219">이러한 방식으로 hello 테 넌 트 주 데이터베이스 hello 중단으로 영향을 장애 조치할 수 toohello 다른 지역을 사용할 수 있게 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-219">This way, hello tenant primary databases impacted by hello outage can fail over toohello other region and become available.</span></span> <span data-ttu-id="c4735-220">hello 테 넌 트 데이터베이스의 절반은 영향을 받지 전혀 다른 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-220">hello other half of hello tenant databases are not be impacted at all.</span></span> 

<span data-ttu-id="c4735-221">1. 지역에서 중단이 발생할 경우 hello 다음 다이어그램에서는 hello 복구 단계 tootake</span><span class="sxs-lookup"><span data-stu-id="c4735-221">hello next diagram illustrates hello recovery steps tootake if  an outage occurs in region A.</span></span>

![그림 5](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-8.png)

* <span data-ttu-id="c4735-223">Hello 관리 데이터베이스 tooregion B (3)를 통해 즉시 실패 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-223">Immediately fail over hello management databases tooregion B (3).</span></span>
* <span data-ttu-id="c4735-224">지역 B. 수정 hello 관리 데이터베이스 toomake hello 새 계정 및 테 넌 트 데이터베이스 영역 B에서에서 생성 되 고 기존 테 넌 트 데이터베이스 hello는 찾을 수 있는지 hello 응용 프로그램의 연결 문자열 toopoint toohello 관리 데이터베이스를 변경으로 네.</span><span class="sxs-lookup"><span data-stu-id="c4735-224">Change hello application’s connection string toopoint toohello management databases in region B. Modify hello management databases toomake sure hello new accounts and tenant databases are created in region B and hello existing tenant databases are found there as well.</span></span> <span data-ttu-id="c4735-225">hello 기존 평가판 고객 일시적으로 사용할 수 없는 데이터를 참조 하십시오.</span><span class="sxs-lookup"><span data-stu-id="c4735-225">hello existing trial customers see their data temporarily unavailable.</span></span>
* <span data-ttu-id="c4735-226">장애 조치 영역 B tooimmediately 복원에서 유료 hello 테 넌 트가 데이터베이스 toopool 2 가능성 (4).</span><span class="sxs-lookup"><span data-stu-id="c4735-226">Fail over hello paid tenant's databases toopool 2 in region B tooimmediately restore their availability (4).</span></span> <span data-ttu-id="c4735-227">Hello 장애 조치 한 빠른 메타 데이터 수준 변경 이므로 여기서 hello 개별 장애 조치 hello 최종 사용자 연결에서 필요에 따라 트리거되는 최적화를 고려할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-227">Since hello failover is a quick metadata level change, you may consider an optimization where hello individual failovers are triggered on demand by hello end-user connections.</span></span> 
* <span data-ttu-id="c4735-228">이후 2 풀 기본 데이터베이스만 포함 되어, 이제 hello hello 풀 증가 하기 때문에서에 전체 작업 하 고 (5) eDTU 크기를 늘리거나 즉시 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-228">Since now pool 2 contains only primary databases, hello total workload in hello pool increases and can immediately increase its eDTU size (5).</span></span> 
* <span data-ttu-id="c4735-229">동일한 이름을 지정 하 고 동일한 hello hello로 hello 새로운 탄력적 풀을 만듭니다 (6) hello 평가판 고객의 데이터베이스에 대 한 hello 영역 B에서에서 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-229">Create hello new elastic pool with hello same name and hello same configuration in hello region B for hello trial customers' databases (6).</span></span> 
* <span data-ttu-id="c4735-230">한 번 hello 풀이 hello 풀 (7)로 사용 하 여 지역에서 복원은 toorestore hello 개별 평가판 테 넌 트 데이터베이스를 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-230">Once hello pool is created use geo-restore toorestore hello individual trial tenant database into hello pool (7).</span></span> <span data-ttu-id="c4735-231">Hello 최종 사용자 연결을 통해서도 hello 개별 복원을 트리거하는 것이 좋습니다 하거나 일부 다른 응용 프로그램 관련 우선 순위 체계를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-231">You can consider triggering hello individual restores by hello end-user connections or use some other application-specific priority scheme.</span></span>

> [!NOTE]
> <span data-ttu-id="c4735-232">hello 장애 조치 작업이 비동기 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-232">hello failover operation is asynchronous.</span></span> <span data-ttu-id="c4735-233">toominimize hello 복구 시간을 반드시 최소 20 데이터베이스의 일괄 처리로 hello 테 넌 트 데이터베이스 장애 조치 명령은 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-233">toominimize hello recovery time, it is important that you execute hello tenant databases' failover command in batches of at least 20 databases.</span></span> 
> 

<span data-ttu-id="c4735-234">2. 지역에 온라인으로 다시 응용 프로그램은 시점에서 모든 유료 고객에 대 한 액세스 권한이 tootheir 데이터 hello 평가판 고객 데이터에 액세스 하는 경우 지연 시간을 경험 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-234">At this point your application is back online in region B. All paying customers have access tootheir data while hello trial customers experience delay when accessing their data.</span></span>

<span data-ttu-id="c4735-235">평가판 고객이 나 장애 복구 toousing hello 평가판 고객 풀 1. 지역에 대 한 toouse 영역 B를 하려는 경우 toodecide 필요한 영역 A가 복구 될 때 한 조건만 hello %hello 복구 이후 수정 평가판 테 넌 트 데이터베이스 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-235">When region A is recovered you need toodecide if you want toouse region B for trial customers or failback toousing hello trial customers pool in region A. One criteria could be hello % of trial tenant databases modified since hello recovery.</span></span> <span data-ttu-id="c4735-236">해당 결정에 관계 없이 두 개의 풀 간의 toore 균형 유료 hello 테 넌 트가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-236">Regardless of that decision, you need toore-balance hello paid tenants between two pools.</span></span> <span data-ttu-id="c4735-237">hello 다음 다이어그램 hello 평가판 테 넌 트 데이터베이스 백 tooregion 1. 장애 조치 하는 경우 hello 프로세스를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-237">hello next diagram illustrates hello process when hello trial tenant databases fail back tooregion A.</span></span>  

![그림 6](./media/sql-database-disaster-recovery-strategies-for-applications-with-elastic-pool/diagram-9.png)

* <span data-ttu-id="c4735-239">모든 처리 중인 지역에서 복원 요청 tootrial DR 풀을 취소 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-239">Cancel all outstanding geo-restore requests tootrial DR pool.</span></span>   
* <span data-ttu-id="c4735-240">장애 조치 hello 관리 데이터베이스 (8).</span><span class="sxs-lookup"><span data-stu-id="c4735-240">Fail over hello management database (8).</span></span> <span data-ttu-id="c4735-241">Hello 이전 주에 hello 지역의 복구 후 자동으로 보조 hello 알게 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-241">After hello region’s recovery, hello old primary automatically became hello secondary.</span></span> <span data-ttu-id="c4735-242">이제 데이터베이스가 다시 기본 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-242">Now it becomes hello primary again.</span></span>  
* <span data-ttu-id="c4735-243">유료 테 넌 트 데이터베이스를 실패 1 및 초기화 백 toopool 장애 조치 tootheir 보조 복제본 (9)를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-243">Select which paid tenant databases fail back toopool 1 and initiate failover tootheir secondaries (9).</span></span> <span data-ttu-id="c4735-244">Hello 지역의 복구 후 자동으로 1 풀의 모든 데이터베이스를 보조 복제본에 있게 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-244">After hello region’s recovery, all databases in pool 1 automatically became secondaries.</span></span> <span data-ttu-id="c4735-245">이제 그 중 50%가 다시 주 데이터베이스가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-245">Now 50% of them become primaries again.</span></span> 
* <span data-ttu-id="c4735-246">풀 2 toohello 원래 eDTU (10)의 hello 크기를 줄입니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-246">Reduce hello size of pool 2 toohello original eDTU (10).</span></span>
* <span data-ttu-id="c4735-247">모든 집합 hello 영역 B tooread 전용 (11)에 평가판 데이터베이스를 복원 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-247">Set all restored trial databases in hello region B tooread-only (11).</span></span>
* <span data-ttu-id="c4735-248">각 데이터베이스에에서 대해 hello 복구 이후 변경 된 hello 평가판 DR 풀, 바꾸거나 hello hello 평가판 기본 풀 (12)에 해당 데이터베이스를 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-248">For each database in hello trial DR pool that has changed since hello recovery, rename or delete hello corresponding database in hello trial primary pool (12).</span></span> 
* <span data-ttu-id="c4735-249">복사 hello hello DR 풀 toohello 기본 풀 (13)에서 데이터베이스를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-249">Copy hello updated databases from hello DR pool toohello primary pool (13).</span></span> 
* <span data-ttu-id="c4735-250">Hello DR 풀 (14)를 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-250">Delete hello DR pool (14)</span></span> 

<span data-ttu-id="c4735-251">hello 키 **혜택** 이 전략의 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-251">hello key **benefits** of this strategy are:</span></span>

* <span data-ttu-id="c4735-252">가동 중단 hello 테 넌 트 데이터베이스의 50% 이상의 영향을 줄 수 있기 때문에 지불 고객 hello에 대 한 hello 가장 엄격한 SLA를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-252">It supports hello most aggressive SLA for hello paying customers because it ensures that an outage cannot impact more than 50% of hello tenant databases.</span></span> 
* <span data-ttu-id="c4735-253">Hello 복구 하는 동안 hello 내역 DR 풀을 만들 때 즉시 hello 새 평가판 차단이 해제 되 보장 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-253">It guarantees that hello new trials are unblocked as soon as hello trail DR pool is created during hello recovery.</span></span> 
* <span data-ttu-id="c4735-254">풀 1의에서 보조 데이터베이스의 50%로 hello 풀 용량을 더욱 효율적으로 사용할 수 있습니다 및 2 풀 hello 주 데이터베이스 보다 덜 활성화 toobe를 보장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-254">It allows more efficient use of hello pool capacity as 50% of secondary databases in pool 1 and pool 2 are guaranteed toobe less active than hello primary databases.</span></span>

<span data-ttu-id="c4735-255">주 hello **장단점** 됩니다:</span><span class="sxs-lookup"><span data-stu-id="c4735-255">hello main **trade-offs** are:</span></span>

* <span data-ttu-id="c4735-256">hello 관리 데이터베이스의 hello 주에 대해 실행 될 hello 관리 데이터베이스에 대 한 hello CRUD 작업에 대 한 hello 최종 사용자가 연결 된 tooregion A 보다 hello 최종 사용자가 연결 된 tooregion B에 대 한 짧은 대기 시간을 갖습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-256">hello CRUD operations against hello management databases have lower latency for hello end users connected tooregion A than for hello end users connected tooregion B as they are executed against hello primary of hello management databases.</span></span>
* <span data-ttu-id="c4735-257">Hello 관리 데이터베이스의 더 복잡 한 디자인을 해야합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-257">It requires more complex design of hello management database.</span></span> <span data-ttu-id="c4735-258">예를 들어 각 테 넌 트 레코드에 toobe 장애 조치 및 장애 복구 하는 동안 변경 해야 하는 위치 태그가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-258">For example, each tenant record has a location tag that needs toobe changed during failover and failback.</span></span>  
* <span data-ttu-id="c4735-259">유료 고객 hello hello 영역 B의에서 풀 업그레이드가 완료 될 때까지 평소 보다 성능이 저하를 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-259">hello paying customers may experience lower performance than usual until hello pool upgrade in region B is completed.</span></span> 

## <a name="summary"></a><span data-ttu-id="c4735-260">요약</span><span class="sxs-lookup"><span data-stu-id="c4735-260">Summary</span></span>
<span data-ttu-id="c4735-261">이 문서는 SaaS ISV 다중 테 넌 트 응용 프로그램에서 사용 하는 hello 데이터베이스 계층에 대 한 hello 재해 복구 전략에 중점을 둡니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-261">This article focuses on hello disaster recovery strategies for hello database tier used by a SaaS ISV multi-tenant application.</span></span> <span data-ttu-id="c4735-262">hello 선택 하는 전략은 hello 요구 사항에 따라 hello 비즈니스 모델 hello SLA 같은 hello 응용 프로그램의 toooffer tooyour 고객 있으며, 제약 조건 등 예산 있습니다. 각 설명 합리적인된 결정을 내릴 수 있도록 전략 윤곽선 hello 이점과 상충 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-262">hello strategy you choose is based on hello needs of hello application, such as hello business model, hello SLA you want toooffer tooyour customers, budget constraint etc. Each described strategy outlines hello benefits and trade-off so you could make an informed decision.</span></span> <span data-ttu-id="c4735-263">또한 특정 응용 프로그램은 다른 Azure 구성 요소를 포함할 가능성이 높습니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-263">Also, your specific application likely includes other Azure components.</span></span> <span data-ttu-id="c4735-264">따라서 해당 비즈니스 연속성 지침을 검토 하 고 이러한 hello 데이터베이스 계층의 hello 복구를 오케스트레이션 합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-264">So you review their business continuity guidance and orchestrate hello recovery of hello database tier with them.</span></span> <span data-ttu-id="c4735-265">복구의 azure에서 데이터베이스 응용 프로그램 관리에 대해 자세히 toolearn 너무 참조[재해 복구용 클라우드 솔루션 설계](sql-database-designing-cloud-solutions-for-disaster-recovery.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-265">toolearn more about managing recovery of database applications in Azure, refer too[Designing cloud solutions for disaster recovery](sql-database-designing-cloud-solutions-for-disaster-recovery.md).</span></span>  

## <a name="next-steps"></a><span data-ttu-id="c4735-266">다음 단계</span><span class="sxs-lookup"><span data-stu-id="c4735-266">Next steps</span></span>
* <span data-ttu-id="c4735-267">Azure SQL 데이터베이스 자동화 된 백업에 대 한 toolearn 참조 [SQL 데이터베이스 자동화 된 백업을](sql-database-automated-backups.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-267">toolearn about Azure SQL Database automated backups, see [SQL Database automated backups](sql-database-automated-backups.md).</span></span>
* <span data-ttu-id="c4735-268">비즈니스 연속성의 개요 및 시나리오를 보려면 [비즈니스 연속성 개요](sql-database-business-continuity.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c4735-268">For a business continuity overview and scenarios, see [Business continuity overview](sql-database-business-continuity.md).</span></span>
* <span data-ttu-id="c4735-269">복구를 위한 자동화 된 백업을 사용 하는 방법에 대 한 toolearn 참조 [hello 서비스 개시 백업에서 데이터베이스를 복원](sql-database-recovery-using-backups.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-269">toolearn about using automated backups for recovery, see [restore a database from hello service-initiated backups](sql-database-recovery-using-backups.md).</span></span>
* <span data-ttu-id="c4735-270">빠른 복구 옵션에 대 한 toolearn 참조 [활성 지리적 복제](sql-database-geo-replication-overview.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-270">toolearn about faster recovery options, see [active geo-replication](sql-database-geo-replication-overview.md).</span></span>
* <span data-ttu-id="c4735-271">보관을 위해 자동화 된 백업을 사용 하는 방법에 대 한 toolearn 참조 [데이터베이스 복사](sql-database-copy.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c4735-271">toolearn about using automated backups for archiving, see [database copy](sql-database-copy.md).</span></span>

