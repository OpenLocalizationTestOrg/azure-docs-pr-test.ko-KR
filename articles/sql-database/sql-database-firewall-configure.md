---
title: "aaaAzure SQL 데이터베이스 방화벽 규칙 | Microsoft Docs"
description: "Tooconfigure SQL 데이터베이스 서버 수준 및 데이터베이스 수준 방화벽 규칙 toomanage 액세스할 수 있는 방화벽에 알아봅니다."
keywords: "데이터베이스 방화벽"
services: sql-database
documentationcenter: 
author: BYHAM
manager: jhubbard
editor: cgronlun
tags: 
ms.assetid: ac57f84c-35c3-4975-9903-241c8059011e
ms.service: sql-database
ms.custom: security
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: data-management
ms.date: 04/10/2017
ms.author: rickbyh
ms.openlocfilehash: 6a8cdf629d0d0e55421a5e9f9b894a21371be568
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-sql-database-server-level-and-database-level-firewall-rules"></a><span data-ttu-id="f14f3-104">Azure SQL Database 서버 수준 및 데이터베이스 수준 방화벽 규칙</span><span class="sxs-lookup"><span data-stu-id="f14f3-104">Azure SQL Database server-level and database-level firewall rules</span></span> 

<span data-ttu-id="f14f3-105">Microsoft Azure SQL Database는 Azure 및 기타 인터넷 기반 응용 프로그램의 관계형 데이터베이스 서비스를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-105">Microsoft Azure SQL Database provides a relational database service for Azure and other Internet-based applications.</span></span> <span data-ttu-id="f14f3-106">toohelp 데이터 보호, 방화벽 권한이 있는 컴퓨터를 지정할 때까지 모든 액세스 tooyour 데이터베이스 서버를 차단 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-106">toohelp protect your data, firewalls prevent all access tooyour database server until you specify which computers have permission.</span></span> <span data-ttu-id="f14f3-107">hello 방화벽 액세스 toodatabases hello 시작 IP 주소를 각 요청에 따라 권한을 부여 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-107">hello firewall grants access toodatabases based on hello originating IP address of each request.</span></span>

## <a name="overview"></a><span data-ttu-id="f14f3-108">개요</span><span class="sxs-lookup"><span data-stu-id="f14f3-108">Overview</span></span>

<span data-ttu-id="f14f3-109">처음에 모든 TRANSACT-SQL tooyour Azure의 SQL server 액세스 hello 방화벽으로 차단 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-109">Initially, all Transact-SQL access tooyour Azure SQL server is blocked by hello firewall.</span></span> <span data-ttu-id="f14f3-110">Azure SQL server를 사용 하 여 toobegin tooyour Azure SQL server 액세스를 사용할 수 있는 하나 이상의 서버 수준 방화벽 규칙을 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-110">toobegin using your Azure SQL server, you must specify one or more server-level firewall rules that enable access tooyour Azure SQL server.</span></span> <span data-ttu-id="f14f3-111">방화벽 규칙 toospecify hello를 사용 하 여 인터넷 허용 hello에서 어떤 IP 주소 범위 및 Azure 응용 프로그램 tooconnect tooyour Azure SQL server를 시작할 수 있는지 여부.</span><span class="sxs-lookup"><span data-stu-id="f14f3-111">Use hello firewall rules toospecify which IP address ranges from hello Internet are allowed, and whether Azure applications can attempt tooconnect tooyour Azure SQL server.</span></span>

<span data-ttu-id="f14f3-112">hello Azure SQL server 데이터베이스 중 하나 tooselectively grant 액세스 toojust, hello 필요한 데이터베이스에 대 한 데이터베이스 수준 규칙을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-112">tooselectively grant access toojust one of hello databases in your Azure SQL server, you must create a database-level rule for hello required database.</span></span> <span data-ttu-id="f14f3-113">IP 주소 hello 서버 수준 방화벽 규칙에 지정 된 범위 및 hello 클라이언트의 IP 주소 hello hello 데이터베이스 수준 규칙에 지정 된 hello 범위에 속하는지 확인 hello 벗어납니다 hello 데이터베이스 방화벽 규칙에 대 한 IP 주소 범위를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-113">Specify an IP address range for hello database firewall rule that is beyond hello IP address range specified in hello server-level firewall rule, and ensure that hello IP address of hello client falls in hello range specified in hello database-level rule.</span></span>

<span data-ttu-id="f14f3-114">연결 시도 hello 인터넷 및 Azure 통과 해야 hello 방화벽을 통해 Azure SQL server 또는 SQL 데이터베이스에 영향을 미칠 수 전에 hello 다음 다이어그램에에서 나와 있는 것 처럼:</span><span class="sxs-lookup"><span data-stu-id="f14f3-114">Connection attempts from hello Internet and Azure must first pass through hello firewall before they can reach your Azure SQL server or SQL Database, as shown in hello following diagram:</span></span>

   ![방화벽 구성을 설명하는 다이어그램입니다.][1]

* <span data-ttu-id="f14f3-116">**서버 수준 방화벽 규칙:** 이러한 규칙을 통해 클라이언트 tooaccess 전체 Azure SQL server, 즉, 모든 hello 데이터베이스 내에서 hello 동일한 논리 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-116">**Server-level firewall rules:** These rules enable clients tooaccess your entire Azure SQL server, that is, all hello databases within hello same logical server.</span></span> <span data-ttu-id="f14f3-117">이러한 규칙은 hello **마스터** 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-117">These rules are stored in hello **master** database.</span></span> <span data-ttu-id="f14f3-118">Hello 포털을 사용 하 여 또는 TRANSACT-SQL 문을 사용 하 여 서버 수준 방화벽 규칙을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-118">Server-level firewall rules can be configured by using hello portal or by using Transact-SQL statements.</span></span> <span data-ttu-id="f14f3-119">toocreate 서버 수준 방화벽 규칙 hello Azure 포털 또는 PowerShell을 사용 하 여 hello 구독 소유자 또는 구독 참가자 여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-119">toocreate server-level firewall rules using hello Azure portal or PowerShell, you must be hello subscription owner or a subscription contributor.</span></span> <span data-ttu-id="f14f3-120">TRANSACT-SQL을 사용 하 여 서버 수준 방화벽 규칙 toocreate hello 서버 수준 보안 주체 로그인 또는 hello Azure Active Directory 관리자 (즉, 서버 수준 방화벽 규칙을 먼저 만들어야 함을 toohello SQL 데이터베이스 인스턴스 연결 해야 합니다. 사용자가 Azure 수준 권한).</span><span class="sxs-lookup"><span data-stu-id="f14f3-120">toocreate a server-level firewall rule using Transact-SQL, you must connect toohello SQL Database instance as hello server-level principal login or hello Azure Active Directory administrator (which means that a server-level firewall rule must first be created by a user with Azure-level permissions).</span></span>
* <span data-ttu-id="f14f3-121">**데이터베이스 수준 방화벽 규칙:** 이러한 규칙을 통해 클라이언트 tooaccess 특정 (보안) 데이터베이스 hello 내에서 동일한 논리 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-121">**Database-level firewall rules:** These rules enable clients tooaccess certain (secure) databases within hello same logical server.</span></span> <span data-ttu-id="f14f3-122">각 데이터베이스에 대 한 이러한 규칙을 만들 수 있습니다 (hello를 포함 하 여 **마스터** database0) hello 개별 데이터베이스에 저장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-122">You can create these rules for each database (including hello **master** database0) and they are stored in hello individual databases.</span></span> <span data-ttu-id="f14f3-123">데이터베이스 수준 방화벽 규칙 TRANSACT-SQL 문을 사용 하 여 구성할 수 있습니다 및 구성한 후에 첫 번째 서버 수준 방화벽 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-123">Database-level firewall rules can only be configured by using Transact-SQL statements and only after you have configured hello first server-level firewall.</span></span> <span data-ttu-id="f14f3-124">Hello 서버 수준 방화벽 규칙에 지정 된 외부 hello 범위는 hello 데이터베이스 수준 방화벽 규칙의 IP 주소 범위를 지정 하는 경우 hello 데이터베이스 수준 범위의 IP 주소를가지고 있는 클라이언트에만 hello 데이터베이스에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-124">If you specify an IP address range in hello database-level firewall rule that is outside hello range specified in hello server-level firewall rule, only those clients that have IP addresses in hello database-level range can access hello database.</span></span> <span data-ttu-id="f14f3-125">데이터베이스에 대해 최대 128개의 데이터베이스 수준 방화벽 규칙을 가질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-125">You can have a maximum of 128 database-level firewall rules for a database.</span></span> <span data-ttu-id="f14f3-126">master 및 사용자 데이터베이스에 대한 데이터베이스 수준 방화벽 규칙은 Transact-SQL을 통해서만 만들고 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-126">Database-level firewall rules for master and user databases can only be created and managed through Transact-SQL.</span></span> <span data-ttu-id="f14f3-127">데이터베이스 수준 방화벽 규칙 구성에 대 한 자세한 내용은 뒷부분에서는이 문서와 참조 hello 예제를 참조 하십시오. [sp_set_database_firewall_rule (Azure SQL 데이터베이스)](https://msdn.microsoft.com/library/dn270010.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-127">For more information on configuring database-level firewall rules, see hello example later in this article and see [sp_set_database_firewall_rule (Azure SQL Databases)](https://msdn.microsoft.com/library/dn270010.aspx).</span></span>

<span data-ttu-id="f14f3-128">**권장 사항:** 데이터베이스 수준 방화벽 규칙을 사용 하는 것이 좋습니다 때마다 가능한 tooenhance 보안과 toomake 데이터베이스 이식성이 향상 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-128">**Recommendation:** Microsoft recommends using database-level firewall rules whenever possible tooenhance security and toomake your database more portable.</span></span> <span data-ttu-id="f14f3-129">관리자에 대 한 서버 수준 방화벽 규칙을 사용 하 여 및 hello가 많은 데이터베이스가 있는 경우 같은 액세스 요구 사항을 않게 toospend 시간 각 데이터베이스를 개별적으로 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-129">Use server-level firewall rules for administrators and when you have many databases that have hello same access requirements and you don't want toospend time configuring each database individually.</span></span>

> [!Note]
> <span data-ttu-id="f14f3-130">비즈니스 연속성의 hello 컨텍스트에서 이식 가능한 데이터베이스에 대 한 정보를 참조 하십시오. [재해 복구를 위한 인증 요구 사항](sql-database-geo-replication-security-config.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-130">For information about portable databases in hello context of business continuity, see [Authentication requirements for disaster recovery](sql-database-geo-replication-security-config.md).</span></span>
>

### <a name="connecting-from-hello-internet"></a><span data-ttu-id="f14f3-131">Hello 인터넷에서 연결</span><span class="sxs-lookup"><span data-stu-id="f14f3-131">Connecting from hello Internet</span></span>

<span data-ttu-id="f14f3-132">Hello 인터넷에서에서 tooconnect tooyour 데이터베이스 서버를 시도 하는 컴퓨터 hello 방화벽 시작 IP 주소를 hello 연결을 요청 하는 hello 데이터베이스에 대 한 hello 데이터베이스 수준 방화벽 규칙에 대해 hello 요청의 hello를 먼저 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-132">When a computer attempts tooconnect tooyour database server from hello Internet, hello firewall first checks hello originating IP address of hello request against hello database-level firewall rules, for hello database that hello connection is requesting:</span></span>

* <span data-ttu-id="f14f3-133">Hello 요청의 hello IP 주소 내 hello 데이터베이스 수준 방화벽 규칙에 지정 된 hello 범위 중 하나에 있으면 hello 연결 toohello hello 규칙을 포함 하는 SQL 데이터베이스 권한이 부여 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-133">If hello IP address of hello request is within one of hello ranges specified in hello database-level firewall rules, hello connection is granted toohello SQL Database that contains hello rule.</span></span>
* <span data-ttu-id="f14f3-134">Hello 요청의 hello IP 주소 hello 데이터베이스 수준 방화벽 규칙에 지정 된 hello 범위 중 하나에 없으면 hello 서버 수준 방화벽 규칙이 확인 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-134">If hello IP address of hello request is not within one of hello ranges specified in hello database-level firewall rule, hello server-level firewall rules are checked.</span></span> <span data-ttu-id="f14f3-135">Hello 요청의 hello IP 주소 중 한 hello 서버 수준 방화벽 규칙에 지정 된 hello 범위 내에 있으면 hello 연결이 승인 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-135">If hello IP address of hello request is within one of hello ranges specified in hello server-level firewall rules, hello connection is granted.</span></span> <span data-ttu-id="f14f3-136">서버 수준 방화벽 규칙은 tooall SQL 데이터베이스 hello Azure SQL server에 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-136">Server-level firewall rules apply tooall SQL databases on hello Azure SQL server.</span></span>  
* <span data-ttu-id="f14f3-137">내에 없으면 hello 요청의 hello IP 주소 hello 데이터베이스 수준 중 하나에 지정 된 hello 범위 또는 서버 수준 방화벽 규칙의 경우, hello 연결 요청이 실패 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-137">If hello IP address of hello request is not within hello ranges specified in any of hello database-level or server-level firewall rules, hello connection request fails.</span></span>

> [!NOTE]
> <span data-ttu-id="f14f3-138">로컬 컴퓨터에서 Azure SQL 데이터베이스 tooaccess 확인 hello 방화벽 네트워크와 로컬 컴퓨터에서 TCP 포트 1433에서 나가는 통신을 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-138">tooaccess Azure SQL Database from your local computer, ensure hello firewall on your network and local computer allows outgoing communication on TCP port 1433.</span></span>
> 

### <a name="connecting-from-azure"></a><span data-ttu-id="f14f3-139">Azure에서 연결</span><span class="sxs-lookup"><span data-stu-id="f14f3-139">Connecting from Azure</span></span>
<span data-ttu-id="f14f3-140">Azure tooconnect tooyour Azure SQL server, Azure 연결이에서 tooallow 응용 프로그램을 사용 하도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-140">tooallow applications from Azure tooconnect tooyour Azure SQL server, Azure connections must be enabled.</span></span> <span data-ttu-id="f14f3-141">Azure에서 응용 프로그램 tooconnect tooyour 데이터베이스 서버와 시도 hello 방화벽 Azure 연결이 허용 되는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-141">When an application from Azure attempts tooconnect tooyour database server, hello firewall verifies that Azure connections are allowed.</span></span> <span data-ttu-id="f14f3-142">방화벽 설정에서 시작 주소와 끝 주소와 같으면 too0.0.0.0 허용 되는 이러한 연결을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-142">A firewall setting with starting and ending address equal too0.0.0.0 indicates these connections are allowed.</span></span> <span data-ttu-id="f14f3-143">Hello 연결 시도가 허용 되지 않는 경우 hello 요청 hello Azure SQL 데이터베이스 서버에 도달 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-143">If hello connection attempt is not allowed, hello request does not reach hello Azure SQL Database server.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="f14f3-144">이 옵션 hello 방화벽 tooallow 다른 고객의 hello 구독에서 Azure 포함 하 여 연결에서 모든 연결을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-144">This option configures hello firewall tooallow all connections from Azure including connections from hello subscriptions of other customers.</span></span> <span data-ttu-id="f14f3-145">권한 있는 사용자 때이 옵션을 선택 하면 있는지 확인 하 여 로그인 하 고 사용자 권한을 tooonly 액세스를 제한 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-145">When selecting this option, make sure your login and user permissions limit access tooonly authorized users.</span></span>
> 

## <a name="creating-and-managing-firewall-rules"></a><span data-ttu-id="f14f3-146">방화벽 규칙 만들기 및 관리</span><span class="sxs-lookup"><span data-stu-id="f14f3-146">Creating and managing firewall rules</span></span>
<span data-ttu-id="f14f3-147">hello를 사용 하 여 hello 첫 번째 서버 수준 방화벽 설정을 만들 수 있습니다 [Azure 포털](https://portal.azure.com/) 프로그래밍 방식으로 사용 하 여 [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), 또는 hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-147">hello first server-level firewall setting can be created using hello [Azure portal](https://portal.azure.com/) or programmatically using [Azure PowerShell](https://msdn.microsoft.com/library/azure/dn546724.aspx), [Azure CLI](/cli/azure/sql/server/firewall-rule#create), or hello [REST API](https://msdn.microsoft.com/library/azure/dn505712.aspx).</span></span> <span data-ttu-id="f14f3-148">후속 서버 수준 방화벽 규칙은 이러한 방법과 Transact-SQL을 사용하여 만들고 관리 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-148">Subsequent server-level firewall rules can be created and managed using these methods, and through Transact-SQL.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="f14f3-149">데이터베이스 수준 방화벽 규칙은 Transact-SQL을 사용해야만 만들고 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-149">Database-level firewall rules can only be created and managed using Transact-SQL.</span></span> 
>

<span data-ttu-id="f14f3-150">tooimprove 성능, 서버 수준 방화벽 규칙 hello 데이터베이스 수준에서 일시적으로 캐시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-150">tooimprove performance, server-level firewall rules are temporarily cached at hello database level.</span></span> <span data-ttu-id="f14f3-151">toorefresh hello 캐시 참조 [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-151">toorefresh hello cache, see [DBCC FLUSHAUTHCACHE](https://msdn.microsoft.com/library/mt627793.aspx).</span></span> 

> [!TIP]
> <span data-ttu-id="f14f3-152">사용할 수 있습니다 [SQL 데이터베이스 감사](sql-database-auditing.md) tooaudit 서버 수준과 데이터베이스 수준의 방화벽 변경 내용이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-152">You can use [SQL Database Auditing](sql-database-auditing.md) tooaudit server-level and database-level firewall changes.</span></span>
>

### <a name="azure-portal"></a><span data-ttu-id="f14f3-153">Azure portal</span><span class="sxs-lookup"><span data-stu-id="f14f3-153">Azure portal</span></span>

<span data-ttu-id="f14f3-154">tooset hello Azure 포털에서에서 서버 수준 방화벽 규칙을 이동할 수 있습니다 하거나 toohello 개요 페이지 Azure SQL 데이터베이스 또는 hello 개요 페이지에 대 한 Azure 데이터베이스 논리 서버에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-154">tooset a server-level firewall rule in hello Azure portal, you can either go toohello Overview page for your Azure SQL database or hello Overview page for your Azure Database logical server.</span></span>

> [!TIP]
> <span data-ttu-id="f14f3-155">자습서를 참조 하십시오. [만들기는 DB를 사용 하 여 Azure 포털을 hello](sql-database-get-started-portal.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-155">For a tutorial, see [Create a DB using hello Azure portal](sql-database-get-started-portal.md).</span></span>
>

<span data-ttu-id="f14f3-156">**데이터베이스 개요 페이지에서**</span><span class="sxs-lookup"><span data-stu-id="f14f3-156">**From database overview page**</span></span>

1. <span data-ttu-id="f14f3-157">hello 데이터베이스 개요 페이지에서 서버 수준 방화벽 규칙 tooset 클릭 **서버 방화벽 설정** hello 다음 이미지와 같이 hello 도구 모음에서: hello **방화벽 설정** SQL hello에 대 한 페이지 데이터베이스 서버를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-157">tooset a server-level firewall rule from hello database overview page, click **Set server firewall** on hello toolbar as shown in hello following image: hello **Firewall settings** page for hello SQL Database server opens.</span></span>

      ![서버 방화벽 규칙](./media/sql-database-get-started-portal/server-firewall-rule.png) 

2. <span data-ttu-id="f14f3-159">클릭 **클라이언트 IP 추가** hello 컴퓨터의 hello 도구 모음 tooadd hello IP 주소에 현재 사용 하 고이 클릭 한 다음 **저장**합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-159">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="f14f3-160">현재 IP 주소에 대한 서버 수준 방화벽 규칙이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-160">A server-level firewall rule is created for your current IP address.</span></span>

      ![set server firewall rule](./media/sql-database-get-started-portal/server-firewall-rule-set.png) 

<span data-ttu-id="f14f3-162">**서버 개요 페이지에서**</span><span class="sxs-lookup"><span data-stu-id="f14f3-162">**From server overview page**</span></span>

<span data-ttu-id="f14f3-163">hello 완벽 하 게 hello 보여 주는 서버 열리면 프로그램에 대 한 개요 페이지에 정규화 된 서버 이름 (예: **mynewserver20170403.database.windows.net**) 하 고 더 이상의 구성에 대 한 옵션을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-163">hello overview page for your server opens, showing you hello fully qualified server name (such as **mynewserver20170403.database.windows.net**) and provides options for further configuration.</span></span>

1. <span data-ttu-id="f14f3-164">서버 개요 페이지에서 서버 수준 규칙 tooset 클릭 **방화벽** hello hello 다음 이미지에에서 표시 된 대로 설정에서 왼쪽 메뉴에서:</span><span class="sxs-lookup"><span data-stu-id="f14f3-164">tooset a server-level rule from server overview page, click **Firewall** in hello left-hand menu under Settings as showed in hello following image:</span></span> 

     ![논리 서버 개요](./media/sql-database-migrate-your-sql-server-database/logical-server-overview.png)

2. <span data-ttu-id="f14f3-166">클릭 **클라이언트 IP 추가** hello 컴퓨터의 hello 도구 모음 tooadd hello IP 주소에 현재 사용 하 고이 클릭 한 다음 **저장**합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-166">Click **Add client IP** on hello toolbar tooadd hello IP address of hello computer you are currently using and then click **Save**.</span></span> <span data-ttu-id="f14f3-167">현재 IP 주소에 대한 서버 수준 방화벽 규칙이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-167">A server-level firewall rule is created for your current IP address.</span></span>

     ![set server firewall rule](./media/sql-database-migrate-your-sql-server-database/server-firewall-rule-set.png)

### <a name="transact-sql"></a><span data-ttu-id="f14f3-169">Transact-SQL</span><span class="sxs-lookup"><span data-stu-id="f14f3-169">Transact-SQL</span></span>
| <span data-ttu-id="f14f3-170">카탈로그 뷰 또는 저장된 프로시저</span><span class="sxs-lookup"><span data-stu-id="f14f3-170">Catalog View or Stored Procedure</span></span> | <span data-ttu-id="f14f3-171">수준</span><span class="sxs-lookup"><span data-stu-id="f14f3-171">Level</span></span> | <span data-ttu-id="f14f3-172">설명</span><span class="sxs-lookup"><span data-stu-id="f14f3-172">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="f14f3-173">sys.firewall_rules</span><span class="sxs-lookup"><span data-stu-id="f14f3-173">sys.firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269980.aspx) |<span data-ttu-id="f14f3-174">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-174">Server</span></span> |<span data-ttu-id="f14f3-175">Hello 현재 서버 수준 방화벽 규칙을 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-175">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="f14f3-176">sp_set_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="f14f3-176">sp_set_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270017.aspx) |<span data-ttu-id="f14f3-177">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-177">Server</span></span> |<span data-ttu-id="f14f3-178">서버 수준 방화벽 규칙 생성 및 업데이트</span><span class="sxs-lookup"><span data-stu-id="f14f3-178">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="f14f3-179">sp_delete_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="f14f3-179">sp_delete_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270024.aspx) |<span data-ttu-id="f14f3-180">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-180">Server</span></span> |<span data-ttu-id="f14f3-181">서버 수준 방화벽 규칙 제거</span><span class="sxs-lookup"><span data-stu-id="f14f3-181">Removes server-level firewall rules</span></span> |
| [<span data-ttu-id="f14f3-182">sys.database_firewall_rules</span><span class="sxs-lookup"><span data-stu-id="f14f3-182">sys.database_firewall_rules</span></span>](https://msdn.microsoft.com/library/dn269982.aspx) |<span data-ttu-id="f14f3-183">데이터베이스</span><span class="sxs-lookup"><span data-stu-id="f14f3-183">Database</span></span> |<span data-ttu-id="f14f3-184">Hello 현재 데이터베이스 수준 방화벽 규칙을 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-184">Displays hello current database-level firewall rules</span></span> |
| [<span data-ttu-id="f14f3-185">sp_set_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="f14f3-185">sp_set_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270010.aspx) |<span data-ttu-id="f14f3-186">데이터베이스</span><span class="sxs-lookup"><span data-stu-id="f14f3-186">Database</span></span> |<span data-ttu-id="f14f3-187">만들거나 hello 데이터베이스 수준 방화벽 규칙을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-187">Creates or updates hello database-level firewall rules</span></span> |
| [<span data-ttu-id="f14f3-188">sp_delete_database_firewall_rule</span><span class="sxs-lookup"><span data-stu-id="f14f3-188">sp_delete_database_firewall_rule</span></span>](https://msdn.microsoft.com/library/dn270030.aspx) |<span data-ttu-id="f14f3-189">데이터베이스</span><span class="sxs-lookup"><span data-stu-id="f14f3-189">Databases</span></span> |<span data-ttu-id="f14f3-190">데이터베이스 수준 방화벽 규칙 제거</span><span class="sxs-lookup"><span data-stu-id="f14f3-190">Removes database-level firewall rules</span></span> |


<span data-ttu-id="f14f3-191">hello 다음 예제에서는 hello 기존 규칙을 검토, Contoso, hello 서버의 IP 주소를 사용 하도록 설정 및 방화벽 규칙을 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-191">hello following examples review hello existing rules, enable a range of IP addresses on hello server Contoso, and deletes a firewall rule:</span></span>
   
```sql
SELECT * FROM sys.firewall_rules ORDER BY name;
```
  
<span data-ttu-id="f14f3-192">그런 다음 방화벽 규칙을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-192">Next, add a firewall rule.</span></span>
   
```sql
EXECUTE sp_set_firewall_rule @name = N'ContosoFirewallRule',
   @start_ip_address = '192.168.1.1', @end_ip_address = '192.168.1.10'
```

<span data-ttu-id="f14f3-193">서버 수준 방화벽 규칙을 toodelete hello sp_delete_firewall_rule 저장 프로시저를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-193">toodelete a server-level firewall rule, execute hello sp_delete_firewall_rule stored procedure.</span></span> <span data-ttu-id="f14f3-194">hello 다음 예에서는 삭제 contosofirewallrule hello 규칙:</span><span class="sxs-lookup"><span data-stu-id="f14f3-194">hello following example deletes hello rule named ContosoFirewallRule:</span></span>
   
```sql
EXECUTE sp_delete_firewall_rule @name = N'ContosoFirewallRule'
```   

### <a name="azure-powershell"></a><span data-ttu-id="f14f3-195">Azure PowerShell</span><span class="sxs-lookup"><span data-stu-id="f14f3-195">Azure PowerShell</span></span>
| <span data-ttu-id="f14f3-196">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="f14f3-196">Cmdlet</span></span> | <span data-ttu-id="f14f3-197">수준</span><span class="sxs-lookup"><span data-stu-id="f14f3-197">Level</span></span> | <span data-ttu-id="f14f3-198">설명</span><span class="sxs-lookup"><span data-stu-id="f14f3-198">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="f14f3-199">AzureSqlDatabaseServerFirewallRule가져오기</span><span class="sxs-lookup"><span data-stu-id="f14f3-199">Get-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546731.aspx) |<span data-ttu-id="f14f3-200">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-200">Server</span></span> |<span data-ttu-id="f14f3-201">Hello 현재 서버 수준 방화벽 규칙을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-201">Returns hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="f14f3-202">신규 AzureSqlDatabaseServerFirewallRule</span><span class="sxs-lookup"><span data-stu-id="f14f3-202">New-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546724.aspx) |<span data-ttu-id="f14f3-203">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-203">Server</span></span> |<span data-ttu-id="f14f3-204">새 서버 수준 방화벽 규칙 만들기</span><span class="sxs-lookup"><span data-stu-id="f14f3-204">Creates a new server-level firewall rule</span></span> |
| [<span data-ttu-id="f14f3-205">AzureSqlDatabaseServerFirewallRule집합</span><span class="sxs-lookup"><span data-stu-id="f14f3-205">Set-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546739.aspx) |<span data-ttu-id="f14f3-206">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-206">Server</span></span> |<span data-ttu-id="f14f3-207">기존 서버 수준 방화벽 규칙의 hello 속성 업데이트</span><span class="sxs-lookup"><span data-stu-id="f14f3-207">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="f14f3-208">AzureSqlDatabaseServerFirewallRule삭제</span><span class="sxs-lookup"><span data-stu-id="f14f3-208">Remove-AzureSqlDatabaseServerFirewallRule</span></span>](https://msdn.microsoft.com/library/azure/dn546727.aspx) |<span data-ttu-id="f14f3-209">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-209">Server</span></span> |<span data-ttu-id="f14f3-210">서버 수준 방화벽 규칙 제거</span><span class="sxs-lookup"><span data-stu-id="f14f3-210">Removes server-level firewall rules</span></span> |


<span data-ttu-id="f14f3-211">다음 예제는 hello PowerShell을 사용 하는 서버 수준 방화벽 규칙을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-211">hello following example sets a server-level firewall rule using PowerShell:</span></span>

```powershell
New-AzureRmSqlServerFirewallRule -ResourceGroupName "myResourceGroup" `
    -ServerName $servername `
    -FirewallRuleName "AllowSome" -StartIpAddress "0.0.0.0" -EndIpAddress "0.0.0.0"
```

> [!TIP]
> <span data-ttu-id="f14f3-212">빠른 시작의 hello 컨텍스트에서 PowerShell 예제를 보려면 [DB 만들기-PowerShell](sql-database-get-started-powershell.md) 및 [단일 데이터베이스를 만들고 PowerShell을 사용 하는 방화벽 규칙 구성](scripts/sql-database-create-and-configure-database-powershell.md)</span><span class="sxs-lookup"><span data-stu-id="f14f3-212">For PowerShell examples in hello context of a quick start, see [Create DB - PowerShell](sql-database-get-started-powershell.md) and [Create a single database and configure a firewall rule using PowerShell](scripts/sql-database-create-and-configure-database-powershell.md)</span></span>
>

### <a name="azure-cli"></a><span data-ttu-id="f14f3-213">Azure CLI</span><span class="sxs-lookup"><span data-stu-id="f14f3-213">Azure CLI</span></span>
| <span data-ttu-id="f14f3-214">Cmdlet</span><span class="sxs-lookup"><span data-stu-id="f14f3-214">Cmdlet</span></span> | <span data-ttu-id="f14f3-215">수준</span><span class="sxs-lookup"><span data-stu-id="f14f3-215">Level</span></span> | <span data-ttu-id="f14f3-216">설명</span><span class="sxs-lookup"><span data-stu-id="f14f3-216">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="f14f3-217">az sql server firewall create</span><span class="sxs-lookup"><span data-stu-id="f14f3-217">az sql server firewall create</span></span>](/cli/azure/sql/server/firewall-rule#create) | <span data-ttu-id="f14f3-218">Hello 입력 한 IP 주소 범위에서 hello 서버의 방화벽 규칙 tooallow 액세스 tooall SQL 데이터베이스를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-218">Creates a firewall rule tooallow access tooall SQL Databases on hello server from hello entered IP address range.</span></span>|
| [<span data-ttu-id="f14f3-219">az sql server firewall delete</span><span class="sxs-lookup"><span data-stu-id="f14f3-219">az sql server firewall delete</span></span>](/cli/azure/sql/server/firewall-rule#delete)| <span data-ttu-id="f14f3-220">방화벽 규칙을 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-220">Deletes a firewall rule.</span></span>|
| [<span data-ttu-id="f14f3-221">az sql server firewall list</span><span class="sxs-lookup"><span data-stu-id="f14f3-221">az sql server firewall list</span></span>](/cli/azure/sql/server/firewall-rule#list)| <span data-ttu-id="f14f3-222">Hello 방화벽 규칙을 나열합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-222">Lists hello firewall rules.</span></span>|
| [<span data-ttu-id="f14f3-223">az sql server firewall rule show</span><span class="sxs-lookup"><span data-stu-id="f14f3-223">az sql server firewall rule show</span></span>](/cli/azure/sql/server/firewall-rule#show)| <span data-ttu-id="f14f3-224">방화벽 규칙의 hello 세부 정보를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-224">Shows hello details of a firewall rule.</span></span>|
| [<span data-ttu-id="f14f3-225">ax sql server firewall rule update</span><span class="sxs-lookup"><span data-stu-id="f14f3-225">ax sql server firewall rule update</span></span>](/cli/azure/sql/server/firewall-rule#update)| <span data-ttu-id="f14f3-226">방화벽 규칙을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-226">Updates a firewall rule.</span></span>

<span data-ttu-id="f14f3-227">다음 예제는 hello hello Azure CLI를 사용 하 여 서버 수준 방화벽 규칙을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-227">hello following example sets a server-level firewall rule using hello Azure CLI:</span></span> 

```azurecli-interactive
az sql server firewall-rule create --resource-group myResourceGroup --server $servername \
    -n AllowYourIp --start-ip-address 0.0.0.0 --end-ip-address 0.0.0.0
```

> [!TIP]
> <span data-ttu-id="f14f3-228">빠른 시작의 hello 컨텍스트에서 Azure CLI 예제를 보려면 [DDB 만들기-Azure CLI](sql-database-get-started-cli.md) 및 [단일 데이터베이스를 만들고 hello Azure CLI를 사용 하는 방화벽 규칙 구성](scripts/sql-database-create-and-configure-database-cli.md)</span><span class="sxs-lookup"><span data-stu-id="f14f3-228">For an Azure CLI example in hello context of a quick start, see [Create DDB - Azure CLI](sql-database-get-started-cli.md) and [Create a single database and configure a firewall rule using hello Azure CLI](scripts/sql-database-create-and-configure-database-cli.md)</span></span>
>

### <a name="rest-api"></a><span data-ttu-id="f14f3-229">REST API</span><span class="sxs-lookup"><span data-stu-id="f14f3-229">REST API</span></span>
| <span data-ttu-id="f14f3-230">API</span><span class="sxs-lookup"><span data-stu-id="f14f3-230">API</span></span> | <span data-ttu-id="f14f3-231">수준</span><span class="sxs-lookup"><span data-stu-id="f14f3-231">Level</span></span> | <span data-ttu-id="f14f3-232">설명</span><span class="sxs-lookup"><span data-stu-id="f14f3-232">Description</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="f14f3-233">방화벽 규칙 나열</span><span class="sxs-lookup"><span data-stu-id="f14f3-233">List Firewall Rules</span></span>](https://msdn.microsoft.com/library/azure/dn505715.aspx) |<span data-ttu-id="f14f3-234">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-234">Server</span></span> |<span data-ttu-id="f14f3-235">Hello 현재 서버 수준 방화벽 규칙을 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-235">Displays hello current server-level firewall rules</span></span> |
| [<span data-ttu-id="f14f3-236">방화벽 규칙 만들기</span><span class="sxs-lookup"><span data-stu-id="f14f3-236">Create Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505712.aspx) |<span data-ttu-id="f14f3-237">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-237">Server</span></span> |<span data-ttu-id="f14f3-238">서버 수준 방화벽 규칙 생성 및 업데이트</span><span class="sxs-lookup"><span data-stu-id="f14f3-238">Creates or updates server-level firewall rules</span></span> |
| [<span data-ttu-id="f14f3-239">방화벽 규칙 설정</span><span class="sxs-lookup"><span data-stu-id="f14f3-239">Set Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505707.aspx) |<span data-ttu-id="f14f3-240">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-240">Server</span></span> |<span data-ttu-id="f14f3-241">기존 서버 수준 방화벽 규칙의 hello 속성 업데이트</span><span class="sxs-lookup"><span data-stu-id="f14f3-241">Updates hello properties of an existing server-level firewall rule</span></span> |
| [<span data-ttu-id="f14f3-242">방화벽 규칙 삭제</span><span class="sxs-lookup"><span data-stu-id="f14f3-242">Delete Firewall Rule</span></span>](https://msdn.microsoft.com/library/azure/dn505706.aspx) |<span data-ttu-id="f14f3-243">서버</span><span class="sxs-lookup"><span data-stu-id="f14f3-243">Server</span></span> |<span data-ttu-id="f14f3-244">서버 수준 방화벽 규칙 제거</span><span class="sxs-lookup"><span data-stu-id="f14f3-244">Removes server-level firewall rules</span></span> |

## <a name="server-level-firewall-rule-versus-a-database-level-firewall-rule"></a><span data-ttu-id="f14f3-245">서버 수준 방화벽 규칙 및 데이터베이스 수준 방화벽 규칙</span><span class="sxs-lookup"><span data-stu-id="f14f3-245">Server-level firewall rule versus a database-level firewall rule</span></span>
<span data-ttu-id="f14f3-246">Q.</span><span class="sxs-lookup"><span data-stu-id="f14f3-246">Q.</span></span> <span data-ttu-id="f14f3-247">한 데이터베이스의 사용자가 다른 데이터베이스에서 완전히 분리되어야 하나요?</span><span class="sxs-lookup"><span data-stu-id="f14f3-247">Should users of one database be fully isolated from another database?</span></span>   
  <span data-ttu-id="f14f3-248">그렇다면 데이터베이스 수준 방화벽 규칙을 사용하여 액세스 권한을 부여하세요.</span><span class="sxs-lookup"><span data-stu-id="f14f3-248">If yes, grant access using database-level firewall rules.</span></span> <span data-ttu-id="f14f3-249">이렇게 하면 데이터베이스 tooall 여 방어의 hello 깊이 줄여 hello 방화벽을 통해 액세스를 허용 하는 서버 수준 방화벽 규칙을 사용 하 여 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-249">This avoids using server-level firewall rules, which permit access through hello firewall tooall databases, reducing hello depth of your defenses.</span></span>   
 
<span data-ttu-id="f14f3-250">Q.</span><span class="sxs-lookup"><span data-stu-id="f14f3-250">Q.</span></span> <span data-ttu-id="f14f3-251">Hello IP 주소에서 사용자가 필요에 액세스 하려면 tooall 데이터베이스?</span><span class="sxs-lookup"><span data-stu-id="f14f3-251">Do users at hello IP address’s need access tooall databases?</span></span>   
  <span data-ttu-id="f14f3-252">사용 하 여 서버 수준 방화벽 규칙 tooreduce hello 횟수 방화벽 규칙을 구성 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-252">Use server-level firewall rules tooreduce hello number of times you must configure firewall rules.</span></span>   

<span data-ttu-id="f14f3-253">Q.</span><span class="sxs-lookup"><span data-stu-id="f14f3-253">Q.</span></span> <span data-ttu-id="f14f3-254">Hello 개인 이나 팀만 hello 방화벽 규칙 구성 액세스 권한이 통해 hello Azure 포털, PowerShell 또는 REST API hello?</span><span class="sxs-lookup"><span data-stu-id="f14f3-254">Does hello person or team configuring hello firewall rules only have access through hello Azure portal, PowerShell, or hello REST API?</span></span>   
  <span data-ttu-id="f14f3-255">서버 수준 방화벽 규칙을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-255">You must use server-level firewall rules.</span></span> <span data-ttu-id="f14f3-256">데이터베이스 수준 방화벽 규칙은 Transact-SQL을 사용해야만 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-256">Database-level firewall rules can only be configured using Transact-SQL.</span></span>  

<span data-ttu-id="f14f3-257">Q.</span><span class="sxs-lookup"><span data-stu-id="f14f3-257">Q.</span></span> <span data-ttu-id="f14f3-258">hello 개인 이나 팀 hello 방화벽 규칙 구성 금지 hello 데이터베이스 수준에서 수 있는 높은 수준의 권한을 가진에서?</span><span class="sxs-lookup"><span data-stu-id="f14f3-258">Is hello person or team configuring hello firewall rules prohibited from having high-level permission at hello database level?</span></span>   
  <span data-ttu-id="f14f3-259">서버 수준 방화벽 규칙을 사용하세요.</span><span class="sxs-lookup"><span data-stu-id="f14f3-259">Use server-level firewall rules.</span></span> <span data-ttu-id="f14f3-260">TRANSACT-SQL을 사용 하 여 데이터베이스 수준 방화벽 규칙을 구성 하려면 최소한 `CONTROL DATABASE` hello 데이터베이스 수준에서 권한이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-260">Configuring database-level firewall rules using Transact-SQL, requires at least `CONTROL DATABASE` permission at hello database level.</span></span>  

<span data-ttu-id="f14f3-261">Q.</span><span class="sxs-lookup"><span data-stu-id="f14f3-261">Q.</span></span> <span data-ttu-id="f14f3-262">대부분에 대 한 방화벽 규칙을 중앙에서 관리는 hello 개인 이나 팀 구성 또는 hello 방화벽 규칙, 감사 (아마도 단위: 100) 데이터베이스의?</span><span class="sxs-lookup"><span data-stu-id="f14f3-262">Is hello person or team configuring or auditing hello firewall rules, centrally managing firewall rules for many (perhaps 100s) of databases?</span></span>   
  <span data-ttu-id="f14f3-263">이 선택은 사용자의 필요 및 환경에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-263">This selection depends upon your needs and environment.</span></span> <span data-ttu-id="f14f3-264">서버 수준 방화벽 규칙 보다 쉽게 tooconfigure 있지만 스크립팅 hello 데이터베이스 수준에서 규칙을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-264">Server-level firewall rules might be easier tooconfigure, but scripting can configure rules at hello database-level.</span></span> <span data-ttu-id="f14f3-265">경우 tooaudit hello 데이터베이스 방화벽 규칙을 toosee 서버 수준 방화벽 규칙을 사용 하는 경우에 할 수 있습니다 및 있는 사용자 `CONTROL` hello 데이터베이스에 대 한 권한이 데이터베이스 수준 방화벽 규칙을 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-265">And even if you use server-level firewall rules, you might need tooaudit hello database-firewall rules, toosee if users with `CONTROL` permission on hello database have created database-level firewall rules.</span></span>   

<span data-ttu-id="f14f3-266">Q.</span><span class="sxs-lookup"><span data-stu-id="f14f3-266">Q.</span></span> <span data-ttu-id="f14f3-267">서버 수준 및 데이터베이스 수준 방화벽 규칙을 함께 사용할 수 있나요?</span><span class="sxs-lookup"><span data-stu-id="f14f3-267">Can I use a mix of both server-level and database-level firewall rules?</span></span>   
  <span data-ttu-id="f14f3-268">예.</span><span class="sxs-lookup"><span data-stu-id="f14f3-268">Yes.</span></span> <span data-ttu-id="f14f3-269">관리자와 같은 일부 사용자는 서버 수준 방화벽 규칙이 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-269">Some users, such as administrators might need server-level firewall rules.</span></span> <span data-ttu-id="f14f3-270">데이터베이스 응용 프로그램 사용자와 같은 경우는 데이터베이스 수준 방화벽 규칙이 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-270">Other users, such as users of a database application, might need database-level firewall rules.</span></span>   

## <a name="troubleshooting-hello-database-firewall"></a><span data-ttu-id="f14f3-271">Hello 데이터베이스 방화벽 문제 해결</span><span class="sxs-lookup"><span data-stu-id="f14f3-271">Troubleshooting hello database firewall</span></span>
<span data-ttu-id="f14f3-272">Hello 포인트 액세스 toohello Microsoft Azure SQL 데이터베이스 서비스에는 예상 대로 작동 하지 않는 경우 다음을 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-272">Consider hello following points when access toohello Microsoft Azure SQL Database service does not behave as you expect:</span></span>

* <span data-ttu-id="f14f3-273">**로컬 방화벽 구성:** TCP 포트 1433에 대 한 컴퓨터에 방화벽 예외를 toocreate 컴퓨터에서 Azure SQL 데이터베이스에 액세스 하기 전에 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-273">**Local firewall configuration:** Before your computer can access Azure SQL Database, you may need toocreate a firewall exception on your computer for TCP port 1433.</span></span> <span data-ttu-id="f14f3-274">Hello Azure 클라우드 경계 내에서 연결 작업을 수행 하려면 tooopen 추가 포트를 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-274">If you are making connections inside hello Azure cloud boundary, you may have tooopen additional ports.</span></span> <span data-ttu-id="f14f3-275">자세한 내용은 참조 hello **SQL 데이터베이스: 내부 및 외부** 의 섹션 [ADO.NET 4.5 및 SQL 데이터베이스에 대 한 1433 이외의 포트](sql-database-develop-direct-route-ports-adonet-v12.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-275">For more information, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md).</span></span>
* <span data-ttu-id="f14f3-276">**네트워크 주소 변환 (NAT):** 기한 tooNAT, hello IP 주소에서 사용자 컴퓨터 tooconnect tooAzure SQL 데이터베이스 컴퓨터의 IP 구성 설정에 표시 된 hello IP 주소와 다를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-276">**Network address translation (NAT):** Due tooNAT, hello IP address used by your computer tooconnect tooAzure SQL Database may be different than hello IP address shown in your computer IP configuration settings.</span></span> <span data-ttu-id="f14f3-277">컴퓨터가 tooview hello IP 주소 toohello 포털에 로그인 하 고 toohello 이동 tooconnect tooAzure를 사용 하 여 **구성** hello 서버 데이터베이스를 호스팅하는 탭 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-277">tooview hello IP address your computer is using tooconnect tooAzure, log in toohello portal and navigate toohello **Configure** tab on hello server that hosts your database.</span></span> <span data-ttu-id="f14f3-278">Hello에서 **허용 IP 주소** 섹션 hello **현재 클라이언트 IP 주소** 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-278">Under hello **Allowed IP Addresses** section, hello **Current Client IP Address** is displayed.</span></span> <span data-ttu-id="f14f3-279">클릭 **추가** toohello **허용 IP 주소** tooallow이 컴퓨터 tooaccess hello 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-279">Click **Add** toohello **Allowed IP Addresses** tooallow this computer tooaccess hello server.</span></span>
* <span data-ttu-id="f14f3-280">**변경 내용을 toohello 허용 목록이 아직 적용 되지 않음:** 하는 데 5 분 지연 toohello Azure SQL 데이터베이스 방화벽 구성 tootake 효과 변경 하는 만큼 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-280">**Changes toohello allow list have not taken effect yet:** There may be as much as a five-minute delay for changes toohello Azure SQL Database firewall configuration tootake effect.</span></span>
* <span data-ttu-id="f14f3-281">**hello 로그인 권한이 없거나 잘못 된 암호를 사용한:** hello Azure SQL 데이터베이스 서버에 대 한 사용 권한이 로그인 하지 않거나 사용 되는 hello 암호가 올바르지 않습니다, toohello Azure SQL 데이터베이스 서버에 연결할 hello 거부 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-281">**hello login is not authorized or an incorrect password was used:** If a login does not have permissions on hello Azure SQL Database server or hello password used is incorrect, hello connection toohello Azure SQL Database server is denied.</span></span> <span data-ttu-id="f14f3-282">Tooyour 서버;에 연결 하는 기회 tooattempt 클라이언트 제공 방화벽 설정 각 클라이언트 hello 필요한 보안 자격 증명을 제공 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-282">Creating a firewall setting only provides clients with an opportunity tooattempt connecting tooyour server; each client must provide hello necessary security credentials.</span></span> <span data-ttu-id="f14f3-283">로그인 준비에 대한 자세한 내용은 Azure SQL Database에서 데이터베이스, 로그인, 사용자 관리를 참조하세요. </span><span class="sxs-lookup"><span data-stu-id="f14f3-283">For more information about preparing logins, see Managing Databases, Logins, and Users in Azure SQL Database.</span></span>
* <span data-ttu-id="f14f3-284">**동적 IP 주소:** 동적 IP 주소로 사용 하는 인터넷 연결이 있는 hello 방화벽을 통과 하는 데 문제가 있는 경우 hello 솔루션을 다음 중 하나를 시도할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-284">**Dynamic IP address:** If you have an Internet connection with dynamic IP addressing and you are having trouble getting through hello firewall, you could try one of hello following solutions:</span></span>
  
  * <span data-ttu-id="f14f3-285">인터넷 서비스 공급자 (ISP) hello IP 주소 범위에 대 한 할당 tooyour 클라이언트 컴퓨터 액세스 hello Azure SQL 데이터베이스 서버를 게 문의 하 고 방화벽 규칙으로 hello IP 주소 범위를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-285">Ask your Internet Service Provider (ISP) for hello IP address range assigned tooyour client computers that access hello Azure SQL Database server, and then add hello IP address range as a firewall rule.</span></span>
  * <span data-ttu-id="f14f3-286">고정 IP 주소를 대신 클라이언트 컴퓨터에 대 한 가져오고 방화벽 규칙으로 hello IP 주소를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-286">Get static IP addressing instead for your client computers, and then add hello IP addresses as firewall rules.</span></span>

## <a name="next-steps"></a><span data-ttu-id="f14f3-287">다음 단계</span><span class="sxs-lookup"><span data-stu-id="f14f3-287">Next steps</span></span>

- <span data-ttu-id="f14f3-288">데이터베이스 및 서버 수준 방화벽 규칙 만들기에 대한 빠른 시작은 [Azure SQL Database 만들기](sql-database-get-started-portal.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f14f3-288">For a quick start on creating a database and a server-level firewall rule, see [Create an Azure SQL database](sql-database-get-started-portal.md).</span></span>
- <span data-ttu-id="f14f3-289">오픈 소스 또는 타사 응용 프로그램에서 연결 tooan Azure SQL 데이터베이스에서 도움말을 참조 하십시오. [클라이언트 빠른 시작 코드 샘플 데이터베이스 tooSQL](https://msdn.microsoft.com/library/azure/ee336282.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="f14f3-289">For help in connecting tooan Azure SQL database from open source or third-party applications, see [Client quick-start code samples tooSQL Database](https://msdn.microsoft.com/library/azure/ee336282.aspx).</span></span>
- <span data-ttu-id="f14f3-290">추가 포트를 tooopen 할 수 있습니다, 참조 hello **SQL 데이터베이스: 내부 및 외부** 의 섹션 [ADO.NET 4.5 및 SQL 데이터베이스에 대 한 1433 이외의 포트](sql-database-develop-direct-route-ports-adonet-v12.md)</span><span class="sxs-lookup"><span data-stu-id="f14f3-290">For information on additional ports that you may need tooopen, see hello **SQL Database: Outside vs inside** section of [Ports beyond 1433 for ADO.NET 4.5 and SQL Database](sql-database-develop-direct-route-ports-adonet-v12.md)</span></span>
- <span data-ttu-id="f14f3-291">Azure SQL Database 보안 개요는 [데이터베이스 보안 설정](sql-database-security-overview.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="f14f3-291">For an overview of Azure SQL Database security, see [Securing your database](sql-database-security-overview.md)</span></span>

<!--Image references-->
[1]: ./media/sql-database-firewall-configure/sqldb-firewall-1.png
