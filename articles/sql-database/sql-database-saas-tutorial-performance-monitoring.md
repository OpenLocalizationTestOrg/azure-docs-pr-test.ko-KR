---
title: "다중 테 넌 트 SaaS 응용 프로그램에서 많은 Azure SQL 데이터베이스의 aaaMonitor 성능을 | Microsoft Docs"
description: "모니터링 및 관리 데이터베이스 및 hello Azure SQL 데이터베이스 Wingtip SaaS 응용 프로그램 풀의 성능"
keywords: "SQL Database 자습서"
services: sql-database
documentationcenter: 
author: stevestein
manager: craigg
editor: 
ms.assetid: 
ms.service: sql-database
ms.custom: scale out apps
ms.workload: data-management
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/26/2017
ms.author: sstein
ms.openlocfilehash: f0d7ba456c485b7de249a56abac3cf4be3857285
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="monitor-performance-of-hello-wingtip-saas-application"></a><span data-ttu-id="c2f93-104">Hello Wingtip SaaS 응용 프로그램의 성능을 모니터링합니다</span><span class="sxs-lookup"><span data-stu-id="c2f93-104">Monitor performance of hello Wingtip SaaS application</span></span>

<span data-ttu-id="c2f93-105">이 자습서에서는 SaaS 응용 프로그램에서 사용되는 몇 가지 주요 성능 관리 시나리오를 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-105">In this tutorial, several key performance management scenarios used in SaaS applications are explored.</span></span> <span data-ttu-id="c2f93-106">부하 생성기 toosimulate 동작을 사용 하 여 모든 테 넌 트 데이터베이스에서 기본 제공 모니터링 hello 및 SQL 데이터베이스와 탄력적 풀의 경고 기능을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-106">Using a load generator toosimulate activity across all tenant databases, hello built-in monitoring and alerting features of SQL Database and elastic pools are demonstrated.</span></span>

<span data-ttu-id="c2f93-107">hello Wingtip SaaS 앱 각 장소 (테 넌 트)의 해당 데이터베이스에 있는 단일 테 넌 트 데이터 모델을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-107">hello Wingtip SaaS app uses a single-tenant data model, where each venue (tenant) has their own database.</span></span> <span data-ttu-id="c2f93-108">대부분의 SaaS 응용 프로그램 처럼 hello 테 넌 트 작업 부하 패턴은 드물게 발생 하 고 예측할 수 없는 것으로 예상 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-108">Like many SaaS applications, hello anticipated tenant workload pattern is unpredictable and sporadic.</span></span> <span data-ttu-id="c2f93-109">예를 들어 티켓 판매는 아무 때나 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-109">In other words, ticket sales may occur at any time.</span></span> <span data-ttu-id="c2f93-110">tootake 활용이 일반적인 데이터베이스 사용 패턴, 테 넌 트 데이터베이스를 탄력적 데이터베이스 풀으로 배포 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-110">tootake advantage of this typical database usage pattern, tenant databases are deployed into elastic database pools.</span></span> <span data-ttu-id="c2f93-111">탄력적 풀에서 많은 데이터베이스 리소스를 공유 하 여 솔루션의 hello 비용을 최적화 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-111">Elastic pools optimize hello cost of a solution by sharing resources across many databases.</span></span> <span data-ttu-id="c2f93-112">이 유형의 패턴을는 중요 한 toomonitor 데이터베이스 균등 하 게 풀 리소스 사용량 tooensure 로드 하는 합리적으로 풀에 걸쳐 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-112">With this type of pattern, it's important toomonitor database and pool resource usage tooensure that loads are reasonably balanced across pools.</span></span> <span data-ttu-id="c2f93-113">또한 개별 데이터베이스에 리소스가 충분 한지 및 풀에 도달 하지 tooensure 해야 자신의 [eDTU](sql-database-what-is-a-dtu.md) 제한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-113">You also need tooensure that individual databases have adequate resources, and that pools are not hitting their [eDTU](sql-database-what-is-a-dtu.md) limits.</span></span> <span data-ttu-id="c2f93-114">이 자습서 방법으로 toomonitor 탐색 하 고 데이터베이스 및 풀 관리 방법과 tootake 작업에서 응답 toovariations에 정정 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-114">This tutorial explores ways toomonitor and manage databases and pools, and how tootake corrective action in response toovariations in workload.</span></span>

<span data-ttu-id="c2f93-115">이 자습서에서는 다음 방법에 대해 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-115">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]

> * <span data-ttu-id="c2f93-116">제공 된 부하 생성기를 실행 하 여 hello 테 넌 트 데이터베이스에서의 사용을 시뮬레이션 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-116">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="c2f93-117">올바르게 응답 하지 않는 부하 toohello 증가 하는 대로 모니터 hello 테 넌 트 데이터베이스</span><span class="sxs-lookup"><span data-stu-id="c2f93-117">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="c2f93-118">탄력적 풀 응답 toohello 높아지는 데이터베이스 부하에 hello 수직 확장</span><span class="sxs-lookup"><span data-stu-id="c2f93-118">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="c2f93-119">두 번째 탄력적 풀 tooload 균형 데이터베이스 활동을 프로 비전</span><span class="sxs-lookup"><span data-stu-id="c2f93-119">Provision a second Elastic pool tooload balance database activity</span></span>


<span data-ttu-id="c2f93-120">toocomplete이이 자습서에서는 다음 필수 구성 요소 확인 되었는지 hello 완료 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-120">toocomplete this tutorial, make sure hello following prerequisites are completed:</span></span>

* <span data-ttu-id="c2f93-121">hello Wingtip SaaS 앱을 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-121">hello Wingtip SaaS app is deployed.</span></span> <span data-ttu-id="c2f93-122">5 분 이내에 toodeploy 참조 [배포 하 고 hello Wingtip SaaS 응용 프로그램 탐색](sql-database-saas-tutorial.md)</span><span class="sxs-lookup"><span data-stu-id="c2f93-122">toodeploy in less than five minutes, see [Deploy and explore hello Wingtip SaaS application](sql-database-saas-tutorial.md)</span></span>
* <span data-ttu-id="c2f93-123">Azure PowerShell이 설치되었습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-123">Azure PowerShell is installed.</span></span> <span data-ttu-id="c2f93-124">자세한 내용은 [Azure PowerShell 시작](https://docs.microsoft.com/powershell/azure/get-started-azureps)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c2f93-124">For details, see [Getting started with Azure PowerShell](https://docs.microsoft.com/powershell/azure/get-started-azureps)</span></span>

## <a name="introduction-toosaas-performance-management-patterns"></a><span data-ttu-id="c2f93-125">소개 tooSaaS 성능 관리 패턴</span><span class="sxs-lookup"><span data-stu-id="c2f93-125">Introduction tooSaaS performance management patterns</span></span>

<span data-ttu-id="c2f93-126">데이터베이스 성능 관리 컴파일 및 성능 데이터 분석 및 다음 매개 변수 toomaintain 응용 프로그램에 대 한 적절 한 응답 시간을 조정 하 여 toothis 데이터 반응으로 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-126">Managing database performance consists of compiling and analyzing performance data, and then reacting toothis data by adjusting parameters toomaintain an acceptable response time for your application.</span></span> <span data-ttu-id="c2f93-127">여러 테 넌 트를 호스팅하는 경우 탄력적 데이터베이스 풀은 비용 효율적인 방식으로 tooprovide 하 고 예측할 수 없는 작업이 있는 데이터베이스 그룹에 대 한 리소스를 관리 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-127">When hosting multiple tenants, Elastic database pools are a cost-effective way tooprovide and manage resources for a group of databases with unpredictable workloads.</span></span> <span data-ttu-id="c2f93-128">특정 워크로드 패턴의 경우 풀에서 관리하면 S3 데이터베이스 두 개만 이점을 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-128">With certain workload patterns, as few as two S3 databases can benefit from being managed in a pool.</span></span>

![미디어](./media/sql-database-saas-tutorial-performance-monitoring/app-diagram.png)

<span data-ttu-id="c2f93-130">풀 및 풀의 hello 데이터베이스 모니터링된 tooensure 성능의 허용 가능한 범위 내에서 유지 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-130">Pools, and hello databases in pools, should be monitored tooensure they stay within acceptable ranges of performance.</span></span> <span data-ttu-id="c2f93-131">튜닝 hello 풀 구성 toomeet hello 작업의 요구 사항을 hello 집계는 hello 풀 Edtu hello에 대 한 적절 한 되도록 하는 모든 데이터베이스의 전체 작업 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-131">Tune hello pool configuration toomeet hello needs of hello aggregate workload of all databases, ensuring that hello pool eDTUs are appropriate for hello overall workload.</span></span> <span data-ttu-id="c2f93-132">값을 조정 hello 데이터베이스당 min 및 데이터베이스당 최대 eDTU 값 tooappropriate 특정 응용 프로그램 요구 사항에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-132">Adjust hello per-database min and per-database max eDTU values tooappropriate values for your specific application requirements.</span></span>

### <a name="performance-management-strategies"></a><span data-ttu-id="c2f93-133">성능 관리 전략</span><span class="sxs-lookup"><span data-stu-id="c2f93-133">Performance management strategies</span></span>

* <span data-ttu-id="c2f93-134">tooavoid toomanually 모니터 성능 있는 것이 가장 효과적 너무**일반 범위를 벗어나는 들어가지 않도록 데이터베이스 또는 풀을 트리거할 경고 설정**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-134">tooavoid having toomanually monitor performance, it’s most effective too**set alerts that trigger when databases or pools stray out of normal ranges**.</span></span>
* <span data-ttu-id="c2f93-135">toorespond tooshort 용어 변동은 풀의 hello 집계 성능 수준에 hello **풀 eDTU 수준 위로 또는 아래로 확장 될 수 있습니다**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-135">toorespond tooshort-term fluctuations in hello aggregate performance level of a pool, hello **pool eDTU level can be scaled up or down**.</span></span> <span data-ttu-id="c2f93-136">이 변동 정기적으로 또는 예측 가능한 단위로 발생 하는 경우 **hello 풀 크기 조정 toooccur 예약된을 자동으로 될 수 있습니다**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-136">If this fluctuation occurs on a regular or predictable basis, **scaling hello pool can be scheduled toooccur automatically**.</span></span> <span data-ttu-id="c2f93-137">예를 들어 워크로드가 가볍다고 알고 있는 경우 야간 또는 주말 중으로 규모를 축소할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-137">For example, scale down when you know your workload is light, maybe overnight, or during weekends.</span></span>
* <span data-ttu-id="c2f93-138">toorespond toolonger 용어 변동 사항이 나 변경 사항을 hello 데이터베이스 개수, **개별 데이터베이스를 다른 풀으로 이동할 수 있습니다**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-138">toorespond toolonger-term fluctuations, or changes in hello number of databases, **individual databases can be moved into other pools**.</span></span>
* <span data-ttu-id="c2f93-139">toorespond tooshort 용어 증가 *개별* 데이터베이스 로드 **개별 데이터베이스를 풀에서 제거 하 고 개별 성능 수준이 할당 수**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-139">toorespond tooshort term increases in *individual* database load **individual databases can be taken out of a pool and assigned an individual performance level**.</span></span> <span data-ttu-id="c2f93-140">Hello 부하는 감소 되 면 hello 데이터베이스 수 다음 반환할 toohello 풀입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-140">Once hello load is reduced, hello database can then be returned toohello pool.</span></span> <span data-ttu-id="c2f93-141">이 배열은 미리 알려져 있는 경우 데이터베이스는 이동할 수 미리 tooensure hello 데이터베이스 항상에 필요한 hello 리소스 및 tooavoid 영향 hello 풀의 다른 데이터베이스에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-141">When this is known in advance, databases can be moved pre-emptively tooensure hello database always has hello resources it needs, and tooavoid impact on other databases in hello pool.</span></span> <span data-ttu-id="c2f93-142">이 요구 사항을 발생 하는 인기 있는 이벤트에 대 한 티켓 판매 러시 장소 같은 예측 가능한 경우이 관리 동작은 hello 응용 프로그램에 통합할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-142">If this requirement is predictable, such as a venue experiencing a rush of ticket sales for a popular event, then this management behavior can be integrated into hello application.</span></span>

<span data-ttu-id="c2f93-143">hello [Azure 포털](https://portal.azure.com) 기본 제공 모니터링 및 대부분의 리소스에 경고를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-143">hello [Azure portal](https://portal.azure.com) provides built-in monitoring and alerting on most resources.</span></span> <span data-ttu-id="c2f93-144">SQL Database의 경우 데이터베이스 및 풀에 대한 모니터링 및 경고가 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-144">For SQL Database, monitoring and alerting is available on databases and pools.</span></span> <span data-ttu-id="c2f93-145">이 기본 제공 모니터링 및 경고 리소스 관련 이므로 적은 수의 리소스에 대 한 편리한 toouse 이지만 많은 리소스를 작업할 때 매우 편리 하 게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-145">This built-in monitoring and alerting is resource-specific, so it's convenient toouse for small numbers of resources, but is not very convenient when working with many resources.</span></span>

<span data-ttu-id="c2f93-146">여러 리소스로 작업하는 대규모 시나리오의 경우 [Log Analytics(OMS)](sql-database-saas-tutorial-log-analytics.md)를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-146">For high-volume scenarios where you're working with many reources, [Log Analytics (OMS)](sql-database-saas-tutorial-log-analytics.md) can be used.</span></span> <span data-ttu-id="c2f93-147">이것은 여러 서비스에서 원격 분석을 수집하고 쿼리 및 경고 설정에 사용할 수 있는 Log Analytics 작업 영역에서 수집된</span><span class="sxs-lookup"><span data-stu-id="c2f93-147">This is a separate Azure service that provides analytics over emitted diagnostic logs and telemetry gathered in a log analytics workspace.</span></span> <span data-ttu-id="c2f93-148">로그 분석 많은 서비스에서 원격 분석 수집 및 수 사용된 tooquery 있으며 경고를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-148">Log Analytics can collect telemetry from many services and be used tooquery and set alerts.</span></span>

## <a name="get-hello-wingtip-application-source-code-and-scripts"></a><span data-ttu-id="c2f93-149">Hello Wingtip 응용 프로그램 소스 코드 및 스크립트 가져오기</span><span class="sxs-lookup"><span data-stu-id="c2f93-149">Get hello Wingtip application source code and scripts</span></span>

<span data-ttu-id="c2f93-150">hello Wingtip SaaS 스크립트 및 응용 프로그램 소스 코드에서에서 사용할 수 있는 hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github 리포지토리 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-150">hello Wingtip SaaS scripts and application source code are available in hello [WingtipSaaS](https://github.com/Microsoft/WingtipSaaS) github repo.</span></span> <span data-ttu-id="c2f93-151">[Toodownload hello Wingtip SaaS 스크립트 단계](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts)합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-151">[Steps toodownload hello Wingtip SaaS scripts](sql-database-wtp-overview.md#download-and-unblock-the-wingtip-saas-scripts).</span></span>

## <a name="provision-additional-tenants"></a><span data-ttu-id="c2f93-152">추가 테넌트 프로비전</span><span class="sxs-lookup"><span data-stu-id="c2f93-152">Provision additional tenants</span></span>

<span data-ttu-id="c2f93-153">풀 하는 두 개의 점으로만 S3 데이터베이스와 함께 비용 효율적인 동안 hello 자세한에 있는 데이터베이스는 비용 효율적인 hello 풀 hello 효과 평균을 구하여 hello 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-153">While pools can be cost-effective with just two S3 databases, hello more databases that are in hello pool hello more cost-effective hello averaging effect becomes.</span></span> <span data-ttu-id="c2f93-154">성능 모니터링과 관리가 규모별로 작동하는 방법을 잘 이해하기 위해 이 자습서에서 적어도 20개의 데이터베이스를 배포해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-154">For a good understanding of how performance monitoring and management works at scale, this tutorial requires you have at least 20 databases deployed.</span></span>

<span data-ttu-id="c2f93-155">이미 이전 자습서의 테 넌 트의 일괄 처리를 프로 비전, toohello 건너뜁니다 [모든 테 넌 트 데이터베이스에서 시뮬레이션 사용량이](#simulate-usage-on-all-tenant-databases) 섹션.</span><span class="sxs-lookup"><span data-stu-id="c2f93-155">If you already provisioned a batch of tenants in a prior tutorial, skip toohello [Simulate usage on all tenant databases](#simulate-usage-on-all-tenant-databases) section.</span></span>

1. <span data-ttu-id="c2f93-156">열기... \\학습 모듈\\성능 모니터링 및 관리\\*데모 PerformanceMonitoringAndManagement.ps1* hello에 *PowerShell ISE*합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-156">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="c2f93-157">이 자습서를 실행하는 동안 여러 시나리오를 실행할 때 이 스크립트를 열어 두세요.</span><span class="sxs-lookup"><span data-stu-id="c2f93-157">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="c2f93-158">**$DemoScenario** = **1**, **Provision a batch of tenants** 설정</span><span class="sxs-lookup"><span data-stu-id="c2f93-158">Set **$DemoScenario** = **1**, **Provision a batch of tenants**</span></span>
1. <span data-ttu-id="c2f93-159">키를 눌러 **F5** toorun hello 스크립트입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-159">Press **F5** toorun hello script.</span></span>

<span data-ttu-id="c2f93-160">hello 스크립트는 5 분 이내에 17 테 넌 트를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-160">hello script will deploy 17 tenants in less than five minutes.</span></span>

<span data-ttu-id="c2f93-161">hello *새로 TenantBatch* 스크립트 중첩 또는 연결 된 집합을 사용 하 여 [리소스 관리자](../azure-resource-manager/index.md) 기본적으로 hello 데이터베이스를 복사 하는 테 넌 트, 일괄 처리를 만드는 템플릿을 **basetenantdb** hello 카탈로그 server toocreate hello 새 테 넌 트 데이터베이스를 만든 다음 등록 hello 카탈로그에서 이러한 및 마지막으로 형식과 hello 테 넌 트 이름 및 위치를 초기화 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-161">hello *New-TenantBatch* script uses a nested or linked set of [Resource Manager](../azure-resource-manager/index.md) templates that create a batch of tenants, which by default copies hello database **basetenantdb** on hello catalog server toocreate hello new tenant databases, then registers these in hello catalog, and finally initializes them with hello tenant name and venue type.</span></span> <span data-ttu-id="c2f93-162">이 hello 방식으로 hello 앱 프로 비전 하는 새 테 넌 트와 일치 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-162">This is consistent with hello way hello app provisions a new tenant.</span></span> <span data-ttu-id="c2f93-163">변경 내용을 너무*basetenantdb* 적용된 tooany 새 테 넌 트 그 후 사용자를 프로 비전 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-163">Any changes made too*basetenantdb* are applied tooany new tenants provisioned thereafter.</span></span> <span data-ttu-id="c2f93-164">Hello 참조 [스키마 관리 자습서](sql-database-saas-tutorial-schema-management.md) toomake 스키마 너무 어떻게 변경 되는지 toosee*기존* 데이터베이스 테 넌 트 (hello를 포함 하 여 *basetenantdb* 데이터베이스).</span><span class="sxs-lookup"><span data-stu-id="c2f93-164">See hello [Schema Management tutorial](sql-database-saas-tutorial-schema-management.md) toosee how toomake schema changes too*existing* tenant databases (including hello *basetenantdb* database).</span></span>

## <a name="simulate-usage-on-all-tenant-databases"></a><span data-ttu-id="c2f93-165">모든 테넌트 데이터베이스에 대한 사용 시뮬레이션</span><span class="sxs-lookup"><span data-stu-id="c2f93-165">Simulate usage on all tenant databases</span></span>

<span data-ttu-id="c2f93-166">hello *데모 PerformanceMonitoringAndManagement.ps1* 스크립트는 모든 테 넌 트 데이터베이스에 대해 실행 되는 작업 부하를 시뮬레이션 하는 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-166">hello *Demo-PerformanceMonitoringAndManagement.ps1* script is provided that simulates a workload running against all tenant databases.</span></span> <span data-ttu-id="c2f93-167">hello 부하 hello 사용 가능한 부하 시나리오 중 하나를 사용 하 여 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-167">hello load is generated using one of hello available load scenarios:</span></span>

| <span data-ttu-id="c2f93-168">데모</span><span class="sxs-lookup"><span data-stu-id="c2f93-168">Demo</span></span> | <span data-ttu-id="c2f93-169">시나리오</span><span class="sxs-lookup"><span data-stu-id="c2f93-169">Scenario</span></span> |
|:--|:--|
| <span data-ttu-id="c2f93-170">2</span><span class="sxs-lookup"><span data-stu-id="c2f93-170">2</span></span> | <span data-ttu-id="c2f93-171">표준 강도 부하(약 40 DTU) 생성</span><span class="sxs-lookup"><span data-stu-id="c2f93-171">Generate normal intensity load (approx. 40 DTU)</span></span> |
| <span data-ttu-id="c2f93-172">3</span><span class="sxs-lookup"><span data-stu-id="c2f93-172">3</span></span> | <span data-ttu-id="c2f93-173">데이터베이스별로 버스트가 더 길고 더 잦은 부하 생성</span><span class="sxs-lookup"><span data-stu-id="c2f93-173">Generate load with longer and more frequent bursts per database</span></span>|
| <span data-ttu-id="c2f93-174">4</span><span class="sxs-lookup"><span data-stu-id="c2f93-174">4</span></span> | <span data-ttu-id="c2f93-175">데이터베이스별로 DTU 버스트가 더 높은(약 80 DTU) 부하 생성</span><span class="sxs-lookup"><span data-stu-id="c2f93-175">Generate load with higher DTU bursts per database (approx. 80 DTU)</span></span>|
| <span data-ttu-id="c2f93-176">5</span><span class="sxs-lookup"><span data-stu-id="c2f93-176">5</span></span> | <span data-ttu-id="c2f93-177">표준 부하에 더하여 단일 테넌트의 높은 부하 생성(약 95 DTU)</span><span class="sxs-lookup"><span data-stu-id="c2f93-177">Generate a normal load plus a high load on a single tenant (approx. 95 DTU)</span></span>|
| <span data-ttu-id="c2f93-178">6</span><span class="sxs-lookup"><span data-stu-id="c2f93-178">6</span></span> | <span data-ttu-id="c2f93-179">여러 풀에 걸쳐 불균형 부하 생성</span><span class="sxs-lookup"><span data-stu-id="c2f93-179">Generate unbalanced load across multiple pools</span></span>|

<span data-ttu-id="c2f93-180">hello 부하 생성기 적용 되는 *가상* CPU 전용 로드 tooevery 테 넌 트 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-180">hello load generator applies a *synthetic* CPU-only load tooevery tenant database.</span></span> <span data-ttu-id="c2f93-181">hello 생성기 호출 하는 저장된 프로시저 주기적으로 hello 부하를 생성 하는 각 테 넌 트 데이터베이스에 대 한 작업을 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-181">hello generator starts a job for each tenant database, which calls a stored procedure periodically that generates hello load.</span></span> <span data-ttu-id="c2f93-182">hello 부하 수준 (Edtu), 지속 시간 및 간격을 예측할 수 없는 테 넌 트 작업을 시뮬레이션 하는 모든 데이터베이스에 걸쳐 다양 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-182">hello load levels (in eDTUs), duration, and intervals are varied across all databases, simulating unpredictable tenant activity.</span></span>

1. <span data-ttu-id="c2f93-183">열기... \\학습 모듈\\성능 모니터링 및 관리\\*데모 PerformanceMonitoringAndManagement.ps1* hello에 *PowerShell ISE*합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-183">Open …\\Learning Modules\\Performance Monitoring and Management\\*Demo-PerformanceMonitoringAndManagement.ps1* in hello *PowerShell ISE*.</span></span> <span data-ttu-id="c2f93-184">이 자습서를 실행하는 동안 여러 시나리오를 실행할 때 이 스크립트를 열어 두세요.</span><span class="sxs-lookup"><span data-stu-id="c2f93-184">Keep this script open as you'll run several scenarios during this tutorial.</span></span>
1. <span data-ttu-id="c2f93-185">**$DemoScenario** = **2**를 설정하고, *일반 강도 부하를 생성*합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-185">Set **$DemoScenario** = **2**, *Generate normal intensity load*.</span></span>
1. <span data-ttu-id="c2f93-186">키를 눌러 **F5** tooapply 부하 tooall 테 넌 트 데이터베이스.</span><span class="sxs-lookup"><span data-stu-id="c2f93-186">Press **F5** tooapply a load tooall your tenant databases.</span></span>

<span data-ttu-id="c2f93-187">Wingtip SaaS 앱 이며 SaaS 앱에 대 한 hello 실제 부하는 일반적으로 드물게 발생 하 고 예측할 수 없는 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-187">Wingtip is a SaaS app, and hello real-world load on a SaaS app is typically sporadic and unpredictable.</span></span> <span data-ttu-id="c2f93-188">toosimulate이 임의 부하를 모든 테 넌 트 간의 분산 hello 부하 생성기 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-188">toosimulate this, hello load generator produces a randomized load distributed across all tenants.</span></span> <span data-ttu-id="c2f93-189">몇 분 정도 hello 다음 섹션에서에서 toomonitor hello 부하를 시도 하기 전에 3-5 분 동안 hello 부하 생성기를 실행 하므로 hello 부하 패턴 tooemerge 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-189">Several minutes are needed for hello load pattern tooemerge, so run hello load generator for 3-5 minutes before attempting toomonitor hello load in hello following sections.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="c2f93-190">hello 부하 생성기는 일련의 작업으로 로컬 PowerShell 세션에서 실행 중입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-190">hello load generator is running as a series of jobs in your local PowerShell session.</span></span> <span data-ttu-id="c2f93-191">Hello 유지 *데모 PerformanceMonitoringAndManagement.ps1* 탭 열기!</span><span class="sxs-lookup"><span data-stu-id="c2f93-191">Keep hello *Demo-PerformanceMonitoringAndManagement.ps1* tab open!</span></span> <span data-ttu-id="c2f93-192">Hello 탭을 종료 하거나 컴퓨터를 일시 중단, hello 부하 생성기를 중지 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-192">If you close hello tab, or suspend your machine, hello load generator stops.</span></span> <span data-ttu-id="c2f93-193">hello 부하 생성기에 남아는 *작업 호출* 상태 hello 생성기 시작 된 후 프로 비전 되는 새 테 넌 트에 부하를 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-193">hello load generator remains in a *job-invoking* state where it generates load on any new tenants that are provisioned after hello generator is started.</span></span> <span data-ttu-id="c2f93-194">사용 하 여 *Ctrl-c* toostop 새 작업 및 끝내기 hello 스크립트를 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-194">Use *Ctrl-C* toostop invoking new jobs and exit hello script.</span></span> <span data-ttu-id="c2f93-195">hello 부하 생성기는 toorun, 기존 테 넌 트에만 계속 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-195">hello load generator will continue toorun, but only on existing tenants.</span></span>

## <a name="monitor-resource-usage-using-hello-azure-portal"></a><span data-ttu-id="c2f93-196">Hello Azure 포털을 사용 하 여 리소스 사용 모니터링</span><span class="sxs-lookup"><span data-stu-id="c2f93-196">Monitor resource usage using hello Azure portal</span></span>

<span data-ttu-id="c2f93-197">적용 되 고 결과 hello에서 로드 하는 toomonitor hello 자원 배정 현황 hello 테 넌 트 데이터베이스를 포함 하는 hello 포털 toohello 풀을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-197">toomonitor hello resource usage that results from hello load being applied, open hello portal toohello pool containing hello tenant databases:</span></span>

1. <span data-ttu-id="c2f93-198">열기 hello [Azure 포털](https://portal.azure.com) toohello 찾아보기 및 *tenants1-&lt;사용자&gt;*  서버입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-198">Open hello [Azure portal](https://portal.azure.com) and browse toohello *tenants1-&lt;USER&gt;* server.</span></span>
1. <span data-ttu-id="c2f93-199">아래로 스크롤하여 탄력적 풀을 찾은 다음 **Pool1**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-199">Scroll down and locate elastic pools and click **Pool1**.</span></span> <span data-ttu-id="c2f93-200">이 풀에는 지금까지 만든 모든 hello 테 넌 트 데이터베이스 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-200">This pool contains all hello tenant databases created so far.</span></span>

<span data-ttu-id="c2f93-201">Hello 관찰 **탄력적 풀 모니터링** 및 **탄력적 데이터베이스 모니터링** 차트입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-201">Observe hello **Elastic pool monitoring** and **Elastic database monitoring** charts.</span></span>

<span data-ttu-id="c2f93-202">hello 풀의 리소스 사용률은 hello 풀의 모든 데이터베이스에 대 한 hello 집계 데이터베이스 사용.</span><span class="sxs-lookup"><span data-stu-id="c2f93-202">hello pool's resource utilization is hello aggregate database utilization for all databases in hello pool.</span></span> <span data-ttu-id="c2f93-203">hello 데이터베이스 차트 hello 5 개의 가장 많이 사용 데이터베이스를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-203">hello database chart shows hello five hottest databases:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/pool1.png)

<span data-ttu-id="c2f93-204">Hello 풀 외에 추가 데이터베이스 때문에 상위 5 개 hello, hello 풀 사용률이 hello 상위 5 개 데이터베이스가 차트에 반영 되지 않은 활동을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-204">Because there are additional databases in hello pool beyond hello top five, hello pool utilization shows activity that is not reflected in hello top five databases chart.</span></span> <span data-ttu-id="c2f93-205">추가 세부 정보를 보려면 **데이터베이스 리소스 사용률**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-205">For additional details, click **Database Resource Utilization**:</span></span>

![](./media/sql-database-saas-tutorial-performance-monitoring/database-utilization.png)


## <a name="set-performance-alerts-on-hello-pool"></a><span data-ttu-id="c2f93-206">Hello 풀에서 성능 경고를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-206">Set performance alerts on hello pool</span></span>

<span data-ttu-id="c2f93-207">트리거를 실행 하는 hello 풀에 대 한 경고를 설정 \>다음과 같이 사용률이 75%:</span><span class="sxs-lookup"><span data-stu-id="c2f93-207">Set an alert on hello pool that triggers on \>75% utilization as follows:</span></span>

1. <span data-ttu-id="c2f93-208">열기 *Pool1* (hello에 *tenants1-\<사용자\>*  서버) hello에 [Azure 포털](https://portal.azure.com)합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-208">Open *Pool1* (on hello *tenants1-\<user\>* server) in hello [Azure portal](https://portal.azure.com).</span></span>
1. <span data-ttu-id="c2f93-209">**경고 규칙**, **+ 경고 추가**를 차례로 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-209">Click **Alert Rules**, and then click **+ Add alert**:</span></span>

   ![경고 추가](media/sql-database-saas-tutorial-performance-monitoring/add-alert.png)

1. <span data-ttu-id="c2f93-211">**높은 DTU** 등과 같은 이름을 제공</span><span class="sxs-lookup"><span data-stu-id="c2f93-211">Provide a name, such as **High DTU**,</span></span>
1. <span data-ttu-id="c2f93-212">Hello 다음 값을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-212">Set hello following values:</span></span>
   * <span data-ttu-id="c2f93-213">**메트릭 = eDTU 백분율**</span><span class="sxs-lookup"><span data-stu-id="c2f93-213">**Metric = eDTU percentage**</span></span>
   * <span data-ttu-id="c2f93-214">**조건 = 보다 큼**.</span><span class="sxs-lookup"><span data-stu-id="c2f93-214">**Condition = greater than**.</span></span>
   * <span data-ttu-id="c2f93-215">**임계값 = 75**.</span><span class="sxs-lookup"><span data-stu-id="c2f93-215">**Threshold = 75**.</span></span>
   * <span data-ttu-id="c2f93-216">**'를 ' hello를 통해 마지막 30 분**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-216">**Period = Over hello last 30 minutes**.</span></span>
1. <span data-ttu-id="c2f93-217">전자 메일 주소 toohello 추가 *추가 관리자 email(s)* 상자 한 클릭 **확인**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-217">Add an email address toohello *Additional administrator email(s)* box and click **OK**.</span></span>

   ![경고 설정](media/sql-database-saas-tutorial-performance-monitoring/alert-rule.png)


## <a name="scale-up-a-busy-pool"></a><span data-ttu-id="c2f93-219">사용 중인 풀 확장</span><span class="sxs-lookup"><span data-stu-id="c2f93-219">Scale up a busy pool</span></span>

<span data-ttu-id="c2f93-220">Hello 집계 부하 수준을 최대한 활용 hello 풀 eDTU 사용량 100%에 도달 하는 풀 toohello 지점에 증가 한 다음 개별 데이터베이스 성능 영향을, hello 풀의 모든 데이터베이스에 대 한 쿼리 응답 시간이 느려질 수 있으므로 잠재적으로.</span><span class="sxs-lookup"><span data-stu-id="c2f93-220">If hello aggregate load level increases on a pool toohello point that it maxes out hello pool and reaches 100% eDTU usage, then individual database performance is affected, potentially slowing query response times for all databases in hello pool.</span></span>

<span data-ttu-id="c2f93-221">**단기**, hello 풀 tooprovide 추가 리소스를 확장 하거나 hello 풀에서 데이터베이스를 제거 하십시오 (옮겨 tooother 풀, 내부 또는 외부로 hello 풀 tooa 독립 실행형 서비스 계층).</span><span class="sxs-lookup"><span data-stu-id="c2f93-221">**Short term**, consider scaling up hello pool tooprovide additional resources, or removing databases from hello pool (moving them tooother pools, or out of hello pool tooa stand-alone service tier).</span></span>

<span data-ttu-id="c2f93-222">**장기적인**, 쿼리를 최적화 하는 것이 좋습니다. 또는 인덱스 사용 tooimprove 데이터베이스 성능.</span><span class="sxs-lookup"><span data-stu-id="c2f93-222">**Longer term**, consider optimizing queries or index usage tooimprove database performance.</span></span> <span data-ttu-id="c2f93-223">Hello에 따라 응용 프로그램의 민감도 tooperformance 발급의 모범 사례 tooscale를 풀 eDTU 사용량 100%에 도달 하기 전에 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-223">Depending on hello application's sensitivity tooperformance issues its best practice tooscale a pool up before it reaches 100% eDTU usage.</span></span> <span data-ttu-id="c2f93-224">경고 toowarn를 사용 하 여 사전에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-224">Use an alert toowarn you in advance.</span></span>

<span data-ttu-id="c2f93-225">Hello 생성기에서 생성 된 hello 부하가 증가 하 여 사용 중인 풀을 시뮬레이션할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-225">You can simulate a busy pool by increasing hello load produced by hello generator.</span></span> <span data-ttu-id="c2f93-226">인해 hello 데이터베이스 tooburst 더 자주 및 총 부하를 증가, 더 긴 hello에 대 한 hello 풀에 hello 요구 사항을 hello 개별 데이터베이스를 변경 하지 않고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-226">Causing hello databases tooburst more frequently, and for longer, increasing hello aggregate load on hello pool without changing hello requirements of hello individual databases.</span></span> <span data-ttu-id="c2f93-227">Hello 풀 수직 확장은 hello 포털 또는 PowerShell에서 쉽게 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-227">Scaling up hello pool is easily done in hello portal or from PowerShell.</span></span> <span data-ttu-id="c2f93-228">이 연습에서는 hello 포털을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-228">This exercise uses hello portal.</span></span>

1. <span data-ttu-id="c2f93-229">설정 *$DemoScenario* = **3**, _데이터베이스당 더 긴를 더 자주 필요 생성 부하_ 의 hello 집계 로드 tooincrease hello 강도 각 데이터베이스에 필요한 hello 최대 부하를 변경 하지 않고 hello 풀입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-229">Set *$DemoScenario* = **3**, _Generate load with longer and more frequent bursts per database_ tooincrease hello intensity of hello aggregate load on hello pool without changing hello peak load required by each database.</span></span>
1. <span data-ttu-id="c2f93-230">키를 눌러 **F5** tooapply 부하 tooall 테 넌 트 데이터베이스.</span><span class="sxs-lookup"><span data-stu-id="c2f93-230">Press **F5** tooapply a load tooall your tenant databases.</span></span>

1. <span data-ttu-id="c2f93-231">너무 이동**Pool1** hello Azure 포털의에서.</span><span class="sxs-lookup"><span data-stu-id="c2f93-231">Go too**Pool1** in hello Azure portal.</span></span>

<span data-ttu-id="c2f93-232">모니터 hello hello 위쪽 차트에서 풀 eDTU 사용량을 증가합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-232">Monitor hello increased pool eDTU usage on hello upper chart.</span></span> <span data-ttu-id="c2f93-233">Hello 새 더 높은 부하 tookick 몇 분 정도 걸리는 있고 toohit 최대 사용률을 시작 하는 hello 풀 신속 하 게 나타납니다 신속 하 게 hello 풀 오버 로드 hello 부하 hello 새 패턴으로 steadies,으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-233">It takes a few minutes for hello new higher load tookick in, but you should quickly see hello pool start toohit max utilization, and as hello load steadies into hello new pattern, it rapidly overloads hello pool.</span></span>

1. <span data-ttu-id="c2f93-234">tooscale hello 풀을 클릭 하 여 **풀 구성** hello의 hello 위쪽 **Pool1** 페이지.</span><span class="sxs-lookup"><span data-stu-id="c2f93-234">tooscale up hello pool, click **Configure pool** at hello top of hello **Pool1** page.</span></span>
1. <span data-ttu-id="c2f93-235">Hello 조정 **풀 eDTU** 너무 설정**100**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-235">Adjust hello **Pool eDTU** setting too**100**.</span></span> <span data-ttu-id="c2f93-236">Hello 풀 edtu로 변경 하는 경우에 (이 여전히 데이터베이스당 최대 50 eDTU) hello 데이터베이스당 설정을 변경 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-236">Changing hello pool eDTU does not change hello per-database settings (which is still 50 eDTU max per database).</span></span> <span data-ttu-id="c2f93-237">Hello hello 오른쪽에 hello 데이터베이스당 설정을 볼 수 있습니다 **풀 구성** 페이지.</span><span class="sxs-lookup"><span data-stu-id="c2f93-237">You can see hello per-database settings on hello right side of hello **Configure pool** page.</span></span>
1. <span data-ttu-id="c2f93-238">클릭 **저장** toosubmit hello 요청 tooscale hello 풀입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-238">Click **Save** toosubmit hello request tooscale hello pool.</span></span>

<span data-ttu-id="c2f93-239">너무 돌아가서**Pool1** > **개요** tooview hello 차트를 모니터링 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-239">Go back too**Pool1** > **Overview** tooview hello monitoring charts.</span></span> <span data-ttu-id="c2f93-240">Hello (몇 개의 데이터베이스와 임의 로드가 하지는 않지만 항상 쉽게 toosee 내릴 일정 시간 동안 실행 될 때까지) hello 풀 더 많은 리소스를 제공 하는 효과 모니터링 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-240">Monitor hello effect of providing hello pool with more resources (although with few databases and a randomized load it’s not always easy toosee conclusively until you run for some time).</span></span> <span data-ttu-id="c2f93-241">보고 동안 hello 차트 약 염두에서 100 %hello 위쪽에 hello에 낮은 차트 100 %hello 여전히 50 Edtu 데이터베이스당 최대는 여전히 50 Edtu를으로 이제 차트 100 Edtu를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-241">While you are looking at hello charts bear in mind that 100% on hello upper chart now represents 100 eDTUs, while on hello lower chart 100% is still 50 eDTUs as hello per-database max is still 50 eDTUs.</span></span>

<span data-ttu-id="c2f93-242">데이터베이스는 온라인 상태이 고 hello 프로세스 전체에서 완벽 하 게 사용할 수 있는 상태로 유지 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-242">Databases remain online and fully available throughout hello process.</span></span> <span data-ttu-id="c2f93-243">Hello에서 마지막 순간 각 데이터베이스는 준비 toobe hello 새 풀 eDTU를 사용 하도록 설정 하는 대로 모든 활성 연결 분리 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-243">At hello last moment as each database is ready toobe enabled with hello new pool eDTU, any active connections are broken.</span></span> <span data-ttu-id="c2f93-244">응용 프로그램 코드 삭제 tooretry 연결 작성 항상 등과 toohello 데이터베이스 hello 수직 풀의 데이터베이스를 다시 연결 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-244">Application code should always be written tooretry dropped connections, and so will reconnect toohello database in hello scaled-up pool.</span></span>

## <a name="load-balance-between-pools"></a><span data-ttu-id="c2f93-245">풀 간의 부하 분산</span><span class="sxs-lookup"><span data-stu-id="c2f93-245">Load balance between pools</span></span>

<span data-ttu-id="c2f93-246">대체는 tooscaling hello 풀을 두 번째 풀을 만들고 데이터베이스 테이블로 이동 toobalance hello 두 개의 풀을 hello 간의 로드 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-246">As an alternative tooscaling up hello pool, create a second pool and move databases into it toobalance hello load between hello two pools.</span></span> <span data-ttu-id="c2f93-247">에이 hello 새 풀을 만들어야 toodo hello와 동일한 서버를 먼저 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-247">toodo this hello new pool must be created on hello same server as hello first.</span></span>

1. <span data-ttu-id="c2f93-248">Hello에 [Azure 포털](https://portal.azure.com)개방형 hello **tenants1-&lt;사용자&gt;**  서버입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-248">In hello [Azure portal](https://portal.azure.com), open hello **tenants1-&lt;USER&gt;** server.</span></span>
1. <span data-ttu-id="c2f93-249">클릭 **+ 새 풀** toocreate hello 현재 서버에서 풀입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-249">Click **+ New pool** toocreate a pool on hello current server.</span></span>
1. <span data-ttu-id="c2f93-250">Hello에 **탄력적 데이터베이스 풀** 템플릿:</span><span class="sxs-lookup"><span data-stu-id="c2f93-250">On hello **Elastic database pool** template:</span></span>

    1. <span data-ttu-id="c2f93-251">설정 **이름** 너무*Pool2*합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-251">Set **Name** too*Pool2*.</span></span>
    1. <span data-ttu-id="c2f93-252">가격 책정 계층으로 hello 둡니다 **표준 풀**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-252">Leave hello pricing tier as **Standard Pool**.</span></span>
    1. <span data-ttu-id="c2f93-253">**구성 풀**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-253">Click **Configure pool**,</span></span>
    1. <span data-ttu-id="c2f93-254">설정 **풀 eDTU** 너무*50 eDTU*합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-254">Set **Pool eDTU** too*50 eDTU*.</span></span>
    1. <span data-ttu-id="c2f93-255">클릭 **데이터베이스를 추가할** toosee 너무 추가할 수 있는 hello 서버의 데이터베이스 목록이*Pool2*합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-255">Click **Add databases** toosee a list of databases on hello server that can be added too*Pool2*.</span></span>
    1. <span data-ttu-id="c2f93-256">모든 10 개의 데이터베이스 toomove 이러한 toohello 새 풀을 선택한 다음 클릭 **선택**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-256">Select any 10 databases toomove these toohello new pool, and then click **Select**.</span></span> <span data-ttu-id="c2f93-257">Hello 부하 생성기를 실행 된 했으므로, 경우 hello 서비스 이미 알고 있는 성능 프로필 hello 기본 50 eDTU 크기 보다 더 큰 풀 걸리며 100 eDTU 설정으로 시작 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-257">If you've been running hello load generator, hello service already knows that your performance profile requires a larger pool than hello default 50 eDTU size and recommends starting with a 100 eDTU setting.</span></span>

    ![권장 사항](media/sql-database-saas-tutorial-performance-monitoring/configure-pool.png)

    1. <span data-ttu-id="c2f93-259">이 자습서에 대 한 hello 기본 50 Edtu 하 고 클릭 **선택** 다시 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-259">For this tutorial, leave hello default at 50 eDTUs, and click **Select** again.</span></span>
    1. <span data-ttu-id="c2f93-260">선택 **확인** toocreate hello 새 풀 및 toomove hello에 데이터베이스를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-260">Select **OK** toocreate hello new pool and toomove hello selected databases into it.</span></span>

<span data-ttu-id="c2f93-261">Hello 풀을 만들고 hello 데이터베이스 이동 하는 몇 분이 걸립니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-261">Creating hello pool and moving hello databases takes a few minutes.</span></span> <span data-ttu-id="c2f93-262">데이터베이스를 이동 하는 마지막 순간 hello까지 온라인 상태이 고 완전히 액세스할 수 있도록 유지 하는 대로 이때 모든 열린 연결이 닫힙니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-262">As databases are moved they remain online and fully accessible until hello very last moment, at which point any open connections are closed.</span></span> <span data-ttu-id="c2f93-263">몇 가지 재시도 논리를 설정한 상태로 클라이언트는 다음 toohello 데이터베이스 hello 새 풀에 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-263">As long as you have some retry logic, clients will then connect toohello database in hello new pool.</span></span>

<span data-ttu-id="c2f93-264">너무 찾아보기**Pool2** (hello에 *tenants1* 서버) tooopen 풀 hello 및 성능을 모니터링 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-264">Browse too**Pool2** (on hello *tenants1* server) tooopen hello pool and monitor its performance.</span></span> <span data-ttu-id="c2f93-265">표시 되지 않는 경우 프로 비전 hello 새 풀 toocomplete을 기다립니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-265">If you don't see it, wait for provisioning of hello new pool toocomplete.</span></span>

<span data-ttu-id="c2f93-266">이제 *Pool1*의 리소스 사용량이 떨어지고 *Pool2*에 유사한 부하가 걸려 있는 것으로 나타나야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-266">You now see that resource usage on *Pool1* has dropped and that *Pool2* is now similarly loaded.</span></span>

## <a name="manage-performance-of-a-single-database"></a><span data-ttu-id="c2f93-267">단일 데이터베이스의 성능 관리</span><span class="sxs-lookup"><span data-stu-id="c2f93-267">Manage performance of a single database</span></span>

<span data-ttu-id="c2f93-268">Hello 풀 구성에 따라 지속적인된 높은 부하에서 발생 하는 풀에서 단일 데이터베이스의 경우 hello 풀의 toodominate hello 리소스는 경향이 및 다른 데이터베이스에 영향을 줄 수 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-268">If a single database in a pool experiences a sustained high load, depending on hello pool configuration, it may tend toodominate hello resources in hello pool and impact other databases.</span></span> <span data-ttu-id="c2f93-269">Hello 작업이 일정 시간 동안 가능성이 toocontinue 인 경우 hello 풀에서 hello 데이터베이스를 일시적으로 이동할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-269">If hello activity is likely toocontinue for some time, hello database can be temporarily moved out of hello pool.</span></span> <span data-ttu-id="c2f93-270">이렇게 하면 hello 데이터베이스 toohave hello 추가 리소스가 필요한 하 고 다른 데이터베이스 hello에서 격리 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-270">This allows hello database toohave hello extra resources it needs, and isolates it from hello other databases.</span></span>

<span data-ttu-id="c2f93-271">이 연습 티켓 인기 있는 함께 대 한 판매에 이동 하는 경우 높은 부하가 발생 하는 Contoso 함께 Hall의 hello 효과 시뮬레이션 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-271">This exercise simulates hello effect of Contoso Concert Hall experiencing a high load when tickets go on sale for a popular concert.</span></span>

1. <span data-ttu-id="c2f93-272">Hello 열기... \\ *데모 PerformanceMonitoringAndManagement.ps1* 스크립트입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-272">Open hello …\\*Demo-PerformanceMonitoringAndManagement.ps1* script.</span></span>
1. <span data-ttu-id="c2f93-273">**$DemoScenario = 5를 설정하고, 표준 부하에 더하여 단일 테넌트에 대한 높은 부하(약 95 DTU)를 생성합니다.**</span><span class="sxs-lookup"><span data-stu-id="c2f93-273">Set **$DemoScenario = 5, Generate a normal load plus a high load on a single tenant (approx. 95 DTU).**</span></span>
1. <span data-ttu-id="c2f93-274">**$SingleTenantDatabaseName = contosoconcerthall** 설정</span><span class="sxs-lookup"><span data-stu-id="c2f93-274">Set **$SingleTenantDatabaseName = contosoconcerthall**</span></span>
1. <span data-ttu-id="c2f93-275">사용 하 여 hello 스크립트 실행 **F5**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-275">Execute hello script using **F5**.</span></span>


1. <span data-ttu-id="c2f93-276">Hello에 [Azure 포털](https://portal.azure.com) 열고 **Pool1**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-276">In hello [Azure portal](https://portal.azure.com) open **Pool1**.</span></span>
1. <span data-ttu-id="c2f93-277">Hello 검사 **탄력적 풀 모니터링** 차트 및 풀 eDTU 사용량 증가 hello 찾아보십시오.</span><span class="sxs-lookup"><span data-stu-id="c2f93-277">Inspect hello **Elastic pool monitoring** chart and look for hello increased pool eDTU usage.</span></span> <span data-ttu-id="c2f93-278">2 분 정도로 후 hello 더 높은 부하에서 tookick 시작 해야 하 고 hello 풀 사용률이 100%에 도달 있는지 신속 하 게 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-278">After a minute or two, hello higher load should start tookick in, and you should quickly see that hello pool hits 100% utilization.</span></span>
1. <span data-ttu-id="c2f93-279">Hello 검사 **탄력적 데이터베이스 모니터링** 지난 시간 hello에서 hello 가장 많이 사용 데이터베이스를 보여 주는 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-279">Inspect hello **Elastic database monitoring** display which shows hello hottest databases in hello past hour.</span></span> <span data-ttu-id="c2f93-280">hello *contosoconcerthall* hello 5 가장 많이 사용 하는 데이터베이스 중 하나로 데이터베이스 곧 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-280">hello *contosoconcerthall* database should soon appear as one of hello five hottest databases.</span></span>
1. <span data-ttu-id="c2f93-281">**Hello 탄력적 데이터베이스 모니터링 클릭** **차트** hello 열리는 **데이터베이스 리소스 사용률** hello 데이터베이스를 모니터링할 수 있는 페이지.</span><span class="sxs-lookup"><span data-stu-id="c2f93-281">**Click on hello Elastic database monitoring** **chart** and it opens hello **Database Resource Utilization** page where you can monitor any of hello databases.</span></span> <span data-ttu-id="c2f93-282">이렇게 하면 hello에 대 한 hello 표시 격리 *contosoconcerthall* 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-282">This lets you isolate hello display for hello *contosoconcerthall* database.</span></span>
1. <span data-ttu-id="c2f93-283">데이터베이스의 hello 목록에서 클릭 **contosoconcerthall**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-283">From hello list of databases, click **contosoconcerthall**.</span></span>
1. <span data-ttu-id="c2f93-284">클릭 **가격 책정 계층 (배율 Dtu)** tooopen hello **성능을 구성** 페이지 hello 데이터베이스에 대 한 독립 실행형 성능 수준을 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-284">Click **Pricing Tier (scale DTUs)** tooopen hello **Configure performance** page where you can set a stand-alone performance level for hello database.</span></span>
1. <span data-ttu-id="c2f93-285">Hello 클릭 **표준** hello 표준 계층에 tooopen hello 크기 조정 옵션을 탭 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-285">Click on hello **Standard** tab tooopen hello scale options in hello Standard tier.</span></span>
1. <span data-ttu-id="c2f93-286">Hello 슬라이드 **DTU 슬라이더** tooright tooselect **100** Dtu입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-286">Slide hello **DTU slider** tooright tooselect **100** DTUs.</span></span> <span data-ttu-id="c2f93-287">참고가 해당 toohello 서비스 목표 **S3**합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-287">Note this corresponds toohello service objective, **S3**.</span></span>
1. <span data-ttu-id="c2f93-288">클릭 **적용** toomove hello hello 풀에서 데이터베이스와 쉽게는 *표준 S3* 데이터베이스입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-288">Click **Apply** toomove hello database out of hello pool and make it a *Standard S3* database.</span></span>
1. <span data-ttu-id="c2f93-289">크기 조정 되 면 완료, hello contosoconcerthall 데이터베이스에는 모니터 hello 영향 및 hello 탄력적 풀 및 데이터베이스 블레이드에서 Pool1 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-289">Once scaling is complete, monitor hello effect on hello contosoconcerthall database and Pool1 on hello elastic pool and database blades.</span></span>

<span data-ttu-id="c2f93-290">Hello contosoconcerthall 데이터베이스에 로드 양이 많으면 hello subsides 되 면 신속 하 게 반환 해야 toohello 풀 tooreduce 비용입니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-290">Once hello high load on hello contosoconcerthall database subsides you should promptly return it toohello pool tooreduce its cost.</span></span> <span data-ttu-id="c2f93-291">확실 하지 않으면 하는 경우에 설정할 수 있습니다 경고 hello 데이터베이스에 있는 수행 됩니다 트리거할 해당 DTU 사용량 hello 데이터베이스당 아래로 떨어질 경우 hello 풀에 최대 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-291">If it’s unclear when that will happen you could set an alert on hello database that will trigger when its DTU usage drops below hello per-database max on hello pool.</span></span> <span data-ttu-id="c2f93-292">풀로 데이터베이스 이동은 연습 5에서 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-292">Moving a database into a pool is described in exercise 5.</span></span>

## <a name="other-performance-management-patterns"></a><span data-ttu-id="c2f93-293">다른 성능 관리 패턴</span><span class="sxs-lookup"><span data-stu-id="c2f93-293">Other Performance Management Patterns</span></span>

<span data-ttu-id="c2f93-294">**선점형 배율** hello 실습 위의 방법을 tooscale 격리 된 데이터베이스를 알고 있는 데이터베이스 toolook에 대 한 탐색 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-294">**Pre-emptive scaling** In hello exercise above where you explored how tooscale an isolated database, you knew which database toolook for.</span></span> <span data-ttu-id="c2f93-295">Contoso 함께 Hall의 hello 관리에 Wingtips hello 임박 했음을 알리는 티켓이 판매 정보를 얻으려면 경우 hello 데이터베이스 이동 되었을 hello 풀에서 미리 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-295">If hello management of Contoso Concert Hall had informed Wingtips of hello impending ticket sale, hello database could have been moved out of hello pool pre-emptively.</span></span> <span data-ttu-id="c2f93-296">그렇지 않으면 가능성이 필요 했을 것 hello 풀 또는 hello 데이터베이스 toospot에 알림을 일어나 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-296">Otherwise, it would likely have required an alert on hello pool or hello database toospot what was happening.</span></span> <span data-ttu-id="c2f93-297">이 대 한 hello에서 toolearn hello 풀 성능 저하의 메시지가에 다른 테 넌 트 않을 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-297">You wouldn’t want toolearn about this from hello other tenants in hello pool complaining of degraded performance.</span></span> <span data-ttu-id="c2f93-298">와 경우 hello 테 넌 트 hello 풀에서 Azure 자동화 runbook toomove hello 데이터베이스를 설정할 수 있으며 다음 백업에서 다시 정의 된 일정에 따라 추가 리소스는 필요한 기간을 예측할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-298">And if hello tenant can predict how long they will need additional resources you can set up an Azure Automation runbook toomove hello database out of hello pool and then back in again on a defined schedule.</span></span>

<span data-ttu-id="c2f93-299">**테 넌 트 셀프 서비스 크기 조정** 배율 쉽게 hello 관리 API 통해 호출 하는 작업 이기 때문에 쉽게 hello 기능 tooscale 테 넌 트 데이터베이스를 테 넌 트 웹 응용 프로그램에 빌드하고 수 SaaS 서비스의 기능으로 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-299">**Tenant self-service scaling** Because scaling is a task easily called via hello management API, you can easily build hello ability tooscale tenant databases into your tenant-facing application, and offer it as a feature of your SaaS service.</span></span> <span data-ttu-id="c2f93-300">예를 들어 self-administer 아마도 직접 연결 된 위쪽 / 아래쪽 크기 조정 하는 테 넌 트를 통해 tootheir 청구!</span><span class="sxs-lookup"><span data-stu-id="c2f93-300">For example, let tenants self-administer scaling up and down, perhaps linked directly tootheir billing!</span></span>

<span data-ttu-id="c2f93-301">**일정 toomatch 사용 패턴에 위와 아래로 풀 크기 조정**</span><span class="sxs-lookup"><span data-stu-id="c2f93-301">**Scaling a pool up and down on a schedule toomatch usage patterns**</span></span>

<span data-ttu-id="c2f93-302">집계 테 넌 트 사용은 예측 가능한 사용 패턴을 따릅니다, 여기서 아래로 일정에 따라 Azure 자동화 tooscale 풀을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-302">Where aggregate tenant usage follows predictable usage patterns, you can use Azure Automation tooscale a pool up and down on a schedule.</span></span> <span data-ttu-id="c2f93-303">예를 들어 리소스 요구 사항이 떨어지는 것으로 알고 있는 평일 오후 6시 후에 풀을 축소하고 오전 6시 전에 다시 확장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-303">For example, scale a pool down after 6pm and up again before 6am on weekdays when you know there is a drop in resource requirements.</span></span>



## <a name="next-steps"></a><span data-ttu-id="c2f93-304">다음 단계</span><span class="sxs-lookup"><span data-stu-id="c2f93-304">Next steps</span></span>

<span data-ttu-id="c2f93-305">이 자습서에서는 다음 방법에 대해 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-305">In this tutorial you learn how to:</span></span>

> [!div class="checklist"]
> * <span data-ttu-id="c2f93-306">제공 된 부하 생성기를 실행 하 여 hello 테 넌 트 데이터베이스에서의 사용을 시뮬레이션 합니다.</span><span class="sxs-lookup"><span data-stu-id="c2f93-306">Simulate usage on hello tenant databases by running a provided load generator</span></span>
> * <span data-ttu-id="c2f93-307">올바르게 응답 하지 않는 부하 toohello 증가 하는 대로 모니터 hello 테 넌 트 데이터베이스</span><span class="sxs-lookup"><span data-stu-id="c2f93-307">Monitor hello tenant databases as they respond toohello increase in load</span></span>
> * <span data-ttu-id="c2f93-308">탄력적 풀 응답 toohello 높아지는 데이터베이스 부하에 hello 수직 확장</span><span class="sxs-lookup"><span data-stu-id="c2f93-308">Scale up hello Elastic pool in response toohello increased database load</span></span>
> * <span data-ttu-id="c2f93-309">두 번째 탄력적 풀 tooload 균형 hello 데이터베이스 활동을 프로 비전</span><span class="sxs-lookup"><span data-stu-id="c2f93-309">Provision a second Elastic pool tooload balance hello database activity</span></span>

[<span data-ttu-id="c2f93-310">단일 테넌트 복원 자습서</span><span class="sxs-lookup"><span data-stu-id="c2f93-310">Restore a single tenant tutorial</span></span>](sql-database-saas-tutorial-restore-single-tenant.md)


## <a name="additional-resources"></a><span data-ttu-id="c2f93-311">추가 리소스</span><span class="sxs-lookup"><span data-stu-id="c2f93-311">Additional resources</span></span>

* <span data-ttu-id="c2f93-312">추가 [hello Wingtip SaaS 응용 프로그램 배포를 구축 하는 자습서](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span><span class="sxs-lookup"><span data-stu-id="c2f93-312">Additional [tutorials that build upon hello Wingtip SaaS application deployment](sql-database-wtp-overview.md#sql-database-wingtip-saas-tutorials)</span></span>
* [<span data-ttu-id="c2f93-313">SQL 탄력적 풀</span><span class="sxs-lookup"><span data-stu-id="c2f93-313">SQL Elastic pools</span></span>](sql-database-elastic-pool.md)
* [<span data-ttu-id="c2f93-314">Azure Automation</span><span class="sxs-lookup"><span data-stu-id="c2f93-314">Azure automation</span></span>](../automation/automation-intro.md)
* <span data-ttu-id="c2f93-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) - Log Analytics 설정 및 사용 자습서</span><span class="sxs-lookup"><span data-stu-id="c2f93-315">[Log Analytics](sql-database-saas-tutorial-log-analytics.md) - Setting up and using Log Analytics tutorial</span></span>
