---
title: "Azure 활동 로그 개요 | Microsoft Docs"
description: "Azure 활동 로그란 무엇이고 Azure 구독 내에서 발생하는 이벤트를 파악하는 데 어떻게 사용할 수 있는지 알아봅니다."
author: johnkemnetz
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: c274782f-039d-4c28-9ddb-f89ce21052c7
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/02/2017
ms.author: johnkem
ms.openlocfilehash: 8ff9f73fc0732cd2227b7e0cc1091e04d69014eb
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/18/2017
---
# <a name="monitor-subscription-activity-with-the-azure-activity-log"></a><span data-ttu-id="6533b-103">Azure 활동 로그로 구독 활동 모니터링</span><span class="sxs-lookup"><span data-stu-id="6533b-103">Monitor Subscription Activity with the Azure Activity Log</span></span>
<span data-ttu-id="6533b-104">**Azure 활동 로그**는 Azure에서 발생한 구독 수준 이벤트에 대한 정보를 제공하는 구독 로그입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-104">The **Azure Activity Log** is a subscription log that provides insight into subscription-level events that have occurred in Azure.</span></span> <span data-ttu-id="6533b-105">여기에는 Azure Resource Manager 작동 데이터에서 서비스 상태 이벤트 업데이트에 이르기까지 광범위한 데이터가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-105">This includes a range of data, from Azure Resource Manager operational data to updates on Service Health events.</span></span> <span data-ttu-id="6533b-106">관리 범주에서 구독의 제어 평면 이벤트를 보고하므로, 이전에는 활동 로그의 명칭이 "감사 로그" 또는 "작업 로그"였습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-106">The Activity Log was previously known as “Audit Logs” or “Operational Logs,” since the Administrative category reports control-plane events for your subscriptions.</span></span> <span data-ttu-id="6533b-107">활동 로그를 통해 구독의 리소스에 대한 모든 쓰기 작업(PUT, POST, DELETE)에서 '무엇을, 누가, 언제'를 판단할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-107">Using the Activity Log, you can determine the ‘what, who, and when’ for any write operations (PUT, POST, DELETE) taken on the resources in your subscription.</span></span> <span data-ttu-id="6533b-108">또한 작업 및 기타 관련 속성의 상태도 이해할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-108">You can also understand the status of the operation and other relevant properties.</span></span> <span data-ttu-id="6533b-109">활동 로그에는 읽기(GET) 작업 또는 Classic/"RDFE" 모델을 사용하는 리소스에 대한 작업이 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-109">The Activity Log does not include read (GET) operations or operations for resources that use the Classic/"RDFE" model.</span></span>

![<span data-ttu-id="6533b-110">활동 로그 및 다른 종류의 로그</span><span class="sxs-lookup"><span data-stu-id="6533b-110">Activity Logs vs other types of logs</span></span> ](./media/monitoring-overview-activity-logs/Activity_Log_vs_other_logs_v5.png)

<span data-ttu-id="6533b-111">그림 1: 활동 로그 및 다른 종류의 로그</span><span class="sxs-lookup"><span data-stu-id="6533b-111">Figure 1: Activity Logs vs other types of logs</span></span>

<span data-ttu-id="6533b-112">활동 로그는 [진단 로그](monitoring-overview-of-diagnostic-logs.md)와 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-112">The Activity Log differs from [Diagnostic Logs](monitoring-overview-of-diagnostic-logs.md).</span></span> <span data-ttu-id="6533b-113">활동 로그는 외부("제어 평면")의 리소스에 대한 작업 관련 데이터를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-113">Activity Logs provide data about the operations on a resource from the outside (the "control plane").</span></span> <span data-ttu-id="6533b-114">진단 로그는 리소스에 의해 내보내지며, 해당 리소스의 작업("데이터 평면")에 대한 정보를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-114">Diagnostics Logs are emitted by a resource and provide information about the operation of that resource (the "data plane").</span></span>

<span data-ttu-id="6533b-115">Azure Portal, CLI, PowerShell cmdlet 및 Azure Monitor REST API를 사용하여 활동 로그에서 이벤트를 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-115">You can retrieve events from your Activity Log using the Azure portal, CLI, PowerShell cmdlets, and Azure Monitor REST API.</span></span>


> [!WARNING]
> <span data-ttu-id="6533b-116">Azure 활동 로그는 주로 Azure Resource Manager에서 발생하는 활동을 대상으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-116">The Azure Activity Log is primarily for activities that occur in Azure Resource Manager.</span></span> <span data-ttu-id="6533b-117">클래식/RDFE 모델을 사용하여 리소스를 추적하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-117">It does not track resources using the Classic/RDFE model.</span></span> <span data-ttu-id="6533b-118">일부 클래식 리소스 유형(예: Microsoft.ClassicCompute)에는 Azure Resource Manager의 프록시 리소스 공급자가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-118">Some Classic resource types have a proxy resource provider in Azure Resource Manager (for example, Microsoft.ClassicCompute).</span></span> <span data-ttu-id="6533b-119">이러한 프록시 리소스 공급자를 사용하는 Azure Resource Manager를 통해 클래식 리소스 유형과 상호 작용하면 작업이 활동 로그에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-119">If you interact with a Classic resource type through Azure Resource Manager using these proxy resource providers, the operations appear in the Activity Log.</span></span> <span data-ttu-id="6533b-120">클래식 포털의 클래식 리소스 유형이나 Azure Resource Manager 프록시 외부의 클래식 리소스 유형과 상호 작용할 경우 사용자 작업은 작업 로그에만 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-120">If you interact with a Classic resource type in the Classic portal or otherwise outside of the Azure Resource Manager proxies, your actions are only recorded in the Operation Log.</span></span> <span data-ttu-id="6533b-121">작업 로그는 클래식 포털에서만 액세스될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-121">The Operation Log is accessible only in the Classic portal.</span></span>
>
>

<span data-ttu-id="6533b-122">활동 로그를 소개하는 다음 동영상을 봅니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-122">View the following video introducing the Activity Log.</span></span>
> [!VIDEO https://channel9.msdn.com/Blogs/Seth-Juarez/Logs-John-Kemnetz/player]
> 
>

## <a name="categories-in-the-activity-log"></a><span data-ttu-id="6533b-123">활동 로그의 범주</span><span class="sxs-lookup"><span data-stu-id="6533b-123">Categories in the Activity Log</span></span>
<span data-ttu-id="6533b-124">활동 로그에는 여러 데이터 범주가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-124">The Activity Log contains several categories of data.</span></span> <span data-ttu-id="6533b-125">이러한 범주의 스키마에 대한 전체 정보는 [이 문서를 참조하세요](monitoring-activity-log-schema.md).</span><span class="sxs-lookup"><span data-stu-id="6533b-125">For full details on the schemata of these categories, [see this article](monitoring-activity-log-schema.md).</span></span> <span data-ttu-id="6533b-126">내용은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-126">These include:</span></span>
* <span data-ttu-id="6533b-127">**관리** - 이 범주에는 Resource Manager를 통해 수행한 모든 만들기, 업데이트, 삭제 및 동작 작업의 레코드가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-127">**Administrative** - This category contains the record of all create, update, delete, and action operations performed through Resource Manager.</span></span> <span data-ttu-id="6533b-128">이 범주에 표시되는 이벤트의 유형의 예로는 "가상 컴퓨터 만들기", "네트워크 보안 그룹 삭제" 등이 있습니다. 사용자나 응용 프로그램이 Resource Manager를 사용하여 취하는 모든 동작은 특정 리소스 종류에 대한 작업으로 모델링됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-128">Examples of the types of events you would see in this category include "create virtual machine" and "delete network security group" Every action taken by a user or application using Resource Manager is modeled as an operation on a particular resource type.</span></span> <span data-ttu-id="6533b-129">작업 유형이 쓰기, 삭제 또는 동작이면 해당 작업의 시작 및 성공이나 실패 레코드가 모두 관리 범주에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-129">If the operation type is Write, Delete, or Action, the records of both the start and success or fail of that operation are recorded in the Administrative category.</span></span> <span data-ttu-id="6533b-130">관리 범주에는 구독의 역할 기반 액세스 제어 변경 내용도 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-130">The Administrative category also includes any changes to role-based access control in a subscription.</span></span>
* <span data-ttu-id="6533b-131">**서비스 상태** - 이 범주에는 Azure에서 발생한 모든 서비스 상태 관련 인시던트의 레코드가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-131">**Service Health** - This category contains the record of any service health incidents that have occurred in Azure.</span></span> <span data-ttu-id="6533b-132">이 범주에 표시되는 이벤트 유형의 예로는 "미국 동부의 SQL Azure가 가동 중지 상태입니다." 등이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-132">An example of the type of event you would see in this category is "SQL Azure in East US is experiencing downtime."</span></span> <span data-ttu-id="6533b-133">서비스 상태 이벤트는 작업 필요, 복구 지원, 인시던트, 유지 관리, 정보 또는 보안의 5가지 중 하나이며 구독에 이벤트의 영향을 받는 리소스가 있는 경우에만 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-133">Service health events come in five varieties: Action Required, Assisted Recovery, Incident, Maintenance, Information, or Security, and only appear if you have a resource in the subscription that would be impacted by the event.</span></span>
* <span data-ttu-id="6533b-134">**경고** - 이 범주에는 모든 Azure 경고 활성화의 레코드가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-134">**Alert** - This category contains the record of all activations of Azure alerts.</span></span> <span data-ttu-id="6533b-135">이 범주에 표시되는 이벤트 유형의 예로는 "지난 5분 동안 myVM의 CPU 사용률이 80%를 초과했습니다." 등이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-135">An example of the type of event you would see in this category is "CPU % on myVM has been over 80 for the past 5 minutes."</span></span> <span data-ttu-id="6533b-136">다수의 Azure 시스템에서 경고 개념이 사용됩니다. 일종의 규칙을 정의하여 조건이 해당 규칙과 일치하면 알림을 수신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-136">A variety of Azure systems have an alerting concept -- you can define a rule of some sort and receive a notification when conditions match that rule.</span></span> <span data-ttu-id="6533b-137">지원되는 Azure 경고 유형이 '활성화'되거나 알림 생성을 위한 조건이 충족될 때마다 활성화 레코드도 이 활동 로그 범주로 푸시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-137">Each time a supported Azure alert type 'activates,' or the conditions are met to generate a notification, a record of the activation is also pushed to this category of the Activity Log.</span></span>
* <span data-ttu-id="6533b-138">**자동 크기 조정** - 이 범주에는 구독에서 정의한 자동 크기 조정 설정을 기준으로 하는 자동 크기 조정 엔진 작업 관련 이벤트의 레코드가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-138">**Autoscale** - This category contains the record of any events related to the operation of the autoscale engine based on any autoscale settings you have defined in your subscription.</span></span> <span data-ttu-id="6533b-139">이 범주에 표시되는 이벤트 유형의 예로는 "자동 크기 조정 강화 동작이 실패했습니다." 등이 있습니다</span><span class="sxs-lookup"><span data-stu-id="6533b-139">An example of the type of event you would see in this category is "Autoscale scale up action failed."</span></span> <span data-ttu-id="6533b-140">자동 크기 조정을 사용하면 자동 크기 조정 설정을 사용하여 시간 및/또는 로드(메트릭) 데이터를 기준으로 지원되는 리소스 종류의 인스턴스 수를 자동으로 규모 확장하거나 규모 감축할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-140">Using autoscale, you can automatically scale out or scale in the number of instances in a supported resource type based on time of day and/or load (metric) data using an autoscale setting.</span></span> <span data-ttu-id="6533b-141">강화 또는 규모 축소 조건이 충족되면 시작 이벤트와 성공 또는 실패 이벤트가 이 범주에 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-141">When the conditions are met to scale up or down, the start and succeeded or failed events are recorded in this category.</span></span>
* <span data-ttu-id="6533b-142">**권장 사항** - 이 범주에는 웹 사이트 및 SQL Server와 같은 특정 리소스 종류의 권장 이벤트가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-142">**Recommendation** - This category contains recommendation events from certain resource types, such as web sites and SQL servers.</span></span> <span data-ttu-id="6533b-143">이러한 이벤트는 리소스를 보다 효율적으로 사용하는 권장 방법을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-143">These events offer recommendations for how to better utilize your resources.</span></span> <span data-ttu-id="6533b-144">권장 사항을 내보내는 리소스가 있는 경우에만 이러한 형식의 이벤트가 수신됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-144">You only receive events of this type if you have resources that emit recommendations.</span></span>
* <span data-ttu-id="6533b-145">**정책, 보안 및 리소스 상태** - 이러한 범주는 이벤트를 포함하지 않으며 나중에 사용하도록 예약됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-145">**Policy, Security, and Resource Health** - These categories do not contain any events; they are reserved for future use.</span></span>

## <a name="event-schema-per-category"></a><span data-ttu-id="6533b-146">범주별 이벤트 스키마</span><span class="sxs-lookup"><span data-stu-id="6533b-146">Event schema per category</span></span>
[<span data-ttu-id="6533b-147">범주별 활동 로그 이벤트 스키마를 파악하려면 이 문서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6533b-147">See this article to understand the Activity Log event schema per category.</span></span>](monitoring-activity-log-schema.md)

## <a name="what-you-can-do-with-the-activity-log"></a><span data-ttu-id="6533b-148">활동 로그에서 수행할 수 있는 작업</span><span class="sxs-lookup"><span data-stu-id="6533b-148">What you can do with the Activity Log</span></span>
<span data-ttu-id="6533b-149">활동 로그를 통해 수행할 수 있는 몇 가지 작업은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-149">Here are some of the things you can do with the Activity Log:</span></span>

![Azure 활동 로그](./media/monitoring-overview-activity-logs/Activity_Log_Overview_v3.png)


* <span data-ttu-id="6533b-151">**Azure Portal**에서 쿼리하고 봅니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-151">Query and view it in the **Azure portal**.</span></span>
* [<span data-ttu-id="6533b-152">활동 로그 이벤트에서 경고 만들기</span><span class="sxs-lookup"><span data-stu-id="6533b-152">Create an alert on an Activity Log event.</span></span>](monitoring-activity-log-alerts.md)
* <span data-ttu-id="6533b-153">[타사 서비스 또는 사용자 지정 분석 솔루션(예: PowerBI)으로 수집을 위해 **Event Hub**](monitoring-stream-activity-logs-event-hubs.md)로 스트림합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-153">[Stream it to an **Event Hub**](monitoring-stream-activity-logs-event-hubs.md) for ingestion by a third-party service or custom analytics solution such as PowerBI.</span></span>
* <span data-ttu-id="6533b-154">[**PowerBI 콘텐츠 팩**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/)을 사용하여 PowerBI에서 분석합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-154">Analyze it in PowerBI using the [**PowerBI content pack**](https://powerbi.microsoft.com/documentation/powerbi-content-pack-azure-audit-logs/).</span></span>
* <span data-ttu-id="6533b-155">[보관 또는 수동 검사를 위해 **저장소 계정**에 저장합니다](monitoring-archive-activity-log.md).</span><span class="sxs-lookup"><span data-stu-id="6533b-155">[Save it to a **Storage Account** for archival or manual inspection](monitoring-archive-activity-log.md).</span></span> <span data-ttu-id="6533b-156">**로그 프로필**을 사용하여 보존 기간(일)을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-156">You can specify the retention time (in days) using the **Log Profile**.</span></span>
* <span data-ttu-id="6533b-157">PowerShell Cmdlet, CLI 또는 REST API를 통해 쿼리합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-157">Query it via PowerShell Cmdlet, CLI, or REST API.</span></span>

## <a name="query-the-activity-log-in-the-azure-portal"></a><span data-ttu-id="6533b-158">Azure Portal에서 활동 로그 쿼리</span><span class="sxs-lookup"><span data-stu-id="6533b-158">Query the Activity Log in the Azure portal</span></span>
<span data-ttu-id="6533b-159">Azure Portal 내에서는 다음과 같은 여러 위치에서 활동 로그를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-159">Within the Azure portal you can view your Activity Log in several places:</span></span>
* <span data-ttu-id="6533b-160">**활동 로그 블레이드**: 왼쪽의 탐색 창에서 “추가 서비스” 아래의 활동 로그를 검색하면 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-160">The **Activity Log blade**, which you can access by searching for the Activity Log under "More Services" in the left-hand navigation pane.</span></span>
* <span data-ttu-id="6533b-161">**모니터 블레이드**: 왼쪽의 탐색 창에서 기본적으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-161">The **Monitor blade**, which appears by default in the left-hand navigation pane.</span></span> <span data-ttu-id="6533b-162">활동 로그는 이 Azure Monitor 블레이드의 한 섹션입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-162">The Activity Log is one section of this Azure Monitor blade.</span></span>
* <span data-ttu-id="6533b-163">다양한 리소스의 **리소스 블레이드**: 예를 들어 Virtual Machine에 대한 구성 블레이드입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-163">Any resource's **resource blade**, for example, the configuration blade for a Virtual Machine.</span></span> <span data-ttu-id="6533b-164">활동 로그는 대부분의 이러한 리소스 블레이드에서 섹션 중 하나이며, 클릭하면 해당 특정 리소스와 관련된 이벤트를 자동으로 필터링합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-164">The Activity Log is be one of the sections on most of these resource blades, and clicking on it automatically filters the events to those related to that specific resource.</span></span>

<span data-ttu-id="6533b-165">Azure Portal에서 이러한 필드에 의해 활동 로그를 필터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-165">In the Azure portal, you can filter your Activity Log by these fields:</span></span>
* <span data-ttu-id="6533b-166">Timespan - 이벤트에 대한 시작 및 종료 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-166">Timespan - The start and end time for events.</span></span>
* <span data-ttu-id="6533b-167">범주 - 위에서 설명한 것과 같이 이벤트 범주입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-167">Category - The event category as described above.</span></span>
* <span data-ttu-id="6533b-168">구독 - 하나 이상의 Azure 구독 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-168">Subscription - One or more Azure subscription names.</span></span>
* <span data-ttu-id="6533b-169">리소스 그룹 - 해당 구독 내에서 하나 이상의 리소스 그룹입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-169">Resource group - One or more resource groups within those subscriptions.</span></span>
* <span data-ttu-id="6533b-170">리소스(이름) - 특정 리소스의 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-170">Resource (name) - The name of a specific resource.</span></span>
* <span data-ttu-id="6533b-171">리소스 종류 - 리소스의 종류입니다(예: Microsoft.Compute/virtualmachines).</span><span class="sxs-lookup"><span data-stu-id="6533b-171">Resource type - The type of resource, for example, Microsoft.Compute/virtualmachines.</span></span>
* <span data-ttu-id="6533b-172">작업 이름 - Azure Resource Manager 작업의 이름입니다(예: Microsoft.SQL/servers/Write).</span><span class="sxs-lookup"><span data-stu-id="6533b-172">Operation name - The name of an Azure Resource Manager operation, for example, Microsoft.SQL/servers/Write.</span></span>
* <span data-ttu-id="6533b-173">심각도 - 이벤트의 심각도 수준입니다(정보 제공, 경고, 오류, 중요).</span><span class="sxs-lookup"><span data-stu-id="6533b-173">Severity - The severity level of the event (Informational, Warning, Error, Critical).</span></span>
* <span data-ttu-id="6533b-174">이벤트를 시작한 사람 - ‘호출자’ 또는 작업을 수행한 사용자입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-174">Event initiated by - The 'caller,' or user who performed the operation.</span></span>
* <span data-ttu-id="6533b-175">검색 열기 - 모든 이벤트의 모든 필드에서 해당 문자열을 검색하는 열려 있는 텍스트 검색 상자입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-175">Open search - This is an open text search box that searches for that string across all fields in all events.</span></span>

<span data-ttu-id="6533b-176">필터 집합을 정의하면, 나중에 적용된 해당 필터를 사용하여 동일한 쿼리를 다시 수행해야 하는 경우 세션 간에 유지되는 쿼리로 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-176">Once you have defined a set of filters, you can save it as a query that is persisted across sessions if you ever need to perform the same query with those filters applied again in the future.</span></span> <span data-ttu-id="6533b-177">또한 쿼리를 항상 특정 이벤트를 주시하도록 Azure 대시보드에 고정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-177">You can also pin a query to your Azure dashboard to always keep an eye on specific events.</span></span>

<span data-ttu-id="6533b-178">“적용”을 클릭하면 쿼리가 실행되고 일치하는 모든 이벤트를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-178">Clicking "Apply" runs your query and show all matching events.</span></span> <span data-ttu-id="6533b-179">목록에서 이벤트를 클릭하면 해당 이벤트에 대한 요약 및 해당 이벤트의 전체 원시 JSON이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-179">Clicking on any event in the list shows the summary of that event as well as the full raw JSON of that event.</span></span>

<span data-ttu-id="6533b-180">[Log Analytics 활동 로그 분석 솔루션](../log-analytics/log-analytics-activity.md)의 활동 로그 데이터를 표시하는 **로그 검색** 아이콘을 클릭하면 더 많은 기능에 대해 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-180">For even more power, you can click the **Log Search** icon, which displays your Activity Log data in the [Log Analytics Activity Log Analytics solution](../log-analytics/log-analytics-activity.md).</span></span> <span data-ttu-id="6533b-181">활동 로그 블레이드는 로그에 대한 기본 필터/찾아보기 경험을 제공하지만, Log Analytics를 사용하면 더 효과적으로 데이터를 피벗, 쿼리 및 시각화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-181">The Activity Log blade offers a basic filter/browse experience on logs, but Log Analytics enables you to pivot, query, and visualize your data in more powerful ways.</span></span>

## <a name="export-the-activity-log-with-a-log-profile"></a><span data-ttu-id="6533b-182">로그 프로필을 사용하여 활동 로그 내보내기</span><span class="sxs-lookup"><span data-stu-id="6533b-182">Export the Activity Log with a Log Profile</span></span>
<span data-ttu-id="6533b-183">**로그 프로필**은 활동 로그를 내보내는 방식을 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-183">A **Log Profile** controls how your Activity Log is exported.</span></span> <span data-ttu-id="6533b-184">로그 프로필을 사용하여 다음을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-184">Using a Log Profile, you can configure:</span></span>

* <span data-ttu-id="6533b-185">활동 로그를 보낼 위치(Storage 계정 또는 Event Hubs)</span><span class="sxs-lookup"><span data-stu-id="6533b-185">Where the Activity Log should be sent (Storage Account or Event Hubs)</span></span>
* <span data-ttu-id="6533b-186">보낼 이벤트 범주(쓰기, 삭제, 작업)</span><span class="sxs-lookup"><span data-stu-id="6533b-186">Which event categories (Write, Delete, Action) should be sent.</span></span> <span data-ttu-id="6533b-187">*로그 프로필 및 활동 로그 이벤트에서 "범주"의 의미는 다릅니다. 로그 프로필에서 "범주"는 작업 유형(쓰기, 삭제 작업)을 나타냅니다. 활동 로그 이벤트에서 "범주" 속성은 원본 또는 이벤트의 유형(예: 관리, ServiceHealth, 경고 등)을 나타냅니다.*</span><span class="sxs-lookup"><span data-stu-id="6533b-187">*The meaning of "category" in Log Profiles and Activity Log events is different. In the Log Profile, "Category" represents the operation type (Write, Delete, Action). In an Activity Log event, the "category" property represents the source or type of event (for example, Administration, ServiceHealth, Alert, and more).*</span></span>
* <span data-ttu-id="6533b-188">내보낼 하위 지역(위치).</span><span class="sxs-lookup"><span data-stu-id="6533b-188">Which regions (locations) should be exported.</span></span> <span data-ttu-id="6533b-189">활동 로그의 많은 이벤트가 전역 이벤트이므로 “전역”이 포함되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-189">Make sure to include "global," as many events in the Activity Log are global events.</span></span>
* <span data-ttu-id="6533b-190">활동 로그를 저장소 계정에 유지해야 하는 기간</span><span class="sxs-lookup"><span data-stu-id="6533b-190">How long the Activity Log should be retained in a Storage Account.</span></span>
    - <span data-ttu-id="6533b-191">보존이 0일이라는 것은 로그가 영원히 보관된다는 의미입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-191">A retention of zero days means logs are kept forever.</span></span> <span data-ttu-id="6533b-192">그렇지 않은 경우 값은 1에서 2147483647 사이의 숫자일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-192">Otherwise, the value can be any number of days between 1 and 2147483647.</span></span>
    - <span data-ttu-id="6533b-193">보존 정책이 설정되었지만 저장소 계정에 로그를 저장할 수 없는 경우(예를 들어 Event Hubs 또는 OMS 옵션만 선택한 경우) 보존 정책은 적용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-193">If retention policies are set but storing logs in a Storage Account is disabled (for example, if only Event Hubs or OMS options are selected), the retention policies have no effect.</span></span>
    - <span data-ttu-id="6533b-194">보존 정책은 매일 적용되므로 하루의 마지막에(UTC) 보존 정책이 지난 날의 로그가 삭제됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-194">Retention policies are applied per-day, so at the end of a day (UTC), logs from the day that is now beyond the retention policy are deleted.</span></span> <span data-ttu-id="6533b-195">예를 들어, 하루의 보존 정책이 있는 경우 오늘 날짜가 시작될 때 하루 전의 로그가 삭제됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-195">For example, if you had a retention policy of one day, at the beginning of the day today the logs from the day before yesterday would be deleted.</span></span>

<span data-ttu-id="6533b-196">로그를 내보내는 것과 동일한 구독에 위치하지 않는 저장소 계정 또는 Event Hub 네임스페이스를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-196">You can use a storage account or event hub namespace that is not in the same subscription as the one emitting logs.</span></span> <span data-ttu-id="6533b-197">설정을 구성하는 사용자에게는 두 구독에 대한 적절한 RBAC 액세스가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-197">The user who configures the setting must have the appropriate RBAC access to both subscriptions.</span></span>

<span data-ttu-id="6533b-198">이러한 설정은 포털의 활동 로그 블레이드에서 "내보내기" 옵션을 통해 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-198">These settings can be configured via the “Export” option in the Activity Log blade in the portal.</span></span> <span data-ttu-id="6533b-199">[Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931927.aspx), PowerShell cmdlet 또는 CLI를 사용하여 프로그래밍 방식으로 구성할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-199">They can also be configured programmatically [using the Azure Monitor REST API](https://msdn.microsoft.com/library/azure/dn931927.aspx), PowerShell cmdlets, or CLI.</span></span> <span data-ttu-id="6533b-200">하나의 구독에는 하나의 로그 프로필만 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-200">A subscription can only have one log profile.</span></span>

### <a name="configure-log-profiles-using-the-azure-portal"></a><span data-ttu-id="6533b-201">Azure Portal을 사용하여 로그 프로필 구성</span><span class="sxs-lookup"><span data-stu-id="6533b-201">Configure log profiles using the Azure portal</span></span>
<span data-ttu-id="6533b-202">활동 로그를 이벤트 허브로 스트림하거나 Azure Portal의 "내보내기" 옵션을 사용하여 저장소 계정에 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-202">You can stream the Activity Log to an Event Hub or store them in a Storage Account by using the “Export” option in the Azure portal.</span></span>

1. <span data-ttu-id="6533b-203">포털 왼쪽에 있는 메뉴를 사용하여 **활동 로그** 블레이드로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-203">Navigate to the **Activity Log** blade using the menu on the left side of the portal.</span></span>

    ![포털에서 활동 로그로 이동](./media/monitoring-overview-activity-logs/activity-logs-portal-navigate.png)
2. <span data-ttu-id="6533b-205">블레이드 맨 위에서 **내보내기** 단추를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-205">Click the **Export** button at the top of the blade.</span></span>

    ![포털에서 내보내기 단추](./media/monitoring-overview-activity-logs/activity-logs-portal-export.png)
3. <span data-ttu-id="6533b-207">표시되는 블레이드에서 다음을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-207">In the blade that appears, you can select:</span></span>  
  * <span data-ttu-id="6533b-208">이벤트를 내보내려는 지역</span><span class="sxs-lookup"><span data-stu-id="6533b-208">regions for which you would like to export events</span></span>
  * <span data-ttu-id="6533b-209">이벤트를 저장하려는 저장소 계정</span><span class="sxs-lookup"><span data-stu-id="6533b-209">the Storage Account to which you would like to save events</span></span>
  * <span data-ttu-id="6533b-210">저장소에서 이러한 이벤트를 유지하려는 기간(일).</span><span class="sxs-lookup"><span data-stu-id="6533b-210">the number of days you want to retain these events in storage.</span></span> <span data-ttu-id="6533b-211">0일로 설정하면 로그를 계속 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-211">A setting of 0 days retains the logs forever.</span></span>
  * <span data-ttu-id="6533b-212">이러한 이벤트를 스트리밍하기 위해 Event Hub를 만들 Service Bus 네임스페이스입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-212">the Service Bus Namespace in which you would like an Event Hub to be created for streaming these events.</span></span>

     ![활동 로그 내보내기 블레이드](./media/monitoring-overview-activity-logs/activity-logs-portal-export-blade.png)
4. <span data-ttu-id="6533b-214">**저장**을 클릭하여 이러한 설정을 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-214">Click **Save** to save these settings.</span></span> <span data-ttu-id="6533b-215">해당 설정이 구독에 즉시 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-215">The settings are immediately be applied to your subscription.</span></span>

### <a name="configure-log-profiles-using-the-azure-powershell-cmdlets"></a><span data-ttu-id="6533b-216">Azure PowerShell Cmdlet을 사용하여 로그 프로필 구성</span><span class="sxs-lookup"><span data-stu-id="6533b-216">Configure log profiles using the Azure PowerShell Cmdlets</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="6533b-217">기존 로그 프로필 가져오기</span><span class="sxs-lookup"><span data-stu-id="6533b-217">Get existing log profile</span></span>
```
Get-AzureRmLogProfile
```

#### <a name="add-a-log-profile"></a><span data-ttu-id="6533b-218">로그 프로필 추가</span><span class="sxs-lookup"><span data-stu-id="6533b-218">Add a log profile</span></span>
```
Add-AzureRmLogProfile -Name my_log_profile -StorageAccountId /subscriptions/s1/resourceGroups/myrg1/providers/Microsoft.Storage/storageAccounts/my_storage -serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey -Locations global,westus,eastus -RetentionInDays 90 -Categories Write,Delete,Action
```

| <span data-ttu-id="6533b-219">속성</span><span class="sxs-lookup"><span data-stu-id="6533b-219">Property</span></span> | <span data-ttu-id="6533b-220">필수</span><span class="sxs-lookup"><span data-stu-id="6533b-220">Required</span></span> | <span data-ttu-id="6533b-221">설명</span><span class="sxs-lookup"><span data-stu-id="6533b-221">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6533b-222">이름</span><span class="sxs-lookup"><span data-stu-id="6533b-222">Name</span></span> |<span data-ttu-id="6533b-223">예</span><span class="sxs-lookup"><span data-stu-id="6533b-223">Yes</span></span> |<span data-ttu-id="6533b-224">로그 프로필의 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-224">Name of your log profile.</span></span> |
| <span data-ttu-id="6533b-225">StorageAccountId</span><span class="sxs-lookup"><span data-stu-id="6533b-225">StorageAccountId</span></span> |<span data-ttu-id="6533b-226">아니요</span><span class="sxs-lookup"><span data-stu-id="6533b-226">No</span></span> |<span data-ttu-id="6533b-227">활동 로그를 저장할 저장소 계정의 리소스 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-227">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="6533b-228">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="6533b-228">serviceBusRuleId</span></span> |<span data-ttu-id="6533b-229">아니요</span><span class="sxs-lookup"><span data-stu-id="6533b-229">No</span></span> |<span data-ttu-id="6533b-230">이벤트 허브를 만들 Service Bus 네임스페이스의 Service Bus 규칙 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-230">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="6533b-231">`{service bus resource ID}/authorizationrules/{key name}` 형식의 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-231">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="6533b-232">위치</span><span class="sxs-lookup"><span data-stu-id="6533b-232">Locations</span></span> |<span data-ttu-id="6533b-233">예</span><span class="sxs-lookup"><span data-stu-id="6533b-233">Yes</span></span> |<span data-ttu-id="6533b-234">활동 로그 이벤트를 수집할 쉼표로 구분된 지역 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-234">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="6533b-235">RetentionInDays</span><span class="sxs-lookup"><span data-stu-id="6533b-235">RetentionInDays</span></span> |<span data-ttu-id="6533b-236">예</span><span class="sxs-lookup"><span data-stu-id="6533b-236">Yes</span></span> |<span data-ttu-id="6533b-237">이벤트를 유지해야 하는 일 수는 1에서 2147483647 사이입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-237">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="6533b-238">0 값은 로그를 무기한(영원히) 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-238">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="6533b-239">범주</span><span class="sxs-lookup"><span data-stu-id="6533b-239">Categories</span></span> |<span data-ttu-id="6533b-240">아니요</span><span class="sxs-lookup"><span data-stu-id="6533b-240">No</span></span> |<span data-ttu-id="6533b-241">수집할 쉼표로 구분된 이벤트 범주 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-241">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="6533b-242">가능한 값은 쓰기, 삭제 및 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-242">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="6533b-243">로그 프로필 제거</span><span class="sxs-lookup"><span data-stu-id="6533b-243">Remove a log profile</span></span>
```
Remove-AzureRmLogProfile -name my_log_profile
```

### <a name="configure-log-profiles-using-the-azure-cross-platform-cli"></a><span data-ttu-id="6533b-244">Azure 플랫폼 간 CLI를 사용하여 로그 프로필 구성</span><span class="sxs-lookup"><span data-stu-id="6533b-244">Configure log profiles Using the Azure Cross-Platform CLI</span></span>
#### <a name="get-existing-log-profile"></a><span data-ttu-id="6533b-245">기존 로그 프로필 가져오기</span><span class="sxs-lookup"><span data-stu-id="6533b-245">Get existing log profile</span></span>
```
azure insights logprofile list
```
```
azure insights logprofile get --name my_log_profile
```
<span data-ttu-id="6533b-246">`name` 속성은 로그 프로필의 이름이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-246">The `name` property should be the name of your log profile.</span></span>

#### <a name="add-a-log-profile"></a><span data-ttu-id="6533b-247">로그 프로필 추가</span><span class="sxs-lookup"><span data-stu-id="6533b-247">Add a log profile</span></span>
```
azure insights logprofile add --name my_log_profile --storageId /subscriptions/s1/resourceGroups/insights-integration/providers/Microsoft.Storage/storageAccounts/my_storage --serviceBusRuleId /subscriptions/s1/resourceGroups/Default-ServiceBus-EastUS/providers/Microsoft.ServiceBus/namespaces/mytestSB/authorizationrules/RootManageSharedAccessKey --locations global,westus,eastus,northeurope --retentionInDays 90 –categories Write,Delete,Action
```

| <span data-ttu-id="6533b-248">속성</span><span class="sxs-lookup"><span data-stu-id="6533b-248">Property</span></span> | <span data-ttu-id="6533b-249">필수</span><span class="sxs-lookup"><span data-stu-id="6533b-249">Required</span></span> | <span data-ttu-id="6533b-250">설명</span><span class="sxs-lookup"><span data-stu-id="6533b-250">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="6533b-251">name</span><span class="sxs-lookup"><span data-stu-id="6533b-251">name</span></span> |<span data-ttu-id="6533b-252">예</span><span class="sxs-lookup"><span data-stu-id="6533b-252">Yes</span></span> |<span data-ttu-id="6533b-253">로그 프로필의 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-253">Name of your log profile.</span></span> |
| <span data-ttu-id="6533b-254">storageId</span><span class="sxs-lookup"><span data-stu-id="6533b-254">storageId</span></span> |<span data-ttu-id="6533b-255">아니요</span><span class="sxs-lookup"><span data-stu-id="6533b-255">No</span></span> |<span data-ttu-id="6533b-256">활동 로그를 저장할 저장소 계정의 리소스 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-256">Resource ID of the Storage Account to which the Activity Log should be saved.</span></span> |
| <span data-ttu-id="6533b-257">serviceBusRuleId</span><span class="sxs-lookup"><span data-stu-id="6533b-257">serviceBusRuleId</span></span> |<span data-ttu-id="6533b-258">아니요</span><span class="sxs-lookup"><span data-stu-id="6533b-258">No</span></span> |<span data-ttu-id="6533b-259">이벤트 허브를 만들 Service Bus 네임스페이스의 Service Bus 규칙 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-259">Service Bus Rule ID for the Service Bus namespace you would like to have event hubs created in.</span></span> <span data-ttu-id="6533b-260">`{service bus resource ID}/authorizationrules/{key name}` 형식의 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-260">Is a string with this format: `{service bus resource ID}/authorizationrules/{key name}`.</span></span> |
| <span data-ttu-id="6533b-261">위치</span><span class="sxs-lookup"><span data-stu-id="6533b-261">locations</span></span> |<span data-ttu-id="6533b-262">예</span><span class="sxs-lookup"><span data-stu-id="6533b-262">Yes</span></span> |<span data-ttu-id="6533b-263">활동 로그 이벤트를 수집할 쉼표로 구분된 지역 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-263">Comma-separated list of regions for which you would like to collect Activity Log events.</span></span> |
| <span data-ttu-id="6533b-264">RetentionInDays</span><span class="sxs-lookup"><span data-stu-id="6533b-264">retentionInDays</span></span> |<span data-ttu-id="6533b-265">예</span><span class="sxs-lookup"><span data-stu-id="6533b-265">Yes</span></span> |<span data-ttu-id="6533b-266">이벤트를 유지해야 하는 일 수는 1에서 2147483647 사이입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-266">Number of days for which events should be retained, between 1 and 2147483647.</span></span> <span data-ttu-id="6533b-267">0 값은 로그를 무기한(영원히) 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-267">A value of zero stores the logs indefinitely (forever).</span></span> |
| <span data-ttu-id="6533b-268">범주</span><span class="sxs-lookup"><span data-stu-id="6533b-268">categories</span></span> |<span data-ttu-id="6533b-269">아니요</span><span class="sxs-lookup"><span data-stu-id="6533b-269">No</span></span> |<span data-ttu-id="6533b-270">수집할 쉼표로 구분된 이벤트 범주 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-270">Comma-separated list of event categories that should be collected.</span></span> <span data-ttu-id="6533b-271">가능한 값은 쓰기, 삭제 및 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="6533b-271">Possible values are Write, Delete, and Action.</span></span> |

#### <a name="remove-a-log-profile"></a><span data-ttu-id="6533b-272">로그 프로필 제거</span><span class="sxs-lookup"><span data-stu-id="6533b-272">Remove a log profile</span></span>
```
azure insights logprofile delete --name my_log_profile
```

## <a name="next-steps"></a><span data-ttu-id="6533b-273">다음 단계</span><span class="sxs-lookup"><span data-stu-id="6533b-273">Next Steps</span></span>
* [<span data-ttu-id="6533b-274">활동 로그(이전의 감사 로그)에 대해 자세히 알아보기</span><span class="sxs-lookup"><span data-stu-id="6533b-274">Learn more about the Activity Log (formerly Audit Logs)</span></span>](../azure-resource-manager/resource-group-audit.md)
* [<span data-ttu-id="6533b-275">Azure 활동 로그를 Event Hubs로 스트림</span><span class="sxs-lookup"><span data-stu-id="6533b-275">Stream the Azure Activity Log to Event Hubs</span></span>](monitoring-stream-activity-logs-event-hubs.md)
