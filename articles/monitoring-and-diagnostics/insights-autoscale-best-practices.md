---
title: "자동 크기 조정에 대 한 aaaBest 사례 | Microsoft Docs"
description: "Azure에서 웹앱, 가상 컴퓨터 확장 집합 및 Cloud Services에 대한 자동 크기 조정 패턴"
author: anirudhcavale
manager: orenr
editor: 
services: monitoring-and-diagnostics
documentationcenter: monitoring-and-diagnostics
ms.assetid: 9fa2b94b-dfa5-4106-96ff-74fd1fba4657
ms.service: monitoring-and-diagnostics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/07/2017
ms.author: ancav
ms.openlocfilehash: eb731c15e440af93a2675210583878814d0d8818
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="best-practices-for-autoscale"></a><span data-ttu-id="15b0b-103">자동 크기 조정에 대한 모범 사례</span><span class="sxs-lookup"><span data-stu-id="15b0b-103">Best practices for Autoscale</span></span>
<span data-ttu-id="15b0b-104">이 문서에서는 Azure에서 모범 사례 tooautoscale에 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-104">This article teaches best practices tooautoscale in Azure.</span></span> <span data-ttu-id="15b0b-105">Azure 모니터의 자동 크기 조정 적용만 너무[가상 컴퓨터 크기 집합](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [클라우드 서비스](https://azure.microsoft.com/services/cloud-services/), 및 [앱 서비스-웹 응용 프로그램](https://azure.microsoft.com/services/app-service/web/)합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-105">Azure Monitor autoscale applies only too[Virtual Machine Scale Sets](https://azure.microsoft.com/services/virtual-machine-scale-sets/), [Cloud Services](https://azure.microsoft.com/services/cloud-services/), and [App Service - Web Apps](https://azure.microsoft.com/services/app-service/web/).</span></span> <span data-ttu-id="15b0b-106">다른 Azure 서비스에는 다른 크기 조정 방법이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-106">Other Azure services use different scaling methods.</span></span>

## <a name="autoscale-concepts"></a><span data-ttu-id="15b0b-107">자동 크기 조정 개념</span><span class="sxs-lookup"><span data-stu-id="15b0b-107">Autoscale concepts</span></span>
* <span data-ttu-id="15b0b-108">하나의 리소스에는 *하나의* 자동 크기 조정 설정만 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-108">A resource can have only *one* autoscale setting</span></span>
* <span data-ttu-id="15b0b-109">자동 크기 조정 설정에는 하나 이상의 프로필이 있을 수 있으며, 각 프로필에는 하나 이상의 자동 크기 조정 규칙이 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-109">An autoscale setting can have one or more profiles and each profile can have one or more autoscale rules.</span></span>
* <span data-ttu-id="15b0b-110">자동 크기 조정 설정 조정 인스턴스 가로로 변수인 *아웃* hello 인스턴스 수를 늘리면 여 및 *에* hello 인스턴스 수가 감소 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-110">An autoscale setting scales instances horizontally, which is *out* by increasing hello instances and *in* by decreasing hello number of instances.</span></span>
  <span data-ttu-id="15b0b-111">자동 크기 조정 설정에는 최대, 최소 및 기본 인스턴스 값이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-111">An autoscale setting has a maximum, minimum, and default value of instances.</span></span>
* <span data-ttu-id="15b0b-112">자동 크기 조정 작업은 항상 hello 경우 연결 된 메트릭 tooscale 확인 하 여, 확장 또는 배율 기능에 대 한 hello 구성 된 임계값을 초과 했음을 읽습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-112">An autoscale job always reads hello associated metric tooscale by, checking if it has crossed hello configured threshold for scale-out or scale-in.</span></span> <span data-ttu-id="15b0b-113">[Azure Monitor 자동 크기 조정 공통 메트릭](insights-autoscale-common-metrics.md)에서 자동 크기 조정을 통해 크기를 조정할 수 있는 메트릭 목록을 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-113">You can view a list of metrics that autoscale can scale by at [Azure Monitor autoscaling common metrics](insights-autoscale-common-metrics.md).</span></span>
* <span data-ttu-id="15b0b-114">모든 임계값은 인스턴스 수준에서 계산됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-114">All thresholds are calculated at an instance level.</span></span> <span data-ttu-id="15b0b-115">예를 들어, "1 인스턴스 축소 별 크기 조정 인스턴스 수는 2 때 CPU > 80%의 경우 평균", 모든 인 스턴에서 hello 평균 CPU가 80% 보다 크면 확장을 의미 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-115">For example, "scale out by 1 instance when average CPU > 80% when instance count is 2", means scale-out when hello average CPU across all instances is greater than 80%.</span></span>
* <span data-ttu-id="15b0b-116">항상 메일을 통해 오류 알림이 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-116">You always receive failure notifications via email.</span></span> <span data-ttu-id="15b0b-117">특히, hello 소유자, 참가자 및 독자 hello 대상 리소스의 전자 메일을 수신 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-117">Specifically, hello owner, contributor, and readers of hello target resource receive email.</span></span> <span data-ttu-id="15b0b-118">또한 자동 크기 조정이 오류에서 복구하여 정상적으로 작동하기 시작하면 항상 *복구* 메일이 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-118">You also always receive a *recovery* email when autoscale recovers from a failure and starts functioning normally.</span></span>
* <span data-ttu-id="15b0b-119">있습니다 수 옵트인 tooreceive 전자 메일 및 webhook을 통해 성공적으로 크기 조정 작업 알림 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-119">You can opt-in tooreceive a successful scale action notification via email and webhooks.</span></span>

## <a name="autoscale-best-practices"></a><span data-ttu-id="15b0b-120">자동 크기 조정 모범 사례</span><span class="sxs-lookup"><span data-stu-id="15b0b-120">Autoscale best practices</span></span>
<span data-ttu-id="15b0b-121">자동 크기 조정을 사용 하 여 모범 사례를 따르는 hello를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-121">Use hello following best practices as you use autoscale.</span></span>

### <a name="ensure-hello-maximum-and-minimum-values-are-different-and-have-an-adequate-margin-between-them"></a><span data-ttu-id="15b0b-122">Hello 최대값과 최소값을 다른 있고 사이의 적절 한 여백을 확인합니다</span><span class="sxs-lookup"><span data-stu-id="15b0b-122">Ensure hello maximum and minimum values are different and have an adequate margin between them</span></span>
<span data-ttu-id="15b0b-123">최소한 된 설정이 있는 경우 = 2, 최대 2 = hello 현재 인스턴스 수는 2, 없음, 크기 조정 작업이 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-123">If you have a setting that has minimum=2, maximum=2 and hello current instance count is 2, no scale action can occur.</span></span> <span data-ttu-id="15b0b-124">적절 한 여백 값이 포함 됩니다는 hello 최대 및 최소 인스턴스 수 간의 유지 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-124">Keep an adequate margin between hello maximum and minimum instance counts, which are inclusive.</span></span> <span data-ttu-id="15b0b-125">자동 크기 조정은 항상 이러한 한도 사이에서 크기를 조정합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-125">Autoscale always scales between these limits.</span></span>

### <a name="manual-scaling-is-reset-by-autoscale-min-and-max"></a><span data-ttu-id="15b0b-126">수동 크기 조정이 자동 크기 조정 최소값 및 최대값으로 다시 설정됨</span><span class="sxs-lookup"><span data-stu-id="15b0b-126">Manual scaling is reset by autoscale min and max</span></span>
<span data-ttu-id="15b0b-127">수동으로 위의 hello 인스턴스 개수 tooa 값을 업데이트 하거나 hello 최대 아래 자동 크기 조정 엔진을 자동으로 hello 백 toohello 최소 (아래 경우) 또는 hello 최대 (위의 경우)를 조정 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-127">If you manually update hello instance count tooa value above or below hello maximum, hello autoscale engine automatically scales back toohello minimum (if below) or hello maximum (if above).</span></span> <span data-ttu-id="15b0b-128">예를 들어 3 자에서 6 사이 hello 범위를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-128">For example, you set hello range between 3 and 6.</span></span> <span data-ttu-id="15b0b-129">하나의 실행 중인 인스턴스를 설정한 경우 hello 자동 크기 조정 엔진에 다음 실행 too3 인스턴스를 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-129">If you have one running instance, hello autoscale engine scales too3 instances on its next run.</span></span> <span data-ttu-id="15b0b-130">마찬가지로, 것은 눈금 인 8 개의 인스턴스가에 다음 실행 too6를 백업 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-130">Likewise, it would scale-in 8 instances back too6 on its next run.</span></span>  <span data-ttu-id="15b0b-131">Hello 자동 크기 조정 규칙에도 다시 설정 해야만 수동 크기 조정 하는 것은 매우 일시적인입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-131">Manual scaling is very temporary unless you reset hello autoscale rules as well.</span></span>

### <a name="always-use-a-scale-out-and-scale-in-rule-combination-that-performs-an-increase-and-decrease"></a><span data-ttu-id="15b0b-132">항상 증가 및 감소를 수행하는 규모 확장 및 감축 규칙 조합 사용</span><span class="sxs-lookup"><span data-stu-id="15b0b-132">Always use a scale-out and scale-in rule combination that performs an increase and decrease</span></span>
<span data-ttu-id="15b0b-133">Hello 조합의 한 부분을 사용 하는 경우 자동 크기 조정 확장 스냅인의 hello 최대값 또는 최소값, 될 때까지 단일 out, 또는에 도달 했습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-133">If you use only one part of hello combination, autoscale scale-in that single out, or in, until hello maximum, or minimum, is reached.</span></span>

### <a name="do-not-switch-between-hello-azure-portal-and-hello-azure-classic-portal-when-managing-autoscale"></a><span data-ttu-id="15b0b-134">자동 크기 조정을 관리할 때 hello Azure 포털 및 Azure 클래식 포털 hello 간에 전환 되지 않습니다</span><span class="sxs-lookup"><span data-stu-id="15b0b-134">Do not switch between hello Azure portal and hello Azure classic portal when managing Autoscale</span></span>
<span data-ttu-id="15b0b-135">클라우드 서비스 및 응용 프로그램 서비스 (웹 앱)에 대 한 Azure 포털 (portal.azure.com) toocreate hello를 사용 하 여 및 자동 크기 조정 설정을 관리 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-135">For Cloud Services and App Services (Web Apps), use hello Azure portal (portal.azure.com) toocreate and manage autoscale settings.</span></span> <span data-ttu-id="15b0b-136">가상 컴퓨터 크기 집합에 대 한 toocreate PowerShell, CLI 또는 REST API를 사용 하 여 및 자동 크기 조정 설정을 관리 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-136">For Virtual Machine Scale Sets use PowerShell, CLI or REST API toocreate and manage autoscale setting.</span></span> <span data-ttu-id="15b0b-137">자동 크기 조정 구성을 관리 하는 경우 Azure 클래식 포털 (manage.windowsazure.com) hello 및 hello Azure 포털 (portal.azure.com) 간에 전환 하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="15b0b-137">Do not switch between hello Azure classic portal (manage.windowsazure.com) and hello Azure portal (portal.azure.com) when managing autoscale configurations.</span></span> <span data-ttu-id="15b0b-138">Azure 클래식 포털 hello 및 해당 기본 백 엔드에 제한 사항이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-138">hello Azure classic portal and its underlying backend has limitations.</span></span> <span data-ttu-id="15b0b-139">그래픽 사용자 인터페이스를 사용 하 여 toohello Azure 포털 toomanage 자동 크기 조정을 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-139">Move toohello Azure portal toomanage autoscale using a graphical user interface.</span></span> <span data-ttu-id="15b0b-140">hello 옵션은 PowerShell, CLI 또는 (Azure 리소스 탐색기)를 통해 REST API toouse hello 자동 크기 조정 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-140">hello options are toouse hello autoscale PowerShell, CLI or REST API (via Azure Resource Explorer).</span></span>

### <a name="choose-hello-appropriate-statistic-for-your-diagnostics-metric"></a><span data-ttu-id="15b0b-141">Hello 진단 메트릭에 대 한 적절 한 통계를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-141">Choose hello appropriate statistic for your diagnostics metric</span></span>
<span data-ttu-id="15b0b-142">진단 메트릭에 대 한 중에서 선택할 수 있습니다 *평균*, *최소*, *최대* 및 *총* 하 여 메트릭 tooscale로 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-142">For diagnostics metrics, you can choose among *Average*, *Minimum*, *Maximum* and *Total* as a metric tooscale by.</span></span> <span data-ttu-id="15b0b-143">hello 가장 일반적인 통계는 *평균*합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-143">hello most common statistic is *Average*.</span></span>

### <a name="choose-hello-thresholds-carefully-for-all-metric-types"></a><span data-ttu-id="15b0b-144">모든 메트릭 형식에 대해 신중 하 게 hello 임계값을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-144">Choose hello thresholds carefully for all metric types</span></span>
<span data-ttu-id="15b0b-145">현실적인 상황을 기반으로 서로 다른 규모 확장 및 규모 감축 임계값을 신중하게 선택하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-145">We recommend carefully choosing different thresholds for scale-out and scale-in based on practical situations.</span></span>

<span data-ttu-id="15b0b-146">우리 *권장 하지는 않습니다* hello 예에서는 아래와 같은 자동 크기 조정 설정에 대 한 조건에 및 동일 하거나 매우 유사한 임계값 값 hello:</span><span class="sxs-lookup"><span data-stu-id="15b0b-146">We *do not recommend* autoscale settings like hello examples below with hello same or very similar threshold values for out and in conditions:</span></span>

* <span data-ttu-id="15b0b-147">스레드 수가 600 이하인 경우 인스턴스 수 1개 증가</span><span class="sxs-lookup"><span data-stu-id="15b0b-147">Increase instances by 1 count when Thread Count <= 600</span></span>
* <span data-ttu-id="15b0b-148">스레드 수가 600 이상인 경우 인스턴스 수 1개 감소</span><span class="sxs-lookup"><span data-stu-id="15b0b-148">Decrease instances by 1 count when Thread Count >= 600</span></span>

<span data-ttu-id="15b0b-149">혼동 스 러 울 수 tooa 동작을 일으킬 수 있습니다 어떻게의 예를 살펴 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-149">Let's look at an example of what can lead tooa behavior that may seem confusing.</span></span> <span data-ttu-id="15b0b-150">Hello를 순서를 따르는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-150">Consider hello following sequence.</span></span>

1. <span data-ttu-id="15b0b-151">와 2 인스턴스 toobegin 많고 hello 평균 인스턴스당 스레드 수 too625 증가 하는 다음을 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-151">Assume there are 2 instances toobegin with and then hello average number of threads per instance grows too625.</span></span>
2. <span data-ttu-id="15b0b-152">자동 크기 조정에서 세 번째 인스턴스를 추가하여 규모를 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-152">Autoscale scales out adding a 3rd instance.</span></span>
3. <span data-ttu-id="15b0b-153">다음으로, 인스턴스 전체에서 hello 평균 스레드 수가 too575 들어가는지 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-153">Next, assume that hello average thread count across instance falls too575.</span></span>
4. <span data-ttu-id="15b0b-154">자동 크기 조정 시도 줄일 하기 전에 tooestimate hello 최종 상태에 크기가 조정 하는 경우 됩니다 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-154">Before scaling down, autoscale tries tooestimate what hello final state will be if it scaled in.</span></span> <span data-ttu-id="15b0b-155">예를 들어 575x3(현재 인스턴스 수) = 1,725/2(축소된 경우의 최종 인스턴스 수) = 862.5스레드입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-155">For example, 575 x  3 (current instance count) = 1,725 / 2 (final number of instances when scaled down) = 862.5 threads.</span></span> <span data-ttu-id="15b0b-156">즉 자동 크기 조정은 tooimmediately 확장 다시을 확장 한 후에 동일한 또는 짝수 hello 평균 스레드 수 유지 hello 조금만 뒤쳐지면 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-156">This means autoscale would have tooimmediately scale-out again even after it scaled in, if hello average thread count remains hello same or even falls only a small amount.</span></span> <span data-ttu-id="15b0b-157">그러나 것 수직 확장 다시 hello 전체 프로세스를 반복 하는 경우 앞 tooan 무한 루프에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-157">However, if it scaled up again, hello whole process would repeat, leading tooan infinite loop.</span></span>
5. <span data-ttu-id="15b0b-158">tooavoid 이러한 상황 (라 함 "날개를 퍼 덕"), 자동 크기 조정 확장 되지 않는 전혀 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-158">tooavoid this situation (termed "flapping"), autoscale does not scale down at all.</span></span> <span data-ttu-id="15b0b-159">대신, 건너뜁니다 고 hello 조건이 다시 hello 다음 시간 hello 서비스의 작업이 실행을 다시 평가 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-159">Instead, it skips and reevaluates hello condition again hello next time hello service's job executes.</span></span> <span data-ttu-id="15b0b-160">Hello 평균 스레드 수가 575 되었을 때 자동 크기 조정 toowork 표시 없게 되기 때문에 많은 사람들이 혼동을 줄 수이 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-160">This could confuse many people because autoscale wouldn't appear toowork when hello average thread count was 575.</span></span>

<span data-ttu-id="15b0b-161">예측 중에 확장은 의도 한 tooavoid "플 래핑" 배율 기능 및 확장 작업 지속적으로 어디로 간에 상황입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-161">Estimation during a scale-in is intended tooavoid "flapping" situations, where scale-in and scale-out actions continually go back and forth.</span></span> <span data-ttu-id="15b0b-162">Hello 및 확장에 대해 동일한 임계값을 선택 하면이 동작을 염두에 두십시오.</span><span class="sxs-lookup"><span data-stu-id="15b0b-162">Keep this behavior in mind when you choose hello same thresholds for scale-out and in.</span></span>

<span data-ttu-id="15b0b-163">Hello 확장 사이 및 임계값에는 적절 한 여백을 선택 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-163">We recommend choosing an adequate margin between hello scale-out and in thresholds.</span></span> <span data-ttu-id="15b0b-164">예를 들어 hello를 더 나은 규칙 조합을 따르는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-164">As an example, consider hello following better rule combination.</span></span>

* <span data-ttu-id="15b0b-165">CPU%가 80 이상인 경우 인스턴스 수 1개 증가</span><span class="sxs-lookup"><span data-stu-id="15b0b-165">Increase instances by 1 count when CPU%  >= 80</span></span>
* <span data-ttu-id="15b0b-166">CPU%가 60 이하인 경우 인스턴스 수 1개 감소</span><span class="sxs-lookup"><span data-stu-id="15b0b-166">Decrease instances by 1 count when CPU% <= 60</span></span>

<span data-ttu-id="15b0b-167">이 경우</span><span class="sxs-lookup"><span data-stu-id="15b0b-167">In this case</span></span>  

1. <span data-ttu-id="15b0b-168">와 2 인스턴스 toostart 있다고 가정해 보십시오.</span><span class="sxs-lookup"><span data-stu-id="15b0b-168">Assume there are 2 instances toostart with.</span></span>
2. <span data-ttu-id="15b0b-169">인스턴스 간에 hello 평균 CPU %too80 되 면 자동 크기 조정 세 번째 인스턴스를 추가 하 여 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-169">If hello average CPU% across instances goes too80, autoscale scales out adding a third instance.</span></span>
3. <span data-ttu-id="15b0b-170">이제 hello CPU 시간을 통해 % 들어가는지 too60 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-170">Now assume that over time hello CPU% falls too60.</span></span>
4. <span data-ttu-id="15b0b-171">자동 크기 조정의 눈금에 규칙 tooscale 인 경우 hello 최종 상태를 예측 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-171">Autoscale's scale-in rule estimates hello final state if it were tooscale-in.</span></span> <span data-ttu-id="15b0b-172">예를 들어 60x3(현재 인스턴스 수) = 180/2(축소된 경우의 최종 인스턴스 수) = 90입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-172">For example, 60 x 3 (current instance count) = 180 / 2 (final number of instances when scaled down) = 90.</span></span> <span data-ttu-id="15b0b-173">따라서 자동 크기 조정 않습니다 눈금-에 없는 했을 때 tooscale 아웃 즉시 다시 때문에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-173">So autoscale does not scale-in because it would have tooscale-out again immediately.</span></span> <span data-ttu-id="15b0b-174">대신, 규모 축소를 건너뜁니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-174">Instead, it skips scaling down.</span></span>
5. <span data-ttu-id="15b0b-175">hello CPU 계속 toofall too50 hello 다음 시간 자동 크기 조정 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-175">hello next time autoscale checks, hello CPU continues toofall too50.</span></span> <span data-ttu-id="15b0b-176">50 x 3 인스턴스를 다시-추정 = 150 / 2 인스턴스 = too2 인스턴스에 성공적으로 확장 하므로 80, hello 확장 임계값 아래에 있는 75입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-176">It estimates again -  50 x 3 instance = 150 / 2 instances = 75, which is below hello scale-out threshold of 80, so it scales in successfully too2 instances.</span></span>

### <a name="considerations-for-scaling-threshold-values-for-special-metrics"></a><span data-ttu-id="15b0b-177">특정 메트릭의 임계값 조정에 대한 고려 사항</span><span class="sxs-lookup"><span data-stu-id="15b0b-177">Considerations for scaling threshold values for special metrics</span></span>
 <span data-ttu-id="15b0b-178">저장소나 서비스 버스 큐 길이 메트릭에 같은 특별 한 메트릭을 hello 임계값의 현재 인스턴스 수가 당 사용할 수 있는 메시지의 hello 평균 수입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-178">For special metrics such as Storage or Service Bus Queue length metric, hello threshold is hello average number of messages available per current number of instances.</span></span> <span data-ttu-id="15b0b-179">Hello를 신중 하 게 선택이 메트릭에 대 한 hello 임계값 값을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-179">Carefully choose hello choose hello threshold value for this metric.</span></span>

<span data-ttu-id="15b0b-180">보겠습니다 보여 주기 예제 tooensure와 더 나은 hello 동작을 알고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-180">Let's illustrate it with an example tooensure you understand hello behavior better.</span></span>

* <span data-ttu-id="15b0b-181">저장소 큐 메시지 수가 50개 이상인 경우 인스턴스 수 1개 증가</span><span class="sxs-lookup"><span data-stu-id="15b0b-181">Increase instances by 1 count when Storage Queue message count >= 50</span></span>
* <span data-ttu-id="15b0b-182">저장소 큐 메시지 수가 10개 이하인 경우 인스턴스 수 1개 감소</span><span class="sxs-lookup"><span data-stu-id="15b0b-182">Decrease instances by 1 count when Storage Queue message count <= 10</span></span>

<span data-ttu-id="15b0b-183">시퀀스를 수행 하는 hello를 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-183">Consider hello following sequence:</span></span>

1. <span data-ttu-id="15b0b-184">2개의 저장소 큐 인스턴스가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-184">There are 2 storage queue instances.</span></span>
2. <span data-ttu-id="15b0b-185">메시지 계속 나타나는 경우 및 hello 저장소 큐를 검토할 때는 hello 총 읽기 수 50입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-185">Messages keep coming and when you review hello storage queue, hello total count reads 50.</span></span> <span data-ttu-id="15b0b-186">자동 크기 조정에서 규모 확장 동작을 시작해야 한다고 생각할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-186">You might assume that autoscale should start a scale-out action.</span></span> <span data-ttu-id="15b0b-187">그러나 인스턴스당 메시지 수는 여전히 50/2 = 25개입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-187">However, note that it is still 50/2 = 25 messages per instance.</span></span> <span data-ttu-id="15b0b-188">따라서 규모 확장이 발생하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-188">So, scale-out does not occur.</span></span> <span data-ttu-id="15b0b-189">Hello 첫 번째 확장 toohappen, hello 저장소 큐에 hello 총 메시지 수가 100 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-189">For hello first scale-out toohappen, hello total message count in hello storage queue should be 100.</span></span>
3. <span data-ttu-id="15b0b-190">다음으로 hello 총 메시지 수가 100에 도달 하는 것으로 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-190">Next, assume that hello total message count reaches 100.</span></span>
4. <span data-ttu-id="15b0b-191">타사 저장소 큐 인스턴스 tooa 확장 동작 때문에 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-191">A 3rd storage queue instance is added due tooa scale-out action.</span></span>  <span data-ttu-id="15b0b-192">hello 다음 확장 작업이 발생 하지 않고 hello 총 될 때까지 hello 큐의 메시지 수 때문에 150에 도달 하면 150/3 = 50입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-192">hello next scale-out action will not happen until hello total message count in hello queue reaches 150 because 150/3 = 50.</span></span>
5. <span data-ttu-id="15b0b-193">이제 hello hello 큐의 메시지 수가 점점 더 작아집니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-193">Now hello number of messages in hello queue gets smaller.</span></span> <span data-ttu-id="15b0b-194">3 인스턴스와 hello 첫 번째 눈금에 수행 되는 동작 면 hello 때문에 모든 큐의 총 메시지 too30 합계 30/3 = hello에 대 한 크기 조정 임계값은 인스턴스당 10 메시지입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-194">With 3 instances, hello first scale-in action happens when hello total messages in all queues add up too30 because 30/3 = 10 messages per instance, which is hello scale-in threshold.</span></span>

### <a name="considerations-for-scaling-when-multiple-profiles-are-configured-in-an-autoscale-setting"></a><span data-ttu-id="15b0b-195">자동 크기 조정 설정에 여러 프로필이 구성된 경우 크기 조정에 대한 고려 사항</span><span class="sxs-lookup"><span data-stu-id="15b0b-195">Considerations for scaling when multiple profiles are configured in an autoscale setting</span></span>
<span data-ttu-id="15b0b-196">자동 크기 조정 설정에서 일정이나 시간에 종속되지 않고 항상 적용되는 기본 프로필을 선택하거나, 날짜 및 시간 범위가 있는 고정된 기간의 프로필 또는 되풀이 프로필을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-196">In an autoscale setting, you can choose a default profile, which is always applied without any dependency on schedule or time, or you can choose a recurring profile or a profile for a fixed period with a date and time range.</span></span>

<span data-ttu-id="15b0b-197">자동 크기 조정 서비스를 처리 하는 경우 항상 순서에 따라 hello에 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-197">When autoscale service processes them, it always checks in hello following order:</span></span>

1. <span data-ttu-id="15b0b-198">고정된 날짜 프로필</span><span class="sxs-lookup"><span data-stu-id="15b0b-198">Fixed Date profile</span></span>
2. <span data-ttu-id="15b0b-199">되풀이 프로필</span><span class="sxs-lookup"><span data-stu-id="15b0b-199">Recurring profile</span></span>
3. <span data-ttu-id="15b0b-200">기본("항상") 프로필</span><span class="sxs-lookup"><span data-stu-id="15b0b-200">Default ("Always") profile</span></span>

<span data-ttu-id="15b0b-201">프로필 조건이 충족 될 경우 자동 크기 조정 hello 그 아래의 다음 프로필 상태를 확인 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-201">If a profile condition is met, autoscale does not check hello next profile condition below it.</span></span> <span data-ttu-id="15b0b-202">자동 크기 조정에서는 한 번에 하나의 프로필만 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-202">Autoscale only processes one profile at a time.</span></span> <span data-ttu-id="15b0b-203">Hello 현재 프로필에도 해당 규칙을 포함 해야,이 즉 tooalso 하려는 경우 하위 계층 프로필에서 처리 조건이 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-203">This means if you want tooalso include a processing condition from a lower-tier profile, you must include those rules as well in hello current profile.</span></span>

<span data-ttu-id="15b0b-204">예제를 사용하여 이를 검토해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-204">Let's review this using an example:</span></span>

<span data-ttu-id="15b0b-205">아래 hello 이미지 표시 자동 크기 조정 설정의 최소 인스턴스를 기본 프로필로 = 2 자에서 최대 인스턴스 = 10입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-205">hello image below shows an autoscale setting with a default profile of minimum instances = 2 and maximum instances = 10.</span></span> <span data-ttu-id="15b0b-206">이 예에서 규칙 hello 큐에 hello 메시지 개수 보다 크면 10과 배율에 hello 큐에 hello 메시지 수가 3 보다 작은 경우 구성 된 tooscale 아웃은입니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-206">In this example, rules are configured tooscale-out when hello message count in hello queue is greater than 10 and scale-in when hello message count in hello queue is less than 3.</span></span> <span data-ttu-id="15b0b-207">이제 hello 리소스 2 ~ 10 개 사이 인스턴스입니다 확장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-207">So now hello resource can scale between 2 and 10 instances.</span></span>

<span data-ttu-id="15b0b-208">또한 월요일에 설정된 되풀이 프로필이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-208">In addition, there is a recurring profile set for Monday.</span></span> <span data-ttu-id="15b0b-209">이는 최소 인스턴스 = 2, 최대 인스턴스 = 12에 대해 설정되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-209">It is set for minimum instances = 2 and maximum instances = 12.</span></span> <span data-ttu-id="15b0b-210">즉, 월요일,이 조건에 대 한 hello 첫 번째 시간 자동 크기 조정 확인 toohello 새 최소 3까지 확장 hello 인스턴스 수가 2 인 경우.</span><span class="sxs-lookup"><span data-stu-id="15b0b-210">This means on Monday, hello first time autoscale checks for this condition, if hello instance count is 2, it scales toohello new minimum of 3.</span></span> <span data-ttu-id="15b0b-211">자동 크기 조정 계속 toofind이 프로필 상태가 일치 (월요일), hello CPU 기반 스케일 아웃/인 규칙이이 프로필에 대해 구성 된 처리 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-211">As long as autoscale continues toofind this profile condition matched (Monday), it only processes hello CPU-based scale-out/in rules configured for this profile.</span></span> <span data-ttu-id="15b0b-212">이때 hello 큐 길이 대 한 확인 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-212">At this time, it does not check for hello queue length.</span></span> <span data-ttu-id="15b0b-213">그러나 hello 큐 길이 조건 toobe 확인 하려면를 포함 해야 hello 기본 프로필에서 이러한 규칙도 월요일 프로필에서.</span><span class="sxs-lookup"><span data-stu-id="15b0b-213">However, if you also want hello queue length condition toobe checked, you should include those rules from hello default profile as well in your Monday profile.</span></span>

<span data-ttu-id="15b0b-214">마찬가지로, 자동 크기 조정 백 toohello 기본 프로필이 전환 되는 경우 먼저 확인 hello 최소 및 최대 조건이 충족 될 경우.</span><span class="sxs-lookup"><span data-stu-id="15b0b-214">Similarly, when autoscale switches back toohello default profile, it first checks if hello minimum and maximum conditions are met.</span></span> <span data-ttu-id="15b0b-215">Hello hello 시간에 인스턴스 수가 12 이면 hello 기본 프로필에 대 한 허용 된 최대 hello too10에서 확장 됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-215">If hello number of instances at hello time is 12, it scales in too10, hello maximum allowed for hello default profile.</span></span>

![자동 크기 조정 설정](./media/insights-autoscale-best-practices/insights-autoscale-best-practices-2.png)

### <a name="considerations-for-scaling-when-multiple-rules-are-configured-in-a-profile"></a><span data-ttu-id="15b0b-217">하나의 프로필에 여러 규칙이 구성된 경우 크기 조정에 대한 고려 사항</span><span class="sxs-lookup"><span data-stu-id="15b0b-217">Considerations for scaling when multiple rules are configured in a profile</span></span>
<span data-ttu-id="15b0b-218">있는 tooset 여러 규칙 프로 파일에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-218">There are cases where you may have tooset multiple rules in a profile.</span></span> <span data-ttu-id="15b0b-219">여러 규칙을 설정 하는 경우 서비스를 사용 하 여 자동 크기 조정 규칙의 집합을 추적 하는 hello 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-219">hello following set of autoscale rules are used by services use when multiple rules are set.</span></span>

<span data-ttu-id="15b0b-220">*규모 확장*의 경우 임의의 규칙이 충족되면 자동 크기 조정이 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-220">On *scale out*, autoscale runs if any rule is met.</span></span>
<span data-ttu-id="15b0b-221">*눈금에서*, 자동 크기 조정 toobe 충족 하는 모든 규칙을 필요로 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-221">On *scale-in*, autoscale require all rules toobe met.</span></span>

<span data-ttu-id="15b0b-222">tooillustrate, 자동 크기 조정 규칙에 4 hello 있다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-222">tooillustrate, assume that you have hello following 4 autoscale rules:</span></span>

* <span data-ttu-id="15b0b-223">CPU가 30% 미만인 경우 1만큼 규모 감축</span><span class="sxs-lookup"><span data-stu-id="15b0b-223">If CPU < 30 %, scale-in by 1</span></span>
* <span data-ttu-id="15b0b-224">메모리가 50% 미만인 경우 1만큼 규모 감축</span><span class="sxs-lookup"><span data-stu-id="15b0b-224">If Memory < 50%, scale-in by 1</span></span>
* <span data-ttu-id="15b0b-225">CPU가 75% 초과인 경우 1만큼 규모 확장</span><span class="sxs-lookup"><span data-stu-id="15b0b-225">If CPU > 75%, scale-out by 1</span></span>
* <span data-ttu-id="15b0b-226">메모리가 75%를 초과하는 경우 1만큼 규모 확장</span><span class="sxs-lookup"><span data-stu-id="15b0b-226">If Memory > 75%, scale-out by 1</span></span>

<span data-ttu-id="15b0b-227">그런 다음 hello에 따라 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-227">Then hello follow occurs:</span></span>

* <span data-ttu-id="15b0b-228">CPU가 76%이고 메모리가 50%인 경우 규모가 확장됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-228">If CPU is 76% and Memory is 50%, we scale-out.</span></span>
* <span data-ttu-id="15b0b-229">CPU가 50%이고 메모리가 76%인 경우 규모가 확장됩니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-229">If CPU is 50% and Memory is 76% we scale-out.</span></span>

<span data-ttu-id="15b0b-230">25%가 CPU 및 메모리는 51% 자동 크기 조정을 수행 하는 경우 다른 손에 hello **하지** 배율 기능을 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-230">On hello other hand, if CPU is 25% and memory is 51% autoscale does **not** scale-in.</span></span> <span data-ttu-id="15b0b-231">Tooscale에 순서로 CPU 29% 및 메모리 49% 여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-231">In order tooscale-in, CPU must be 29% and Memory 49%.</span></span>

### <a name="always-select-a-safe-default-instance-count"></a><span data-ttu-id="15b0b-232">항상 안전한 기본 인스턴스 수 선택</span><span class="sxs-lookup"><span data-stu-id="15b0b-232">Always select a safe default instance count</span></span>
<span data-ttu-id="15b0b-233">hello 기본 인스턴스 수는 중요 한 메트릭을 사용할 수 없을 때 자동 크기 조정 서비스 toothat 수를 조정 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-233">hello default instance count is important autoscale scales your service toothat count when metrics are not available.</span></span> <span data-ttu-id="15b0b-234">따라서 워크로드에 안전한 기본 인스턴스 수를 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-234">Therefore, select a default instance count that's safe for your workloads.</span></span>

### <a name="configure-autoscale-notifications"></a><span data-ttu-id="15b0b-235">자동 크기 조정 알림 구성</span><span class="sxs-lookup"><span data-stu-id="15b0b-235">Configure autoscale notifications</span></span>
<span data-ttu-id="15b0b-236">자동 크기 조정에 게 알리는 hello 관리자 및 참가자 hello 리소스의 전자 메일을 통해 hello 다음 조건 중 하나가 발생 하는 경우:</span><span class="sxs-lookup"><span data-stu-id="15b0b-236">Autoscale notifies hello administrators and contributors of hello resource by email if any of hello following conditions occur:</span></span>

* <span data-ttu-id="15b0b-237">자동 크기 조정 서비스 tootake 작업에 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-237">autoscale service fails tootake an action.</span></span>
* <span data-ttu-id="15b0b-238">자동 크기 조정 서비스 toomake 배율 의사 결정에 사용할 수 있는 메트릭이 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-238">Metrics are not available for autoscale service toomake a scale decision.</span></span>
* <span data-ttu-id="15b0b-239">메트릭을 사용할 수 있는 (복구)은 다시 toomake 배율 의사 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-239">Metrics are available (recovery) again toomake a scale decision.</span></span>
  <span data-ttu-id="15b0b-240">또한 위의 toohello 조건 webhook 또는 전자 메일 알림을 tooget 성공적으로 크기 조정 작업에 대 한 알림을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-240">In addition toohello conditions above, you can configure email or webhook notifications tooget notified for successful scale actions.</span></span>
  
<span data-ttu-id="15b0b-241">Hello 자동 크기 조정 엔진의 작업 로그 경고 toomonitor hello 상태를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-241">You can also use an Activity Log alert toomonitor hello health of hello autoscale engine.</span></span> <span data-ttu-id="15b0b-242">다음은 예제 너무[활동 로그 경고 toomonitor 구독에 대 한 모든 자동 크기 조정 엔진 작업을 만드는](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) 또는 너무[눈금의 자동 크기 조정 하지 못했습니다 모든 /에 작업을 확장 하는 활동 로그 경고 toomonitor 만들기 구독](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert)합니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-242">Here are examples too[create an Activity Log Alert toomonitor all autoscale engine operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert) or too[create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert).</span></span>

## <a name="next-steps"></a><span data-ttu-id="15b0b-243">다음 단계</span><span class="sxs-lookup"><span data-stu-id="15b0b-243">Next Steps</span></span>
- [<span data-ttu-id="15b0b-244">활동 로그 경고 toomonitor 구독에 대 한 모든 자동 크기 조정 엔진 작업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="15b0b-244">Create an Activity Log Alert toomonitor all autoscale engine operations on your subscription.</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-alert)
- [<span data-ttu-id="15b0b-245">활동 로그 경고 toomonitor 눈금의 자동 크기 조정 하지 못했습니다 모든 / 구독에서 작업 확장 만들기</span><span class="sxs-lookup"><span data-stu-id="15b0b-245">Create an Activity Log Alert toomonitor all failed autoscale scale in/scale out operations on your subscription</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/monitor-autoscale-failed-alert)
