---
title: "Azure 앱 서비스 환경에 aaaNetworking 고려 사항"
description: "Hello ASE 네트워크 트래픽을 설명 및 방법을 tooset Nsg 및 UDRs 프로그램 ASE와"
services: app-service
documentationcenter: na
author: ccompy
manager: stefsch
ms.assetid: 955a4d84-94ca-418d-aa79-b57a5eb8cb85
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/08/2017
ms.author: ccompy
ms.openlocfilehash: d4d3000f4d4d75814b1e6d47079d967334eb1a3b
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="networking-considerations-for-an-app-service-environment"></a><span data-ttu-id="5ea17-103">App Service Environment에 대한 네트워킹 고려 사항</span><span class="sxs-lookup"><span data-stu-id="5ea17-103">Networking considerations for an App Service environment</span></span> #

## <a name="overview"></a><span data-ttu-id="5ea17-104">개요</span><span class="sxs-lookup"><span data-stu-id="5ea17-104">Overview</span></span> ##

 <span data-ttu-id="5ea17-105">Azure [App Service Environment][Intro]는 Azure App Service를 Azure VNet(Virtual Network) 내 서브넷에 배포한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-105">Azure [App Service Environment][Intro] is a deployment of Azure App Service into a subnet in your Azure virtual network (VNet).</span></span> <span data-ttu-id="5ea17-106">ASE(App Service Environment)에는 두 가지 배포 유형이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-106">There are two deployment types for an App Service environment (ASE):</span></span>

- <span data-ttu-id="5ea17-107">**외부 ASE**: 노출 hello 인터넷 액세스 가능 IP 주소에 ASE 호스트 앱입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-107">**External ASE**: Exposes hello ASE-hosted apps on an internet-accessible IP address.</span></span> <span data-ttu-id="5ea17-108">자세한 내용은 [외부 ASE 만들기][MakeExternalASE]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5ea17-108">For more information, see [Create an External ASE][MakeExternalASE].</span></span>
- <span data-ttu-id="5ea17-109">**ILB ASE**: 노출 hello VNet 내 IP 주소에 ASE 호스트 앱.</span><span class="sxs-lookup"><span data-stu-id="5ea17-109">**ILB ASE**: Exposes hello ASE-hosted apps on an IP address inside your VNet.</span></span> <span data-ttu-id="5ea17-110">hello 내부 끝점은 내부 부하 분산 ILB (),이 때문에 ILB ASE 라 부릅니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-110">hello internal endpoint is an internal load balancer (ILB), which is why it's called an ILB ASE.</span></span> <span data-ttu-id="5ea17-111">자세한 내용은 [ILB ASE 만들기 및 사용][MakeILBASE]을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5ea17-111">For more information, see [Create and use an ILB ASE][MakeILBASE].</span></span>

<span data-ttu-id="5ea17-112">현재 App Service Environment에는 두 가지 버전(ASEv1 및 ASEv2)이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-112">There are now two versions of App Service Environment: ASEv1 and ASEv2.</span></span> <span data-ttu-id="5ea17-113">ASEv1 대 한 자세한 내용은 참조 [소개 tooApp 서비스 환경 v1][ASEv1Intro]합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-113">For information on ASEv1, see [Introduction tooApp Service Environment v1][ASEv1Intro].</span></span> <span data-ttu-id="5ea17-114">ASEv1은 클래식 또는 Resource Manager VNet에서 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-114">ASEv1 can be deployed in a classic or Resource Manager VNet.</span></span> <span data-ttu-id="5ea17-115">ASEv2는 Resource Manager VNet에만 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-115">ASEv2 can only be deployed into a Resource Manager VNet.</span></span>

<span data-ttu-id="5ea17-116">모든 호출은 ASE toohello 이동 하는 인터넷 hello ASE hello에 대 한 할당 된 VIP 통해 VNet을 둡니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-116">All calls from an ASE that go toohello internet leave hello VNet through a VIP assigned for hello ASE.</span></span> <span data-ttu-id="5ea17-117">hello이 VIP의 공용 IP는 hello 원본 IP toohello 이동 ASE hello에서 모든 호출에 대해 인터넷 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-117">hello public IP of this VIP is then hello source IP for all calls from hello ASE that go toohello internet.</span></span> <span data-ttu-id="5ea17-118">VNet에서 또는 VPN을 통해 호출 tooresources를 확인 하는 프로그램 ASE에 hello 앱, hello 원본 IP은 ASE 프로그램에서 사용 하는 hello 서브넷의 Ip hello 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-118">If hello apps in your ASE make calls tooresources in your VNet or across a VPN, hello source IP is one of hello IPs in hello subnet used by your ASE.</span></span> <span data-ttu-id="5ea17-119">Hello ASE hello VNet 내 이기 때문에 추가 구성 없이 hello VNet 내의 리소스에 액세스할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-119">Because hello ASE is within hello VNet, it can also access resources within hello VNet without any additional configuration.</span></span> <span data-ttu-id="5ea17-120">연결 된 tooyour 온-프레미스 네트워크 hello VNet을 사용 하는 경우 앱 프로그램 ASE에도 대 한 액세스 tooresources 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-120">If hello VNet is connected tooyour on-premises network, apps in your ASE also have access tooresources there.</span></span> <span data-ttu-id="5ea17-121">않아도 tooconfigure hello ASE 또는 응용 프로그램 모두 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-121">You don't need tooconfigure hello ASE or your app any further.</span></span>

![외부 ASE][1] 

<span data-ttu-id="5ea17-123">외부 ASE를 사용 하도록 설정한 경우 공용 VIP hello ASE 앱 toofor를 해결 하는 hello 끝점 이기도 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-123">If you have an External ASE, hello public VIP is also hello endpoint that your ASE apps resolve toofor:</span></span>

* <span data-ttu-id="5ea17-124">HTTP/S</span><span class="sxs-lookup"><span data-stu-id="5ea17-124">HTTP/S.</span></span> 
* <span data-ttu-id="5ea17-125">FTP/S</span><span class="sxs-lookup"><span data-stu-id="5ea17-125">FTP/S.</span></span> 
* <span data-ttu-id="5ea17-126">웹 배포</span><span class="sxs-lookup"><span data-stu-id="5ea17-126">Web deployment.</span></span>
* <span data-ttu-id="5ea17-127">원격 디버깅</span><span class="sxs-lookup"><span data-stu-id="5ea17-127">Remote debugging.</span></span>

![ILB ASE][2]

<span data-ttu-id="5ea17-129">ILB ASE를 사용 하도록 설정한 경우 hello ILB의 IP 주소 hello은 HTTP/S, FTP/S, 웹 배포 및 원격 디버깅에 대 한 hello 끝점입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-129">If you have an ILB ASE, hello IP address of hello ILB is hello endpoint for HTTP/S, FTP/S, web deployment, and remote debugging.</span></span>

<span data-ttu-id="5ea17-130">hello 일반적인 앱 액세스 포트는 같습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-130">hello normal app access ports are:</span></span>

| <span data-ttu-id="5ea17-131">사용</span><span class="sxs-lookup"><span data-stu-id="5ea17-131">Use</span></span> | <span data-ttu-id="5ea17-132">원본</span><span class="sxs-lookup"><span data-stu-id="5ea17-132">From</span></span> | <span data-ttu-id="5ea17-133">너무</span><span class="sxs-lookup"><span data-stu-id="5ea17-133">too</span></span>|
|----------|---------|-------------|
|  <span data-ttu-id="5ea17-134">HTTP/HTTPS</span><span class="sxs-lookup"><span data-stu-id="5ea17-134">HTTP/HTTPS</span></span>  | <span data-ttu-id="5ea17-135">사용자 구성 가능</span><span class="sxs-lookup"><span data-stu-id="5ea17-135">User configurable</span></span> |  <span data-ttu-id="5ea17-136">80, 443</span><span class="sxs-lookup"><span data-stu-id="5ea17-136">80, 443</span></span> |
|  <span data-ttu-id="5ea17-137">FTP/FTPS</span><span class="sxs-lookup"><span data-stu-id="5ea17-137">FTP/FTPS</span></span>    | <span data-ttu-id="5ea17-138">사용자 구성 가능</span><span class="sxs-lookup"><span data-stu-id="5ea17-138">User configurable</span></span> |  <span data-ttu-id="5ea17-139">21, 990, 10001-10020</span><span class="sxs-lookup"><span data-stu-id="5ea17-139">21, 990, 10001-10020</span></span> |
|  <span data-ttu-id="5ea17-140">Visual Studio 원격 디버깅</span><span class="sxs-lookup"><span data-stu-id="5ea17-140">Visual Studio remote debugging</span></span>  |  <span data-ttu-id="5ea17-141">사용자 구성 가능</span><span class="sxs-lookup"><span data-stu-id="5ea17-141">User configurable</span></span> |  <span data-ttu-id="5ea17-142">4016, 4018, 4020, 4022</span><span class="sxs-lookup"><span data-stu-id="5ea17-142">4016, 4018, 4020, 4022</span></span> |

<span data-ttu-id="5ea17-143">외부 ASE를 사용하든, ILB ASE를 사용하든 위 표에 나와 있는 포트가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-143">This is true if you're on an External ASE or on an ILB ASE.</span></span> <span data-ttu-id="5ea17-144">외부 ASE를 사용 하는 경우 공용 VIP hello에서이 포트를 누르면 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-144">If you're on an External ASE, you hit those ports on hello public VIP.</span></span> <span data-ttu-id="5ea17-145">ILB ASE를 사용 하는 경우 ILB hello에서이 포트를 누르면 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-145">If you're on an ILB ASE, you hit those ports on hello ILB.</span></span> <span data-ttu-id="5ea17-146">포트 443 잠근 경우 hello 포털에서 표시 하는 일부 기능에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-146">If you lock down port 443, there can be an effect on some features exposed in hello portal.</span></span> <span data-ttu-id="5ea17-147">자세한 내용은 [포털 종속성](#portaldep)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5ea17-147">For more information, see [Portal dependencies](#portaldep).</span></span>

## <a name="ase-dependencies"></a><span data-ttu-id="5ea17-148">ASE 종속성</span><span class="sxs-lookup"><span data-stu-id="5ea17-148">ASE dependencies</span></span> ##

<span data-ttu-id="5ea17-149">ASE 인바운드 액세스 종속성은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-149">An ASE inbound access dependency is:</span></span>

| <span data-ttu-id="5ea17-150">사용</span><span class="sxs-lookup"><span data-stu-id="5ea17-150">Use</span></span> | <span data-ttu-id="5ea17-151">원본</span><span class="sxs-lookup"><span data-stu-id="5ea17-151">From</span></span> | <span data-ttu-id="5ea17-152">너무</span><span class="sxs-lookup"><span data-stu-id="5ea17-152">too</span></span>|
|-----|------|----|
| <span data-ttu-id="5ea17-153">관리</span><span class="sxs-lookup"><span data-stu-id="5ea17-153">Management</span></span> | <span data-ttu-id="5ea17-154">App Service 관리 주소</span><span class="sxs-lookup"><span data-stu-id="5ea17-154">App Service management addresses</span></span> | <span data-ttu-id="5ea17-155">ASE 서브넷: 454, 455</span><span class="sxs-lookup"><span data-stu-id="5ea17-155">ASE subnet: 454, 455</span></span> |
|  <span data-ttu-id="5ea17-156">ASE 내부 통신</span><span class="sxs-lookup"><span data-stu-id="5ea17-156">ASE internal communication</span></span> | <span data-ttu-id="5ea17-157">ASE 서브넷: 모든 포트</span><span class="sxs-lookup"><span data-stu-id="5ea17-157">ASE subnet: All ports</span></span> | <span data-ttu-id="5ea17-158">ASE 서브넷: 모든 포트</span><span class="sxs-lookup"><span data-stu-id="5ea17-158">ASE subnet: All ports</span></span>
|  <span data-ttu-id="5ea17-159">Azure Load Balancer 인바운드 허용</span><span class="sxs-lookup"><span data-stu-id="5ea17-159">Allow Azure load balancer inbound</span></span> | <span data-ttu-id="5ea17-160">Azure Load Balancer</span><span class="sxs-lookup"><span data-stu-id="5ea17-160">Azure load balancer</span></span> | <span data-ttu-id="5ea17-161">ASE 서브넷: 모든 포트</span><span class="sxs-lookup"><span data-stu-id="5ea17-161">ASE subnet: All ports</span></span>
|  <span data-ttu-id="5ea17-162">IP 주소가 할당된 앱</span><span class="sxs-lookup"><span data-stu-id="5ea17-162">App assigned IP addresses</span></span> | <span data-ttu-id="5ea17-163">주소가 할당된 앱</span><span class="sxs-lookup"><span data-stu-id="5ea17-163">App assigned addresses</span></span> | <span data-ttu-id="5ea17-164">ASE 서브넷: 모든 포트</span><span class="sxs-lookup"><span data-stu-id="5ea17-164">ASE subnet: All ports</span></span>

<span data-ttu-id="5ea17-165">hello 인바운드 트래픽을 제공 명령과 더하기 toosystem 모니터링 hello ASE 제어 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-165">hello inbound traffic provides command and control of hello ASE in addition toosystem monitoring.</span></span> <span data-ttu-id="5ea17-166">이 트래픽에 대 한 hello 원본 Ip hello에 나열 된 [ASE 관리 해결] [ ASEManagement] 문서.</span><span class="sxs-lookup"><span data-stu-id="5ea17-166">hello source IPs for this traffic are listed in hello [ASE Management addresses][ASEManagement] document.</span></span> <span data-ttu-id="5ea17-167">hello 네트워크 보안 구성에는 모든 Ip 포트 454 및 455에서에서 tooallow 액세스를 해야합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-167">hello network security configuration needs tooallow access from all IPs on ports 454 and 455.</span></span>

<span data-ttu-id="5ea17-168">hello ASE 서브넷 내에서 내부 구성 요소 통신에 사용 되는 포트 수 및 변경 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-168">Within hello ASE subnet there are many ports used for internal component communication and they can change.</span></span>  <span data-ttu-id="5ea17-169">모든 hello 포트에 hello ASE 서브넷 toobe hello ASE 서브넷에서 액세스할 수 있어야합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-169">This requires all of hello ports in hello ASE subnet toobe accessible from hello ASE subnet.</span></span> 

<span data-ttu-id="5ea17-170">Hello Azure 부하 분산 장치 사이의 hello ASE 서브넷 hello 최소한의 포트가 hello 통신에 대 한 열려 해당 필요 toobe은 454, 455 및 16001입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-170">For hello communication between hello Azure load balancer and hello ASE subnet hello minimum ports that need toobe open are 454, 455 and 16001.</span></span> <span data-ttu-id="5ea17-171">hello 16001 포트 hello 부하 분산 장치 및 hello ASE 간 유지 활성 트래픽에 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-171">hello 16001 port is used for keep alive traffic between hello load balancer and hello ASE.</span></span> <span data-ttu-id="5ea17-172">ILB ASE를 사용 하는 트래픽을 toojust hello 454, 455, 16001 포트를 잠글 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-172">If you are using an ILB ASE then you can lock traffic down toojust hello 454, 455, 16001 ports.</span></span>  <span data-ttu-id="5ea17-173">외부 ASE를 사용 하는 경우 다음 해야 tootake 계정 hello 일반적인 앱 액세스 포트.</span><span class="sxs-lookup"><span data-stu-id="5ea17-173">If you are using an External ASE then you need tootake into account hello normal app access ports.</span></span>  <span data-ttu-id="5ea17-174">Tooopen 앱 할당 된 주소를 사용 하는 경우 해야 것 tooall 포트입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-174">If you are using app assigned addresses you need tooopen it tooall ports.</span></span>  <span data-ttu-id="5ea17-175">주소는 tooa 특정 앱에 할당 된 경우 hello 부하 분산 장치 미리 toosend HTTP 및 HTTPS 트래픽 toohello ASE 알 수 없는 포트를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-175">When an address is assigned tooa specific app, then hello load balancer will use ports that are not known of in advance toosend HTTP and HTTPS traffic toohello ASE.</span></span>

<span data-ttu-id="5ea17-176">응용 프로그램 할당 된 IP 주소를 사용 하는 경우 Ip 할당 tooyour 앱 toohello ASE 서브넷 hello tooallow 트래픽이 전송을 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-176">If you are using app assigned IP addresses you need tooallow traffic from hello IPs assigned tooyour apps toohello ASE subnet.</span></span>

<span data-ttu-id="5ea17-177">아웃 바운드 액세스의 경우 ASE는 여러 외부 시스템에 종속됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-177">For outbound access, an ASE depends on multiple external systems.</span></span> <span data-ttu-id="5ea17-178">해당 시스템 종속성 DNS 이름으로 정의 되 고 tooa 고정 IP 주소 집합에 매핑하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="5ea17-178">Those system dependencies are defined with DNS names and don't map tooa fixed set of IP addresses.</span></span> <span data-ttu-id="5ea17-179">Hello ASE hello ASE 서브넷 tooall에서 아웃 바운드 액세스를 해야 하는 따라서 다양 한 포트의 외부 Ip입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-179">Thus, hello ASE requires outbound access from hello ASE subnet tooall external IPs across a variety of ports.</span></span> <span data-ttu-id="5ea17-180">ASE hello 아웃 바운드 종속성 뒤에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-180">An ASE has hello following outbound dependencies:</span></span>

| <span data-ttu-id="5ea17-181">사용</span><span class="sxs-lookup"><span data-stu-id="5ea17-181">Use</span></span> | <span data-ttu-id="5ea17-182">원본</span><span class="sxs-lookup"><span data-stu-id="5ea17-182">From</span></span> | <span data-ttu-id="5ea17-183">너무</span><span class="sxs-lookup"><span data-stu-id="5ea17-183">too</span></span>|
|-----|------|----|
| <span data-ttu-id="5ea17-184">Azure 저장소</span><span class="sxs-lookup"><span data-stu-id="5ea17-184">Azure Storage</span></span> | <span data-ttu-id="5ea17-185">ASE 서브넷</span><span class="sxs-lookup"><span data-stu-id="5ea17-185">ASE subnet</span></span> | <span data-ttu-id="5ea17-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445(445는 ASEv1의 경우에만 필요함)</span><span class="sxs-lookup"><span data-stu-id="5ea17-186">table.core.windows.net, blob.core.windows.net, queue.core.windows.net, file.core.windows.net: 80, 443, 445 (445 is only needed for ASEv1.)</span></span> |
| <span data-ttu-id="5ea17-187">Azure SQL 데이터베이스</span><span class="sxs-lookup"><span data-stu-id="5ea17-187">Azure SQL Database</span></span> | <span data-ttu-id="5ea17-188">ASE 서브넷</span><span class="sxs-lookup"><span data-stu-id="5ea17-188">ASE subnet</span></span> | <span data-ttu-id="5ea17-189">database.windows.net: 1433, 11000-11999, 14000-14999(자세한 내용은 [SQL Database V12 포트 사용](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md) 참조)</span><span class="sxs-lookup"><span data-stu-id="5ea17-189">database.windows.net: 1433, 11000-11999, 14000-14999 (For more information, see [SQL Database V12 port usage](../../sql-database/sql-database-develop-direct-route-ports-adonet-v12.md).)</span></span>|
| <span data-ttu-id="5ea17-190">Azure 관리</span><span class="sxs-lookup"><span data-stu-id="5ea17-190">Azure management</span></span> | <span data-ttu-id="5ea17-191">ASE 서브넷</span><span class="sxs-lookup"><span data-stu-id="5ea17-191">ASE subnet</span></span> | <span data-ttu-id="5ea17-192">management.core.windows.net, management.azure.com: 443</span><span class="sxs-lookup"><span data-stu-id="5ea17-192">management.core.windows.net, management.azure.com: 443</span></span> 
| <span data-ttu-id="5ea17-193">SSL 인증서 확인</span><span class="sxs-lookup"><span data-stu-id="5ea17-193">SSL certificate verification</span></span> |  <span data-ttu-id="5ea17-194">ASE 서브넷</span><span class="sxs-lookup"><span data-stu-id="5ea17-194">ASE subnet</span></span>            |  <span data-ttu-id="5ea17-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span><span class="sxs-lookup"><span data-stu-id="5ea17-195">ocsp.msocsp.com, mscrl.microsoft.com, crl.microsoft.com: 443</span></span>
| <span data-ttu-id="5ea17-196">Azure Active Directory</span><span class="sxs-lookup"><span data-stu-id="5ea17-196">Azure Active Directory</span></span>        | <span data-ttu-id="5ea17-197">ASE 서브넷</span><span class="sxs-lookup"><span data-stu-id="5ea17-197">ASE subnet</span></span>            |  <span data-ttu-id="5ea17-198">인터넷: 443</span><span class="sxs-lookup"><span data-stu-id="5ea17-198">Internet: 443</span></span>
| <span data-ttu-id="5ea17-199">App Service 관리</span><span class="sxs-lookup"><span data-stu-id="5ea17-199">App Service management</span></span>        | <span data-ttu-id="5ea17-200">ASE 서브넷</span><span class="sxs-lookup"><span data-stu-id="5ea17-200">ASE subnet</span></span>            |  <span data-ttu-id="5ea17-201">인터넷: 443</span><span class="sxs-lookup"><span data-stu-id="5ea17-201">Internet: 443</span></span>
| <span data-ttu-id="5ea17-202">Azure DNS</span><span class="sxs-lookup"><span data-stu-id="5ea17-202">Azure DNS</span></span>                     | <span data-ttu-id="5ea17-203">ASE 서브넷</span><span class="sxs-lookup"><span data-stu-id="5ea17-203">ASE subnet</span></span>            |  <span data-ttu-id="5ea17-204">인터넷: 53</span><span class="sxs-lookup"><span data-stu-id="5ea17-204">Internet: 53</span></span>
| <span data-ttu-id="5ea17-205">ASE 내부 통신</span><span class="sxs-lookup"><span data-stu-id="5ea17-205">ASE internal communication</span></span>    | <span data-ttu-id="5ea17-206">ASE 서브넷: 모든 포트</span><span class="sxs-lookup"><span data-stu-id="5ea17-206">ASE subnet: All ports</span></span> |  <span data-ttu-id="5ea17-207">ASE 서브넷: 모든 포트</span><span class="sxs-lookup"><span data-stu-id="5ea17-207">ASE subnet: All ports</span></span>

<span data-ttu-id="5ea17-208">Hello ASE 끊어지더라도 액세스 toothese 종속성 작동 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-208">If hello ASE loses access toothese dependencies, it stops working.</span></span> <span data-ttu-id="5ea17-209">Hello ASE 충분히 긴 이런 경우 일시 중단 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-209">When that happens long enough, hello ASE is suspended.</span></span>

### <a name="customer-dns"></a><span data-ttu-id="5ea17-210">고객 DNS</span><span class="sxs-lookup"><span data-stu-id="5ea17-210">Customer DNS</span></span> ###

<span data-ttu-id="5ea17-211">Hello VNet을 구성 된 경우 사용자가 정의한 DNS 서버를 통해 hello 테 넌 트 작업으로 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-211">If hello VNet is configured with a customer-defined DNS server, hello tenant workloads use it.</span></span> <span data-ttu-id="5ea17-212">hello ASE는 관리 목적을 위해 Azure dns toocommunicate 여전히 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-212">hello ASE still needs toocommunicate with Azure DNS for management purposes.</span></span> 

<span data-ttu-id="5ea17-213">Hello VNet에 구성 된 경우 DNS 고객과 VPN의 다른 쪽 hello, DNS 서버 hello hello ASE를 포함 하는 hello 서브넷에서 연결할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-213">If hello VNet is configured with a customer DNS on hello other side of a VPN, hello DNS server must be reachable from hello subnet that contains hello ASE.</span></span>

<a name="portaldep"></a>

## <a name="portal-dependencies"></a><span data-ttu-id="5ea17-214">포털 종속성</span><span class="sxs-lookup"><span data-stu-id="5ea17-214">Portal dependencies</span></span> ##

<span data-ttu-id="5ea17-215">또한 toohello ASE 기능 종속성에서 된 몇 가지 추가 항목이 관련된 toohello 포털 환경입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-215">In addition toohello ASE functional dependencies, there are a few extra items related toohello portal experience.</span></span> <span data-ttu-id="5ea17-216">Hello Azure 포털에서에서 hello 기능 중 일부에 직접 액세스 too_SCM 사이트 _에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-216">Some of hello capabilities in hello Azure portal depend on direct access too_SCM site_.</span></span> <span data-ttu-id="5ea17-217">Azure App Service의 모든 앱에는 URL이 두 개 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-217">For every app in Azure App Service, there are two URLs.</span></span> <span data-ttu-id="5ea17-218">hello 첫 번째 URL은 tooaccess 앱.</span><span class="sxs-lookup"><span data-stu-id="5ea17-218">hello first URL is tooaccess your app.</span></span> <span data-ttu-id="5ea17-219">hello 두 번째 URL은 hello 라고도 함 tooaccess hello SCM 사이트 _Kudu 콘솔_합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-219">hello second URL is tooaccess hello SCM site, which is also called hello _Kudu console_.</span></span> <span data-ttu-id="5ea17-220">Hello SCM 사이트를 사용 하는 기능은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-220">Features that use hello SCM site include:</span></span>

-   <span data-ttu-id="5ea17-221">웹 작업</span><span class="sxs-lookup"><span data-stu-id="5ea17-221">Web jobs</span></span>
-   <span data-ttu-id="5ea17-222">함수</span><span class="sxs-lookup"><span data-stu-id="5ea17-222">Functions</span></span>
-   <span data-ttu-id="5ea17-223">스트리밍 로그</span><span class="sxs-lookup"><span data-stu-id="5ea17-223">Log streaming</span></span>
-   <span data-ttu-id="5ea17-224">Kudu</span><span class="sxs-lookup"><span data-stu-id="5ea17-224">Kudu</span></span>
-   <span data-ttu-id="5ea17-225">확장</span><span class="sxs-lookup"><span data-stu-id="5ea17-225">Extensions</span></span>
-   <span data-ttu-id="5ea17-226">Process Explorer</span><span class="sxs-lookup"><span data-stu-id="5ea17-226">Process Explorer</span></span>
-   <span data-ttu-id="5ea17-227">콘솔</span><span class="sxs-lookup"><span data-stu-id="5ea17-227">Console</span></span>

<span data-ttu-id="5ea17-228">ILB ASE를 사용 하면 hello SCM 사이트 인터넷 hello VNet 외부에서 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-228">When you use an ILB ASE, hello SCM site isn't internet accessible from outside hello VNet.</span></span> <span data-ttu-id="5ea17-229">응용 프로그램은 ILB ASE에 호스트 되는 경우 hello 포털에서 일부 기능이 작동 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-229">When your app is hosted on an ILB ASE, some capabilities will not work from hello portal.</span></span>  

<span data-ttu-id="5ea17-230">Hello SCM 사이트에 종속 된 이러한 기능을 대부분 hello Kudu 콘솔에서 직접 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-230">Many of those capabilities that depend upon hello SCM site are also available directly in hello Kudu console.</span></span> <span data-ttu-id="5ea17-231">Tooit hello 포털을 사용 하는 대신 직접 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-231">You can connect tooit directly rather than by using hello portal.</span></span> <span data-ttu-id="5ea17-232">응용 프로그램을 ILB ASE에 호스트 된 경우의 게시 자격 증명 toosign 프로그램을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-232">If your app is hosted in an ILB ASE, use your publishing credentials toosign in.</span></span> <span data-ttu-id="5ea17-233">ILB ASE에 호스팅되는 앱의 hello URL tooaccess hello SCM 사이트 형식에 따라 hello에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-233">hello URL tooaccess hello SCM site of an app hosted in an ILB ASE has hello following format:</span></span> 

```
<appname>.scm.<domain name hello ILB ASE was created with> 
```

<span data-ttu-id="5ea17-234">ILB ASE hello 도메인 이름이 경우 *contoso.net* 앱 이름이 및 *testapp*, hello 앱에서에 도달 하면 *testapp.contoso.net*합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-234">If your ILB ASE is hello domain name *contoso.net* and your app name is *testapp*, hello app is reached at *testapp.contoso.net*.</span></span> <span data-ttu-id="5ea17-235">함께 이동 hello SCM 사이트에 도달 하면 *testapp.scm.contoso.net*합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-235">hello SCM site that goes with it is reached at *testapp.scm.contoso.net*.</span></span>

### <a name="functions-and-web-jobs"></a><span data-ttu-id="5ea17-236">함수 및 웹 작업</span><span class="sxs-lookup"><span data-stu-id="5ea17-236">Functions and Web jobs</span></span> ###

<span data-ttu-id="5ea17-237">함수와 웹 작업 hello SCM 사이트에 따라 달라 집니다 하지만 경우에 앱 ILB ASE에 브라우저 hello SCM 사이트에 도달할 수으로 hello 포털에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-237">Both Functions and Web jobs depend on hello SCM site but are supported for use in hello portal, even if your apps are in an ILB ASE, so long as your browser can reach hello SCM site.</span></span>  <span data-ttu-id="5ea17-238">ILB ASE를 사용 하는 자체 서명 된 인증서 인증서 프로그램 브라우저 tootrust tooenable 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-238">If you are using a self-signed certificate with your ILB ASE, you will need tooenable your browser tootrust that certificate.</span></span>  <span data-ttu-id="5ea17-239">IE와 hello 인증서를 의미 하는 가장자리에 대 한 저장 hello 컴퓨터 신뢰에서 toobe에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-239">For IE and Edge that means hello certificate has toobe in hello computer trust store.</span></span>  <span data-ttu-id="5ea17-240">즉, 아마도 hello scm 사이트를 직접 클릭 하 여 이전 hello 브라우저에서 hello 인증서를 수락 하는 다음 Chrome을 사용 하는 경우</span><span class="sxs-lookup"><span data-stu-id="5ea17-240">If you are using Chrome then that means you accepted hello certificate in hello browser earlier by presumably hitting hello scm site directly.</span></span>  <span data-ttu-id="5ea17-241">hello 최상의 솔루션은 toouse hello 브라우저 신뢰 체인에 있는 상용 인증서입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-241">hello best solution is toouse a commercial certificate that is in hello browser chain of trust.</span></span>  

## <a name="ase-ip-addresses"></a><span data-ttu-id="5ea17-242">ASE IP 주소</span><span class="sxs-lookup"><span data-stu-id="5ea17-242">ASE IP addresses</span></span> ##

<span data-ttu-id="5ea17-243">ASE에 몇 가지 IP 주소 toobe 알고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-243">An ASE has a few IP addresses toobe aware of.</span></span> <span data-ttu-id="5ea17-244">아래에 이 계정과 키의 예제가 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-244">They are:</span></span>

- <span data-ttu-id="5ea17-245">**공용 인바운드 IP 주소**: 외부 ASE의 앱 트래픽 및 외부 ASE와 ILB ASE 둘 다의 관리 트래픽에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-245">**Public inbound IP address**: Used for app traffic in an External ASE, and management traffic in both an External ASE and an ILB ASE.</span></span>
- <span data-ttu-id="5ea17-246">**아웃 바운드 공용 IP**: hello "IP 에서" hello ASE의 아웃 바운드 연결에 대 한 해당 leave hello VNet VPN 아래로 라우트되 아닌를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-246">**Outbound public IP**: Used as hello "from" IP for outbound connections from hello ASE that leave hello VNet, which aren't routed down a VPN.</span></span>
- <span data-ttu-id="5ea17-247">**ILB IP 주소**: ILB ASE를 사용하는 경우 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-247">**ILB IP address**: If you use an ILB ASE.</span></span>
- <span data-ttu-id="5ea17-248">**앱에 할당된 IP 기반 SSL 주소**: 외부 ASE를 사용하며 IP 기반 SSL이 구성되어 있을 때만 사용 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-248">**App-assigned IP-based SSL addresses**: Only possible with an External ASE and when IP-based SSL is configured.</span></span>

<span data-ttu-id="5ea17-249">이러한 모든 IP 주소는 hello ASE UI에서에서 hello Azure 포털에서에서 ASEv2에서 쉽게 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-249">All these IP addresses are easily visible in an ASEv2 in hello Azure portal from hello ASE UI.</span></span> <span data-ttu-id="5ea17-250">ILB ASE를 사용 하도록 설정한 경우 ILB hello에 대 한 hello IP 나열 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-250">If you have an ILB ASE, hello IP for hello ILB is listed.</span></span>

![IP 주소][3]

### <a name="app-assigned-ip-addresses"></a><span data-ttu-id="5ea17-252">앱에 할당된 IP 주소</span><span class="sxs-lookup"><span data-stu-id="5ea17-252">App-assigned IP addresses</span></span> ###

<span data-ttu-id="5ea17-253">외부 ASE IP 주소 tooindividual 앱 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-253">With an External ASE, you can assign IP addresses tooindividual apps.</span></span> <span data-ttu-id="5ea17-254">ILB ASE에서는 IP 주소를 할당할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-254">You can't do that with an ILB ASE.</span></span> <span data-ttu-id="5ea17-255">방법에 대 한 자세한 내용은 tooconfigure 앱 toohave 자체 IP 주소 참조 [는 기존 사용자 지정 SSL 인증서 tooAzure 웹 앱을 바인딩할](../../app-service-web/app-service-web-tutorial-custom-ssl.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-255">For more information on how tooconfigure your app toohave its own IP address, see [Bind an existing custom SSL certificate tooAzure web apps](../../app-service-web/app-service-web-tutorial-custom-ssl.md).</span></span>

<span data-ttu-id="5ea17-256">응용 프로그램에 고유한 IP 기반 SSL 주소가, hello ASE 두 개의 포트 toomap toothat IP 주소를 예약 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-256">When an app has its own IP-based SSL address, hello ASE reserves two ports toomap toothat IP address.</span></span> <span data-ttu-id="5ea17-257">한 포트는 HTTP 트래픽의 및 hello 다른 포트는 https의 경우.</span><span class="sxs-lookup"><span data-stu-id="5ea17-257">One port is for HTTP traffic, and hello other port is for HTTPS.</span></span> <span data-ttu-id="5ea17-258">이러한 포트는 hello ASE UI hello IP 주소 섹션에서에 나열 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-258">Those ports are listed in hello ASE UI in hello IP addresses section.</span></span> <span data-ttu-id="5ea17-259">트래픽 수 tooreach에서 이러한 포트 여야 합니다 또는 hello 앱의 hello VIP는 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-259">Traffic must be able tooreach those ports from hello VIP or hello apps are inaccessible.</span></span> <span data-ttu-id="5ea17-260">이 요구 사항은 보안 Nsg (네트워크 그룹)를 구성할 때 중요 한 tooremember를입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-260">This requirement is important tooremember when you configure Network Security Groups (NSGs).</span></span>

## <a name="network-security-groups"></a><span data-ttu-id="5ea17-261">네트워크 보안 그룹</span><span class="sxs-lookup"><span data-stu-id="5ea17-261">Network Security Groups</span></span> ##

<span data-ttu-id="5ea17-262">[네트워크 보안 그룹] [ NSGs] VNet 내 hello 기능 toocontrol 네트워크 액세스를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-262">[Network Security Groups][NSGs] provide hello ability toocontrol network access within a VNet.</span></span> <span data-ttu-id="5ea17-263">Hello 포털을 사용 하 여이 암시적 거부 규칙을 가장 낮은 우선 순위 toodeny hello에서 모든 항목입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-263">When you use hello portal, there's an implicit deny rule at hello lowest priority toodeny everything.</span></span> <span data-ttu-id="5ea17-264">허용 규칙은 사용자가 직접 작성합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-264">What you build are your allow rules.</span></span>

<span data-ttu-id="5ea17-265">ASE에 대 한 액세스 toohello 사용 되는 Vm toohost hello ASE 자체 필요는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-265">In an ASE, you don't have access toohello VMs used toohost hello ASE itself.</span></span> <span data-ttu-id="5ea17-266">Microsoft에서 관리하는 구독을 통해 이러한 VM에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-266">They're in a Microsoft-managed subscription.</span></span> <span data-ttu-id="5ea17-267">Hello ASE에서 toorestrict 액세스 toohello 앱 hello ASE 서브넷에 Nsg를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-267">If you want toorestrict access toohello apps on hello ASE, set NSGs on hello ASE subnet.</span></span> <span data-ttu-id="5ea17-268">이 과정에서 toohello ASE 종속성 주의 주의 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-268">In doing so, pay careful attention toohello ASE dependencies.</span></span> <span data-ttu-id="5ea17-269">모든 종속성을 차단 하는 경우 hello ASE 작동이 중단 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-269">If you block any dependencies, hello ASE stops working.</span></span>

<span data-ttu-id="5ea17-270">Nsg은 hello Azure 포털 또는 PowerShell을 통해 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-270">NSGs can be configured through hello Azure portal or via PowerShell.</span></span> <span data-ttu-id="5ea17-271">여기에 hello 정보 hello Azure 포털을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-271">hello information here shows hello Azure portal.</span></span> <span data-ttu-id="5ea17-272">만들고에서 최상위 리소스로 Nsg hello 포털에서 관리 **네트워킹**합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-272">You create and manage NSGs in hello portal as a top-level resource under **Networking**.</span></span>

<span data-ttu-id="5ea17-273">Hello 인바운드 및 아웃 바운드 요구 사항을 고려 하십시오 hello Nsg 비슷한 toohello Nsg에이 예에서 같아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-273">When hello inbound and outbound requirements are taken into account, hello NSGs should look similar toohello NSGs shown in this example.</span></span> <span data-ttu-id="5ea17-274">hello VNet 주소 범위는 _192.168.250.0/16_, hello ASE에 있는 hello 서브넷 이며 _192.168.251.128/25_합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-274">hello VNet address range is _192.168.250.0/16_, and hello subnet that hello ASE is in is _192.168.251.128/25_.</span></span>

<span data-ttu-id="5ea17-275">hello 처음 두 인바운드 요구 사항에 대 한 hello ASE toofunction hello이 예에서 hello 목록 위쪽에 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-275">hello first two inbound requirements for hello ASE toofunction are shown at hello top of hello list in this example.</span></span> <span data-ttu-id="5ea17-276">ASE 관리와 고 자신과 hello ASE toocommunicate 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-276">They enable ASE management and allow hello ASE toocommunicate with itself.</span></span> <span data-ttu-id="5ea17-277">hello 다른 항목은 구성 가능한 모든 테 넌 되며 네트워크 액세스 toohello ASE 호스팅 응용 프로그램을 제어할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-277">hello other entries are all tenant configurable and can govern network access toohello ASE-hosted applications.</span></span> 

![인바운드 보안 규칙][4]

<span data-ttu-id="5ea17-279">기본 규칙은 hello VNet tootalk toohello ASE 서브넷의 Ip hello 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-279">A default rule enables hello IPs in hello VNet tootalk toohello ASE subnet.</span></span> <span data-ttu-id="5ea17-280">다른 기본 규칙 hello 부하 분산 장치를 hello 공용 VIP, ASE hello로 toocommunicate로도 알려져 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-280">Another default rule enables hello load balancer, also known as hello public VIP, toocommunicate with hello ASE.</span></span> <span data-ttu-id="5ea17-281">toosee hello 기본 규칙을 선택 **규칙 기본** 다음 toohello **추가** 아이콘입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-281">toosee hello default rules, select **Default rules** next toohello **Add** icon.</span></span> <span data-ttu-id="5ea17-282">Deny hello NSG 규칙 표시 된 후 나머지 모든 규칙을 두면 hello VIP와 hello ASE 간의 트래픽을 방지 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-282">If you put a deny everything else rule after hello NSG rules shown, you prevent traffic between hello VIP and hello ASE.</span></span> <span data-ttu-id="5ea17-283">들어오는 tooprevent 트래픽을 hello VNet 내 추가 사용자 고유의 규칙 tooallow 인바운드 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-283">tooprevent traffic coming from inside hello VNet, add your own rule tooallow inbound.</span></span> <span data-ttu-id="5ea17-284">소스 같은 tooAzureLoadBalancer의 대상으로 사용 하 여 **모든** 및 포트 범위의  **\*** 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-284">Use a source equal tooAzureLoadBalancer with a destination of **Any** and a port range of **\***.</span></span> <span data-ttu-id="5ea17-285">Hello NSG 규칙이 적용 된 toohello ASE 서브넷 이기 때문에 hello 대상에 toobe 특정이 필요는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-285">Because hello NSG rule is applied toohello ASE subnet, you don't need toobe specific in hello destination.</span></span>

<span data-ttu-id="5ea17-286">IP 주소 tooyour 앱에 할당 한 경우 hello 열린 포트를 유지 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-286">If you assigned an IP address tooyour app, make sure you keep hello ports open.</span></span> <span data-ttu-id="5ea17-287">toosee hello 포트 선택 **앱 서비스 환경** > **IP 주소**합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-287">toosee hello ports, select **App Service Environment** > **IP addresses**.</span></span>  

<span data-ttu-id="5ea17-288">아웃 바운드 규칙에 따라 hello에 표시 된 모든 hello 항목 hello 마지막 항목 제외 하 고 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-288">All hello items shown in hello following outbound rules are needed, except for hello last item.</span></span> <span data-ttu-id="5ea17-289">이 문서의 앞부분에서 언급 하는 네트워크 액세스 toohello ASE 종속성 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-289">They enable network access toohello ASE dependencies that were noted earlier in this article.</span></span> <span data-ttu-id="5ea17-290">이러한 항목 중 하나라도 차단하면 ASE의 작동이 중지됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-290">If you block any of them, your ASE stops working.</span></span> <span data-ttu-id="5ea17-291">hello hello 목록의 마지막 항목에는 VNet의 다른 리소스와 사용자 ASE toocommunicate를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-291">hello last item in hello list enables your ASE toocommunicate with other resources in your VNet.</span></span>

![아웃바운드 보안 규칙][5]

<span data-ttu-id="5ea17-293">프로그램 Nsg를 정의한 후 toohello 서브넷에 있는 프로그램 ASE 할당 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-293">After your NSGs are defined, assign them toohello subnet that your ASE is on.</span></span> <span data-ttu-id="5ea17-294">Hello ASE VNet 또는 서브넷을 기억 하지 못하는 경우에 hello ASE 관리 포털에서 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-294">If you don’t remember hello ASE VNet or subnet, you can see it from hello ASE management portal.</span></span> <span data-ttu-id="5ea17-295">tooassign은 NSG tooyour 서브넷 hello toohello 서브넷 UI 이동한 hello NSG를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-295">tooassign hello NSG tooyour subnet, go toohello subnet UI and select hello NSG.</span></span>

## <a name="routes"></a><span data-ttu-id="5ea17-296">경로</span><span class="sxs-lookup"><span data-stu-id="5ea17-296">Routes</span></span> ##

<span data-ttu-id="5ea17-297">경로 문제는 Azure ExpressRoute를 사용하여 VNet을 구성할 때 가장 흔히 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-297">Routes become problematic most commonly when you configure your VNet with Azure ExpressRoute.</span></span> <span data-ttu-id="5ea17-298">VNet에는 세 가지 유형의 경로가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-298">There are three types of routes in a VNet:</span></span>

-   <span data-ttu-id="5ea17-299">시스템 경로</span><span class="sxs-lookup"><span data-stu-id="5ea17-299">System routes</span></span>
-   <span data-ttu-id="5ea17-300">BGP 경로</span><span class="sxs-lookup"><span data-stu-id="5ea17-300">BGP routes</span></span>
-   <span data-ttu-id="5ea17-301">UDR(사용자 정의 경로)</span><span class="sxs-lookup"><span data-stu-id="5ea17-301">User-defined routes (UDRs)</span></span>

<span data-ttu-id="5ea17-302">BGP 경로는 시스템 경로를 재정의합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-302">BGP routes override system routes.</span></span> <span data-ttu-id="5ea17-303">UDR은 BGP 경로를 재정의합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-303">UDRs override BGP routes.</span></span> <span data-ttu-id="5ea17-304">Azure Virtual Networks의 경로에 대한 자세한 내용은 [사용자 정의 경로 개요][UDRs]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5ea17-304">For more information about routes in Azure virtual networks, see [User-defined routes overview][UDRs].</span></span>

<span data-ttu-id="5ea17-305">hello ASE toomanage hello 시스템을 사용 하는 hello Azure SQL 데이터베이스 방화벽을 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-305">hello Azure SQL database that hello ASE uses toomanage hello system has a firewall.</span></span> <span data-ttu-id="5ea17-306">통신 toooriginate hello ASE 공용 VIP에서에서 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-306">It requires communication toooriginate from hello ASE public VIP.</span></span> <span data-ttu-id="5ea17-307">Hello ASE에서 연결 toohello SQL 데이터베이스 다운 hello ExpressRoute 연결 및 다른 IP 주소 out 보낼 경우 거부 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-307">Connections toohello SQL database from hello ASE will be denied if they are sent down hello ExpressRoute connection and out another IP address.</span></span>

<span data-ttu-id="5ea17-308">ExpressRoute hello 아래로 회신 tooincoming 관리 요청을 보내면 hello 회신 주소 hello 원래 대상과 차이가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-308">If replies tooincoming management requests are sent down hello ExpressRoute, hello reply address is different than hello original destination.</span></span> <span data-ttu-id="5ea17-309">이 불일치는 hello TCP 통신을 중단합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-309">This mismatch breaks hello TCP communication.</span></span>

<span data-ttu-id="5ea17-310">ASE toowork VNet ExpressRoute를 사용 하는 동안 hello 쉬운 일 toodo는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-310">For your ASE toowork while your VNet is configured with an ExpressRoute, hello easiest thing toodo is:</span></span>

-   <span data-ttu-id="5ea17-311">ExpressRoute tooadvertise 구성 _0.0.0.0/0_합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-311">Configure ExpressRoute tooadvertise _0.0.0.0/0_.</span></span> <span data-ttu-id="5ea17-312">기본적으로 ExpressRoute는 온-프레미스의 모든 아웃바운드 트래픽을 강제로 터널링합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-312">By default, it force tunnels all outbound traffic on-premises.</span></span>
-   <span data-ttu-id="5ea17-313">UDR를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-313">Create a UDR.</span></span> <span data-ttu-id="5ea17-314">Hello ASE의 주소 접두사가 포함 된 toohello 서브넷 적용 _0.0.0.0/0_ 는 다음 홉의 형식 및 _인터넷_합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-314">Apply it toohello subnet that contains hello ASE with an address prefix of _0.0.0.0/0_ and a next hop type of _Internet_.</span></span>

<span data-ttu-id="5ea17-315">두 가지 변경 작업을 수행한 경우 hello ASE 서브넷에서 인터넷 대상이 지정 되었으며 트래픽은 works hello ExpressRoute hello ASE 사항과 강제 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-315">If you make these two changes, internet-destined traffic that originates from hello ASE subnet isn't forced down hello ExpressRoute and hello ASE works.</span></span> 

> [!IMPORTANT]
> <span data-ttu-id="5ea17-316">UDR에 정의 된 hello 경로 hello ExpressRoute 구성에서 보급 하는 경로 보다 구체적 tootake 선행 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-316">hello routes defined in a UDR must be specific enough tootake precedence over any routes advertised by hello ExpressRoute configuration.</span></span> <span data-ttu-id="5ea17-317">hello 앞의 예제 hello 광범위 한 0.0.0.0/0 주소 범위가 사용.</span><span class="sxs-lookup"><span data-stu-id="5ea17-317">hello preceding example uses hello broad 0.0.0.0/0 address range.</span></span> <span data-ttu-id="5ea17-318">따라서 더 구체적인 주소 범위를 사용하는 경로 보급 알림으로 인해 주소 범위가 잘못 재정의될 가능성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-318">It can potentially be accidentally overridden by route advertisements that use more specific address ranges.</span></span>
>
> <span data-ttu-id="5ea17-319">ASEs 간 알릴 안녕 공용 피어 링 경로 toohello 개인 피어 링 경로에서 경로 ExpressRoute 구성이 지원 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-319">ASEs aren't supported with ExpressRoute configurations that cross-advertise routes from hello public-peering path toohello private-peering path.</span></span> <span data-ttu-id="5ea17-320">공용 피어링이 구성된 ExpressRoute 구성은 Microsoft에서 경로 보급 알림을 받습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-320">ExpressRoute configurations with public peering configured receive route advertisements from Microsoft.</span></span> <span data-ttu-id="5ea17-321">hello 광고는 다양 한 Microsoft Azure IP 주소 범위를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-321">hello advertisements contain a large set of Microsoft Azure IP address ranges.</span></span> <span data-ttu-id="5ea17-322">Hello ASE의 서브넷에서 모든 아웃 바운드 네트워크 패킷을 hello 주소 범위는 hello 개인 피어 링 경로에 크로스 보급을 경우 강제 터널링된 tooa 고객의 온-프레미스 네트워크 인프라 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-322">If hello address ranges are cross-advertised on hello private-peering path, all outbound network packets from hello ASE's subnet are force tunneled tooa customer's on-premises network infrastructure.</span></span> <span data-ttu-id="5ea17-323">이 네트워크 흐름은 현재 ASE에서 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-323">This network flow is currently not supported with ASEs.</span></span> <span data-ttu-id="5ea17-324">하나의 솔루션 toothis 문제는 hello 공용 피어 링 경로 toohello 개인 피어 링 경로에서 toostop 간 광고 경로입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-324">One solution toothis problem is toostop cross-advertising routes from hello public-peering path toohello private-peering path.</span></span>

<span data-ttu-id="5ea17-325">toocreate UDR, 다음이 단계를 따르십시오.</span><span class="sxs-lookup"><span data-stu-id="5ea17-325">toocreate a UDR, follow these steps:</span></span>

1. <span data-ttu-id="5ea17-326">Azure 포털 toohello를 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-326">Go toohello Azure portal.</span></span> <span data-ttu-id="5ea17-327">**네트워킹** > **경로 테이블**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-327">Select **Networking** > **Route Tables**.</span></span>

2. <span data-ttu-id="5ea17-328">Hello에 새 경로 테이블을 만들려면 동일한 지역 VNet으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-328">Create a new route table in hello same region as your VNet.</span></span>

3. <span data-ttu-id="5ea17-329">경로 테이블 UI 내에서 **경로** > **추가**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-329">From within your route table UI, select **Routes** > **Add**.</span></span>

4. <span data-ttu-id="5ea17-330">집합 hello **다음 홉 형식** 너무**인터넷** 및 hello **주소 접두사** 너무**0.0.0.0/0**합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-330">Set hello **Next hop type** too**Internet** and hello **Address prefix** too**0.0.0.0/0**.</span></span> <span data-ttu-id="5ea17-331">**저장**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-331">Select **Save**.</span></span>

    <span data-ttu-id="5ea17-332">그러면 hello 다음과 같은 내용이 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-332">You then see something like hello following:</span></span>

    ![기능 경로][6]

5. <span data-ttu-id="5ea17-334">Hello 새로운 경로 테이블을 만든 후에 프로그램 ASE이 포함 된 toohello 서브넷을 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-334">After you create hello new route table, go toohello subnet that contains your ASE.</span></span> <span data-ttu-id="5ea17-335">Hello 포털에서 hello 목록에서 경로 테이블을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-335">Select your route table from hello list in hello portal.</span></span> <span data-ttu-id="5ea17-336">Hello 변경을 저장 한 후 hello Nsg 및 서브넷으로 설명 하는 경로 다음 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-336">After you save hello change, you should then see hello NSGs and routes noted with your subnet.</span></span>

    ![NSG 및 경로][7]

### <a name="deploy-into-existing-azure-virtual-networks-that-are-integrated-with-expressroute"></a><span data-ttu-id="5ea17-338">ExpressRoute와 통합된 기존 Azure Virtual Networks에 배포</span><span class="sxs-lookup"><span data-stu-id="5ea17-338">Deploy into existing Azure virtual networks that are integrated with ExpressRoute</span></span> ###

<span data-ttu-id="5ea17-339">toodeploy 프로그램 ASE ExpressRoute를 통합 된 VNet에 배포 된 hello ASE 저장할 hello 서브넷 미리 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-339">toodeploy your ASE into a VNet that's integrated with ExpressRoute, preconfigure hello subnet where you want hello ASE deployed.</span></span> <span data-ttu-id="5ea17-340">다음 사용 하 여 리소스 관리자 템플릿 toodeploy 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-340">Then use a Resource Manager template toodeploy it.</span></span> <span data-ttu-id="5ea17-341">toocreate ASE VNet에 이미 있는 구성 ExpressRoute:</span><span class="sxs-lookup"><span data-stu-id="5ea17-341">toocreate an ASE in a VNet that already has ExpressRoute configured:</span></span>

- <span data-ttu-id="5ea17-342">서브넷 toohost hello를 ASE를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-342">Create a subnet toohost hello ASE.</span></span>

    > [!NOTE]
    > <span data-ttu-id="5ea17-343">Hello 서브넷 하지만 hello ASE만 수행 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-343">Nothing else can be in hello subnet but hello ASE.</span></span> <span data-ttu-id="5ea17-344">있는지 toochoose 이후 성장을 허용 하는 주소 공간 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-344">Be sure toochoose an address space that allows for future growth.</span></span> <span data-ttu-id="5ea17-345">이 설정은 나중에 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-345">You can't change this setting later.</span></span> <span data-ttu-id="5ea17-346">주소 128개를 포함할 수 있는 `/25` 크기를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-346">We recommend a size of `/25` with 128 addresses.</span></span>

- <span data-ttu-id="5ea17-347">앞에서 설명한 대로 UDRs (예를 들어 경로 테이블)를 만들고 hello 서브넷에 있는 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-347">Create UDRs (for example, route tables) as described earlier, and set that on hello subnet.</span></span>
- <span data-ttu-id="5ea17-348">에 설명 된 대로 리소스 관리자 템플릿을 사용 하 여 hello ASE 만들 [ASE 리소스 관리자 템플릿을 사용 하 여 만들][MakeASEfromTemplate]합니다.</span><span class="sxs-lookup"><span data-stu-id="5ea17-348">Create hello ASE by using a Resource Manager template as described in [Create an ASE by using a Resource Manager template][MakeASEfromTemplate].</span></span>

<!--Image references-->
[1]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow.png
[2]: ./media/network_considerations_with_an_app_service_environment/networkase-overflow2.png
[3]: ./media/network_considerations_with_an_app_service_environment/networkase-ipaddresses.png
[4]: ./media/network_considerations_with_an_app_service_environment/networkase-inboundnsg.png
[5]: ./media/network_considerations_with_an_app_service_environment/networkase-outboundnsg.png
[6]: ./media/network_considerations_with_an_app_service_environment/networkase-udr.png
[7]: ./media/network_considerations_with_an_app_service_environment/networkase-subnet.png

<!--Links-->
[Intro]: ./intro.md
[MakeExternalASE]: ./create-external-ase.md
[MakeASEfromTemplate]: ./create-from-template.md
[MakeILBASE]: ./create-ilb-ase.md
[ASENetwork]: ./network-info.md
[ASEReadme]: ./readme.md
[UsingASE]: ./using-an-ase.md
[UDRs]: ../../virtual-network/virtual-networks-udr-overview.md
[NSGs]: ../../virtual-network/virtual-networks-nsg.md
[ConfigureASEv1]: ../../app-service-web/app-service-web-configure-an-app-service-environment.md
[ASEv1Intro]: ../../app-service-web/app-service-app-service-environment-intro.md
[webapps]: ../../app-service-web/app-service-web-overview.md
[mobileapps]: ../../app-service-mobile/app-service-mobile-value-prop.md
[APIapps]: ../../app-service-api/app-service-api-apps-why-best-platform.md
[Functions]: ../../azure-functions/index.yml
[Pricing]: http://azure.microsoft.com/pricing/details/app-service/
[ARMOverview]: ../../azure-resource-manager/resource-group-overview.md
[ConfigureSSL]: ../../app-service-web/web-sites-purchase-ssl-web-site.md
[Kudu]: http://azure.microsoft.com/resources/videos/super-secret-kudu-debug-console-for-azure-web-sites/
[AppDeploy]: ../../app-service-web/web-sites-deploy.md
[ASEWAF]: ../../app-service-web/app-service-app-service-environment-web-application-firewall.md
[AppGW]: ../../application-gateway/application-gateway-web-application-firewall-overview.md
[ASEManagement]: ./management-addresses.md
