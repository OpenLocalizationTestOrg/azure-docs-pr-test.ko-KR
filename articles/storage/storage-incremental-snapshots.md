---
title: "관리 되지 않는 Azure VM 디스크의 백업 및 복구에 대 한 증분 스냅숏 aaaUse | Microsoft Docs"
description: "증분 스냅숏을 사용하여 Azure 가상 컴퓨터 디스크의 백업 및 복구에 대한 사용자 지정 솔루션을 만듭니다."
services: storage
documentationcenter: na
author: aungoo-msft
manager: tadb
editor: tysonn
ms.assetid: 3524b987-bd65-4e35-83e7-fbc2136643e5
ms.service: storage
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/23/2017
ms.author: aungoo
ms.openlocfilehash: 6d3e6d78e953f77a1028ac35dcde1ef046dbc3bb
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="back-up-azure-unmanaged-vm-disks-with-incremental-snapshots"></a><span data-ttu-id="44eba-103">증분 스냅숏을 사용하여 Azure 관리되지 않는 VM 디스크 백업</span><span class="sxs-lookup"><span data-stu-id="44eba-103">Back up Azure unmanaged VM disks with incremental snapshots</span></span>
## <a name="overview"></a><span data-ttu-id="44eba-104">개요</span><span class="sxs-lookup"><span data-stu-id="44eba-104">Overview</span></span>
<span data-ttu-id="44eba-105">Azure 저장소 blob의 스냅숏도 tootake hello 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-105">Azure Storage provides hello capability tootake snapshots of blobs.</span></span> <span data-ttu-id="44eba-106">스냅숏 시간 해당 시점에 hello blob 상태를 캡처합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-106">Snapshots capture hello blob state at that point in time.</span></span> <span data-ttu-id="44eba-107">이 문서에서는 스냅숏을 사용하여 가상 컴퓨터 디스크의 백업을 유지 관리할 수 있는 방법의 시나리오에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-107">In this article, we will describe a scenario of how you can maintain backups of virtual machine disks using snapshots.</span></span> <span data-ttu-id="44eba-108">Toouse 하지 않으려는 경우이 방법을 사용할 수 있습니다 Azure 백업 및 복구 서비스 및 가상 컴퓨터 디스크에 대 한 사용자 지정 백업 전략 희망 toocreate 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-108">You can use this methodology when you choose not toouse Azure Backup and Recovery Service, and wish toocreate a custom backup strategy for your virtual machine disks.</span></span>

<span data-ttu-id="44eba-109">Azure 가상 컴퓨터 디스크는 Azure 저장소에 페이지 Blob으로 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-109">Azure virtual machine disks are stored as page blobs in Azure Storage.</span></span> <span data-ttu-id="44eba-110">이 문서에서 가상 컴퓨터 디스크에 대 한 백업 전략을 논의 하 고 있으므로 페이지 blob의 hello 컨텍스트에서 toosnapshots를 참조 수 됩니다 했습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-110">Since we are talking about backup strategy for virtual machine disks in this article, we will be referring toosnapshots in hello context of page blobs.</span></span> <span data-ttu-id="44eba-111">스냅숏에 대해 자세히 toolearn 너무 참조[Blob의 스냅숏을 만드는](https://msdn.microsoft.com/library/azure/hh488361.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-111">toolearn more about snapshots, refer too[Creating a Snapshot of a Blob](https://msdn.microsoft.com/library/azure/hh488361.aspx).</span></span>

## <a name="what-is-a-snapshot"></a><span data-ttu-id="44eba-112">스냅숏은 무엇입니까?</span><span class="sxs-lookup"><span data-stu-id="44eba-112">What is a snapshot?</span></span>
<span data-ttu-id="44eba-113">Blob 스냅숏은 특정 시점에 캡처된 Blob의 읽기 전용 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-113">A blob snapshot is a read-only version of a blob that is captured at a point in time.</span></span> <span data-ttu-id="44eba-114">스냅숏이 생성된 후에는 읽거나 복사하거나 삭제할 수 있지만 수정할 수는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-114">Once a snapshot has been created, it can be read, copied, or deleted, but not modified.</span></span> <span data-ttu-id="44eba-115">스냅숏은 시점에 표시 된 대로 blob 방법을 tooback를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-115">Snapshots provide a way tooback up a blob as it appears at a moment in time.</span></span> <span data-ttu-id="44eba-116">REST 버전 2015-04-05까지 hello 기능 toocopy 전체 스냅숏 해야 했습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-116">Until REST version 2015-04-05 you had hello ability toocopy full snapshots.</span></span> <span data-ttu-id="44eba-117">Hello REST 버전 2015-07-08 이상에서 있습니다 수 증분 스냅숏 복사 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-117">With hello REST version 2015-07-08 and above, you can also copy incremental snapshots.</span></span>

## <a name="full-snapshot-copy"></a><span data-ttu-id="44eba-118">전체 스냅숏 복사</span><span class="sxs-lookup"><span data-stu-id="44eba-118">Full snapshot copy</span></span>
<span data-ttu-id="44eba-119">스냅숏 수 tooanother 저장소 계정을 hello 기본 blob의 blob tookeep 백업으로 복사 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-119">Snapshots can be copied tooanother storage account as a blob tookeep backups of hello base blob.</span></span> <span data-ttu-id="44eba-120">Hello blob tooan 복원 유사한 기본 blob에 대해 스냅숏을 복사할 수도 있습니다 이전 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-120">You can also copy a snapshot over its base blob, which is like restoring hello blob tooan earlier version.</span></span> <span data-ttu-id="44eba-121">한 저장소 계정 tooanother에서 스냅숏으로 복사 되 면 hello hello 기본 페이지 blob으로 동일한 공간을 차지 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-121">When a snapshot is copied from one storage account tooanother, it will occupy hello same space as hello base page blob.</span></span> <span data-ttu-id="44eba-122">따라서 한 저장소 계정 tooanother에서 복사 하는 전체 스냅숏을 느린 되 고 hello 대상 저장소 계정에서 공간을 많이 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-122">Therefore, copying whole snapshots from one storage account tooanother will be slow and will also consume lot of space in hello target storage account.</span></span>

> [!NOTE]
> <span data-ttu-id="44eba-123">기본 blob tooanother 대상 hello를 복사 하는 경우 hello blob의 스냅숏은 hello 함께 복사 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-123">If you copy hello base blob tooanother destination, hello snapshots of hello blob are not copied along with it.</span></span> <span data-ttu-id="44eba-124">마찬가지로, 한 복사본과 기본 blob을 덮어쓰는 경우 hello 기본 blob와 연결 된 영향을 받지 않습니다 스냅숏과 기본 blob 이름을 그대로 유지 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-124">Similarly, if you overwrite a base blob with a copy, snapshots associated with hello base blob are not affected and stay intact under base blob name.</span></span>
> 
> 

### <a name="back-up-disks-using-snapshots"></a><span data-ttu-id="44eba-125">스냅숏을 사용하여 디스크 백업</span><span class="sxs-lookup"><span data-stu-id="44eba-125">Back up disks using snapshots</span></span>
<span data-ttu-id="44eba-126">가상 컴퓨터 디스크에 대 한 백업 전략 hello 디스크 또는 페이지 blob의 스냅숏을 정기적으로 있고 tooanother 저장소 계정 등의 도구를 사용 하 여 복사할 [Blob 복사](https://msdn.microsoft.com/library/azure/dd894037.aspx) 작업 또는 [AzCopy](storage-use-azcopy.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-126">As a backup strategy for your virtual machine disks, you can take periodic snapshots of hello disk or page blob, and copy them tooanother storage account using tools like [Copy Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx) operation or [AzCopy](storage-use-azcopy.md).</span></span> <span data-ttu-id="44eba-127">다른 이름으로 스냅숏 tooa 대상 페이지 blob을 복사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-127">You can copy a snapshot tooa destination page blob with a different name.</span></span> <span data-ttu-id="44eba-128">hello 결과 대상 페이지 blob에 쓰기 가능한 페이지 blob 이며 스냅숏이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-128">hello resulting destination page blob is a writeable page blob and not a snapshot.</span></span> <span data-ttu-id="44eba-129">이 문서의 뒷부분에 나오는 단계 tootake 백업 스냅숏을 사용 하 여 가상 컴퓨터 디스크를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-129">Later in this article we will describe steps tootake backups of virtual machine disks using snapshots.</span></span>

### <a name="restore-disks-using-snapshots"></a><span data-ttu-id="44eba-130">스냅숏을 사용하여 디스크 복원</span><span class="sxs-lookup"><span data-stu-id="44eba-130">Restore disks using snapshots</span></span>
<span data-ttu-id="44eba-131">디스크 tooa 이전 안정적인 버전 hello 백업 스냅숏 중 하나에서 캡처한 시간 toorestore 이면 hello 기본 페이지 blob를 통해 스냅숏을 복사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-131">When it is time toorestore your disk tooa previous stable version captured in one of hello backup snapshots, you can copy a snapshot over hello base page blob.</span></span> <span data-ttu-id="44eba-132">Hello 스냅숏이 승격된 toohello 기본 페이지 blob를 되 면 hello 스냅숏은 그대로 유지 하지만 수 모두 읽고 쓸 수 있는 복사본으로 원본을 덮어씁니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-132">After hello snapshot is promoted toohello base page blob, hello snapshot remains, but its source is overwritten with a copy that can be both read and written.</span></span> <span data-ttu-id="44eba-133">이 문서의 뒷부분에 나오는 단계 toorestore 스냅숏에서 해당 디스크의 이전 버전을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-133">Later in this article we will describe steps toorestore a previous version of your disk from its snapshot.</span></span>

### <a name="implementing-full-snapshot-copy"></a><span data-ttu-id="44eba-134">전체 스냅숏 복사 구현</span><span class="sxs-lookup"><span data-stu-id="44eba-134">Implementing full snapshot copy</span></span>
<span data-ttu-id="44eba-135">Hello 다음을 수행 하 여 전체 스냅숏 복사본을 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-135">You can implement a full snapshot copy by doing hello following,</span></span>

* <span data-ttu-id="44eba-136">Hello를 사용 하 여 hello 기본 blob의 스냅숏을 먼저 [스냅숏 Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx) 작업 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-136">First, take a snapshot of hello base blob using hello [Snapshot Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx) operation.</span></span>
* <span data-ttu-id="44eba-137">그런 다음 복사 hello tooa 대상 저장소 계정을 사용 하 여 스냅숏 [Blob 복사](https://msdn.microsoft.com/library/azure/dd894037.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-137">Then, copy hello snapshot tooa target storage account using [Copy Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx).</span></span>
* <span data-ttu-id="44eba-138">기본 blob의이 프로세스 toomaintain 백업 복사본을 반복 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-138">Repeat this process toomaintain backup copies of your base blob.</span></span>

## <a name="incremental-snapshot-copy"></a><span data-ttu-id="44eba-139">증분 스냅숏 복사</span><span class="sxs-lookup"><span data-stu-id="44eba-139">Incremental snapshot copy</span></span>
<span data-ttu-id="44eba-140">새로운 기능 hello [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx) API는 페이지 blob의 스냅숏 hello 훨씬 더 나은 방법은 tooback를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-140">hello new feature in [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx) API provides a much better way tooback up hello snapshots of your page blobs or disks.</span></span> <span data-ttu-id="44eba-141">hello API hello 기본 blob와 hello 스냅숏 간의 변경 내용 목록은 hello를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-141">hello API returns hello list of changes between hello base blob and hello snapshots.</span></span> <span data-ttu-id="44eba-142">Hello 백업 계정에 사용 되는 저장소 공간의 hello 양을 감소 시킵니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-142">This reduces hello amount of storage space used on hello backup account.</span></span> <span data-ttu-id="44eba-143">hello API 프리미엄 저장소: 표준 저장소에 페이지 blob을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-143">hello API supports page blobs on Premium Storage as well as Standard Storage.</span></span> <span data-ttu-id="44eba-144">이 API를 사용하여 이제 Azure VM에 대한 빠르고 효율적인 백업 솔루션을 빌드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-144">Using this API, you can now build faster and efficient backup solutions for Azure VMs.</span></span> <span data-ttu-id="44eba-145">이 사용할 수 있는 hello REST 버전 2015-07-08 이상 됩니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-145">This will be available with hello REST version 2015-07-08 and higher.</span></span>

<span data-ttu-id="44eba-146">증분 스냅숏 복사본에서 저장소 계정 tooanother hello 경우의 차이점, toocopy 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-146">Incremental Snapshot Copy allows you toocopy from one storage account tooanother hello difference between,</span></span>

* <span data-ttu-id="44eba-147">기본 Blob과 해당 스냅숏 또는</span><span class="sxs-lookup"><span data-stu-id="44eba-147">Base blob and its Snapshot OR</span></span>
* <span data-ttu-id="44eba-148">Hello 기본 blob의 스냅숏도 모두 두 개의</span><span class="sxs-lookup"><span data-stu-id="44eba-148">Any two snapshots of hello base blob</span></span>

<span data-ttu-id="44eba-149">제공 된 hello 다음 조건이 충족 되 면</span><span class="sxs-lookup"><span data-stu-id="44eba-149">Provided hello following conditions are met,</span></span>

* <span data-ttu-id="44eba-150">1 월 1-2016 년 이후에 hello blob은 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-150">hello blob was created on Jan-1-2016 or later.</span></span>
* <span data-ttu-id="44eba-151">hello blob로 덮어쓰이 하지 [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) 또는 [Blob 복사](https://msdn.microsoft.com/library/azure/dd894037.aspx) 두 스냅숏 사이입니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-151">hello blob was not overwritten with [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) or [Copy Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx) between two snapshots.</span></span>

<span data-ttu-id="44eba-152">**참고**: 이 기능은 프리미엄 및 표준 Azure 페이지 Blob에 대해 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-152">**Note**: This feature is available for Premium and Standard Azure Page Blobs.</span></span>

<span data-ttu-id="44eba-153">있는 경우 스냅숏을 사용 하는 사용자 지정 백업 전략에서 하나의 저장소 계정 tooanother hello 스냅숏 복사 매우 느려질 수 있습니다 하 고 많은 저장소 공간을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-153">When you have a custom backup strategy that uses snapshots, copying hello snapshots from one storage account tooanother can be very slow and consumes a lot of storage space.</span></span> <span data-ttu-id="44eba-154">Hello 전체 스냅숏 tooa 백업 저장소 계정, 복사 하는 대신 hello 차이 연속 된 스냅숏 tooa 백업 페이지 blob 작성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-154">Instead of copying hello entire snapshot tooa backup storage account, you can write hello difference between consecutive snapshots tooa backup page blob.</span></span> <span data-ttu-id="44eba-155">이러한 방식으로 hello 시간 toocopy 및 공간 toostore 백업은 크게 감소 됩니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-155">This way, hello time toocopy and space toostore backups is substantially reduced.</span></span>

### <a name="implementing-incremental-snapshot-copy"></a><span data-ttu-id="44eba-156">증분 스냅숏 복사 구현</span><span class="sxs-lookup"><span data-stu-id="44eba-156">Implementing Incremental Snapshot Copy</span></span>
<span data-ttu-id="44eba-157">Hello 다음을 수행 하 여 증분 스냅숏 복사본을 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-157">You can implement incremental snapshot copy by doing hello following,</span></span>

* <span data-ttu-id="44eba-158">사용 하 여 hello 기본 blob의 스냅숏을 [스냅숏 Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-158">Take a snapshot of hello base blob using [Snapshot Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx).</span></span>
* <span data-ttu-id="44eba-159">복사 hello toohello 대상 백업 저장소 계정을 사용 하 여 스냅숏 [Blob 복사](https://msdn.microsoft.com/library/azure/dd894037.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-159">Copy hello snapshot toohello target backup storage account using [Copy Blob](https://msdn.microsoft.com/library/azure/dd894037.aspx).</span></span> <span data-ttu-id="44eba-160">이 hello 백업 페이지 blob 됩니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-160">This will be hello backup page blob.</span></span> <span data-ttu-id="44eba-161">이 백업 페이지 Blob의 스냅숏을 만들고 백업 계정에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-161">Take a snapshot of this backup page blob and store in backup account.</span></span>
* <span data-ttu-id="44eba-162">스냅숏 Blob를 사용 하 여 hello 기본 blob의 다른 스냅숏을 생성 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-162">Take another snapshot of hello base blob using Snapshot Blob.</span></span>
* <span data-ttu-id="44eba-163">사용 하 여 기본 blob의 첫 번째 및 두 번째 스냅숏의 hello 차이점이 가져오기 [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-163">Get hello difference between first and second snapshots of base blob using  [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx).</span></span> <span data-ttu-id="44eba-164">Hello 새 매개 변수를 사용 하 여 **prevsnapshot** toospecify hello와 tooget hello 차이 원하는 hello 스냅숏의 날짜/시간 값입니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-164">Use hello new parameter **prevsnapshot** toospecify hello DateTime value of hello snapshot you want tooget hello difference with.</span></span> <span data-ttu-id="44eba-165">이 매개 변수가 있는 경우 대상 스냅숏과 일반 페이지를 포함 하 여 이전 스냅숏 간의 변경 된 hello 페이지만 hello 나머지 응답에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-165">When this parameter is present, hello REST response will include only hello pages that were changed between target snapshot and previous snapshot including clear pages.</span></span>
* <span data-ttu-id="44eba-166">사용 하 여 [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) tooapply 이러한 변경 내용 toohello 백업 페이지 blob입니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-166">Use [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) tooapply these changes toohello backup page blob.</span></span>
* <span data-ttu-id="44eba-167">마지막으로 hello 백업 페이지 blob의 스냅숏을 만들고 hello 백업 저장소 계정에 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-167">Finally, take a snapshot of hello backup page blob and store it in hello backup storage account.</span></span>

<span data-ttu-id="44eba-168">Hello 다음 섹션에서 설명할 자세히 증분 스냅숏 복사본을 사용 하 여 디스크의 백업을 유지 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-168">In hello next section, we will describe in more detail how you can maintain backups of disks using Incremental Snapshot Copy</span></span>

## <a name="scenario"></a><span data-ttu-id="44eba-169">시나리오</span><span class="sxs-lookup"><span data-stu-id="44eba-169">Scenario</span></span>
<span data-ttu-id="44eba-170">이 섹션에서는 스냅숏을 사용하여 가상 컴퓨터 디스크에 대한 사용자 지정 백업 전략을 포함하는 시나리오에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-170">In this section we will describe a scenario that involves a custom backup strategy for virtual machine disks using snapshots.</span></span>

<span data-ttu-id="44eba-171">프리미엄 저장소 P30 디스크가 연결된 DS 시리즈 Azure VM을 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-171">Consider a DS-series Azure VM with a premium storage P30 disk attached.</span></span> <span data-ttu-id="44eba-172">라는 hello P30 디스크 *mypremiumdisk* 호출 프리미엄 저장소 계정에 저장 된 *mypremiumaccount*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-172">hello P30 disk called *mypremiumdisk* is stored in a premium storage account called *mypremiumaccount*.</span></span> <span data-ttu-id="44eba-173">표준 저장소 계정 이라는 *mybackupstdaccount* 의 hello 백업을 저장 하는 데 사용할 *mypremiumdisk*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-173">A standard storage account called *mybackupstdaccount* will be used for storing hello backup of *mypremiumdisk*.</span></span> <span data-ttu-id="44eba-174">스냅숏을 tookeep 같은의 *mypremiumdisk* 12 시간 간격입니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-174">We would like tookeep a snapshot of *mypremiumdisk* every 12 hours.</span></span>

<span data-ttu-id="44eba-175">저장소 계정 및 디스크를 만드는 방법에 대해 toolearn 너무 참조[에 대 한 Azure 저장소 계정](storage-create-storage-account.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-175">toolearn about creating storage account and disks, refer too[About Azure storage accounts](storage-create-storage-account.md).</span></span>

<span data-ttu-id="44eba-176">Azure Vm을 백업 하는 방법에 대 한 toolearn 너무 참조[계획 Azure VM 백업을](../backup/backup-azure-vms-introduction.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-176">toolearn about backing up Azure VMs, refer too[Plan Azure VM backups](../backup/backup-azure-vms-introduction.md).</span></span>

## <a name="steps-toomaintain-backups-of-a-disk-using-incremental-snapshots"></a><span data-ttu-id="44eba-177">증분 스냅숏을 사용 하 여 디스크의 단계 toomaintain 백업</span><span class="sxs-lookup"><span data-stu-id="44eba-177">Steps toomaintain backups of a disk using incremental snapshots</span></span>
<span data-ttu-id="44eba-178">hello 아래에 설명 된 단계는 스냅숏으로 나타낸 *mypremiumdisk* 에서 hello 백업을 유지 관리 및 *mybackupstdaccount*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-178">hello steps described below will take snapshots of *mypremiumdisk* and maintain hello backups in *mybackupstdaccount*.</span></span> <span data-ttu-id="44eba-179">hello 백업은 됩니다 표준 페이지 blob 이라는 *mybackupstdpageblob*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-179">hello backup will be a standard page blob called *mybackupstdpageblob*.</span></span> <span data-ttu-id="44eba-180">hello 백업 페이지 blob는 항상 반영의 마지막 스냅숏이 hello 상태 동일 hello *mypremiumdisk*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-180">hello backup page blob will always reflect hello same state as hello last snapshot of *mypremiumdisk*.</span></span>

1. <span data-ttu-id="44eba-181">프리미엄 저장소 디스크에 대 한 hello 백업 페이지 blob을 먼저 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-181">First, create hello backup page blob for your premium storage disk.</span></span> <span data-ttu-id="44eba-182">toodo의 스냅숏을이 수행이, *mypremiumdisk* 호출 *mypremiumdisk_ss1*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-182">toodo this, take a snapshot of *mypremiumdisk* called *mypremiumdisk_ss1*.</span></span>
2. <span data-ttu-id="44eba-183">이 스냅숏 toomybackupstdaccount 라는 페이지 blob으로 복사 *mybackupstdpageblob*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-183">Copy this snapshot toomybackupstdaccount as a page blob called *mybackupstdpageblob*.</span></span>
3. <span data-ttu-id="44eba-184">[스냅숏 Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx)을 사용하여 *mybackupstdpageblob_ss1*이라는 *mybackupstdpageblob*의 스냅숏을 만들고 *mybackupstdaccount*에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-184">Take a snapshot of *mybackupstdpageblob* called *mybackupstdpageblob_ss1*, using [Snapshot Blob](https://msdn.microsoft.com/library/azure/ee691971.aspx) and store it in *mybackupstdaccount*.</span></span>
4. <span data-ttu-id="44eba-185">Hello 백업 시간 동안 생성의 다른 스냅숏을 *mypremiumdisk*, 예: *mypremiumdisk_ss2*에 저장 *mypremiumaccount*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-185">During hello backup window, create another snapshot of *mypremiumdisk*, say *mypremiumdisk_ss2*, and store it in *mypremiumaccount*.</span></span>
5. <span data-ttu-id="44eba-186">Hello 두 스냅숏 사이의 hello 증분 변경 내용을 *mypremiumdisk_ss2* 및 *mypremiumdisk_ss1*를 사용 하 여 [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx) 에  *mypremiumdisk_ss2* 와 **prevsnapshot** 매개 변수 설정의 타임 스탬프 toohello *mypremiumdisk_ss1*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-186">Get hello incremental changes between hello two snapshots, *mypremiumdisk_ss2* and *mypremiumdisk_ss1*, using [GetPageRanges](https://msdn.microsoft.com/library/azure/ee691973.aspx) on *mypremiumdisk_ss2* with **prevsnapshot** parameter set toohello timestamp of *mypremiumdisk_ss1*.</span></span> <span data-ttu-id="44eba-187">이러한 증분 변경을 toohello 백업 페이지 blob 쓰기 *mybackupstdpageblob* 에 *mybackupstdaccount*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-187">Write these incremental changes toohello backup page blob *mybackupstdpageblob* in *mybackupstdaccount*.</span></span> <span data-ttu-id="44eba-188">Hello 증분 변경에서 삭제 된 범위 인 hello 백업 페이지 blob에서 해제 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-188">If there are deleted ranges in hello incremental changes, they must be cleared from hello backup page blob.</span></span> <span data-ttu-id="44eba-189">사용 하 여 [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) toowrite 증분 변경 내용 toohello 백업 페이지 blob입니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-189">Use [PutPage](https://msdn.microsoft.com/library/azure/ee691975.aspx) toowrite incremental changes toohello backup page blob.</span></span>
6. <span data-ttu-id="44eba-190">Hello 백업 페이지 blob의 스냅숏을 *mybackupstdpageblob*라는 *mybackupstdpageblob_ss2*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-190">Take a snapshot of hello backup page blob *mybackupstdpageblob*, called *mybackupstdpageblob_ss2*.</span></span> <span data-ttu-id="44eba-191">Hello 이전 스냅숏을 삭제 *mypremiumdisk_ss1* 프리미엄 저장소 계정에서 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-191">Delete hello previous snapshot *mypremiumdisk_ss1* from premium storage account.</span></span>
7. <span data-ttu-id="44eba-192">백업 창마다 4~6단계를 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-192">Repeat steps 4-6 every backup window.</span></span> <span data-ttu-id="44eba-193">이러한 방식으로 표준 저장소 계정에서 *mypremiumdisk* 의 백업을 유지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-193">In this way, you can maintain backups of *mypremiumdisk* in a standard storage account.</span></span>

![증분 스냅숏을 사용하여 디스크 백업](./media/storage-incremental-snapshots/storage-incremental-snapshots-1.png)

## <a name="steps-toorestore-a-disk-from-snapshots"></a><span data-ttu-id="44eba-195">단계 toorestore 스냅숏에서 디스크</span><span class="sxs-lookup"><span data-stu-id="44eba-195">Steps toorestore a disk from snapshots</span></span>
<span data-ttu-id="44eba-196">hello 아래에 설명 된 단계는 복원 프리미엄 디스크 *mypremiumdisk* hello 백업 저장소 계정에서 스냅숏 이전 tooan *mybackupstdaccount*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-196">hello steps described below will restore premium disk, *mypremiumdisk* tooan earlier snapshot from hello backup storage account *mybackupstdaccount*.</span></span>

1. <span data-ttu-id="44eba-197">Toorestore hello 프리미엄 디스크를 관리할 기간과 hello 시점을 식별 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-197">Identify hello point in time you wish toorestore hello premium disk to.</span></span> <span data-ttu-id="44eba-198">Snapshot입니다 하는 경우를 가정해 *mybackupstdpageblob_ss2*, hello 백업 저장소 계정에 저장 되어 *mybackupstdaccount*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-198">Let's say that is snapshot *mybackupstdpageblob_ss2*, which is stored in hello backup storage account *mybackupstdaccount*.</span></span>
2. <span data-ttu-id="44eba-199">Mybackupstdaccount, 승격 hello 스냅숏 *mybackupstdpageblob_ss2* hello 새 백업 기본 페이지 blob으로 *mybackupstdpageblobrestored*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-199">In mybackupstdaccount, promote hello snapshot *mybackupstdpageblob_ss2* as hello new backup base page blob *mybackupstdpageblobrestored*.</span></span>
3. <span data-ttu-id="44eba-200">*mybackupstdpageblobrestored_ss1*이라는 이 복원된 백업 페이지 Blob의 스냅숏을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-200">Take a snapshot of this restored backup page blob, called *mybackupstdpageblobrestored_ss1*.</span></span>
4. <span data-ttu-id="44eba-201">복원 하는 hello 페이지 blob 복사 *mybackupstdpageblobrestored* 에서 *mybackupstdaccount* 너무*mypremiumaccount* hello 새로운 프리미엄 디스크와  *mypremiumdiskrestored*합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-201">Copy hello restored page blob *mybackupstdpageblobrestored* from *mybackupstdaccount* too*mypremiumaccount* as hello new premium disk *mypremiumdiskrestored*.</span></span>
5. <span data-ttu-id="44eba-202">향후 증분 백업을 만들기 위해 *mypremiumdiskrestored_ss1*이라는 *mypremiumdiskrestored*의 스냅숏을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-202">Take a snapshot of *mypremiumdiskrestored*, called *mypremiumdiskrestored_ss1* for making future incremental backups.</span></span>
6. <span data-ttu-id="44eba-203">Hello DS 시리즈 VM 복원 toohello 디스크 가리킨 *mypremiumdiskrestored* 및 이전 hello 분리 *mypremiumdisk* hello VM에서에서 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-203">Point hello DS series VM toohello restored disk *mypremiumdiskrestored* and detach hello old *mypremiumdisk* from hello VM.</span></span>
7. <span data-ttu-id="44eba-204">복원 하는 hello 디스크에 대 한 이전 섹션에서 설명한 hello 백업 프로세스를 시작 *mypremiumdiskrestored*, hello를 사용 하 여 *mybackupstdpageblobrestored* hello 백업 페이지 blob으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="44eba-204">Begin hello Backup process described in previous section for hello restored disk *mypremiumdiskrestored*, using hello *mybackupstdpageblobrestored* as hello backup page blob.</span></span>

![스냅숏에서 디스크 복원](./media/storage-incremental-snapshots/storage-incremental-snapshots-2.png)

## <a name="next-steps"></a><span data-ttu-id="44eba-206">다음 단계</span><span class="sxs-lookup"><span data-stu-id="44eba-206">Next Steps</span></span>
<span data-ttu-id="44eba-207">Blob의 스냅숏을 만들고 아래 hello 링크를 사용 하 여 VM 백업 인프라 계획 방법에 대해 자세히 알아보기</span><span class="sxs-lookup"><span data-stu-id="44eba-207">Learn more about creating snapshots of a blob and planning your VM backup infrastructure using hello links below.</span></span>

* [<span data-ttu-id="44eba-208">Blob의 스냅숏 만들기</span><span class="sxs-lookup"><span data-stu-id="44eba-208">Creating a Snapshot of a Blob</span></span>](https://msdn.microsoft.com/library/azure/hh488361.aspx)
* [<span data-ttu-id="44eba-209">VM 백업 인프라 계획</span><span class="sxs-lookup"><span data-stu-id="44eba-209">Plan your VM Backup Infrastructure</span></span>](../backup/backup-azure-vms-introduction.md)

