---
title: "aaaAsymmetric 라우팅 | Microsoft Docs"
description: "이 문서에서는 고객이 여러 개의 링크 tooa 대상이 있는 네트워크에 있는 비대칭 라우팅을 사용 하 여 발생할 수 hello 문제를 안내 합니다."
documentationcenter: na
services: expressroute
author: osamazia
manager: carmonm
editor: 
ms.assetid: a754bff9-95c9-44b5-9796-377fc21e8322
ms.service: expressroute
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/10/2016
ms.author: osamam
ms.openlocfilehash: 01a16242437a3674dcfe27b074911a829a6c1abd
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="asymmetric-routing-with-multiple-network-paths"></a><span data-ttu-id="29653-103">여러 네트워크 경로를 포함한 비대칭 라우팅</span><span class="sxs-lookup"><span data-stu-id="29653-103">Asymmetric routing with multiple network paths</span></span>
<span data-ttu-id="29653-104">이 문서에서는 네트워크 원본과 대상 간에 여러 경로를 사용할 수 있을 때 전달 및 반환 네트워크 트래픽에서 다른 경로를 사용하는 방법을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-104">This article explains how forward and return network traffic might take different routes when multiple paths are available between network source and destination.</span></span>

<span data-ttu-id="29653-105">중요 한 toounderstand 두 개념 toounderstand 비대칭 라우팅입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-105">It's important toounderstand two concepts toounderstand asymmetric routing.</span></span> <span data-ttu-id="29653-106">하나는 여러 네트워크 경로의 hello 효과입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-106">One is hello effect of multiple network paths.</span></span> <span data-ttu-id="29653-107">다른 hello는 방화벽 같은 장치 상태를 유지 하는 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-107">hello other is how devices, like a firewall, keep state.</span></span> <span data-ttu-id="29653-108">이러한 종류의 장치는 상태 저장 장치라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-108">These types of devices are called stateful devices.</span></span> <span data-ttu-id="29653-109">이러한 두 가지 요인의 조합이 만듭니다 시나리오는 네트워크에서 트래픽을 상태 저장 장치에 의해 때문에 삭제 된 트래픽을 채널이 hello 장치 자체는 hello 상태 저장 장치를 검색할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="29653-109">A combination of these two factors creates scenarios in which network traffic is dropped by a stateful device because hello stateful device didn't detect that traffic originated with hello device itself.</span></span>

## <a name="multiple-network-paths"></a><span data-ttu-id="29653-110">여러 네트워크 경로</span><span class="sxs-lookup"><span data-stu-id="29653-110">Multiple network paths</span></span>
<span data-ttu-id="29653-111">엔터프라이즈 네트워크에 경우 인터넷 서비스 공급자의 인터넷 hello에서 모든 트래픽 tooand 통해 인터넷 이동 하는 하나의 링크 toohello hello 동일한 경로만 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-111">When an enterprise network has only one link toohello Internet through their Internet service provider, all traffic tooand from hello Internet travels hello same path.</span></span> <span data-ttu-id="29653-112">종종 회사 중복 경로 tooimprove 네트워크 가동 시간으로 여러 회로 구입합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-112">Often, companies purchase multiple circuits, as redundant paths, tooimprove network uptime.</span></span> <span data-ttu-id="29653-113">이 경우의 가능한 hello 네트워크, 인터넷 toohello 외부로 이동 하는 트래픽 hello 및 링크를 통해 전달 되는 트래픽이 다른 링크 통과 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-113">When this happens, it's possible that traffic that goes outside of hello network, toohello Internet, goes through one link, and hello return traffic goes through a different link.</span></span> <span data-ttu-id="29653-114">이를 일반적으로 비대칭 라우팅이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-114">This is commonly known as asymmetric routing.</span></span> <span data-ttu-id="29653-115">비대칭 라우팅에 역방향 네트워크 트래픽이 hello 원래 흐름에서 다른 경로 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-115">In asymmetric routing, reverse network traffic takes a different path from hello original flow.</span></span>

![여러 경로가 포함된 네트워크](./media/expressroute-asymmetric-routing/AsymmetricRouting3.png)

<span data-ttu-id="29653-117">Hello 인터넷에서 주로 이루어지지만, 비대칭 라우팅도 경로가 여러 개 tooother 조합 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="29653-117">Although it primarily occurs on hello Internet, asymmetric routing also applies tooother combinations of multiple paths.</span></span> <span data-ttu-id="29653-118">해당 예를 들어 tooan 인터넷 경로 toohello 이동 하는 전용 경로 모두 동일한 대상 및 toomultiple 개인 경로 toohello 이동 하는 동일한 대상입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-118">It applies, for example, both tooan Internet path and a private path that go toohello same destination, and toomultiple private paths that go toohello same destination.</span></span>

<span data-ttu-id="29653-119">각 소스 toodestination에서 hello 방법 라우터 hello 최상의 경로 tooreach 대상을 계산합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-119">Each router along hello way, from source toodestination, computes hello best path tooreach a destination.</span></span> <span data-ttu-id="29653-120">hello 최상의 가능한 경로 라우터의 결정 기준으로 두 가지 주요 요소 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-120">hello router's determination of best possible path is based on two main factors:</span></span>

* <span data-ttu-id="29653-121">외부 네트워크 간의 라우팅은 BGP(경계 게이트웨이 프로토콜), 라우팅 프로토콜을 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-121">Routing between external networks is based on a routing protocol, Border Gateway Protocol (BGP).</span></span> <span data-ttu-id="29653-122">BGP 광고 네트워크 환경에서 실행 하는 이러한 일련의 단계 toodetermine hello 최상의 경로 toohello 의도 한 대상입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-122">BGP takes advertisements from neighbors and runs them through a series of steps toodetermine hello best path toohello intended destination.</span></span> <span data-ttu-id="29653-123">라우팅 테이블에 hello 최상의 경로 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-123">It stores hello best path in its routing table.</span></span>
* <span data-ttu-id="29653-124">경로와 연결 된 서브넷 마스크의 hello 길이 라우팅 경로 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="29653-124">hello length of a subnet mask associated with a route influences routing paths.</span></span> <span data-ttu-id="29653-125">라우터 수신 하는 경우 동일한 IP 주소를 hello에 대 한 보급 알림이 여러 개 있지만 다른 서브넷 마스크와 hello 라우터 선호 서브넷 마스크는 긴 hello 광고는 보다 구체적인 경로 것으로 간주 하기 때문에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29653-125">If a router receives multiple advertisements for hello same IP address but with different subnet masks, hello router prefers hello advertisement with a longer subnet mask because it's considered a more specific route.</span></span>

## <a name="stateful-devices"></a><span data-ttu-id="29653-126">상태 저장 장치</span><span class="sxs-lookup"><span data-stu-id="29653-126">Stateful devices</span></span>
<span data-ttu-id="29653-127">라우터 라우팅 용도로 패킷의 IP 헤더 hello 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="29653-127">Routers look at hello IP header of a packet for routing purposes.</span></span> <span data-ttu-id="29653-128">일부 장치 hello 패킷에 깊은 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-128">Some devices look even deeper inside hello packet.</span></span> <span data-ttu-id="29653-129">일반적으로 이러한 장치는 Layer4(전송 제어 프로토콜 또는 TCP; 또는 사용자 데이터그램 프로토콜 또는 UDP) 또는 심지어 Layer7(응용 프로그램 계층) 헤더를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-129">Typically, these devices look at Layer4 (Transmission Control Protocol, or TCP; or User Datagram Protocol, or UDP), or even Layer7 (Application Layer) headers.</span></span> <span data-ttu-id="29653-130">이러한 종류의 장치는 보안 장치 또는 대역폭 최적화 장치입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-130">These kinds of devices are either security devices or bandwidth-optimization devices.</span></span> 

<span data-ttu-id="29653-131">방화벽은 상태 저장 장치의 일반적인 예입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-131">A firewall is a common example of a stateful device.</span></span> <span data-ttu-id="29653-132">방화벽을 허용 하거나 프로토콜, TCP/UDP 포트 및 URL 헤더와 같은 다양 한 필드를 기반으로 하는 인터페이스를 통해 패킷을 toopass를 거부 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-132">A firewall allows or denies a packet toopass through its interfaces based on various fields such as protocol, TCP/UDP port, and URL headers.</span></span> <span data-ttu-id="29653-133">이 수준의 패킷 검사 hello 장치에서 처리 부하가 넣습니다.</span><span class="sxs-lookup"><span data-stu-id="29653-133">This level of packet inspection puts a heavy processing load on hello device.</span></span> <span data-ttu-id="29653-134">tooimprove 성능 hello 방화벽 흐름의 첫 번째 패킷이 hello를 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-134">tooimprove performance, hello firewall inspects hello first packet of a flow.</span></span> <span data-ttu-id="29653-135">Hello 패킷 tooproceed, 허용 되는 경우 상태 테이블에 hello 흐름 정보를 유지 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-135">If it allows hello packet tooproceed, it keeps hello flow information in its state table.</span></span> <span data-ttu-id="29653-136">Hello 초기 결정에 따라 모든 후속 패킷이 관련된 toothis 흐름이 허용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="29653-136">All subsequent packets related toothis flow are allowed based on hello initial determination.</span></span> <span data-ttu-id="29653-137">Hello 방화벽에서 패킷을 기존 흐름의 일부인 도착할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29653-137">A packet that is part of an existing flow might arrive at hello firewall.</span></span> <span data-ttu-id="29653-138">Hello 방화벽에 대 한 이전 상태 정보가 없습니다 있으면 hello 방화벽 hello 패킷을 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-138">If hello firewall has no prior state information about it, hello firewall drops hello packet.</span></span>

## <a name="asymmetric-routing-with-expressroute"></a><span data-ttu-id="29653-139">Express 경로를 포함한 비대칭 라우팅</span><span class="sxs-lookup"><span data-stu-id="29653-139">Asymmetric routing with ExpressRoute</span></span>
<span data-ttu-id="29653-140">Azure ExpressRoute를 통해 tooMicrosoft를 연결 하면 네트워크 변경 내용을 다음과 같이:</span><span class="sxs-lookup"><span data-stu-id="29653-140">When you connect tooMicrosoft through Azure ExpressRoute, your network changes like this:</span></span>

* <span data-ttu-id="29653-141">여러 링크 tooMicrosoft 해야합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-141">You have multiple links tooMicrosoft.</span></span> <span data-ttu-id="29653-142">하나의 링크가 기존 인터넷 연결을 있고 다른 hello ExpressRoute를 통해.</span><span class="sxs-lookup"><span data-stu-id="29653-142">One link is your existing Internet connection, and hello other is via ExpressRoute.</span></span> <span data-ttu-id="29653-143">일부 트래픽 tooMicrosoft hello 인터넷을 통해 이동 수도 있지만 ExpressRoute를 통해 또는 그 반대로 돌아옵니다.</span><span class="sxs-lookup"><span data-stu-id="29653-143">Some traffic tooMicrosoft might go through hello Internet but come back via ExpressRoute, or vice versa.</span></span>
* <span data-ttu-id="29653-144">Express 경로를 통해 구체적인 IP 주소를 수신합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-144">You receive more specific IP addresses via ExpressRoute.</span></span> <span data-ttu-id="29653-145">따라서 ExpressRoute를 통해 제공 되는 서비스에 대 한 네트워크 tooMicrosoft 프로그램에서 트래픽용 라우터 항상 선호 ExpressRoute 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-145">So, for traffic from your network tooMicrosoft for services offered via ExpressRoute, routers always prefer ExpressRoute.</span></span>

<span data-ttu-id="29653-146">toounderstand hello 효과 네트워크에 이러한 두 가지 변경가지고 몇 가지 시나리오를 생각해 봅시다.</span><span class="sxs-lookup"><span data-stu-id="29653-146">toounderstand hello effect these two changes have on a network, let’s consider some scenarios.</span></span> <span data-ttu-id="29653-147">예를 들어, 하나의 회로 toohello 인터넷 있고 hello 인터넷을 통해 모든 Microsoft 서비스를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-147">As an example, you have only one circuit toohello Internet and you consume all Microsoft services via hello Internet.</span></span> <span data-ttu-id="29653-148">hello 트래픽만 네트워크 tooMicrosoft 및 뒤로 트래버스하여 같은 인터넷 연결과 hello 방화벽을 통해 전달 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-148">hello traffic from your network tooMicrosoft and back traverses hello same Internet link and passes through hello firewall.</span></span> <span data-ttu-id="29653-149">hello 방화벽 레코드 hello 첫 번째 패킷이 게 표시 하 고 hello 흐름 hello 상태 테이블에 존재 하기 때문에 패킷 수를 반환 하는 대로 흐름을 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-149">hello firewall records hello flow as it sees hello first packet and return packets are allowed because hello flow exists in hello state table.</span></span>

![Express 경로를 포함한 비대칭 라우팅](./media/expressroute-asymmetric-routing/AsymmetricRouting1.png)

<span data-ttu-id="29653-151">그런 다음 Express 경로를 켜고 Express 경로를 통해 Microsoft에서 제공하는 서비스를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-151">Then, you turn on ExpressRoute and consume services offered by Microsoft over ExpressRoute.</span></span> <span data-ttu-id="29653-152">Microsoft의 다른 모든 서비스는 hello 인터넷을 통해 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="29653-152">All other services from Microsoft are consumed over hello Internet.</span></span> <span data-ttu-id="29653-153">연결 된 tooExpressRoute 있는 가장자리에 별도 방화벽을 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-153">You deploy a separate firewall at your edge that is connected tooExpressRoute.</span></span> <span data-ttu-id="29653-154">Microsoft는 특정 서비스에 대 한 ExpressRoute를 통해 더 구체적인 접두사 tooyour 네트워크를 알립니다.</span><span class="sxs-lookup"><span data-stu-id="29653-154">Microsoft advertises more specific prefixes tooyour network over ExpressRoute for specific services.</span></span> <span data-ttu-id="29653-155">라우팅 인프라 해당 접두사에 대 한 기본 경로 hello 서 express 경로 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-155">Your routing infrastructure chooses ExpressRoute as hello preferred path for those prefixes.</span></span> <span data-ttu-id="29653-156">ExpressRoute를 통해 공용 IP 주소 tooMicrosoft 프로그램을 한 하지 배포 하는 경우 Microsoft hello 인터넷을 통해 공용 IP 주소와 통신 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-156">If you are not advertising your public IP addresses tooMicrosoft over ExpressRoute, Microsoft communicates with your public IP addresses via hello Internet.</span></span> <span data-ttu-id="29653-157">네트워크 tooMicrosoft의 정방향 트래픽이 ExpressRoute를 사용 하 고 Microsoft에서 역방향 트래픽 인터넷 hello를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-157">Forward traffic from your network tooMicrosoft uses ExpressRoute, and reverse traffic from Microsoft uses hello Internet.</span></span> <span data-ttu-id="29653-158">Hello 상태 테이블에서 찾을 수 없는 하는 흐름에 대 한 응답 패킷의 인식 하는 hello 가장자리에 hello 방화벽 hello 반환 트래픽을 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-158">When hello firewall at hello edge sees a response packet for a flow that it does not find in hello state table, it drops hello return traffic.</span></span>

<span data-ttu-id="29653-159">Toouse hello 동일한 네트워크 주소 변환 (NAT) hello 인터넷 및 express 경로 대 한 풀을 선택 하면 개인 IP 주소에 네트워크의 hello 클라이언트와 유사한 문제를 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="29653-159">If you choose toouse hello same network address translation (NAT) pool for ExpressRoute and for hello Internet, you'll see similar issues with hello clients in your network on private IP addresses.</span></span> <span data-ttu-id="29653-160">이러한 서비스에 대 한 IP 주소는 ExpressRoute를 통해 보급 하지 때문에 Windows 업데이트와 같은 서비스에 대 한 요청 hello 인터넷을 통해 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-160">Requests for services like Windows Update go via hello Internet because IP addresses for these services are not advertised via ExpressRoute.</span></span> <span data-ttu-id="29653-161">그러나 hello 반환 트래픽을 ExpressRoute를 통해 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="29653-161">However, hello return traffic comes back via ExpressRoute.</span></span> <span data-ttu-id="29653-162">Microsoft와 IP 주소를 수신 하는 경우 동일한 hello 인터넷에서에서 서브넷 마스크 및 ExpressRoute를 hello hello 인터넷을 통해 ExpressRoute를 선호 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-162">If Microsoft receives an IP address with hello same subnet mask from hello Internet and ExpressRoute, it prefers ExpressRoute over hello Internet.</span></span> <span data-ttu-id="29653-163">ExpressRoute 연결 및 네트워크 경계에 있는 다른 상태 저장 장치 또는 방화벽 hello 흐름에 대 한 이전 비워진 있으면 toothat 흐름 속하는 hello 패킷에 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-163">If a firewall or another stateful device that is on your network edge and facing ExpressRoute has no prior information about hello flow, it drops hello packets that belong toothat flow.</span></span>

## <a name="asymmetric-routing-solutions"></a><span data-ttu-id="29653-164">비대칭 라우팅 솔루션</span><span class="sxs-lookup"><span data-stu-id="29653-164">Asymmetric routing solutions</span></span>
<span data-ttu-id="29653-165">비대칭 라우팅의 두 가지 기본 옵션 toosolve hello 문제가 있을 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29653-165">You have two main options toosolve hello problem of asymmetric routing.</span></span> <span data-ttu-id="29653-166">하나 라우팅을 통해 고 hello 다른 소스 기반 NAT (SNAT)를 사용 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-166">One is through routing, and hello other is by using source-based NAT (SNAT).</span></span>

### <a name="routing"></a><span data-ttu-id="29653-167">라우팅</span><span class="sxs-lookup"><span data-stu-id="29653-167">Routing</span></span>
<span data-ttu-id="29653-168">공용 IP 주소 보급된 tooappropriate 광역 네트워크 (WAN) 링크 되는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-168">Ensure that your public IP addresses are advertised tooappropriate wide area network (WAN) links.</span></span> <span data-ttu-id="29653-169">예를 들어 메일 사용량에 대 한 인증 트래픽 및 express 경로 대 한 인터넷 toouse hello를 원하는 ExpressRoute를 통해 Active Directory Federation Services (AD FS) 공용 IP 주소 하지 광고할 해야 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29653-169">For example, if you want toouse hello Internet for authentication traffic and ExpressRoute for your mail traffic, you should not advertise your Active Directory Federation Services (AD FS) public IP addresses over ExpressRoute.</span></span> <span data-ttu-id="29653-170">마찬가지로, 반드시 온-프레미스에서 tooexpose 하지 ExpressRoute를 통해 라우터 hello AD FS 서버 tooIP 주소를 받습니다.</span><span class="sxs-lookup"><span data-stu-id="29653-170">Similarly, be sure not tooexpose an on-premises AD FS server tooIP addresses that hello router receives over ExpressRoute.</span></span> <span data-ttu-id="29653-171">ExpressRoute를 통해 받는 경로 보다 구체적인 않으므로 ExpressRoute hello에 대 한 인증 트래픽 tooMicrosoft 기본 경로 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-171">Routes received over ExpressRoute are more specific so they make ExpressRoute hello preferred path for authentication traffic tooMicrosoft.</span></span> <span data-ttu-id="29653-172">이렇게 하면 비대칭 라우팅이 생겨납니다.</span><span class="sxs-lookup"><span data-stu-id="29653-172">This causes asymmetric routing.</span></span>

<span data-ttu-id="29653-173">인증을 위해 toouse ExpressRoute를 원하는 경우 NAT. 없이 ExpressRoute를 통해 AD FS는 공용 IP 주소 알릴 있는지 확인</span><span class="sxs-lookup"><span data-stu-id="29653-173">If you want toouse ExpressRoute for authentication, make sure that you are advertising AD FS public IP addresses over ExpressRoute without NAT.</span></span> <span data-ttu-id="29653-174">이러한 방식으로 tooan 나타나고 Microsoft에서 제공 되는 트래픽 온-프레미스 AD FS 서버 ExpressRoute를 통해 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-174">This way, traffic that originates from Microsoft and goes tooan on-premises AD FS server goes over ExpressRoute.</span></span> <span data-ttu-id="29653-175">Hello 인터넷을 통해 hello 기본 경로 이기 때문에 고객 tooMicrosoft에서 반환 트래픽을 ExpressRoute를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-175">Return traffic from customer tooMicrosoft uses ExpressRoute because it's hello preferred route over hello Internet.</span></span>

### <a name="source-based-nat"></a><span data-ttu-id="29653-176">원본 기반 NAT</span><span class="sxs-lookup"><span data-stu-id="29653-176">Source-based NAT</span></span>
<span data-ttu-id="29653-177">비대칭 라우팅 문제를 해결하는 다른 방법은 SNAT를 사용하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-177">Another way of solving asymmetric routing issues is by using SNAT.</span></span> <span data-ttu-id="29653-178">예를 들어를 보급 하지 않았다면 hello 공용 IP 주소는 온-프레미스 SMTP Simple Mail Transfer Protocol () 서버의 ExpressRoute를 통해 이러한 유형의 통신에 대 한 인터넷 toouse hello 만들 예정 이므로 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-178">For example, you have not advertised hello public IP address of an on-premises Simple Mail Transfer Protocol (SMTP) server over ExpressRoute because you intend toouse hello Internet for this type of communication.</span></span> <span data-ttu-id="29653-179">Microsoft와 시작 되 고 다음 tooyour를 이동 하는 요청을 온-프레미스 SMTP 서버 hello 인터넷 통과 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-179">A request that originates with Microsoft and then goes tooyour on-premises SMTP server traverses hello Internet.</span></span> <span data-ttu-id="29653-180">들어오는 요청 tooan 내부 IP 주소를 안녕 SNAT 있습니다.</span><span class="sxs-lookup"><span data-stu-id="29653-180">You SNAT hello incoming request tooan internal IP address.</span></span> <span data-ttu-id="29653-181">Hello SMTP 서버에서 역방향 트래픽을 toohello 경계 면 방화벽 (nat 사용)를 대신 ExpressRoute 통해 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-181">Reverse traffic from hello SMTP server goes toohello edge firewall (which you use for NAT) instead of through ExpressRoute.</span></span> <span data-ttu-id="29653-182">hello 반환 트래픽은 hello 인터넷을 통해 다시 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="29653-182">hello return traffic goes back via hello Internet.</span></span>

![원본 기반 NAT 네트워크 구성](./media/expressroute-asymmetric-routing/AsymmetricRouting2.png)

## <a name="asymmetric-routing-detection"></a><span data-ttu-id="29653-184">비대칭 라우팅 감지</span><span class="sxs-lookup"><span data-stu-id="29653-184">Asymmetric routing detection</span></span>
<span data-ttu-id="29653-185">Traceroute는 hello 가장 좋은 방법은 toomake 있는지 네트워크 트래픽을 예상 하는 hello 경로 트래버스하는입니다.</span><span class="sxs-lookup"><span data-stu-id="29653-185">Traceroute is hello best way toomake sure that your network traffic is traversing hello expected path.</span></span> <span data-ttu-id="29653-186">온-프레미스 SMTP 서버 tooMicrosoft tootake hello 인터넷 경로에서 트래픽이 예상 하는 경우 hello traceroute hello SMTP 서버 tooOffice 365에서에서가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-186">If you expect traffic from your on-premises SMTP server tooMicrosoft tootake hello Internet path, hello expected traceroute is from hello SMTP server tooOffice 365.</span></span> <span data-ttu-id="29653-187">hello 결과 트래픽을 네트워크 hello 인터넷 한 ExpressRoute 하지 나온다는 실제로 것을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="29653-187">hello result validates that traffic is indeed leaving your network toward hello Internet and not toward ExpressRoute.</span></span>

