---
title: "aaaCollect Azure 로그 분석에 대 한 로그 및 메트릭 서비스 | Microsoft Docs"
description: "Azure 리소스 toowrite 로그 및 메트릭 tooLog 분석에서 진단 유틸리티를 구성 합니다."
services: log-analytics
documentationcenter: 
author: MGoedtel
manager: carmonm
editor: 
ms.assetid: 84105740-3697-4109-bc59-2452c1131bfe
ms.service: log-analytics
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 04/12/2017
ms.author: magoedte
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 1cede9a94ec83c4e3a95853dc2ec355d8df06d6e
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="collect-azure-service-logs-and-metrics-for-use-in-log-analytics"></a><span data-ttu-id="13ab0-103">Log Analytics에서 사용할 Azure 서비스 로그 및 메트릭 수집</span><span class="sxs-lookup"><span data-stu-id="13ab0-103">Collect Azure service logs and metrics for use in Log Analytics</span></span>

<span data-ttu-id="13ab0-104">Azure 서비스에 대한 로그 및 메트릭을 수집하는 방법에는 다음 네 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-104">There are four different ways of collecting logs and metrics for Azure services:</span></span>

1. <span data-ttu-id="13ab0-105">Azure 진단 직접 tooLog 분석 (*진단* 다음 표는 hello에서)</span><span class="sxs-lookup"><span data-stu-id="13ab0-105">Azure diagnostics direct tooLog Analytics (*Diagnostics* in hello following table)</span></span>
2. <span data-ttu-id="13ab0-106">Azure 진단 tooAzure 저장소 tooLog 분석 (*저장소* 다음 표는 hello에서)</span><span class="sxs-lookup"><span data-stu-id="13ab0-106">Azure diagnostics tooAzure storage tooLog Analytics (*Storage* in hello following table)</span></span>
3. <span data-ttu-id="13ab0-107">Azure 서비스에 대 한 커넥터 (*커넥터* 다음 표는 hello에서)</span><span class="sxs-lookup"><span data-stu-id="13ab0-107">Connectors for Azure services (*Connectors* in hello following table)</span></span>
4. <span data-ttu-id="13ab0-108">로그 분석 (다음 표는 hello에 나열 되지 않은 서비스에 대 한 공백) toocollect 및 게시 데이터 스크립트</span><span class="sxs-lookup"><span data-stu-id="13ab0-108">Scripts toocollect and then post data into Log Analytics (blanks in hello following table and for services that are not listed)</span></span>


| <span data-ttu-id="13ab0-109">부여</span><span class="sxs-lookup"><span data-stu-id="13ab0-109">Service</span></span>                 | <span data-ttu-id="13ab0-110">리소스 종류</span><span class="sxs-lookup"><span data-stu-id="13ab0-110">Resource Type</span></span>                           | <span data-ttu-id="13ab0-111">로그</span><span class="sxs-lookup"><span data-stu-id="13ab0-111">Logs</span></span>        | <span data-ttu-id="13ab0-112">메트릭</span><span class="sxs-lookup"><span data-stu-id="13ab0-112">Metrics</span></span>     | <span data-ttu-id="13ab0-113">해결 방법</span><span class="sxs-lookup"><span data-stu-id="13ab0-113">Solution</span></span> |
| --- | --- | --- | --- | --- |
| <span data-ttu-id="13ab0-114">응용 프로그램 게이트웨이</span><span class="sxs-lookup"><span data-stu-id="13ab0-114">Application gateways</span></span>    | <span data-ttu-id="13ab0-115">Microsoft.Network/applicationGateways</span><span class="sxs-lookup"><span data-stu-id="13ab0-115">Microsoft.Network/applicationGateways</span></span>   | <span data-ttu-id="13ab0-116">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-116">Diagnostics</span></span> | <span data-ttu-id="13ab0-117">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-117">Diagnostics</span></span> | [<span data-ttu-id="13ab0-118">Azure Application Gateway 분석</span><span class="sxs-lookup"><span data-stu-id="13ab0-118">Azure Application Gateway Analytics</span></span>](log-analytics-azure-networking-analytics.md#azure-application-gateway-analytics-solution-in-log-analytics) |
| <span data-ttu-id="13ab0-119">Application insights</span><span class="sxs-lookup"><span data-stu-id="13ab0-119">Application insights</span></span>    |                                         | <span data-ttu-id="13ab0-120">커넥터</span><span class="sxs-lookup"><span data-stu-id="13ab0-120">Connector</span></span>   | <span data-ttu-id="13ab0-121">커넥터</span><span class="sxs-lookup"><span data-stu-id="13ab0-121">Connector</span></span>   | <span data-ttu-id="13ab0-122">[Application Insights 커넥터](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/)(미리 보기)</span><span class="sxs-lookup"><span data-stu-id="13ab0-122">[Application Insights Connector](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/) (Preview)</span></span> |
| <span data-ttu-id="13ab0-123">자동화 계정</span><span class="sxs-lookup"><span data-stu-id="13ab0-123">Automation accounts</span></span>     | <span data-ttu-id="13ab0-124">Microsoft.Automation/AutomationAccounts</span><span class="sxs-lookup"><span data-stu-id="13ab0-124">Microsoft.Automation/AutomationAccounts</span></span> | <span data-ttu-id="13ab0-125">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-125">Diagnostics</span></span> |             | [<span data-ttu-id="13ab0-126">자세한 정보</span><span class="sxs-lookup"><span data-stu-id="13ab0-126">More information</span></span>](../automation/automation-manage-send-joblogs-log-analytics.md)|
| <span data-ttu-id="13ab0-127">배치 계정</span><span class="sxs-lookup"><span data-stu-id="13ab0-127">Batch accounts</span></span>          | <span data-ttu-id="13ab0-128">Microsoft.Batch/batchAccounts</span><span class="sxs-lookup"><span data-stu-id="13ab0-128">Microsoft.Batch/batchAccounts</span></span>           | <span data-ttu-id="13ab0-129">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-129">Diagnostics</span></span> | <span data-ttu-id="13ab0-130">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-130">Diagnostics</span></span> | |
| <span data-ttu-id="13ab0-131">클래식 Cloud Services</span><span class="sxs-lookup"><span data-stu-id="13ab0-131">Classic cloud services</span></span>  |                                         | <span data-ttu-id="13ab0-132">저장소</span><span class="sxs-lookup"><span data-stu-id="13ab0-132">Storage</span></span>     |             | [<span data-ttu-id="13ab0-133">자세한 정보</span><span class="sxs-lookup"><span data-stu-id="13ab0-133">More information</span></span>](log-analytics-azure-storage-iis-table.md) |
| <span data-ttu-id="13ab0-134">Cognitive Services</span><span class="sxs-lookup"><span data-stu-id="13ab0-134">Cognitive services</span></span>      | <span data-ttu-id="13ab0-135">Microsoft.CognitiveServices/accounts</span><span class="sxs-lookup"><span data-stu-id="13ab0-135">Microsoft.CognitiveServices/accounts</span></span>    |             | <span data-ttu-id="13ab0-136">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-136">Diagnostics</span></span> | |
| <span data-ttu-id="13ab0-137">Data Lake Analytics</span><span class="sxs-lookup"><span data-stu-id="13ab0-137">Data Lake analytics</span></span>     | <span data-ttu-id="13ab0-138">Microsoft.DataLakeAnalytics/accounts</span><span class="sxs-lookup"><span data-stu-id="13ab0-138">Microsoft.DataLakeAnalytics/accounts</span></span>    | <span data-ttu-id="13ab0-139">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-139">Diagnostics</span></span> |             | |
| <span data-ttu-id="13ab0-140">Data Lake Store</span><span class="sxs-lookup"><span data-stu-id="13ab0-140">Data Lake store</span></span>         | <span data-ttu-id="13ab0-141">Microsoft.DataLakeStore/accounts</span><span class="sxs-lookup"><span data-stu-id="13ab0-141">Microsoft.DataLakeStore/accounts</span></span>        | <span data-ttu-id="13ab0-142">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-142">Diagnostics</span></span> |             | |
| <span data-ttu-id="13ab0-143">이벤트 허브 네임스페이스</span><span class="sxs-lookup"><span data-stu-id="13ab0-143">Event Hub namespace</span></span>     | <span data-ttu-id="13ab0-144">Microsoft.EventHub/namespaces</span><span class="sxs-lookup"><span data-stu-id="13ab0-144">Microsoft.EventHub/namespaces</span></span>           | <span data-ttu-id="13ab0-145">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-145">Diagnostics</span></span> | <span data-ttu-id="13ab0-146">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-146">Diagnostics</span></span> | |
| <span data-ttu-id="13ab0-147">IoT Hub</span><span class="sxs-lookup"><span data-stu-id="13ab0-147">IoT Hubs</span></span>                | <span data-ttu-id="13ab0-148">Microsoft.Devices/IotHubs</span><span class="sxs-lookup"><span data-stu-id="13ab0-148">Microsoft.Devices/IotHubs</span></span>               |             | <span data-ttu-id="13ab0-149">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-149">Diagnostics</span></span> | |
| <span data-ttu-id="13ab0-150">키 자격 증명 모음</span><span class="sxs-lookup"><span data-stu-id="13ab0-150">Key Vault</span></span>               | <span data-ttu-id="13ab0-151">Microsoft.KeyVault/vaults</span><span class="sxs-lookup"><span data-stu-id="13ab0-151">Microsoft.KeyVault/vaults</span></span>               | <span data-ttu-id="13ab0-152">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-152">Diagnostics</span></span> |             | [<span data-ttu-id="13ab0-153">KeyVault 분석</span><span class="sxs-lookup"><span data-stu-id="13ab0-153">KeyVault Analytics</span></span>](log-analytics-azure-key-vault.md) |
| <span data-ttu-id="13ab0-154">부하 분산 장치</span><span class="sxs-lookup"><span data-stu-id="13ab0-154">Load Balancers</span></span>          | <span data-ttu-id="13ab0-155">Microsoft.Network/loadBalancers</span><span class="sxs-lookup"><span data-stu-id="13ab0-155">Microsoft.Network/loadBalancers</span></span>         | <span data-ttu-id="13ab0-156">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-156">Diagnostics</span></span> |             |  |
| <span data-ttu-id="13ab0-157">Logic Apps</span><span class="sxs-lookup"><span data-stu-id="13ab0-157">Logic Apps</span></span>              | <span data-ttu-id="13ab0-158">Microsoft.Logic/workflows</span><span class="sxs-lookup"><span data-stu-id="13ab0-158">Microsoft.Logic/workflows</span></span> <br> <span data-ttu-id="13ab0-159">Microsoft.Logic/integrationAccounts</span><span class="sxs-lookup"><span data-stu-id="13ab0-159">Microsoft.Logic/integrationAccounts</span></span> | <span data-ttu-id="13ab0-160">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-160">Diagnostics</span></span> | <span data-ttu-id="13ab0-161">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-161">Diagnostics</span></span> | |
| <span data-ttu-id="13ab0-162">네트워크 보안 그룹</span><span class="sxs-lookup"><span data-stu-id="13ab0-162">Network Security Groups</span></span> | <span data-ttu-id="13ab0-163">Microsoft.Network/networksecuritygroups</span><span class="sxs-lookup"><span data-stu-id="13ab0-163">Microsoft.Network/networksecuritygroups</span></span> | <span data-ttu-id="13ab0-164">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-164">Diagnostics</span></span> |             | [<span data-ttu-id="13ab0-165">Azure 네트워크 보안 그룹 분석</span><span class="sxs-lookup"><span data-stu-id="13ab0-165">Azure Network Security Group Analytics</span></span>](log-analytics-azure-networking-analytics.md#azure-network-security-group-analytics-solution-in-log-analytics) |
| <span data-ttu-id="13ab0-166">복구 자격 증명</span><span class="sxs-lookup"><span data-stu-id="13ab0-166">Recovery vaults</span></span>         | <span data-ttu-id="13ab0-167">Microsoft.RecoveryServices/vaults</span><span class="sxs-lookup"><span data-stu-id="13ab0-167">Microsoft.RecoveryServices/vaults</span></span>       |             |             | [<span data-ttu-id="13ab0-168">Azure Recovery Services 분석(미리 보기)</span><span class="sxs-lookup"><span data-stu-id="13ab0-168">Azure Recovery Services Analytics (Preview)</span></span>](https://github.com/krnese/AzureDeploy/blob/master/OMS/MSOMS/Solutions/recoveryservices/)|
| <span data-ttu-id="13ab0-169">Search 서비스</span><span class="sxs-lookup"><span data-stu-id="13ab0-169">Search services</span></span>         | <span data-ttu-id="13ab0-170">Microsoft.Search/searchServices</span><span class="sxs-lookup"><span data-stu-id="13ab0-170">Microsoft.Search/searchServices</span></span>         | <span data-ttu-id="13ab0-171">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-171">Diagnostics</span></span> | <span data-ttu-id="13ab0-172">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-172">Diagnostics</span></span> | |
| <span data-ttu-id="13ab0-173">서비스 버스 네임스페이스</span><span class="sxs-lookup"><span data-stu-id="13ab0-173">Service Bus namespace</span></span>   | <span data-ttu-id="13ab0-174">Microsoft.ServiceBus/namespaces</span><span class="sxs-lookup"><span data-stu-id="13ab0-174">Microsoft.ServiceBus/namespaces</span></span>         | <span data-ttu-id="13ab0-175">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-175">Diagnostics</span></span> | <span data-ttu-id="13ab0-176">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-176">Diagnostics</span></span> | [<span data-ttu-id="13ab0-177">Service Bus 분석(미리 보기)</span><span class="sxs-lookup"><span data-stu-id="13ab0-177">Service Bus Analytics (Preview)</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/oms-servicebus-solution)|
| <span data-ttu-id="13ab0-178">Service Fabric</span><span class="sxs-lookup"><span data-stu-id="13ab0-178">Service Fabric</span></span>          |                                         | <span data-ttu-id="13ab0-179">저장소</span><span class="sxs-lookup"><span data-stu-id="13ab0-179">Storage</span></span>     |             | [<span data-ttu-id="13ab0-180">Service Fabric 분석(미리 보기)</span><span class="sxs-lookup"><span data-stu-id="13ab0-180">Service Fabric Analytics (Preview)</span></span>](log-analytics-service-fabric.md) |
| <span data-ttu-id="13ab0-181">SQL(v12)</span><span class="sxs-lookup"><span data-stu-id="13ab0-181">SQL (v12)</span></span>               | <span data-ttu-id="13ab0-182">Microsoft.Sql/servers/databases</span><span class="sxs-lookup"><span data-stu-id="13ab0-182">Microsoft.Sql/servers/databases</span></span> <br> <span data-ttu-id="13ab0-183">Microsoft.Sql/servers/elasticPools</span><span class="sxs-lookup"><span data-stu-id="13ab0-183">Microsoft.Sql/servers/elasticPools</span></span> |             | <span data-ttu-id="13ab0-184">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-184">Diagnostics</span></span> | [<span data-ttu-id="13ab0-185">Azure SQL Analytics(미리 보기)</span><span class="sxs-lookup"><span data-stu-id="13ab0-185">Azure SQL Analytics (Preview)</span></span>](log-analytics-azure-sql.md) |
| <span data-ttu-id="13ab0-186">저장소</span><span class="sxs-lookup"><span data-stu-id="13ab0-186">Storage</span></span>                 |                                         |             | <span data-ttu-id="13ab0-187">스크립트</span><span class="sxs-lookup"><span data-stu-id="13ab0-187">Script</span></span>      | [<span data-ttu-id="13ab0-188">Azure Storage 분석(미리 보기)</span><span class="sxs-lookup"><span data-stu-id="13ab0-188">Azure Storage Analytics (Preview)</span></span>](https://github.com/Azure/azure-quickstart-templates/tree/master/oms-azure-storage-analytics-solution) |
| <span data-ttu-id="13ab0-189">가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="13ab0-189">Virtual Machines</span></span>        | <span data-ttu-id="13ab0-190">Microsoft.Compute/virtualMachines</span><span class="sxs-lookup"><span data-stu-id="13ab0-190">Microsoft.Compute/virtualMachines</span></span>       | <span data-ttu-id="13ab0-191">내선 번호</span><span class="sxs-lookup"><span data-stu-id="13ab0-191">Extension</span></span>   | <span data-ttu-id="13ab0-192">내선 번호</span><span class="sxs-lookup"><span data-stu-id="13ab0-192">Extension</span></span> <br> <span data-ttu-id="13ab0-193">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-193">Diagnostics</span></span>  | |
| <span data-ttu-id="13ab0-194">가상 컴퓨터 확장 집합</span><span class="sxs-lookup"><span data-stu-id="13ab0-194">Virtual Machines scale sets</span></span> | <span data-ttu-id="13ab0-195">Microsoft.Compute/virtualMachines</span><span class="sxs-lookup"><span data-stu-id="13ab0-195">Microsoft.Compute/virtualMachines</span></span> <br> <span data-ttu-id="13ab0-196">Microsoft.Compute/virtualMachineScaleSets/virtualMachines</span><span class="sxs-lookup"><span data-stu-id="13ab0-196">Microsoft.Compute/virtualMachineScaleSets/virtualMachines</span></span> |             | <span data-ttu-id="13ab0-197">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-197">Diagnostics</span></span> | |
| <span data-ttu-id="13ab0-198">웹 서버 팜</span><span class="sxs-lookup"><span data-stu-id="13ab0-198">Web Server farms</span></span>        | <span data-ttu-id="13ab0-199">Microsoft.Web/serverfarms</span><span class="sxs-lookup"><span data-stu-id="13ab0-199">Microsoft.Web/serverfarms</span></span>               |             | <span data-ttu-id="13ab0-200">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-200">Diagnostics</span></span> | |
| <span data-ttu-id="13ab0-201">웹 사이트</span><span class="sxs-lookup"><span data-stu-id="13ab0-201">Web Sites</span></span>               | <span data-ttu-id="13ab0-202">Microsoft.Web/sites</span><span class="sxs-lookup"><span data-stu-id="13ab0-202">Microsoft.Web/sites</span></span> <br> <span data-ttu-id="13ab0-203">Microsoft.Web/sites/slots</span><span class="sxs-lookup"><span data-stu-id="13ab0-203">Microsoft.Web/sites/slots</span></span> |             | <span data-ttu-id="13ab0-204">진단</span><span class="sxs-lookup"><span data-stu-id="13ab0-204">Diagnostics</span></span> | [<span data-ttu-id="13ab0-205">Azure Web Apps 분석(미리 보기)</span><span class="sxs-lookup"><span data-stu-id="13ab0-205">Azure Web Apps Analytics (Preview)</span></span>](https://azuremarketplace.microsoft.com/marketplace/apps/Microsoft.AzureWebAppsAnalyticsOMS?tab=Overview) |


> [!NOTE]
> <span data-ttu-id="13ab0-206">Hello 설치 좋습니다 (Linux 및 Windows) Azure 가상 컴퓨터를 모니터링, [로그 분석 VM 확장](log-analytics-azure-vm-extension.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-206">For monitoring Azure virtual machines (both Linux and Windows), we recommend installing hello [Log Analytics VM extension](log-analytics-azure-vm-extension.md).</span></span> <span data-ttu-id="13ab0-207">hello 에이전트가 가상 컴퓨터 내에서 수집 된 정보를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-207">hello agent provides you with insights collected from within your virtual machines.</span></span> <span data-ttu-id="13ab0-208">가상 컴퓨터 크기 집합에 대 한 hello 확장을 사용할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-208">You can also use hello extension for Virtual machine scale sets.</span></span>
>
>

## <a name="azure-diagnostics-direct-toolog-analytics"></a><span data-ttu-id="13ab0-209">Azure 진단 직접 tooLog 분석</span><span class="sxs-lookup"><span data-stu-id="13ab0-209">Azure diagnostics direct tooLog Analytics</span></span>
<span data-ttu-id="13ab0-210">많은 Azure 리소스가 수 toowrite 진단 로그 및 메트릭 tooLog 분석에는 hello 기본 설정으로 분석을 위해 hello 데이터를 수집할 직접입니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-210">Many Azure resources are able toowrite diagnostic logs and metrics directly tooLog Analytics and this is hello preferred way of collecting hello data for analysis.</span></span> <span data-ttu-id="13ab0-211">Azure 진단을 사용 하는 경우 데이터가 즉시 기록 tooLog 분석 되며 필요 toofirst 쓰기 hello 데이터 toostorage 없습니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-211">When using Azure diagnostics, data is written immediately tooLog Analytics and there is no need toofirst write hello data toostorage.</span></span>

<span data-ttu-id="13ab0-212">Azure 리소스를 지 원하는 [Azure 모니터](../monitoring-and-diagnostics/monitoring-overview.md) 해당 로그 및 메트릭 보낼 수 직접 tooLog 분석 합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-212">Azure resources that support [Azure monitor](../monitoring-and-diagnostics/monitoring-overview.md) can send their logs and metrics directly tooLog Analytics.</span></span>

* <span data-ttu-id="13ab0-213">너무 hello 사용 가능한 메트릭 hello 세부 정보를 참조[지원 되는 Azure 모니터로 메트릭](../monitoring-and-diagnostics/monitoring-supported-metrics.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-213">For hello details of hello available metrics, refer too[supported metrics with Azure Monitor](../monitoring-and-diagnostics/monitoring-supported-metrics.md).</span></span>
* <span data-ttu-id="13ab0-214">너무 hello hello 사용 가능한 로그의 세부 정보를 참조[진단 로그에 대 한 서비스 및 스키마 지원](../monitoring-and-diagnostics/monitoring-diagnostic-logs-schema.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-214">For hello details of hello available logs, refer too[supported services and schema for diagnostic logs](../monitoring-and-diagnostics/monitoring-diagnostic-logs-schema.md).</span></span>

### <a name="enable-diagnostics-with-powershell"></a><span data-ttu-id="13ab0-215">PowerShell에서 진단 사용</span><span class="sxs-lookup"><span data-stu-id="13ab0-215">Enable diagnostics with PowerShell</span></span>
<span data-ttu-id="13ab0-216">2016 년 11 월 (v2.3.0) hello 필요 하거나 나중에 릴리스의 [Azure PowerShell](/powershell/azure/overview)합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-216">You need hello November 2016 (v2.3.0) or later release of [Azure PowerShell](/powershell/azure/overview).</span></span>

<span data-ttu-id="13ab0-217">PowerShell 예제를 방법을 따르는 hello toouse [집합 AzureRmDiagnosticSetting](/powershell/module/azurerm.insights/set-azurermdiagnosticsetting) tooenable 진단 네트워크 보안 그룹에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-217">hello following PowerShell example shows how toouse [Set-AzureRmDiagnosticSetting](/powershell/module/azurerm.insights/set-azurermdiagnosticsetting) tooenable diagnostics on a network security group.</span></span> <span data-ttu-id="13ab0-218">hello 동일한 방법은 모든 지원 되는 리소스에 대 한-집합 `$resourceId` toohello 리소스 id에 대 한 진단 tooenable hello 리소스입니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-218">hello same approach works for all supported resources - set `$resourceId` toohello resource id of hello resource you want tooenable diagnostics for.</span></span>

```powershell
$workspaceId = "/subscriptions/d2e37fee-1234-40b2-5678-0b2199de3b50/resourcegroups/oi-default-east-us/providers/microsoft.operationalinsights/workspaces/rollingbaskets"

$resourceId = "/SUBSCRIPTIONS/ec11ca60-1234-491e-5678-0ea07feae25c/RESOURCEGROUPS/DEMO/PROVIDERS/MICROSOFT.NETWORK/NETWORKSECURITYGROUPS/DEMO"

Set-AzureRmDiagnosticSetting -ResourceId $ResourceId  -WorkspaceId $workspaceId -Enabled $true
```

### <a name="enable-diagnostics-with-resource-manager-templates"></a><span data-ttu-id="13ab0-219">Resource Manager 템플릿을 사용하여 진단 사용</span><span class="sxs-lookup"><span data-stu-id="13ab0-219">Enable diagnostics with Resource Manager templates</span></span>

<span data-ttu-id="13ab0-220">카탈로그 항목이 생성 된 hello 진단 템플릿 비슷한 toohello 하나를 사용 하 여 아래 tooyour 로그 분석 작업 영역을 전송 하는 경우 리소스에 tooenable 진단 합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-220">tooenable diagnostics on a resource when it is created, and have hello diagnostics sent tooyour Log Analytics workspace you can use a template similar toohello one below.</span></span> <span data-ttu-id="13ab0-221">이 예제는 Automation 계정에 대한 것이지만 지원되는 모든 리소스 형식에 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-221">This example is for an Automation account but works for all supported resource types.</span></span>

```json
        {
            "type": "Microsoft.Automation/automationAccounts/providers/diagnosticSettings",
            "name": "[concat(parameters('omsAutomationAccountName'), '/', 'Microsoft.Insights/service')]",
            "apiVersion": "2015-07-01",
            "dependsOn": [
                "[concat('Microsoft.Automation/automationAccounts/', parameters('omsAutomationAccountName'))]",
                "[concat('Microsoft.OperationalInsights/workspaces/', parameters('omsWorkspaceName'))]"
            ],
            "properties": {
                "workspaceId": "[resourceId('Microsoft.OperationalInsights/workspaces', parameters('omsWorkspaceName'))]",
                "logs": [
                    {
                        "category": "JobLogs",
                        "enabled": true
                    },
                    {
                        "category": "JobStreams",
                        "enabled": true
                    }
                ]
            }
        }
```

[!INCLUDE [log-analytics-troubleshoot-azure-diagnostics](../../includes/log-analytics-troubleshoot-azure-diagnostics.md)]

## <a name="azure-diagnostics-toostorage-then-toolog-analytics"></a><span data-ttu-id="13ab0-222">Azure 진단 toostorage 다음 tooLog 분석</span><span class="sxs-lookup"><span data-stu-id="13ab0-222">Azure diagnostics toostorage then tooLog Analytics</span></span>

<span data-ttu-id="13ab0-223">일부 리소스 내에서 로그를 수집 하려는 가능한 toosend hello 로그 tooAzure 저장소 사용 되며 다음 로그 분석 tooread hello 로그 저장소를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-223">For collecting logs from within some resources, it is possible toosend hello logs tooAzure storage and then configure Log Analytics tooread hello logs from storage.</span></span>

<span data-ttu-id="13ab0-224">로그 분석 צ ְ ײ Azure 저장소에서이 접근 방식을 toocollect 진단을 hello에 대 한 리소스 및 로그:</span><span class="sxs-lookup"><span data-stu-id="13ab0-224">Log Analytics can use this approach toocollect diagnostics from Azure storage for hello following resources and logs:</span></span>

| <span data-ttu-id="13ab0-225">리소스</span><span class="sxs-lookup"><span data-stu-id="13ab0-225">Resource</span></span> | <span data-ttu-id="13ab0-226">로그</span><span class="sxs-lookup"><span data-stu-id="13ab0-226">Logs</span></span> |
| --- | --- |
| <span data-ttu-id="13ab0-227">Service Fabric</span><span class="sxs-lookup"><span data-stu-id="13ab0-227">Service Fabric</span></span> |<span data-ttu-id="13ab0-228">ETWEvent</span><span class="sxs-lookup"><span data-stu-id="13ab0-228">ETWEvent</span></span> <br> <span data-ttu-id="13ab0-229">작업 데이터</span><span class="sxs-lookup"><span data-stu-id="13ab0-229">Operational Event</span></span> <br> <span data-ttu-id="13ab0-230">신뢰할 수 있는 행위자 이벤트</span><span class="sxs-lookup"><span data-stu-id="13ab0-230">Reliable Actor Event</span></span> <br> <span data-ttu-id="13ab0-231">신뢰할 수 있는 서비스 이벤트</span><span class="sxs-lookup"><span data-stu-id="13ab0-231">Reliable Service Event</span></span> |
| <span data-ttu-id="13ab0-232">가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="13ab0-232">Virtual Machines</span></span> |<span data-ttu-id="13ab0-233">Linux Syslog</span><span class="sxs-lookup"><span data-stu-id="13ab0-233">Linux Syslog</span></span> <br> <span data-ttu-id="13ab0-234">Windows 이벤트</span><span class="sxs-lookup"><span data-stu-id="13ab0-234">Windows Event</span></span> <br> <span data-ttu-id="13ab0-235">IIS 로그</span><span class="sxs-lookup"><span data-stu-id="13ab0-235">IIS Log</span></span> <br> <span data-ttu-id="13ab0-236">Windows ETWEvent</span><span class="sxs-lookup"><span data-stu-id="13ab0-236">Windows ETWEvent</span></span> |
| <span data-ttu-id="13ab0-237">웹 역할 </span><span class="sxs-lookup"><span data-stu-id="13ab0-237">Web Roles</span></span> <br> <span data-ttu-id="13ab0-238">작업자 역할</span><span class="sxs-lookup"><span data-stu-id="13ab0-238">Worker Roles</span></span> |<span data-ttu-id="13ab0-239">Linux Syslog</span><span class="sxs-lookup"><span data-stu-id="13ab0-239">Linux Syslog</span></span> <br> <span data-ttu-id="13ab0-240">Windows 이벤트</span><span class="sxs-lookup"><span data-stu-id="13ab0-240">Windows Event</span></span> <br> <span data-ttu-id="13ab0-241">IIS 로그</span><span class="sxs-lookup"><span data-stu-id="13ab0-241">IIS Log</span></span> <br> <span data-ttu-id="13ab0-242">Windows ETWEvent</span><span class="sxs-lookup"><span data-stu-id="13ab0-242">Windows ETWEvent</span></span> |

> [!NOTE]
> <span data-ttu-id="13ab0-243">저장소 계정 tooa 진단을 보낼 경우 저장소 및 트랜잭션에 대 한 로그 분석 저장소 계정에서 hello 데이터를 읽을 때 일반 Azure 데이터 요금이 청구 됩니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-243">You are charged normal Azure data rates for storage and transactions when you send diagnostics tooa storage account and for when Log Analytics reads hello data from your storage account.</span></span>
>
>

<span data-ttu-id="13ab0-244">참조 [이벤트에 대 한 IIS 및 테이블 저장소에 blob 저장소를 사용 하 여](log-analytics-azure-storage-iis-table.md) toolearn 로그 분석에서 이러한 로그를 수집할 수는 방법에 대 한 자세한 합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-244">See [Use blob storage for IIS and table storage for events](log-analytics-azure-storage-iis-table.md) toolearn more about how Log Analytics can collect these logs.</span></span>

## <a name="connectors-for-azure-services"></a><span data-ttu-id="13ab0-245">Azure 서비스용 커넥터</span><span class="sxs-lookup"><span data-stu-id="13ab0-245">Connectors for Azure services</span></span>

<span data-ttu-id="13ab0-246">Application Insights toobe tooLog 분석을 전송에 의해 수집 된 데이터를 수 있는 Application Insights에 대 한 커넥터가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-246">There is a connector for Application Insights, which allows data collected by Application Insights toobe sent tooLog Analytics.</span></span>

<span data-ttu-id="13ab0-247">Hello에 대 한 자세한 [Application Insights 커넥터](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/)합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-247">Learn more about hello [Application Insights connector](https://blogs.technet.microsoft.com/msoms/2016/09/26/application-insights-connector-in-oms/).</span></span>

## <a name="scripts-toocollect-and-post-data-toolog-analytics"></a><span data-ttu-id="13ab0-248">스크립트 toocollect 및 post 데이터 tooLog 분석</span><span class="sxs-lookup"><span data-stu-id="13ab0-248">Scripts toocollect and post data tooLog Analytics</span></span>

<span data-ttu-id="13ab0-249">Toosend 로그 및 메트릭 tooLog 직접적인 방법을 제공 하지 않는 Azure 서비스에 대 한 Azure 자동화 스크립트 toocollect에서는 분석 로그 및 메트릭 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-249">For Azure services that do not provide a direct way toosend logs and metrics tooLog Analytics you can use an Azure Automation script toocollect hello log and metrics.</span></span> <span data-ttu-id="13ab0-250">hello 스크립트 수 있습니다 다음 송신 hello tooLog 분석 사용 하 여 데이터 hello [데이터 수집기 API](log-analytics-data-collector-api.md)</span><span class="sxs-lookup"><span data-stu-id="13ab0-250">hello script can then send hello data tooLog Analytics using hello [data collector API](log-analytics-data-collector-api.md)</span></span>

<span data-ttu-id="13ab0-251">hello Azure 템플릿 갤러리에 [Azure 자동화를 사용 하는 예제](https://azure.microsoft.com/en-us/resources/templates/?term=OMS) toocollect 데이터 서비스 및 tooLog 분석을 전송 합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-251">hello Azure template gallery has [examples of using Azure Automation](https://azure.microsoft.com/en-us/resources/templates/?term=OMS) toocollect data from services and sending it tooLog Analytics.</span></span>

## <a name="next-steps"></a><span data-ttu-id="13ab0-252">다음 단계</span><span class="sxs-lookup"><span data-stu-id="13ab0-252">Next steps</span></span>

* <span data-ttu-id="13ab0-253">[이벤트에 대 한 IIS 및 테이블 저장소에 대 한 blob 저장소를 사용 하 여](log-analytics-azure-storage-iis-table.md) tooread hello 로그 저장소 또는 IIS 로그 서 면된 tooblob 저장소 tootable 진단 유틸리티를 작성 하는 Azure 서비스에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-253">[Use blob storage for IIS and table storage for events](log-analytics-azure-storage-iis-table.md) tooread hello logs for Azure services that write diagnostics tootable storage or IIS logs written tooblob storage.</span></span>
* <span data-ttu-id="13ab0-254">[솔루션 사용](log-analytics-add-solutions.md) hello 데이터에 대 한 tooprovide 한 정보입니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-254">[Enable Solutions](log-analytics-add-solutions.md) tooprovide insight into hello data.</span></span>
* <span data-ttu-id="13ab0-255">[검색 쿼리를 사용 하 여](log-analytics-log-searches.md) tooanalyze hello 데이터입니다.</span><span class="sxs-lookup"><span data-stu-id="13ab0-255">[Use search queries](log-analytics-log-searches.md) tooanalyze hello data.</span></span>
