---
title: "Azure Event Hubs 기능 개요 | Microsoft Docs"
description: "Azure Event Hubs 기능에 대한 개요 및 세부 정보"
services: event-hubs
documentationcenter: .net
author: sethmanheim
manager: timlt
editor: 
ms.assetid: 
ms.service: event-hubs
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/17/2017
ms.author: sethm
ms.openlocfilehash: a74d767d57eb5ce2b3a716f9ba908a451f25f538
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/29/2017
---
# <a name="event-hubs-features-overview"></a><span data-ttu-id="03df1-103">Event Hubs 기능 개요</span><span class="sxs-lookup"><span data-stu-id="03df1-103">Event Hubs features overview</span></span>

<span data-ttu-id="03df1-104">Azure Event Hubs는 확장 가능한 처리 서비스로 대량의 이벤트 및 데이터를 수집하여 처리하며, 대기 시간이 낮고 안정성이 우수합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-104">Azure Event Hubs is a scalable event processing service that ingests and processes large volumes of events and data, with low latency and high reliability.</span></span> <span data-ttu-id="03df1-105">서비스에 대한 개요는 [Event Hubs란?](event-hubs-what-is-event-hubs.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03df1-105">See [What is Event Hubs?](event-hubs-what-is-event-hubs.md) for a high-level overview of the service.</span></span>

<span data-ttu-id="03df1-106">이 문서는 [개요](event-hubs-what-is-event-hubs.md)의 정보를 기반으로 하며, Event Hubs 구성 요소 및 기능에 대한 기술 정보와 구현 정보를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-106">This article builds on the information in the [overview](event-hubs-what-is-event-hubs.md), and provides technical and implementation details about Event Hubs components and features.</span></span>

## <a name="event-publishers"></a><span data-ttu-id="03df1-107">이벤트 게시자</span><span class="sxs-lookup"><span data-stu-id="03df1-107">Event publishers</span></span>

<span data-ttu-id="03df1-108">Event Hub로 데이터를 전송하는 모든 엔터티는 이벤트 생산자 또는 *이벤트 게시자*입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-108">Any entity that sends data to an event hub is an event producer, or *event publisher*.</span></span> <span data-ttu-id="03df1-109">이벤트 게시자는 HTTPS 또는 AMQP 1.0을 사용하여 이벤트를 게시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-109">Event publishers can publish events using HTTPS or AMQP 1.0.</span></span> <span data-ttu-id="03df1-110">이벤트 게시자는 SAS(공유 액세스 서명) 토큰을 사용하여 자신을 Event Hub로 식별하고 고유 ID를 구성하거나 일반적인 SAS 토큰을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-110">Event publishers use a Shared Access Signature (SAS) token to identify themselves to an event hub, and can have a unique identity, or use a common SAS token.</span></span>

### <a name="publishing-an-event"></a><span data-ttu-id="03df1-111">이벤트 게시</span><span class="sxs-lookup"><span data-stu-id="03df1-111">Publishing an event</span></span>

<span data-ttu-id="03df1-112">AMQP 1.0 또는 HTTPS를 통해 이벤트를 게시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-112">You can publish an event via AMQP 1.0 or HTTPS.</span></span> <span data-ttu-id="03df1-113">Event Hubs는 .NET 클라이언트에서 Event Hub로 이벤트를 게시하기 위한 [클라이언트 라이브러리 및 클래스](event-hubs-dotnet-framework-api-overview.md)를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-113">Event Hubs provides [client libraries and classes](event-hubs-dotnet-framework-api-overview.md) for publishing events to an event hub from .NET clients.</span></span> <span data-ttu-id="03df1-114">다른 런타임 및 플랫폼의 경우, [Apache Qpid](http://qpid.apache.org/)와 같은 모든 AMQP 1.0 클라이언트를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-114">For other runtimes and platforms, you can use any AMQP 1.0 client, such as [Apache Qpid](http://qpid.apache.org/).</span></span> <span data-ttu-id="03df1-115">이벤트를 개별적으로 게시하거나 일괄처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-115">You can publish events individually, or batched.</span></span> <span data-ttu-id="03df1-116">단일 게시(이벤트 데이터 인스턴스)는 단일 이벤트 또는 일괄 처리인지에 관계 없이 256KB로 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-116">A single publication (event data instance) has a limit of 256 KB, regardless of whether it is a single event or a batch.</span></span> <span data-ttu-id="03df1-117">이 임계값보다 큰 이벤트를 게시하면 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-117">Publishing events larger than this threshold results in an error.</span></span> <span data-ttu-id="03df1-118">게시자가 Event Hub 내 파티션을 모르고 *파티션 키* (다음 섹션에서 도입된) 또는 해당 SAS 토큰을 통해 자신의 ID를 지정하는 것이 가장 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-118">It is a best practice for publishers to be unaware of partitions within the event hub and to only specify a *partition key* (introduced in the next section), or their identity via their SAS token.</span></span>

<span data-ttu-id="03df1-119">AMQP 또는 HTTPS 사용 선택은 사용량 시나리오에 해당됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-119">The choice to use AMQP or HTTPS is specific to the usage scenario.</span></span> <span data-ttu-id="03df1-120">전송 수준 보안(TLS) 또는 SSL/TLS 외에 AMQP는 영구 양방향 소켓을 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-120">AMQP requires the establishment of a persistent bidirectional socket in addition to transport level security (TLS) or SSL/TLS.</span></span> <span data-ttu-id="03df1-121">AMQP에서는 세션을 초기화할 때 네트워크 비용이 높지만, HTTPS에는 모든 요청에 대해 추가 SSL 오버헤드가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-121">AMQP has higher network costs when initializing the session, however HTTPS requires additional SSL overhead for every request.</span></span> <span data-ttu-id="03df1-122">AMQP는 빈번한 게시자에게 더 높은 성능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-122">AMQP has higher performance for frequent publishers.</span></span>

![Event Hubs](./media/event-hubs-features/partition_keys.png)

<span data-ttu-id="03df1-124">Event Hubs는 파티션 키 값을 공유하는 모든 이벤트가 동일한 파티션으로 순서대로 배달되도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-124">Event Hubs ensures that all events sharing a partition key value are delivered in order, and to the same partition.</span></span> <span data-ttu-id="03df1-125">파티션 키가 게시자 정책과 함께 사용되는 경우 게시자 ID와 파티션 키 값이 일치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-125">If partition keys are used with publisher policies, then the identity of the publisher and the value of the partition key must match.</span></span> <span data-ttu-id="03df1-126">그렇지 않은 경우 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-126">Otherwise, an error occurs.</span></span>

### <a name="publisher-policy"></a><span data-ttu-id="03df1-127">게시자 정책</span><span class="sxs-lookup"><span data-stu-id="03df1-127">Publisher policy</span></span>

<span data-ttu-id="03df1-128">이벤트 허브는 *게시자 정책*을 통한 이벤트 게시자에 대한 세부적 제어를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-128">Event Hubs enables granular control over event publishers through *publisher policies*.</span></span> <span data-ttu-id="03df1-129">게시자 정책은 많은 수의 독립 이벤트 게시자를 지원하도록 설계된 런타임 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-129">Publisher policies are run-time features designed to facilitate large numbers of independent event publishers.</span></span> <span data-ttu-id="03df1-130">게시자 정책을 사용하여 다음 메커니즘을 사용하여 Event Hub로 이벤트를 게시하는 경우 각 게시자는 자체 고유 식별자를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-130">With publisher policies, each publisher uses its own unique identifier when publishing events to an event hub, using the following mechanism:</span></span>

```
//[my namespace].servicebus.windows.net/[event hub name]/publishers/[my publisher name]
```

<span data-ttu-id="03df1-131">시간에 앞서 게시자 이름을 미리 만들 필요가 없지만, 독립 게시자 ID를 보장하기 위해 이벤트를 게시하는 경우 사용하는 SAS 토큰과 일치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-131">You don't have to create publisher names ahead of time, but they must match the SAS token used when publishing an event, in order to ensure independent publisher identities.</span></span> <span data-ttu-id="03df1-132">게시자 정책을 사용하는 경우 **PartitionKey** 값이 게시자 이름으로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-132">When using publisher policies, the **PartitionKey** value is set to the publisher name.</span></span> <span data-ttu-id="03df1-133">제대로 작동하려면 이 값이 일치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-133">To work properly, these values must match.</span></span>

## <a name="capture"></a><span data-ttu-id="03df1-134">캡처</span><span class="sxs-lookup"><span data-stu-id="03df1-134">Capture</span></span>

<span data-ttu-id="03df1-135">[Event Hubs 캡처](event-hubs-capture-overview.md)를 사용하면 Event Hubs의 스트리밍 데이터를 자동으로 캡처하고 선택한 Blob Storage 계정 또는 Azure Data Lake 서비스 계정에 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-135">[Event Hubs Capture](event-hubs-capture-overview.md) enables you to automatically capture the streaming data in Event Hubs and save it to your choice of either a Blob storage account, or an Azure Data Lake Service account.</span></span> <span data-ttu-id="03df1-136">Azure Portal에서 캡처를 사용하도록 설정하고 캡처를 수행할 최소 크기와 기간을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-136">You can enable Capture from the Azure portal, and specify a minimum size and time window to perform the capture.</span></span> <span data-ttu-id="03df1-137">Event Hubs 캡처를 사용하여 캡처된 데이터를 저장하는 데 사용되는 고유한 Azure Blob Storage 계정 및 컨테이너 또는 Azure Data Lake 서비스 계정을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-137">Using Event Hubs Capture, you specify your own Azure Blob Storage account and container, or Azure Data Lake Service account, which is used to store the captured data.</span></span> <span data-ttu-id="03df1-138">캡처된 데이터는 Apache Avro 형식으로 기록됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-138">Captured data is written in the Apache Avro format.</span></span>

## <a name="partitions"></a><span data-ttu-id="03df1-139">파티션</span><span class="sxs-lookup"><span data-stu-id="03df1-139">Partitions</span></span>

<span data-ttu-id="03df1-140">Event Hubs는 각 소비자만이 특정 하위 집합, 파티션 또는 메시지 스트림을 읽는 파티션된 소비자 패턴을 통해 메시지 스트리밍을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-140">Event Hubs provides message streaming through a partitioned consumer pattern in which each consumer only reads a specific subset, or partition, of the message stream.</span></span> <span data-ttu-id="03df1-141">이 패턴은 이벤트 처리를 위한 가로 눈금을 사용하며 큐 및 항목에 사용할 수 없는 기타 스트림 중심 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-141">This pattern enables horizontal scale for event processing and provides other stream-focused features that are unavailable in queues and topics.</span></span>

<span data-ttu-id="03df1-142">파티션은 Event Hub에서 보유하는 순서가 지정된 이벤트 시퀀스입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-142">A partition is an ordered sequence of events that is held in an event hub.</span></span> <span data-ttu-id="03df1-143">최신 이벤트가 도착하면 이 시퀀스의 끝에 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-143">As newer events arrive, they are added to the end of this sequence.</span></span> <span data-ttu-id="03df1-144">파티션을 "커밋 로그"로 생각할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-144">A partition can be thought of as a "commit log."</span></span>

![Event Hubs](./media/event-hubs-features/partition.png)

<span data-ttu-id="03df1-146">Event Hubs는 Event Hub의 모든 파티션에 적용되도록 구성된 보존 시간에 대한 데이터를 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-146">Event Hubs retains data for a configured retention time that applies across all partitions in the event hub.</span></span> <span data-ttu-id="03df1-147">시간 단위로 이벤트가 만료됩니다. 명시적으로 삭제할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-147">Events expire on a time basis; you cannot explicitly delete them.</span></span> <span data-ttu-id="03df1-148">파티션은 독립적이며 자체 데이터 시퀀스를 포함하기 때문에 종종 다른 속도로 증가합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-148">Because partitions are independent and contain their own sequence of data, they often grow at different rates.</span></span>

![Event Hubs](./media/event-hubs-features/multiple_partitions.png)

<span data-ttu-id="03df1-150">파티션 수는 만들 때 지정되며 2와 32 사이여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-150">The number of partitions is specified at creation and must be between 2 and 32.</span></span> <span data-ttu-id="03df1-151">파티션 수는 변경할 수 없으므로 파티션 수를 설정할 때 장기적인 규모를 고려해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-151">The partition count is not changeable, so you should consider long-term scale when setting partition count.</span></span> <span data-ttu-id="03df1-152">파티션은 응용 프로그램을 사용하는 데 필요한 다운스트림 병렬 처리와 관련된 데이터 구성 메커니즘입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-152">Partitions are a data organization mechanism that relates to the downstream parallelism required in consuming applications.</span></span> <span data-ttu-id="03df1-153">Event Hub의 파티션 수는 예상되는 동시 판독기의 수와 직접적으로 관련이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-153">The number of partitions in an event hub directly relates to the number of concurrent readers you expect to have.</span></span> <span data-ttu-id="03df1-154">Event Hubs 팀에 문의하여 32개를 초과하는 파티션 수를 늘릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-154">You can increase the number of partitions beyond 32 by contacting the Event Hubs team.</span></span>

<span data-ttu-id="03df1-155">파티션은 식별 가능하고 직접 보낼 수 있지만 파티션으로 직접 보내는 방법은 권장하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-155">While partitions are identifiable and can be sent to directly, sending directly to a partition is not recommended.</span></span> <span data-ttu-id="03df1-156">대신 [이벤트 게시자](#event-publishers) 및 [게시자 정책](#capacity) 섹션에서 소개하는 더 높은 수준의 구문을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-156">Instead, you can use higher level constructs introduced in the [Event publisher](#event-publishers) and [Capacity](#capacity) sections.</span></span> 

<span data-ttu-id="03df1-157">파티션은 이벤트 본문, 사용자 정의 속성 모음 및 파티션의 오프셋과 스트림 시퀀스의 번호와 같은 메타데이터를 포함하는 이벤트 데이터 시퀀스로 채워집니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-157">Partitions are filled with a sequence of event data which contains the body of the event, a user-defined property bag, and metadata such as its offset in the partition and its number in the stream sequence.</span></span>

<span data-ttu-id="03df1-158">파티션 및 가용성과 안정성 간의 균형에 대한 자세한 내용은 [Event Hubs 프로그래밍 가이드](event-hubs-programming-guide.md#partition-key) 및 [Event Hubs의 가용성 및 일관성](event-hubs-availability-and-consistency.md) 문서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03df1-158">For more information about partitions and the trade-off between availability and reliability, see the [Event Hubs programming guide](event-hubs-programming-guide.md#partition-key) and the [Availability and consistency in Event Hubs](event-hubs-availability-and-consistency.md) article.</span></span>

### <a name="partition-key"></a><span data-ttu-id="03df1-159">파티션 키</span><span class="sxs-lookup"><span data-stu-id="03df1-159">Partition key</span></span>

<span data-ttu-id="03df1-160">[파티션 키](event-hubs-programming-guide.md#partition-key)를 사용하여 들어오는 이벤트 데이터를 데이터 구성을 위한 특정 파티션에 매핑할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-160">You can use a [partition key](event-hubs-programming-guide.md#partition-key) to map incoming event data into specific partitions for the purpose of data organization.</span></span> <span data-ttu-id="03df1-161">파티션 키는 Event Hub로 전달된 발신자가 제공하는 값입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-161">The partition key is a sender-supplied value passed into an event hub.</span></span> <span data-ttu-id="03df1-162">이 키는 파티션 할당을 만드는 정적 해싱 기능을 통해 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-162">It is processed through a static hashing function, which creates the partition assignment.</span></span> <span data-ttu-id="03df1-163">이벤트를 게시할 때 파티션 키를 지정하지 않으면 라운드 로빈 할당이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-163">If you don't specify a partition key when publishing an event, a round-robin assignment is used.</span></span>

<span data-ttu-id="03df1-164">이벤트 게시자는 이벤트를 게시하는 파티션이 아니라 파티션 키만 인식합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-164">The event publisher is only aware of its partition key, not the partition to which the events are published.</span></span> <span data-ttu-id="03df1-165">이렇게 키와 파티션을 분리하면 발신자가 다운스트림 처리에 대해 너무 많이 알 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-165">This decoupling of key and partition insulates the sender from needing to know too much about the downstream processing.</span></span> <span data-ttu-id="03df1-166">장치 단위 또는 사용자 공유 ID는 좋은 파티션 키가 되지만 지리와 같은 다른 특성은 단일 파티션으로 관련 이벤트를 그룹화하는 데도 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-166">A per-device or user unique identity makes a good partition key, but other attributes such as geography can also be used to group related events into a single partition.</span></span>

## <a name="sas-tokens"></a><span data-ttu-id="03df1-167">SAS 토큰</span><span class="sxs-lookup"><span data-stu-id="03df1-167">SAS tokens</span></span>

<span data-ttu-id="03df1-168">Event Hubs는 네임스페이스 및 Event Hubs 수준에서 사용할 수 있는 *공유 액세스 서명*을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-168">Event Hubs uses *Shared Access Signatures*, which are available at the namespace and event hub level.</span></span> <span data-ttu-id="03df1-169">SAS 토큰은 SAS 키에서 생성되고 특정 형식으로 인코딩된 URL의 SHA 해시입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-169">A SAS token is generated from a SAS key and is an SHA hash of a URL, encoded in a specific format.</span></span> <span data-ttu-id="03df1-170">키(정책)와 토큰의 이름을 사용하는 경우 Event Hubs는 해시를 다시 생성하여 발신자를 인증할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-170">Using the name of the key (policy) and the token, Event Hubs can regenerate the hash and thus authenticate the sender.</span></span> <span data-ttu-id="03df1-171">일반적으로 이벤트 게시자에 대한 SAS 토큰은 특정 Event Hub에 대한 **전송** 권한만으로 작성됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-171">Normally, SAS tokens for event publishers are created with only **send** privileges on a specific event hub.</span></span> <span data-ttu-id="03df1-172">이 SAS 토큰 URL 메커니즘은 게시자 정책에 도입된 게시자 ID에 대한 기반이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-172">This SAS token URL mechanism is the basis for publisher identification introduced in the publisher policy.</span></span> <span data-ttu-id="03df1-173">SAS 작업에 대한 자세한 내용은 [Service Bus를 사용한 공유 액세스 서명 인증](../service-bus-messaging/service-bus-sas.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03df1-173">For more information about working with SAS, see [Shared Access Signature Authentication with Service Bus](../service-bus-messaging/service-bus-sas.md).</span></span>

## <a name="event-consumers"></a><span data-ttu-id="03df1-174">이벤트 소비자</span><span class="sxs-lookup"><span data-stu-id="03df1-174">Event consumers</span></span>

<span data-ttu-id="03df1-175">Event Hubs에서 이벤트 데이터를 읽는 모든 엔터티는 *이벤트 소비자*입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-175">Any entity that reads event data from an event hub is an *event consumer*.</span></span> <span data-ttu-id="03df1-176">모든 Event Hubs 소비자는 AMQP 1.0 세션을 통해 연결되며, 사용 가능한 상태가 되면 이 세션을 통해 이벤트가 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-176">All Event Hubs consumers connect via the AMQP 1.0 session and events are delivered through the session as they become available.</span></span> <span data-ttu-id="03df1-177">클라이언트는 데이터 가용성에 대해 폴링할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-177">The client does not need to poll for data availability.</span></span>

### <a name="consumer-groups"></a><span data-ttu-id="03df1-178">소비자 그룹</span><span class="sxs-lookup"><span data-stu-id="03df1-178">Consumer groups</span></span>

<span data-ttu-id="03df1-179">Event Hubs의 게시/구독 메커니즘은 *소비자 그룹*을 통해 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-179">The publish/subscribe mechanism of Event Hubs is enabled through *consumer groups*.</span></span> <span data-ttu-id="03df1-180">소비자 그룹은 전체 Event Hub의 보기(상태, 위치, 또는 오프셋)입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-180">A consumer group is a view (state, position, or offset) of an entire event hub.</span></span> <span data-ttu-id="03df1-181">소비자 그룹은 여러 소비 응용 프로그램을 사용하여 이벤트 스트림의 별도 보기가 있으며 자신의 속도 및 자신의 오프셋으로 독립적으로 스트림을 읽을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-181">Consumer groups enable multiple consuming applications to each have a separate view of the event stream, and to read the stream independently at their own pace and with their own offsets.</span></span>

<span data-ttu-id="03df1-182">스트림 처리 아키텍처에서 각 다운스트림 응용 프로그램은 소비자 그룹에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-182">In a stream processing architecture, each downstream application equates to a consumer group.</span></span> <span data-ttu-id="03df1-183">이벤트 데이터를 장기 저장소에 기록하려는 경우, 해당 저장소 기록기 응용 프로그램은 소비자 그룹입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-183">If you want to write event data to long-term storage, then that storage writer application is a consumer group.</span></span> <span data-ttu-id="03df1-184">복합 이벤트 처리는 별도의 다른 소비자 그룹에서 수행될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-184">Complex event processing can then be performed by another, separate consumer group.</span></span> <span data-ttu-id="03df1-185">소비자 그룹을 통해서만 파티션을 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-185">You can only access partitions through a consumer group.</span></span> <span data-ttu-id="03df1-186">소비자 그룹당 파티션에는 최대 5개의 동시 판독기가 있을 수 있습니다. 하지만 **소비자 그룹당 파티션에는 활성 수신기를 하나만 포함하는 것이 좋습니다.**</span><span class="sxs-lookup"><span data-stu-id="03df1-186">There can be at most 5 concurrent readers on a partition per consumer group; however **it is recommended that there is only one active receiver on a partition per consumer group**.</span></span> <span data-ttu-id="03df1-187">Event Hub에는 항상 기본 소비자 그룹이 있으며 표준 계층 Event Hub에 대해 최대 20개의 소비자 그룹을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-187">There is always a default consumer group in an event hub, and you can create up to 20 consumer groups for a Standard tier event hub.</span></span>

<span data-ttu-id="03df1-188">다음은 소비자 그룹 URI 규칙의 예입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-188">The following are examples of the consumer group URI convention:</span></span>

```http
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #1]
//[my namespace].servicebus.windows.net/[event hub name]/[Consumer Group #2]
```

<span data-ttu-id="03df1-189">다음 그림에서는 아키텍처를 처리하는 Event Hubs 스트림을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-189">The following figure shows the Event Hubs stream processing architecture:</span></span>

![Event Hubs](./media/event-hubs-features/event_hubs_architecture.png)

### <a name="stream-offsets"></a><span data-ttu-id="03df1-191">스트림 오프셋</span><span class="sxs-lookup"><span data-stu-id="03df1-191">Stream offsets</span></span>

<span data-ttu-id="03df1-192">*오프셋*은 파티션 내의 이벤트 위치입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-192">An *offset* is the position of an event within a partition.</span></span> <span data-ttu-id="03df1-193">오프셋을 클라이언트 쪽 커서로 생각할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-193">You can think of an offset as a client-side cursor.</span></span> <span data-ttu-id="03df1-194">오프셋은 이벤트의 바이트 번호입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-194">The offset is a byte numbering of the event.</span></span> <span data-ttu-id="03df1-195">오프셋을 사용하여 이벤트 소비자(판독기)가 이벤트를 읽기 시작할 이벤트 스트림의 위치를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-195">This offset enables an event consumer (reader) to specify a point in the event stream from which they want to begin reading events.</span></span> <span data-ttu-id="03df1-196">타임스탬프 또는 오프셋 값으로 오프셋을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-196">You can specify the offset as a timestamp or as an offset value.</span></span> <span data-ttu-id="03df1-197">소비자는 이벤트 허브 서비스 외부에 자신의 오프셋 값을 저장하는 일을 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-197">Consumers are responsible for storing their own offset values outside of the Event Hubs service.</span></span> <span data-ttu-id="03df1-198">파티션 내에서 각 이벤트는 오프셋을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-198">Within a partition, each event includes an offset.</span></span>

![Event Hubs](./media/event-hubs-features/partition_offset.png)

### <a name="checkpointing"></a><span data-ttu-id="03df1-200">검사점 설정</span><span class="sxs-lookup"><span data-stu-id="03df1-200">Checkpointing</span></span>

<span data-ttu-id="03df1-201">*검사점* 은 판독기가 파티션 이벤트 시퀀스 내에서 위치를 표시하거나 커밋하는 프로세스입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-201">*Checkpointing* is a process by which readers mark or commit their position within a partition event sequence.</span></span> <span data-ttu-id="03df1-202">검사점은 소비자의 책임으로 소비자 그룹 내에서 파티션별로 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-202">Checkpointing is the responsibility of the consumer and occurs on a per-partition basis within a consumer group.</span></span> <span data-ttu-id="03df1-203">이러한 책임은 각 소비자 그룹에 대해 각 파티션 판독기는 이벤트 스트림의 현재 위치를 추적해야 하며 데이터 스트림이 완료된 것으로 간주되면 서비스를 알릴 수 있다는 것을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-203">This responsibility means that for each consumer group, each partition reader must keep track of its current position in the event stream, and can inform the service when it considers the data stream complete.</span></span>

<span data-ttu-id="03df1-204">판독기가 파티션에서 연결을 끊은 경우 다시 연결하면 해당 소비자 그룹에서 해당 파티션의 마지막 판독기에서 이전에 제출한 검사점에서 읽기 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-204">If a reader disconnects from a partition, when it reconnects it begins reading at the checkpoint that was previously submitted by the last reader of that partition in that consumer group.</span></span> <span data-ttu-id="03df1-205">판독기가 연결하면, 이 오프셋을 Event Hub로 전달하여 읽기 시작할 위치를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-205">When the reader connects, it passes this offset to the event hub to specify the location at which to start reading.</span></span> <span data-ttu-id="03df1-206">이러한 방식으로, 서로 다른 컴퓨터에서 실행되는 판독기 간의 장애 조치가 발생하는 경우 복원력을 제공하고 다운스트림 응용 프로그램에서 이벤트를 "완료"로 표시하는 데 검사점을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-206">In this way, you can use checkpointing to both mark events as "complete" by downstream applications, and to provide resiliency if a failover between readers running on different machines occurs.</span></span> <span data-ttu-id="03df1-207">이 검사점 프로세스에서 더 낮은 오프셋을 지정하면 이전 데이터로 돌아갈 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-207">It is possible to return to older data by specifying a lower offset from this checkpointing process.</span></span> <span data-ttu-id="03df1-208">이 메커니즘을 통해 검사점을 지정하면 장애 조치 복원력 및 제어된 이벤트 스트림 재생 모두를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-208">Through this mechanism, checkpointing enables both failover resiliency and event stream replay.</span></span>

### <a name="common-consumer-tasks"></a><span data-ttu-id="03df1-209">일반 소비자 작업</span><span class="sxs-lookup"><span data-stu-id="03df1-209">Common consumer tasks</span></span>

<span data-ttu-id="03df1-210">모든 Event Hubs 소비자는 상태 인식 양방향 통신 채널인 AMQP 1.0 세션을 통해 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-210">All Event Hubs consumers connect via an AMQP 1.0 session, a state-aware bidirectional communication channel.</span></span> <span data-ttu-id="03df1-211">각 파티션에는 AMQP 1.0 세션이 있어 파티션별로 분리된 이벤트를 쉽게 전송할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-211">Each partition has an AMQP 1.0 session that facilitates the transport of events segregated by partition.</span></span>

#### <a name="connect-to-a-partition"></a><span data-ttu-id="03df1-212">파티션에 연결</span><span class="sxs-lookup"><span data-stu-id="03df1-212">Connect to a partition</span></span>

<span data-ttu-id="03df1-213">파티션에 연결할 때 일반적으로 임대 메커니즘을 사용하여 판독기 연결을 특정 파티션으로 조정합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-213">When connecting to partitions, it is common practice to use a leasing mechanism to coordinate reader connections to specific partitions.</span></span> <span data-ttu-id="03df1-214">이러한 방식으로, 소비자 그룹의 모든 파티션에 활성 판독기가 하나만 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-214">This way, it is possible for every partition in a consumer group to have only one active reader.</span></span> <span data-ttu-id="03df1-215">.NET 클라이언트의 [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) 클래스를 사용하면 판독기의 검사점 지정, 임대 및 관리가 간편해집니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-215">Checkpointing, leasing, and managing readers are simplified by using the [EventProcessorHost](/dotnet/api/microsoft.servicebus.messaging.eventprocessorhost) class for .NET clients.</span></span> <span data-ttu-id="03df1-216">이벤트 프로세서 호스트는 지능형 소비자 에이전트입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-216">The Event Processor Host is an intelligent consumer agent.</span></span>

#### <a name="read-events"></a><span data-ttu-id="03df1-217">읽기 이벤트</span><span class="sxs-lookup"><span data-stu-id="03df1-217">Read events</span></span>

<span data-ttu-id="03df1-218">AMQP 1.0 세션 및 링크는 특정 파티션에 대해 열린 후, 이벤트는 이벤트 허브 서비스에서 AMQP 1.0 클라이언트로 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-218">After an AMQP 1.0 session and link is opened for a specific partition, events are delivered to the AMQP 1.0 client by the Event Hubs service.</span></span> <span data-ttu-id="03df1-219">이 배달 메커니즘은 HTTP GET과 같은 풀 기반 메커니즘보다 더 낮은 대기 시간 및 더 높은 처리량을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-219">This delivery mechanism enables higher throughput and lower latency than pull-based mechanisms such as HTTP GET.</span></span> <span data-ttu-id="03df1-220">이벤트가 클라이언트에 전송되므로, 각 이벤트 데이터 인스턴스는 이벤트 시퀀스에서 검사점을 용이하게 하는데 사용되는 오프셋 및 시퀀스 번호와 같은 중요한 메타데이터를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-220">As events are sent to the client, each event data instance contains important metadata such as the offset and sequence number that are used to facilitate checkpointing on the event sequence.</span></span>

<span data-ttu-id="03df1-221">이벤트 데이터:</span><span class="sxs-lookup"><span data-stu-id="03df1-221">Event data:</span></span>
* <span data-ttu-id="03df1-222">Offset</span><span class="sxs-lookup"><span data-stu-id="03df1-222">Offset</span></span>
* <span data-ttu-id="03df1-223">시퀀스 번호</span><span class="sxs-lookup"><span data-stu-id="03df1-223">Sequence number</span></span>
* <span data-ttu-id="03df1-224">body</span><span class="sxs-lookup"><span data-stu-id="03df1-224">Body</span></span>
* <span data-ttu-id="03df1-225">사용자 속성</span><span class="sxs-lookup"><span data-stu-id="03df1-225">User properties</span></span>
* <span data-ttu-id="03df1-226">시스템 속성</span><span class="sxs-lookup"><span data-stu-id="03df1-226">System properties</span></span>

<span data-ttu-id="03df1-227">사용자의 책임 하에 오프셋을 관리해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-227">It is your responsibility to manage the offset.</span></span>

## <a name="capacity"></a><span data-ttu-id="03df1-228">용량</span><span class="sxs-lookup"><span data-stu-id="03df1-228">Capacity</span></span>

<span data-ttu-id="03df1-229">Event Hubs는 확장성이 뛰어난 병렬 아키텍처를 사용하고 크기를 조정하거나 확장할 때 고려해야 하는 몇 가지 주요 요소가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-229">Event Hubs has a highly scalable parallel architecture and there are several key factors to consider when sizing and scaling.</span></span>

### <a name="throughput-units"></a><span data-ttu-id="03df1-230">처리량 단위</span><span class="sxs-lookup"><span data-stu-id="03df1-230">Throughput units</span></span>

<span data-ttu-id="03df1-231">Event Hubs의 처리량 용량은 *처리량 단위*로 제어됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-231">The throughput capacity of Event Hubs is controlled by *throughput units*.</span></span> <span data-ttu-id="03df1-232">처리량 단위는 미리 구입한 용량의 단위입니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-232">Throughput units are pre-purchased units of capacity.</span></span> <span data-ttu-id="03df1-233">단일 처리량 단위는 다음 용량을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-233">A single throughput unit includes the following capacity:</span></span>

* <span data-ttu-id="03df1-234">수신: 초당 최대 1MB 또는 초당 1,000회 이벤트(둘 중 빠른 쪽 적용)</span><span class="sxs-lookup"><span data-stu-id="03df1-234">Ingress: Up to 1 MB per second or 1000 events per second (whichever comes first)</span></span>
* <span data-ttu-id="03df1-235">송신: 초당 최대 2MB</span><span class="sxs-lookup"><span data-stu-id="03df1-235">Egress: Up to 2 MB per second</span></span>

<span data-ttu-id="03df1-236">구입한 처리량 단위의 용량을 초과하면 수신이 제한되며 [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception)이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-236">Beyond the capacity of the purchased throughput units, ingress is throttled and a [ServerBusyException](/dotnet/api/microsoft.servicebus.messaging.serverbusyexception) is returned.</span></span> <span data-ttu-id="03df1-237">송신은 제한 예외를 생성하지 않지만 구입한 처리량 단위의 용량으로 제한됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-237">Egress does not produce throttling exceptions, but is still limited to the capacity of the purchased throughput units.</span></span> <span data-ttu-id="03df1-238">게시 속도 예외를 수신하거나 더 높은 송신을 예상하는 경우 네임스페이스에 대해 구입한 처리량 단위의 수를 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-238">If you receive publishing rate exceptions or are expecting to see higher egress, be sure to check how many throughput units you have purchased for the namespace.</span></span> <span data-ttu-id="03df1-239">[Azure Portal](https://portal.azure.com)에서 네임스페이스의 **크기 조정** 블레이드에서 처리량 단위를 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-239">You can manage throughput units on the **Scale** blade of the namespaces in the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="03df1-240">[Event Hubs API](event-hubs-api-overview.md)를 사용하여 프로그래밍 방식으로 처리량 단위를 관리할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-240">You can also manage throughput units programmatically using the [Event Hubs APIs](event-hubs-api-overview.md).</span></span>

<span data-ttu-id="03df1-241">처리량 단위는 시간당 요금이 청구되며 미리 구입됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-241">Throughput units are billed per hour and are pre-purchased.</span></span> <span data-ttu-id="03df1-242">구입하면, 처리량 단위는 최소 한시간으로 청구됩니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-242">Once purchased, throughput units are billed for a minimum of one hour.</span></span> <span data-ttu-id="03df1-243">Event Hubs 네임스페이스에 대해 최대 20개의 처리량 단위를 구입할 수 있으며, 네임스페이스의 모든 Event Hubs에서 공유할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-243">Up to 20 throughput units can be purchased for an Event Hubs namespace and are shared across all Event Hubs in the namespace.</span></span>

<span data-ttu-id="03df1-244">Azure 지원에 문의하면 20개 블록, 최대 100개 처리량 단위로 더 많이 구입할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-244">More throughput units can be purchased in blocks of 20, up to 100 throughput units, by contacting Azure support.</span></span> <span data-ttu-id="03df1-245">이보다 많은 경우, 100개의 처리량 단위 블록도 구입할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-245">Beyond that, you can also purchase blocks of 100 throughput units.</span></span>

<span data-ttu-id="03df1-246">최적의 규모를 달성하려면 처리량 단위와 파티션 간에 균형을 유지하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-246">We recommend that you balance throughput units and partitions to achieve optimal scale.</span></span> <span data-ttu-id="03df1-247">단일 파티션에는 처리량 단위 하나의 최대 크기가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-247">A single partition has a maximum scale of one throughput unit.</span></span> <span data-ttu-id="03df1-248">처리량 단위 수는 Event Hub의 파티션 수보다 작거나 동일해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="03df1-248">The number of throughput units should be less than or equal to the number of partitions in an event hub.</span></span>

<span data-ttu-id="03df1-249">Event Hubs 가격에 대한 자세한 내용은 [Event Hubs 가격](https://azure.microsoft.com/pricing/details/event-hubs/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="03df1-249">For detailed Event Hubs pricing information, see [Event Hubs pricing](https://azure.microsoft.com/pricing/details/event-hubs/).</span></span>

## <a name="next-steps"></a><span data-ttu-id="03df1-250">다음 단계</span><span class="sxs-lookup"><span data-stu-id="03df1-250">Next steps</span></span>

<span data-ttu-id="03df1-251">Event Hubs에 대한 자세한 내용은 다음 링크를 방문하세요.</span><span class="sxs-lookup"><span data-stu-id="03df1-251">For more information about Event Hubs, visit the following links:</span></span>

* <span data-ttu-id="03df1-252">[Event Hubs 자습서][Event Hubs tutorial] 시작</span><span class="sxs-lookup"><span data-stu-id="03df1-252">Get started with an [Event Hubs tutorial][Event Hubs tutorial]</span></span>
* [<span data-ttu-id="03df1-253">Event Hubs 프로그래밍 가이드</span><span class="sxs-lookup"><span data-stu-id="03df1-253">Event Hubs programming guide</span></span>](event-hubs-programming-guide.md)
* [<span data-ttu-id="03df1-254">Event Hubs의 가용성 및 일관성</span><span class="sxs-lookup"><span data-stu-id="03df1-254">Availability and consistency in Event Hubs</span></span>](event-hubs-availability-and-consistency.md)
* [<span data-ttu-id="03df1-255">Event Hubs FAQ</span><span class="sxs-lookup"><span data-stu-id="03df1-255">Event Hubs FAQ</span></span>](event-hubs-faq.md)
* <span data-ttu-id="03df1-256">[Event Hubs 샘플][]</span><span class="sxs-lookup"><span data-stu-id="03df1-256">[Event Hubs samples][]</span></span>

[Event Hubs tutorial]: event-hubs-dotnet-standard-getstarted-send.md
[Event Hubs 샘플]: https://github.com/Azure/azure-event-hubs/tree/master/samples
