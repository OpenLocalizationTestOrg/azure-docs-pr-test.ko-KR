---
title: "Azure Automation 그래픽 runbook의 오류 처리 | Microsoft Docs"
description: "이 문서에서는 Azure Automation 그래픽 runbook에서 오류 처리 논리를 구현하는 방법에 대해 설명합니다."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 12/26/2016
ms.author: magoedte
ms.openlocfilehash: 12313f7f245d32c33882f1036f7d4b48bfb3ddc5
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="error-handling-in-azure-automation-graphical-runbooks"></a><span data-ttu-id="18aa5-103">Azure Automation 그래픽 runbook의 오류 처리</span><span class="sxs-lookup"><span data-stu-id="18aa5-103">Error handling in Azure Automation graphical runbooks</span></span>

<span data-ttu-id="18aa5-104">고려해야 할 주요 runbook 디자인 보안 주체는 runbook이 경험할 수 있는 다른 문제를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-104">A key runbook design principal to consider is identifying different issues that a runbook might experience.</span></span> <span data-ttu-id="18aa5-105">이러한 문제는 성공, 예상된 오류 상태 및 예기치 않은 오류 조건을 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-105">These issues can include success, expected error states, and unexpected error conditions.</span></span>

<span data-ttu-id="18aa5-106">runbook은 오류 처리를 포함해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-106">Runbooks should include error handling.</span></span> <span data-ttu-id="18aa5-107">활동의 출력에 대한 유효성을 검사하거나 그래픽 runbook으로 오류를 처리하려면 Windows PowerShell 코드 활동을 사용하거나 활동 출력 링크에서 조건부 논리를 정의하거나 다른 방법을 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-107">To validate the output of an activity or handle an error with graphical runbooks, you could use a Windows PowerShell code activity, define conditional logic on the output link of the activity, or apply another method.</span></span>          

<span data-ttu-id="18aa5-108">종종 runbook 작업으로 발생하는 종료되지 않는 오류가 있는 경우 따르는 모든 활동은 오류에 관계 없이 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-108">Often, if there is a non-terminating error that occurs with a runbook activity, any activity that follows is processed regardless of the error.</span></span> <span data-ttu-id="18aa5-109">오류는 예외를 생성할 수 있지만 다음 작업이 계속 실행되도록 허용됩니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-109">The error is likely to generate an exception, but the next activity is still allowed to run.</span></span> <span data-ttu-id="18aa5-110">PowerShell이 오류를 처리하도록 설계된 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-110">This is the way that PowerShell is designed to handle errors.</span></span>    

<span data-ttu-id="18aa5-111">실행 중에 발생할 수 있는 PowerShell 오류 유형으로 종료 오류 또는 종료되지 않는 오류가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-111">The types of PowerShell errors that can occur during execution are terminating or non-terminating.</span></span> <span data-ttu-id="18aa5-112">종료 오류 및 종료되지 않는 오류 간의 차이점은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-112">The differences between terminating and non-terminating errors are as follows:</span></span>

* <span data-ttu-id="18aa5-113">**종료 오류**: 실행 중에 명령 (또는 스크립트 실행)을 완전히 중단하는 심각한 오류입니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-113">**Terminating error**: A serious error during execution that halts the command (or script execution) completely.</span></span> <span data-ttu-id="18aa5-114">예를 들어 존재하지 않는 cmdlet, cmdlet을 실행하지 못하도록 하는 구문 오류 또는 기타 심각한 오류를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-114">Examples include non-existent cmdlets, syntax errors that prevent a cmdlet from running, or other fatal errors.</span></span>

* <span data-ttu-id="18aa5-115">**종료되지 않는 오류**: 실패에도 불구하고 실행을 계속할 수 있는 심각하지 않은 오류입니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-115">**Non-terminating error**: A non-serious error that allows execution to continue despite the failure.</span></span> <span data-ttu-id="18aa5-116">예를 들어 찾을 수 없는 파일 오류 및 권한 문제 등의 작동 오류가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-116">Examples include operational errors such as file not found errors and permissions problems.</span></span>

<span data-ttu-id="18aa5-117">Azure Automation 그래픽 runbook은 오류 처리를 포함하는 기능으로 개선되었습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-117">Azure Automation graphical runbooks have been improved with the capability to include error handling.</span></span> <span data-ttu-id="18aa5-118">이제 예외를 종료되지 않는 오류로 전환하고 활동 간에 오류 링크를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-118">You can now turn exceptions into non-terminating errors and create error links between activities.</span></span> <span data-ttu-id="18aa5-119">이 프로세스를 통해 runbook 작성자가 오류를 포착하고 실현되거나 예기치 않은 조건을 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-119">This process allows a runbook author to catch errors and manage realized or unexpected conditions.</span></span>  

## <a name="when-to-use-error-handling"></a><span data-ttu-id="18aa5-120">오류 처리를 사용하는 경우</span><span class="sxs-lookup"><span data-stu-id="18aa5-120">When to use error handling</span></span>

<span data-ttu-id="18aa5-121">오류 또는 예외를 throw하는 중요한 활동이 있을 때마다 runbook의 다음 활동을 처리하지 못하도록 하거나 적절하게 오류를 처리하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-121">Whenever there is a critical activity that throws an error or exception, it's important to prevent the next activity in your runbook from processing and to handle the error appropriately.</span></span> <span data-ttu-id="18aa5-122">이는 runbook에서 비즈니스 또는 서비스 운영 프로세스를 지원할 때 특히 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-122">This is especially critical when your runbooks are supporting a business or service operations process.</span></span>

<span data-ttu-id="18aa5-123">runbook 작성자는 오류를 발생시킬 수 있는 각 활동에 대해 다른 활동을 가리키는 오류 링크를 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-123">For each activity that can produce an error, the runbook author can add an error link pointing to any other activity.</span></span>  <span data-ttu-id="18aa5-124">대상 활동은 코드 활동, cmdlet 호출, 다른 runbook 호출 등을 포함하는 다른 어떤 유형이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-124">The destination activity can be of any type, including code activities, invoking a cmdlet, invoking another runbook, and so on.</span></span>

<span data-ttu-id="18aa5-125">또한 대상 활동에 나가는 링크가 있을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-125">In addition, the destination activity can also have outgoing links.</span></span> <span data-ttu-id="18aa5-126">이러한 링크는 일반 링크 또는 오류 링크일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-126">These links can be regular links or error links.</span></span> <span data-ttu-id="18aa5-127">즉, runbook 작성자는 코드 활동에 문의하지 않고 복잡한 오류 처리 논리를 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-127">This means the runbook author can implement complex error-handling logic without resorting to a code activity.</span></span> <span data-ttu-id="18aa5-128">권장되는 방식은 일반적인 기능으로 전용 오류 처리 runbook을 만드는 것이지만 필수는 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-128">The recommended practice is to create a dedicated error-handling runbook with common functionality, but it's not mandatory.</span></span> <span data-ttu-id="18aa5-129">PowerShell 코드 활동에서 오류 처리 논리는 유일한 옵션이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-129">Error-handling logic in a PowerShell code activity it isn't the only option.</span></span>  

<span data-ttu-id="18aa5-130">예를 들어 VM을 시작하고 응용 프로그램을 설치하려고 하는 runbook을 살펴보세요.</span><span class="sxs-lookup"><span data-stu-id="18aa5-130">For example, consider a runbook that tries to start a VM and install an application on it.</span></span> <span data-ttu-id="18aa5-131">VM이 제대로 시작되지 않는 경우 두 가지 작업을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-131">If the VM doesn't start correctly, it performs two actions:</span></span>

1. <span data-ttu-id="18aa5-132">이 문제에 대한 알림을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-132">It sends a notification about this problem.</span></span>
2. <span data-ttu-id="18aa5-133">대신 새 VM을 자동으로 프로비전하는 다른 runbook을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-133">It starts another runbook that automatically provisions a new VM instead.</span></span>

<span data-ttu-id="18aa5-134">한 가지 해결 방법은 1단계를 처리하는 활동을 가리키는 오류 링크를 갖는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-134">One solution is to have an error link pointing to an activity that handles step one.</span></span> <span data-ttu-id="18aa5-135">예를 들어 **Start-AzureRmAutomationRunbook** cmdlet과 같은 2단계에 대한 활동에 **Write-Warning** cmdlet을 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-135">For example, you could connect the **Write-Warning** cmdlet to an activity for step two, such as the **Start-AzureRmAutomationRunbook** cmdlet.</span></span>

<span data-ttu-id="18aa5-136">또한 이 두 가지 활동을 별도의 오류 처리 runbook에 배치하고 앞에서 제안한 지침에 따라 많은 runbook에서 사용하기 위해 이 동작을 일반화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-136">You could also generalize this behavior for use in many runbooks by putting these two activities in a separate error handling runbook and following the guidance suggested earlier.</span></span> <span data-ttu-id="18aa5-137">이 오류 처리 runbook을 호출하기 전에 원래 runbook의 데이터에서 사용자 지정 메시지를 생성한 다음 이 메시지를 오류 처리 runbook에 매개 변수로 전달할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-137">Before calling this error-handling runbook, you could construct a custom message from the data in the original runbook, and then pass it as a parameter to the error-handling runbook.</span></span>

## <a name="how-to-use-error-handling"></a><span data-ttu-id="18aa5-138">오류 처리 사용 방법</span><span class="sxs-lookup"><span data-stu-id="18aa5-138">How to use error handling</span></span>

<span data-ttu-id="18aa5-139">각 활동에는 예외를 종료되지 않는 오류로 전환하는 구성 설정이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-139">Each activity has a configuration setting that turns exceptions into non-terminating errors.</span></span> <span data-ttu-id="18aa5-140">이 설정은 기본적으로 사용하지 않도록 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-140">By default, this setting is disabled.</span></span> <span data-ttu-id="18aa5-141">오류를 처리하려는 활동에서 이 설정을 사용하도록 설정하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-141">We recommend that you enable this setting on any activity where you want to handle errors.</span></span>  

<span data-ttu-id="18aa5-142">구성을 사용하면 활동의 종료 오류 및 종료되지 않는 오류는 모두 종료되지 않는 오류로 처리되고 오류 링크로 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-142">By enabling this configuration, you are assuring that both terminating and non-terminating errors in the activity are handled as non-terminating errors, and can be handled with an error link.</span></span>  

<span data-ttu-id="18aa5-143">이 설정을 구성한 후에는 오류를 처리하는 활동을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-143">After configuring this setting, you create an activity that handles the error.</span></span> <span data-ttu-id="18aa5-144">활동이 오류를 생성하면 활동에서 일반 출력을 생성했더라도 일반 링크가 아니라 나가는 오류 링크를 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-144">If an activity produces any error, then the outgoing error links are followed, and the regular links are not, even if the activity produces regular output as well.</span></span><br><br> ![Automation runbook 오류 링크 예제](media/automation-runbook-graphical-error-handling/error-link-example.png)

<span data-ttu-id="18aa5-146">다음 예제에서 runbook은 가상 컴퓨터의 컴퓨터 이름을 포함하는 변수를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-146">In the following example, a runbook retrieves a variable that contains the computer name of a virtual machine.</span></span> <span data-ttu-id="18aa5-147">다음 작업으로 가상 컴퓨터를 시작하려고 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-147">It then attempts to start the virtual machine with the next activity.</span></span><br><br> ![Automation runbook 오류 처리 예제](media/automation-runbook-graphical-error-handling/runbook-example-error-handling.png)<br><br>      

<span data-ttu-id="18aa5-149">**Get-AutomationVariable** 활동과 **Start-AzureRmVm**은 예외를 오류로 변환하도록 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-149">The **Get-AutomationVariable** activity and **Start-AzureRmVm** are configured to convert exceptions to errors.</span></span>  <span data-ttu-id="18aa5-150">변수를 가져오거나 VM을 시작하는 데 문제가 있으면 오류가 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-150">If there are problems getting the variable or starting the VM, then errors are generated.</span></span><br><br> <span data-ttu-id="18aa5-151">![Automation runbook 오류 처리 활동 설정](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span><span class="sxs-lookup"><span data-stu-id="18aa5-151">![Automation runbook error-handling activity settings](media/automation-runbook-graphical-error-handling/activity-blade-convertexception-option.png)</span></span>

<span data-ttu-id="18aa5-152">오류 링크는 이러한 활동에서 단일 **오류 관리** 활동(코드 활동)으로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-152">Error links flow from these activities to a single **error management** activity (a code activity).</span></span> <span data-ttu-id="18aa5-153">이 활동은 *Throw* 키워드를 사용하여 간단한 PowerShell 식으로 구성되어 *$Error.Exception.Message*와 함께 처리를 중지하고 현재 예외를 설명하는 메시지를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="18aa5-153">This activity is configured with a simple PowerShell expression that uses the *Throw* keyword to stop processing, along with *$Error.Exception.Message* to get the message that describes the current exception.</span></span><br><br> <span data-ttu-id="18aa5-154">![Automation runbook 오류 처리 코드 예제](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span><span class="sxs-lookup"><span data-stu-id="18aa5-154">![Automation runbook error-handling code example](media/automation-runbook-graphical-error-handling/runbook-example-error-handling-code.png)</span></span>


## <a name="next-steps"></a><span data-ttu-id="18aa5-155">다음 단계</span><span class="sxs-lookup"><span data-stu-id="18aa5-155">Next steps</span></span>

* <span data-ttu-id="18aa5-156">그래픽 runbook의 링크 및 링크 유형에 대해 자세히 알아보려면 [Azure Automation에서 그래픽 작성](automation-graphical-authoring-intro.md#links-and-workflow)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="18aa5-156">To learn more about links and link types in graphical runbooks, see [Graphical authoring in Azure Automation](automation-graphical-authoring-intro.md#links-and-workflow).</span></span>

* <span data-ttu-id="18aa5-157">runbook 실행, runbook 작업 모니터링 방법 및 기타 기술 세부 정보를 알아보려면 [runbook 작업 추적](automation-runbook-execution.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="18aa5-157">To learn more about runbook execution, how to monitor runbook jobs, and other technical details, see [Track a runbook job](automation-runbook-execution.md).</span></span>
