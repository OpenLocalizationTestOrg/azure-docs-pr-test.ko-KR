---
title: "Azure 자동화에서 Runbook 실행 | Microsoft Docs"
description: "Azure 자동화의 Runbook이 처리되는 방법에 대한 자세한 내용을 설명합니다."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: d10c8ce2-2c0b-4ea7-ba3c-d20e09b2c9ca
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/17/2017
ms.author: bwren
ms.openlocfilehash: 14f923e3f08dd3b286218ae56012ce14edcc4058
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/29/2017
---
# <a name="runbook-execution-in-azure-automation"></a><span data-ttu-id="87412-103">Azure 자동화에서 Runbook 실행</span><span class="sxs-lookup"><span data-stu-id="87412-103">Runbook execution in Azure Automation</span></span>
<span data-ttu-id="87412-104">Azure 자동화에서 Runbook을 시작하면 작업이 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-104">When you start a runbook in Azure Automation, a job is created.</span></span> <span data-ttu-id="87412-105">작업은 Runbook의 단일 실행 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="87412-105">A job is a single execution instance of a runbook.</span></span> <span data-ttu-id="87412-106">각 작업을 실행하기 위해 Azure 자동화 작업자가 할당됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-106">An Azure Automation worker is assigned to run each job.</span></span> <span data-ttu-id="87412-107">작업자는 여러 Azure 계정에서 공유하지만 여러 자동화 계정의 작업은 서로 격리됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-107">While workers are shared by multiple Azure accounts, jobs from different Automation accounts are isolated from one another.</span></span> <span data-ttu-id="87412-108">사용자는 작업에 대한 요청을 처리할 작업자를 제어할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-108">You do not have control over which worker services the request for your job.</span></span>  <span data-ttu-id="87412-109">단일 Runbook에서 동시에 여러 작업을 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-109">A single runbook can have multiple jobs running at one time.</span></span> <span data-ttu-id="87412-110">Azure Portal에서 Runbook 목록을 확인하면 각 Runbook에 대해 시작된 모든 작업의 상태가 나열됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-110">When you view the list of runbooks in the Azure portal, it lists the status of all jobs that were started for each runbook.</span></span> <span data-ttu-id="87412-111">각 Runbook에 대한 작업 목록을 확인하여 각 작업의 상태를 추적할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-111">You can view the list of jobs for each runbook in order to track the status of each.</span></span> <span data-ttu-id="87412-112">다양한 작업 상태에 대한 설명은 [작업 상태](#job-statuses)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="87412-112">For a description of the different job statuses, see [Job Statuses](#job-statuses).</span></span>

<span data-ttu-id="87412-113">다음 다이어그램은 [그래픽 Runbook](automation-runbook-types.md#graphical-runbooks) 및 [PowerShell 워크플로 Runbook](automation-runbook-types.md#powershell-workflow-runbooks)에 대한 Runbook 작업의 수명 주기를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="87412-113">The following diagram shows the lifecycle of a runbook job for [Graphical runbooks](automation-runbook-types.md#graphical-runbooks) and [PowerShell Workflow runbooks](automation-runbook-types.md#powershell-workflow-runbooks).</span></span>

![작업 상태 - PowerShell 워크플로](./media/automation-runbook-execution/job-statuses.png)

<span data-ttu-id="87412-115">다음 다이어그램은 [PowerShell Runbook](automation-runbook-types.md#powershell-runbooks)에 대한 Runbook 작업의 수명 주기를 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="87412-115">The following diagram shows the lifecycle of a runbook job for [PowerShell runbooks](automation-runbook-types.md#powershell-runbooks).</span></span>

![작업 상태 - PowerShell 스크립트](./media/automation-runbook-execution/job-statuses-script.png)

<span data-ttu-id="87412-117">Azure 구독에 연결하면 작업에서 Azure 리소스에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-117">Your jobs have access to your Azure resources by making a connection to your Azure subscription.</span></span> <span data-ttu-id="87412-118">단, 공용 클라우드에서 액세스할 수 있는 데이터 센터의 리소스에만 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-118">They only have access to resources in your data center if those resources are accessible from the public cloud.</span></span>

## <a name="job-statuses"></a><span data-ttu-id="87412-119">작업 상태</span><span class="sxs-lookup"><span data-stu-id="87412-119">Job statuses</span></span>
<span data-ttu-id="87412-120">다음 표에서는 작업의 가능한 여러 상태를 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-120">The following table describes the different statuses that are possible for a job.</span></span>

| <span data-ttu-id="87412-121">상태</span><span class="sxs-lookup"><span data-stu-id="87412-121">Status</span></span> | <span data-ttu-id="87412-122">설명</span><span class="sxs-lookup"><span data-stu-id="87412-122">Description</span></span> |
|:--- |:--- |
| <span data-ttu-id="87412-123">Completed</span><span class="sxs-lookup"><span data-stu-id="87412-123">Completed</span></span> |<span data-ttu-id="87412-124">작업이 완료되었습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-124">The job completed successfully.</span></span> |
| <span data-ttu-id="87412-125">Failed</span><span class="sxs-lookup"><span data-stu-id="87412-125">Failed</span></span> |<span data-ttu-id="87412-126">[그래픽 및 PowerShell 워크플로 Runbook](automation-runbook-types.md)의 경우 Runbook을 컴파일하지 못했습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-126">For [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md), the runbook failed to compile.</span></span>  <span data-ttu-id="87412-127">[PowerShell 스크립트 Runbook](automation-runbook-types.md)의 경우 Runbook을 시작하지 못했거나 작업에서 예외가 발생했습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-127">For [PowerShell Script runbooks](automation-runbook-types.md), the runbook failed to start or the job encountered an exception.</span></span> |
| <span data-ttu-id="87412-128">Failed, waiting for resources</span><span class="sxs-lookup"><span data-stu-id="87412-128">Failed, waiting for resources</span></span> |<span data-ttu-id="87412-129">작업이 [공평 분배](#fairshare) 한도에 세 번 도달했기 때문에 실패했고 매번 동일한 검사점 또는 Runbook의 처음부터 시작되었습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-129">The job failed because it reached the [fair share](#fairshare) limit three times and started from the same checkpoint or from the start of the runbook each time.</span></span> |
| <span data-ttu-id="87412-130">Queued</span><span class="sxs-lookup"><span data-stu-id="87412-130">Queued</span></span> |<span data-ttu-id="87412-131">작업이 시작될 수 있도록 자동화 작업자의 리소스가 사용 가능한 상태가 되기를 기다리고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-131">The job is waiting for resources on an Automation worker to come available so that it can be started.</span></span> |
| <span data-ttu-id="87412-132">Starting</span><span class="sxs-lookup"><span data-stu-id="87412-132">Starting</span></span> |<span data-ttu-id="87412-133">작업이 작업자에게 할당되었으며 시스템이 시작하는 중입니다.</span><span class="sxs-lookup"><span data-stu-id="87412-133">The job has been assigned to a worker, and the system is in the process of starting it.</span></span> |
| <span data-ttu-id="87412-134">Resuming</span><span class="sxs-lookup"><span data-stu-id="87412-134">Resuming</span></span> |<span data-ttu-id="87412-135">시스템이 일시 중단된 후 작업을 다시 시작하는 중입니다.</span><span class="sxs-lookup"><span data-stu-id="87412-135">The system is in the process of resuming the job after it was suspended.</span></span> |
| <span data-ttu-id="87412-136">실행 중</span><span class="sxs-lookup"><span data-stu-id="87412-136">Running</span></span> |<span data-ttu-id="87412-137">작업이 실행 중입니다.</span><span class="sxs-lookup"><span data-stu-id="87412-137">The job is running.</span></span> |
| <span data-ttu-id="87412-138">Running, waiting for resources</span><span class="sxs-lookup"><span data-stu-id="87412-138">Running, waiting for resources</span></span> |<span data-ttu-id="87412-139">작업이 [공평 분배](#fairshare) 한도에 도달했기 때문에 언로드되었습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-139">The job has been unloaded because it reached the [fair share](#fairshare) limit.</span></span> <span data-ttu-id="87412-140">잠시 후 마지막 검사점에서 작업이 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-140">It resumes shortly from its last checkpoint.</span></span> |
| <span data-ttu-id="87412-141">중지됨</span><span class="sxs-lookup"><span data-stu-id="87412-141">Stopped</span></span> |<span data-ttu-id="87412-142">작업이 완료되기 전에 사용자에 의해 중지되었습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-142">The job was stopped by the user before it was completed.</span></span> |
| <span data-ttu-id="87412-143">중지 중</span><span class="sxs-lookup"><span data-stu-id="87412-143">Stopping</span></span> |<span data-ttu-id="87412-144">시스템이 작업을 중지하는 중입니다.</span><span class="sxs-lookup"><span data-stu-id="87412-144">The system is in the process of stopping the job.</span></span> |
| <span data-ttu-id="87412-145">일시 중단</span><span class="sxs-lookup"><span data-stu-id="87412-145">Suspended</span></span> |<span data-ttu-id="87412-146">작업이 Runbook의 사용자, 시스템 또는 명령에 의해 일시 중단되었습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-146">The job was suspended by the user, by the system, or by a command in the runbook.</span></span> <span data-ttu-id="87412-147">일시 중단된 작업은 다시 시작할 수 있으며, 마지막 검사점에서 다시 시작되거나, 검사점이 없을 경우 Runbook의 처음부터 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-147">A job that is suspended can be started again and resume from its last checkpoint or from the beginning of the runbook if it doesn't have checkpoints.</span></span> <span data-ttu-id="87412-148">Runbook은 예외가 발생하는 경우에만 시스템에 의해 일시 중단됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-148">The runbook will only be suspended by the system when an exception occurs.</span></span> <span data-ttu-id="87412-149">기본적으로 ErrorActionPreference는 **Continue**로 설정되며, 이는 오류 발생 시 작업이 계속 실행된다는 의미입니다.</span><span class="sxs-lookup"><span data-stu-id="87412-149">By default, ErrorActionPreference is set to **Continue**, meaning that the job keeps running on an error.</span></span> <span data-ttu-id="87412-150">이 기본 설정 변수가 **Stop** 으로 설정된 경우 오류 발생 시 작업이 일시 중단됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-150">If this preference variable is set to **Stop**, then the job suspends on an error.</span></span>  <span data-ttu-id="87412-151">[그래픽 및 PowerShell 워크플로 Runbook](automation-runbook-types.md) 에만 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-151">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |
| <span data-ttu-id="87412-152">Suspending</span><span class="sxs-lookup"><span data-stu-id="87412-152">Suspending</span></span> |<span data-ttu-id="87412-153">시스템이 사용자의 요청에 따라 작업을 일시 중단하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-153">The system is attempting to suspend the job at the request of the user.</span></span> <span data-ttu-id="87412-154">Runbook의 다음 검사점에 도달해야만 Runbook을 일시 중단할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-154">The runbook must reach its next checkpoint before it can be suspended.</span></span> <span data-ttu-id="87412-155">이미 마지막 검사점을 지난 경우 완료되어야만 일시 중단할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-155">If it already passed its last checkpoint, then it completes before it can be suspended.</span></span>  <span data-ttu-id="87412-156">[그래픽 및 PowerShell 워크플로 Runbook](automation-runbook-types.md) 에만 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-156">Applies to [Graphical and PowerShell Workflow runbooks](automation-runbook-types.md) only.</span></span> |

## <a name="viewing-job-status-from-the-azure-portal"></a><span data-ttu-id="87412-157">Azure Portal에서 작업 상태 보기</span><span class="sxs-lookup"><span data-stu-id="87412-157">Viewing job status from the Azure portal</span></span>
<span data-ttu-id="87412-158">Azure Portal에서 또는 runbook 작업 상태 및 작업 스트림을 전달하도록 Microsoft OMS(Operations Management Suite) Log Analytics 작업 영역과의 통합을 구성하여 모든 runbook 작업의 요약된 상태를 보거나 특정 runbook 작업에 대한 세부 정보를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-158">You can view a summarized status of all runbook jobs or drill into details of a specific runbook job in the Azure portal or by configuring integration with your Microsoft Operations Management Suite (OMS) Log Analytics workspace to forward runbook job status and job streams.</span></span>  <span data-ttu-id="87412-159">OMS Log Analytics와의 통합에 대한 자세한 내용은 [Automation에서 Log Analytics로 작업 상태 및 작업 스트림 전달(OMS)](automation-manage-send-joblogs-log-analytics.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="87412-159">For more information about integrating with OMS Log Analytics, see [Forward job status and job streams from Automation to Log Analytics (OMS)](automation-manage-send-joblogs-log-analytics.md).</span></span>  

### <a name="automation-runbook-jobs-summary"></a><span data-ttu-id="87412-160">Automation runbook 작업 요약</span><span class="sxs-lookup"><span data-stu-id="87412-160">Automation runbook jobs summary</span></span>
<span data-ttu-id="87412-161">선택한 Automation 계정 오른쪽의 **작업 통계** 타일 아래에는 선택한 Automation 계정에 대한 모든 runbook 작업의 요약을 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-161">On the right of your selected Automation account, you can see a summary of all of the runbook jobs for a selected Automation account under **Job Statistics** tile.</span></span><br><br> <span data-ttu-id="87412-162">![작업 통계 타일](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span><span class="sxs-lookup"><span data-stu-id="87412-162">![Job Statistics tile](./media/automation-runbook-execution/automation-account-job-status-summary.png).</span></span><br> <span data-ttu-id="87412-163">이 타일은 실행된 모든 작업의 개수 및 작업 상태를 그래픽으로 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-163">This tile displays a count and graphical representation of the job status for all jobs executed.</span></span>  

<span data-ttu-id="87412-164">타일을 클릭하면 상태, 작업 실행 시작 및 완료 시간과 함께 실행된 모든 작업의 요약된 목록이 포함된 **작업** 블레이드가 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="87412-164">Clicking on the tile presents the **Jobs** blade, which includes a summarized list of all jobs executed, with status, job execution, and start and completion times.</span></span><br><br> <span data-ttu-id="87412-165">![Automation 계정 작업 블레이드](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span><span class="sxs-lookup"><span data-stu-id="87412-165">![Automation account Jobs blade](./media/automation-runbook-execution/automation-account-jobs-status-blade.png)</span></span><br><br>  <span data-ttu-id="87412-166">**작업 필터링**을 선택하여 작업 목록을 필터링할 수 있습니다. 특정 runbook이나 작업 상태를 필터링하거나 드롭다운 목록에서 검색할 날짜/시간 범위를 필터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-166">You can filter the list of jobs by selecting **Filter jobs**  and filter on a specific runbook, job status, or from the drop-down list, the date/time range to search within.</span></span><br><br> <span data-ttu-id="87412-167">![작업 상태 필터링](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span><span class="sxs-lookup"><span data-stu-id="87412-167">![Filter Job status](./media/automation-runbook-execution/automation-account-jobs-filter.png)</span></span>

<span data-ttu-id="87412-168">또는 Automation 계정의 **Runbook** 블레이드에서 runbook을 선택하여 특정 runbook에 대한 작업 요약 세부 정보를 확인한 다음 **작업** 타일을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-168">Alternatively, you can view job summary details for a specific runbook by selecting that runbook from the **Runbooks** blade in your Automation account, and then select the **Jobs** tile.</span></span>  <span data-ttu-id="87412-169">그러면 **작업** 블레이드가 나타납니다. 여기에서 작업 레코드를 클릭하여 세부 정보 및 출력을 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-169">This presents the **Jobs** blade, and from there you can click on the job record to view its detail and output.</span></span><br><br> <span data-ttu-id="87412-170">![Automation 계정 작업 블레이드](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span><span class="sxs-lookup"><span data-stu-id="87412-170">![Automation account Jobs blade](./media/automation-runbook-execution/automation-runbook-job-summary-blade.png)</span></span><br> 

### <a name="job-summary"></a><span data-ttu-id="87412-171">작업 요약</span><span class="sxs-lookup"><span data-stu-id="87412-171">Job Summary</span></span>
<span data-ttu-id="87412-172">특정 Runbook에 대해 생성된 모든 작업 및 해당 작업의 가장 최근 상태가 나와 있는 목록을 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-172">You can view a list of all of the jobs that have been created for a particular runbook and their most recent status.</span></span> <span data-ttu-id="87412-173">이 목록에서 작업 상태 및 날짜 범위를 필터링하면 작업의 마지막 변경 사항을 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-173">You can filter this list by job status and the range of dates for the last change to the job.</span></span> <span data-ttu-id="87412-174">세부 정보 및 출력을 보려면 작업의 이름을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-174">To view its detailed information and output, click on the name of a job.</span></span> <span data-ttu-id="87412-175">작업의 세부 보기에는 해당 작업에 제공된 Runbook 매개 변수의 값이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-175">The detailed view of the job includes the values for the runbook parameters that were provided to that job.</span></span>

<span data-ttu-id="87412-176">다음 단계를 수행하여 Runbook의 작업을 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-176">You can use the following steps to view the jobs for a runbook.</span></span>

1. <span data-ttu-id="87412-177">Azure Portal에서 **Automation**을 선택한 다음 Automation 계정의 이름을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-177">In the Azure portal, select **Automation** and then select the name of an Automation account.</span></span>
2. <span data-ttu-id="87412-178">허브에서 **Runbook**을 선택하고 **Runbook** 블레이드의 목록에서 runbook을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-178">From the hub, select **Runbooks** and then on the **Runbooks** blade select a runbook from the list.</span></span>
3. <span data-ttu-id="87412-179">선택한 runbook에 대한 블레이드에서 **작업** 타일을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-179">On the blade for the selected runbook, click the **Jobs** tile.</span></span>
4. <span data-ttu-id="87412-180">목록에 있는 작업 중 하나를 클릭하고 runbook 작업 세부 정보 블레이드에서 세부 정보 및 출력을 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-180">Click on one of the jobs in the list and on the runbook job details blade you can view its detail and output.</span></span>

## <a name="retrieving-job-status-using-windows-powershell"></a><span data-ttu-id="87412-181">Windows PowerShell을 사용하여 작업 상태 검색</span><span class="sxs-lookup"><span data-stu-id="87412-181">Retrieving job status using Windows PowerShell</span></span>
<span data-ttu-id="87412-182">[Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)을 사용하여 Runbook에 대해 생성된 작업 및 특정 작업을 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-182">You can use the [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx) to retrieve the jobs created for a runbook and the details of a particular job.</span></span> <span data-ttu-id="87412-183">Windows PowerShell에서 [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx)을 사용하여 Runbook을 시작하는 경우 결과 작업이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-183">If you start a runbook with Windows PowerShell using [Start-AzureRmAutomationRunbook](https://msdn.microsoft.com/library/mt603661.aspx), then it returns the resulting job.</span></span> <span data-ttu-id="87412-184">작업의 출력을 얻으려면 [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-184">Use [Get-AzureRmAutomationJob](https://msdn.microsoft.com/library/mt619440.aspx)Output to get a job’s output.</span></span>

<span data-ttu-id="87412-185">다음 명령 예제는 샘플 Runbook에 대한 마지막 작업을 검색하고 작업의 상태, Runbook 매개 변수에 제공된 값, 작업의 출력을 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-185">The following sample commands retrieve the last job for a sample runbook and displays its status, the values provided for the runbook parameters, and the output from the job.</span></span>

    $job = (Get-AzureRmAutomationJob –AutomationAccountName "MyAutomationAccount" `
    –RunbookName "Test-Runbook" -ResourceGroupName "ResourceGroup01" | sort LastModifiedDate –desc)[0]
    $job.Status
    $job.JobParameters
    Get-AzureRmAutomationJobOutput -ResourceGroupName "ResourceGroup01" `
    –AutomationAccountName "MyAutomationAcct" -Id $job.JobId –Stream Output

## <a name="fair-share"></a><span data-ttu-id="87412-186">공평 분배</span><span class="sxs-lookup"><span data-stu-id="87412-186">Fair share</span></span>
<span data-ttu-id="87412-187">Azure Automation에서는 클라우드의 모든 Runbook 간에 리소스를 공유할 수 있도록 3시간 동안 작업을 실행한 후 일시적으로 언로드합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-187">In order to share resources among all runbooks in the cloud, Azure Automation will temporarily unload any job after it has been running for three hours.</span></span>  <span data-ttu-id="87412-188">이 시간 동안 [PowerShell 기반 runbook](automation-runbook-types.md#powershell-runbooks) 작업은 중지되며 다시 시작되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-188">During this time, jobs for [PowerShell-based runbooks](automation-runbook-types.md#powershell-runbooks) are stopped and will not be restarted.</span></span>  <span data-ttu-id="87412-189">작업 상태에는 **Stopped**이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-189">The job status shows **Stopped**.</span></span>  <span data-ttu-id="87412-190">이 유형의 Runbook은 검사점을 지원하지 않으므로 항상 처음부터 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-190">This type of runbook is always restarted from the beginning since they don't support checkpoints.</span></span>  

<span data-ttu-id="87412-191">[PowerShell 워크플로 기반 Runbook](automation-runbook-types.md#powershell-workflow-runbooks)은 마지막 [검사점](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints)에서 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-191">[PowerShell-Workflow-based runbooks](automation-runbook-types.md#powershell-workflow-runbooks) will be resumed from their last [checkpoint](https://docs.microsoft.com/system-center/sma/overview-powershell-workflows#bk_Checkpoints).</span></span>  <span data-ttu-id="87412-192">3시간을 실행한 후 runbook 작업은 서비스에 의해 일시 중단되고 해당 상태에 **Running, waiting for resources**가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-192">After running three hours, the runbook job will be suspended by the service and its status shows **Running, waiting for resources**.</span></span>  <span data-ttu-id="87412-193">샌드박스를 사용할 수 있게 되면 runbook은 Automation 서비스에 의해 자동으로 다시 시작되고 마지막 검사점부터 계속됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-193">When a sandbox becomes available, the runbook will be automatically restarted by the Automation service and resumes from the last checkpoint.</span></span>  <span data-ttu-id="87412-194">이것은 일시 중단/다시 시작에 대한 정상적인 PowerShell 워크플로 동작입니다.</span><span class="sxs-lookup"><span data-stu-id="87412-194">This is normal PowerShell-Workflow behavior for suspend/restart.</span></span>  <span data-ttu-id="87412-195">Runbook이 3시간의 런타임을 초과하면 3회까지 프로세스가 반복됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-195">If the runbook again exceeds three hours of runtime, the process repeats, up to three times.</span></span>  <span data-ttu-id="87412-196">세 번째 프로세스가 다시 시작된 후에도 runbook이 3시간 내에 완료되지 못하면 runbook 작업은 실패하고 작업 상태에 **Failed, waiting for resources**가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-196">After the third restart, if the runbook still has not completed in three hours, then the runbook job is failed, and the job status shows **Failed, waiting for resources**.</span></span>  <span data-ttu-id="87412-197">이 경우 오류와 함께 다음 예외가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-197">In this case, you receive the following exception with the failure.</span></span>

<span data-ttu-id="87412-198">*작업이 동일한 검사점에서 반복적으로 제거되었기 때문에 실행을 계속할 수 없습니다. Runbook이 해당 상태를 유지하지 않고 시간이 오래 걸리는 작업을 수행하지 않는지 확인하세요.*</span><span class="sxs-lookup"><span data-stu-id="87412-198">*The job cannot continue running because it was repeatedly evicted from the same checkpoint. Please make sure your Runbook does not perform lengthy operations without persisting its state.*</span></span>

<span data-ttu-id="87412-199">이는 Runbook이 완료되지 않고 무기한으로 실행되어 다시 언로드되지 않은 상태로 다음 검사점에 도달하지 못하도록 하기 위한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="87412-199">This is to protect the service from runbooks running indefinitely without completing, as they are not able to make it to the next checkpoint without being unloaded again.</span></span>

<span data-ttu-id="87412-200">Runbook에 검사점이 없거나 작업이 언로드되기 전에 첫 번째 검사점에 도달하지 않은 경우에는 처음부터 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-200">If the runbook has no checkpoints or the job had not reached the first checkpoint before being unloaded, then it restarts from the beginning.</span></span>  

<span data-ttu-id="87412-201">Runbook을 만들 때 두 검사점 간의 모든 활동을 실행할 시간을 3시간을 초과하지 않도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-201">When you create a runbook, you should ensure that the time to run any activities between two checkpoints does not exceed three hours.</span></span> <span data-ttu-id="87412-202">이 3시간 제한에 도달하거나 오래 실행되는 작업이 중단되지 않도록 하기 위해 Runbook에 검사점을 추가해야 할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-202">You may need to add checkpoints to your runbook to ensure that it does not reach this three hour limit or break up long running operations.</span></span> <span data-ttu-id="87412-203">예를 들어 Runbook에서 대용량 SQL 데이터베이스의 인덱스를 다시 작성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="87412-203">For example, your runbook might perform a reindex on a large SQL database.</span></span> <span data-ttu-id="87412-204">이 단일 작업이 공평 분배 제한 내에 완료되지 않으면 작업이 언로드되고 처음부터 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="87412-204">If this single operation does not complete within the fair share limit, then the job are unloaded and restarted from the beginning.</span></span> <span data-ttu-id="87412-205">이 경우 다시 인덱싱 작업을 여러 단계로 나눈 다음(예: 한 번의 하나의 테이블을 다시 인덱싱하도록) 작업이 완료할 마지막 작업 이후에 다시 시작될 수 있도록 각 작업 뒤에 검사점을 삽입해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="87412-205">In this case, you should break up the reindex operation into multiple steps, such as reindexing one table at a time, and then insert a checkpoint after each operation so that the job could resume after the last operation to complete.</span></span>

## <a name="next-steps"></a><span data-ttu-id="87412-206">다음 단계</span><span class="sxs-lookup"><span data-stu-id="87412-206">Next steps</span></span>
* <span data-ttu-id="87412-207">Azure Automation에서 runbook을 시작하는 데 사용할 수 있는 여러 가지 방법에 대해 자세히 알아보려면 [Azure Automation에서 Runbook 시작](automation-starting-a-runbook.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="87412-207">To learn more about the different methods that can be used to start a runbook in Azure Automation, see [Starting a runbook in Azure Automation](automation-starting-a-runbook.md)</span></span>

