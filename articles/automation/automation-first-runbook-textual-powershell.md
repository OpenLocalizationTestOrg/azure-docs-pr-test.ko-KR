---
title: "Azure Automation의 내 첫 번째 PowerShell Runbook | Microsoft Docs"
description: "자습서는 간단한 PowerShell Runbook의 생성, 테스트, 게시를 단계별로 안내합니다."
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: 
keywords: "azure powershell, powershell 스크립트 자습서, powershell 자동화"
ms.assetid: a43b395a-e740-41a3-ae62-40eac9d0ec00
ms.service: automation
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/26/2017
ms.author: magoedte;sngun
ms.openlocfilehash: 4b32011b72acc647d4af44bb5ccbcaab408fb4d6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="my-first-powershell-runbook"></a><span data-ttu-id="8bcbc-104">내 첫 번째 PowerShell Runbook</span><span class="sxs-lookup"><span data-stu-id="8bcbc-104">My first PowerShell runbook</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="8bcbc-105">그래픽</span><span class="sxs-lookup"><span data-stu-id="8bcbc-105">Graphical</span></span>](automation-first-runbook-graphical.md)
> * [<span data-ttu-id="8bcbc-106">PowerShell</span><span class="sxs-lookup"><span data-stu-id="8bcbc-106">PowerShell</span></span>](automation-first-runbook-textual-powershell.md)
> * [<span data-ttu-id="8bcbc-107">PowerShell 워크플로</span><span class="sxs-lookup"><span data-stu-id="8bcbc-107">PowerShell Workflow</span></span>](automation-first-runbook-textual.md)
> 
> 

<span data-ttu-id="8bcbc-108">이 자습서는 Azure Automation에서 [PowerShell runbook](automation-runbook-types.md#powershell-runbooks)을 만드는 과정을 안내합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-108">This tutorial walks you through the creation of a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) in Azure Automation.</span></span> <span data-ttu-id="8bcbc-109">Runbook 작업의 상태를 추적하는 방법을 설명하는 동안 테스트하고 게시할 단순한 Runbook부터 시작하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-109">We start with a simple runbook that we test and publish while we explain how to track the status of the runbook job.</span></span> <span data-ttu-id="8bcbc-110">그런 다음 실제로 Azure 리소스를 관리하도록 Runbook을 수정합니다. 이 경우에 Azure 가상 컴퓨터를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-110">Then we modify the runbook to actually manage Azure resources, in this case starting an Azure virtual machine.</span></span> <span data-ttu-id="8bcbc-111">최근에 Runbook 매개 변수를 추가하여 Runbook을 더욱 강력히 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-111">Lastly, we make the runbook more robust by adding runbook parameters.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8bcbc-112">필수 조건</span><span class="sxs-lookup"><span data-stu-id="8bcbc-112">Prerequisites</span></span>
<span data-ttu-id="8bcbc-113">이 자습서를 완료하려면 다음이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-113">To complete this tutorial, you need the following:</span></span>

* <span data-ttu-id="8bcbc-114">동작합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-114">Azure subscription.</span></span> <span data-ttu-id="8bcbc-115">계정이 아직 없는 경우 [MSDN 구독자 혜택을 활성화](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/)하거나 <a href="/pricing/free-account/" target="_blank">[무료 계정을 등록](https://azure.microsoft.com/free/)할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-115">If you don't have one yet, you can [activate your MSDN subscriber benefits](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/) or <a href="/pricing/free-account/" target="_blank">[sign up for a free account](https://azure.microsoft.com/free/).</span></span>
* <span data-ttu-id="8bcbc-116">[자동화 계정](automation-sec-configure-azure-runas-account.md) .</span><span class="sxs-lookup"><span data-stu-id="8bcbc-116">[Automation account](automation-sec-configure-azure-runas-account.md) to hold the runbook and authenticate to Azure resources.</span></span>  <span data-ttu-id="8bcbc-117">이 계정은 가상 컴퓨터를 시작하고 중지할 수 있는 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-117">This account must have permission to start and stop the virtual machine.</span></span>
* <span data-ttu-id="8bcbc-118">Azure 가상 컴퓨터.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-118">An Azure virtual machine.</span></span> <span data-ttu-id="8bcbc-119">프로덕션 VM이 되지 않도록 이 가상 컴퓨터를 중지하고 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-119">We stop and start this machine so it should not be a production VM.</span></span>

## <a name="step-1---create-new-runbook"></a><span data-ttu-id="8bcbc-120">1 단계-새 runbook 만들기</span><span class="sxs-lookup"><span data-stu-id="8bcbc-120">Step 1 - Create new runbook</span></span>
<span data-ttu-id="8bcbc-121">먼저 *Hello World*라는 텍스트를 출력하는 단순한 Runbook을 생성할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-121">We'll start by creating a simple runbook that outputs the text *Hello World*.</span></span>

1. <span data-ttu-id="8bcbc-122">Azure 포털에서 자동화 계정을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-122">In the Azure portal, open your Automation account.</span></span>  
   <span data-ttu-id="8bcbc-123">자동화 계정 페이지는 이 계정의 리소스 간략히 보기를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-123">The Automation account page gives you a quick view of the resources in this account.</span></span> <span data-ttu-id="8bcbc-124">사용자에게는 이미 일부 자산이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-124">You should already have some assets.</span></span> <span data-ttu-id="8bcbc-125">대부분의 자산들은 새 자동화 계정에 자동적으로 포함되 있는 모듈입니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-125">Most of those are the modules that are automatically included in a new Automation account.</span></span> <span data-ttu-id="8bcbc-126">또한 사용자는 [필수 구성 요소](#prerequisites)에서 언급된 자격 증명 자산이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-126">You should also have the Credential asset that's mentioned in the [prerequisites](#prerequisites).</span></span>
2. <span data-ttu-id="8bcbc-127">**Runbook** 타일을 클릭하여 Runbook 목록을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-127">Click the **Runbooks** tile to open the list of runbooks.</span></span><br><br> <span data-ttu-id="8bcbc-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-128">![RunbooksControl](media/automation-first-runbook-textual-powershell/runbooks-control-tiles.png)</span></span>  
3. <span data-ttu-id="8bcbc-129">**Runbook 추가**버튼을 클릭하고 **새 Runbook 만들기**를 클릭하여 새 Runbook을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-129">Create a new runbook by clicking the **Add a runbook** button and then **Create a new runbook**.</span></span>
4. <span data-ttu-id="8bcbc-130">Runbook 이름을 *MyFirstRunbook-PowerShell*로 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-130">Give the runbook the name *MyFirstRunbook-PowerShell*.</span></span>
5. <span data-ttu-id="8bcbc-131">이 경우 [PowerShell runbook](automation-runbook-types.md#powershell-runbooks)을 만들 예정이므로 **Runbook 형식**으로 **Powershell**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-131">In this case, we're going to create a [PowerShell runbook](automation-runbook-types.md#powershell-runbooks) so select **Powershell** for **Runbook type**.</span></span><br><br> <span data-ttu-id="8bcbc-132">![Runbook Type](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-132">![Runbook Type](media/automation-first-runbook-textual-powershell/automation-runbook-type.png)</span></span>  
6. <span data-ttu-id="8bcbc-133">**만들기** 를 클릭하여 Runbook을 만들고 그래픽 편집기를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-133">Click **Create** to create the runbook and open the textual editor.</span></span>

## <a name="step-2---add-code-to-the-runbook"></a><span data-ttu-id="8bcbc-134">2단계 - Runbook에 코드 추가</span><span class="sxs-lookup"><span data-stu-id="8bcbc-134">Step 2 - Add code to the runbook</span></span>
<span data-ttu-id="8bcbc-135">runbook에 직접 코드를 입력하거나 라이브러리 컨트롤에서 cmdlet, Runbook 및 자산을 선택한 후 관련 매개 변수와 함께 Runbook에 추가되도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-135">You can either type code directly into the runbook, or you can select cmdlets, runbooks, and assets from the Library control and have them added to the runbook with any related parameters.</span></span> <span data-ttu-id="8bcbc-136">이 연습에서는 Runbook에 직접 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-136">For this walkthrough, we type directly in the runbook.</span></span>

1. <span data-ttu-id="8bcbc-137">이 Runbook은 현재 비어 있습니다. *Write-Output "Hello World."*를 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-137">Our runbook is currently empty, type *Write-Output "Hello World."*.</span></span><br><br> <span data-ttu-id="8bcbc-138">![Hello World](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-138">![Hello World](media/automation-first-runbook-textual-powershell/automation-helloworld.png)</span></span>  
2. <span data-ttu-id="8bcbc-139">**저장**을 클릭하여 Runbook을 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-139">Save the runbook by clicking **Save**.</span></span><br><br> <span data-ttu-id="8bcbc-140">![저장 단추](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-140">![Save Button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-save.png)</span></span>  

## <a name="step-3---test-the-runbook"></a><span data-ttu-id="8bcbc-141">3 단계 - runbook 테스트</span><span class="sxs-lookup"><span data-stu-id="8bcbc-141">Step 3 - Test the runbook</span></span>
<span data-ttu-id="8bcbc-142">프로덕션 환경에서 사용할 수 있도록 runbook을 게시하기 전에 제대로 작동하는지 확인할 수 있게 테스트합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-142">Before we publish the runbook to make it available in production, we want to test it to make sure that it works properly.</span></span> <span data-ttu-id="8bcbc-143">Runbook을 테스트할 때 **초안** 버전을 실행하고 해당 출력을 대화형으로 봅니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-143">When you test a runbook, you run its **Draft** version and view its output interactively.</span></span>

1. <span data-ttu-id="8bcbc-144">**테스트 창** 을 클릭하여 테스트 창을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-144">Click **Test pane** to open the Test pane.</span></span><br><br> <span data-ttu-id="8bcbc-145">![Test Pane](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-145">![Test Pane](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-test.png)</span></span>  
2. <span data-ttu-id="8bcbc-146">**시작** 을 클릭하여 테스트를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-146">Click **Start** to start the test.</span></span> <span data-ttu-id="8bcbc-147">유일하게 사용 가능한 옵션이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-147">This should be the only enabled option.</span></span>
3. <span data-ttu-id="8bcbc-148">이 창에서 [runbook 작업](automation-runbook-execution.md) 이 생성되고 상태를 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-148">A [runbook job](automation-runbook-execution.md) is created and its status displayed.</span></span>  
   <span data-ttu-id="8bcbc-149">작업 상태는 클라우드의 Runbook worker를 사용할 수 있을 때까지 기다리고 있음을 나타내는 *대기 중*으로 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-149">The job status starts as *Queued* indicating that it is waiting for a runbook worker in the cloud to come available.</span></span> <span data-ttu-id="8bcbc-150">작업자가 작업을 요구한 경우, *시작 중*으로 바뀐 다음 Runbook이 실제로 실행되기 시작하면 *실행 중*으로 바뀝니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-150">It will then move to *Starting* when a worker claims the job, and then *Running* when the runbook actually starts running.</span></span>  
4. <span data-ttu-id="8bcbc-151">Runbook 작업이 완료되면 해당 출력이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-151">When the runbook job completes, its output is displayed.</span></span> <span data-ttu-id="8bcbc-152">여기서는 *Hello World*할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-152">In our case, we should see *Hello World*.</span></span><br><br> <span data-ttu-id="8bcbc-153">![테스트 창 출력](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-153">![Test Pane Output](media/automation-first-runbook-textual-powershell/automation-testpane-output.png)</span></span>  
5. <span data-ttu-id="8bcbc-154">캔버스로 돌아가려면 테스트 창을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-154">Close the Test pane to return to the canvas.</span></span>

## <a name="step-4---publish-and-start-the-runbook"></a><span data-ttu-id="8bcbc-155">4 단계 - runbook 게시 및 시작</span><span class="sxs-lookup"><span data-stu-id="8bcbc-155">Step 4 - Publish and start the runbook</span></span>
<span data-ttu-id="8bcbc-156">방금 만든 Runbook은 아직 초안 모드입니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-156">The runbook that we created is still in Draft mode.</span></span> <span data-ttu-id="8bcbc-157">프로덕션 환경에서 실행하기 전에 게시해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-157">We need to publish it before we can run it in production.</span></span>  <span data-ttu-id="8bcbc-158">Runbook을 게시하면 초안 버전으로 기존의 게시된 버전을 덮어씁니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-158">When you publish a runbook, you overwrite the existing Published version with the Draft version.</span></span>  <span data-ttu-id="8bcbc-159">사용자의 경우, 방금전에 runbook을 만들었기 때문에 게시 버전이 아직 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-159">In our case, we don't have a Published version yet because we just created the runbook.</span></span>

1. <span data-ttu-id="8bcbc-160">**게시**를 클릭하여 Runbook을 게시한 다음 확인 메시지가 표시되면 **예**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-160">Click **Publish** to publish the runbook and then **Yes** when prompted.</span></span><br><br> <span data-ttu-id="8bcbc-161">![게시 단추](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-161">![Publish button](media/automation-first-runbook-textual-powershell/automation-runbook-edit-controls-publish.png)</span></span>  
2. <span data-ttu-id="8bcbc-162">**Runbook** 창의 Runbook을 보기 위해 왼쪽으로 스크롤하면 **작성 상태**가 **게시됨**으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-162">If you scroll left to view the runbook in the **Runbooks** pane now, it will show an **Authoring Status** of **Published**.</span></span>
3. <span data-ttu-id="8bcbc-163">다시 오른쪽으로 스크롤하면 **MyFirstRunbook-PowerShell**창이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-163">Scroll back to the right to view the pane for **MyFirstRunbook-PowerShell**.</span></span>  
   <span data-ttu-id="8bcbc-164">위쪽에 표시되는 옵션을 사용하여 Runbook을 시작하거나 보고 미래의 특정 시간에 시작하도록 예약할 수 있으며 [웹후크](automation-webhooks.md)를 생성하여 HTTP 호출을 통해 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-164">The options across the top allow us to start the runbook, view the runbook, schedule it to start at some time in the future, or create a [webhook](automation-webhooks.md) so it can be started through an HTTP call.</span></span>
4. <span data-ttu-id="8bcbc-165">Runbook을 시작하려면 Runbook 시작 블레이드를 열 때 **시작**을 클릭한 다음 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-165">We want to start the runbook, so click **Start** and then click **Ok** when the Start Runbook blade opens.</span></span><br><br> <span data-ttu-id="8bcbc-166">![시작 단추](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-166">![Start button](media/automation-first-runbook-textual-powershell/automation-runbook-controls-start.png)</span></span><br>    
5. <span data-ttu-id="8bcbc-167">만든 Runbook 작업에 대한 작업 창이 열립니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-167">A job pane is opened for the runbook job that we created.</span></span> <span data-ttu-id="8bcbc-168">창을 닫을 수 있지만, 이 경우에는 작업의 진행 상황을 볼 수 있도록 열어둡니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-168">We can close this pane, but in this case we leave it open so we can watch the job's progress.</span></span>
6. <span data-ttu-id="8bcbc-169">Runbook을 테스트할 때의 상태와 같은 작업 상태가 **작업 요약** 에 표시되며 합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-169">The job status is shown in **Job Summary** and matches the statuses that we saw when we tested the runbook.</span></span><br><br> <span data-ttu-id="8bcbc-170">![작업 요약](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-170">![Job Summary](media/automation-first-runbook-textual-powershell/job-pane-status-blade-jobsummary.png)</span></span><br>  
7. <span data-ttu-id="8bcbc-171">Runbook 상태가 *완료됨*으로 표시되면 **출력**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-171">Once the runbook status shows *Completed*, click **Output**.</span></span> <span data-ttu-id="8bcbc-172">출력 창이 열리고 *Hello World*가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-172">The Output pane is opened, and we can see our *Hello World*.</span></span><br><br> <span data-ttu-id="8bcbc-173">![작업 출력](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-173">![Job Output](media/automation-first-runbook-textual-powershell/job-pane-status-blade-outputtile.png)</span></span><br> 
8. <span data-ttu-id="8bcbc-174">출력 창을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-174">Close the Output pane.</span></span>
9. <span data-ttu-id="8bcbc-175">**모든 로그** 를 클릭하여 Runbook 작업에 대한 스트림 창을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-175">Click **All Logs** to open the Streams pane for the runbook job.</span></span> <span data-ttu-id="8bcbc-176">출력 스트림에 *Hello World* 만 표시되어야 하지만 Runbook이 자세한 정보 표시, 오류와 같은 Runbook 작업에 대한 다른 스트림에 쓰는 경우 해당 스트림이 표시될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-176">We should only see *Hello World* in the output stream, but this can show other streams for a runbook job such as Verbose and Error if the runbook writes to them.</span></span><br><br> <span data-ttu-id="8bcbc-177">![모든 로그](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-177">![All Logs](media/automation-first-runbook-textual-powershell/job-pane-status-blade-alllogstile.png)</span></span><br>   
10. <span data-ttu-id="8bcbc-178">MyFirstRunbook-PowerShell 창으로 돌아가려면 스트림 창 및 작업 창을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-178">Close the Streams pane and the Job pane to return to the MyFirstRunbook-PowerShell pane.</span></span>
11. <span data-ttu-id="8bcbc-179">**작업** 을 클릭하여 이 Runbook에 대한 작업 창을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-179">Click **Jobs** to open the Jobs pane for this runbook.</span></span> <span data-ttu-id="8bcbc-180">runbook으로 만든 모든 작업을 나열합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-180">This lists all of the jobs created by this runbook.</span></span> <span data-ttu-id="8bcbc-181">작업을 한 번만 실행했으므로 하나의 작업만 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-181">We should only see one job listed since we only ran the job once.</span></span><br><br> <span data-ttu-id="8bcbc-182">![작업 목록](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-182">![Job List](media/automation-first-runbook-textual-powershell/runbook-control-job-tile.png)</span></span>  
12. <span data-ttu-id="8bcbc-183">Runbook을 시작했을 때 표시된 동일한 작업창을 열려면 이 작업을 클릭하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-183">You can click this job to open the same Job pane that we viewed when we started the runbook.</span></span> <span data-ttu-id="8bcbc-184">이 기능을 사용하면 예전으로 돌아가 특정 runbook으로 생성된 모든 작업의 세부 정보를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-184">This allows you to go back in time and view the details of any job that was created for a particular runbook.</span></span>

## <a name="step-5---add-authentication-to-manage-azure-resources"></a><span data-ttu-id="8bcbc-185">5 단계-Azure 리소스를 관리 인증 추가</span><span class="sxs-lookup"><span data-stu-id="8bcbc-185">Step 5 - Add authentication to manage Azure resources</span></span>
<span data-ttu-id="8bcbc-186">지금까지 runbook을 테스트 하고 게시했지만, 딱히 유용하지는 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-186">We've tested and published our runbook, but so far it doesn't do anything useful.</span></span> <span data-ttu-id="8bcbc-187">Azure 리소스를 관리하고자 합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-187">We want to have it manage Azure resources.</span></span> <span data-ttu-id="8bcbc-188">그러나 [필수 조건](#prerequisites)에서 언급된 자격 증명을 사용하여 인증하지 않은 경우에는 Runbook을 통해 관리할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-188">It won't be able to do that though unless we have it authenticate using the credentials that are referred to in the [prerequisites](#prerequisites).</span></span> <span data-ttu-id="8bcbc-189">이 리소스를 관리하기 위해 **Add-AzureRmAccount** cmdlet을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-189">We do that with the **Add-AzureRmAccount** cmdlet.</span></span>

1. <span data-ttu-id="8bcbc-190">MyFirstRunbook-PowerShell 창에서 **편집** 을 클릭하여 텍스트 편집기를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-190">Open the textual editor by clicking **Edit** on the MyFirstRunbook-PowerShell pane.</span></span><br><br> <span data-ttu-id="8bcbc-191">![Runbook 편집](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-191">![Edit Runbook](media/automation-first-runbook-textual-powershell/automation-runbook-controls-edit.png)</span></span><br>   
2. <span data-ttu-id="8bcbc-192">**Write-Output** 줄은 더 이상 필요하지 않으므로 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-192">We don't need the **Write-Output** line anymore, so go ahead and delete it.</span></span>
3. <span data-ttu-id="8bcbc-193">Automation 실행 계정을 사용하여 인증을 처리하는 다음 코드를 입력하거나 복사하여 붙여 넣습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-193">Type or copy and paste the following code that handles the authentication with your Automation Run As account:</span></span>
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationId $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   ```
   <br>
4. <span data-ttu-id="8bcbc-194">Runbook을 테스트할 수 있도록 **테스트 창** 을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-194">Click **Test pane** so that we can test the runbook.</span></span>
5. <span data-ttu-id="8bcbc-195">**시작** 을 클릭하여 테스트를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-195">Click **Start** to start the test.</span></span> <span data-ttu-id="8bcbc-196">일단 완료되면 다음과 비슷한 출력을 수신하여 계정의 기본 정보를 표시해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-196">Once it completes, you should receive output similar to the following, displaying basic information from your account.</span></span> <span data-ttu-id="8bcbc-197">이를 통해 자격 증명이 유효한지 확인됩니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-197">This confirms that the credential is valid.</span></span><br><br> <span data-ttu-id="8bcbc-198">![인증](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-198">![Authenticate](media/automation-first-runbook-textual-powershell/runbook-auth-output.png)</span></span>

## <a name="step-6---add-code-to-start-a-virtual-machine"></a><span data-ttu-id="8bcbc-199">6단계 - 가상 컴퓨터를 시작하기 위한 코드 추가</span><span class="sxs-lookup"><span data-stu-id="8bcbc-199">Step 6 - Add code to start a virtual machine</span></span>
<span data-ttu-id="8bcbc-200">Runbook이 Azure 구독에서 인증을 받으므로 리소스를 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-200">Now that our runbook is authenticating to our Azure subscription, we can manage resources.</span></span> <span data-ttu-id="8bcbc-201">가상 컴퓨터를 시작하는 명령을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-201">We add a command to start a virtual machine.</span></span> <span data-ttu-id="8bcbc-202">Azure 구독에서 모든 가상 컴퓨터를 선택할 수 있지만 지금은 Runbook에서 해당 이름을 하드코딩합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-202">You can pick any virtual machine in your Azure subscription, and for now we will hardcode that name in the runbook.</span></span>

1. <span data-ttu-id="8bcbc-203">*Add-AzureRmAccount* 다음에 *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'*을 입력하여 시작하려는 가상 컴퓨터의 이름과 리소스 그룹 이름을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-203">After *Add-AzureRmAccount*, type *Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'NameofResourceGroup'* providing the name and Resource Group name of the virtual machine to start.</span></span>  
   
   ```
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name 'VMName' -ResourceGroupName 'ResourceGroupName'
   ```
   <br>
2. <span data-ttu-id="8bcbc-204">Runbook을 저장하고 테스트할 수 있도록 **테스트 창** 을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-204">Save the runbook and then click **Test pane** so that we can test it.</span></span>
3. <span data-ttu-id="8bcbc-205">**시작** 을 클릭하여 테스트를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-205">Click **Start** to start the test.</span></span> <span data-ttu-id="8bcbc-206">완료되면, 가상 컴퓨터가 시작되었다는 것을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-206">Once it completes, check that the virtual machine was started.</span></span>

## <a name="step-7---add-an-input-parameter-to-the-runbook"></a><span data-ttu-id="8bcbc-207">7 단계 - runbook에 입력 매개 변수를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-207">Step 7 - Add an input parameter to the runbook</span></span>
<span data-ttu-id="8bcbc-208">현재 Runbook은 Runbook에 하드코딩된 가상 컴퓨터를 시작하지만 Runbook이 시작될 때 가상 컴퓨터를 지정할 수 있으면 더욱 유용할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-208">Our runbook currently starts the virtual machine that we hardcoded in the runbook, but it would be more useful if we specify the virtual machine when the runbook is started.</span></span> <span data-ttu-id="8bcbc-209">이제 해당 기능을 제공하도록 Runbook에 입력 매개 변수를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-209">We will now add input parameters to the runbook to provide that functionality.</span></span>

1. <span data-ttu-id="8bcbc-210">Runbook에 *VMName* 및 *ResourceGroupName*에 대한 매개 변수를 추가하고 아래 예제와 같이 **Start-AzureRmVM** cmdlet에 이러한 변수를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-210">Add parameters for *VMName* and *ResourceGroupName* to the runbook and use these variables with the **Start-AzureRmVM** cmdlet as in the example below.</span></span>  
   
   ```
   Param(
    [string]$VMName,
    [string]$ResourceGroupName
   )
   $Conn = Get-AutomationConnection -Name AzureRunAsConnection
   Add-AzureRMAccount -ServicePrincipal -Tenant $Conn.TenantID `
   -ApplicationID $Conn.ApplicationID -CertificateThumbprint $Conn.CertificateThumbprint
   Start-AzureRmVM -Name $VMName -ResourceGroupName $ResourceGroupName
   ```
   <br>
2. <span data-ttu-id="8bcbc-211">Runbook을 저장하고 테스트 창을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-211">Save the runbook and open the Test pane.</span></span> <span data-ttu-id="8bcbc-212">이제 사용자는 테스트에 사용될 두 개의 입력 변수에 대한 값을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-212">You can now provide values for the two input variables that are used in the test.</span></span>
3. <span data-ttu-id="8bcbc-213">창을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-213">Close the Test pane.</span></span>
4. <span data-ttu-id="8bcbc-214">**게시** 를 클릭하여 Runbook의 새 버전을 게시합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-214">Click **Publish** to publish the new version of the runbook.</span></span>
5. <span data-ttu-id="8bcbc-215">이전 단계에서 실행시킨 가상 컴퓨터를 중지합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-215">Stop the virtual machine that you started in the previous step.</span></span>
6. <span data-ttu-id="8bcbc-216">**시작** 을 클릭하여 runbook을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-216">Click **Start** to start the runbook.</span></span> <span data-ttu-id="8bcbc-217">시작하려는 가상 컴퓨터의 **VMName** 및 **ResourceGroupName**을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-217">Type in the **VMName** and **ResourceGroupName** for the virtual machine that you're going to start.</span></span><br><br> <span data-ttu-id="8bcbc-218">![매개 변수 전달](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-218">![Pass Parameter](media/automation-first-runbook-textual-powershell/automation-pass-params.png)</span></span><br>  
7. <span data-ttu-id="8bcbc-219">Runbook이 완료되면 가상 컴퓨터가 시작되었다는 것을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-219">When the runbook completes, check that the virtual machine was started.</span></span>

## <a name="differences-from-powershell-workflow"></a><span data-ttu-id="8bcbc-220">PowerShell 워크플로의 차이점</span><span class="sxs-lookup"><span data-stu-id="8bcbc-220">Differences from PowerShell Workflow</span></span>
<span data-ttu-id="8bcbc-221">PowerShell Runbook에는 PowerShell 워크플로 Runbook과 동일한 수명 주기, 기능 및 관리가 있지만 몇 가지 차이점 및 제한 사항이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-221">PowerShell runbooks have the same lifecycle, capabilities, and management as PowerShell Workflow runbooks but there are some differences and limitations:</span></span>

1. <span data-ttu-id="8bcbc-222">컴파일 단계가 없기 때문에 PowerShell 워크플로 Runbook에 비해 PowerShell Runbook이 빠르게 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-222">PowerShell runbooks run fast compared to PowerShell Workflow runbooks as they don’t have compilation step.</span></span>
2. <span data-ttu-id="8bcbc-223">PowerShell 워크플로 Runbook은 검사점 및 검사점 사용을 지원합니다. PowerShell Runbook은 처음부터만 다시 시작할 수 있지만 PowerShell 워크플로 Runbook은 Runbook의 어느 지점에서든지 다시 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-223">PowerShell Workflow runbooks support checkpoints, using checkpoints, PowerShell Workflow runbooks can resume from any point in the runbook whereas PowerShell runbooks can only resume from the beginning.</span></span>
3. <span data-ttu-id="8bcbc-224">PowerShell Runbook은 직렬로 명령을 실행할 수 있는 반면 PowerShell 워크플로 Runbook은 병렬 및 직렬 실행을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-224">PowerShell Workflow runbooks support parallel and serial execution whereas PowerShell runbooks can only execute commands serially.</span></span>
4. <span data-ttu-id="8bcbc-225">PowerShell Runbook에서 스크립트의 모든 항목은 단일 runspace에서 실행되는 반면 PowerShell 워크플로 Runbook에서 활동, 명령 또는 스크립트 블록에는 자체 runspace가 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-225">In a PowerShell Workflow runbook, an activity, a command, or a script block can have its own runspace whereas in a PowerShell runbook, everything in a script runs in a single runspace.</span></span> <span data-ttu-id="8bcbc-226">또한 네이티브 PowerShell Runbook과 PowerShell 워크플로 Runbook 간에 몇 가지 [구문 차이](https://technet.microsoft.com/magazine/dn151046.aspx) 가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8bcbc-226">There are also some [syntactic differences](https://technet.microsoft.com/magazine/dn151046.aspx) between a native PowerShell runbook and a PowerShell Workflow runbook.</span></span>

## <a name="next-steps"></a><span data-ttu-id="8bcbc-227">다음 단계</span><span class="sxs-lookup"><span data-stu-id="8bcbc-227">Next steps</span></span>
* <span data-ttu-id="8bcbc-228">그래픽 Runbook을 시작하려면 [내 첫 번째 그래픽 Runbook](automation-first-runbook-graphical.md)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-228">To get started with Graphical runbooks, see [My first graphical runbook](automation-first-runbook-graphical.md)</span></span>
* <span data-ttu-id="8bcbc-229">PowerShell 워크플로 Runbook을 시작하려면 [내 첫 번째 PowerShell 워크플로 Runbook](automation-first-runbook-textual.md)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-229">To get started with PowerShell workflow runbooks, see [My first PowerShell workflow runbook](automation-first-runbook-textual.md)</span></span>
* <span data-ttu-id="8bcbc-230">Runbook 형식, 해당 장점 및 제한 사항에 대해 자세히 확인하려면 [Azure 자동화 Runbook 형식](automation-runbook-types.md)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-230">To know more about runbook types, their advantages and limitations, see [Azure Automation runbook types](automation-runbook-types.md)</span></span>
* <span data-ttu-id="8bcbc-231">PowerShell 스크립트 지원 기능에 대한 자세한 내용은 [Azure 자동화에서 네이티브 PowerShell 스크립트 지원](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span><span class="sxs-lookup"><span data-stu-id="8bcbc-231">For more information on PowerShell script support feature, see [Native PowerShell script support in Azure Automation](https://azure.microsoft.com/blog/announcing-powershell-script-support-azure-automation-2/)</span></span>

