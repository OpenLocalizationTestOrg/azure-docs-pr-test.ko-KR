---
title: "가상 컴퓨터 시작 및 중지 - Graph | Microsoft Docs"
description: "기존 가상 컴퓨터를 시작 또는 중지하기 위한 runbook을 포함하는 Azure 자동화 시나리오의 PowerShell 워크플로 버전"
services: automation
documentationcenter: 
author: mgoedtel
manager: jwhit
editor: tysonn
ms.assetid: 62d93170-ca3d-42ef-ac1d-6d50b61ac87d
ms.service: automation
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/06/2016
ms.author: magoedte;bwren
redirect_url: https://docs.microsoft.com/azure/automation/automation-solution-vm-management
redirect_document_id: FALSE
ms.openlocfilehash: 338d5712239356e13cbf480d9655ca3ca499701d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-automation-scenario---starting-and-stopping-virtual-machines"></a><span data-ttu-id="84f7d-103">Azure 자동화 시나리오 - 가상 컴퓨터 시작 및 중지</span><span class="sxs-lookup"><span data-stu-id="84f7d-103">Azure Automation scenario - starting and stopping virtual machines</span></span>
<span data-ttu-id="84f7d-104">Azure 자동화 시나리오는 기존 가상 컴퓨터를 시작하고 중지하는 Runbook을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-104">This Azure Automation scenario includes runbooks to start and stop classic virtual machines.</span></span>  <span data-ttu-id="84f7d-105">다음과 같은 경우에 이 시나리오를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-105">You can use this scenario for any of the following:</span></span>  

* <span data-ttu-id="84f7d-106">사용자의 환경에서 수정하지 않고 Runbook을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-106">Use the runbooks without modification in your own environment.</span></span>
* <span data-ttu-id="84f7d-107">사용자 지정 기능을 수행하도록 Runbook을 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-107">Modify the runbooks to perform customized functionality.</span></span>  
* <span data-ttu-id="84f7d-108">전체 솔루션의 일부로 다른 Runbook에서 Runbook을 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-108">Call the runbooks from another runbook as part of an overall solution.</span></span>
* <span data-ttu-id="84f7d-109">Runbook을 자습서로 사용하여 Runbook 작성 개념을 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-109">Use the runbooks as tutorials to learn runbook authoring concepts.</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="84f7d-110">그래픽</span><span class="sxs-lookup"><span data-stu-id="84f7d-110">Graphical</span></span>](automation-solution-startstopvm-graphical.md)
> * [<span data-ttu-id="84f7d-111">PowerShell 워크플로</span><span class="sxs-lookup"><span data-stu-id="84f7d-111">PowerShell Workflow</span></span>](automation-solution-startstopvm-psworkflow.md)
>
>

<span data-ttu-id="84f7d-112">이것은 이 시나리오의 그래픽 Runbook 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-112">This is the graphical runbook version of this scenario.</span></span> <span data-ttu-id="84f7d-113">[PowerShell 워크플로 Runbook](automation-solution-startstopvm-psworkflow.md)을 사용하여 사용할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-113">It is also available using [PowerShell Workflow runbooks](automation-solution-startstopvm-psworkflow.md).</span></span>

## <a name="getting-the-scenario"></a><span data-ttu-id="84f7d-114">시나리오 가져오기</span><span class="sxs-lookup"><span data-stu-id="84f7d-114">Getting the scenario</span></span>
<span data-ttu-id="84f7d-115">이 시나리오는 다음 링크에서 다운로드할 수 있는 두 개의 그래픽 Runbook으로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-115">This scenario consists of two two graphical runbooks that you can download from the following links.</span></span>  <span data-ttu-id="84f7d-116">PowerShell 워크플로 Runbook에 대한 링크는 이 시나리오의 [PowerShell 워크플로 버전](automation-solution-startstopvm-psworkflow.md) 을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="84f7d-116">See the [PowerShell Workflow version](automation-solution-startstopvm-psworkflow.md) of this scenario for links to the PowerShell Workflow runbooks.</span></span>

| <span data-ttu-id="84f7d-117">Runbook</span><span class="sxs-lookup"><span data-stu-id="84f7d-117">Runbook</span></span> | <span data-ttu-id="84f7d-118">링크</span><span class="sxs-lookup"><span data-stu-id="84f7d-118">Link</span></span> | <span data-ttu-id="84f7d-119">형식</span><span class="sxs-lookup"><span data-stu-id="84f7d-119">Type</span></span> | <span data-ttu-id="84f7d-120">설명</span><span class="sxs-lookup"><span data-stu-id="84f7d-120">Description</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="84f7d-121">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="84f7d-121">StartAzureClassicVM</span></span> |[<span data-ttu-id="84f7d-122">Azure 클래식 VM 그래픽 Runbook 시작</span><span class="sxs-lookup"><span data-stu-id="84f7d-122">Start Azure Classic VM Graphical Runbook</span></span>](https://gallery.technet.microsoft.com/scriptcenter/Start-Azure-Classic-VM-c6067b3d) |<span data-ttu-id="84f7d-123">그래픽</span><span class="sxs-lookup"><span data-stu-id="84f7d-123">Graphical</span></span> |<span data-ttu-id="84f7d-124">Azure 구독의 모든 기존 가상 컴퓨터 또는 특정 서비스의 모든 가상 컴퓨터를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-124">Starts all classic virtual machines in an Azure subscription or all virtual machines with a particular service name.</span></span> |
| <span data-ttu-id="84f7d-125">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="84f7d-125">StopAzureClassicVM</span></span> |[<span data-ttu-id="84f7d-126">Azure 클래식 VM 그래픽 Runbook 중지</span><span class="sxs-lookup"><span data-stu-id="84f7d-126">Stop Azure Classic VM Graphical Runbook</span></span>](https://gallery.technet.microsoft.com/scriptcenter/Stop-Azure-Classic-VM-397819bd) |<span data-ttu-id="84f7d-127">그래픽</span><span class="sxs-lookup"><span data-stu-id="84f7d-127">Graphical</span></span> |<span data-ttu-id="84f7d-128">자동화 계정의 모든 가상 컴퓨터 또는 특정 서비스 이름의 모든 가상 컴퓨터를 중지합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-128">Stops all virtual machines in an automation account or all virtual machines with a particular service name.</span></span> |

## <a name="installing-and-configuring-the-scenario"></a><span data-ttu-id="84f7d-129">시나리오 설치 및 구성</span><span class="sxs-lookup"><span data-stu-id="84f7d-129">Installing and configuring the scenario</span></span>
### <a name="1-install-the-runbooks"></a><span data-ttu-id="84f7d-130">1. Runbook 설치</span><span class="sxs-lookup"><span data-stu-id="84f7d-130">1. Install the runbooks</span></span>
<span data-ttu-id="84f7d-131">Runbook을 다운로드한 후에 [그래픽 Runbook 절차](automation-graphical-authoring-intro.md#graphical-runbook-procedures)의 절차를 사용하여 Runbook을 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-131">After downloading the runbooks, you can import them using the procedure in [Graphical runbook procedures](automation-graphical-authoring-intro.md#graphical-runbook-procedures).</span></span>

### <a name="2-review-the-description-and-requirements"></a><span data-ttu-id="84f7d-132">2. 설명 및 요구 사항 검토</span><span class="sxs-lookup"><span data-stu-id="84f7d-132">2. Review the description and requirements</span></span>
<span data-ttu-id="84f7d-133">Runbook은 설명 및 필수 자산을 포함하는 **Read Me** 라고 하는 활동을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-133">The runbooks include an activity called **Read Me** that includes a description and required assets.</span></span>  <span data-ttu-id="84f7d-134">**Read Me** 활동 및 **Workflow Script** 매개 변수를 선택하면 이 정보를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-134">You can view this information by selecting the **Read Me** activity and then the **Workflow Script** parameter.</span></span>  <span data-ttu-id="84f7d-135">이 문서에서 동일한 정보를 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-135">You can also get the same information from this article.</span></span>

### <a name="3-configure-assets"></a><span data-ttu-id="84f7d-136">3. 자산 구성</span><span class="sxs-lookup"><span data-stu-id="84f7d-136">3. Configure assets</span></span>
<span data-ttu-id="84f7d-137">Runbook은 적절한 값으로 생성하고 채워야 하는 다음 자산을 필요로 합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-137">The runbooks require the following assets that you must create and populate with appropriate values.</span></span>  <span data-ttu-id="84f7d-138">이름은 기본값입니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-138">The names are default.</span></span>  <span data-ttu-id="84f7d-139">Runbook을 시작할 때 [입력 매개 변수](#using-the-runbooks) 에 이름을 지정한 경우 다른 이름의 자산을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-139">You can use assets with different names if you specify those names in the [input parameters](#using-the-runbooks) when you start the runbook.</span></span>

| <span data-ttu-id="84f7d-140">자산 형식</span><span class="sxs-lookup"><span data-stu-id="84f7d-140">Asset Type</span></span> | <span data-ttu-id="84f7d-141">기본 이름</span><span class="sxs-lookup"><span data-stu-id="84f7d-141">Default Name</span></span> | <span data-ttu-id="84f7d-142">설명</span><span class="sxs-lookup"><span data-stu-id="84f7d-142">Description</span></span> |
|:--- |:--- |:--- |:--- |
| [<span data-ttu-id="84f7d-143">자격 증명</span><span class="sxs-lookup"><span data-stu-id="84f7d-143">Credential</span></span>](automation-credentials.md) |<span data-ttu-id="84f7d-144">AzureCredential</span><span class="sxs-lookup"><span data-stu-id="84f7d-144">AzureCredential</span></span> |<span data-ttu-id="84f7d-145">Azure 구독에서 가상 컴퓨터를 시작 및 중지할 권한이 있는 계정에 대한 자격 증명을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-145">Contains credentials for an account that has authority to start and stop virtual machines in the Azure subscription.</span></span> |
| [<span data-ttu-id="84f7d-146">변수</span><span class="sxs-lookup"><span data-stu-id="84f7d-146">Variable</span></span>](automation-variables.md) |<span data-ttu-id="84f7d-147">AzureSubscriptionId</span><span class="sxs-lookup"><span data-stu-id="84f7d-147">AzureSubscriptionId</span></span> |<span data-ttu-id="84f7d-148">Azure 구독의 구독 ID를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-148">Contains the subscription ID of your Azure subscription.</span></span> |

## <a name="using-the-scenario"></a><span data-ttu-id="84f7d-149">시나리오 사용</span><span class="sxs-lookup"><span data-stu-id="84f7d-149">Using the scenario</span></span>
### <a name="parameters"></a><span data-ttu-id="84f7d-150">매개 변수</span><span class="sxs-lookup"><span data-stu-id="84f7d-150">Parameters</span></span>
<span data-ttu-id="84f7d-151">각각의 Runbook에는 다음과 같은 [입력 매개 변수](automation-starting-a-runbook.md#runbook-parameters)가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-151">The runbooks each have the following [input parameters](automation-starting-a-runbook.md#runbook-parameters).</span></span>  <span data-ttu-id="84f7d-152">모든 필수 매개 변수에 대한 값을 제공해야 하며 요구 사항에 따라 다른 매개 변수에 대한 값을 선택적으로 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-152">You must provide values for any mandatory parameters and can optionally provide values for other parameters depending on your requirements.</span></span>

| <span data-ttu-id="84f7d-153">매개 변수</span><span class="sxs-lookup"><span data-stu-id="84f7d-153">Parameter</span></span> | <span data-ttu-id="84f7d-154">형식</span><span class="sxs-lookup"><span data-stu-id="84f7d-154">Type</span></span> | <span data-ttu-id="84f7d-155">필수</span><span class="sxs-lookup"><span data-stu-id="84f7d-155">Mandatory</span></span> | <span data-ttu-id="84f7d-156">설명</span><span class="sxs-lookup"><span data-stu-id="84f7d-156">Description</span></span> |
|:--- |:--- |:--- |:--- |
| <span data-ttu-id="84f7d-157">ServiceName</span><span class="sxs-lookup"><span data-stu-id="84f7d-157">ServiceName</span></span> |<span data-ttu-id="84f7d-158">string</span><span class="sxs-lookup"><span data-stu-id="84f7d-158">string</span></span> |<span data-ttu-id="84f7d-159">아니요</span><span class="sxs-lookup"><span data-stu-id="84f7d-159">No</span></span> |<span data-ttu-id="84f7d-160">값이 제공되면 해당 서비스 이름의 모든 가상 컴퓨터가 시작되거나 중지됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-160">If a value is provided, then all virtual machines with that service name are started or stopped.</span></span>  <span data-ttu-id="84f7d-161">값이 제공되지 않으면 Azure 구독의 모든 기존 가상 컴퓨터가 시작되거나 중지됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-161">If no value is provided, then all classic virtual machines in the Azure subscription are started or stopped.</span></span> |
| <span data-ttu-id="84f7d-162">AzureSubscriptionIdAssetName</span><span class="sxs-lookup"><span data-stu-id="84f7d-162">AzureSubscriptionIdAssetName</span></span> |<span data-ttu-id="84f7d-163">string</span><span class="sxs-lookup"><span data-stu-id="84f7d-163">string</span></span> |<span data-ttu-id="84f7d-164">아니요</span><span class="sxs-lookup"><span data-stu-id="84f7d-164">No</span></span> |<span data-ttu-id="84f7d-165">Azure 구독의 구독 ID를 포함하는 [변수 자산](#installing-and-configuring-the-scenario) 의 이름을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-165">Contains the name of the [variable asset](#installing-and-configuring-the-scenario) that contains the subscription ID of your Azure subscription.</span></span>  <span data-ttu-id="84f7d-166">값을 지정하지 않으면 *AzureSubscriptionId* 가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-166">If you don't specify a value, *AzureSubscriptionId* is used.</span></span> |
| <span data-ttu-id="84f7d-167">AzureCredentialAssetName</span><span class="sxs-lookup"><span data-stu-id="84f7d-167">AzureCredentialAssetName</span></span> |<span data-ttu-id="84f7d-168">string</span><span class="sxs-lookup"><span data-stu-id="84f7d-168">string</span></span> |<span data-ttu-id="84f7d-169">아니요</span><span class="sxs-lookup"><span data-stu-id="84f7d-169">No</span></span> |<span data-ttu-id="84f7d-170">사용할 Runbook에 대한 자격 증명을 포함하는 [자격 증명 자산](#installing-and-configuring-the-scenario) 의 이름을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-170">Contains the name of the [credential asset](#installing-and-configuring-the-scenario) that contains the credentials for the runbook to use.</span></span>  <span data-ttu-id="84f7d-171">값을 지정하지 않으면 *AzureCredential* 이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-171">If you don't specify a value, *AzureCredential* is used.</span></span> |

### <a name="starting-the-runbooks"></a><span data-ttu-id="84f7d-172">Runbook 시작</span><span class="sxs-lookup"><span data-stu-id="84f7d-172">Starting the runbooks</span></span>
<span data-ttu-id="84f7d-173">이 문서의 Runbook 중 하나를 시작하도록 [Azure 자동화에서 Runbook 시작](automation-starting-a-runbook.md) 의 메서드를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-173">You can use any of the methods in [Starting a runbook in Azure Automation](automation-starting-a-runbook.md) to start either of the runbooks in this article.</span></span>

<span data-ttu-id="84f7d-174">다음 샘플 명령은 서비스 이름이 **MyVMService** 인 모든 가상 컴퓨터를 시작하기 위하여 *StartAzureClassicVM*을 실행하도록 Windows PowerShell을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-174">The following sample commands uses Windows PowerShell to run **StartAzureClassicVM** to start all virtual machines with the service name *MyVMService*.</span></span>

    $params = @{"ServiceName"="MyVMService"}
    Start-AzureAutomationRunbook –AutomationAccountName "MyAutomationAccount" –Name "StartAzureClassicVM" –Parameters $params

### <a name="output"></a><span data-ttu-id="84f7d-175">출력</span><span class="sxs-lookup"><span data-stu-id="84f7d-175">Output</span></span>
<span data-ttu-id="84f7d-176">Runbook은 각각의 가상 컴퓨터에 대해 시작 또는 중지 명령이 성공적으로 제출되었는지 여부를 나타내는 [메시지를 출력](automation-runbook-output-and-messages.md) 합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-176">The runbooks will [output a message](automation-runbook-output-and-messages.md) for each virtual machine indicating whether or not the start or stop instruction was successfully submitted.</span></span>  <span data-ttu-id="84f7d-177">출력물에서 특정 문자열을 찾아서 각 Runbook에 대한 결과를 판단할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-177">You can look for a specific string in the output to determine the result for each runbook.</span></span>  <span data-ttu-id="84f7d-178">가능한 출력 문자열이 다음 테이블에 나열되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-178">The possible output strings are listed in the following table.</span></span>

| <span data-ttu-id="84f7d-179">Runbook</span><span class="sxs-lookup"><span data-stu-id="84f7d-179">Runbook</span></span> | <span data-ttu-id="84f7d-180">조건</span><span class="sxs-lookup"><span data-stu-id="84f7d-180">Condition</span></span> | <span data-ttu-id="84f7d-181">Message</span><span class="sxs-lookup"><span data-stu-id="84f7d-181">Message</span></span> |
|:--- |:--- |:--- |
| <span data-ttu-id="84f7d-182">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="84f7d-182">StartAzureClassicVM</span></span> |<span data-ttu-id="84f7d-183">가상 컴퓨터 이미 실행 중</span><span class="sxs-lookup"><span data-stu-id="84f7d-183">Virtual machine is already running</span></span> |<span data-ttu-id="84f7d-184">MyVM 이미 실행 중</span><span class="sxs-lookup"><span data-stu-id="84f7d-184">MyVM is already running</span></span> |
| <span data-ttu-id="84f7d-185">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="84f7d-185">StartAzureClassicVM</span></span> |<span data-ttu-id="84f7d-186">가상 컴퓨터에 대한 시작 요청이 성공적으로 제출됨</span><span class="sxs-lookup"><span data-stu-id="84f7d-186">Start request for virtual machine successfully submitted</span></span> |<span data-ttu-id="84f7d-187">MyVM 시작됨</span><span class="sxs-lookup"><span data-stu-id="84f7d-187">MyVM has been started</span></span> |
| <span data-ttu-id="84f7d-188">StartAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="84f7d-188">StartAzureClassicVM</span></span> |<span data-ttu-id="84f7d-189">가상 컴퓨터에 대한 시작 요청 실패</span><span class="sxs-lookup"><span data-stu-id="84f7d-189">Start request for virtual machine failed</span></span> |<span data-ttu-id="84f7d-190">MyVM 시작 실패</span><span class="sxs-lookup"><span data-stu-id="84f7d-190">MyVM failed to start</span></span> |
| <span data-ttu-id="84f7d-191">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="84f7d-191">StopAzureClassicVM</span></span> |<span data-ttu-id="84f7d-192">가상 컴퓨터 이미 실행 중</span><span class="sxs-lookup"><span data-stu-id="84f7d-192">Virtual machine is already running</span></span> |<span data-ttu-id="84f7d-193">MyVM 이미 중지됨</span><span class="sxs-lookup"><span data-stu-id="84f7d-193">MyVM is already stopped</span></span> |
| <span data-ttu-id="84f7d-194">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="84f7d-194">StopAzureClassicVM</span></span> |<span data-ttu-id="84f7d-195">가상 컴퓨터에 대한 시작 요청이 성공적으로 제출됨</span><span class="sxs-lookup"><span data-stu-id="84f7d-195">Start request for virtual machine successfully submitted</span></span> |<span data-ttu-id="84f7d-196">MyVM 시작됨</span><span class="sxs-lookup"><span data-stu-id="84f7d-196">MyVM has been started</span></span> |
| <span data-ttu-id="84f7d-197">StopAzureClassicVM</span><span class="sxs-lookup"><span data-stu-id="84f7d-197">StopAzureClassicVM</span></span> |<span data-ttu-id="84f7d-198">가상 컴퓨터에 대한 시작 요청 실패</span><span class="sxs-lookup"><span data-stu-id="84f7d-198">Start request for virtual machine failed</span></span> |<span data-ttu-id="84f7d-199">MyVM 시작 실패</span><span class="sxs-lookup"><span data-stu-id="84f7d-199">MyVM failed to start</span></span> |

<span data-ttu-id="84f7d-200">다음은 샘플 그래픽 Runbook에서 **자식 Runbook** 의 하나로 [StartAzureClassicVM](automation-child-runbooks.md) 을 사용하는 이미지입니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-200">Following is an image of using the **StartAzureClassicVM** as a [child runbook](automation-child-runbooks.md) in a sample graphical runbook.</span></span>  <span data-ttu-id="84f7d-201">다음 테이블의 조건부 링크를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-201">This uses the conditional links in the following table.</span></span>

| <span data-ttu-id="84f7d-202">링크</span><span class="sxs-lookup"><span data-stu-id="84f7d-202">Link</span></span> | <span data-ttu-id="84f7d-203">조건</span><span class="sxs-lookup"><span data-stu-id="84f7d-203">Criteria</span></span> |
|:--- |:--- |
| <span data-ttu-id="84f7d-204">성공 링크</span><span class="sxs-lookup"><span data-stu-id="84f7d-204">Success link</span></span> |<span data-ttu-id="84f7d-205">$ActivityOutput['StartAzureClassicVM'] -like "\* has been started"</span><span class="sxs-lookup"><span data-stu-id="84f7d-205">$ActivityOutput['StartAzureClassicVM'] -like "\* has been started"</span></span> |
| <span data-ttu-id="84f7d-206">오류 링크</span><span class="sxs-lookup"><span data-stu-id="84f7d-206">Error link</span></span> |<span data-ttu-id="84f7d-207">$ActivityOutput['StartAzureClassicVM'] -notlike "\* has been started"</span><span class="sxs-lookup"><span data-stu-id="84f7d-207">$ActivityOutput['StartAzureClassicVM'] -notlike "\* has been started"</span></span> |

![자식 runbook 예제](media/automation-solution-startstopvm/graphical-childrunbook-example.png)

## <a name="detailed-breakdown"></a><span data-ttu-id="84f7d-209">자세한 분석</span><span class="sxs-lookup"><span data-stu-id="84f7d-209">Detailed breakdown</span></span>
<span data-ttu-id="84f7d-210">다음은 이 시나리오의 Runbook에 대한 자세한 분석입니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-210">Following is a detailed breakdown of the runbooks in this scenario.</span></span>  <span data-ttu-id="84f7d-211">이 정보를 사용하여 Runbook을 사용자 지정하거나 자체 자동화 시나리오를 작성하기 위한 학습에 활용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-211">You can use this information to either customize the runbooks or just to learn from them for authoring your own automation scenarios.</span></span>

### <a name="authentication"></a><span data-ttu-id="84f7d-212">인증</span><span class="sxs-lookup"><span data-stu-id="84f7d-212">Authentication</span></span>
![인증](media/automation-solution-startstopvm/graphical-authentication.png)

<span data-ttu-id="84f7d-214">Runbook은 [자격 증명](automation-credentials.md) 및 나머지 Runbook에 사용되는 Azure 구독을 설정하는 활동으로 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-214">The runbook starts with activities to set the [credentials](automation-credentials.md) and Azure subscription that will be used for the rest of the runbook.</span></span>

<span data-ttu-id="84f7d-215">처음 두 활동 **구독 ID 가져오기** 및 **Azure 자격 증명 가져오기**는 다음 두 활동에서 사용되는 [자산](#installing-the-runbook)을 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-215">The first two activities, **Get Subscription Id** and **Get Azure Credential**, retrieve the [assets](#installing-the-runbook) that are used by the next two activities.</span></span>  <span data-ttu-id="84f7d-216">이들 활동은 자산을 직접 지정할 수 있지만 자산 이름이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-216">Those activities could directly specify the assets, but they need the asset names.</span></span>  <span data-ttu-id="84f7d-217">이들 이름을 [입력 매개 변수](#using-the-runbooks)에 지정할 수 있도록 허용하기 때문에 입력 매개 변수로 지정된 이름의 자산을 활동을 통해 검색하도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-217">Since we are allowing the user to specify those names in the [input parameters](#using-the-runbooks), we need these activities to retrieve the assets with a name specified by an input parameter.</span></span>

<span data-ttu-id="84f7d-218">**Add-AzureAccount** 는 나머지 runbook에 사용될 자격 증명을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-218">**Add-AzureAccount** sets the credentials that will be used for the rest of the runbook.</span></span>  <span data-ttu-id="84f7d-219">**Get Azure Credential** (Azure 자격 증명 가져오기)에서 검색하는 자격 증명 자산은 Azure 구독에서 가상 컴퓨터를 시작 및 중지시킬 액세스 권한이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-219">The credential asset that it retrieves from **Get Azure Credential** must have access to start and stop virtual machines in the Azure subscription.</span></span>  <span data-ttu-id="84f7d-220">사용되는 구독은 **구독 ID 가져오기**에서 가져온 구독 ID를 사용하는 **Select-AzureSubscription**에 의해 선택됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-220">The subscription that's used is selected by **Select-AzureSubscription** which uses the subscription Id from **Get Subscription Id**.</span></span>

### <a name="get-virtual-machines"></a><span data-ttu-id="84f7d-221">가상 컴퓨터 가져오기</span><span class="sxs-lookup"><span data-stu-id="84f7d-221">Get virtual machines</span></span>
![VM 가져오기](media/automation-solution-startstopvm/graphical-getvms.png)

<span data-ttu-id="84f7d-223">Runbook은 함께 작업할 가상 컴퓨터를 결정하고 컴퓨터가 이미 시작 또는 중지되었는지(runbook에 따라서) 판단해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-223">The runbook needs to determine which virtual machines it will be working with and whether they are already started or stopped (depending on the runbook).</span></span>   <span data-ttu-id="84f7d-224">둘 중 하나의 활동은 VM을 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-224">One of two activities will retrieve the VMs.</span></span>  <span data-ttu-id="84f7d-225">**ServiceName** 입력 매개 변수에 값이 포함되면 *ServiceName* (서비스의 VM 가져오기)가 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-225">**Get VMs in Service** will run if the *ServiceName* input parameter for the runbook contains a value.</span></span>  <span data-ttu-id="84f7d-226">**ServiceName** 입력 매개 변수에 값이 포함되면 *ServiceName* (모든 VM 가져오기)가 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-226">**Get All VMs** will run if the *ServiceName* input parameter for the runbook does not contain a value.</span></span>  <span data-ttu-id="84f7d-227">이 논리는 각 활동 앞의 조건부 링크에 의해 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-227">This logic is performed by the conditional links preceding each activity.</span></span>

<span data-ttu-id="84f7d-228">두 활동 모두 **Get-AzureVM** cmdlet을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-228">Both activities use the **Get-AzureVM** cmdlet.</span></span>  <span data-ttu-id="84f7d-229">**Get All VMs**(모든 VM 가져오기)는 **ListAllVMs** 매개 변수 집합을 사용하여 모든 가상 컴퓨터를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-229">**Get All VMs** uses the **ListAllVMs** parameter set to return all virtual machines.</span></span>  <span data-ttu-id="84f7d-230">**Get VMs in Service**(서비스의 VM 가져오기)는 **GetVMByServiceAndVMName** 매개 변수 집합을 사용하며 **ServiceName** 매개 변수에 대한 **ServiceName** 입력 매개 변수를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-230">**Get VMs in Service** uses the **GetVMByServiceAndVMName** parameter set and provides the **ServiceName** input parameter for the **ServiceName** parameter.</span></span>  

### <a name="merge-vms"></a><span data-ttu-id="84f7d-231">VM 병합</span><span class="sxs-lookup"><span data-stu-id="84f7d-231">Merge VMs</span></span>
![VM 병합](media/automation-solution-startstopvm/graphical-mergevms.png)

<span data-ttu-id="84f7d-233">**Merge VMs**(VM 병합) 활동은 시작을 위해 VM의 서비스 이름과 이름을 필요로 하는 **Start-AzureVM**에 입력을 제공하는데 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-233">The **Merge VMs** activity is required to provide input to **Start-AzureVM** which needs the name and service name of the vm(s) to start.</span></span>  <span data-ttu-id="84f7d-234">입력은 **Get All VMs**(모든 VM 가져오기) 또는 **Get VMs in Service**(서비스의 VM 가져오기)에서 가져올 수 있지만 **Start-AzureVM**은 입력에 대해 하나의 활동만 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-234">That input could come from either **Get All VMs** or **Get VMs in Service**, but **Start-AzureVM** can only specify one activity for its input.</span></span>   

<span data-ttu-id="84f7d-235">이 시나리오는 **Write-Output** cmdlet을 실행하는 **Merge VMs**(VM 병합)을 만드는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-235">The scenario is to create **Merge VMs** which runs the **Write-Output** cmdlet.</span></span>  <span data-ttu-id="84f7d-236">이 cmdlet에 대한 **InputObject** 매개 변수는 이전 두 개 활동의 입력을 결합하는 PowerShell 식입니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-236">The **InputObject** parameter for that cmdlet is a PowerShell Expression that combines the input of the previous two activities.</span></span>  <span data-ttu-id="84f7d-237">이들 활동 중 하나만 실행되기 때문에 하나의 출력 세트만 예상됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-237">Only one of those activities will run, so only one set of output is expected.</span></span>  <span data-ttu-id="84f7d-238">**Start-AzureVM** 은 입력 매개 변수에 이 출력을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-238">**Start-AzureVM** can use that output for its input parameters.</span></span>

### <a name="startstop-virtual-machines"></a><span data-ttu-id="84f7d-239">가상 컴퓨터 시작/중지</span><span class="sxs-lookup"><span data-stu-id="84f7d-239">Start/Stop virtual machines</span></span>
![VM 시작](media/automation-solution-startstopvm/graphical-startvm.png) ![VM 중지](media/automation-solution-startstopvm/graphical-stopvm.png)

<span data-ttu-id="84f7d-242">Runbook에 따라서 다음 활동은 **Start-AzureVM** 또는 **Stop-AzureVM**을 사용하여 Runbook을 시작 또는 중지하려 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-242">Depending on the runbook, the next activities attempt to start or stop the runbook using **Start-AzureVM** or **Stop-AzureVM**.</span></span>  <span data-ttu-id="84f7d-243">활동은 파이프라인 링크로 시작되기 때문에 **Merge VMs**(VM 병합)에서 반환되는 각각 개체에 대해 한 번 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-243">Since the activity is preceded by a pipeline link, it will run once for each object returned from **Merge VMs**.</span></span>  <span data-ttu-id="84f7d-244">링크는 조건부입니다. 즉 활동은 가상 컴퓨터의 *RunningState*가 **Start-AzureVM**에 대해 *중지*되고 **Stop-AzureVM**에 대해 *시작*된 경우에만 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-244">The link is conditional so that the activity will only run if the *RunningState* of the virtual machine is *Stopped* for **Start-AzureVM** and *Started* for **Stop-AzureVM**.</span></span> <span data-ttu-id="84f7d-245">조건이 충족되지 않으면 **Write-Output**을 사용하여 메시지를 전송하도록 **Notify Already Started**(이미 시작됨 알림) 또는 **Notify Already Stopped**(이미 중지됨 알림)가 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-245">If this condition is not met, then **Notify Already Started** or **Notify Already Stopped** is run to send a message using **Write-Output**.</span></span>

### <a name="send-output"></a><span data-ttu-id="84f7d-246">출력 보내기</span><span class="sxs-lookup"><span data-stu-id="84f7d-246">Send output</span></span>
![VM 시작 알림](media/automation-solution-startstopvm/graphical-notifystart.png) ![VM 중지 알림](media/automation-solution-startstopvm/graphical-notifystop.png)

<span data-ttu-id="84f7d-249">Runbook의 마지막 단계는 각 가상 컴퓨터에 대한 시작 또는 중지 요청이 성공적으로 제출되었는지에 대한 출력을 보내는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-249">The final step in the runbook is to send output whether the start or stop request for each virtual machine was successfully submitted.</span></span> <span data-ttu-id="84f7d-250">각각에 대해 개별적인 **Write-Output** 활동이 있으며 조건부 링크로 무엇을 실행할지를 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-250">There is a separate **Write-Output** activity for each, and we determine which one to run with conditional links.</span></span>  <span data-ttu-id="84f7d-251">*OperationStatus*가 *성공*하면 **Notify VM Started**(VM 시작 알림) 또는 **Notify VM Stopped**(VM 중지 알림)가 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-251">**Notify VM Started** or **Notify VM Stopped** is run if *OperationStatus* is *Succeeded*.</span></span>  <span data-ttu-id="84f7d-252">*OperationStatus*가 그 밖의 값이면 **Notify Failed To Start**(시작 실패 알림) 또는 **Notify Failed to Stop**(중지 실패 알림)이 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="84f7d-252">If *OperationStatus* is any other value, then **Notify Failed To Start** or **Notify Failed to Stop** is run.</span></span>

## <a name="next-steps"></a><span data-ttu-id="84f7d-253">다음 단계</span><span class="sxs-lookup"><span data-stu-id="84f7d-253">Next steps</span></span>
* [<span data-ttu-id="84f7d-254">Azure 자동화에서 그래픽 작성</span><span class="sxs-lookup"><span data-stu-id="84f7d-254">Graphical authoring in Azure Automation</span></span>](automation-graphical-authoring-intro.md)
* [<span data-ttu-id="84f7d-255">Azure 자동화의 자식 runbook</span><span class="sxs-lookup"><span data-stu-id="84f7d-255">Child runbooks in Azure Automation</span></span>](automation-child-runbooks.md)
* [<span data-ttu-id="84f7d-256">Azure 자동화에서 Runbook 출력 및 메시지</span><span class="sxs-lookup"><span data-stu-id="84f7d-256">Runbook output and messages in Azure Automation</span></span>](automation-runbook-output-and-messages.md)
