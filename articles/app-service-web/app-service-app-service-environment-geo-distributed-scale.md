---
title: "앱 서비스 환경으로 지역 분산된 규모"
description: "트래픽 관리자 및 앱 서비스 환경으로 지역 분포를 사용하여 앱을 수평으로 확장하는 방법을 알아봅니다."
services: app-service
documentationcenter: 
author: stefsch
manager: erikre
editor: 
ms.assetid: c1b05ca8-3703-4d87-a9ae-819d741787fb
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/07/2016
ms.author: stefsch
ms.openlocfilehash: 505301b2650c9b8bafdad352055f30e55148ab0c
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="geo-distributed-scale-with-app-service-environments"></a><span data-ttu-id="0cc2c-103">앱 서비스 환경으로 지역 분산된 규모</span><span class="sxs-lookup"><span data-stu-id="0cc2c-103">Geo Distributed Scale with App Service Environments</span></span>
## <a name="overview"></a><span data-ttu-id="0cc2c-104">개요</span><span class="sxs-lookup"><span data-stu-id="0cc2c-104">Overview</span></span>
<span data-ttu-id="0cc2c-105">대규모를 필요로 하는 응용 프로그램 시나리오는 앱의 단일 배포에 사용할 수 있는 계산 리소스 용량을 초과할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-105">Application scenarios which require very high scale can exceed the compute resource capacity available to a single deployment of an app.</span></span>  <span data-ttu-id="0cc2c-106">투표 응용 프로그램, 스포츠 이벤트 및 방송된 엔터테인먼트 이벤트는 대규모를 필요로 하는 시나리오를 모두 포함하는 예입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-106">Voting applications, sporting events, and televised entertainment events are all examples of scenarios that require extremely high scale.</span></span> <span data-ttu-id="0cc2c-107">대규모를 요구하면 수평으로 앱을 확장하여 단일 지역내에서 뿐만 아니라 지역에 걸쳐 수행되는 여러 앱 배포에 맞게 큰 부하 요구 사항을 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-107">High scale requirements can be met by horizontally scaling out apps, with multiple app deployments being made within a single region, as well as across regions, to handle extreme load requirements.</span></span>

<span data-ttu-id="0cc2c-108">앱 서비스 환경은 수평적 규모 확장에 대한 이상적인 플랫폼입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-108">App Service Environments are an ideal platform for horizontal scale out.</span></span>  <span data-ttu-id="0cc2c-109">알려진된 요청 속도 지원할 수 있는 앱 서비스 환경 구성을 선택하면 개발자는 "쿠키 커터" 방식으로 추가 앱 서비스 환경을 배포하여 원하는 최대 부하 용량을 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-109">Once an App Service Environment configuration has been selected that can support a known request rate, developers can deploy additional App Service Environments in "cookie cutter" fashion to attain a desired peak load capacity.</span></span>

<span data-ttu-id="0cc2c-110">예를 들어 앱 서비스 환경의 구성에서 실행 중인 앱이 초당 20K(RPS) 요청을 처리하는 테스트를 거쳤다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-110">For example suppose an app running on an App Service Environment configuration has been tested to handle 20K requests per second (RPS).</span></span>  <span data-ttu-id="0cc2c-111">원하는 최대 부하 용량이 100K RPS인 경우 다섯 가지(5) 앱 서비스 환경을 만들고 구성하여 응용 프로그램이 최대 예상된 부하를 처리할 수 있도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-111">If the desired peak load capacity is 100K RPS, then five (5) App Service Environments can be created and configured to ensure the application can handle the maximum projected load.</span></span>

<span data-ttu-id="0cc2c-112">일반적으로 고객이 사용자 지정(또는 베니티) 도메인을 사용하여 앱에 액세스하기 때문에 개발자는 모든 앱 서비스 환경 인스턴스에 앱 요청을 분산하는 방법이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-112">Since customers typically access apps using a custom (or vanity) domain, developers need a way to distribute app requests across all of the App Service Environment instances.</span></span>  <span data-ttu-id="0cc2c-113">이 작업을 수행할 수 있는 좋은 방법은 [Azure Traffic Manager 프로필][AzureTrafficManagerProfile]을 사용하여 사용자 지정 도메인을 해결하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-113">A great way to accomplish this is to resolve the custom domain using an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="0cc2c-114">트래픽 관리자 프로필은 모든 개별 앱 서비스 환경을 가리키도록 구성될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-114">The Traffic Manager profile can be configured to point at all of the individual App Service Environments.</span></span>  <span data-ttu-id="0cc2c-115">트래픽 관리자는 트래픽 관리자 프로필의 설정에서 부하 분산에 따라 모든 앱 서비스 환경에 고객을 배포하도록 자동으로 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-115">Traffic Manager will automatically handle distributing customers across all of the App Service Environments based on the load balancing settings in the Traffic Manager profile.</span></span>  <span data-ttu-id="0cc2c-116">이 방법은 단일 모든 앱 서비스 환경이 Azure 지역에 배포되는지 전세계의 여러 Azure 지역에 배포되는지에 관계 없이 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-116">This approach works regardless of whether all of the App Service Environments are deployed in a single Azure region, or deployed worldwide across multiple Azure regions.</span></span>

<span data-ttu-id="0cc2c-117">또한 고객이 베니티 도메인을 통해 앱에 액세스하므로 고객은 앱을 실행하는 앱 서비스 환경의 수를 인식하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-117">Furthermore, since customers access apps through the vanity domain, customers are unaware of the number of App Service Environments running an app.</span></span>  <span data-ttu-id="0cc2c-118">결과적으로 개발자는 앱 서비스 환경을 관찰된 트래픽 부하에 따라 쉽고 빠르게 추가 및 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-118">As a result developers can quickly and easily add, and remove, App Service Environments based on observed traffic load.</span></span>

<span data-ttu-id="0cc2c-119">아래의 개념적 다이어그램은 단일 지역 내에서 세 가지 앱 서비스 환경에 걸쳐 수평으로 확장된 앱을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-119">The conceptual diagram below depicts an app horizontally scaled out across three App Service Environments within a single region.</span></span>

![개념적 아키텍처][ConceptualArchitecture] 

<span data-ttu-id="0cc2c-121">이 항목의 나머지 부분에서는 여러 App Service 환경을 사용하여 샘플 앱에 대한 분산된 토폴로지를 설정하는 단계를 안내합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-121">The remainder of this topic walks through the steps involved with setting up a distributed topology for the sample app using multiple App Service Environments.</span></span>

## <a name="planning-the-topology"></a><span data-ttu-id="0cc2c-122">토폴로지 계획</span><span class="sxs-lookup"><span data-stu-id="0cc2c-122">Planning the Topology</span></span>
<span data-ttu-id="0cc2c-123">분산된 앱 공간을 빌드하기 전에 미리 약간 정보가 있는 편이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-123">Before building out a distributed app footprint, it helps to have a few pieces information ahead of time.</span></span>

* <span data-ttu-id="0cc2c-124">**앱에 대한 사용자 지정 도메인:** 고객이 앱에 액세스하는 데 사용할 사용자 지정 도메인 이름은 무엇입니까?</span><span class="sxs-lookup"><span data-stu-id="0cc2c-124">**Custom domain for the app:**  What is the custom domain name that customers will use to access the app?</span></span>  <span data-ttu-id="0cc2c-125">샘플 앱의 경우 사용자 지정 도메인 이름은 *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="0cc2c-125">For the sample app the custom domain name is *www.scalableasedemo.com*</span></span>
* <span data-ttu-id="0cc2c-126">**트래픽 관리자 도메인:** 도메인 이름은 [Azure Traffic Manager 프로필][AzureTrafficManagerProfile]을 만들 때 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-126">**Traffic Manager domain:**  A domain name needs to be chosen when creating an [Azure Traffic Manager profile][AzureTrafficManagerProfile].</span></span>  <span data-ttu-id="0cc2c-127">이 이름은 *trafficmanager.net* 접미사와 결합하여 트래픽 관리자에서 관리되는 도메인 항목을 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-127">This name will be combined with the *trafficmanager.net* suffix to register a domain entry that is managed by Traffic Manager.</span></span>  <span data-ttu-id="0cc2c-128">샘플 앱의 경우 선택한 이름은 *scalable-ase-demo*입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-128">For the sample app, the name chosen is *scalable-ase-demo*.</span></span>  <span data-ttu-id="0cc2c-129">결과적으로 트래픽 관리자에서 관리되는 전체 도메인 이름은 *scalable-ase-demo.trafficmanager.net*입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-129">As a result the full domain name that is managed by Traffic Manager is *scalable-ase-demo.trafficmanager.net*.</span></span>
* <span data-ttu-id="0cc2c-130">**앱 공간을 크기 조정하는 전략:** 응용 프로그램 공간은 단일 지역의 여러 App Service Environment에 걸쳐 분산됩니까?</span><span class="sxs-lookup"><span data-stu-id="0cc2c-130">**Strategy for scaling the app footprint:**  Will the application footprint be distributed across multiple App Service Environments in a single region?</span></span>  <span data-ttu-id="0cc2c-131">여러 영역?</span><span class="sxs-lookup"><span data-stu-id="0cc2c-131">Multiple regions?</span></span>  <span data-ttu-id="0cc2c-132">두 방법을 혼합 및 일치?</span><span class="sxs-lookup"><span data-stu-id="0cc2c-132">A mix-and-match of both approaches?</span></span>  <span data-ttu-id="0cc2c-133">결정은 고객 트래픽이 생성되는 기대치 뿐만 아니라 백 엔드 인프라를 지원하는 앱의 나머지 부분이 확장할 수 있는 방법에 기반해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-133">The decision should be based on expectations of where customer traffic will originate, as well as how well the rest of an app's supporting back-end infrastructure can scale.</span></span>  <span data-ttu-id="0cc2c-134">예를 들어 100% 상태 비저장 응용 프로그램의 경우 Azure 지역 마다 여러 App Service Environment의 조합을 사용하여 앱을 크게 확장할 수 있으며 여러 Azure 지역에 걸쳐 배포된 App Service Environment로 곱해집니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-134">For example, with a 100% stateless application, an app can be massively scaled using a combination of multiple App Service Environments per Azure region,  multiplied by App Service Environments deployed across multiple Azure regions.</span></span>  <span data-ttu-id="0cc2c-135">선택할 수 있는 15+ 공용 Azure 지역으로 고객은 전세계 하이퍼 규모의 응용 프로그램 공간을 진정으로 구축할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-135">With 15+ public Azure regions available to choose from, customers can truly build a world-wide hyper-scale application footprint.</span></span>  <span data-ttu-id="0cc2c-136">이 문서에 사용되는 샘플 앱의 경우 세 가지 앱 서비스 환경을 단일 Azure 지역(미국 중남부)에서 만들었습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-136">For the sample app used for this article, three App Service Environments were created in a single Azure region (South Central US).</span></span>
* <span data-ttu-id="0cc2c-137">**App Service Environment에 대한 명명 규칙:** 각 App Service Environment에는 고유한 이름이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-137">**Naming convention for the App Service Environments:**  Each App Service Environment requires a unique name.</span></span>  <span data-ttu-id="0cc2c-138">하나 또는 두 개의 앱 서비스 환경 외에도 각 앱 서비스 환경을 식별하는 데 도움이 되는 명명 규칙을 파악하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-138">Beyond one or two App Service Environments it is helpful to have a naming convention to help identify each App Service Environment.</span></span>  <span data-ttu-id="0cc2c-139">샘플 앱의 경우 간단한 명명 규칙을 사용했습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-139">For the sample app a simple naming convention was used.</span></span>  <span data-ttu-id="0cc2c-140">세 가지 App Service Environment의 이름은 *fe1ase*, *fe2ase*, 및 *fe3ase*입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-140">The names of the three App Service Environments are *fe1ase*, *fe2ase*, and *fe3ase*.</span></span>
* <span data-ttu-id="0cc2c-141">**앱에 대한 명명 규칙:** 앱의 여러 인스턴스가 배포되기 때문에 이름은 배포된 앱의 인스턴스 각각에 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-141">**Naming convention for the apps:**  Since multiple instances of the app will be deployed, a name is needed for each instance of the deployed app.</span></span>  <span data-ttu-id="0cc2c-142">하나의 잘 알려지지 않지만 매우 편리한 앱 서비스 환경의 기능은 동일한 앱 이름을 여러 앱 서비스 환경에 걸쳐 사용할 수 있다는 점입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-142">One little-known but very convenient feature of App Service Environments is that the same app name can be used across multiple App Service Environments.</span></span>  <span data-ttu-id="0cc2c-143">각 앱 서비스 환경에 고유한 도메인 접미사가 있으므로 개발자는 각 환경에 정확히 동일한 앱 이름을 다시 사용하도록 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-143">Since each App Service Environment has a unique domain suffix, developers can choose to re-use the exact same app name in each environment.</span></span>  <span data-ttu-id="0cc2c-144">예를 들어 개발자가 앱을 *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net* 등과 같이 명명할 수 있습니다.  그러나 샘플 앱의 경우 각 앱 인스턴스에도 고유한 이름이 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-144">For example a developer could have apps named as follows:  *myapp.foo1.p.azurewebsites.net*, *myapp.foo2.p.azurewebsites.net*, *myapp.foo3.p.azurewebsites.net*, etc.  For the sample app though each app instance also has a unique name.</span></span>  <span data-ttu-id="0cc2c-145">앱 인스턴스에 사용되는 이름은 *webfrontend1*, *webfrontend2* 및 *webfrontend3*입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-145">The app instance names used are *webfrontend1*, *webfrontend2*, and *webfrontend3*.</span></span>

## <a name="setting-up-the-traffic-manager-profile"></a><span data-ttu-id="0cc2c-146">트래픽 관리자 프로필 설정</span><span class="sxs-lookup"><span data-stu-id="0cc2c-146">Setting up the Traffic Manager Profile</span></span>
<span data-ttu-id="0cc2c-147">여러 App Service Environment에서 앱의 여러 인스턴스를 배포하면 개별 앱 인스턴스는 Traffic Manager를 사용하여 등록할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-147">Once multiple instances of an app are deployed on multiple App Service Environments, the  individual app instances can be registered with Traffic Manager.</span></span>  <span data-ttu-id="0cc2c-148">샘플 앱의 경우 트래픽 관리자 프로필은 다음 배포된 앱 인스턴스에 고객을 라우팅할 수 있는 *scalable-ase-demo.trafficmanager.net* 에 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-148">For the sample app a Traffic Manager profile is needed for *scalable-ase-demo.trafficmanager.net* that can route customers to any of the following deployed app instances:</span></span>

* <span data-ttu-id="0cc2c-149">**webfrontend1.fe1ase.p.azurewebsites.net:** 첫 번째 App Service Environment에 배포된 샘플 앱의 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-149">**webfrontend1.fe1ase.p.azurewebsites.net:**  An instance of the sample app deployed on the first App Service Environment.</span></span>
* <span data-ttu-id="0cc2c-150">**webfrontend2.fe2ase.p.azurewebsites.net:** 두 번째 App Service Environment에 배포된 샘플 앱의 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-150">**webfrontend2.fe2ase.p.azurewebsites.net:**  An instance of the sample app deployed on the second App Service Environment.</span></span>
* <span data-ttu-id="0cc2c-151">**webfrontend3.fe3ase.p.azurewebsites.net:** 세 번째 App Service Environment에 배포된 샘플 앱의 인스턴스입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-151">**webfrontend3.fe3ase.p.azurewebsites.net:**  An instance of the sample app deployed on the third App Service Environment.</span></span>

<span data-ttu-id="0cc2c-152">**동일한** Azure 지역에서 실행되는 여러 Azure App Service 끝점을 등록하는 가장 쉬운 방법은 Powershell [Azure Resource Manager Traffic Manager 지원][ARMTrafficManager]을 사용하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-152">The easiest way to register multiple Azure App Service endpoints, all running in the **same** Azure region, is with the Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

<span data-ttu-id="0cc2c-153">첫 번째 단계는 Azure 트래픽 관리자 프로필을 만드는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-153">The first step is to create an Azure Traffic Manager profile.</span></span>  <span data-ttu-id="0cc2c-154">아래 코드에서는 샘플 앱에 프로필을 만든 방법을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-154">The code below shows how the profile was created for the sample app:</span></span>

    $profile = New-AzureTrafficManagerProfile –Name scalableasedemo -ResourceGroupName yourRGNameHere -TrafficRoutingMethod Weighted -RelativeDnsName scalable-ase-demo -Ttl 30 -MonitorProtocol HTTP -MonitorPort 80 -MonitorPath "/"

<span data-ttu-id="0cc2c-155">*RelativeDnsName* 매개 변수가 어떻게 *scalable-ase-demo*로 설정되는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-155">Notice how the *RelativeDnsName* parameter was set to *scalable-ase-demo*.</span></span>  <span data-ttu-id="0cc2c-156">도메인 이름 *scalable-ase-demo.trafficmanager.net* 이 만들어지고 트래픽 관리자 프로필에 연결되는 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-156">This is how the domain name *scalable-ase-demo.trafficmanager.net* is created and associated with a Traffic Manager profile.</span></span>

<span data-ttu-id="0cc2c-157">*TrafficRoutingMethod* 매개 변수는 부하 분산 정책을 정의하고 트래픽 관리자는 사용 가능한 모든 끝점에서 고객 부하를 분산하는 방법을 결정하는 데 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-157">The *TrafficRoutingMethod* parameter defines the load balancing policy Traffic Manager will use to determine how to spread customer load across all of the available endpoints.</span></span>  <span data-ttu-id="0cc2c-158">이 예제에서 *가중치* 메서드가 선택되었습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-158">In this example the *Weighted* method was chosen.</span></span>  <span data-ttu-id="0cc2c-159">이렇게 하면 고객 요청이 각 끝점에 연결된 상대 가중치에 따라 등록된 응용 프로그램 끝점에 걸쳐 분산됩니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-159">This will result in customer requests being spread across all of the registered application endpoints based on the relative weights associated with each endpoint.</span></span> 

<span data-ttu-id="0cc2c-160">만든 프로필을 사용하여 각 앱 인스턴스를 프로필에 네이티브 Azure 끝점으로 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-160">With the profile created, each app instance is added to the profile as a native Azure endpoint.</span></span>  <span data-ttu-id="0cc2c-161">아래 코드는 각 프런트 엔드 웹앱에 대한 참조를 인출하고 *TargetResourceId* 매개 변수의 방법으로 각 앱을 Traffic Manager 끝점으로 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-161">The code below fetches a reference to each front end web app, and then adds each app as a Traffic Manager endpoint by way of the *TargetResourceId* parameter.</span></span>

    $webapp1 = Get-AzureRMWebApp -Name webfrontend1
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend1 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp1.Id –EndpointStatus Enabled –Weight 10

    $webapp2 = Get-AzureRMWebApp -Name webfrontend2
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend2 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp2.Id –EndpointStatus Enabled –Weight 10

    $webapp3 = Get-AzureRMWebApp -Name webfrontend3
    Add-AzureTrafficManagerEndpointConfig –EndpointName webfrontend3 –TrafficManagerProfile $profile –Type AzureEndpoints -TargetResourceId $webapp3.Id –EndpointStatus Enabled –Weight 10

    Set-AzureTrafficManagerProfile –TrafficManagerProfile $profile

<span data-ttu-id="0cc2c-162">개별 응용 프로그램 인스턴스에 *Add-AzureTrafficManagerEndpointConfig* 로 한 개의 호출이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-162">Notice how there is one call to *Add-AzureTrafficManagerEndpointConfig* for each individual app instance.</span></span>  <span data-ttu-id="0cc2c-163">각 Powershell 명령에서 *TargetResourceId* 매개 변수는 세 개의 배포된 앱 인스턴스 중 하나를 참조합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-163">The *TargetResourceId* parameter in each Powershell command references one of the three deployed app instances.</span></span>  <span data-ttu-id="0cc2c-164">Traffic Manager 프로필은 프로필에 등록된 세 개의 모든 끝점에 걸쳐 부하를 분산합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-164">The Traffic Manager profile will spread load across all three endpoints registered in the profile.</span></span>

<span data-ttu-id="0cc2c-165">세 끝점은 모두 *가중치* 매개 변수에 동일한 값(10)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-165">All of the three endpoints use the same value (10) for the *Weight* parameter.</span></span>  <span data-ttu-id="0cc2c-166">그러면 트래픽 관리자에서 세 가지 앱 인스턴스에 상대적으로 균일하게 고객 요청을 분산하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-166">This results in Traffic Manager spreading customer requests across all three app instances relatively evenly.</span></span> 

## <a name="pointing-the-apps-custom-domain-at-the-traffic-manager-domain"></a><span data-ttu-id="0cc2c-167">트래픽 관리자 도메인에서 앱의 사용자 지정 도메인 가리키기</span><span class="sxs-lookup"><span data-stu-id="0cc2c-167">Pointing the App's Custom Domain at the Traffic Manager Domain</span></span>
<span data-ttu-id="0cc2c-168">필요한 마지막 단계는 트래픽 관리자 도메인에서 앱의 사용자 지정 도메인을 가리키는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-168">The final step necessary is to point the custom domain of the app at the Traffic Manager domain.</span></span>  <span data-ttu-id="0cc2c-169">즉, 샘플 앱의 경우 *scalable-ase-demo.trafficmanager.net*에서 *www.scalableasedemo.com*을 가리킵니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-169">For the sample app this means pointing *www.scalableasedemo.com* at *scalable-ase-demo.trafficmanager.net*.</span></span>  <span data-ttu-id="0cc2c-170">이 단계는 사용자 지정 도메인을 관리하는 도메인 등록 기관으로 완료해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-170">This step needs to be completed with the domain registrar that manages the custom domain.</span></span>  

<span data-ttu-id="0cc2c-171">등록 기관의 도메인 관리 도구를 사용하여 CNAME 기록은 트래픽 관리자 도메인에서 사용자 지정 도메인을 가리키도록 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-171">Using your registrar's domain management tools, a CNAME records needs to be created which points the custom domain at the Traffic Manager domain.</span></span>  <span data-ttu-id="0cc2c-172">아래 그림은 해당 CNAME 구성이 다음과 같다는 예를 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-172">The picture below shows an example of what this CNAME configuration looks like:</span></span>

![사용자 지정 도메인에 대한 CNAME][CNAMEforCustomDomain] 

<span data-ttu-id="0cc2c-174">이 항목에서 설명하지 않았지만 각 개별 앱 인스턴스도 등록된 사용자 지정 도메인이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-174">Although not covered in this topic, remember that each individual app instance needs to have the custom domain registered with it as well.</span></span>  <span data-ttu-id="0cc2c-175">그렇지 않은 경우 앱 인스턴스로 요청을 하고 응용 프로그램에 앱으로 등록된 사용자 지정 도메인이 없다면 요청은 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-175">Otherwise if a request makes it to an app instance, and the application does not have the custom domain registered with the app, the request will fail.</span></span>  

<span data-ttu-id="0cc2c-176">이 예에서 사용자 지정 도메인은 *www.scalableasedemo.com*이고 각 응용 프로그램 인스턴스에는 연결된 사용자 지정 도메인이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-176">In this example the custom domain is *www.scalableasedemo.com*, and each application instance has the custom domain associated with it.</span></span>

![사용자 지정 도메인][CustomDomain] 

<span data-ttu-id="0cc2c-178">Azure App Service 앱으로 사용자 지정 도메인을 등록하는 요점은 [사용자 지정 도메인 등록][RegisterCustomDomain]의 다음 문서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-178">For a recap of of registering a custom domain with Azure App Service apps, see the following article on [registering custom domains][RegisterCustomDomain].</span></span>

## <a name="trying-out-the-distributed-topology"></a><span data-ttu-id="0cc2c-179">배포된 토폴로지 사용</span><span class="sxs-lookup"><span data-stu-id="0cc2c-179">Trying out the Distributed Topology</span></span>
<span data-ttu-id="0cc2c-180">트래픽 관리자 및 DNS 구성의 최종 결과는 *www.scalableasedemo.com* 에 대한 요청이 다음 시퀀스를 통과하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-180">The end result of the Traffic Manager and DNS configuration is that requests for *www.scalableasedemo.com* will flow through the following sequence:</span></span>

1. <span data-ttu-id="0cc2c-181">브라우저 또는 장치는 *www.scalableasedemo.com*</span><span class="sxs-lookup"><span data-stu-id="0cc2c-181">A browser or device will make a DNS lookup for *www.scalableasedemo.com*</span></span>
2. <span data-ttu-id="0cc2c-182">도메인 등록 기관에서 CNAME 항목은 DNS를 조회하여 Azure 트래픽 관리자로 리디렉션됩니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-182">The CNAME entry at the domain registrar causes the DNS lookup to be redirected to Azure Traffic Manager.</span></span>
3. <span data-ttu-id="0cc2c-183">DNS 조회는 Azure 트래픽 관리자 DNS 서버 중 하나에 대한 *scalable-ase-demo.trafficmanager.net* 에 대해 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-183">A DNS lookup is made for *scalable-ase-demo.trafficmanager.net* against one of the Azure Traffic Manager DNS servers.</span></span>
4. <span data-ttu-id="0cc2c-184">부하 분산 정책에 따라(트래픽 관리자 프로필을 만들 때 이전에 사용된 *TrafficRoutingMethod* 매개 변수) 트래픽 관리자는 구성된 끝점 중 하나를 선택하고 브라우저 또는 장치에 해당 끝점의 FQDN을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-184">Based on the load balancing policy (the *TrafficRoutingMethod* parameter used earlier when creating the Traffic Manager profile), Traffic Manager will select one of the configured endpoints and return the FQDN of that endpoint to the browser or device.</span></span>
5. <span data-ttu-id="0cc2c-185">끝점의 FQDN가 앱 서비스 환경에서 실행 중인 앱 인스턴스의 URL이기 때문에 브라우저 또는 장치는 Microsoft Azure DNS 서버에 요청하여 FQDN을 IP 주소로 해결합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-185">Since the FQDN of the endpoint is the Url of an app instance running on an App Service Environment, the browser or device will ask a Microsoft Azure DNS server to resolve the FQDN to an IP address.</span></span> 
6. <span data-ttu-id="0cc2c-186">브라우저 또는 장치는 IP 주소에 HTTP/S 요청을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-186">The browser or device will send the HTTP/S request to the IP address.</span></span>  
7. <span data-ttu-id="0cc2c-187">요청은 앱 서비스 환경 중 하나에서 실행 중인 앱 인스턴스 중 하나에 도착합니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-187">The request will arrive at one of the app instances running on one of the App Service Environments.</span></span>

<span data-ttu-id="0cc2c-188">아래 그림의 콘솔에서는 세 개의 샘플 앱 서비스 환경 중 하나에서 실행 중인 앱 인스턴스를 성공적으로 해결하는 샘플 앱의 사용자 지정 도메인에 대한 DNS 조회를 보여줍니다.(이 경우 세 개의 응용 프로그램 서비스 환경 중 두 번째) </span><span class="sxs-lookup"><span data-stu-id="0cc2c-188">The console picture below shows a DNS lookup for the sample app's custom domain successfully resolving to an app instance running on one of the three sample App Service Environments (in this case the second of the three App Service Environments):</span></span>

![DNS 조회][DNSLookup] 

## <a name="additional-links-and-information"></a><span data-ttu-id="0cc2c-190">추가 링크 및 정보</span><span class="sxs-lookup"><span data-stu-id="0cc2c-190">Additional Links and Information</span></span>
<span data-ttu-id="0cc2c-191">앱 서비스 환경에 대한 모든 문서와 지침은 [응용 프로그램 서비스 환경의 추가 정보](../app-service/app-service-app-service-environments-readme.md)에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-191">All articles and How-To's for App Service Environments are available in the [README for Application Service Environments](../app-service/app-service-app-service-environments-readme.md).</span></span>

<span data-ttu-id="0cc2c-192">Powershell [Azure Resource Manager Traffic Manager 지원][ARMTrafficManager]에 대한 설명서입니다.</span><span class="sxs-lookup"><span data-stu-id="0cc2c-192">Documentation on the Powershell [Azure Resource Manager Traffic Manager support][ARMTrafficManager].</span></span>  

[!INCLUDE [app-service-web-whats-changed](../../includes/app-service-web-whats-changed.md)]

[!INCLUDE [app-service-web-try-app-service](../../includes/app-service-web-try-app-service.md)]

<!-- LINKS -->
[AzureTrafficManagerProfile]: ../traffic-manager/traffic-manager-manage-profiles.md
[ARMTrafficManager]: ../traffic-manager/traffic-manager-powershell-arm.md
[RegisterCustomDomain]: app-service-web-tutorial-custom-domain.md


<!-- IMAGES -->
[ConceptualArchitecture]: ./media/app-service-app-service-environment-geo-distributed-scale/ConceptualArchitecture-1.png
[CNAMEforCustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CNAMECustomDomain-1.png
[DNSLookup]:  ./media/app-service-app-service-environment-geo-distributed-scale/DNSLookup-1.png
[CustomDomain]:  ./media/app-service-app-service-environment-geo-distributed-scale/CustomDomain-1.png 
