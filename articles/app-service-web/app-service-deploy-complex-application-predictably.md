---
title: "Azure에서 마이크로 서비스를 예측 가능하게 프로비전 및 배포"
description: "PowerShell 스크립팅과 JSON 리소스 그룹을 사용한 예측 가능한 방법으로 Azure 앱 서비스 내에서 마이크로 서비스로 구성된 응용 프로그램을 배포하는 방법을 배워봅시다."
services: app-service
documentationcenter: 
author: cephalin
manager: erikre
editor: jimbe
ms.assetid: bb51e565-e462-4c60-929a-2ff90121f41d
ms.service: app-service
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/06/2016
ms.author: cephalin
ms.openlocfilehash: 844f42e61ba443a4b74a52f622113e87a7781913
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="provision-and-deploy-microservices-predictably-in-azure"></a><span data-ttu-id="059a4-103">Azure에서 마이크로 서비스를 예측 가능하게 프로비전 및 배포</span><span class="sxs-lookup"><span data-stu-id="059a4-103">Provision and deploy microservices predictably in Azure</span></span>
<span data-ttu-id="059a4-104">이 자습서에서는 PowerShell 스크립팅과 JSON 리소스 그룹을 사용한 예측 가능한 방법으로 [Azure App Service](/services/app-service/) 내에서 [마이크로 서비스](https://en.wikipedia.org/wiki/Microservices)로 구성된 응용 프로그램의 프로비전 및 배포하는 방법을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-104">This tutorial shows how to provision and deploy an application composed of [microservices](https://en.wikipedia.org/wiki/Microservices) in [Azure App Service](/services/app-service/) as a single unit and in a predictable manner using JSON resource group templates and PowerShell scripting.</span></span> 

<span data-ttu-id="059a4-105">고도로 분리된 마이크로 서비스로 구성된 고확장성 응용 프로그램을 프로비전 및 배포할 때 반복성과 예측 가능성이 관건입니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-105">When provisioning and deploying high-scale applications that are composed of highly decoupled microservices, repeatability and predictability are crucial to success.</span></span> <span data-ttu-id="059a4-106">[Azure 앱 서비스](/services/app-service/) 는 웹앱, 모바일 앱, API 앱 및 논리 앱을 포함한 마이크로 서비스를 생성하게 해줍니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-106">[Azure App Service](/services/app-service/) enables you to create microservices that include web apps, mobile apps, API apps, and logic apps.</span></span> <span data-ttu-id="059a4-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md)는 데이터베이스와 소스 제어 설정과 같은 리소스 종속성과 함께 모든 마이크로 서비스를 하나의 유닛으로 관리할 수 있도록 해줍니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-107">[Azure Resource Manager](../azure-resource-manager/resource-group-overview.md) enables you to manage all the microservices as a unit, together with resource dependencies such as database and source control settings.</span></span> <span data-ttu-id="059a4-108">이제 JSON 템플릿과 간단한 PowerShell 스크립팅을 사용하여 이러한 응용 프로그램을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-108">Now, you can also deploy such an application using JSON templates and simple PowerShell scripting.</span></span> 

[!INCLUDE [app-service-web-to-api-and-mobile](../../includes/app-service-web-to-api-and-mobile.md)]

## <a name="what-you-will-do"></a><span data-ttu-id="059a4-109">수행할 사항</span><span class="sxs-lookup"><span data-stu-id="059a4-109">What you will do</span></span>
<span data-ttu-id="059a4-110">자습서에서는 포함된 응용 프로그램을 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-110">In the tutorial, you will deploy an application that includes:</span></span>

* <span data-ttu-id="059a4-111">두 가지 웹앱(즉, 두 개의 마이크로 서비스)</span><span class="sxs-lookup"><span data-stu-id="059a4-111">Two web apps (i.e. two microservices)</span></span>
* <span data-ttu-id="059a4-112">백 엔드 SQL 데이터베이스</span><span class="sxs-lookup"><span data-stu-id="059a4-112">A backend SQL Database</span></span>
* <span data-ttu-id="059a4-113">앱 설정, 연결 문자열 및 소스 제어</span><span class="sxs-lookup"><span data-stu-id="059a4-113">App settings, connection strings, and source control</span></span>
* <span data-ttu-id="059a4-114">Application insights, 경고, 자동 크기 조정 설정</span><span class="sxs-lookup"><span data-stu-id="059a4-114">Application insights, alerts, autoscaling settings</span></span>

## <a name="tools-you-will-use"></a><span data-ttu-id="059a4-115">사용할 도구</span><span class="sxs-lookup"><span data-stu-id="059a4-115">Tools you will use</span></span>
<span data-ttu-id="059a4-116">이 자습서에서는 다음 도구를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-116">In this tutorial, you will use the following tools.</span></span> <span data-ttu-id="059a4-117">도구에 대한 포괄적인 설명이 아니기 때문에 종단간 시나리오를 그대로 유지하고 각각에 대해 간단히 소개하고 이에 대한 자세한 정보를 찾을 수 있는 곳을 알려드립니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-117">Since it’s not comprehensive discussion on tools, I’m going to stick to the end-to-end scenario and just give you a brief intro to each, and where you can find more information on it.</span></span> 

### <a name="azure-resource-manager-templates-json"></a><span data-ttu-id="059a4-118">Azure 리소스 관리자 템플릿(JSON)</span><span class="sxs-lookup"><span data-stu-id="059a4-118">Azure Resource Manager templates (JSON)</span></span>
<span data-ttu-id="059a4-119">예를 들어, Azure 앱 서비스에서 웹 앱을 만들 때마다 Azure 리소스 관리자는 구성 요소 리소스와 함께 전체 리소스 그룹을 만들기 위해 JSON 템플릿을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-119">Every time you create a web app in Azure App Service, for example, Azure Resource Manager uses a JSON template to create the entire resource group with the component resources.</span></span> <span data-ttu-id="059a4-120">[확장 가능한 WordPress](/marketplace/partners/wordpress/scalablewordpress/) 앱과 같이 [Azure Marketplace](/marketplace)에서 복잡한 템플릿은 MySQL 데이터베이스, 저장소 계정, App Service 계획, 웹 앱 자체, 경고 규칙, 앱 설정, 자동 크기 조정 설정 및 기타를 포함할 수 있으며 PowerShell을 통해 이러한 모든 템플릿을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-120">A complex template from the [Azure Marketplace](/marketplace) like the [Scalable WordPress](/marketplace/partners/wordpress/scalablewordpress/) app can include the MySQL database, storage accounts, the App Service plan, the web app itself, alert rules, app settings, autoscale settings, and more, and all these templates are available to you through PowerShell.</span></span> <span data-ttu-id="059a4-121">이러한 템플릿을 다운로드하고 사용는하 방법에 대한 정보는 [Azure 리소스 관리자로 Azure PowerShell 사용](../powershell-azure-resource-manager.md)을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="059a4-121">For information on how to download and use these templates, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md).</span></span>

<span data-ttu-id="059a4-122">Azure 리소스 관리자 템플릿에 대한 자세한 내용은 [Azure 리소스 관리자 템플릿 작성하기](../azure-resource-manager/resource-group-authoring-templates.md)</span><span class="sxs-lookup"><span data-stu-id="059a4-122">For more information on the Azure Resource Manager templates, see [Authoring Azure Resource Manager Templates](../azure-resource-manager/resource-group-authoring-templates.md)</span></span>

### <a name="azure-sdk-26-for-visual-studio"></a><span data-ttu-id="059a4-123">Visual Studio용 Azure SDK 2.6</span><span class="sxs-lookup"><span data-stu-id="059a4-123">Azure SDK 2.6 for Visual Studio</span></span>
<span data-ttu-id="059a4-124">최신 SDK는 JSON 편집기에서 리소스 관리자 템플릿 지원에 향상된 기능을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-124">The newest SDK contains improvements to the Resource Manager template support in the JSON editor.</span></span> <span data-ttu-id="059a4-125">이것을 사용하여 신속하게 리소스 그룹 템플릿을 처음부터 만들고, 수정을 위한 기존 JSON 템플릿(예: 다운로드한 갤러리 템플릿)을 열고, 매개 변수 파일을 채우고, Azure 리소스 그룹 솔루션에서 직접 리소스 그룹을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-125">You can use this to quickly create a resource group template from scratch or open an existing JSON template (such as a downloaded gallery template) for modification, populate the parameters file, and even deploy the resource group directly from an Azure Resource Group solution.</span></span>

<span data-ttu-id="059a4-126">자세한 내용은 [Visual Studio용 Azure SDK 2.6](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="059a4-126">For more information, see [Azure SDK 2.6 for Visual Studio](https://azure.microsoft.com/blog/2015/04/29/announcing-the-azure-sdk-2-6-for-net/).</span></span>

### <a name="azure-powershell-080-or-later"></a><span data-ttu-id="059a4-127">Azure PowerShell 0.8.0 또는 이후</span><span class="sxs-lookup"><span data-stu-id="059a4-127">Azure PowerShell 0.8.0 or later</span></span>
<span data-ttu-id="059a4-128">Azure PowerShell 설치는 버전 0.8.0부터 Azure 모듈 외에도 Azure 리소스 관리자 모듈을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-128">Beginning in version 0.8.0, the Azure PowerShell installation includes the Azure Resource Manager module in addition to the Azure module.</span></span> <span data-ttu-id="059a4-129">이 새 모듈을 사용하면 리소스 그룹의 배포를 스크립트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-129">This new module enables you to script the deployment of resource groups.</span></span>

<span data-ttu-id="059a4-130">자세한 내용은 [Azure 리소스 관리자로 Azure PowerShell 사용](../powershell-azure-resource-manager.md)</span><span class="sxs-lookup"><span data-stu-id="059a4-130">For more information, see [Using Azure PowerShell with Azure Resource Manager](../powershell-azure-resource-manager.md)</span></span>

### <a name="azure-resource-explorer"></a><span data-ttu-id="059a4-131">Azure 리소스 탐색기</span><span class="sxs-lookup"><span data-stu-id="059a4-131">Azure Resource Explorer</span></span>
<span data-ttu-id="059a4-132">이 [미리 보기 도구](https://resources.azure.com)를 사용하면 구독 및 개별 리소스에서 모든 리소스 그룹의 JSON 정의를 탐색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-132">This [preview tool](https://resources.azure.com) enables you to explore the JSON definitions of all the resource groups in your subscription and the individual resources.</span></span> <span data-ttu-id="059a4-133">도구에서 리소스의 JSON 정의를 편집하고 리소스의 전체 계층을 삭제하며 새 리소스를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-133">In the tool, you can edit the JSON definitions of a resource, delete an entire hierarchy of resources, and create new resources.</span></span>  <span data-ttu-id="059a4-134">이 도구에서 현재 사용 가능한 정보는 리소스, 올바른 값 등 특정 형식에 대해 설정해야 하는 속성을 보여주기 때문에 템플릿 작성에 매우 유용합니다. [Azure Portal](https://portal.azure.com/)에서 리소스 그룹을 만들 수도 있고, 그런 다음 리소스 그룹을 템플릿화할 수 있도록 탐색기 도구에서 JSON 정의를 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-134">The information readily available in this tool is very helpful for template authoring because it shows you what properties you need to set for a particular type of resource, the correct values, etc. You can even create your resource group in the [Azure Portal](https://portal.azure.com/), then inspect its JSON definitions in the explorer tool to help you templatize the resource group.</span></span>

### <a name="deploy-to-azure-button"></a><span data-ttu-id="059a4-135">Azure 단추에 배포</span><span class="sxs-lookup"><span data-stu-id="059a4-135">Deploy to Azure button</span></span>
<span data-ttu-id="059a4-136">소스 제어용 GitHub를 사용하는 경우 [Azure 단추에 배포](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) 를 README.MD에 배치하여 턴키 배포 UI를 Azure에 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-136">If you use GitHub for source control, you can put a [Deploy to Azure button](https://azure.microsoft.com/blog/2014/11/13/deploy-to-azure-button-for-azure-websites-2/) into your README.MD, which enables a turn-key deployment UI to Azure.</span></span> <span data-ttu-id="059a4-137">간단한 웹 앱에 이렇게 하는 동안 azuredeploy.json 파일을 리포지토리 루트에 배치하여 전체 리소스 그룹을 배포하도록 이를 확장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-137">While you can do this for any simple web app, you can extend this to enable deploying an entire resource group by putting an azuredeploy.json file in the repository root.</span></span> <span data-ttu-id="059a4-138">리소스 그룹을 만들려면 Azure 단추에 배포하 여 리소스 그룹 템플릿을 포함하는 이 JSON 파일을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-138">This JSON file, which contains the resource group template, will be used by the Deploy to Azure button to create the resource group.</span></span> <span data-ttu-id="059a4-139">예를 들어 [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) 샘플을 참조하여 이 자습서에서 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-139">For an example, see the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) sample, which you will use in this tutorial.</span></span>

## <a name="get-the-sample-resource-group-template"></a><span data-ttu-id="059a4-140">샘플 리소스 그룹 템플릿 가져오기</span><span class="sxs-lookup"><span data-stu-id="059a4-140">Get the sample resource group template</span></span>
<span data-ttu-id="059a4-141">이제 바로 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-141">So now let’s get right to it.</span></span>

1. <span data-ttu-id="059a4-142">[ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) 앱 서비스 샘플을 탐색합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-142">Navigate to the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) App Service sample.</span></span>
2. <span data-ttu-id="059a4-143">Readme.md에서 **Azure에 배포**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-143">In readme.md, click **Deploy to Azure**.</span></span>
3. <span data-ttu-id="059a4-144">[azure 배포](https://deploy.azure.com) 사이트로 이동하면 배포 매개 변수를 입력하라는 메시지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-144">You’re taken to the [deploy-to-azure](https://deploy.azure.com) site and asked to input deployment parameters.</span></span> <span data-ttu-id="059a4-145">대부분의 필드가 저장소 이름 및 일부 임의 문자열로 채워져 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-145">Notice that most of the fields are populated with the repository name and some random strings for you.</span></span> <span data-ttu-id="059a4-146">원하는 모든 필드를 변경할 수 있지만 유일하게 입력해야 할 것은 SQL Server 관리 로그인 및 암호이며 그런 다음 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-146">You can change all the fields if you want, but the only things you have to enter are the SQL Server administrative login and the password, then click **Next**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-1-deploybuttonui.png)
4. <span data-ttu-id="059a4-147">그런 다음 배포 프로세스를 시작하려면 **배포** 를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-147">Next, click **Deploy** to start the deployment process.</span></span> <span data-ttu-id="059a4-148">프로세스가 완료되면 배포된 응용 프로그램을 탐색하기 위해 http://todoapp*XXXX*.azurewebsites.net 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-148">Once the process runs to completion, click the http://todoapp*XXXX*.azurewebsites.net link to browse the deployed application.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-2-deployprogress.png)
   
   <span data-ttu-id="059a4-149">UI는 앱이 이제 시작하기 때문에 먼저 탐색할 때 약간 느릴 수 있지만 완벽하게 작동하는 응용 프로그램임을 직접 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="059a4-149">The UI would be a little slow when you first browse to it because the apps are just starting up, but convince yourself that it’s a fully-functional application.</span></span>
5. <span data-ttu-id="059a4-150">배포 페이지로 돌아와서 Azure 포털에서 새 응용 프로그램을 보려면 **관리** 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-150">Back in the Deploy page, click the **Manage** link to see the new application in the Azure Portal.</span></span>
6. <span data-ttu-id="059a4-151">**필수** 드롭다운에서 리소스 그룹 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-151">In the **Essentials** dropdown, click the resource group link.</span></span> <span data-ttu-id="059a4-152">웹 앱이 **외부 프로젝트**아래 GitHub 리포지토리에 이미 연결되었습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-152">Note also that the web app is already connected to the GitHub repository under **External Project**.</span></span> 
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-3-portalresourcegroup.png)
7. <span data-ttu-id="059a4-153">리소스 그룹 블레이드에서 리소스 그룹에 이미 두 웹 앱 및 하나의 SQL 데이터베이스가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-153">In the resource group blade, note that there are already two web apps and one SQL Database in the resource group.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/gettemplate-4-portalresourcegroupclicked.png)

<span data-ttu-id="059a4-154">Azure 리소스 관리자의 자동화된 오케스트레이션이 설정한 모든 구성 요소, 종속성, 설정, 데이터베이스 및 지속적인 게시와 함께 완벽하게 배포된 두 가지 마이크로 서비스 응용 프로그램에 대해 몇 분 동안 보았습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-154">Everything that you just saw in a few short minutes is a fully deployed two-microservice application, with all the components, dependencies, settings, database, and continuous publishing, set up by an automated orchestration in Azure Resource Manager.</span></span> <span data-ttu-id="059a4-155">이 모든 작업은 두 가지로 수행되었습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-155">All this was done by two things:</span></span>

* <span data-ttu-id="059a4-156">Azure 단추에 배포</span><span class="sxs-lookup"><span data-stu-id="059a4-156">The Deploy to Azure button</span></span>
* <span data-ttu-id="059a4-157">리포지토리 루트에 azuredeploy.json</span><span class="sxs-lookup"><span data-stu-id="059a4-157">azuredeploy.json in the repo root</span></span>

<span data-ttu-id="059a4-158">이 응용 프로그램을 수십, 수백 또는 수천 번, 때마다 정확히 동일한 구성으로 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-158">You can deploy this same application tens, hundreds, or thousands of times and have the exact same configuration every time.</span></span> <span data-ttu-id="059a4-159">이 방법의 예측 가능성과 반복성으로 인해 쉽고 자신있게 대규모 응용 프로그램을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-159">The repeatability and the predictability of this approach enables you to deploy high-scale applications with ease and confidence.</span></span>

## <a name="examine-or-edit-azuredeployjson"></a><span data-ttu-id="059a4-160">AZUREDEPLOY.JSON 검사(또는 편집)</span><span class="sxs-lookup"><span data-stu-id="059a4-160">Examine (or edit) AZUREDEPLOY.JSON</span></span>
<span data-ttu-id="059a4-161">이제를 GitHub 리포지토리를 설정하는 방법에 대해 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-161">Now let’s look at how the GitHub repository was set up.</span></span> <span data-ttu-id="059a4-162">Azure.NET SDK에서 JSON 편집기를 사용할 수 있으므로 [Azure.NET SDK 2.6](/downloads/)를 아직 설치하지 않았다면 지금 설치하십시오.</span><span class="sxs-lookup"><span data-stu-id="059a4-162">You will be using the JSON editor in the Azure .NET SDK, so if you haven’t already installed [Azure .NET SDK 2.6](/downloads/), do it now.</span></span>

1. <span data-ttu-id="059a4-163">즐겨 찾는 git 도구를 사용하여 [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) 리포지토리를 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-163">Clone the [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) repository using your favorite git tool.</span></span> <span data-ttu-id="059a4-164">아래 스크린샷은 Visual Studio 2013의 팀 탐색기에서 이것을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-164">In the screenshot below, I’m doing this in the Team Explorer in Visual Studio 2013.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-1-vsclone.png)
2. <span data-ttu-id="059a4-165">리포지토리 루트로부터 Visual Studio에서 azuredeploy.json을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-165">From the repository root, open azuredeploy.json in Visual Studio.</span></span> <span data-ttu-id="059a4-166">JSON 개요 창이 보이지 않으면 Azure.NET SDK를 설치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-166">If you don’t see the JSON Outline pane, you need to install Azure .NET SDK.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/examinejson-2-vsjsoneditor.png)

<span data-ttu-id="059a4-167">JSON 형식의 모든 세부 정보를 설명하지 않겠지만 [더 리소스](#resources) 섹션에 리소스 그룹 템플릿 언어 학습을 위한 링크가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-167">I’m not going to describe every detail of the JSON format, but the [More Resources](#resources) section has links for learning the resource group template language.</span></span> <span data-ttu-id="059a4-168">여기에서 앱 배포에 대한 고유의 사용자 지정 템플릿을 만들기 시작하는데 도움이 되는 흥미로운 기능을 보여 주겠습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-168">Here, I’m just going to show you the interesting features that can help you get started in making your own custom template for app deployment.</span></span>

### <a name="parameters"></a><span data-ttu-id="059a4-169">매개 변수</span><span class="sxs-lookup"><span data-stu-id="059a4-169">Parameters</span></span>
<span data-ttu-id="059a4-170">이러한 대부분의 매개 변수가 **Azure에 배포** 단추로 입력하려는 것임을 확인하려면 매개 변수 섹션을 살펴보세요.</span><span class="sxs-lookup"><span data-stu-id="059a4-170">Take a look at the parameters section to see that most of these parameters are what the **Deploy to Azure** button prompts you to input.</span></span> <span data-ttu-id="059a4-171">**Azure에 배포** 버튼 뒤에 사이트는 azuredeploy.json에 정의된 매개 변수를 사용하는 입력 UI를 채웁니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-171">The site behind the **Deploy to Azure** button populates the input UI using the parameters defined in azuredeploy.json.</span></span> <span data-ttu-id="059a4-172">이러한 매개 변수는 리소스 이름, 속성 값 등의 리소스 정의 전체에서 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-172">These parameters are used throughout the resource definitions, such as resource names, property values, etc.</span></span>

### <a name="resources"></a><span data-ttu-id="059a4-173">리소스</span><span class="sxs-lookup"><span data-stu-id="059a4-173">Resources</span></span>
<span data-ttu-id="059a4-174">리소스 노드에서 SQL Server 인스턴스, 앱 서비스 계획 및 두 웹 앱을 포함하는 4개의 최상위 리소스가 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-174">In the resources node, you can see that 4 top-level resources are defined, including a SQL Server instance, an App Service plan, and two web apps.</span></span> 

#### <a name="app-service-plan"></a><span data-ttu-id="059a4-175">앱 서비스 계획</span><span class="sxs-lookup"><span data-stu-id="059a4-175">App Service plan</span></span>
<span data-ttu-id="059a4-176">JSON에서 간단한 루트 수준 리소스부터 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-176">Let’s start with a simple root-level resource in the JSON.</span></span> <span data-ttu-id="059a4-177">JSON 개요에서 해당하는 JSON 코드에 강조를 표시하기 위해 **[hostingPlanName]** 라고 명명된 앱 서비스 계획을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-177">In the JSON Outline, click the App Service plan named **[hostingPlanName]** to highlight the corresponding JSON code.</span></span> 

![](./media/app-service-deploy-complex-application-predictably/examinejson-3-appserviceplan.png)

<span data-ttu-id="059a4-178">`type` 요소는 (오래 전 서버 팜을 호출했을) 앱 서비스 계획에 대한 문자열을 지정하고 JSON 파일에 정의된 매개 변수를 사용하여 다른 요소 및 속성을 채웁니다. 또한 이 리소스에는 모든 중첩된 리소스가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-178">Note that the `type` element specifies the string for an App Service plan (it was called a server farm a long, long time ago), and other elements and properties are filled in using the parameters defined in the JSON file, and this resource doesn’t have any nested resources.</span></span>

> [!NOTE]
> <span data-ttu-id="059a4-179">또한 `apiVersion`의 값이 Azure에 JSON 리소스 정의를 사용할 REST API 버전을 알려주고 `{}` 내부에 형식을 지정하는 데 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-179">Note also that the value of `apiVersion` tells Azure which version of the REST API to use the JSON resource definition with, and it can affect how the resource should be formatted inside the `{}`.</span></span> 
> 
> 

#### <a name="sql-server"></a><span data-ttu-id="059a4-180">SQL Server</span><span class="sxs-lookup"><span data-stu-id="059a4-180">SQL Server</span></span>
<span data-ttu-id="059a4-181">다음 JSON 개요에서 **SQLServer** 로 명명된 SQL Server 리소스를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-181">Next, click on the SQL Server resource named **SQLServer** in the JSON Outline.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-4-sqlserver.png)

<span data-ttu-id="059a4-182">강조 표시된 JSON 코드에 대해 다음에서 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-182">Note the following about the highlighted JSON code:</span></span>

* <span data-ttu-id="059a4-183">매개 변수를 사용하면 만들어진 리소스는 다른 리소스와 일치하는 방식으로 확실하게 명명되고 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-183">The use of parameters ensures that the created resources are named and configured in a way that makes them consistent with one another.</span></span>
* <span data-ttu-id="059a4-184">SQLServer 리소스에는 `type`에 각각 다른 값을 가진 두 중첩된 리소스가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-184">The SQLServer resource has two nested resources, each has a different value for `type`.</span></span>
* <span data-ttu-id="059a4-185">데이터베이스 및 방화벽 규칙이 정의된 `“resources”: […]` 내부의 중첩된 리소스가 루트 수준의 SQLServer 리소스의 리소스 ID를 지정 하는 `dependsOn` 요소입니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-185">The nested resources inside `“resources”: […]`, where the database and the firewall rules are defined, have a `dependsOn` element that specifies the resource ID of the root-level SQLServer resource.</span></span> <span data-ttu-id="059a4-186">이는 Azure 리소스 관리자에게 다음과 같은 사실을 알려줍니다. "이 리소스를 만들기 전에 다른 리소스가 이미 존재해야 합니다. 그 다른 리소스가 템플릿에 정의된 경우 그 하나를 먼저 만듭니다".</span><span class="sxs-lookup"><span data-stu-id="059a4-186">This tells Azure Resource Manager, “before you create this resource, that other resource must already exist; and if that other resource is defined in the template, then create that one first”.</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="059a4-187">`resourceId()` 함수를 사용하는 방법에 대한 자세한 내용은 [Azure Resource Manager 템플릿 함수](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="059a4-187">For detailed information on how to use the `resourceId()` function, see [Azure Resource Manager Template Functions](../azure-resource-manager/resource-group-template-functions-resource.md#resourceid).</span></span>
  > 
  > 
* <span data-ttu-id="059a4-188">`dependsOn` 요소의 효과로 Azure 리소스 관리자가 어떤 리소스를 동시에 만들 수 있고 어떤 리소스를 순차적으로 만들어야 하는지 알 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-188">The effect of the `dependsOn` element is that Azure Resource Manager can know which resources can be created in parallel and which resources must be created sequentially.</span></span> 

#### <a name="web-app"></a><span data-ttu-id="059a4-189">웹 앱</span><span class="sxs-lookup"><span data-stu-id="059a4-189">Web app</span></span>
<span data-ttu-id="059a4-190">이제는 실제 웹 앱 자체에 대해 알아보며 이것은 더 복잡합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-190">Now, let’s move on to the actual web apps themselves, which are more complicated.</span></span> <span data-ttu-id="059a4-191">해당 JSON 코드에 강조를 표시하려면 JSON 개요에서 [variables('apiSiteName')] 웹 앱을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-191">Click the [variables(‘apiSiteName’)] web app in the JSON Outline to highlight its JSON code.</span></span> <span data-ttu-id="059a4-192">상황이 훨씬 더 흥미로워집니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-192">You’ll notice that things are getting much more interesting.</span></span> <span data-ttu-id="059a4-193">이런 목적으로 하나씩 기능에 대해 말하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-193">For this purpose, I’ll talk about the features one by one:</span></span>

##### <a name="root-resource"></a><span data-ttu-id="059a4-194">루트 리소스</span><span class="sxs-lookup"><span data-stu-id="059a4-194">Root resource</span></span>
<span data-ttu-id="059a4-195">웹 앱은 두 개의 다른 리소스를 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-195">The web app depends on two different resources.</span></span> <span data-ttu-id="059a4-196">즉, Azure 리소스 관리자가 앱 서비스 계획 및 SQL Server 인스턴스를 모두 만든 후에 웹 앱을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-196">This means that Azure Resource Manager will create the web app only after both the App Service plan and the SQL Server instance are created.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-5-webapproot.png)

##### <a name="app-settings"></a><span data-ttu-id="059a4-197">앱 설정</span><span class="sxs-lookup"><span data-stu-id="059a4-197">App settings</span></span>
<span data-ttu-id="059a4-198">앱 설정은 중첩된 리소스로 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-198">The app settings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-6-webappsettings.png)

<span data-ttu-id="059a4-199">`config/appsettings`를 위한 `properties` 요소에서 `“<name>” : “<value>”` 형식에 두 개의 앱 설정이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-199">In the `properties` element for `config/appsettings`, you have two app settings in the format `“<name>” : “<value>”`.</span></span>

* <span data-ttu-id="059a4-200">`PROJECT` 은 다중 프로젝트 Visual Studio 솔루션에서 어떤 프로젝트를 사용할지를 Azure 배포를 지시하는 [KUDU 설정](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) 입니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-200">`PROJECT` is a [KUDU setting](https://github.com/projectkudu/kudu/wiki/Customizing-deployments) that tells Azure deployment which project to use in a multi-project Visual Studio solution.</span></span> <span data-ttu-id="059a4-201">소스 제어가 어떻게 구성되는지 나중에 설명하겠지만 ToDoApp 코드가 다중 프로젝트 Visual Studio 솔루션에 존재하므로 이 설정이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-201">I will show you later how source control is configured, but since the ToDoApp code is in a multi-project Visual Studio solution, we need this setting.</span></span>
* <span data-ttu-id="059a4-202">`clientUrl` 은 응용 프로그램 코드가 사용할 단순한 앱 설정입니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-202">`clientUrl` is simply an app setting that the application code uses.</span></span>

##### <a name="connection-strings"></a><span data-ttu-id="059a4-203">연결 문자열</span><span class="sxs-lookup"><span data-stu-id="059a4-203">Connection strings</span></span>
<span data-ttu-id="059a4-204">연결 문자열은 중첩된 리소스로 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-204">The connection strings are also defined as a nested resource.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-7-webappconnstr.png)

<span data-ttu-id="059a4-205">`config/connectionstrings`를 위한 `properties` 요소에서 각 연결 문자열은 `“<name>” : {“value”: “…”, “type”: “…”}`이라는 특정 형식을 가직 이름: 값 쌍으로 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-205">In the `properties` element for `config/connectionstrings`, each connection string is also defined as a name:value pair, with the specific format of `“<name>” : {“value”: “…”, “type”: “…”}`.</span></span> <span data-ttu-id="059a4-206">`type` 요소에 대해 가능한 값은 `MySql`, `SQLServer`, `SQLAzure`, 및 `Custom`입니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-206">For the `type` element, possible values are `MySql`, `SQLServer`, `SQLAzure`, and `Custom`.</span></span>

> [!TIP]
> <span data-ttu-id="059a4-207">연결 문자열 형식의 선언적 목록에 대해 Azure PowerShell에서 다음 명령을 실행합니다. \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span><span class="sxs-lookup"><span data-stu-id="059a4-207">For a definitive list of the connection string types, run the following command in Azure PowerShell: \[Enum]::GetNames("Microsoft.WindowsAzure.Commands.Utilities.Websites.Services.WebEntities.DatabaseType")</span></span>
> 
> 

##### <a name="source-control"></a><span data-ttu-id="059a4-208">소스 제어</span><span class="sxs-lookup"><span data-stu-id="059a4-208">Source control</span></span>
<span data-ttu-id="059a4-209">소스 제어 설정은 중첩된 리소스로 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-209">The source control settings are also defined as a nested resource.</span></span> <span data-ttu-id="059a4-210">JSON 파일을 처리하는 동안 Azure 리소스 관리자가 연속 게시를 구성하고 ( `IsManualIntegration` 나중에서 caveat을 참조) 자동으로 응용 프로그램 코드의 배포를 시작하려면 이 리소스를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-210">Azure Resource Manager uses this resource to configure continuous publishing (see caveat on `IsManualIntegration` later) and also to kick off the deployment of application code automatically during the processing of the JSON file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/examinejson-8-webappsourcecontrol.png)

<span data-ttu-id="059a4-211">`RepoUrl` 및 `branch`는 매우 직관적이어야 하며 Git 리포지토리와 게시하려는 분기의 이름을 가리켜야 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-211">`RepoUrl` and `branch` should be pretty intuitive and should point to the Git repository and the name of the branch to publish from.</span></span> <span data-ttu-id="059a4-212">다시, 입력 매개 변수에 의해 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-212">Again, these are defined by input parameters.</span></span> 

<span data-ttu-id="059a4-213">`dependsOn` 요소에서 웹 앱 리소스 자체 외에도 `sourcecontrols/web`는 `config/appsettings` 및 `config/connectionstrings`에 따라서 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-213">Note in the `dependsOn` element that, in addition to the web app resource itself, `sourcecontrols/web` also depends on `config/appsettings` and `config/connectionstrings`.</span></span> <span data-ttu-id="059a4-214">일단 `sourcecontrols/web` 가 구성되기 때문에 Azure 배포 프로세스는 응용 프로그램 코드를 자동으로 배포, 빌드 및 시작하려 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-214">This is because once `sourcecontrols/web` is configured, the Azure deployment process will automatically attempt to deploy, build, and start the application code.</span></span> <span data-ttu-id="059a4-215">따라서 이 종속성을 삽입하면 응용 프로그램 코드를 실행하기 전에 응용 프로그램이 필요한 앱 설정 및 연결 문자열에 액세스할 수 있는지 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-215">Therefore, inserting this dependency helps you make sure that the application has access to the required app settings and connection strings before the application code is run.</span></span> 

> [!NOTE]
> <span data-ttu-id="059a4-216">또한 `IsManualIntegration`은 `true`로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-216">Note also that `IsManualIntegration` is set to `true`.</span></span> <span data-ttu-id="059a4-217">실제로 GitHub 리포지토리를 소유하지 않기 때문에 [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp)에서 연속 게시를 구성할 권한을 Azure에 실제로 부여할 수 없기 때문에 이 자습서에서는 이 속성이 필요합니다(즉,</span><span class="sxs-lookup"><span data-stu-id="059a4-217">This property is necessary in this tutorial because you do not actually own the GitHub repository, and thus cannot actually grant permission to Azure to configure continuous publishing from [ToDoApp](https://github.com/azure-appservice-samples/ToDoApp) (i.e.</span></span> <span data-ttu-id="059a4-218">Azure에 자동 리포지토리 강제 업데이트).</span><span class="sxs-lookup"><span data-stu-id="059a4-218">push automatic repository updates to Azure).</span></span> <span data-ttu-id="059a4-219">이전에 [Azure portal](https://portal.azure.com/)에서 소유자의 GitHub 자격 증명을 사용하도록 구성한 경우에만 지정된 리포지토리에 기본값 `false`을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-219">You can use the default value `false` for the specified repository only if you have configured the owner’s GitHub credentials in the [Azure portal](https://portal.azure.com/) before.</span></span> <span data-ttu-id="059a4-220">즉, 이전에 [Azure Portal](https://portal.azure.com/)에서 사용자 자격 증명을 사용하여 모든 앱용 GitHub 또는 BitBucket에 대한 원본 제어를 설정하는 경우 Azure에서는 해당 자격 증명을 기억하고 이후에 GitHub 또는 BitBucket에서 모든 앱을 배포할 때마다 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-220">In other words, if you have set up source control to GitHub or BitBucket for any app in the [Azure Portal](https://portal.azure.com/) previously, using your user credentials, then Azure will remember the credentials and use them whenever you deploy any app from GitHub or BitBucket in the future.</span></span> <span data-ttu-id="059a4-221">그러나 이것을 미리 수행하지 않은 경우 Azure 리소스 관리자가 리포지토리 소유자의 자격 증명으로 GitHub 또는 BitBucket에 로그인할 수 없기 때문에 웹 앱의 소스 제어 설정을 구성할 때 JSON 템플릿 배포는 실패합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-221">However, if you haven’t done this already, deployment of the JSON template will fail when Azure Resource Manager tries to configure the web app’s source control settings because it cannot log into GitHub or BitBucket with the repository owner’s credentials.</span></span>
> 
> 

## <a name="compare-the-json-template-with-deployed-resource-group"></a><span data-ttu-id="059a4-222">배포된 리소스 그룹과 JSON 템플릿 비교</span><span class="sxs-lookup"><span data-stu-id="059a4-222">Compare the JSON template with deployed resource group</span></span>
<span data-ttu-id="059a4-223">[Azure 포털](https://portal.azure.com/)에서 모든 웹 앱의 블레이드를 진행할 수 있지만, 더 사용할 수 없는 경우 유용한 다른 도구가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-223">Here, you can go through all the web app’s blades in the [Azure Portal](https://portal.azure.com/), but there’s another tool that’s just as useful, if not more.</span></span> <span data-ttu-id="059a4-224">[Azure 리소스 탐색기](https://resources.azure.com) 미리 보기 도구로 이동하면 구독하는 모든 리소스 그룹이 Azure 백엔드에 실제로 존재하기에 그 JSON 표현을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-224">Go to the [Azure Resource Explorer](https://resources.azure.com) preview tool, which gives you a JSON representation of all the resource groups in your subscriptions, as they actually exist in the Azure backend.</span></span> <span data-ttu-id="059a4-225">Azure에서 리소스 그룹의 JSON 계층이 어떻게 그것을 만드는데 사용되는 템플릿 파일의 계층 구조와 일치하는지를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-225">You can also see how the resource group’s JSON hierarchy in Azure corresponds with the hierarchy in the template file that’s used to create it.</span></span>

<span data-ttu-id="059a4-226">예를 들어 [Azure 리소스 탐색기](https://resources.azure.com) 도구로 이동하고 탐색기에서 노드를 확장하는 경우 해당 리소스 형식에서 수집되는 리소스 그룹 및 루트 수준 리소스를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-226">For example, when I go to the [Azure Resource Explorer](https://resources.azure.com) tool and expand the nodes in the explorer, I can see the resource group and the root-level resources that are collected under their respective resource types.</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-1-treeview.png)

<span data-ttu-id="059a4-227">웹 앱으로 드릴다운하는 경우, 아래 스크린샷과 비슷한 웹 앱 구성 정보를 볼 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-227">If you drill down to a web app, you should be able to see web app configuration details similar to the below screenshot:</span></span>

![](./media/app-service-deploy-complex-application-predictably/ARM-2-jsonview.png)

<span data-ttu-id="059a4-228">다시, 중첩된 리소스는 JSON 템플릿 파일의 리소스와 계층 구조가 매우 유사해야 하고 JSON 창에 제대로 적용된 앱 설정, 연결 문자열 등을 볼 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-228">Again, the nested resources should have a hierarchy very similar to those in your JSON template file, and you should see the app settings, connection strings, etc., properly reflected in the JSON pane.</span></span> <span data-ttu-id="059a4-229">여기에 설정이 없는 경우 JSON 파일에 문제가 있을 수 있고 JSON 템플릿 파일의 문제를 해결하도록 돕습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-229">The absence of settings here may indicate an issue with your JSON file and can help you troubleshoot your JSON template file.</span></span>

## <a name="deploy-the-resource-group-template-yourself"></a><span data-ttu-id="059a4-230">리소스 그룹 템플릿을 직접 배포</span><span class="sxs-lookup"><span data-stu-id="059a4-230">Deploy the resource group template yourself</span></span>
<span data-ttu-id="059a4-231">**Azure에 배포** 단추는 유용하지만 GitHub에 azuredeploy.json를 이미 푸시한 경우에만 azuredeploy.json의 리소스 그룹 템플릿을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-231">The **Deploy to Azure** button is great, but it allows you to deploy the resource group template in azuredeploy.json only if you have already pushed azuredeploy.json to GitHub.</span></span> <span data-ttu-id="059a4-232">또한 Azure.NET SDK는 로컬 컴퓨터에서 직접 모든 JSON 템플릿 파일을 배포하는 도구를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-232">The Azure .NET SDK also provides the tools for you to deploy any JSON template file directly from your local machine.</span></span> <span data-ttu-id="059a4-233">이렇게 하려면 다음 단계를 수행하세요.</span><span class="sxs-lookup"><span data-stu-id="059a4-233">To do this, follow the steps below:</span></span>

1. <span data-ttu-id="059a4-234">Visual Studio에서 **파일** > **새로 만들기** > **프로젝트**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-234">In Visual Studio, click **File** > **New** > **Project**.</span></span>
2. <span data-ttu-id="059a4-235">**Visual C#** > **클라우드** > **Azure 리소스 그룹**을 클릭한 후에 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-235">Click **Visual C#** > **Cloud** > **Azure Resource Group**, then click **OK**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-1-vsproject.png)
3. <span data-ttu-id="059a4-236">**Azure 템플릿 선택**에서 **빈 템플릿**을 선택하고 **확인**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-236">In **Select Azure Template**, select **Blank Template** and click **OK**.</span></span>
4. <span data-ttu-id="059a4-237">Azuredeploy.json을 새 프로젝트의 **템플릿** 폴더로 끌어옵니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-237">Drag azuredeploy.json into the **Template** folder of your new project.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-2-copyjson.png)
5. <span data-ttu-id="059a4-238">솔루션 탐색기에서 복사한 azuredeploy.json를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-238">From Solution Explorer, open the copied azuredeploy.json.</span></span>
6. <span data-ttu-id="059a4-239">여기서는 설명을 위해 **리소스 추가**를 클릭하여 일부 표준  Application Insight 리소스를 JSON 파일에 추가해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-239">Just for the sake of the demonstration, let’s add some standard Application Insight resources to our JSON file, by clicking **Add Resource**.</span></span> <span data-ttu-id="059a4-240">JSON 파일 배포에 관심이 있다면 배포 단계를 건너뜁니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-240">If you’re just interested in deploying the JSON file, skip to the deploy steps.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-3-newresource.png)
7. <span data-ttu-id="059a4-241">**Web Apps용 Application Insights**를 선택한 다음 기존 App Service 계획 및 웹앱을 선택했는지 확인하고 **추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-241">Select **Application Insights for Web Apps**, then make sure an existing App Service plan and web app is selected, and then click **Add**.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-4-newappinsight.png)
   
   <span data-ttu-id="059a4-242">이제 리소스 및 그 역할에 따라 앱 서비스 계획 또는 웹 앱에 종속되는 여러 새 리소스를 볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-242">You’ll now be able to see several new resources that, depending on the resource and what it does, have dependencies on either the App Service plan or the web app.</span></span> <span data-ttu-id="059a4-243">이러한 리소스는 기존의 정의를 사용할 수 없고 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-243">These resources are not enabled by their existing definition and you’re going to change that.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-5-appinsightresources.png)
8. <span data-ttu-id="059a4-244">JSON 개요에서 JSON 코드에 강조를 표시하려면 **appInsights 자동 크기 조정** 을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-244">In the JSON Outline, click **appInsights AutoScale** to highlight its JSON code.</span></span> <span data-ttu-id="059a4-245">앱 서비스 계획용 크기 조정 설정입니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-245">This is the scaling setting for your App Service plan.</span></span>
9. <span data-ttu-id="059a4-246">강조 표시된 JSON 코드에서 `location` 및 `enabled` 속성을 찾아 아래와 같이 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-246">In the highlighted JSON code, locate the `location` and `enabled` properties and set them as shown below.</span></span>
   
   ![](./media/app-service-deploy-complex-application-predictably/deploy-6-autoscalesettings.png)
10. <span data-ttu-id="059a4-247">JSON 개요에서 JSON 코드에 강조를 표시하려면 **CPUHigh appInsights** 을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-247">In the JSON Outline, click **CPUHigh appInsights** to highlight its JSON code.</span></span> <span data-ttu-id="059a4-248">이것은 경고입니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-248">This is an alert.</span></span>
11. <span data-ttu-id="059a4-249">`location` 및 `isEnabled` 속성을 찾아 아래와 같이 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-249">Locate the `location` and `isEnabled` properties and set them as shown below.</span></span> <span data-ttu-id="059a4-250">다른 3 개의 경고(자주색 전구)에 대해 동일한 작업을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-250">Do the same for the other three alerts (purple bulbs).</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-7-alerts.png)
12. <span data-ttu-id="059a4-251">배포할 준비가 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-251">You’re now ready to deploy.</span></span> <span data-ttu-id="059a4-252">프로젝트를 마우스 오른쪽 단추로 클릭하고 **배포** > **New 배포ment**을 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="059a4-252">Right-click the project and select **Deploy** > **New Deployment**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-8-newdeployment.png)
13. <span data-ttu-id="059a4-253">아직 수행하지 않은 경우 Azure 계정에 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-253">Log into your Azure account if you haven’t already done so.</span></span>
14. <span data-ttu-id="059a4-254">구독에서 기존 리소스 그룹을 선택하거나 새 리소스 그룹을 만들고 **azuredeploy.json**을 클릭한 다음 **매개 변수 편집**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-254">Select an existing resource group in your subscription or create a new one, select **azuredeploy.json**, and then click **Edit Parameters**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-9-deployconfig.png)
    
    <span data-ttu-id="059a4-255">이제 좋은 테이블에서 템플릿 파일에 정의된 모든 매개 변수를 편집할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-255">You’ll now be able to edit all the parameters defined in the template file in a nice table.</span></span> <span data-ttu-id="059a4-256">기본값을 정의하는 매개 변수는 기본값이 이미 있고 허용된 값의 목록을 정의하는 매개 변수는 드롭다운으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-256">Parameters that define defaults will already have their default values, and parameters that define a list of allowed values will be shown as dropdowns.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-10-parametereditor.png)
15. <span data-ttu-id="059a4-257">모든 빈 매개 변수를 입력하고 [repoUrl](https://github.com/azure-appservice-samples/ToDoApp.git) 에서 **ToDoApp용 GitHub 리포지토리 주소**를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-257">Fill in all the empty parameters, and use the [GitHub repo address for ToDoApp](https://github.com/azure-appservice-samples/ToDoApp.git) in **repoUrl**.</span></span> <span data-ttu-id="059a4-258">그런 다음 **저장**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-258">Then, click **Save**.</span></span>
    
    ![](./media/app-service-deploy-complex-application-predictably/deploy-11-parametereditorfilled.png)
    
    > [!NOTE]
    > <span data-ttu-id="059a4-259">자동 크기 조정은 **표준** 계층 이상에서 제공되는 기능이며 계획 수준 경고는 **기본** 계층 이상에서 제공되는 기능입니다. 모든 새 App Insights 리소스를 켜서 확인하기 위해서는 **sku** 매개 변수를 **표준** 또는 **프리미엄**으로 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-259">Autoscaling is a feature offered in **Standard** tier or higher, and plan-level alerts are features offered in **Basic** tier or higher, you’ll need to set the **sku** parameter to **Standard** or **Premium** in order to see all your new App Insights resources light up.</span></span>
    > 
    > 
16. <span data-ttu-id="059a4-260">**배포**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-260">Click **Deploy**.</span></span> <span data-ttu-id="059a4-261">**암호 저장**을 선택한 경우, 암호가 **일반 텍스트에서** 매개 변수 파일에 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-261">If you selected **Save passwords**, the password will be saved in the parameter file **in plain text**.</span></span> <span data-ttu-id="059a4-262">그렇지 않은 경우 배포 프로세스 중에 데이터베이스 암호를 입력하라는 메시지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-262">Otherwise, you’ll be asked to input the database password during the deployment process.</span></span>

<span data-ttu-id="059a4-263">끝났습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-263">That’s it!</span></span> <span data-ttu-id="059a4-264">이제 응용 프로그램에 배포된 JSON에 추가된 도구를 새 경고 및 자동 크기 조정 설정을 보기 위해 [Azure Portal](https://portal.azure.com/) 및 [Azure 리소스 탐색기](https://resources.azure.com) 도구로 이동해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-264">Now you just need to go to the [Azure Portal](https://portal.azure.com/) and the [Azure Resource Explorer](https://resources.azure.com) tool to see the new alerts and autoscale settings added to your JSON deployed application.</span></span>

<span data-ttu-id="059a4-265">이 섹션의 단계에서 주로 다음을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-265">Your steps in this section mainly accomplished the following:</span></span>

1. <span data-ttu-id="059a4-266">템플릿 파일 만들기</span><span class="sxs-lookup"><span data-stu-id="059a4-266">Prepared the template file</span></span>
2. <span data-ttu-id="059a4-267">템플릿 파일에 맞는 매개 변수 파일 생성</span><span class="sxs-lookup"><span data-stu-id="059a4-267">Created a parameter file to go with the template file</span></span>
3. <span data-ttu-id="059a4-268">매개 변수 파일로 템플릿 파일 배포</span><span class="sxs-lookup"><span data-stu-id="059a4-268">Deployed the template file with the parameter file</span></span>

<span data-ttu-id="059a4-269">마지막 단계는 PowerShell cmdlet이 쉽게 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-269">The last step is easily done by a PowerShell cmdlet.</span></span> <span data-ttu-id="059a4-270">응용 프로그램을 배포하는 경우 Visual Studio의 역할을 참고하려면 Scripts\Deploy AzureResourceGroup.ps1를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-270">To see what Visual Studio did when it deployed your application, open Scripts\Deploy-AzureResourceGroup.ps1.</span></span> <span data-ttu-id="059a4-271">여기에 코드가 많지만 매개 변수 파일로 템플릿 파일을 배포하기 위해 필요한 모든 관련 코드에 강조를 표시하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-271">There’s a lot of code there, but I’m just going to highlight all the pertinent code you need to deploy the template file with the parameter file.</span></span>

![](./media/app-service-deploy-complex-application-predictably/deploy-12-powershellsnippet.png)

<span data-ttu-id="059a4-272">마지막 cmdlet인 `New-AzureResourceGroup`은 실제로 작업을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-272">The last cmdlet, `New-AzureResourceGroup`, is the one that actually performs the action.</span></span> <span data-ttu-id="059a4-273">이로써 도구를 통해 예측 가능한 방식으로 클라우드 응용 프로그램을 배포하는 것을 비교적 간단하게 시연해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-273">All this should demonstrate to you that, with the help of tooling, it is relatively straightforward to deploy your cloud application predictably.</span></span> <span data-ttu-id="059a4-274">cmdlet를 실행할 때마다 동일한 템플릿에서 동일한 매개 변수 파일로 동일한 결과를 얻어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-274">Every time you run the cmdlet on the same template with the same parameter file, you’re going to get the same result.</span></span>

## <a name="summary"></a><span data-ttu-id="059a4-275">요약</span><span class="sxs-lookup"><span data-stu-id="059a4-275">Summary</span></span>
<span data-ttu-id="059a4-276">DevOps에서 반복성 및 예측 가능성은 마이크로 서비스로 구성하는 확장성이 뛰어난 응용 프로그램의 모든 성공적인 배포의 열쇠입니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-276">In DevOps, repeatability and predictability are keys to any successful deployment of a high-scale application composed of microservices.</span></span> <span data-ttu-id="059a4-277">이 자습서에서는 Azure 리소스 관리자 템플릿을 사용하여 Azure에 단일 리소스 그룹으로 두 microservies 응용 프로그램을 배포했습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-277">In this tutorial, you have deployed a two-microservice application to Azure as a single resource group using the Azure Resource Manager template.</span></span> <span data-ttu-id="059a4-278">응용 프로그램을 템플릿으로 변환하고 예측 가능한 방식으로 프로비전하고 배포하기 위해 필요한 정보를 제공했습니다.</span><span class="sxs-lookup"><span data-stu-id="059a4-278">Hopefully, it has given you the knowledge you need in order to start converting your application in Azure into a template and can provision and deploy it predictably.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="059a4-279">다음 단계</span><span class="sxs-lookup"><span data-stu-id="059a4-279">Next Steps</span></span>
<span data-ttu-id="059a4-280">[agile 방법론을 적용하고 지속적으로 마이크로 서비스 응용 프로그램 및 와 같은 고급 배포 기술을 쉽게 게시](app-service-agile-software-development.md)하는 방법을 알아봅니다 [플라이팅 배포](app-service-web-test-in-production-controlled-test-flight.md).</span><span class="sxs-lookup"><span data-stu-id="059a4-280">Find out how to [apply agile methodologies and continuously publish your microservices application with ease](app-service-agile-software-development.md) and advanced deployment techniques like [flighting deployment](app-service-web-test-in-production-controlled-test-flight.md) easily.</span></span>

<a name="resources"></a>

## <a name="more-resources"></a><span data-ttu-id="059a4-281">추가 리소스</span><span class="sxs-lookup"><span data-stu-id="059a4-281">More resources</span></span>
* [<span data-ttu-id="059a4-282">Azure 리소스 관리자 템플릿 언어</span><span class="sxs-lookup"><span data-stu-id="059a4-282">Azure Resource Manager Template Language</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="059a4-283">Azure 리소스 관리자 템플릿 작성</span><span class="sxs-lookup"><span data-stu-id="059a4-283">Authoring Azure Resource Manager Templates</span></span>](../azure-resource-manager/resource-group-authoring-templates.md)
* [<span data-ttu-id="059a4-284">Azure 리소스 관리자 템플릿 함수</span><span class="sxs-lookup"><span data-stu-id="059a4-284">Azure Resource Manager Template Functions</span></span>](../azure-resource-manager/resource-group-template-functions.md)
* [<span data-ttu-id="059a4-285">Azure 리소스 관리자 템플릿으로 응용 프로그램 배포</span><span class="sxs-lookup"><span data-stu-id="059a4-285">Deploy an application with Azure Resource Manager template</span></span>](../azure-resource-manager/resource-group-template-deploy.md)
* [<span data-ttu-id="059a4-286">Azure 리소스 관리자로 Azure PowerShell 사용</span><span class="sxs-lookup"><span data-stu-id="059a4-286">Using Azure PowerShell with Azure Resource Manager</span></span>](../azure-resource-manager/powershell-azure-resource-manager.md)
* [<span data-ttu-id="059a4-287">Azure에서 리소스 그룹 배포 문제 해결</span><span class="sxs-lookup"><span data-stu-id="059a4-287">Troubleshooting Resource Group Deployments in Azure</span></span>](../azure-resource-manager/resource-manager-common-deployment-errors.md)

