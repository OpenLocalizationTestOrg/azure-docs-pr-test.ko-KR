---
title: "aaaAzure 트래픽 관리자 끝점 모니터링 | Microsoft Docs"
description: "트래픽 관리자 끝점 모니터링 및 끝점 자동 장애 조치 toohelp Azure 사용 하는 방법을 이해 하는 데이 문서가 도움이 수 가용성이 높은 응용 프로그램을 배포 하는 고객"
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: fff25ac3-d13a-4af9-8916-7c72e3d64bc7
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/22/2017
ms.author: kumud
ms.openlocfilehash: b4862499c88bdb1951833d06199b034a07ac7576
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-endpoint-monitoring"></a><span data-ttu-id="8578a-103">Traffic Manager 끝점 모니터링</span><span class="sxs-lookup"><span data-stu-id="8578a-103">Traffic Manager endpoint monitoring</span></span>

<span data-ttu-id="8578a-104">Azure Traffic Manager에는 기본 제공된 끝점 모니터링 및 자동 끝점 장애 조치가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-104">Azure Traffic Manager includes built-in endpoint monitoring and automatic endpoint failover.</span></span> <span data-ttu-id="8578a-105">이 기능을 사용 하 여 Azure 지역 실패를 포함 하 여 복원 력 있는 tooendpoint 오류가 있는 가용성이 높은 응용 프로그램을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-105">This feature helps you deliver high-availability applications that are resilient tooendpoint failure, including Azure region failures.</span></span>

## <a name="configure-endpoint-monitoring"></a><span data-ttu-id="8578a-106">끝점 모니터링 구성</span><span class="sxs-lookup"><span data-stu-id="8578a-106">Configure endpoint monitoring</span></span>

<span data-ttu-id="8578a-107">tooconfigure 끝점 모니터링 hello에 나오는 설정에 따라 트래픽 관리자 프로필을 지정 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-107">tooconfigure endpoint monitoring, you must specify hello following settings on your Traffic Manager profile:</span></span>

* <span data-ttu-id="8578a-108">**프로토콜**.</span><span class="sxs-lookup"><span data-stu-id="8578a-108">**Protocol**.</span></span> <span data-ttu-id="8578a-109">HTTP, HTTPS 또는 TCP으로 선택 트래픽 관리자 끝점 toocheck를 검색할 때 사용 하는 hello 프로토콜의 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-109">Choose HTTP, HTTPS, or TCP as hello protocol that Traffic Manager uses when probing your endpoint toocheck its health.</span></span> <span data-ttu-id="8578a-110">HTTPS 모니터링 해도 해당 hello 검사-유효한 SSL 인증서가 있는지 여부를 확인 하지 않으므로 인증서가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-110">HTTPS monitoring does not verify whether your SSL certificate is valid--it only checks that hello certificate is present.</span></span>
* <span data-ttu-id="8578a-111">**포트**.</span><span class="sxs-lookup"><span data-stu-id="8578a-111">**Port**.</span></span> <span data-ttu-id="8578a-112">Hello 요청에 사용 되는 hello 포트를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-112">Choose hello port used for hello request.</span></span>
* <span data-ttu-id="8578a-113">**경로**.</span><span class="sxs-lookup"><span data-stu-id="8578a-113">**Path**.</span></span> <span data-ttu-id="8578a-114">이 구성 설정을 지정 하 여 hello 경로 설정을 반드시 hello HTTP 및 HTTPS 프로토콜에 대해서만 유효 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-114">This configuration setting is valid only for hello HTTP and HTTPS protocols, for which specifying hello path setting is required.</span></span> <span data-ttu-id="8578a-115">Hello TCP 모니터링 프로토콜 오류가 발생에 대해이 설정을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-115">Providing this setting for hello TCP monitoring protocol results in an error.</span></span> <span data-ttu-id="8578a-116">TCP 프로토콜에 대 한 hello 상대 경로 및 제공 hello 웹 페이지 또는 hello 파일의 hello 이름을 해당 hello 액세스를 모니터링 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-116">For TCP protocol, give hello relative path and hello name of hello webpage or hello file that hello monitoring accesses.</span></span> <span data-ttu-id="8578a-117">슬래시 (/)은 유효한 항목 hello 상대 경로입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-117">A forward slash (/) is a valid entry for hello relative path.</span></span> <span data-ttu-id="8578a-118">이 값 hello이 파일은 hello 루트 디렉터리 (기본값)를 의미 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-118">This value implies that hello file is in hello root directory (default).</span></span>
* <span data-ttu-id="8578a-119">**검색 간격**.</span><span class="sxs-lookup"><span data-stu-id="8578a-119">**Probing Interval**.</span></span> <span data-ttu-id="8578a-120">이 값은 Traffic Manager 검색 에이전트에서 끝점의 상태를 검사하는 빈도를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-120">This value specifies how often an endpoint is checked for its health from a Traffic Manager probing agent.</span></span> <span data-ttu-id="8578a-121">여기서 30초(일반 검색) 및 10초(빠른 검색)의 두 값을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-121">You can specify two values here: 30 seconds (normal probing) and 10 seconds (fast probing).</span></span> <span data-ttu-id="8578a-122">지정 된 값이 없으면 hello 프로필 30 초의 tooa 기본값을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-122">If no values are provided, hello profile sets tooa default value of 30 seconds.</span></span> <span data-ttu-id="8578a-123">Hello 방문 [트래픽 관리자 가격 책정](https://azure.microsoft.com/pricing/details/traffic-manager) 빠른 검색 가격에 대 한 더 많은 페이지 toolearn 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-123">Visit hello [Traffic Manager Pricing](https://azure.microsoft.com/pricing/details/traffic-manager) page toolearn more about fast probing pricing.</span></span>
* <span data-ttu-id="8578a-124">**허용되는 오류 수**</span><span class="sxs-lookup"><span data-stu-id="8578a-124">**Tolerated Number of Failures**.</span></span> <span data-ttu-id="8578a-125">이 값은 Traffic Manager 검색 에이전트가 해당 끝점을 비정상 상태로 표시하기 전에 허용하는 오류 수를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-125">This value specifies how many failures a Traffic Manager probing agent tolerates before marking that endpoint as unhealthy.</span></span> <span data-ttu-id="8578a-126">해당 값의 범위는 0에서 9 사이일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-126">Its value can range between 0 and 9.</span></span> <span data-ttu-id="8578a-127">값이 0 이면 단일 모니터링 오류 비정상으로 표시 하는 끝점 toobe를 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-127">A value of 0 means a single monitoring failure can cause that endpoint toobe marked as unhealthy.</span></span> <span data-ttu-id="8578a-128">없는 값을 지정 하는 경우 3의 hello 기본값을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-128">If no value is specified, it uses hello default value of 3.</span></span>
* <span data-ttu-id="8578a-129">**모니터링 제한 시간**.</span><span class="sxs-lookup"><span data-stu-id="8578a-129">**Monitoring Timeout**.</span></span> <span data-ttu-id="8578a-130">이 속성의 상태 검사 검색 toohello 끝점에 전송 될 때 오류를 확인 하는 트래픽 관리자 검색 에이전트 고려 하기 전에 대기할 시간 hello hello 크기를 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-130">This property specifies hello amount of time hello Traffic Manager probing agent should wait before considering that check a failure when a health check probe is sent toohello endpoint.</span></span> <span data-ttu-id="8578a-131">이면 too30 초 다음 검색 간격을 설정 하는 hello 5-10 초 사이의 hello 제한 시간 값을 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-131">If hello Probing Interval is set too30 seconds, then you can set hello Timeout value between 5 and 10 seconds.</span></span> <span data-ttu-id="8578a-132">값을 지정하지 않으면 기본값 10초가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-132">If no value is specified, it uses a default value of 10 seconds.</span></span> <span data-ttu-id="8578a-133">이면 too10 초 다음 검색 간격을 설정 하는 hello 5에서 9 초 사이의 hello 제한 시간 값을 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-133">If hello Probing Interval is set too10 seconds, then you can set hello Timeout value between 5 and 9 seconds.</span></span> <span data-ttu-id="8578a-134">제한 시간 값을 지정하지 않으면 기본값 9초가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-134">If no Timeout value is specified, it uses a default value of 9 seconds.</span></span>

![Traffic Manager 끝점 모니터링](./media/traffic-manager-monitoring/endpoint-monitoring-settings.png)

<span data-ttu-id="8578a-136">**그림 1: Traffic Manager 끝점 모니터링**</span><span class="sxs-lookup"><span data-stu-id="8578a-136">**Figure 1:  Traffic Manager endpoint monitoring**</span></span>

## <a name="how-endpoint-monitoring-works"></a><span data-ttu-id="8578a-137">끝점 모니터링의 작동 방식</span><span class="sxs-lookup"><span data-stu-id="8578a-137">How endpoint monitoring works</span></span>

<span data-ttu-id="8578a-138">프로토콜을 모니터링 하는 hello HTTP 또는 HTTPS로 설정 되어 hello 트래픽 관리자 검색 에이전트는 hello 프로토콜, 포트 및 지정한 상대 경로 사용 하는 GET 요청 toohello 끝점을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-138">If hello monitoring protocol is set as HTTP or HTTPS, hello Traffic Manager probing agent makes a GET request toohello endpoint using hello protocol, port, and relative path given.</span></span> <span data-ttu-id="8578a-139">200-OK 응답이 반환되면 해당 끝점은 정상 상태로 간주됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-139">If it gets back a 200-OK response, then that endpoint is considered healthy.</span></span> <span data-ttu-id="8578a-140">또는 hello 응답이 다른 값을 지정 하는 hello 제한 시간 내에 수신 된 응답이 없는 경우, hello 트래픽 관리자 에이전트를 검색 합니다. 다시 시도 (없음 다시 시도 작업을 마쳤으면이 설정을 0 이면) toohello 실패의 수 트랜잭션당 설정에 따라 .</span><span class="sxs-lookup"><span data-stu-id="8578a-140">If hello response is a different value, or, if no response is received within hello timeout period specified, then hello Traffic Manager probing agent re-attempts according toohello Tolerated Number of Failures setting (no re-attempts are done if this setting is 0).</span></span> <span data-ttu-id="8578a-141">연속 실패 횟수 hello hello 실패의 수 트랜잭션당 설정 보다 높은 경우 해당 끝점이 비정상으로 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-141">If hello number of consecutive failures is higher than hello Tolerated Number of Failures setting, then that endpoint is marked as unhealthy.</span></span> 

<span data-ttu-id="8578a-142">TCP 프로토콜을 모니터링 하는 hello을 사용 하는 경우 hello 트래픽 관리자 검색 에이전트는 지정 된 hello 포트를 사용 하 여 TCP 연결 요청을 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-142">If hello monitoring protocol is TCP, hello Traffic Manager probing agent initiates a TCP connection request using hello port specified.</span></span> <span data-ttu-id="8578a-143">Hello 끝점 응답 toohello 요청 응답 tooestablish hello 연결을 통해 상태 검사를 성공으로 표시 되어 및 hello 트래픽 관리자 검색 에이전트 hello TCP 연결이 다시 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-143">If hello endpoint responds toohello request with a response tooestablish hello connection, that health check is marked as a success and hello Traffic Manager probing agent resets hello TCP connection.</span></span> <span data-ttu-id="8578a-144">다른 값을가 하는 hello 응답 또는 내에서 수신 된 응답이 없는 경우 hello 제한 시간 지정 hello toohello 실패의 트랜잭션당 수 설정 (다시 시도 하지는이 설정을 0 이면)에 따라 트래픽 관리자 에이전트를 검색 합니다. 다시 시도 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-144">If hello response is a different value, or if no response is received within hello timeout period specified, hello Traffic Manager probing agent re-attempts according toohello Tolerated Number of Failures setting (no re-attempts are made if this setting is 0).</span></span> <span data-ttu-id="8578a-145">연속 실패 횟수 hello hello 실패의 수 트랜잭션당 설정 보다 크면 해당 끝점이 비정상으로 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-145">If hello number of consecutive failures is higher than hello Tolerated Number of Failures setting, then that endpoint is marked unhealthy.</span></span>

<span data-ttu-id="8578a-146">모든 경우에 여러 위치에서 트래픽 관리자를 조사 하 고 각 지역 내에서 발생 하는 hello 연속 된 실패를 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-146">In all cases, Traffic Manager probes from multiple locations and hello consecutive failure determination happens within each region.</span></span> <span data-ttu-id="8578a-147">즉, 끝점은 받게 됨 상태 검색이 트래픽 관리자에서 검색 간격에 사용 되는 hello 설정 보다 높은 빈도로 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-147">This also means that endpoints are receiving health probes from Traffic Manager with a higher frequency than hello setting used for Probing Interval.</span></span>

>[!NOTE]
><span data-ttu-id="8578a-148">HTTP 또는 HTTPS 프로토콜을 모니터링에 대 한 일반적인 hello 끝점 쪽 방법은 tooimplement 응용 프로그램-예를 들어 /health.aspx 내에서 사용자 지정 페이지입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-148">For HTTP or HTTPS monitoring protocol, a common practice on hello endpoint side is tooimplement a custom page within your application - for example, /health.aspx.</span></span> <span data-ttu-id="8578a-149">이 경로를 모니터링에 사용하여 성능 카운터 검사 또는 데이터베이스 가용성 확인과 같은 응용 프로그램별 검사를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-149">Using this path for monitoring, you can perform application-specific checks, such as checking performance counters or verifying database availability.</span></span> <span data-ttu-id="8578a-150">이러한 사용자 지정 검사에 따라, hello 페이지는 적절 한 HTTP 상태 코드를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-150">Based on these custom checks, hello page returns an appropriate HTTP status code.</span></span>

<span data-ttu-id="8578a-151">Traffic Manager 프로필의 모든 끝점은 모니터링 설정을 공유합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-151">All endpoints in a Traffic Manager profile share monitoring settings.</span></span> <span data-ttu-id="8578a-152">만들 수 있습니다 toouse를 서로 다른 끝점에 대 한 모니터링 설정을 다른 해야 할 경우 [트래픽 관리자 프로필을 중첩](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings)합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-152">If you need toouse different monitoring settings for different endpoints, you can create [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span></span>

## <a name="endpoint-and-profile-status"></a><span data-ttu-id="8578a-153">끝점 및 프로필 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-153">Endpoint and profile status</span></span>

<span data-ttu-id="8578a-154">Traffic Manager 프로필 및 끝점을 사용하거나 사용하지 않도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-154">You can enable and disable Traffic Manager profiles and endpoints.</span></span> <span data-ttu-id="8578a-155">그러나 Traffic Manager의 자동 설정 및 프로세스에 따라 끝점 상태가 변경될 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-155">However, a change in endpoint status also might occur as a result of Traffic Manager automated settings and processes.</span></span>

### <a name="endpoint-status"></a><span data-ttu-id="8578a-156">끝점 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-156">Endpoint status</span></span>

<span data-ttu-id="8578a-157">특정 끝점을 사용하거나 사용하지 않도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-157">You can enable or disable a specific endpoint.</span></span> <span data-ttu-id="8578a-158">hello 기본 서비스에 있는 경우일 수 정상, 영향을 받지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-158">hello underlying service, which might still be healthy, is unaffected.</span></span> <span data-ttu-id="8578a-159">변경 hello 끝점 상태 컨트롤 hello hello 트래픽 관리자 프로필에서에서 hello 끝점의 가용성입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-159">Changing hello endpoint status controls hello availability of hello endpoint in hello Traffic Manager profile.</span></span> <span data-ttu-id="8578a-160">끝점 상태를 사용 하지 않도록 설정 하는 경우 트래픽 관리자가 해당 상태를 확인 하지 및 hello 끝점 DNS 응답에 포함 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-160">When an endpoint status is disabled, Traffic Manager does not check its health and hello endpoint is not included in a DNS response.</span></span>

### <a name="profile-status"></a><span data-ttu-id="8578a-161">프로필 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-161">Profile status</span></span>

<span data-ttu-id="8578a-162">Hello 프로필 상태 설정을 사용 하거나 설정할 수 있습니다 특정 프로필을 사용 하지 않도록 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-162">Using hello profile status setting, you can enable or disable a specific profile.</span></span> <span data-ttu-id="8578a-163">끝점 상태는 단일 끝점에 영향을 주는 동안 프로필 상태 모든 끝점을 포함 하는 hello 전체 프로필을 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-163">While endpoint status affects a single endpoint, profile status affects hello entire profile, including all endpoints.</span></span> <span data-ttu-id="8578a-164">프로필을 사용 하지 않도록 설정 하면 hello 끝점 상태에 대 한 확인 되지 않습니다 하 고 끝점을 하나도 DNS 응답에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-164">When you disable a profile, hello endpoints are not checked for health and no endpoints are included in a DNS response.</span></span> <span data-ttu-id="8578a-165">[NXDOMAIN](https://tools.ietf.org/html/rfc2308) hello DNS 쿼리에 대 한 응답 코드가 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-165">An [NXDOMAIN](https://tools.ietf.org/html/rfc2308) response code is returned for hello DNS query.</span></span>

### <a name="endpoint-monitor-status"></a><span data-ttu-id="8578a-166">끝점 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-166">Endpoint monitor status</span></span>

<span data-ttu-id="8578a-167">끝점 모니터 상태 hello 끝점의 hello 상태를 표시 하는 트래픽 관리자에서 생성 된 값입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-167">Endpoint monitor status is a Traffic Manager-generated value that shows hello status of hello endpoint.</span></span> <span data-ttu-id="8578a-168">이 설정은 수동으로 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-168">You cannot change this setting manually.</span></span> <span data-ttu-id="8578a-169">hello 끝점 모니터 상태는 끝점 모니터링의 hello 결과의 조합 및 hello 구성 된 끝점 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-169">hello endpoint monitor status is a combination of hello results of endpoint monitoring and hello configured endpoint status.</span></span> <span data-ttu-id="8578a-170">끝점 모니터 상태의 hello 가능한 값은 다음 표에 hello에 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-170">hello possible values of endpoint monitor status are shown in hello following table:</span></span>

| <span data-ttu-id="8578a-171">프로필 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-171">Profile status</span></span> | <span data-ttu-id="8578a-172">끝점 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-172">Endpoint status</span></span> | <span data-ttu-id="8578a-173">끝점 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-173">Endpoint monitor status</span></span> | <span data-ttu-id="8578a-174">참고 사항</span><span class="sxs-lookup"><span data-stu-id="8578a-174">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="8578a-175">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="8578a-175">Disabled</span></span> |<span data-ttu-id="8578a-176">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-176">Enabled</span></span> |<span data-ttu-id="8578a-177">비활성</span><span class="sxs-lookup"><span data-stu-id="8578a-177">Inactive</span></span> |<span data-ttu-id="8578a-178">hello 프로필에 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-178">hello profile has been disabled.</span></span> <span data-ttu-id="8578a-179">Hello 끝점 상태 활성화 되어 있지만 hello 프로필 상태 (사용 안 함) 우선적으로 적용 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-179">Although hello endpoint status is Enabled, hello profile status (Disabled) takes precedence.</span></span> <span data-ttu-id="8578a-180">Disabled 프로필의 끝점은 모니터링되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-180">Endpoints in disabled profiles are not monitored.</span></span> <span data-ttu-id="8578a-181">Hello DNS 쿼리에 대 한 NXDOMAIN 응답 코드가 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-181">An NXDOMAIN response code is returned for hello DNS query.</span></span> |
| <span data-ttu-id="8578a-182">&lt;일부&gt;</span><span class="sxs-lookup"><span data-stu-id="8578a-182">&lt;any&gt;</span></span> |<span data-ttu-id="8578a-183">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="8578a-183">Disabled</span></span> |<span data-ttu-id="8578a-184">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="8578a-184">Disabled</span></span> |<span data-ttu-id="8578a-185">hello 끝점에 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-185">hello endpoint has been disabled.</span></span> <span data-ttu-id="8578a-186">사용하지 않도록 설정된 끝점이 모니터링되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-186">Disabled endpoints are not monitored.</span></span> <span data-ttu-id="8578a-187">hello 끝점 DNS 응답에 포함 되지 않은, 따라서 트래픽을 수신 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-187">hello endpoint is not included in DNS responses, therefore, it does not receive traffic.</span></span> |
| <span data-ttu-id="8578a-188">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-188">Enabled</span></span> |<span data-ttu-id="8578a-189">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-189">Enabled</span></span> |<span data-ttu-id="8578a-190">온라인</span><span class="sxs-lookup"><span data-stu-id="8578a-190">Online</span></span> |<span data-ttu-id="8578a-191">hello 끝점을 모니터링 하 고 정상 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-191">hello endpoint is monitored and is healthy.</span></span> <span data-ttu-id="8578a-192">DNS 응답에 포함되며 트래픽을 수신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-192">It is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="8578a-193">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-193">Enabled</span></span> |<span data-ttu-id="8578a-194">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-194">Enabled</span></span> |<span data-ttu-id="8578a-195">성능 저하됨</span><span class="sxs-lookup"><span data-stu-id="8578a-195">Degraded</span></span> |<span data-ttu-id="8578a-196">끝점 모니터링 상태 검사에 실패했습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-196">Endpoint monitoring health checks are failing.</span></span> <span data-ttu-id="8578a-197">hello 끝점 DNS 응답에 포함 되지 않은 하 고 트래픽을 받지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-197">hello endpoint is not included in DNS responses and does not receive traffic.</span></span> <br><span data-ttu-id="8578a-198">예외 toothis 이면 모든 끝점이 저하 된 경우는 쿼리에서 모두는 것으로 간주 toobe hello 쿼리 응답에 반환).</span><span class="sxs-lookup"><span data-stu-id="8578a-198">An exception toothis is if all endpoints are degraded, in which case all of them are considered toobe returned in hello query response).</span></span></br>|
| <span data-ttu-id="8578a-199">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-199">Enabled</span></span> |<span data-ttu-id="8578a-200">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-200">Enabled</span></span> |<span data-ttu-id="8578a-201">CheckingEndpoint</span><span class="sxs-lookup"><span data-stu-id="8578a-201">CheckingEndpoint</span></span> |<span data-ttu-id="8578a-202">hello 끝점 모니터링 되 고 있지만 hello hello 첫 번째 검색 결과가 아직 수신 되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-202">hello endpoint is monitored, but hello results of hello first probe have not been received yet.</span></span> <span data-ttu-id="8578a-203">CheckingEndpoint는 일반적으로 바로 뒤에 추가 하거나 hello 프로필의 끝점을 사용 하도록 설정 하는 임시 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-203">CheckingEndpoint is a temporary state that usually occurs immediately after adding or enabling an endpoint in hello profile.</span></span> <span data-ttu-id="8578a-204">이 상태의 끝점은 DNS 응답에 포함되며 트래픽을 수신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-204">An endpoint in this state is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="8578a-205">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-205">Enabled</span></span> |<span data-ttu-id="8578a-206">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-206">Enabled</span></span> |<span data-ttu-id="8578a-207">중지됨</span><span class="sxs-lookup"><span data-stu-id="8578a-207">Stopped</span></span> |<span data-ttu-id="8578a-208">hello 클라우드 서비스 또는 웹 응용 프로그램 실행 되 고 있지 끝점 포인트 toois hello입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-208">hello cloud service or web app that hello endpoint points toois not running.</span></span> <span data-ttu-id="8578a-209">Hello 클라우드 서비스나 웹 응용 프로그램 설정을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-209">Check hello cloud service or web app settings.</span></span> <span data-ttu-id="8578a-210">이 hello 끝점 인지 중첩 된 끝점을 입력 하 고 hello 자식 프로필 사용 되지 않는지 또는 비활성 상태인 경우도 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-210">This can also happen if hello endpoint is of type nested endpoint and hello child profile is disabled or is inactive.</span></span> <br><span data-ttu-id="8578a-211">Stopped 상태의 끝점은 모니터링되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-211">An endpoint with a Stopped status is not monitored.</span></span> <span data-ttu-id="8578a-212">DNS 응답에 포함되지 않으며 트래픽을 수신하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-212">It is not included in DNS responses and does not receive traffic.</span></span> <span data-ttu-id="8578a-213">예외 toothis 모든 끝점이 저하 된 경우 이러한 모든 값으로 간주 됩니다 toobe hello 쿼리 응답에 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-213">An exception toothis is if all endpoints are degraded, in which case all of them will be considered toobe returned in hello query response.</span></span></br>|

<span data-ttu-id="8578a-214">중첩된 끝점의 끝점 모니터 상태가 계산되는 방식에 대한 자세한 내용은 [중첩 Traffic Manager 프로필](traffic-manager-nested-profiles.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8578a-214">For details about how endpoint monitor status is calculated for nested endpoints, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

### <a name="profile-monitor-status"></a><span data-ttu-id="8578a-215">프로필 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-215">Profile monitor status</span></span>

<span data-ttu-id="8578a-216">hello 프로필 모니터 상태는 hello 구성 프로필 상태 및 모든 끝점에 대 한 hello 끝점 모니터 상태 값의 조합입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-216">hello profile monitor status is a combination of hello configured profile status and hello endpoint monitor status values for all endpoints.</span></span> <span data-ttu-id="8578a-217">가능한 값 hello hello 다음 표에 설명 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-217">hello possible values are described in hello following table:</span></span>

| <span data-ttu-id="8578a-218">프로필 상태(구성된 대로)</span><span class="sxs-lookup"><span data-stu-id="8578a-218">Profile status (as configured)</span></span> | <span data-ttu-id="8578a-219">끝점 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-219">Endpoint monitor status</span></span> | <span data-ttu-id="8578a-220">프로필 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="8578a-220">Profile monitor status</span></span> | <span data-ttu-id="8578a-221">참고 사항</span><span class="sxs-lookup"><span data-stu-id="8578a-221">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="8578a-222">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="8578a-222">Disabled</span></span> |<span data-ttu-id="8578a-223">&lt;일부&gt; 또는 정의된 끝점이 없는 프로필</span><span class="sxs-lookup"><span data-stu-id="8578a-223">&lt;any&gt; or a profile with no defined endpoints.</span></span> |<span data-ttu-id="8578a-224">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="8578a-224">Disabled</span></span> |<span data-ttu-id="8578a-225">hello 프로필에 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-225">hello profile has been disabled.</span></span> |
| <span data-ttu-id="8578a-226">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-226">Enabled</span></span> |<span data-ttu-id="8578a-227">하나 이상의 끝점의 hello 상태 저하 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-227">hello status of at least one endpoint is Degraded.</span></span> |<span data-ttu-id="8578a-228">성능 저하됨</span><span class="sxs-lookup"><span data-stu-id="8578a-228">Degraded</span></span> |<span data-ttu-id="8578a-229">Hello 개별 끝점 상태 값 toodetermine 끝점 주의가 필요를 검토 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-229">Review hello individual endpoint status values toodetermine which endpoints require further attention.</span></span> |
| <span data-ttu-id="8578a-230">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-230">Enabled</span></span> |<span data-ttu-id="8578a-231">하나 이상의 끝점의 hello 상태는 온라인입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-231">hello status of at least one endpoint is Online.</span></span> <span data-ttu-id="8578a-232">Degraded 상태의 끝점이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-232">No endpoints have a Degraded status.</span></span> |<span data-ttu-id="8578a-233">온라인</span><span class="sxs-lookup"><span data-stu-id="8578a-233">Online</span></span> |<span data-ttu-id="8578a-234">hello 서비스가 트래픽을 받아들이고 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-234">hello service is accepting traffic.</span></span> <span data-ttu-id="8578a-235">별도의 작업이 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-235">No further action is required.</span></span> |
| <span data-ttu-id="8578a-236">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-236">Enabled</span></span> |<span data-ttu-id="8578a-237">hello 하나 이상의 끝점 상태가 CheckingEndpoint 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-237">hello status of at least one endpoint is CheckingEndpoint.</span></span> <span data-ttu-id="8578a-238">Online 또는 Degraded 상태인 끝점이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-238">No endpoints are in Online or Degraded status.</span></span> |<span data-ttu-id="8578a-239">CheckingEndpoints</span><span class="sxs-lookup"><span data-stu-id="8578a-239">CheckingEndpoints</span></span> |<span data-ttu-id="8578a-240">이러한 전환 상태는 프로필을 만들거나 사용하도록 설정하면 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-240">This transition state occurs when a profile if created or enabled.</span></span> <span data-ttu-id="8578a-241">hello 끝점 상태는 검사할 hello에 대 한 처음으로입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-241">hello endpoint health is being checked for hello first time.</span></span> |
| <span data-ttu-id="8578a-242">사용</span><span class="sxs-lookup"><span data-stu-id="8578a-242">Enabled</span></span> |<span data-ttu-id="8578a-243">hello 프로필의 모든 끝점의 hello 상태는 Disabled 또는 Stopped, 또는 hello 프로필에 정의 된 끝점이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-243">hello statuses of all endpoints in hello profile are either Disabled or Stopped, or hello profile has no defined endpoints.</span></span> |<span data-ttu-id="8578a-244">비활성</span><span class="sxs-lookup"><span data-stu-id="8578a-244">Inactive</span></span> |<span data-ttu-id="8578a-245">끝점이 활성 상태 이면 있더라도 hello 프로필은 여전히 설정 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-245">No endpoints are active, but hello profile is still Enabled.</span></span> |

## <a name="endpoint-failover-and-recovery"></a><span data-ttu-id="8578a-246">끝점 장애 조치 및 복구</span><span class="sxs-lookup"><span data-stu-id="8578a-246">Endpoint failover and recovery</span></span>

<span data-ttu-id="8578a-247">트래픽 관리자는 주기적으로 비정상 끝점을 포함 하 여 모든 끝점의 hello 상태를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-247">Traffic Manager periodically checks hello health of every endpoint, including unhealthy endpoints.</span></span> <span data-ttu-id="8578a-248">Traffic Manager는 끝점이 정상 상태가 되는지 감지한 후 다시 회전에 포함시킵니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-248">Traffic Manager detects when an endpoint becomes healthy and brings it back into rotation.</span></span>

<span data-ttu-id="8578a-249">Hello 다음 이벤트 중 하나가 발생할 때 끝점 손상 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-249">An endpoint is unhealthy when any of hello following events occur:</span></span>
- <span data-ttu-id="8578a-250">프로토콜을 모니터링 하는 hello HTTP 또는 HTTPS 인 경우</span><span class="sxs-lookup"><span data-stu-id="8578a-250">If hello monitoring protocol is HTTP or HTTPS:</span></span>
    - <span data-ttu-id="8578a-251">200이 아닌 응답을 받았습니다(다양한 2xx 코드 또는 301/302 리디렉션).</span><span class="sxs-lookup"><span data-stu-id="8578a-251">A non-200 response is received (including a different 2xx code, or a 301/302 redirect).</span></span>
- <span data-ttu-id="8578a-252">TCP 프로토콜을 모니터링 하는 hello 경우:</span><span class="sxs-lookup"><span data-stu-id="8578a-252">If hello monitoring protocol is TCP:</span></span> 
    - <span data-ttu-id="8578a-253">응답은 ACK 또는 SYN ACK toohello 동기화 요청 응답으로에서 받은 것과 다른 전송 tooattempt 트래픽 관리자에서 연결 설정.</span><span class="sxs-lookup"><span data-stu-id="8578a-253">A response other than ACK or SYN-ACK is received in response toohello SYNC request sent by Traffic Manager tooattempt a connection establishment.</span></span>
- <span data-ttu-id="8578a-254">시간 초과.</span><span class="sxs-lookup"><span data-stu-id="8578a-254">Timeout.</span></span> 
- <span data-ttu-id="8578a-255">모든 다른 연결 문제가 발생 hello 끝점 연결할 수 없게 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-255">Any other connection issue resulting in hello endpoint being not reachable.</span></span>

<span data-ttu-id="8578a-256">실패한 검사의 문제 해결에 대한 자세한 내용은 [Azure Traffic Manager의 Degraded 상태 문제 해결](traffic-manager-troubleshooting-degraded.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8578a-256">For more information about troubleshooting failed checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span> 

<span data-ttu-id="8578a-257">hello 그림 2에는 다음 타임 라인은 hello 설정을 다음을 있는 트래픽 관리자 끝점의 프로세스를 모니터링 하는 hello에 대 한 자세한 설명은: 모니터링 프로토콜은 HTTP, 검색 간격은 30 초, 허용된 실패 횟수는 3 시간 제한 값 10 초 이며 DNS TTL은 30 초입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-257">hello following timeline in Figure 2 is a detailed description of hello monitoring process of Traffic Manager endpoint that has hello following settings: monitoring protocol is HTTP, probing interval is 30 seconds, number of tolerated failures is 3, timeout value is 10 seconds, and DNS TTL is 30 seconds.</span></span>

![Traffic Manager 끝점 장애 조치 및 장애 복구 순서](./media/traffic-manager-monitoring/timeline.png)

<span data-ttu-id="8578a-259">**그림 2: Traffic Manager 끝점 장애 조치(failover) 및 복구 순서**</span><span class="sxs-lookup"><span data-stu-id="8578a-259">**Figure 2:  Traffic manager endpoint failover and recovery sequence**</span></span>

1. <span data-ttu-id="8578a-260">**GET**.</span><span class="sxs-lookup"><span data-stu-id="8578a-260">**GET**.</span></span> <span data-ttu-id="8578a-261">각 끝점에 대 한 트래픽 관리자 모니터링 시스템이 hello hello 모니터링 설정에에서 지정 된 hello 경로에 GET 요청을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-261">For each endpoint, hello Traffic Manager monitoring system performs a GET request on hello path specified in hello monitoring settings.</span></span>
2. <span data-ttu-id="8578a-262">**200 OK**.</span><span class="sxs-lookup"><span data-stu-id="8578a-262">**200 OK**.</span></span> <span data-ttu-id="8578a-263">모니터링 시스템 hello는 10 초 이내에 반환 하는 HTTP 200 OK 메시지가 toobe가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-263">hello monitoring system expects an HTTP 200 OK message toobe returned within 10 seconds.</span></span> <span data-ttu-id="8578a-264">이 응답을 받으면 hello 서비스를 사용할 수 있는지를 인식 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-264">When it receives this response, it recognizes that hello service is available.</span></span>
3. <span data-ttu-id="8578a-265">**확인 간격 30초**.</span><span class="sxs-lookup"><span data-stu-id="8578a-265">**30 seconds between checks**.</span></span> <span data-ttu-id="8578a-266">hello 끝점 상태 검사에는 30 초 마다 반복 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-266">hello endpoint health check is repeated every 30 seconds.</span></span>
4. <span data-ttu-id="8578a-267">**서비스를 사용할 수 없음**.</span><span class="sxs-lookup"><span data-stu-id="8578a-267">**Service unavailable**.</span></span> <span data-ttu-id="8578a-268">hello 서비스 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-268">hello service becomes unavailable.</span></span> <span data-ttu-id="8578a-269">트래픽 관리자 hello 다음 상태 확인 될 때까지 확인할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-269">Traffic Manager will not know until hello next health check.</span></span>
5. <span data-ttu-id="8578a-270">**경로 모니터링 하는 시도 tooaccess hello**합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-270">**Attempts tooaccess hello monitoring path**.</span></span> <span data-ttu-id="8578a-271">hello 모니터링 시스템이 GET 요청을 수행 하지만 10 초 hello 제한 시간 내에서 응답을 수신 하지 않습니다 (또는 200 이외의 응답이 수신 될 수 있습니다).</span><span class="sxs-lookup"><span data-stu-id="8578a-271">hello monitoring system performs a GET request, but does not receive a response within hello timeout period of 10 seconds (alternatively, a non-200 response may be received).</span></span> <span data-ttu-id="8578a-272">30초 간격으로 3회 더 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-272">It then tries three more times, at 30-second intervals.</span></span> <span data-ttu-id="8578a-273">성공한 경우 hello 시도 중 하나가 시도 hello 수 다시 설정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-273">If one of hello tries is successful, then hello number of tries is reset.</span></span>
6. <span data-ttu-id="8578a-274">**상태가 설정 tooDegraded**합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-274">**Status set tooDegraded**.</span></span> <span data-ttu-id="8578a-275">네 번째 연속 된 실패 후 시스템을 모니터링 하는 hello Degraded로 hello 사용할 수 없는 끝점 상태를 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-275">After a fourth consecutive failure, hello monitoring system marks hello unavailable endpoint status as Degraded.</span></span>
7. <span data-ttu-id="8578a-276">**전환 된 tooother 끝점 트래픽은**합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-276">**Traffic is diverted tooother endpoints**.</span></span> <span data-ttu-id="8578a-277">hello 트래픽 관리자 DNS 이름 서버에 업데이트 되 고 트래픽 관리자는 더 이상 hello 끝점 응답 tooDNS 쿼리에서 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-277">hello Traffic Manager DNS name servers are updated and Traffic Manager no longer returns hello endpoint in response tooDNS queries.</span></span> <span data-ttu-id="8578a-278">새 연결은 방향이 지정 된 tooother, 사용 가능한 끝점 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-278">New connections are directed tooother, available endpoints.</span></span> <span data-ttu-id="8578a-279">그러나 이 끝점을 포함하는 이전 DNS 응답은 재귀 DNS 서버 및 DNS 클라이언트에 의해 계속 캐시될 수 있으므로</span><span class="sxs-lookup"><span data-stu-id="8578a-279">However, previous DNS responses that include this endpoint may still be cached by recursive DNS servers and DNS clients.</span></span> <span data-ttu-id="8578a-280">클라이언트는 hello DNS 캐시가 만료 될 때까지 toouse hello 끝점을 계속 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-280">Clients continue toouse hello endpoint until hello DNS cache expires.</span></span> <span data-ttu-id="8578a-281">Hello DNS 캐시가 만료 되 면으로 클라이언트는 새 DNS 쿼리를 만들고 toodifferent 방향이 지정 된 끝점에는 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-281">As hello DNS cache expires, clients make new DNS queries and are directed toodifferent endpoints.</span></span> <span data-ttu-id="8578a-282">hello 캐시 기간 hello 트래픽 관리자 프로필, 예를 들어 30 초에서에서 hello TTL 설정에 의해 제어 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-282">hello cache duration is controlled by hello TTL setting in hello Traffic Manager profile, for example, 30 seconds.</span></span>
8. <span data-ttu-id="8578a-283">**계속 상태 검사**.</span><span class="sxs-lookup"><span data-stu-id="8578a-283">**Health checks continue**.</span></span> <span data-ttu-id="8578a-284">트래픽 관리자 Degraded 상태 된 동안 hello 끝점의 toocheck hello 상태를 계속 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-284">Traffic Manager continues toocheck hello health of hello endpoint while it has a Degraded status.</span></span> <span data-ttu-id="8578a-285">트래픽 관리자 끝점 hello toohealth 반환 될 때 검색 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-285">Traffic Manager detects when hello endpoint returns toohealth.</span></span>
9. <span data-ttu-id="8578a-286">**서비스가 다시 온라인 상태가 됩니다**.</span><span class="sxs-lookup"><span data-stu-id="8578a-286">**Service comes back online**.</span></span> <span data-ttu-id="8578a-287">hello 서비스를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-287">hello service becomes available.</span></span> <span data-ttu-id="8578a-288">hello 모니터링 시스템에서 다음 상태 검사를 수행할 때까지 hello 끝점에서 트래픽 관리자 Degraded 상태를 유지 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-288">hello endpoint retains its Degraded status in Traffic Manager until hello monitoring system performs its next health check.</span></span>
10. <span data-ttu-id="8578a-289">**트래픽 tooservice 재개**합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-289">**Traffic tooservice resumes**.</span></span> <span data-ttu-id="8578a-290">Traffic Manager는 GET 요청을 전송하고 200 OK 상태 응답을 수신합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-290">Traffic Manager sends a GET request and receives a 200 OK status response.</span></span> <span data-ttu-id="8578a-291">hello 서비스 tooa 정상 상태를 반환 했습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-291">hello service has returned tooa healthy state.</span></span> <span data-ttu-id="8578a-292">트래픽 관리자 이름 서버 hello 업데이트 되 고 DNS 응답에서 hello 서비스의 DNS 이름을 toohand를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-292">hello Traffic Manager name servers are updated, and they begin toohand out hello service's DNS name in DNS responses.</span></span> <span data-ttu-id="8578a-293">트래픽이 다른 끝점을 반환 하는 DNS 응답을 캐시 만료 tooother 끝점이 기존 연결으로 종료 되 고 toohello 끝점을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-293">Traffic returns toohello endpoint as cached DNS responses that return other endpoints expire, and as existing connections tooother endpoints are terminated.</span></span>

    > [!NOTE]
    > <span data-ttu-id="8578a-294">트래픽 관리자 hello DNS 수준에서 작동 하기 때문에 기존 연결 tooany 끝점 영향을 줄 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-294">Because Traffic Manager works at hello DNS level, it cannot influence existing connections tooany endpoint.</span></span> <span data-ttu-id="8578a-295">(또는 변경 된 프로필 설정을 사용 하 여 장애 복구 또는 장애 조치 하는 동안) 끝점 간의 트래픽, 하도록 지시 하는 경우 트래픽 관리자는 새 연결 tooavailable 끝점을 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-295">When it directs traffic between endpoints (either by changed profile settings, or during failover or failback), Traffic Manager directs new connections tooavailable endpoints.</span></span> <span data-ttu-id="8578a-296">그러나 다른 끝점 해당 세션은 종료 될 때까지 tooreceive 트래픽이 기존 연결을 통해 계속 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-296">However, other endpoints might continue tooreceive traffic via existing connections until those sessions are terminated.</span></span> <span data-ttu-id="8578a-297">기존 연결에서 tooenable 트래픽 toodrain, 응용 프로그램을 제한 해야 hello 이며 각 끝점은 사용 되는 세션 기간.</span><span class="sxs-lookup"><span data-stu-id="8578a-297">tooenable traffic toodrain from existing connections, applications should limit hello session duration used with each endpoint.</span></span>

## <a name="traffic-routing-methods"></a><span data-ttu-id="8578a-298">트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="8578a-298">Traffic-routing methods</span></span>

<span data-ttu-id="8578a-299">끝점 Degraded 상태가 더 이상 응답 tooDNS 쿼리에서 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-299">When an endpoint has a Degraded status, it is no longer returned in response tooDNS queries.</span></span> <span data-ttu-id="8578a-300">대신 대체 끝점이 선택되어 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-300">Instead, an alternative endpoint is chosen and returned.</span></span> <span data-ttu-id="8578a-301">hello 트래픽 라우팅을 메서드 hello 프로필에 구성 된 hello 대체 끝점을 선택 하는 방법을 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-301">hello traffic-routing method configured in hello profile determines how hello alternative endpoint is chosen.</span></span>

* <span data-ttu-id="8578a-302">**우선 순위**.</span><span class="sxs-lookup"><span data-stu-id="8578a-302">**Priority**.</span></span> <span data-ttu-id="8578a-303">끝점은 우선 순위가 정해진 목록을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-303">Endpoints form a prioritized list.</span></span> <span data-ttu-id="8578a-304">hello hello 목록에 첫 번째 사용 가능한 끝점은 항상 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-304">hello first available endpoint on hello list is always returned.</span></span> <span data-ttu-id="8578a-305">끝점 상태 저하 되 면 hello 다음 사용 가능한 끝점 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-305">If an endpoint status is Degraded, then hello next available endpoint is returned.</span></span>
* <span data-ttu-id="8578a-306">**가중치 적용**.</span><span class="sxs-lookup"><span data-stu-id="8578a-306">**Weighted**.</span></span> <span data-ttu-id="8578a-307">모든 사용 가능한 끝점의 할당 된 가중치에 따라 임의로 선택 됩니다 및 hello 가중치 hello의 다른 사용 가능한 끝점입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-307">Any available endpoint is chosen at random based on their assigned weights and hello weights of hello other available endpoints.</span></span>
* <span data-ttu-id="8578a-308">**성능**.</span><span class="sxs-lookup"><span data-stu-id="8578a-308">**Performance**.</span></span> <span data-ttu-id="8578a-309">hello 끝점 가장 가까운 toohello 최종 사용자가 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-309">hello endpoint closest toohello end user is returned.</span></span> <span data-ttu-id="8578a-310">끝점에서 임의로 선택은 해당 끝점에 사용할 수 없는 경우 모든 hello 다른 사용 가능한 끝점입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-310">If that endpoint is unavailable, an endpoint is randomly chosen from all hello other available endpoints.</span></span> <span data-ttu-id="8578a-311">오버 로드 된 hello 가장 가까운 다음 끝점이 될 때 발생할 수 있는 연속 오류를 방지 임의의 끝점을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-311">Choosing a random endpoint avoids a cascading failure that can occur when hello next-closest endpoint becomes overloaded.</span></span> <span data-ttu-id="8578a-312">[중첩 Traffic Manager 프로필](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region)을 사용하여 성능 트래픽 라우팅에 대한 대체 장애 조치 계획을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-312">You can configure alternative failover plans for performance traffic-routing by using [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span></span>
* <span data-ttu-id="8578a-313">**지리적**.</span><span class="sxs-lookup"><span data-stu-id="8578a-313">**Geographic**.</span></span> <span data-ttu-id="8578a-314">hello 끝점 IP가 반환 되는 hello 쿼리 요청에 따라 tooserve hello 지리적 위치가 매핑됩니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-314">hello endpoint mapped tooserve hello geographic location based on hello query request IP’s is returned.</span></span> <span data-ttu-id="8578a-315">해당 끝점에 사용할 수 없는 경우 다른 끝점 됩니다, 선택한 toofailover 지리적 위치 프로필에 매핑된 전용 tooone 끝점 될 수 있으므로 (자세한 세부 정보는 hello에서 [FAQ](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span><span class="sxs-lookup"><span data-stu-id="8578a-315">If that endpoint is unavailable, another endpoint will not be selected toofailover to, since a geographic location can be mapped only tooone endpoint in a profile (more details are in hello [FAQ](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span></span> <span data-ttu-id="8578a-316">모범 사례로, 지리적 라우팅을 사용 하는 경우, 권장 여러 끝점을 사용 하 여 toouse 중첩 된 트래픽 관리자 프로필 hello 프로필의 hello 끝점으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-316">As a best practice, when using geographic routing, we recommend customers toouse nested Traffic Manager profiles with more than one endpoint as hello endpoints of hello profile.</span></span>

<span data-ttu-id="8578a-317">자세한 내용은 [트래픽 관리자 트래픽 라우팅 방법](traffic-manager-routing-methods.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8578a-317">For more information, see [Traffic Manager traffic-routing methods](traffic-manager-routing-methods.md).</span></span>

> [!NOTE]
> <span data-ttu-id="8578a-318">행동 한 가지 예외 toonormal 트래픽 라우팅을 모든 적격 끝점 성능이 저하 된 상태에 있을 때 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-318">One exception toonormal traffic-routing behavior occurs when all eligible endpoints have a degraded status.</span></span> <span data-ttu-id="8578a-319">트래픽 관리자는 한 "최상의" 시도 및 *온라인 상태에서 모든 hello Degraded 상태 끝점이 실제로 처럼 응답*합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-319">Traffic Manager makes a "best effort" attempt and *responds as if all hello Degraded status endpoints actually are in an online state*.</span></span> <span data-ttu-id="8578a-320">이 동작은 만드는 것이 좋습니다 toohello 대신 toonot hello DNS 응답의에서 모든 끝점을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-320">This behavior is preferable toohello alternative, which would be toonot return any endpoint in hello DNS response.</span></span> <span data-ttu-id="8578a-321">Disabled 또는 Stopped 끝점은 모니터링되지 않으므로 트래픽에 적합한 것으로 간주되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-321">Disabled or Stopped endpoints are not monitored, therefore, they are not considered eligible for traffic.</span></span>
>
> <span data-ttu-id="8578a-322">이 문제는 일반적으로 같은으로 인해 발생 hello 서비스의 잘못 된 구성:</span><span class="sxs-lookup"><span data-stu-id="8578a-322">This condition is commonly caused by improper configuration of hello service, such as:</span></span>
>
> * <span data-ttu-id="8578a-323">액세스 제어 목록 [ACL] hello 트래픽 관리자 상태 검사를 차단 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-323">An access control list [ACL] blocking hello Traffic Manager health checks.</span></span>
> * <span data-ttu-id="8578a-324">Hello 트래픽 관리자 프로필에서에서 프로토콜 또는 포트를 모니터링 하는 hello의 부적절 한 구성입니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-324">An improper configuration of hello monitoring port or protocol in hello Traffic manager profile.</span></span>
>
> <span data-ttu-id="8578a-325">hello이 동작의 결과 트래픽 관리자 상태 검사 올바르게 구성 되지 않은 경우 hello 트래픽 트래픽 관리자 라우팅 것 처럼 나타날 수 있습니다 것 *은* 정상적으로 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-325">hello consequence of this behavior is that if Traffic Manager health checks are not configured correctly, it might appear from hello traffic routing as though Traffic Manager *is* working properly.</span></span> <span data-ttu-id="8578a-326">하지만 이 경우에 전체 응용 프로그램 가용성에 영향을 미치는 끝점 장애 조치는 발생할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-326">However, in this case, endpoint failover cannot happen which affects overall application availability.</span></span> <span data-ttu-id="8578a-327">것이 중요 한 toocheck hello 프로필에는 온라인 상태를 저하 됨 상태 하지 표시 되는지 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-327">It is important toocheck that hello profile shows an Online status, not a Degraded status.</span></span> <span data-ttu-id="8578a-328">온라인 상태는 해당 hello 상태 검사 예상 대로 작동 하는 트래픽 관리자를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-328">An Online status indicates that hello Traffic Manager health checks are working as expected.</span></span>

<span data-ttu-id="8578a-329">실패한 상태 검사의 문제 해결에 대한 자세한 내용은 [Azure Traffic Manager의 Degraded 상태 문제 해결](traffic-manager-troubleshooting-degraded.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8578a-329">For more information about troubleshooting failed health checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span>



## <a name="next-steps"></a><span data-ttu-id="8578a-330">다음 단계</span><span class="sxs-lookup"><span data-stu-id="8578a-330">Next steps</span></span>

<span data-ttu-id="8578a-331">[Traffic Manager 작동 방식](traffic-manager-how-traffic-manager-works.md)</span><span class="sxs-lookup"><span data-stu-id="8578a-331">Learn [how Traffic Manager works](traffic-manager-how-traffic-manager-works.md)</span></span>

<span data-ttu-id="8578a-332">Hello에 대 한 자세한 [트래픽 라우팅 방법](traffic-manager-routing-methods.md) 트래픽 관리자에서 지원</span><span class="sxs-lookup"><span data-stu-id="8578a-332">Learn more about hello [traffic-routing methods](traffic-manager-routing-methods.md) supported by Traffic Manager</span></span>

<span data-ttu-id="8578a-333">너무 방법에 대해 알아봅니다[트래픽 관리자 프로필 만들기](traffic-manager-manage-profiles.md)</span><span class="sxs-lookup"><span data-stu-id="8578a-333">Learn how too[create a Traffic Manager profile](traffic-manager-manage-profiles.md)</span></span>

<span data-ttu-id="8578a-334">[Degraded 상태 문제를 해결](traffic-manager-troubleshooting-degraded.md) 합니다.</span><span class="sxs-lookup"><span data-stu-id="8578a-334">[Troubleshoot Degraded status](traffic-manager-troubleshooting-degraded.md) on a Traffic Manager endpoint</span></span>
