---
title: "Azure Traffic Manager 끝점 모니터링 | Microsoft Docs"
description: "이 문서는 Traffic Manager가 끝점 모니터링 및 자동 끝점 장애 조치를 사용하여 Azure 고객이 고가용성 응용 프로그램을 어떻게 배포할 수 있도록 하는지 이해하는 데 도움이 됩니다."
services: traffic-manager
documentationcenter: 
author: kumudd
manager: timlt
editor: 
ms.assetid: fff25ac3-d13a-4af9-8916-7c72e3d64bc7
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 06/22/2017
ms.author: kumud
ms.openlocfilehash: 5ce000814f2f5899a7338fdefb39c4873c006b1d
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="traffic-manager-endpoint-monitoring"></a><span data-ttu-id="13634-103">Traffic Manager 끝점 모니터링</span><span class="sxs-lookup"><span data-stu-id="13634-103">Traffic Manager endpoint monitoring</span></span>

<span data-ttu-id="13634-104">Azure Traffic Manager에는 기본 제공된 끝점 모니터링 및 자동 끝점 장애 조치가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-104">Azure Traffic Manager includes built-in endpoint monitoring and automatic endpoint failover.</span></span> <span data-ttu-id="13634-105">이 기능을 통해 Azure 지역 장애를 포함하여 끝점 장애에 대해 복원력 있는 고가용성 응용 프로그램을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-105">This feature helps you deliver high-availability applications that are resilient to endpoint failure, including Azure region failures.</span></span>

## <a name="configure-endpoint-monitoring"></a><span data-ttu-id="13634-106">끝점 모니터링 구성</span><span class="sxs-lookup"><span data-stu-id="13634-106">Configure endpoint monitoring</span></span>

<span data-ttu-id="13634-107">끝점 모니터링을 구성하려면 Traffic Manager 프로필에서 다음 설정을 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-107">To configure endpoint monitoring, you must specify the following settings on your Traffic Manager profile:</span></span>

* <span data-ttu-id="13634-108">**프로토콜**.</span><span class="sxs-lookup"><span data-stu-id="13634-108">**Protocol**.</span></span> <span data-ttu-id="13634-109">HTTP, HTTPS 또는 TCP를 Traffic Manager가 상태 검사를 위해 끝점을 검색할 때 사용하는 프로토콜로 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-109">Choose HTTP, HTTPS, or TCP as the protocol that Traffic Manager uses when probing your endpoint to check its health.</span></span> <span data-ttu-id="13634-110">HTTPS 모니터링은 SSL 인증서가 유효한지 여부를 확인하지 않으며 인증서가 있는지만 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-110">HTTPS monitoring does not verify whether your SSL certificate is valid--it only checks that the certificate is present.</span></span>
* <span data-ttu-id="13634-111">**포트**.</span><span class="sxs-lookup"><span data-stu-id="13634-111">**Port**.</span></span> <span data-ttu-id="13634-112">요청에 사용될 포트를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-112">Choose the port used for the request.</span></span>
* <span data-ttu-id="13634-113">**경로**.</span><span class="sxs-lookup"><span data-stu-id="13634-113">**Path**.</span></span> <span data-ttu-id="13634-114">이 구성 설정은 경로 설정을 지정해야 하는 HTTP 및 HTTPS 프로토콜에 대해서만 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-114">This configuration setting is valid only for the HTTP and HTTPS protocols, for which specifying the path setting is required.</span></span> <span data-ttu-id="13634-115">TCP 모니터링 프로토콜에 대해 이 설정을 제공하면 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-115">Providing this setting for the TCP monitoring protocol results in an error.</span></span> <span data-ttu-id="13634-116">TCP 프로토콜의 경우 모니터링 기능이 액세스하는 웹 페이지 또는 파일의 상대 경로와 이름을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-116">For TCP protocol, give the relative path and the name of the webpage or the file that the monitoring accesses.</span></span> <span data-ttu-id="13634-117">슬래시(/)는 상대 경로로 유효한 항목입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-117">A forward slash (/) is a valid entry for the relative path.</span></span> <span data-ttu-id="13634-118">이 값은 파일이 루트 디렉터리(기본값)에 있음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="13634-118">This value implies that the file is in the root directory (default).</span></span>
* <span data-ttu-id="13634-119">**검색 간격**.</span><span class="sxs-lookup"><span data-stu-id="13634-119">**Probing Interval**.</span></span> <span data-ttu-id="13634-120">이 값은 Traffic Manager 검색 에이전트에서 끝점의 상태를 검사하는 빈도를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-120">This value specifies how often an endpoint is checked for its health from a Traffic Manager probing agent.</span></span> <span data-ttu-id="13634-121">여기서 30초(일반 검색) 및 10초(빠른 검색)의 두 값을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-121">You can specify two values here: 30 seconds (normal probing) and 10 seconds (fast probing).</span></span> <span data-ttu-id="13634-122">값을 지정하지 않으면 프로필이 기본값인 30초로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-122">If no values are provided, the profile sets to a default value of 30 seconds.</span></span> <span data-ttu-id="13634-123">빠른 검색 가격 책정에 대한 자세한 내용은 [Traffic Manager 가격 책정](https://azure.microsoft.com/pricing/details/traffic-manager) 페이지를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="13634-123">Visit the [Traffic Manager Pricing](https://azure.microsoft.com/pricing/details/traffic-manager) page to learn more about fast probing pricing.</span></span>
* <span data-ttu-id="13634-124">**허용되는 오류 수**</span><span class="sxs-lookup"><span data-stu-id="13634-124">**Tolerated Number of Failures**.</span></span> <span data-ttu-id="13634-125">이 값은 Traffic Manager 검색 에이전트가 해당 끝점을 비정상 상태로 표시하기 전에 허용하는 오류 수를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-125">This value specifies how many failures a Traffic Manager probing agent tolerates before marking that endpoint as unhealthy.</span></span> <span data-ttu-id="13634-126">해당 값의 범위는 0에서 9 사이일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-126">Its value can range between 0 and 9.</span></span> <span data-ttu-id="13634-127">값이 0이면 단일 모니터링 오류로 인해 해당 끝점이 비정상 상태로 표시될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-127">A value of 0 means a single monitoring failure can cause that endpoint to be marked as unhealthy.</span></span> <span data-ttu-id="13634-128">값을 지정하지 않으면 기본값 3이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-128">If no value is specified, it uses the default value of 3.</span></span>
* <span data-ttu-id="13634-129">**모니터링 제한 시간**.</span><span class="sxs-lookup"><span data-stu-id="13634-129">**Monitoring Timeout**.</span></span> <span data-ttu-id="13634-130">이 속성은 상태 검사 프로브가 끝점으로 전송될 때 Traffic Manager 검색 에이전트가 해당 검사를 오류로 간주하기 전에 기다려야 하는 시간을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-130">This property specifies the amount of time the Traffic Manager probing agent should wait before considering that check a failure when a health check probe is sent to the endpoint.</span></span> <span data-ttu-id="13634-131">검색 간격이 30초로 설정된 경우 제한 시간 값을 5-10초 사이로 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-131">If the Probing Interval is set to 30 seconds, then you can set the Timeout value between 5 and 10 seconds.</span></span> <span data-ttu-id="13634-132">값을 지정하지 않으면 기본값 10초가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-132">If no value is specified, it uses a default value of 10 seconds.</span></span> <span data-ttu-id="13634-133">검색 간격이 10초로 설정된 경우 제한 시간 값을 5-9초 사이로 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-133">If the Probing Interval is set to 10 seconds, then you can set the Timeout value between 5 and 9 seconds.</span></span> <span data-ttu-id="13634-134">제한 시간 값을 지정하지 않으면 기본값 9초가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-134">If no Timeout value is specified, it uses a default value of 9 seconds.</span></span>

![Traffic Manager 끝점 모니터링](./media/traffic-manager-monitoring/endpoint-monitoring-settings.png)

<span data-ttu-id="13634-136">**그림 1: Traffic Manager 끝점 모니터링**</span><span class="sxs-lookup"><span data-stu-id="13634-136">**Figure 1:  Traffic Manager endpoint monitoring**</span></span>

## <a name="how-endpoint-monitoring-works"></a><span data-ttu-id="13634-137">끝점 모니터링의 작동 방식</span><span class="sxs-lookup"><span data-stu-id="13634-137">How endpoint monitoring works</span></span>

<span data-ttu-id="13634-138">모니터링 프로토콜이 HTTP 또는 HTTPS로 설정된 경우 Traffic Manager 검색 에이전트는 주어진 프로토콜, 포트 및 상대 경로를 사용하여 끝점에 GET 요청을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-138">If the monitoring protocol is set as HTTP or HTTPS, the Traffic Manager probing agent makes a GET request to the endpoint using the protocol, port, and relative path given.</span></span> <span data-ttu-id="13634-139">200-OK 응답이 반환되면 해당 끝점은 정상 상태로 간주됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-139">If it gets back a 200-OK response, then that endpoint is considered healthy.</span></span> <span data-ttu-id="13634-140">응답이 다른 값이거나 지정된 제한 시간 내에 응답이 수신되지 않으면 Traffic Manager 검색 에이전트는 허용되는 오류 수 설정에 따라 다시 시도합니다(이 설정이 0이면 다시 시도하지 않음).</span><span class="sxs-lookup"><span data-stu-id="13634-140">If the response is a different value, or, if no response is received within the timeout period specified, then the Traffic Manager probing agent re-attempts according to the Tolerated Number of Failures setting (no re-attempts are done if this setting is 0).</span></span> <span data-ttu-id="13634-141">연속 오류 수가 허용되는 오류 수 설정보다 크면 해당 끝점은 비정상 상태로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-141">If the number of consecutive failures is higher than the Tolerated Number of Failures setting, then that endpoint is marked as unhealthy.</span></span> 

<span data-ttu-id="13634-142">모니터링 프로토콜이 TCP인 경우 Traffic Manager는 지정된 포트를 사용하여 TCP 연결 요청을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-142">If the monitoring protocol is TCP, the Traffic Manager probing agent initiates a TCP connection request using the port specified.</span></span> <span data-ttu-id="13634-143">끝점이 연결 설정 응답으로 요청에 응답하면 해당 상태 검사는 성공으로 표시되고 Traffic Manager 검색 에이전트가 TCP 연결을 다시 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-143">If the endpoint responds to the request with a response to establish the connection, that health check is marked as a success and the Traffic Manager probing agent resets the TCP connection.</span></span> <span data-ttu-id="13634-144">응답이 다른 값이거나 지정된 제한 시간 내에 응답이 수신되지 않으면 Traffic Manager 검색 에이전트는 허용되는 오류 수 설정에 따라 다시 시도합니다(이 설정이 0이면 다시 시도하지 않음).</span><span class="sxs-lookup"><span data-stu-id="13634-144">If the response is a different value, or if no response is received within the timeout period specified, the Traffic Manager probing agent re-attempts according to the Tolerated Number of Failures setting (no re-attempts are made if this setting is 0).</span></span> <span data-ttu-id="13634-145">연속 오류 수가 허용되는 오류 수 설정보다 크면 해당 끝점은 비정상 상태로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-145">If the number of consecutive failures is higher than the Tolerated Number of Failures setting, then that endpoint is marked unhealthy.</span></span>

<span data-ttu-id="13634-146">모든 경우에서 Traffic Manager는 여러 위치에서 검색하며, 각 지역 내에서 연속 오류가 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-146">In all cases, Traffic Manager probes from multiple locations and the consecutive failure determination happens within each region.</span></span> <span data-ttu-id="13634-147">이는 끝점이 검색 간격에 사용되는 설정보다 높은 빈도로 Traffic Manager에서 상태 프로브를 받고 있음을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-147">This also means that endpoints are receiving health probes from Traffic Manager with a higher frequency than the setting used for Probing Interval.</span></span>

>[!NOTE]
><span data-ttu-id="13634-148">HTTP 또는 HTTPS 모니터링 프로토콜의 경우 끝점 쪽의 일반적인 방식은 응용 프로그램 내에서 사용자 지정 페이지를 구현하는 것입니다(예: /health.aspx).</span><span class="sxs-lookup"><span data-stu-id="13634-148">For HTTP or HTTPS monitoring protocol, a common practice on the endpoint side is to implement a custom page within your application - for example, /health.aspx.</span></span> <span data-ttu-id="13634-149">이 경로를 모니터링에 사용하여 성능 카운터 검사 또는 데이터베이스 가용성 확인과 같은 응용 프로그램별 검사를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-149">Using this path for monitoring, you can perform application-specific checks, such as checking performance counters or verifying database availability.</span></span> <span data-ttu-id="13634-150">이러한 사용자 지정 검사에 따르면 페이지는 적절한 HTTP 상태 코드를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-150">Based on these custom checks, the page returns an appropriate HTTP status code.</span></span>

<span data-ttu-id="13634-151">Traffic Manager 프로필의 모든 끝점은 모니터링 설정을 공유합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-151">All endpoints in a Traffic Manager profile share monitoring settings.</span></span> <span data-ttu-id="13634-152">서로 다른 끝점에 대해 다양한 모니터링 설정을 사용해야 하는 경우 [중첩된 Traffic Manager 프로필](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings)을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-152">If you need to use different monitoring settings for different endpoints, you can create [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-5-per-endpoint-monitoring-settings).</span></span>

## <a name="endpoint-and-profile-status"></a><span data-ttu-id="13634-153">끝점 및 프로필 상태</span><span class="sxs-lookup"><span data-stu-id="13634-153">Endpoint and profile status</span></span>

<span data-ttu-id="13634-154">Traffic Manager 프로필 및 끝점을 사용하거나 사용하지 않도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-154">You can enable and disable Traffic Manager profiles and endpoints.</span></span> <span data-ttu-id="13634-155">그러나 Traffic Manager의 자동 설정 및 프로세스에 따라 끝점 상태가 변경될 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-155">However, a change in endpoint status also might occur as a result of Traffic Manager automated settings and processes.</span></span>

### <a name="endpoint-status"></a><span data-ttu-id="13634-156">끝점 상태</span><span class="sxs-lookup"><span data-stu-id="13634-156">Endpoint status</span></span>

<span data-ttu-id="13634-157">특정 끝점을 사용하거나 사용하지 않도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-157">You can enable or disable a specific endpoint.</span></span> <span data-ttu-id="13634-158">정상 상태인 기본 서비스는 영향을 받지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-158">The underlying service, which might still be healthy, is unaffected.</span></span> <span data-ttu-id="13634-159">끝점의 상태를 변경하여 Traffic Manager 프로필에서의 끝점 가용성을 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-159">Changing the endpoint status controls the availability of the endpoint in the Traffic Manager profile.</span></span> <span data-ttu-id="13634-160">끝점 상태가 Disabled이면 Traffic Manager는 해당 상태를 확인하지 않으며 끝점은 DNS 응답에 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-160">When an endpoint status is disabled, Traffic Manager does not check its health and the endpoint is not included in a DNS response.</span></span>

### <a name="profile-status"></a><span data-ttu-id="13634-161">프로필 상태</span><span class="sxs-lookup"><span data-stu-id="13634-161">Profile status</span></span>

<span data-ttu-id="13634-162">프로필 상태 설정을 사용하여 특정 프로필을 사용하거나 사용하지 않도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-162">Using the profile status setting, you can enable or disable a specific profile.</span></span> <span data-ttu-id="13634-163">끝점 상태가 단일 끝점에 영향을 주지만 프로필 상태는 모든 끝점을 포함한 전체 프로필에 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="13634-163">While endpoint status affects a single endpoint, profile status affects the entire profile, including all endpoints.</span></span> <span data-ttu-id="13634-164">프로필을 사용하지 않도록 설정하면 끝점의 상태가 확인되지 않고 끝점이 DNS 응답에 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-164">When you disable a profile, the endpoints are not checked for health and no endpoints are included in a DNS response.</span></span> <span data-ttu-id="13634-165">[NXDOMAIN](https://tools.ietf.org/html/rfc2308) 응답 코드가 DNS 쿼리에 대해 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-165">An [NXDOMAIN](https://tools.ietf.org/html/rfc2308) response code is returned for the DNS query.</span></span>

### <a name="endpoint-monitor-status"></a><span data-ttu-id="13634-166">끝점 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="13634-166">Endpoint monitor status</span></span>

<span data-ttu-id="13634-167">끝점 모니터 상태는 끝점의 현재 상태를 보여 주는 Traffic Manager 생성 값입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-167">Endpoint monitor status is a Traffic Manager-generated value that shows the status of the endpoint.</span></span> <span data-ttu-id="13634-168">이 설정은 수동으로 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-168">You cannot change this setting manually.</span></span> <span data-ttu-id="13634-169">끝점 모니터 상태는 끝점 모니터링의 결과와 구성된 끝점 상태가 조합된 것입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-169">The endpoint monitor status is a combination of the results of endpoint monitoring and the configured endpoint status.</span></span> <span data-ttu-id="13634-170">끝점 모니터 상태의 가능한 값은 다음 표에 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-170">The possible values of endpoint monitor status are shown in the following table:</span></span>

| <span data-ttu-id="13634-171">프로필 상태</span><span class="sxs-lookup"><span data-stu-id="13634-171">Profile status</span></span> | <span data-ttu-id="13634-172">끝점 상태</span><span class="sxs-lookup"><span data-stu-id="13634-172">Endpoint status</span></span> | <span data-ttu-id="13634-173">끝점 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="13634-173">Endpoint monitor status</span></span> | <span data-ttu-id="13634-174">참고 사항</span><span class="sxs-lookup"><span data-stu-id="13634-174">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="13634-175">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="13634-175">Disabled</span></span> |<span data-ttu-id="13634-176">사용</span><span class="sxs-lookup"><span data-stu-id="13634-176">Enabled</span></span> |<span data-ttu-id="13634-177">비활성</span><span class="sxs-lookup"><span data-stu-id="13634-177">Inactive</span></span> |<span data-ttu-id="13634-178">프로필이 사용되지 않도록 설정되었습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-178">The profile has been disabled.</span></span> <span data-ttu-id="13634-179">끝점 상태는 Enabled여도 프로필 상태(Disabled)가 우선적으로 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-179">Although the endpoint status is Enabled, the profile status (Disabled) takes precedence.</span></span> <span data-ttu-id="13634-180">Disabled 프로필의 끝점은 모니터링되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-180">Endpoints in disabled profiles are not monitored.</span></span> <span data-ttu-id="13634-181">NXDOMAIN 응답 코드가 DNS 쿼리에 대해 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-181">An NXDOMAIN response code is returned for the DNS query.</span></span> |
| <span data-ttu-id="13634-182">&lt;일부&gt;</span><span class="sxs-lookup"><span data-stu-id="13634-182">&lt;any&gt;</span></span> |<span data-ttu-id="13634-183">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="13634-183">Disabled</span></span> |<span data-ttu-id="13634-184">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="13634-184">Disabled</span></span> |<span data-ttu-id="13634-185">끝점이 사용되지 않도록 설정되었습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-185">The endpoint has been disabled.</span></span> <span data-ttu-id="13634-186">사용하지 않도록 설정된 끝점이 모니터링되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-186">Disabled endpoints are not monitored.</span></span> <span data-ttu-id="13634-187">끝점이 DNS 응답에 포함되지 않으므로 트래픽을 수신하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-187">The endpoint is not included in DNS responses, therefore, it does not receive traffic.</span></span> |
| <span data-ttu-id="13634-188">사용</span><span class="sxs-lookup"><span data-stu-id="13634-188">Enabled</span></span> |<span data-ttu-id="13634-189">사용</span><span class="sxs-lookup"><span data-stu-id="13634-189">Enabled</span></span> |<span data-ttu-id="13634-190">온라인</span><span class="sxs-lookup"><span data-stu-id="13634-190">Online</span></span> |<span data-ttu-id="13634-191">끝점은 모니터링되며 정상 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-191">The endpoint is monitored and is healthy.</span></span> <span data-ttu-id="13634-192">DNS 응답에 포함되며 트래픽을 수신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-192">It is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="13634-193">사용</span><span class="sxs-lookup"><span data-stu-id="13634-193">Enabled</span></span> |<span data-ttu-id="13634-194">사용</span><span class="sxs-lookup"><span data-stu-id="13634-194">Enabled</span></span> |<span data-ttu-id="13634-195">성능 저하됨</span><span class="sxs-lookup"><span data-stu-id="13634-195">Degraded</span></span> |<span data-ttu-id="13634-196">끝점 모니터링 상태 검사에 실패했습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-196">Endpoint monitoring health checks are failing.</span></span> <span data-ttu-id="13634-197">끝점이 DNS 응답에 포함되지 않으며 트래픽을 수신하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-197">The endpoint is not included in DNS responses and does not receive traffic.</span></span> <br><span data-ttu-id="13634-198">단, 모든 끝점의 성능이 저하된 경우는 예외입니다. 이 경우 모든 끝점이 쿼리 응답에 반환되는 것으로 간주됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-198">An exception to this is if all endpoints are degraded, in which case all of them are considered to be returned in the query response).</span></span></br>|
| <span data-ttu-id="13634-199">사용</span><span class="sxs-lookup"><span data-stu-id="13634-199">Enabled</span></span> |<span data-ttu-id="13634-200">사용</span><span class="sxs-lookup"><span data-stu-id="13634-200">Enabled</span></span> |<span data-ttu-id="13634-201">CheckingEndpoint</span><span class="sxs-lookup"><span data-stu-id="13634-201">CheckingEndpoint</span></span> |<span data-ttu-id="13634-202">끝점이 모니터링되지만 첫 번째 검사 결과가 아직 수신되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-202">The endpoint is monitored, but the results of the first probe have not been received yet.</span></span> <span data-ttu-id="13634-203">CheckingEndpoint는 일반적으로 프로필에서 끝점을 추가하거나 사용하도록 설정한 직후에 나타나는 일시적 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-203">CheckingEndpoint is a temporary state that usually occurs immediately after adding or enabling an endpoint in the profile.</span></span> <span data-ttu-id="13634-204">이 상태의 끝점은 DNS 응답에 포함되며 트래픽을 수신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-204">An endpoint in this state is included in DNS responses and can receive traffic.</span></span> |
| <span data-ttu-id="13634-205">사용</span><span class="sxs-lookup"><span data-stu-id="13634-205">Enabled</span></span> |<span data-ttu-id="13634-206">사용</span><span class="sxs-lookup"><span data-stu-id="13634-206">Enabled</span></span> |<span data-ttu-id="13634-207">중지됨</span><span class="sxs-lookup"><span data-stu-id="13634-207">Stopped</span></span> |<span data-ttu-id="13634-208">끝점이 가리키는 클라우드 서비스 또는 웹앱이 실행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-208">The cloud service or web app that the endpoint points to is not running.</span></span> <span data-ttu-id="13634-209">클라우드 서비스 또는 웹앱 설정을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-209">Check the cloud service or web app settings.</span></span> <span data-ttu-id="13634-210">이 동작은 끝점이 중첩된 끝점 형식이고 자식 프로필이 사용되지 않거나 비활성 상태인 경우에도 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-210">This can also happen if the endpoint is of type nested endpoint and the child profile is disabled or is inactive.</span></span> <br><span data-ttu-id="13634-211">Stopped 상태의 끝점은 모니터링되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-211">An endpoint with a Stopped status is not monitored.</span></span> <span data-ttu-id="13634-212">DNS 응답에 포함되지 않으며 트래픽을 수신하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-212">It is not included in DNS responses and does not receive traffic.</span></span> <span data-ttu-id="13634-213">단, 모든 끝점의 성능이 저하된 경우는 예외입니다. 이 경우 모든 끝점이 쿼리 응답에 반환되는 것으로 간주됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-213">An exception to this is if all endpoints are degraded, in which case all of them will be considered to be returned in the query response.</span></span></br>|

<span data-ttu-id="13634-214">중첩된 끝점의 끝점 모니터 상태가 계산되는 방식에 대한 자세한 내용은 [중첩 Traffic Manager 프로필](traffic-manager-nested-profiles.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="13634-214">For details about how endpoint monitor status is calculated for nested endpoints, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

### <a name="profile-monitor-status"></a><span data-ttu-id="13634-215">프로필 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="13634-215">Profile monitor status</span></span>

<span data-ttu-id="13634-216">프로필 모니터 상태는 구성된 프로필 상태와 모든 끝점에 대한 끝점 모니터 상태 값을 조합한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-216">The profile monitor status is a combination of the configured profile status and the endpoint monitor status values for all endpoints.</span></span> <span data-ttu-id="13634-217">가능한 값은 다음 표에 설명되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-217">The possible values are described in the following table:</span></span>

| <span data-ttu-id="13634-218">프로필 상태(구성된 대로)</span><span class="sxs-lookup"><span data-stu-id="13634-218">Profile status (as configured)</span></span> | <span data-ttu-id="13634-219">끝점 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="13634-219">Endpoint monitor status</span></span> | <span data-ttu-id="13634-220">프로필 모니터 상태</span><span class="sxs-lookup"><span data-stu-id="13634-220">Profile monitor status</span></span> | <span data-ttu-id="13634-221">참고 사항</span><span class="sxs-lookup"><span data-stu-id="13634-221">Notes</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="13634-222">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="13634-222">Disabled</span></span> |<span data-ttu-id="13634-223">&lt;일부&gt; 또는 정의된 끝점이 없는 프로필</span><span class="sxs-lookup"><span data-stu-id="13634-223">&lt;any&gt; or a profile with no defined endpoints.</span></span> |<span data-ttu-id="13634-224">사용 안 함</span><span class="sxs-lookup"><span data-stu-id="13634-224">Disabled</span></span> |<span data-ttu-id="13634-225">프로필이 사용되지 않도록 설정되었습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-225">The profile has been disabled.</span></span> |
| <span data-ttu-id="13634-226">사용</span><span class="sxs-lookup"><span data-stu-id="13634-226">Enabled</span></span> |<span data-ttu-id="13634-227">하나 이상의 끝점 상태가 Degraded입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-227">The status of at least one endpoint is Degraded.</span></span> |<span data-ttu-id="13634-228">성능 저하됨</span><span class="sxs-lookup"><span data-stu-id="13634-228">Degraded</span></span> |<span data-ttu-id="13634-229">끝점에 주의가 필요한지 확인하려면 개별 끝점 상태 값을 검토합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-229">Review the individual endpoint status values to determine which endpoints require further attention.</span></span> |
| <span data-ttu-id="13634-230">사용</span><span class="sxs-lookup"><span data-stu-id="13634-230">Enabled</span></span> |<span data-ttu-id="13634-231">하나 이상의 끝점 상태가 Online입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-231">The status of at least one endpoint is Online.</span></span> <span data-ttu-id="13634-232">Degraded 상태의 끝점이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-232">No endpoints have a Degraded status.</span></span> |<span data-ttu-id="13634-233">온라인</span><span class="sxs-lookup"><span data-stu-id="13634-233">Online</span></span> |<span data-ttu-id="13634-234">서비스가 트래픽을 허용합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-234">The service is accepting traffic.</span></span> <span data-ttu-id="13634-235">별도의 작업이 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-235">No further action is required.</span></span> |
| <span data-ttu-id="13634-236">사용</span><span class="sxs-lookup"><span data-stu-id="13634-236">Enabled</span></span> |<span data-ttu-id="13634-237">하나 이상의 끝점 상태가 “CheckingEndpoint”입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-237">The status of at least one endpoint is CheckingEndpoint.</span></span> <span data-ttu-id="13634-238">Online 또는 Degraded 상태인 끝점이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-238">No endpoints are in Online or Degraded status.</span></span> |<span data-ttu-id="13634-239">CheckingEndpoints</span><span class="sxs-lookup"><span data-stu-id="13634-239">CheckingEndpoints</span></span> |<span data-ttu-id="13634-240">이러한 전환 상태는 프로필을 만들거나 사용하도록 설정하면 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-240">This transition state occurs when a profile if created or enabled.</span></span> <span data-ttu-id="13634-241">처음으로 끝점 상태가 검사됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-241">The endpoint health is being checked for the first time.</span></span> |
| <span data-ttu-id="13634-242">사용</span><span class="sxs-lookup"><span data-stu-id="13634-242">Enabled</span></span> |<span data-ttu-id="13634-243">프로필의 모든 끝점 상태는 Disabled 또는 Stopped이거나 프로필에 정의된 끝점이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-243">The statuses of all endpoints in the profile are either Disabled or Stopped, or the profile has no defined endpoints.</span></span> |<span data-ttu-id="13634-244">비활성</span><span class="sxs-lookup"><span data-stu-id="13634-244">Inactive</span></span> |<span data-ttu-id="13634-245">끝점이 활성 상태가 아니지만 프로필은 여전히 Enabled입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-245">No endpoints are active, but the profile is still Enabled.</span></span> |

## <a name="endpoint-failover-and-recovery"></a><span data-ttu-id="13634-246">끝점 장애 조치 및 복구</span><span class="sxs-lookup"><span data-stu-id="13634-246">Endpoint failover and recovery</span></span>

<span data-ttu-id="13634-247">Traffic Manager는 비정상 끝점을 포함하는 모든 끝점의 상태를 정기적으로 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-247">Traffic Manager periodically checks the health of every endpoint, including unhealthy endpoints.</span></span> <span data-ttu-id="13634-248">Traffic Manager는 끝점이 정상 상태가 되는지 감지한 후 다시 회전에 포함시킵니다.</span><span class="sxs-lookup"><span data-stu-id="13634-248">Traffic Manager detects when an endpoint becomes healthy and brings it back into rotation.</span></span>

<span data-ttu-id="13634-249">다음 이벤트 중 하나가 발생할 경우 끝점이 비정상 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-249">An endpoint is unhealthy when any of the following events occur:</span></span>
- <span data-ttu-id="13634-250">모니터링 프로토콜이 HTTP 또는 HTTPS인 경우:</span><span class="sxs-lookup"><span data-stu-id="13634-250">If the monitoring protocol is HTTP or HTTPS:</span></span>
    - <span data-ttu-id="13634-251">200이 아닌 응답을 받았습니다(다양한 2xx 코드 또는 301/302 리디렉션).</span><span class="sxs-lookup"><span data-stu-id="13634-251">A non-200 response is received (including a different 2xx code, or a 301/302 redirect).</span></span>
- <span data-ttu-id="13634-252">모니터링 프로토콜이 TCP인 경우:</span><span class="sxs-lookup"><span data-stu-id="13634-252">If the monitoring protocol is TCP:</span></span> 
    - <span data-ttu-id="13634-253">Traffic Manager가 연결을 다시 설정하기 위해 보낸 동기화 요청에 대한 응답으로 ACK 또는 SYN-ACK 이외의 응답을 받았습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-253">A response other than ACK or SYN-ACK is received in response to the SYNC request sent by Traffic Manager to attempt a connection establishment.</span></span>
- <span data-ttu-id="13634-254">시간 초과.</span><span class="sxs-lookup"><span data-stu-id="13634-254">Timeout.</span></span> 
- <span data-ttu-id="13634-255">끝점에 도달하지 못하게 하는 다른 모든 연결 문제입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-255">Any other connection issue resulting in the endpoint being not reachable.</span></span>

<span data-ttu-id="13634-256">실패한 검사의 문제 해결에 대한 자세한 내용은 [Azure Traffic Manager의 Degraded 상태 문제 해결](traffic-manager-troubleshooting-degraded.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="13634-256">For more information about troubleshooting failed checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span> 

<span data-ttu-id="13634-257">그림 2의 다음 타임라인은 모니터링 프로토콜이 HTTP이고, 검색 간격이 30초이며, 허용되는 오류 수가 3개이고, 제한 시간 값이 10초이며, DNS TTL이 30초인 설정을 가진 Traffic Manager 끝점의 모니터링 프로세스에 대한 자세한 설명입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-257">The following timeline in Figure 2 is a detailed description of the monitoring process of Traffic Manager endpoint that has the following settings: monitoring protocol is HTTP, probing interval is 30 seconds, number of tolerated failures is 3, timeout value is 10 seconds, and DNS TTL is 30 seconds.</span></span>

![Traffic Manager 끝점 장애 조치 및 장애 복구 순서](./media/traffic-manager-monitoring/timeline.png)

<span data-ttu-id="13634-259">**그림 2: Traffic Manager 끝점 장애 조치(failover) 및 복구 순서**</span><span class="sxs-lookup"><span data-stu-id="13634-259">**Figure 2:  Traffic manager endpoint failover and recovery sequence**</span></span>

1. <span data-ttu-id="13634-260">**GET**.</span><span class="sxs-lookup"><span data-stu-id="13634-260">**GET**.</span></span> <span data-ttu-id="13634-261">각 끝점에서 Traffic Manager 모니터링 시스템은 모니터링 설정에 지정된 경로에 대해 GET 요청을 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-261">For each endpoint, the Traffic Manager monitoring system performs a GET request on the path specified in the monitoring settings.</span></span>
2. <span data-ttu-id="13634-262">**200 OK**.</span><span class="sxs-lookup"><span data-stu-id="13634-262">**200 OK**.</span></span> <span data-ttu-id="13634-263">모니터링 시스템에서 10초 내에 HTTP 200 OK 메시지가 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-263">The monitoring system expects an HTTP 200 OK message to be returned within 10 seconds.</span></span> <span data-ttu-id="13634-264">이 응답을 수신하면 서비스를 사용할 수 있는 것으로 인식합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-264">When it receives this response, it recognizes that the service is available.</span></span>
3. <span data-ttu-id="13634-265">**확인 간격 30초**.</span><span class="sxs-lookup"><span data-stu-id="13634-265">**30 seconds between checks**.</span></span> <span data-ttu-id="13634-266">끝점 상태 검사가 30초마다 반복됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-266">The endpoint health check is repeated every 30 seconds.</span></span>
4. <span data-ttu-id="13634-267">**서비스를 사용할 수 없음**.</span><span class="sxs-lookup"><span data-stu-id="13634-267">**Service unavailable**.</span></span> <span data-ttu-id="13634-268">서비스를 사용할 수 없게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-268">The service becomes unavailable.</span></span> <span data-ttu-id="13634-269">Traffic Manager는 다음 상태 검사까지 알지 못합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-269">Traffic Manager will not know until the next health check.</span></span>
5. <span data-ttu-id="13634-270">**모니터링 경로 액세스 시도**.</span><span class="sxs-lookup"><span data-stu-id="13634-270">**Attempts to access the monitoring path**.</span></span> <span data-ttu-id="13634-271">모니터링 시스템은 GET 요청을 수행하지만 10초의 기간 내에 응답을 수신하지 않습니다(또는 200 이외의 응답을 수신할 수 있음).</span><span class="sxs-lookup"><span data-stu-id="13634-271">The monitoring system performs a GET request, but does not receive a response within the timeout period of 10 seconds (alternatively, a non-200 response may be received).</span></span> <span data-ttu-id="13634-272">30초 간격으로 3회 더 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-272">It then tries three more times, at 30-second intervals.</span></span> <span data-ttu-id="13634-273">그 중 한 번의 시도가 성공하면 시도 횟수가 다시 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-273">If one of the tries is successful, then the number of tries is reset.</span></span>
6. <span data-ttu-id="13634-274">**상태가 Degraded로 설정**.</span><span class="sxs-lookup"><span data-stu-id="13634-274">**Status set to Degraded**.</span></span> <span data-ttu-id="13634-275">네 번째 연속 실패 후 모니터링 시스템은 사용할 수 없는 끝점을 Degraded로 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-275">After a fourth consecutive failure, the monitoring system marks the unavailable endpoint status as Degraded.</span></span>
7. <span data-ttu-id="13634-276">**트래픽이 다른 끝점으로 우회됨**.</span><span class="sxs-lookup"><span data-stu-id="13634-276">**Traffic is diverted to other endpoints**.</span></span> <span data-ttu-id="13634-277">Traffic Manager DNS 이름 서버가 업데이트되고 Traffic Manager에 의해 DNS 쿼리에 대한 응답으로 끝점이 더 이상 반환되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-277">The Traffic Manager DNS name servers are updated and Traffic Manager no longer returns the endpoint in response to DNS queries.</span></span> <span data-ttu-id="13634-278">새 연결은 사용 가능한 다른 끝점으로 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-278">New connections are directed to other, available endpoints.</span></span> <span data-ttu-id="13634-279">그러나 이 끝점을 포함하는 이전 DNS 응답은 재귀 DNS 서버 및 DNS 클라이언트에 의해 계속 캐시될 수 있으므로</span><span class="sxs-lookup"><span data-stu-id="13634-279">However, previous DNS responses that include this endpoint may still be cached by recursive DNS servers and DNS clients.</span></span> <span data-ttu-id="13634-280">클라이언트는 DNS 캐시가 만료될 때까지 끝점을 계속 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-280">Clients continue to use the endpoint until the DNS cache expires.</span></span> <span data-ttu-id="13634-281">DNS 캐시가 만료되면 클라이언트는 새 DNS 쿼리를 만들고 다른 끝점으로 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-281">As the DNS cache expires, clients make new DNS queries and are directed to different endpoints.</span></span> <span data-ttu-id="13634-282">캐시 기간은 Traffic Manager 프로필의 TTL 설정에 의해 제어됩니다(예: 30초).</span><span class="sxs-lookup"><span data-stu-id="13634-282">The cache duration is controlled by the TTL setting in the Traffic Manager profile, for example, 30 seconds.</span></span>
8. <span data-ttu-id="13634-283">**계속 상태 검사**.</span><span class="sxs-lookup"><span data-stu-id="13634-283">**Health checks continue**.</span></span> <span data-ttu-id="13634-284">Traffic Manager는 Degraded 상태에 있는 끝점의 상태를 계속해서 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-284">Traffic Manager continues to check the health of the endpoint while it has a Degraded status.</span></span> <span data-ttu-id="13634-285">Traffic Manager는 끝점이 정상 상태가 되면 이를 감지합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-285">Traffic Manager detects when the endpoint returns to health.</span></span>
9. <span data-ttu-id="13634-286">**서비스가 다시 온라인 상태가 됩니다**.</span><span class="sxs-lookup"><span data-stu-id="13634-286">**Service comes back online**.</span></span> <span data-ttu-id="13634-287">서비스를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-287">The service becomes available.</span></span> <span data-ttu-id="13634-288">모니터링 시스템에서 다음 상태 검사를 수행할 때까지 끝점은 Traffic Manager에서 Degraded 상태로 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-288">The endpoint retains its Degraded status in Traffic Manager until the monitoring system performs its next health check.</span></span>
10. <span data-ttu-id="13634-289">**서비스에 대한 트래픽 다시 시작**.</span><span class="sxs-lookup"><span data-stu-id="13634-289">**Traffic to service resumes**.</span></span> <span data-ttu-id="13634-290">Traffic Manager는 GET 요청을 전송하고 200 OK 상태 응답을 수신합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-290">Traffic Manager sends a GET request and receives a 200 OK status response.</span></span> <span data-ttu-id="13634-291">서비스는 정상 상태로 돌아왔습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-291">The service has returned to a healthy state.</span></span> <span data-ttu-id="13634-292">Traffic Manager 이름 서버는 업데이트되고 DNS 응답에서 서비스의 DNS 이름을 전달하기 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-292">The Traffic Manager name servers are updated, and they begin to hand out the service's DNS name in DNS responses.</span></span> <span data-ttu-id="13634-293">다른 끝점으로 반환되는 캐시된 DNS 응답이 만료되고 다른 끝점에 대한 기존 연결이 종료됨에 따라 트래픽이 또 다시 끝점으로 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-293">Traffic returns to the endpoint as cached DNS responses that return other endpoints expire, and as existing connections to other endpoints are terminated.</span></span>

    > [!NOTE]
    > <span data-ttu-id="13634-294">Traffic Manager는 DNS 수준에서 작동하므로 모든 끝점에 대한 기존 연결에 영향을 미칠 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-294">Because Traffic Manager works at the DNS level, it cannot influence existing connections to any endpoint.</span></span> <span data-ttu-id="13634-295">끝점 간에 트래픽을 전달할 때는(프로필 설정을 변경하거나 장애 조치 또는 장애 복구 중) Traffic Manager가 사용 가능한 끝점에 새 연결을 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-295">When it directs traffic between endpoints (either by changed profile settings, or during failover or failback), Traffic Manager directs new connections to available endpoints.</span></span> <span data-ttu-id="13634-296">그러나 다른 끝점은 해당 세션이 종료될 때까지 기존 연결을 통해 트래픽을 계속 수신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-296">However, other endpoints might continue to receive traffic via existing connections until those sessions are terminated.</span></span> <span data-ttu-id="13634-297">트래픽이 기존 연결에서 비워지도록 하기 위해 응용 프로그램은 각 끝점에 사용된 세션 기간을 제한해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-297">To enable traffic to drain from existing connections, applications should limit the session duration used with each endpoint.</span></span>

## <a name="traffic-routing-methods"></a><span data-ttu-id="13634-298">트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="13634-298">Traffic-routing methods</span></span>

<span data-ttu-id="13634-299">끝점이 Degraded 상태가 되면 더 이상 DNS 쿼리에 대한 응답으로 반환되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-299">When an endpoint has a Degraded status, it is no longer returned in response to DNS queries.</span></span> <span data-ttu-id="13634-300">대신 대체 끝점이 선택되어 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-300">Instead, an alternative endpoint is chosen and returned.</span></span> <span data-ttu-id="13634-301">프로필에 구성된 트래픽 라우팅 방법은 대체 끝점을 선택하는 방법을 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-301">The traffic-routing method configured in the profile determines how the alternative endpoint is chosen.</span></span>

* <span data-ttu-id="13634-302">**우선 순위**.</span><span class="sxs-lookup"><span data-stu-id="13634-302">**Priority**.</span></span> <span data-ttu-id="13634-303">끝점은 우선 순위가 정해진 목록을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-303">Endpoints form a prioritized list.</span></span> <span data-ttu-id="13634-304">목록에 사용 가능한 첫 번째 끝점은 항상 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-304">The first available endpoint on the list is always returned.</span></span> <span data-ttu-id="13634-305">끝점 상태가 Degraded면 사용 가능한 다음 끝점이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-305">If an endpoint status is Degraded, then the next available endpoint is returned.</span></span>
* <span data-ttu-id="13634-306">**가중치 적용**.</span><span class="sxs-lookup"><span data-stu-id="13634-306">**Weighted**.</span></span> <span data-ttu-id="13634-307">사용 가능한 모든 끝점이 할당된 가중치 및 다른 사용 가능한 끝점의 가중치를 기반으로 임의로 선택됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-307">Any available endpoint is chosen at random based on their assigned weights and the weights of the other available endpoints.</span></span>
* <span data-ttu-id="13634-308">**성능**.</span><span class="sxs-lookup"><span data-stu-id="13634-308">**Performance**.</span></span> <span data-ttu-id="13634-309">최종 사용자에게 가장 가까운 끝점이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-309">The endpoint closest to the end user is returned.</span></span> <span data-ttu-id="13634-310">해당 끝점을 사용할 수 없는 경우 나머지 사용 가능한 모든 끝점에서 임의로 끝점이 선택됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-310">If that endpoint is unavailable, an endpoint is randomly chosen from all the other available endpoints.</span></span> <span data-ttu-id="13634-311">임의 끝점을 선택하면 가장 가까운 다음 끝점이 오버로드될 때 발생할 수 있는 연속 오류를 방지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-311">Choosing a random endpoint avoids a cascading failure that can occur when the next-closest endpoint becomes overloaded.</span></span> <span data-ttu-id="13634-312">[중첩 Traffic Manager 프로필](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region)을 사용하여 성능 트래픽 라우팅에 대한 대체 장애 조치 계획을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-312">You can configure alternative failover plans for performance traffic-routing by using [nested Traffic Manager profiles](traffic-manager-nested-profiles.md#example-4-controlling-performance-traffic-routing-between-multiple-endpoints-in-the-same-region).</span></span>
* <span data-ttu-id="13634-313">**지리적**.</span><span class="sxs-lookup"><span data-stu-id="13634-313">**Geographic**.</span></span> <span data-ttu-id="13634-314">쿼리 요청 IP에 따라 지리적 위치를 제공하도록 매핑된 끝점이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="13634-314">The endpoint mapped to serve the geographic location based on the query request IP’s is returned.</span></span> <span data-ttu-id="13634-315">해당 끝점을 사용할 수 없는 경우 지리적 위치는 프로필의 한 끝점에만 매핑할 수 있으므로 장애 조치(failover)할 다른 끝점이 선택되지 않습니다(자세한 내용은 [FAQ](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method) 참조).</span><span class="sxs-lookup"><span data-stu-id="13634-315">If that endpoint is unavailable, another endpoint will not be selected to failover to, since a geographic location can be mapped only to one endpoint in a profile (more details are in the [FAQ](traffic-manager-FAQs.md#traffic-manager-geographic-traffic-routing-method)).</span></span> <span data-ttu-id="13634-316">모범 사례로, 지리적 라우팅을 사용하는 경우 고객이 둘 이상의 끝점을 프로필 끝점으로 지정하여 중첩된 Traffic Manager 프로필을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-316">As a best practice, when using geographic routing, we recommend customers to use nested Traffic Manager profiles with more than one endpoint as the endpoints of the profile.</span></span>

<span data-ttu-id="13634-317">자세한 내용은 [트래픽 관리자 트래픽 라우팅 방법](traffic-manager-routing-methods.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="13634-317">For more information, see [Traffic Manager traffic-routing methods](traffic-manager-routing-methods.md).</span></span>

> [!NOTE]
> <span data-ttu-id="13634-318">일반적인 트래픽 라우팅 동작의 한 가지 예외는 모든 적격 끝점이 Degraded 상태에 있을 때 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-318">One exception to normal traffic-routing behavior occurs when all eligible endpoints have a degraded status.</span></span> <span data-ttu-id="13634-319">Traffic Manager는 “최선”을 다하고 *모든 Degraded 상태 끝점이 실제로 Online 상태인 것처럼 응답*합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-319">Traffic Manager makes a "best effort" attempt and *responds as if all the Degraded status endpoints actually are in an online state*.</span></span> <span data-ttu-id="13634-320">이 동작은 DNS 응답에 어떠한 끝점도 반환하지 않는 것보다 바람직한 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="13634-320">This behavior is preferable to the alternative, which would be to not return any endpoint in the DNS response.</span></span> <span data-ttu-id="13634-321">Disabled 또는 Stopped 끝점은 모니터링되지 않으므로 트래픽에 적합한 것으로 간주되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-321">Disabled or Stopped endpoints are not monitored, therefore, they are not considered eligible for traffic.</span></span>
>
> <span data-ttu-id="13634-322">이 문제는 다음과 같은 서비스의 부적절한 구성 때문에 주로 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-322">This condition is commonly caused by improper configuration of the service, such as:</span></span>
>
> * <span data-ttu-id="13634-323">ACL[액세스 제어 목록]이 Traffic Manager 상태 검사를 차단합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-323">An access control list [ACL] blocking the Traffic Manager health checks.</span></span>
> * <span data-ttu-id="13634-324">Traffic Manager 프로필에서 모니터링 포트 또는 프로토콜이 잘못 구성되었습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-324">An improper configuration of the monitoring port or protocol in the Traffic manager profile.</span></span>
>
> <span data-ttu-id="13634-325">이러한 동작은 Traffic Manager 상태 검사가 제대로 구성되지 않는 경우 발생하며 트래픽 라우팅에서 Traffic Manager가 제대로 *작동하는* 것처럼 보일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-325">The consequence of this behavior is that if Traffic Manager health checks are not configured correctly, it might appear from the traffic routing as though Traffic Manager *is* working properly.</span></span> <span data-ttu-id="13634-326">하지만 이 경우에 전체 응용 프로그램 가용성에 영향을 미치는 끝점 장애 조치는 발생할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="13634-326">However, in this case, endpoint failover cannot happen which affects overall application availability.</span></span> <span data-ttu-id="13634-327">프로필에 Degraded 상태 대신 Online 상태가 표시되는지 확인하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-327">It is important to check that the profile shows an Online status, not a Degraded status.</span></span> <span data-ttu-id="13634-328">Online 상태는 Traffic Manager 상태 검사가 예상대로 작동 중임을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="13634-328">An Online status indicates that the Traffic Manager health checks are working as expected.</span></span>

<span data-ttu-id="13634-329">실패한 상태 검사의 문제 해결에 대한 자세한 내용은 [Azure Traffic Manager의 Degraded 상태 문제 해결](traffic-manager-troubleshooting-degraded.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="13634-329">For more information about troubleshooting failed health checks, see [Troubleshooting Degraded status on Azure Traffic Manager](traffic-manager-troubleshooting-degraded.md).</span></span>



## <a name="next-steps"></a><span data-ttu-id="13634-330">다음 단계</span><span class="sxs-lookup"><span data-stu-id="13634-330">Next steps</span></span>

<span data-ttu-id="13634-331">[Traffic Manager 작동 방식](traffic-manager-how-traffic-manager-works.md)</span><span class="sxs-lookup"><span data-stu-id="13634-331">Learn [how Traffic Manager works](traffic-manager-how-traffic-manager-works.md)</span></span>

<span data-ttu-id="13634-332">Traffic Manager가 지원하는 [트래픽 라우팅 방법](traffic-manager-routing-methods.md) 에 대해 자세히 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="13634-332">Learn more about the [traffic-routing methods](traffic-manager-routing-methods.md) supported by Traffic Manager</span></span>

<span data-ttu-id="13634-333">[Traffic Manager 프로필을 만드는](traffic-manager-manage-profiles.md)</span><span class="sxs-lookup"><span data-stu-id="13634-333">Learn how to [create a Traffic Manager profile](traffic-manager-manage-profiles.md)</span></span>

<span data-ttu-id="13634-334">[Degraded 상태 문제를 해결](traffic-manager-troubleshooting-degraded.md) 합니다.</span><span class="sxs-lookup"><span data-stu-id="13634-334">[Troubleshoot Degraded status](traffic-manager-troubleshooting-degraded.md) on a Traffic Manager endpoint</span></span>
