---
title: "Azure Traffic Manager - 트래픽 라우팅 메서드 | Microsoft Docs"
description: "이 문서는 Traffic Manager에서 사용하는 다양한 트래픽 라우팅 방법을 이해하는 데 도움이 됩니다."
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: fe776e24a4f78b389c6096694055b38befa3c419
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/03/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="b7c79-103">트래픽 관리자 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="b7c79-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="b7c79-104">Azure Traffic Manager는 다양한 서비스 끝점에 네트워크 트래픽을 라우팅하는 방법을 결정하는 네 가지 트래픽 라우팅 방법을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-104">Azure Traffic Manager supports four traffic-routing methods to determine how to route network traffic to the various service endpoints.</span></span> <span data-ttu-id="b7c79-105">Traffic Manager는 트래픽 라우팅 메서드를 수신한 각 DNS 쿼리에 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-105">Traffic Manager applies the traffic-routing method to each DNS query it receives.</span></span> <span data-ttu-id="b7c79-106">트래픽 라우팅 메서드는 DNS 응답에서 반환된 끝점을 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-106">The traffic-routing method determines which endpoint returned in the DNS response.</span></span>

<span data-ttu-id="b7c79-107">Traffic Manager에서 사용할 수 있는 네 가지 트래픽 라우팅 메서드가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="b7c79-108">**[우선 순위](#priority):** 모든 트래픽에 대해 기본 서비스 끝점을 사용하고 기본 또는 백업 끝점을 사용할 수 없을 때 백업을 제공하려면 **우선 순위**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-108">**[Priority](#priority):** Select **Priority** when you want to use a primary service endpoint for all traffic, and provide backups in case the primary or the backup endpoints are unavailable.</span></span>
* <span data-ttu-id="b7c79-109">**[가중](#weighted):** 여러 끝점에 균일하게 또는 정의한 가중치에 따라 트래픽을 분산하려면 **가중**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-109">**[Weighted](#weighted):** Select **Weighted** when you want to distribute traffic across a set of endpoints, either evenly or according to weights, which you define.</span></span>
* <span data-ttu-id="b7c79-110">**[성능](#performance):** 끝점이 서로 다른 지역에 있고 최종 사용자가 가장 짧은 네트워크 대기 시간을 기준으로 "가장 가까운" 끝점을 사용하게 하려는 경우 **성능**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users to use the "closest" endpoint in terms of the lowest network latency.</span></span>
* <span data-ttu-id="b7c79-111">**[지리적](#geographic):** 사용자가 해당 DNS 쿼리가 시작된 지리적 위치를 기준으로 특정 끝점(Azure, 외부 또는 중첩)으로 리디렉션되게 하려면 **지리적**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed to specific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="b7c79-112">이렇게 하면 Traffic Manager 고객이 사용자의 지리적 위치를 파악하고 그에 따라 라우팅되는 중요한 시나리오를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-112">This empowers Traffic Manager customers to enable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="b7c79-113">데이터 독립성 지시 사항, 콘텐츠 및 사용자 환경의 지역화를 준수하고 다른 지역의 트래픽을 측정하는 작업을 예로 들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="b7c79-114">모든 Traffic Manager 프로필에는 끝점 상태 및 자동 끝점 장애 조치(Failover)의 모니터링이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="b7c79-115">자세한 내용은 [트래픽 관리자 끝점 모니터링](traffic-manager-monitoring.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b7c79-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="b7c79-116">단일 트래픽 관리자 프로필은 1가지 트래픽 라우팅 방법만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="b7c79-117">언제든지 프로필에 대해 다른 트래픽 라우팅 방법을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="b7c79-118">1분 안에 변경 내용이 적용되며 가동 중지는 발생하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="b7c79-119">중첩 트래픽 관리자 프로필을 사용하여 트래픽 라우팅 방법을 결합할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="b7c79-120">중첩을 통해 크고 복잡한 응용 프로그램의 요구 사항을 충족할 수 있는 정교하고 유연한 트래픽 라우팅 구성이 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet the needs of larger, complex applications.</span></span> <span data-ttu-id="b7c79-121">자세한 내용은 [중첩 Traffic Manager 프로필](traffic-manager-nested-profiles.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b7c79-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="b7c79-122"><a name = "priority"></a>우선 순위 트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="b7c79-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="b7c79-123">종종 조직에서는 기본 서비스가 중단될 경우에 하나 이상의 백업 서비스를 배포하여 해당 서비스에 대한 안정성을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-123">Often an organization wants to provide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="b7c79-124">'우선 순위' 트래픽 라우팅 메서드를 사용하여 Azure 고객은 이러한 장애 조치(Failover) 패턴을 쉽게 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-124">The 'Priority' traffic-routing method allows Azure customers to easily implement this failover pattern.</span></span>

![Azure Traffic Manager '우선 순위' 트래픽 라우팅 메서드][1]

<span data-ttu-id="b7c79-126">Traffic Manager 프로필은 우선 순위로 정렬된 서비스 끝점 목록을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-126">The Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="b7c79-127">기본적으로 Traffic Manager는 모든 트래픽을 기본(가장 높은 우선 순위) 끝점으로 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-127">By default, Traffic Manager sends all traffic to the primary (highest-priority) endpoint.</span></span> <span data-ttu-id="b7c79-128">기본 끝점을 사용할 수 없는 경우 Traffic Manager는 두 번째 끝점에 트래픽을 라우팅합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-128">If the primary endpoint is not available, Traffic Manager routes the traffic to the second endpoint.</span></span> <span data-ttu-id="b7c79-129">목록의 기본 끝점 및 보조 끝점을 모두 사용할 수 없는 경우 트래픽이 세 번째 끝점 등으로 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-129">If both the primary and secondary endpoints are not available, the traffic goes to the third, and so on.</span></span> <span data-ttu-id="b7c79-130">끝점의 가용성은 구성된 상태(사용 또는 사용 안 함) 및 지속적인 끝점 모니터링을 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-130">Availability of the endpoint is based on the configured status (enabled or disabled) and the ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="b7c79-131">끝점 구성</span><span class="sxs-lookup"><span data-stu-id="b7c79-131">Configuring endpoints</span></span>

<span data-ttu-id="b7c79-132">Azure Resource Manager에서 각 끝점에 대해 '우선 순위' 속성을 사용하여 끝점 우선 순위를 명시적으로 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-132">With Azure Resource Manager, you configure the endpoint priority explicitly using the 'priority' property for each endpoint.</span></span> <span data-ttu-id="b7c79-133">이 속성은 1에서 1000 사이의 값입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="b7c79-134">값이 낮을수록 더 높은 우선 순위를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="b7c79-135">끝점은 우선 순위 값을 공유할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="b7c79-136">이 속성을 설정하는 작업은 선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-136">Setting the property is optional.</span></span> <span data-ttu-id="b7c79-137">생략하면 끝점 순서에 따른 기본 우선 순위를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-137">When omitted, a default priority based on the endpoint order is used.</span></span>

##<span data-ttu-id="b7c79-138"><a name = "weighted"></a>가중 트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="b7c79-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="b7c79-139">'가중' 트래픽 라우팅 메서드를 사용하면 균등하게 트래픽을 분산하거나 미리 정의된 가중치를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-139">The 'Weighted' traffic-routing method allows you to distribute traffic evenly or to use a pre-defined weighting.</span></span>

![Azure Traffic Manager '가중' 트래픽 라우팅 메서드][2]

<span data-ttu-id="b7c79-141">가중 트래픽 라우팅 메서드에서는 Traffic Manager 프로필 구성에서 각 끝점에 가중치를 할당합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-141">In the Weighted traffic-routing method, you assign a weight to each endpoint in the Traffic Manager profile configuration.</span></span> <span data-ttu-id="b7c79-142">가중치는 1에서 1000 사이의 정수입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-142">The weight is an integer from 1 to 1000.</span></span> <span data-ttu-id="b7c79-143">이 매개 변수는 선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-143">This parameter is optional.</span></span> <span data-ttu-id="b7c79-144">생략되면 Traffic Manager는 '1'이라는 기본 가중치를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="b7c79-145">Traffic Manager는 수신한 각 DNS 쿼리에 대해 사용 가능한 끝점을 임의로 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="b7c79-146">끝점을 선택하는 확률은 사용 가능한 모든 끝점에 할당된 가중치를 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-146">The probability of choosing an endpoint is based on the weights assigned to all available endpoints.</span></span> <span data-ttu-id="b7c79-147">모든 끝점 결과에서 동일한 가중치를 사용하면 균등하게 트래픽이 분포됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-147">Using the same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="b7c79-148">특정 끝점에 더 높은(또는 더 낮은) 가중치를 적용하면 해당 끝점이 DNS 응답에서 더(또는 덜) 자주 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-148">Using higher or lower weights on specific endpoints causes those endpoints to be returned more or less frequently in the DNS responses.</span></span>

<span data-ttu-id="b7c79-149">가중 메서드를 사용하면 다음과 같은 몇 가지 유용한 시나리오를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-149">The weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="b7c79-150">점진적 응용 프로그램 업그레이드: 새 끝점으로 라우팅할 트래픽의 백분율을 할당하고 시간 경과에 따라 점진적으로 트래픽을 100%까지 늘립니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-150">Gradual application upgrade: Allocate a percentage of traffic to route to a new endpoint, and gradually increase the traffic over time to 100%.</span></span>
* <span data-ttu-id="b7c79-151">Azure에 응용 프로그램 마이그레이션: Azure 끝점 및 외부 끝점으로 프로필을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-151">Application migration to Azure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="b7c79-152">새 끝점을 선호하도록 끝점의 가중치를 조정합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-152">Adjust the weight of the endpoints to prefer the new endpoints.</span></span>
* <span data-ttu-id="b7c79-153">추가 용량을 위한 클라우드 버스트: 트래픽 관리자 프로필을 통해 온-프레미스 배포를 클라우드로 신속하게 확장합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into the cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="b7c79-154">클라우드에 추가 용량이 필요한 경우 끝점을 더 추가하거나 사용하도록 설정하고 각 끝점으로 전송되는 트래픽 양을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-154">When you need extra capacity in the cloud, you can add or enable more endpoints and specify what portion of traffic goes to each endpoint.</span></span>

<span data-ttu-id="b7c79-155">Resource Manager Azure Portal에서는 가중 트래픽 라우팅의 구성을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-155">The Resource Manager Azure portal supports the configuration of weighted traffic routing.</span></span>  <span data-ttu-id="b7c79-156">Azure PowerShell, CLI 및 REST API에서 이전 버전의 Resource Manager를 사용하여 가중치를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-156">You can configure weights using the Resource Manager versions of Azure PowerShell, CLI, and the REST APIs.</span></span>

<span data-ttu-id="b7c79-157">클라이언트가 DNS 이름을 확인하는 데 사용하는 클라이언트 및 재귀 DNS 서버에서 DNS 응답을 캐시하는 것을 이해하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-157">It is important to understand that DNS responses are cached by clients and by the recursive DNS servers that the clients use to resolve DNS names.</span></span> <span data-ttu-id="b7c79-158">이 캐싱은 가중 트래픽 분산에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="b7c79-159">클라이언트 및 재귀 DNS 서버의 수가 큰 경우 트래픽 분산은 예상대로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-159">When the number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="b7c79-160">그러나 클라이언트 또는 재귀 DNS 서버의 수가 적을 경우 캐싱은 트래픽 배포를 상당히 왜곡시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-160">However, when the number of clients or recursive DNS servers is small, caching can significantly skew the traffic distribution.</span></span>

<span data-ttu-id="b7c79-161">일반 사용 사례는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-161">Common use cases include:</span></span>

* <span data-ttu-id="b7c79-162">개발 및 테스트 환경</span><span class="sxs-lookup"><span data-stu-id="b7c79-162">Development and testing environments</span></span>
* <span data-ttu-id="b7c79-163">응용 프로그램 간 통신</span><span class="sxs-lookup"><span data-stu-id="b7c79-163">Application-to-application communications</span></span>
* <span data-ttu-id="b7c79-164">일반적인 재귀 DNS 인프라를 공유하는 좁은 사용자 기반을 목표로 하는 응용 프로그램(예: 프록시를 통해 연결하는 회사의 직원)</span><span class="sxs-lookup"><span data-stu-id="b7c79-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="b7c79-165">이러한 DNS 캐싱 효과는 Azure 트래픽 관리자만이 아니라 모든 DNS 기반 트래픽 라우팅 시스템에 공통적으로 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-165">These DNS caching effects are common to all DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="b7c79-166">경우에 따라 DNS 캐시를 명시적으로 지우면 문제가 해결될 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-166">In some cases, explicitly clearing the DNS cache may provide a workaround.</span></span> <span data-ttu-id="b7c79-167">대체 트래픽 라우팅 방법이 더 적절한 경우도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="b7c79-168"><a name = "performance"></a>성능 트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="b7c79-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="b7c79-169">전 세계적으로 둘 이상의 위치에 끝점을 배포하면 트래픽을 사용자에게 '가장 가까운' 위치로 라우팅하여 많은 응용 프로그램의 응답성을 향상시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-169">Deploying endpoints in two or more locations across the globe can improve the responsiveness of many applications by routing traffic to the location that is 'closest' to you.</span></span> <span data-ttu-id="b7c79-170">'성능' 트래픽 라우팅 메서드는 이 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-170">The 'Performance' traffic-routing method provides this capability.</span></span>

![Azure Traffic Manager '성능' 트래픽 라우팅 메서드][3]

<span data-ttu-id="b7c79-172">'가장 가까운' 끝점이 반드시 지리적 거리를 기준으로 가장 가깝게 지정되는 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-172">The 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="b7c79-173">대신, '성능' 트래픽 라우팅 메서드는 네트워크 대기 시간을 측정하여 가장 가까운 끝점을 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-173">Instead, the 'Performance' traffic-routing method determines the closest endpoint by measuring network latency.</span></span> <span data-ttu-id="b7c79-174">Traffic Manager에는 IP 주소 범위와 각 Azure 데이터 센터 간의 왕복 시간을 추적하는 인터넷 대기 시간 테이블이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-174">Traffic Manager maintains an Internet Latency Table to track the round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="b7c79-175">Traffic Manager는 인터넷 대기 시간 테이블에서 들어오는 DNS 요청의 원본 IP 주소를 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-175">Traffic Manager looks up the source IP address of the incoming DNS request in the Internet Latency Table.</span></span> <span data-ttu-id="b7c79-176">Traffic Manager는 해당 IP 주소 범위에 대한 가장 낮은 대기 시간을 Azure 데이터 센터에서 사용 가능한 끝점을 선택한 다음 DNS 응답에서 해당 끝점을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-176">Traffic Manager chooses an available endpoint in the Azure datacenter that has the lowest latency for that IP address range, then returns that endpoint in the DNS response.</span></span>

<span data-ttu-id="b7c79-177">[Traffic Manager 작동 방식](traffic-manager-overview.md#how-traffic-manager-works)에 설명된 대로 Traffic Manager는 클라이언트에서 직접 DNS 쿼리를 수신하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="b7c79-178">대신, DNS 쿼리는 클라이언트를 사용하도록 구성한 재귀 DNS 서비스에서 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-178">Rather, DNS queries come from the recursive DNS service that the clients are configured to use.</span></span> <span data-ttu-id="b7c79-179">따라서 '가장 가까운' 끝점을 결정하는 데 사용되는 IP 주소는 클라이언트의 IP 주소가 아니라 재귀 DNS 서비스의 IP 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-179">Therefore, the IP address used to determine the 'closest' endpoint is not the client's IP address, but it is the IP address of the recursive DNS service.</span></span> <span data-ttu-id="b7c79-180">실제로 이 IP 주소는 클라이언트에 유용한 프록시입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-180">In practice, this IP address is a good proxy for the client.</span></span>


<span data-ttu-id="b7c79-181">Traffic Manager는 인터넷 대기 시간 테이블을 정기적으로 업데이트하여 전세계 인터넷 및 새 Azure 지역에서 변경 내용을 고려합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-181">Traffic Manager regularly updates the Internet Latency Table to account for changes in the global Internet and new Azure regions.</span></span> <span data-ttu-id="b7c79-182">그러나 응용 프로그램 성능은 인터넷을 통한 부하에서 실시간 변형에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-182">However, application performance varies based on real-time variations in load across the Internet.</span></span> <span data-ttu-id="b7c79-183">성능 트래픽 라우팅은 지정된 서비스 끝점에 대한 부하를 모니터링하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="b7c79-184">그러나 끝점을 사용할 수 없는 경우 Traffic Manager는 해당 끝점을 DNS 쿼리 응답에 포함하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="b7c79-185">주의할 사항:</span><span class="sxs-lookup"><span data-stu-id="b7c79-185">Points to note:</span></span>

* <span data-ttu-id="b7c79-186">프로필이 동일한 Azure 지역에서 여러 끝점을 포함하는 경우 Traffic Manager는 트래픽을 해당 지역에서 사용할 수 있는 끝점에 균등하게 분산합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-186">If your profile contains multiple endpoints in the same Azure region, then Traffic Manager distributes traffic evenly across the available endpoints in that region.</span></span> <span data-ttu-id="b7c79-187">지역 내에서 다른 트래픽 분산을 원하는 경우 [중첩 Traffic Manager 프로필](traffic-manager-nested-profiles.md)을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="b7c79-188">가장 가까운 Azure 지역에서 활성화된 모든 끝점의 성능이 저하되면 Traffic Manager가 다음으로 가장 가까운 Azure 지역의 끝점으로 트래픽을 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-188">If all enabled endpoints in the closest Azure region are degraded, Traffic Manager moves traffic to the endpoints in the next closest Azure region.</span></span> <span data-ttu-id="b7c79-189">기본 장애 조치 순서를 정의하려는 경우 [중첩된 Traffic Manager 프로필](traffic-manager-nested-profiles.md)을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-189">If you want to define a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="b7c79-190">외부 끝점 또는 중첩 끝점에서 성능 트래픽 라우팅 방법을 사용하는 경우 해당 끝점의 위치를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-190">When using the Performance traffic routing method with external endpoints or nested endpoints, you need to specify the location of those endpoints.</span></span> <span data-ttu-id="b7c79-191">배포에 가장 가까운 Azure 지역을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-191">Choose the Azure region closest to your deployment.</span></span> <span data-ttu-id="b7c79-192">이러한 위치는 인터넷 대기 시간 테이블에서 지원되는 값입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-192">Those locations are the values supported by the Internet Latency Table.</span></span>
* <span data-ttu-id="b7c79-193">끝점을 선택하는 알고리즘은 결정적입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-193">The algorithm that chooses the endpoint is deterministic.</span></span> <span data-ttu-id="b7c79-194">동일한 클라이언트에서 반복되는 DNS 쿼리는 동일한 끝점으로 전달됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-194">Repeated DNS queries from the same client are directed to the same endpoint.</span></span> <span data-ttu-id="b7c79-195">일반적으로 클라이언트는 이동할 때 다른 재귀 DNS 서버를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="b7c79-196">클라이언트는 다른 끝점으로 라우팅될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-196">The client may be routed to a different endpoint.</span></span> <span data-ttu-id="b7c79-197">라우팅은 인터넷 대기 시간 테이블의 업데이트에 의해서도 영향을 받을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-197">Routing can also be affected by updates to the Internet Latency Table.</span></span> <span data-ttu-id="b7c79-198">따라서 성능 트래픽 라우팅 메서드는 클라이언트가 항상 동일한 끝점으로 라우팅되는 것을 보장하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-198">Therefore, the Performance traffic-routing method does not guarantee that a client is always routed to the same endpoint.</span></span>
* <span data-ttu-id="b7c79-199">인터넷 대기 시간 표가 변경될 경우 일부 클라이언트가 다른 끝점으로 보내진다는 것을 알 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-199">When the Internet Latency Table changes, you may notice that some clients are directed to a different endpoint.</span></span> <span data-ttu-id="b7c79-200">이 라우팅 변경 내용은 현재 대기 시간 데이터에 따라 더 정확합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="b7c79-201">인터넷이 계속해서 진화함에 따라, 이러한 업데이트는 성능 트래픽 라우팅의 정확성을 유지하는 데 필수적입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-201">These updates are essential to maintain the accuracy of Performance traffic-routing as the Internet continually evolves.</span></span>

## <span data-ttu-id="b7c79-202"><a name = "geographic"></a>지리적 트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="b7c79-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="b7c79-203">지리적 라우팅 메서드를 사용하도록 Traffic Manager 프로필을 구성하여 사용자가 해당 DNS 쿼리가 시작된 지리적 위치에 기반한 특정 끝점(Azure, 외부 또는 중첩됨)에 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-203">Traffic Manager profiles can be configured to use the Geographic routing method so that users are directed to specific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="b7c79-204">이렇게 하면 Traffic Manager 고객이 사용자의 지리적 위치를 파악하고 그에 따라 라우팅되는 중요한 시나리오를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-204">This empowers Traffic Manager customers to enable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="b7c79-205">데이터 독립성 지시 사항, 콘텐츠 및 사용자 환경의 지역화를 준수하고 다른 지역의 트래픽을 측정하는 작업을 예로 들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="b7c79-206">프로필이 지리적 라우팅에 구성된 경우 해당 프로필과 연결된 각 끝점에는 거기에 할당된 지리적 지역이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs to have a set of geographic regions assigned to it.</span></span> <span data-ttu-id="b7c79-207">지리적 지역은 다음과 같은 수준으로 세분화될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="b7c79-208">세계–모든 지역</span><span class="sxs-lookup"><span data-stu-id="b7c79-208">World– any region</span></span>
- <span data-ttu-id="b7c79-209">지역 그룹화 - 예: 아프리카, 중동, 오스트레일리아/태평양 등</span><span class="sxs-lookup"><span data-stu-id="b7c79-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="b7c79-210">국가/지역 - 예: 아일랜드, 페루, 홍콩 특별 행정구 등</span><span class="sxs-lookup"><span data-stu-id="b7c79-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="b7c79-211">시/도 - 예: 미국-캘리포니아, 오스트레일리아-퀸즐랜드, 캐나다-앨버타 등(참고: 이 세분성 수준은 오스트레일리아, 캐나다, 영국 및 미국의 주/지방에서만 지원됨).</span><span class="sxs-lookup"><span data-stu-id="b7c79-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="b7c79-212">지역 또는 지역 집합이 끝점에 할당된 경우 특정 지역의 요청은 해당 끝점에만 라우트됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-212">When a region or a set of regions is assigned to an endpoint, any requests from those regions gets routed only to that endpoint.</span></span> <span data-ttu-id="b7c79-213">Traffic Manager는 DNS 쿼리의 원본 IP 주소를 사용하여 사용자가 쿼리를 수행하는 지역을 확인합니다. 일반적으로 사용자를 대신하여 쿼리를 수행하는 로컬 DNS 해결 프로그램의 IP 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-213">Traffic Manager uses the source IP address of the DNS query to determine the region from which a user is querying from – usually this is the IP address of the local DNS resolver doing the query on behalf of the user.</span></span>  

![Azure Traffic Manager '지리적' 트래픽 라우팅 메서드](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="b7c79-215">Traffic Manager는 DNS 쿼리의 원본 IP 주소를 읽고 해당 사항이 발생하는 지리적 지역을 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-215">Traffic Manager reads the source IP address of the DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="b7c79-216">그런 다음 이 지리적 지역이 매핑되어 있는 끝점이 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-216">It then looks to see if there is an endpoint that has this geographic region mapped to it.</span></span> <span data-ttu-id="b7c79-217">이 조회는 가장 낮은 세분성 수준(지원되는 경우 주/지방, 지원되지 않으면 국가/지역 수준)에서 시작되고 **세계**라는 가장 높은 수준까지 진행됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-217">This lookup starts at the lowest granularity level (State/Province where it is supported, else at the Country/Region level) and goes all the way up to the highest level, which is **World**.</span></span> <span data-ttu-id="b7c79-218">이 통과를 사용해서 발견된 첫 번째 일치 항목이 쿼리 응답에 반환할 끝점으로 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-218">The first match found using this traversal is designated as the endpoint to return in the query response.</span></span> <span data-ttu-id="b7c79-219">중첩 형식 끝점과 일치하는 경우 해당 라우팅 방법을 기준으로 자식 프로필 내의 끝점이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="b7c79-220">다음 사항을 이러한 동작에 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-220">The following points are applicable to this behavior:</span></span>

- <span data-ttu-id="b7c79-221">지리적 지역은 라우팅 형식이 지리적 라우팅일 경우 Traffic Manager 프로필에서 끝점에만 매핑될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-221">A geographic region can be mapped only to one endpoint in a Traffic Manager profile when the routing type is Geographic Routing.</span></span> <span data-ttu-id="b7c79-222">이렇게 하면 사용자 라우팅이 결정적이며 고객이 모호하지 않은 지리적 경계가 필요한 시나리오를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="b7c79-223">사용자 지역이 서로 다른 두 끝점의 지리적 매핑에 해당하는 경우 Traffic Manager는 세분성이 가장 낮은 끝점을 선택하고 해당 지역의 요청을 다른 끝점으로 라우팅하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects the endpoint with the lowest granularity and does not consider routing requests from that region to the other endpoint.</span></span> <span data-ttu-id="b7c79-224">예를 들어 Endpoint1과 Endpoint2라는 두 개의 끝점이 있는 지리적 라우팅 형식 프로필을 고려해 보세요.</span><span class="sxs-lookup"><span data-stu-id="b7c79-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="b7c79-225">끝점1은 아일랜드에서 트래픽을 수신하도록 구성되고 끝점2는 유럽에서 트래픽을 수신하도록 구성되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-225">Endpoint1 is configured to receive traffic from Ireland and Endpoint2 is configured to receive traffic from Europe.</span></span> <span data-ttu-id="b7c79-226">요청이 아일랜드에서 시작되는 경우 항상 Endpoint1에 라우트됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-226">If a request originates from Ireland, it is always routed to Endpoint1.</span></span>
- <span data-ttu-id="b7c79-227">지역이 한 끝점에만 매핑될 수 있으므로 Traffic Manager는 끝점이 정상인지 여부에 관계없이 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-227">Since a region can be mapped only to one endpoint, Traffic Manager returns it regardless of whether the endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="b7c79-228">지리적 라우팅 방법을 사용하는 고객은 각각에 두 개 이상의 끝점이 포함된 자식 프로필이 있는 중첩 형식 끝점과 연결하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-228">It is strongly recommended that customers using the geographic routing method associate it with the Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="b7c79-229">일치하는 끝점이 있고 해당 끝점이 **중지된** 상태이면 Traffic Manager는 NODATA 응답을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-229">If an endpoint match is found and that endpoint is in the **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="b7c79-230">이 경우 지리적 지역 계층 구조의 상위 수준에서 더 이상 조회가 수행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-230">In this case, no further lookups is made higher up in the geographic region hierarchy.</span></span> <span data-ttu-id="b7c79-231">이 동작은 하위 프로필이 **중지됨** 또는 **비활성화** 상태인 경우 중첩 끝점 유형에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-231">This behavior is also applicable for nested endpoint types when the child profile is in the **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="b7c79-232">**사용 안 함** 상태로 표시되는 끝점은 지역 일치 프로세스에 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-232">If an endpoint displays a **Disabled** status, it won’t be included in the region matching process.</span></span> <span data-ttu-id="b7c79-233">이 동작은 끝점이 **비활성화** 상태인 경우 중첩 끝점 유형에도 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-233">This behavior is also applicable for nested endpoint types when the endpoint is in the **Disabled** state.</span></span>
- <span data-ttu-id="b7c79-234">쿼리가 해당 프로필에 매핑이 없는 지리적 지역에서 수행된 경우 Traffic Manager는 NODATA 응답을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="b7c79-235">따라서 고객은 이상적으로 중첩 형식이며, 자식 프로필 내에 두 개 이상의 끝점이 있고, **전 세계** 지역이 할당되어 있는 하나의 끝점과 함께 지리적 라우팅을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within the child profile, with the region **World** assigned to it.</span></span> <span data-ttu-id="b7c79-236">이렇게 하면 지역에 매핑되지 않는 IP 주소도 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-236">This also ensures that any IP addresses that do not map to a region are handled.</span></span>

<span data-ttu-id="b7c79-237">[Traffic Manager 작동 방식](traffic-manager-how-traffic-manager-works.md)에 설명된 대로 Traffic Manager는 클라이언트에서 직접 DNS 쿼리를 수신하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="b7c79-238">대신, DNS 쿼리는 클라이언트를 사용하도록 구성한 재귀 DNS 서비스에서 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-238">Rather, DNS queries come from the recursive DNS service that the clients are configured to use.</span></span> <span data-ttu-id="b7c79-239">따라서 지역을 결정하는 데 사용되는 IP 주소는 클라이언트의 IP 주소가 아니라 재귀 DNS 서비스의 IP 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-239">Therefore, the IP address used to determine the region is not the client's IP address, but it is the IP address of the recursive DNS service.</span></span> <span data-ttu-id="b7c79-240">실제로 이 IP 주소는 클라이언트에 유용한 프록시입니다.</span><span class="sxs-lookup"><span data-stu-id="b7c79-240">In practice, this IP address is a good proxy for the client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="b7c79-241">다음 단계</span><span class="sxs-lookup"><span data-stu-id="b7c79-241">Next steps</span></span>

<span data-ttu-id="b7c79-242">[Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="b7c79-242">Learn how to develop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="b7c79-243">[트래픽 관리자 프로필을 만드는](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="b7c79-243">Learn how to [create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png



