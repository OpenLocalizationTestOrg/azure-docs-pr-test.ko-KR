---
title: "트래픽 관리자-aaaAzure 트래픽 라우팅 메서드 | Microsoft Docs"
description: "이 문서 hello 다른 트래픽 라우팅 방법 트래픽 관리자에서 사용을 이해 하는 데 도움이 됩니다."
services: traffic-manager
documentationcenter: 
author: KumudD
manager: timlt
editor: 
ms.assetid: db1efbf6-6762-4c7a-ac99-675d4eeb54d0
ms.service: traffic-manager
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 07/13/2017
ms.author: kumud
ms.openlocfilehash: b3eeca63ab5f2b9cd4a3a6b6a8fd3e40059e32b5
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="traffic-manager-routing-methods"></a><span data-ttu-id="25e16-103">트래픽 관리자 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="25e16-103">Traffic Manager routing methods</span></span>

<span data-ttu-id="25e16-104">Azure 트래픽 관리자 지원 4 트래픽 라우팅 방법 toodetermine 어떻게 tooroute 네트워크 트래픽 toohello 다양 한 서비스 끝점입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-104">Azure Traffic Manager supports four traffic-routing methods toodetermine how tooroute network traffic toohello various service endpoints.</span></span> <span data-ttu-id="25e16-105">트래픽 관리자 hello 트래픽 라우팅 방법을 tooeach DNS 쿼리를 받을 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-105">Traffic Manager applies hello traffic-routing method tooeach DNS query it receives.</span></span> <span data-ttu-id="25e16-106">hello 트래픽 라우팅을 메서드 hello DNS 응답에 반환 되는 끝점을 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-106">hello traffic-routing method determines which endpoint returned in hello DNS response.</span></span>

<span data-ttu-id="25e16-107">Traffic Manager에서 사용할 수 있는 네 가지 트래픽 라우팅 메서드가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-107">There are four traffic routing methods available in Traffic Manager:</span></span>

* <span data-ttu-id="25e16-108">**[우선 순위](#priority):** 선택 **우선 순위** 모든 트래픽에 대 한 toouse 기본 서비스 끝점을 선택 하 고 hello 기본 또는 백업 끝점이 hello 사용할 수 없는 경우 백업을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-108">**[Priority](#priority):** Select **Priority** when you want toouse a primary service endpoint for all traffic, and provide backups in case hello primary or hello backup endpoints are unavailable.</span></span>
* <span data-ttu-id="25e16-109">**[가 중](#weighted):** 선택 **가 중** 하려는 경우 toodistribute 트래픽을 끝점 집합에서 하거나 균등 하 게 또는 따라 tooweights 정의 하는 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-109">**[Weighted](#weighted):** Select **Weighted** when you want toodistribute traffic across a set of endpoints, either evenly or according tooweights, which you define.</span></span>
* <span data-ttu-id="25e16-110">**[성능](#performance):** 선택 **성능** 끝점 서로 다른 지리적 위치에 있는 경우 있고 hello 가장 낮은 네트워크 지연 시간의 측면에서 최종 사용자에 게 toouse hello "가장 가까운" 끝점을 하려는 경우.</span><span class="sxs-lookup"><span data-stu-id="25e16-110">**[Performance](#performance):** Select **Performance** when you have endpoints in different geographic locations and you want end users toouse hello "closest" endpoint in terms of hello lowest network latency.</span></span>
* <span data-ttu-id="25e16-111">**[지리적](#geographic):** 선택 **지리적** DNS 쿼리에서 제공 되는 지리적 위치에 따라 toospecific 방향이 지정 된 끝점 (Azure, 외부, 또는 중첩) 사용자가 없도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-111">**[Geographic](#geographic):** Select **Geographic** so that users are directed toospecific endpoints (Azure, External, or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="25e16-112">이렇게 하면 트래픽 관리자 고객 tooenable 시나리오 사용자의 지리적 지역을 파악 하 고 그에 따라 라우팅하고 중요 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-112">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="25e16-113">데이터 독립성 지시 사항, 콘텐츠 및 사용자 환경의 지역화를 준수하고 다른 지역의 트래픽을 측정하는 작업을 예로 들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-113">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>

<span data-ttu-id="25e16-114">모든 Traffic Manager 프로필에는 끝점 상태 및 자동 끝점 장애 조치(Failover)의 모니터링이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-114">All Traffic Manager profiles include monitoring of endpoint health and automatic endpoint failover.</span></span> <span data-ttu-id="25e16-115">자세한 내용은 [트래픽 관리자 끝점 모니터링](traffic-manager-monitoring.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="25e16-115">For more information, see [Traffic Manager Endpoint Monitoring](traffic-manager-monitoring.md).</span></span> <span data-ttu-id="25e16-116">단일 트래픽 관리자 프로필은 1가지 트래픽 라우팅 방법만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-116">A single Traffic Manager profile can use only one traffic routing method.</span></span> <span data-ttu-id="25e16-117">언제든지 프로필에 대해 다른 트래픽 라우팅 방법을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-117">You can select a different traffic routing method for your profile at any time.</span></span> <span data-ttu-id="25e16-118">1분 안에 변경 내용이 적용되며 가동 중지는 발생하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-118">Changes are applied within one minute, and no downtime is incurred.</span></span> <span data-ttu-id="25e16-119">중첩 트래픽 관리자 프로필을 사용하여 트래픽 라우팅 방법을 결합할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-119">Traffic-routing methods can be combined by using nested Traffic Manager profiles.</span></span> <span data-ttu-id="25e16-120">중첩 정교 하 고 유연한 트래픽 라우팅 구성을 더 큰 복잡 한 응용 프로그램의 hello 요구를 충족 하는 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-120">Nesting enables sophisticated and flexible traffic-routing configurations that meet hello needs of larger, complex applications.</span></span> <span data-ttu-id="25e16-121">자세한 내용은 [중첩 Traffic Manager 프로필](traffic-manager-nested-profiles.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="25e16-121">For more information, see [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>

## <span data-ttu-id="25e16-122"><a name = "priority"></a>우선 순위 트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="25e16-122"><a name = "priority"></a>Priority traffic-routing method</span></span>

<span data-ttu-id="25e16-123">종종 조직 자신의 기본 서비스가 중단 될 경우 하나 이상의 백업 서비스를 배포 하 여 해당 서비스에 대 한 tooprovide 안정성을 하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-123">Often an organization wants tooprovide reliability for its services by deploying one or more backup services in case their primary service goes down.</span></span> <span data-ttu-id="25e16-124">hello 'Priority' 트래픽 라우팅 메서드를 사용 하면 Azure 고객 tooeasily이 장애 조치 패턴을 구현 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-124">hello 'Priority' traffic-routing method allows Azure customers tooeasily implement this failover pattern.</span></span>

![Azure Traffic Manager '우선 순위' 트래픽 라우팅 메서드][1]

<span data-ttu-id="25e16-126">hello 트래픽 관리자 프로필에는 서비스 끝점의 우선 순위 목록을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-126">hello Traffic Manager profile contains a prioritized list of service endpoints.</span></span> <span data-ttu-id="25e16-127">기본적으로 트래픽 관리자는 모든 트래픽을 toohello 기본 (가장 높은 우선 순위) 끝점을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-127">By default, Traffic Manager sends all traffic toohello primary (highest-priority) endpoint.</span></span> <span data-ttu-id="25e16-128">Hello 기본 끝점에 사용할 수 없는 경우 트래픽 관리자 경로 hello 트래픽 toohello 두 번째 끝점입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-128">If hello primary endpoint is not available, Traffic Manager routes hello traffic toohello second endpoint.</span></span> <span data-ttu-id="25e16-129">두 hello 기본 및 보조 끝점을 사용할 수 없는 경우 세 번째로 등과 hello 트래픽은 toohello를 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-129">If both hello primary and secondary endpoints are not available, hello traffic goes toohello third, and so on.</span></span> <span data-ttu-id="25e16-130">Hello 구성 상태 (사용 또는 사용 하지 않도록 설정)를 기반으로 하는 hello 끝점의 가용성 및 지속적인 끝점 모니터링을 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-130">Availability of hello endpoint is based on hello configured status (enabled or disabled) and hello ongoing endpoint monitoring.</span></span>

### <a name="configuring-endpoints"></a><span data-ttu-id="25e16-131">끝점 구성</span><span class="sxs-lookup"><span data-stu-id="25e16-131">Configuring endpoints</span></span>

<span data-ttu-id="25e16-132">각 끝점에 대 한 hello 'priority' 속성을 사용 하 여 명시적 hello 끝점 우선 순위를 구성할 Azure 리소스 관리자와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-132">With Azure Resource Manager, you configure hello endpoint priority explicitly using hello 'priority' property for each endpoint.</span></span> <span data-ttu-id="25e16-133">이 속성은 1에서 1000 사이의 값입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-133">This property is a value between 1 and 1000.</span></span> <span data-ttu-id="25e16-134">값이 낮을수록 더 높은 우선 순위를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-134">Lower values represent a higher priority.</span></span> <span data-ttu-id="25e16-135">끝점은 우선 순위 값을 공유할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-135">Endpoints cannot share priority values.</span></span> <span data-ttu-id="25e16-136">Hello 속성을 설정 하는 것은 선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-136">Setting hello property is optional.</span></span> <span data-ttu-id="25e16-137">생략 하면 hello 끝점 순서에 따라 기본 우선 순위 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-137">When omitted, a default priority based on hello endpoint order is used.</span></span>

##<span data-ttu-id="25e16-138"><a name = "weighted"></a>가중 트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="25e16-138"><a name = "weighted"></a>Weighted traffic-routing method</span></span>
<span data-ttu-id="25e16-139">hello '가 중' 트래픽 라우팅 방법을 사용 하면 toodistribute 트래픽을 균등 하 게 또는 toouse 미리 정의 된 가중치입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-139">hello 'Weighted' traffic-routing method allows you toodistribute traffic evenly or toouse a pre-defined weighting.</span></span>

![Azure Traffic Manager '가중' 트래픽 라우팅 메서드][2]

<span data-ttu-id="25e16-141">Hello 가중치가 적용 된 트래픽 라우팅 방법에서 가중치 tooeach 끝점 hello 트래픽 관리자 프로필을 구성에 할당합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-141">In hello Weighted traffic-routing method, you assign a weight tooeach endpoint in hello Traffic Manager profile configuration.</span></span> <span data-ttu-id="25e16-142">hello 가중치는 1 too1000 까지의 정수입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-142">hello weight is an integer from 1 too1000.</span></span> <span data-ttu-id="25e16-143">이 매개 변수는 선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-143">This parameter is optional.</span></span> <span data-ttu-id="25e16-144">생략되면 Traffic Manager는 '1'이라는 기본 가중치를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-144">If omitted, Traffic Managers uses a default weight of '1'.</span></span>

<span data-ttu-id="25e16-145">Traffic Manager는 수신한 각 DNS 쿼리에 대해 사용 가능한 끝점을 임의로 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-145">For each DNS query received, Traffic Manager randomly chooses an available endpoint.</span></span> <span data-ttu-id="25e16-146">끝점을 선택할 때의 hello 확률 tooall 사용 가능한 끝점을 할당 하는 hello 가중치를 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-146">hello probability of choosing an endpoint is based on hello weights assigned tooall available endpoints.</span></span> <span data-ttu-id="25e16-147">모든 끝점 결과도 트래픽 배포에 걸쳐 무게 hello를 사용 하 여 동일 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-147">Using hello same weight across all endpoints results in an even traffic distribution.</span></span> <span data-ttu-id="25e16-148">특정 끝점에서 위 또는 아래로 가중치를 사용 하 여 해당 끝점 toobe 자주 보내거나 가끔 hello DNS 응답에 반환 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-148">Using higher or lower weights on specific endpoints causes those endpoints toobe returned more or less frequently in hello DNS responses.</span></span>

<span data-ttu-id="25e16-149">가 중 hello 메서드를 사용 하면 몇 가지 유용한 시나리오:</span><span class="sxs-lookup"><span data-stu-id="25e16-149">hello weighted method enables some useful scenarios:</span></span>

* <span data-ttu-id="25e16-150">응용 프로그램의 단계적 업그레이드: 트래픽 tooroute tooa 새 끝점을 백분율로 할당 하 고 시간 too100 %hello 트래픽을 점진적으로 증가 시킵니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-150">Gradual application upgrade: Allocate a percentage of traffic tooroute tooa new endpoint, and gradually increase hello traffic over time too100%.</span></span>
* <span data-ttu-id="25e16-151">응용 프로그램 마이그레이션 tooAzure: Azure 및 외부 끝점으로 프로필을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-151">Application migration tooAzure: Create a profile with both Azure and external endpoints.</span></span> <span data-ttu-id="25e16-152">Hello 끝점 tooprefer hello 새 끝점의 hello 가중치를 조정 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-152">Adjust hello weight of hello endpoints tooprefer hello new endpoints.</span></span>
* <span data-ttu-id="25e16-153">추가 용량을 위한 클라우드 전환: 신속 하 게 사용 하 여 트래픽 관리자 프로필 뒤 hello 클라우드로 온-프레미스 배포를 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-153">Cloud-bursting for additional capacity: Quickly expand an on-premises deployment into hello cloud by putting it behind a Traffic Manager profile.</span></span> <span data-ttu-id="25e16-154">Hello 클라우드에 추가 용량이 필요한 경우 추가 하 고 하거나 더 많은 끝점을 사용 하도록 설정 하 고, 어떤 정도의 트래픽이 향하게 tooeach 끝점 지정 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-154">When you need extra capacity in hello cloud, you can add or enable more endpoints and specify what portion of traffic goes tooeach endpoint.</span></span>

<span data-ttu-id="25e16-155">hello Azure 리소스 관리자 포털에는 중된 트래픽 라우팅을 hello 구성을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-155">hello Resource Manager Azure portal supports hello configuration of weighted traffic routing.</span></span>  <span data-ttu-id="25e16-156">Hello 리소스 관리자 버전의 Azure PowerShell, CLI 및 hello REST Api를 사용 하 여 가중치를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-156">You can configure weights using hello Resource Manager versions of Azure PowerShell, CLI, and hello REST APIs.</span></span>

<span data-ttu-id="25e16-157">것이 중요 한 toounderstand DNS 응답이 클라이언트에서 캐시 및 클라이언트 hello hello 재귀 DNS 서버에 의해 tooresolve DNS 이름을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-157">It is important toounderstand that DNS responses are cached by clients and by hello recursive DNS servers that hello clients use tooresolve DNS names.</span></span> <span data-ttu-id="25e16-158">이 캐싱은 가중 트래픽 분산에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-158">This caching can have an impact on weighted traffic distributions.</span></span> <span data-ttu-id="25e16-159">클라이언트 및 재귀 DNS 서버 hello 수가 큰 경우 트래픽 분배로 인해 예상 대로 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-159">When hello number of clients and recursive DNS servers is large, traffic distribution works as expected.</span></span> <span data-ttu-id="25e16-160">그러나 hello 클라이언트 또는 재귀 DNS 서버 수가 작을 때 캐싱 수를 상당히 왜곡 시킬 hello 트래픽 분배로 인해 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-160">However, when hello number of clients or recursive DNS servers is small, caching can significantly skew hello traffic distribution.</span></span>

<span data-ttu-id="25e16-161">일반 사용 사례는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-161">Common use cases include:</span></span>

* <span data-ttu-id="25e16-162">개발 및 테스트 환경</span><span class="sxs-lookup"><span data-stu-id="25e16-162">Development and testing environments</span></span>
* <span data-ttu-id="25e16-163">응용 프로그램 간 통신</span><span class="sxs-lookup"><span data-stu-id="25e16-163">Application-to-application communications</span></span>
* <span data-ttu-id="25e16-164">일반적인 재귀 DNS 인프라를 공유하는 좁은 사용자 기반을 목표로 하는 응용 프로그램(예: 프록시를 통해 연결하는 회사의 직원)</span><span class="sxs-lookup"><span data-stu-id="25e16-164">Applications aimed at a narrow user-base that share a common recursive DNS infrastructure (for example, employees of company connecting through a proxy)</span></span>

<span data-ttu-id="25e16-165">이러한 DNS 캐싱 효과 일반적인 tooall DNS 기반 트래픽 라우팅 시스템을 뿐 아니라 Azure 트래픽 관리자입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-165">These DNS caching effects are common tooall DNS-based traffic routing systems, not just Azure Traffic Manager.</span></span> <span data-ttu-id="25e16-166">경우에 따라 명시적으로 hello DNS 캐시를 지우는 해결 방법을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-166">In some cases, explicitly clearing hello DNS cache may provide a workaround.</span></span> <span data-ttu-id="25e16-167">대체 트래픽 라우팅 방법이 더 적절한 경우도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-167">In other cases, an alternative traffic-routing method may be more appropriate.</span></span>

## <span data-ttu-id="25e16-168"><a name = "performance"></a>성능 트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="25e16-168"><a name = "performance"></a>Performance traffic-routing method</span></span>

<span data-ttu-id="25e16-169">Hello 전세계 둘 이상의 위치에서 끝점을 배포 합니다. '가장 가까운' tooyou 있는 라우팅 트래픽 toohello 위치 하 여 많은 응용 프로그램의 hello 응답성을 향상할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-169">Deploying endpoints in two or more locations across hello globe can improve hello responsiveness of many applications by routing traffic toohello location that is 'closest' tooyou.</span></span> <span data-ttu-id="25e16-170">hello 'Performance' 트래픽 라우팅 메서드는이 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-170">hello 'Performance' traffic-routing method provides this capability.</span></span>

![Azure Traffic Manager '성능' 트래픽 라우팅 메서드][3]

<span data-ttu-id="25e16-172">hello '가장 가까운' 끝점 지리적 거리를 기준으로 가장 가까운 필요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-172">hello 'closest' endpoint is not necessarily closest as measured by geographic distance.</span></span> <span data-ttu-id="25e16-173">대신, hello 'Performance' 트래픽 라우팅 방법 네트워크 대기 시간을 측정 하 여 hello 가장 가까운 끝점을 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-173">Instead, hello 'Performance' traffic-routing method determines hello closest endpoint by measuring network latency.</span></span> <span data-ttu-id="25e16-174">트래픽 관리자는 인터넷 대기 시간 테이블 tootrack hello 왕복 시간 IP 주소 범위와 각 Azure 데이터 센터 간에 유지 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-174">Traffic Manager maintains an Internet Latency Table tootrack hello round-trip time between IP address ranges and each Azure datacenter.</span></span>

<span data-ttu-id="25e16-175">트래픽 관리자는 hello 인터넷 대기 시간 테이블에서에서 hello 들어오는 DNS 요청의 hello 원본 IP 주소를 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-175">Traffic Manager looks up hello source IP address of hello incoming DNS request in hello Internet Latency Table.</span></span> <span data-ttu-id="25e16-176">트래픽 관리자는 hello 해당 IP 주소 범위에 대 한 hello 지연이 적습니다 다음 hello DNS 응답에에서 해당 끝점을 반환 하는 Azure 데이터 센터에서에서 사용 가능한 끝점을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-176">Traffic Manager chooses an available endpoint in hello Azure datacenter that has hello lowest latency for that IP address range, then returns that endpoint in hello DNS response.</span></span>

<span data-ttu-id="25e16-177">[Traffic Manager 작동 방식](traffic-manager-overview.md#how-traffic-manager-works)에 설명된 대로 Traffic Manager는 클라이언트에서 직접 DNS 쿼리를 수신하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-177">As explained in [How Traffic Manager Works](traffic-manager-overview.md#how-traffic-manager-works), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="25e16-178">대신, DNS 쿼리는 해당 hello 클라이언트는 구성 된 toouse hello 재귀 DNS 서비스에서 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-178">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="25e16-179">따라서 hello IP 주소 사용 toodetermine hello '가장 가까운' 끝점이 있지 않으면 hello 클라이언트의 IP 주소 이지만 hello 재귀 DNS 서비스의 IP 주소 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-179">Therefore, hello IP address used toodetermine hello 'closest' endpoint is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="25e16-180">실제로이 IP 주소는 클라이언트 hello에 대 한 좋은 프록시.</span><span class="sxs-lookup"><span data-stu-id="25e16-180">In practice, this IP address is a good proxy for hello client.</span></span>


<span data-ttu-id="25e16-181">트래픽 관리자 정기적으로 업데이트의 변경 내용에 대 한 인터넷 대기 시간 테이블 tooaccount hello 글로벌 인터넷 및 새 Azure 지역 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-181">Traffic Manager regularly updates hello Internet Latency Table tooaccount for changes in hello global Internet and new Azure regions.</span></span> <span data-ttu-id="25e16-182">그러나 응용 프로그램 성능에 따라 다르게 부하의 실시간 변형이 hello 인터넷에서.</span><span class="sxs-lookup"><span data-stu-id="25e16-182">However, application performance varies based on real-time variations in load across hello Internet.</span></span> <span data-ttu-id="25e16-183">성능 트래픽 라우팅은 지정된 서비스 끝점에 대한 부하를 모니터링하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-183">Performance traffic-routing does not monitor load on a given service endpoint.</span></span> <span data-ttu-id="25e16-184">그러나 끝점을 사용할 수 없는 경우 Traffic Manager는 해당 끝점을 DNS 쿼리 응답에 포함하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-184">However, if an endpoint becomes unavailable, Traffic Manager does not include it in DNS query responses.</span></span>


<span data-ttu-id="25e16-185">포인트 toonote:</span><span class="sxs-lookup"><span data-stu-id="25e16-185">Points toonote:</span></span>

* <span data-ttu-id="25e16-186">프로필에서 여러 끝점을 포함 하는 경우 트래픽 관리자 트래픽을 분산 균등 하 게 해당 지역에서 사용 가능한 끝점 hello 다음 같은 Azure 지역 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-186">If your profile contains multiple endpoints in hello same Azure region, then Traffic Manager distributes traffic evenly across hello available endpoints in that region.</span></span> <span data-ttu-id="25e16-187">지역 내에서 다른 트래픽 분산을 원하는 경우 [중첩 Traffic Manager 프로필](traffic-manager-nested-profiles.md)을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-187">If you prefer a different traffic distribution within a region, you can use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="25e16-188">모든 끝점에 가장 가까운 hello 사용 하는 경우 Azure 지역 저하 됩니다, 그리고 트래픽 관리자 hello 다음 가장 가까운 Azure 지역에 트래픽을 toohello 끝점을 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-188">If all enabled endpoints in hello closest Azure region are degraded, Traffic Manager moves traffic toohello endpoints in hello next closest Azure region.</span></span> <span data-ttu-id="25e16-189">기본 장애 조치 순서 toodefine 사용 [트래픽 관리자 프로필을 중첩](traffic-manager-nested-profiles.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-189">If you want toodefine a preferred failover sequence, use [nested Traffic Manager profiles](traffic-manager-nested-profiles.md).</span></span>
* <span data-ttu-id="25e16-190">Hello 성능 트래픽 라우팅 방법을 외부 끝점 또는 중첩 된 끝점을 사용할 경우 해당 끝점의 toospecify hello 위치를 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-190">When using hello Performance traffic routing method with external endpoints or nested endpoints, you need toospecify hello location of those endpoints.</span></span> <span data-ttu-id="25e16-191">Hello Azure 지역 가장 가까운 tooyour 배포를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-191">Choose hello Azure region closest tooyour deployment.</span></span> <span data-ttu-id="25e16-192">이러한 위치는 hello 인터넷 대기 시간 테이블에서 지 원하는 hello 값입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-192">Those locations are hello values supported by hello Internet Latency Table.</span></span>
* <span data-ttu-id="25e16-193">hello 끝점을 선택 하는 hello 알고리즘은 결정적입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-193">hello algorithm that chooses hello endpoint is deterministic.</span></span> <span data-ttu-id="25e16-194">동일한 클라이언트는 hello에서 DNS 쿼리 전송 toohello 반복 동일한 끝점입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-194">Repeated DNS queries from hello same client are directed toohello same endpoint.</span></span> <span data-ttu-id="25e16-195">일반적으로 클라이언트는 이동할 때 다른 재귀 DNS 서버를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-195">Typically, clients use different recursive DNS servers when traveling.</span></span> <span data-ttu-id="25e16-196">클라이언트 hello 라우트된 tooa 다른 끝점 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-196">hello client may be routed tooa different endpoint.</span></span> <span data-ttu-id="25e16-197">라우팅도 영향을 받을 수 업데이트 toohello 인터넷 대기 시간 테이블입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-197">Routing can also be affected by updates toohello Internet Latency Table.</span></span> <span data-ttu-id="25e16-198">따라서 성능 트래픽 라우팅을 메서드는 클라이언트는 항상 보증 하지 않습니다 hello 라우팅된 toohello 동일한 끝점입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-198">Therefore, hello Performance traffic-routing method does not guarantee that a client is always routed toohello same endpoint.</span></span>
* <span data-ttu-id="25e16-199">인터넷 대기 시간 테이블 hello 변경 될 때 해당 일부 클라이언트는 방향이 지정 된 tooa 다른 끝점을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-199">When hello Internet Latency Table changes, you may notice that some clients are directed tooa different endpoint.</span></span> <span data-ttu-id="25e16-200">이 라우팅 변경 내용은 현재 대기 시간 데이터에 따라 더 정확합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-200">This routing change is more accurate based on current latency data.</span></span> <span data-ttu-id="25e16-201">이러한 업데이트는 성능 트래픽 라우팅 인터넷 계속 발전 hello로의 필수 toomaintain hello 정확도 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-201">These updates are essential toomaintain hello accuracy of Performance traffic-routing as hello Internet continually evolves.</span></span>

## <span data-ttu-id="25e16-202"><a name = "geographic"></a>지리적 트래픽 라우팅 방법</span><span class="sxs-lookup"><span data-stu-id="25e16-202"><a name = "geographic"></a>Geographic traffic-routing method</span></span>

<span data-ttu-id="25e16-203">트래픽 관리자 프로필에 구성 된 toouse hello에서 지리 toospecific 끝점 (Azure, 외부 또는 중첩)가 DNS 쿼리에서 지리적 위치에 따라 사용자가 보내지는지 있도록 메서드 라우팅이 발생 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-203">Traffic Manager profiles can be configured toouse hello Geographic routing method so that users are directed toospecific endpoints (Azure, External or Nested) based on which geographic location their DNS query originates from.</span></span> <span data-ttu-id="25e16-204">이렇게 하면 트래픽 관리자 고객 tooenable 시나리오 사용자의 지리적 지역을 파악 하 고 그에 따라 라우팅하고 중요 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-204">This empowers Traffic Manager customers tooenable scenarios where knowing a user’s geographic region and routing them based on that is important.</span></span> <span data-ttu-id="25e16-205">데이터 독립성 지시 사항, 콘텐츠 및 사용자 환경의 지역화를 준수하고 다른 지역의 트래픽을 측정하는 작업을 예로 들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-205">Examples include complying with data sovereignty mandates, localization of content & user experience and measuring traffic from different regions.</span></span>
<span data-ttu-id="25e16-206">프로필은 지리적 라우팅을 위해 구성 된, 각 끝점 연결 된 프로필에 할당 된 지역 tooit 집합이 toohave 필요 함을.</span><span class="sxs-lookup"><span data-stu-id="25e16-206">When a profile is configured for geographic routing, each endpoint associated with that profile needs toohave a set of geographic regions assigned tooit.</span></span> <span data-ttu-id="25e16-207">지리적 지역은 다음과 같은 수준으로 세분화될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-207">A geographic region can be at following levels of granularity</span></span> 
- <span data-ttu-id="25e16-208">세계–모든 지역</span><span class="sxs-lookup"><span data-stu-id="25e16-208">World– any region</span></span>
- <span data-ttu-id="25e16-209">지역 그룹화 - 예: 아프리카, 중동, 오스트레일리아/태평양 등</span><span class="sxs-lookup"><span data-stu-id="25e16-209">Regional Grouping – for example, Africa, Middle East, Australia/Pacific etc.</span></span> 
- <span data-ttu-id="25e16-210">국가/지역 - 예: 아일랜드, 페루, 홍콩 특별 행정구 등</span><span class="sxs-lookup"><span data-stu-id="25e16-210">Country/Region – for example, Ireland, Peru, Hong Kong SAR etc.</span></span> 
- <span data-ttu-id="25e16-211">시/도 - 예: 미국-캘리포니아, 오스트레일리아-퀸즐랜드, 캐나다-앨버타 등(참고: 이 세분성 수준은 오스트레일리아, 캐나다, 영국 및 미국의 주/지방에서만 지원됨).</span><span class="sxs-lookup"><span data-stu-id="25e16-211">State/Province – for example, USA-California, Australia-Queensland, Canada-Alberta etc. (note: this granularity level is supported only for states / provinces in Australia, Canada, UK, and USA).</span></span>

<span data-ttu-id="25e16-212">영역 또는 영역 집합 tooan 끝점 할당 된 경우 해당 영역에서 모든 요청 라우트된만 toothat 끝점을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-212">When a region or a set of regions is assigned tooan endpoint, any requests from those regions gets routed only toothat endpoint.</span></span> <span data-ttu-id="25e16-213">트래픽 관리자는 hello hello DNS 쿼리 toodetermine hello 영역 있는 사용자는 쿼리 하는 – 일반적으로이 hello hello 사용자를 대신 하 여 hello 쿼리를 수행 하는 로컬 DNS 확인자의 hello IP 주소가 원본 IP 주소를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-213">Traffic Manager uses hello source IP address of hello DNS query toodetermine hello region from which a user is querying from – usually this is hello IP address of hello local DNS resolver doing hello query on behalf of hello user.</span></span>  

![Azure Traffic Manager '지리적' 트래픽 라우팅 메서드](./media/traffic-manager-routing-methods/geographic.png)

<span data-ttu-id="25e16-215">트래픽 관리자 DNS 쿼리 hello hello 원본 IP 주소를 읽고 어떤 지역에서 발생 하는 것을 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-215">Traffic Manager reads hello source IP address of hello DNS query and decides which geographic region it is originating from.</span></span> <span data-ttu-id="25e16-216">그런 다음이 지역 매핑된 tooit을 가진 끝점을 없을 경우 toosee를 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-216">It then looks toosee if there is an endpoint that has this geographic region mapped tooit.</span></span> <span data-ttu-id="25e16-217">이 조회 hello 최하위 세분성 수준 (시/도는, 그렇지 않으면 hello 국가/지역 수준에서)에서 시작 나타나고 모든 hello 반복 해 toohello 최고 수준인 **세계**합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-217">This lookup starts at hello lowest granularity level (State/Province where it is supported, else at hello Country/Region level) and goes all hello way up toohello highest level, which is **World**.</span></span> <span data-ttu-id="25e16-218">hello 첫 번째 일치 항목이이 이동이를 사용 하 여 hello 끝점 tooreturn hello 쿼리 응답에 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-218">hello first match found using this traversal is designated as hello endpoint tooreturn in hello query response.</span></span> <span data-ttu-id="25e16-219">중첩 형식 끝점과 일치하는 경우 해당 라우팅 방법을 기준으로 자식 프로필 내의 끝점이 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-219">When matching with a Nested type endpoint, an endpoint within that child profile is returned, based on its routing method.</span></span> <span data-ttu-id="25e16-220">hello 포인트 다음은 적용 가능한 toothis 동작입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-220">hello following points are applicable toothis behavior:</span></span>

- <span data-ttu-id="25e16-221">지리적인 지역의 지리적 라우팅 hello 라우팅 형식이 때 트래픽 관리자 프로필에서 매핑된 전용 tooone 끝점 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-221">A geographic region can be mapped only tooone endpoint in a Traffic Manager profile when hello routing type is Geographic Routing.</span></span> <span data-ttu-id="25e16-222">이렇게 하면 사용자 라우팅이 결정적이며 고객이 모호하지 않은 지리적 경계가 필요한 시나리오를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-222">This ensures that routing of users is deterministic, and customers can enable scenarios that require unambiguous geographic boundaries.</span></span>
- <span data-ttu-id="25e16-223">사용자의 지역 지리적 매핑 아래에서 두 개의 다른 끝점의 경우, 트래픽 관리자는 hello 최소 단위 hello 끝점을 선택 하 고 해당 지역 toohello의 라우팅 요청을 다른 끝점을 고려 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-223">If a user’s region comes under two different endpoints’ geographic mapping, Traffic Manager selects hello endpoint with hello lowest granularity and does not consider routing requests from that region toohello other endpoint.</span></span> <span data-ttu-id="25e16-224">예를 들어 Endpoint1과 Endpoint2라는 두 개의 끝점이 있는 지리적 라우팅 형식 프로필을 고려해 보세요.</span><span class="sxs-lookup"><span data-stu-id="25e16-224">For example, consider a Geographic Routing type profile with two endpoints - Endpoint1 and Endpoint2.</span></span> <span data-ttu-id="25e16-225">Endpoint1 구성 된 tooreceive 트래픽이 아일랜드 및 Endpoint2에서 구성 된 유럽에서 tooreceive 트래픽을 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-225">Endpoint1 is configured tooreceive traffic from Ireland and Endpoint2 is configured tooreceive traffic from Europe.</span></span> <span data-ttu-id="25e16-226">요청 아일랜드에서 시작, 경우 항상 라우트된 tooEndpoint1입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-226">If a request originates from Ireland, it is always routed tooEndpoint1.</span></span>
- <span data-ttu-id="25e16-227">영역 매핑된 전용 tooone 끝점 수 있으므로, 트래픽 관리자 끝점 hello 정상 인지 여부에 관계 없이 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-227">Since a region can be mapped only tooone endpoint, Traffic Manager returns it regardless of whether hello endpoint is healthy or not.</span></span>

    >[!IMPORTANT]
    ><span data-ttu-id="25e16-228">Hello 지리적 라우팅 메서드를 사용 하는 고객 연결할 수 있도록 hello 중첩 형식 끝점을 자식 프로필을 각각 내에서 두 개 이상의 끝점을 포함 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-228">It is strongly recommended that customers using hello geographic routing method associate it with hello Nested type endpoints that has child profiles containing at least two endpoints within each.</span></span>
- <span data-ttu-id="25e16-229">끝점 일치 하는 항목이 고 hello에 해당 끝점은 **Stopped** 상태 이면 트래픽 관리자 NODATA 응답을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-229">If an endpoint match is found and that endpoint is in hello **Stopped** state, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="25e16-230">이 경우 더 이상 없는 조회 hello 지리적 영역 계층 구조에서 올리십시오 설정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-230">In this case, no further lookups is made higher up in hello geographic region hierarchy.</span></span> <span data-ttu-id="25e16-231">이 동작은 hello 자식 프로필 hello 중인 경우에 중첩된 끝점 유형에 적용 됩니다 **Stopped** 또는 **비활성화** 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-231">This behavior is also applicable for nested endpoint types when hello child profile is in hello **Stopped** or **Disabled** state.</span></span>
- <span data-ttu-id="25e16-232">끝점을 표시 하는 경우는 **비활성화 된** 상태, 일치 하는 프로세스는 hello 영역에 포함 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-232">If an endpoint displays a **Disabled** status, it won’t be included in hello region matching process.</span></span> <span data-ttu-id="25e16-233">이 동작은 hello 끝점 hello 중인 경우에 중첩된 끝점 유형에 적용 됩니다 **비활성화** 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-233">This behavior is also applicable for nested endpoint types when hello endpoint is in hello **Disabled** state.</span></span>
- <span data-ttu-id="25e16-234">쿼리가 해당 프로필에 매핑이 없는 지리적 지역에서 수행된 경우 Traffic Manager는 NODATA 응답을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-234">If a query is coming from a geographic region that has no mapping in that profile, Traffic Manager returns a NODATA response.</span></span> <span data-ttu-id="25e16-235">따라서 하는 것이 좋습니다을 사용 하는 하나의 끝점에 이상적 형식의 중첩 hello 영역과 hello 자식 프로필 내에 적어도 두 개의 끝점으로 지리적 라우팅 **세계** tooit를 할당 합니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-235">Therefore, it is strongly recommended that customers use geographic routing with one endpoint, ideally of type Nested with at least two endpoints within hello child profile, with hello region **World** assigned tooit.</span></span> <span data-ttu-id="25e16-236">이렇게 하면 tooa 영역에 매핑되지 않는 모든 IP 주소 처리 됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-236">This also ensures that any IP addresses that do not map tooa region are handled.</span></span>

<span data-ttu-id="25e16-237">[Traffic Manager 작동 방식](traffic-manager-how-traffic-manager-works.md)에 설명된 대로 Traffic Manager는 클라이언트에서 직접 DNS 쿼리를 수신하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-237">As explained in [How Traffic Manager Works](traffic-manager-how-traffic-manager-works.md), Traffic Manager does not receive DNS queries directly from clients.</span></span> <span data-ttu-id="25e16-238">대신, DNS 쿼리는 해당 hello 클라이언트는 구성 된 toouse hello 재귀 DNS 서비스에서 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-238">Rather, DNS queries come from hello recursive DNS service that hello clients are configured toouse.</span></span> <span data-ttu-id="25e16-239">따라서 hello IP 주소 사용 toodetermine hello 지역 클라이언트의 IP 주소를 hello 이지만 hello 재귀 DNS 서비스의 IP 주소 hello 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="25e16-239">Therefore, hello IP address used toodetermine hello region is not hello client's IP address, but it is hello IP address of hello recursive DNS service.</span></span> <span data-ttu-id="25e16-240">실제로이 IP 주소는 클라이언트 hello에 대 한 좋은 프록시.</span><span class="sxs-lookup"><span data-stu-id="25e16-240">In practice, this IP address is a good proxy for hello client.</span></span>


## <a name="next-steps"></a><span data-ttu-id="25e16-241">다음 단계</span><span class="sxs-lookup"><span data-stu-id="25e16-241">Next steps</span></span>

<span data-ttu-id="25e16-242">자세한 방법을 사용 하 여 고가용성 응용 프로그램 toodevelop [트래픽 관리자 끝점 모니터링](traffic-manager-monitoring.md)</span><span class="sxs-lookup"><span data-stu-id="25e16-242">Learn how toodevelop high-availability applications using [Traffic Manager endpoint monitoring](traffic-manager-monitoring.md)</span></span>

<span data-ttu-id="25e16-243">너무 방법에 대해 알아봅니다[트래픽 관리자 프로필 만들기](traffic-manager-create-profile.md)</span><span class="sxs-lookup"><span data-stu-id="25e16-243">Learn how too[create a Traffic Manager profile](traffic-manager-create-profile.md)</span></span>

<!--Image references-->
[1]: ./media/traffic-manager-routing-methods/priority.png
[2]: ./media/traffic-manager-routing-methods/weighted.png
[3]: ./media/traffic-manager-routing-methods/performance.png



