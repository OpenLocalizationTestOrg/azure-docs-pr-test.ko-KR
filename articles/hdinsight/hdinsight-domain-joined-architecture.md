---
title: "Azure HDInsight 아키텍처 aaaDomain 가입 | Microsoft Docs"
description: "어떻게 tooplan 도메인에 가입 된 HDInsight에 알아봅니다."
services: hdinsight
documentationcenter: 
author: saurinsh
manager: jhubbard
editor: cgronlun
tags: azure-portal
ms.assetid: 7dc6847d-10d4-4b5c-9c83-cc513cf91965
ms.service: hdinsight
ms.custom: hdinsightactive
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: big-data
ms.date: 02/03/2017
ms.author: saurinsh
ms.openlocfilehash: 1c3ecedf3739b4f8fa54160225be9c1d6e2ca6cc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="plan-azure-domain-joined-hadoop-clusters-in-hdinsight"></a><span data-ttu-id="916ff-103">HDInsight에서 Azure 도메인에 가입된 Hadoop 클러스터 계획</span><span class="sxs-lookup"><span data-stu-id="916ff-103">Plan Azure domain-joined Hadoop clusters in HDInsight</span></span>

<span data-ttu-id="916ff-104">hello 기존의 Hadoop 클러스터가 단일 사용자입니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-104">hello traditional Hadoop is a single-user cluster.</span></span> <span data-ttu-id="916ff-105">대량 데이터 워크로드를 구축하는 작은 응용 프로그램 팀이 있는 대부분의 회사에 적합합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-105">It is suitable for most companies that have smaller application teams building large data workloads.</span></span> <span data-ttu-id="916ff-106">Hadoop이 인기를 끌면서 대부분의 기업이 클러스터를 IT 팀에서 관리하고 여러 응용 프로그램 팀이 클러스터를 공유하는 모델로 이동하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-106">As Hadoop gains popularity, many enterprises are moving toward a model in which clusters are managed by IT teams and multiple application teams share clusters.</span></span> <span data-ttu-id="916ff-107">따라서 기능 관련 된 다중 사용자 클러스터 간에 hello Azure HDInsight의 가장 요청 된 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-107">Thus, functionalities involving multiuser clusters are among hello most requested functionalities in Azure HDInsight.</span></span>

<span data-ttu-id="916ff-108">고유한 다중 사용자 인증 및 권한 부여를 작성 하는 대신 HDInsight hello 가장 인기 있는 id 공급자-Active Directory (AD)에 의존 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-108">Instead of building its own multiuser authentication and authorization, HDInsight relies on hello most popular identity provider--Active Directory (AD).</span></span> <span data-ttu-id="916ff-109">AD에서 hello 강력한 보안 기능 HDInsight에서 사용 되는 toomanage 다중 사용자 권한 부여 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-109">hello powerful security functionality in AD can be used toomanage multiuser authorization in HDInsight.</span></span> <span data-ttu-id="916ff-110">HDInsight AD를 통합 하 여 AD 자격 증명을 사용 하 여 hello 클러스터와 통신할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-110">By integrating HDInsight with AD, you can communicate with hello clusters by using your AD credentials.</span></span> <span data-ttu-id="916ff-111">모든 hello에서 HDInsight 서비스를 실행 하므로 HDInsight는 AD 사용자 tooa 로컬 Hadoop 사용자를 매핑합니다 (Ambari, 서버, 레인저 Spark thrift 하이브 서버 및 기타) hello 인증 된 사용자에 대해 원활 하 게 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-111">HDInsight maps an AD user tooa local Hadoop user, so all hello services running on HDInsight (Ambari, Hive server, Ranger, Spark thrift server, and others) work seamlessly for hello authenticated user.</span></span>

## <a name="integrate-hdinsight-with-ad-and-ad-on-iaas-vm"></a><span data-ttu-id="916ff-112">AD 및 IaaS VM의 AD와 HDInsight 통합</span><span class="sxs-lookup"><span data-stu-id="916ff-112">Integrate HDInsight with AD and AD on IaaS VM</span></span>

<span data-ttu-id="916ff-113">HDInsight Azure AD 또는 Iaas VM에 AD를 통합 하 여 hello HDInsight 클러스터 노드가 도메인에 가입 된 tooa 도메인 됩니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-113">By integrating HDInsight with Azure AD or AD on Iaas VM, hello HDInsight cluster nodes are domain-joined tooa domain.</span></span> <span data-ttu-id="916ff-114">HDInsight은 hello에 대 한 서비스 주체를 hello 클러스터에서 실행 되는 Hadoop 서비스 만들어지고 지정 된 조직 구성 단위 (OU) 내에서 Azure AD 또는 IaaS VM에 AD에에서 배치 됩니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-114">HDInsight creates service principals for hello Hadoop services running on hello cluster and places them within a specified organizational unit (OU) in Azure AD or AD on IaaS VM.</span></span> <span data-ttu-id="916ff-115">또한 HDInsight 역방향 DNS 매핑은 조인 된 toohello 도메인 hello 노드의 IP 주소가 hello에 대 한 hello 도메인에 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-115">HDInsight also creates reverse DNS mappings in hello domain for hello IP addresses of hello nodes that are joined toohello domain.</span></span>

<span data-ttu-id="916ff-116">이러한 설정은 여러 아키텍처를 사용하여 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-116">You can achieve this setup by using multiple architectures.</span></span> <span data-ttu-id="916ff-117">Hello 아키텍처를 다음에서 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-117">You can choose from hello following architectures.</span></span>

<span data-ttu-id="916ff-118">**Azure IaaS에서 실행되는 AD와 통합된 HDInsight**</span><span class="sxs-lookup"><span data-stu-id="916ff-118">**HDInsight integrated with AD running on Azure IaaS**</span></span>

<span data-ttu-id="916ff-119">Hello HDInsight Active Directory와 통합 하기 위한 가장 간단한 아키텍처입니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-119">This is hello simplest architecture for integrating HDInsight with Active Directory.</span></span> <span data-ttu-id="916ff-120">hello AD 도메인 컨트롤러 하나 (또는 여러) (Vm) Azure에서 가상 컴퓨터에서 실행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-120">hello AD domain controller runs on one (or multiple) virtual machines (VMs) in Azure.</span></span> <span data-ttu-id="916ff-121">이러한 VM은 일반적으로 가상 네트워크 내에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-121">These VMs are usually in a virtual network.</span></span> <span data-ttu-id="916ff-122">Hello HDInsight 클러스터에 대 한 다른 가상 네트워크를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-122">You set up another virtual network for hello HDInsight cluster.</span></span> <span data-ttu-id="916ff-123">HDInsight toohave 시야 tooActive 디렉터리에 대 한 필요한 toopeer 이러한 가상 네트워크를 사용 하 여 [VNet 대 VNet 피어 링](../virtual-network/virtual-network-create-peering.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-123">For HDInsight toohave a line of sight tooActive Directory, you need toopeer these virtual networks by using [VNet-to-VNet peering](../virtual-network/virtual-network-create-peering.md).</span></span> <span data-ttu-id="916ff-124">만들면 hello Active Directory를 만들 수 있습니다 하 고 HDInsight에 동일한 VNet hello ARM에서 Active Directory hello와 toodo 피어 링이 필요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-124">If you create hello Active Directory in ARM, then you can create hello Active Directory and HDInsight in hello same VNet and you don't need toodo peering.</span></span> 

![도메인에 가입된 HDInsight 클러스터 토폴로지](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_1.png)

> [!NOTE]
> <span data-ttu-id="916ff-126">이 아키텍처에서 hello HDInsight 클러스터와 Azure 데이터 레이크 저장소를 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-126">In this architecture, you cannot use Azure Data Lake Store with hello HDInsight cluster.</span></span>


<span data-ttu-id="916ff-127">Active Directory에 대한 필수 조건:</span><span class="sxs-lookup"><span data-stu-id="916ff-127">Prerequisites for Active Directory:</span></span>

* <span data-ttu-id="916ff-128">[조직 구성 단위](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) 를 만들고, 배치를 내에서 HDInsight 클러스터 Vm hello 및 hello hello 클러스터에서 사용 하는 서비스 사용자입니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-128">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created, within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="916ff-129">[LDAP(Lightweight Directory Access Protocol)](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md)가 AD와의 통신을 위해 설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-129">[Lightweight Directory Access Protocols](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) (LDAPs) must be set up for communicating with AD.</span></span> <span data-ttu-id="916ff-130">LDAPS 사용 하는 인증서 tooset hello 실제 인증서 (자체 서명 된 인증서 하지) 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-130">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="916ff-131">역방향 DNS 영역은 hello hello HDInsight 서브넷 (예를 들어 hello 이전 그림의 10.2.0.0/24)의 IP 주소 범위에 대 한 hello 도메인에 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-131">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="916ff-132">서비스 계정 또는 사용자 계정이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-132">A service account or a user account is needed.</span></span> <span data-ttu-id="916ff-133">이 계정 toocreate hello HDInsight 클러스터를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-133">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="916ff-134">이 계정에는 다음 권한을 hello가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-134">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="916ff-135">사용 권한 toocreate 서비스 보안 주체 개체 및 hello 조직 구성 단위 내에서 컴퓨터 개체</span><span class="sxs-lookup"><span data-stu-id="916ff-135">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="916ff-136">사용 권한 toocreate 역방향 DNS 프록시 규칙</span><span class="sxs-lookup"><span data-stu-id="916ff-136">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="916ff-137">사용 권한 toojoin 컴퓨터 toohello Active Directory 도메인</span><span class="sxs-lookup"><span data-stu-id="916ff-137">Permissions toojoin machines toohello Active Directory domain</span></span>

<span data-ttu-id="916ff-138">**클라우드 전용 Azure AD와 통합된 HDInsight**</span><span class="sxs-lookup"><span data-stu-id="916ff-138">**HDInsight integrated with cloud-only Azure AD**</span></span>

<span data-ttu-id="916ff-139">클라우드 전용 Azure AD의 경우 HDInsight가 Azure AD와 통합될 수 있도록 도메인 컨트롤러를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-139">For cloud-only Azure AD, configure a domain controller so that HDInsight can be integrated with Azure AD.</span></span> <span data-ttu-id="916ff-140">이 작업은 Azure AD DS([Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md))를 사용하여 이루어집니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-140">This is achieved by using [Azure Active Directory Domain Services](../active-directory-domain-services/active-directory-ds-overview.md) (Azure AD DS).</span></span> <span data-ttu-id="916ff-141">Azure AD DS 도메인 컨트롤러 컴퓨터에 hello 클라우드 만들고 IP 주소를 제공 하 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-141">Azure AD DS creates domain controller machines on hello cloud and provides IP addresses for them.</span></span> <span data-ttu-id="916ff-142">고가용성을 위해 두 개의 도메인 컨트롤러를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-142">It creates two domain controllers for high availability.</span></span>

<span data-ttu-id="916ff-143">현재 Azure AD DS는 클래식 가상 네트워크에만 존재합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-143">Currently, Azure AD DS exists only in classic virtual networks.</span></span> <span data-ttu-id="916ff-144">만 액세스할 수 있는 hello Azure 클래식 포털을 사용 하 여</span><span class="sxs-lookup"><span data-stu-id="916ff-144">It is only accessible by using hello Azure classic portal.</span></span> <span data-ttu-id="916ff-145">hello HDInsight 가상 네트워크가 hello toobe는 Azure 포털에서에서 VNet 대 VNet 피어 링을 사용 하 여 hello 클래식 가상 네트워크와 겹치기 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-145">hello HDInsight virtual network exists in hello Azure portal, which needs toobe peered with hello classic virtual network by using VNet-to-VNet peering.</span></span>

> [!NOTE]
> <span data-ttu-id="916ff-146">동일한 지역 hello 클래식 가상 네트워크와 가상 네트워크 가상 네트워크 모두에 있어야 하는 Azure 리소스 관리자 간의 피어 링 및 아래에서 동일한 hello Azure 구독.</span><span class="sxs-lookup"><span data-stu-id="916ff-146">Peering between a classic virtual network and an Azure Resource Manager virtual network requires that both virtual networks are in hello same region and under hello same Azure subscription.</span></span>

![도메인에 가입된 HDInsight 클러스터 토폴로지](./media/hdinsight-domain-joined-architecture/hdinsight-domain-joined-architecture_2.png)

<span data-ttu-id="916ff-148">Azure AD에 대한 필수 조건:</span><span class="sxs-lookup"><span data-stu-id="916ff-148">Prerequisites for Azure AD:</span></span>

* <span data-ttu-id="916ff-149">[조직 구성 단위](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) 배치 있는 내 만들어야 hello HDInsight 클러스터 Vm 및 서비스 사용자 hello 클러스터에서 사용 하는 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-149">An [organizational unit](../active-directory-domain-services/active-directory-ds-admin-guide-create-ou.md) must be created within which you place hello HDInsight cluster VMs and hello service principals used by hello cluster.</span></span>
* <span data-ttu-id="916ff-150">[LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md)는 Azure AD DS를 구성할 때 설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-150">[LDAPS](../active-directory-domain-services/active-directory-ds-admin-guide-configure-secure-ldap.md) must be set up when you configure Azure AD DS.</span></span> <span data-ttu-id="916ff-151">LDAPS 사용 하는 인증서 tooset hello 실제 인증서 (자체 서명 된 인증서 하지) 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-151">hello certificate used tooset up LDAPS must be a real certificate (not a self-signed certificate).</span></span>
* <span data-ttu-id="916ff-152">역방향 DNS 영역은 hello hello HDInsight 서브넷 (예를 들어 hello 이전 그림의 10.2.0.0/24)의 IP 주소 범위에 대 한 hello 도메인에 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-152">Reverse DNS zones must be created on hello domain for hello IP address range of hello HDInsight subnet (for example, 10.2.0.0/24 in hello previous picture).</span></span>
* <span data-ttu-id="916ff-153">[암호 해시](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) Azure AD tooAzure AD DS에서에서 동기화 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-153">[Password hashes](../active-directory-domain-services/active-directory-ds-getting-started-password-sync.md) must be synced from Azure AD tooAzure AD DS.</span></span>
* <span data-ttu-id="916ff-154">서비스 계정 또는 사용자 계정이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-154">A service account or a user account is needed.</span></span> <span data-ttu-id="916ff-155">이 계정 toocreate hello HDInsight 클러스터를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-155">Use this account toocreate hello HDInsight cluster.</span></span> <span data-ttu-id="916ff-156">이 계정에는 다음 권한을 hello가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-156">This account must have hello following permissions:</span></span>

    - <span data-ttu-id="916ff-157">사용 권한 toocreate 서비스 보안 주체 개체 및 hello 조직 구성 단위 내에서 컴퓨터 개체</span><span class="sxs-lookup"><span data-stu-id="916ff-157">Permissions toocreate service principal objects and machine objects within hello organizational unit</span></span>
    - <span data-ttu-id="916ff-158">사용 권한 toocreate 역방향 DNS 프록시 규칙</span><span class="sxs-lookup"><span data-stu-id="916ff-158">Permissions toocreate reverse DNS proxy rules</span></span>
    - <span data-ttu-id="916ff-159">사용 권한 toojoin 컴퓨터 toohello Azure AD 도메인</span><span class="sxs-lookup"><span data-stu-id="916ff-159">Permissions toojoin machines toohello Azure AD domain</span></span>

## <a name="next-steps"></a><span data-ttu-id="916ff-160">다음 단계</span><span class="sxs-lookup"><span data-stu-id="916ff-160">Next steps</span></span>
* <span data-ttu-id="916ff-161">도메인에 가입 된 HDInsight 클러스터 tooconfigure 참조 [도메인에 가입 된 HDInsight 클러스터를 구성할](hdinsight-domain-joined-configure.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-161">tooconfigure a domain-joined HDInsight cluster, see [Configure domain-joined HDInsight clusters](hdinsight-domain-joined-configure.md).</span></span>
* <span data-ttu-id="916ff-162">toomanage 도메인에 가입 된 HDInsight 클러스터 참조 [도메인에 가입 된 HDInsight 클러스터를 관리](hdinsight-domain-joined-manage.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-162">toomanage domain-joined HDInsight clusters, see [Manage domain-joined HDInsight clusters](hdinsight-domain-joined-manage.md).</span></span>
* <span data-ttu-id="916ff-163">tooconfigure 하이브 정책 및 실행된 된 Hive 쿼리 참조 [도메인에 가입 하는 HDInsight 클러스터에 대 한 하이브 구성 정책을](hdinsight-domain-joined-run-hive.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-163">tooconfigure Hive policies and run Hive queries, see [Configure Hive policies for domain-joined HDInsight clusters](hdinsight-domain-joined-run-hive.md).</span></span>
* <span data-ttu-id="916ff-164">도메인에 가입 된 HDInsight 클러스터에 SSH를 사용 하 여 toorun 하이브 쿼리에서 참조 [SSH HDInsight를 사용](hdinsight-hadoop-linux-use-ssh-unix.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="916ff-164">toorun Hive queries by using SSH on domain-joined HDInsight clusters, see [Use SSH with HDInsight](hdinsight-hadoop-linux-use-ssh-unix.md).</span></span>
