---
title: "Azure 가상 컴퓨터 확장 집합에 대한 디자인 고려 사항 | Microsoft Docs"
description: "Azure 가상 컴퓨터 확장 집합에 대한 디자인 고려 사항에 대해 알아보기"
keywords: "linux 가상 컴퓨터, 가상 컴퓨터 확장 집합"
services: virtual-machine-scale-sets
documentationcenter: 
author: gatneil
manager: madhana
editor: tysonn
tags: azure-resource-manager
ms.assetid: c27c6a59-a0ab-4117-a01b-42b049464ca1
ms.service: virtual-machine-scale-sets
ms.workload: na
ms.tgt_pltfrm: vm-linux
ms.devlang: na
ms.topic: article
ms.date: 06/01/2017
ms.author: negat
ms.openlocfilehash: 6dbd4f22e3e949e19565030f5a10f545b89a0a3c
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/29/2017
---
# <a name="design-considerations-for-scale-sets"></a><span data-ttu-id="0caab-104">확장 집합 디자인 고려 사항</span><span class="sxs-lookup"><span data-stu-id="0caab-104">Design Considerations For Scale Sets</span></span>
<span data-ttu-id="0caab-105">이 항목은 Virtual Machine 확장 집합을 설계할 때 고려할 사항에 대해 논의합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-105">This topic discusses design considerations for Virtual Machine Scale Sets.</span></span> <span data-ttu-id="0caab-106">Virtual Machine 확장 집합에 대한 자세한 내용은 [Virtual Machine 확장 집합 개요](virtual-machine-scale-sets-overview.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="0caab-106">For information about what Virtual Machine Scale Sets are, refer to [Virtual Machine Scale Sets Overview](virtual-machine-scale-sets-overview.md).</span></span>

## <a name="when-to-use-scale-sets-instead-of-virtual-machines"></a><span data-ttu-id="0caab-107">가상 컴퓨터 대신 확장 집합을 사용하는 경우</span><span class="sxs-lookup"><span data-stu-id="0caab-107">When to use scale sets instead of virtual machines?</span></span>
<span data-ttu-id="0caab-108">일반적으로 확장 집합은 유사한 구성을 가진 일련의 컴퓨터로 구성된 고가용성 인프라를 배포하는 데 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-108">Generally, scale sets are useful for deploying highly available infrastructure where a set of machines have similar configuration.</span></span> <span data-ttu-id="0caab-109">그러나 일부 기능은 확장 집합에서만 사용할 수 있고, 다른 일부 기능은 VM에서만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-109">However, some features are only available in scale sets while other features are only available in VMs.</span></span> <span data-ttu-id="0caab-110">각 기술을 언제 사용할지에 대한 정보를 바탕으로 의사 결정을 내리려면 먼저, 일반적으로 사용되는 기능 중 확장 집합에서는 사용 가능하지만 VM에서는 사용할 수 없는 기능 몇 가지를 살펴보면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-110">In order to make an informed decision about when to use each technology, we should first take a look at some of the commonly used features that are available in scale sets but not VMs:</span></span>

### <a name="scale-set-specific-features"></a><span data-ttu-id="0caab-111">확장 집합 특정 기능</span><span class="sxs-lookup"><span data-stu-id="0caab-111">Scale set-specific features</span></span>

- <span data-ttu-id="0caab-112">확장 집합 구성을 지정하고 나면 추가 VM을 병렬로 배포하도록 간단히 “용량” 속성을 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-112">Once you specify the scale set configuration, you can simply update the "capacity" property to deploy more VMs in parallel.</span></span> <span data-ttu-id="0caab-113">이 방법은 다수의 개별 VM을 병렬로 배포하는 작업을 오케스트레이션하는 스크립트를 작성하는 것보다 훨씬 더 간단합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-113">This is much simpler than writing a script to orchestrate deploying many individual VMs in parallel.</span></span>
- <span data-ttu-id="0caab-114">[Azure 자동 크기 조정을 사용하여 확장 집합의 크기를 자동으로 조정](./virtual-machine-scale-sets-autoscale-overview.md)할 수 있지만 개별 VM의 경우는 불가능합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-114">You can [use Azure Autoscale to automatically scale a scale set](./virtual-machine-scale-sets-autoscale-overview.md) but not individual VMs.</span></span>
- <span data-ttu-id="0caab-115">[확장 집합 VM을 이미지로 다시 설치](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm)할 수 있지만 [개별 VM의 경우는 불가능합니다](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span><span class="sxs-lookup"><span data-stu-id="0caab-115">You can [reimage scale set VMs](https://docs.microsoft.com/rest/api/virtualmachinescalesets/manage-a-vm) but [not individual VMs](https://docs.microsoft.com/rest/api/compute/virtualmachines).</span></span>
- <span data-ttu-id="0caab-116">안정성 향상과 배포 시간 단축을 위해 확장 집합 VM을 [오버프로비전](./virtual-machine-scale-sets-design-overview.md)할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-116">You can [overprovision](./virtual-machine-scale-sets-design-overview.md) scale set VMs for increased reliability and quicker deployment times.</span></span> <span data-ttu-id="0caab-117">개별 VM에 대해서는 사용자 지정 코드를 작성하지 않는 한 이렇게 할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-117">You cannot do this with individual VMs unless you write custom code to do this.</span></span>
- <span data-ttu-id="0caab-118">확장 집합 내 전체 VM에 대한 업그레이드 롤아웃을 수월하게 만들도록 [업그레이드 정책](./virtual-machine-scale-sets-upgrade-scale-set.md)을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-118">You can specify an [upgrade policy](./virtual-machine-scale-sets-upgrade-scale-set.md) to make it easy to roll out upgrades across VMs in your scale set.</span></span> <span data-ttu-id="0caab-119">개별 VM의 경우 업데이트를 직접 오케스트레이션해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-119">With individual VMs, you must orchestrate updates yourself.</span></span>

### <a name="vm-specific-features"></a><span data-ttu-id="0caab-120">VM 특정 기능</span><span class="sxs-lookup"><span data-stu-id="0caab-120">VM-specific features</span></span>

<span data-ttu-id="0caab-121">위와 달리, 일부 기능은 (적어도 당분간) VM에서만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-121">On the other hand, some features are only available in VMs (at least for the time being):</span></span>

- <span data-ttu-id="0caab-122">특정 개별 VM에 데이터 디스크를 연결할 수 있지만, 연결된 데이터 디스크는 확장 집합의 모든 VM에 대해 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-122">You can attach data disks to specific individual VMs, but attached data disks are configured for all VMs in a scale set.</span></span>
- <span data-ttu-id="0caab-123">비어 있지 않은 데이터 디스크를 개별 VM에 연결할 수 있지만 확장 집합의 VM에는 연결할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-123">You can attach non-empty data disks to individual VMs but not VMs in a scale set.</span></span>
- <span data-ttu-id="0caab-124">개별 VM의 스냅숏을 만들 수 있지만 확장 집합의 VM의 스냅숏은 만들 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-124">You can snapshot an individual VM but not a VM in a scale set.</span></span>
- <span data-ttu-id="0caab-125">개별 VM에서 이미지를 캡처할 수 있지만 확장 집합의 VM에서는 캡처할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-125">You can capture an image from an individual VM but not from a VM in a scale set.</span></span>
- <span data-ttu-id="0caab-126">네이티브 디스크에서 관리되는 디스크로 개별 VM을 마이그레이션할 수 있지만, 확장 집합의 VM에 대해서는 불가능합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-126">You can migrate an individual VM from native disks to managed disks, but you cannot do this for VMs in a scale set.</span></span>
- <span data-ttu-id="0caab-127">개별 VM NIC에 IPv6 공용 IP 주소를 할당할 수 있지만, 확장 집합의 VM에 대해서는 불가능합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-127">You can assign IPv6 public IP addresses to individual VM nics but cannot do so for VMs in a scale set.</span></span> <span data-ttu-id="0caab-128">개별 VM이나 확장 집합 VM 앞에 놓인 부하 분산 장치에 IPv6 공용 IP 주소를 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-128">Note that you can assign IPv6 public IP addresses to load balancers in front of either individual VMs or scale set VMs.</span></span>

## <a name="storage"></a><span data-ttu-id="0caab-129">저장소</span><span class="sxs-lookup"><span data-stu-id="0caab-129">Storage</span></span>

### <a name="scale-sets-with-azure-managed-disks"></a><span data-ttu-id="0caab-130">Azure Managed Disks를 사용하는 확장 집합</span><span class="sxs-lookup"><span data-stu-id="0caab-130">Scale sets with Azure Managed Disks</span></span>
<span data-ttu-id="0caab-131">확장 집합은 기존의 Azure Storage 계정 대신 [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md)를 사용하여 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-131">Scale sets can be created with [Azure Managed Disks](../virtual-machines/windows/managed-disks-overview.md) instead of traditional Azure storage accounts.</span></span> <span data-ttu-id="0caab-132">Managed Disks는 다음과 같은 이점을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-132">Managed Disks provide the following benefits:</span></span>
- <span data-ttu-id="0caab-133">확장 집합 VM에 대한 Azure 저장소 계정의 집합을 미리 만들 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-133">You do not have to pre-create a set of Azure storage accounts for the scale set VMs.</span></span>
- <span data-ttu-id="0caab-134">확장 집합에서 VM에 대한 [연결된 데이터 디스크](virtual-machine-scale-sets-attached-disks.md)를 정의할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-134">You can define [attached data disks](virtual-machine-scale-sets-attached-disks.md) for the VMs in your scale set.</span></span>
- <span data-ttu-id="0caab-135">[집합에서 최대 1,000개의 VM을 지원](virtual-machine-scale-sets-placement-groups.md)하도록 확장 집합을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-135">Scale sets can be configured to [support up to 1,000 VMs in a set](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="0caab-136">기존 템플릿이 있는 경우에는 [Managed Disks를 사용하도록 템플릿을 업데이트](virtual-machine-scale-sets-convert-template-to-md.md)할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-136">If you have an existing template, you can also [update the template to use Managed Disks](virtual-machine-scale-sets-convert-template-to-md.md).</span></span>

### <a name="user-managed-storage"></a><span data-ttu-id="0caab-137">사용자 관리 저장소</span><span class="sxs-lookup"><span data-stu-id="0caab-137">User-managed Storage</span></span>
<span data-ttu-id="0caab-138">Azure Managed Disks로 정의되지 않은 확장 집합은 사용자가 생성한 저장소 계정을 사용하여 집합에 VM의 OS 디스크를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-138">A scale set that is not defined with Azure Managed Disks relies on user-created storage accounts to store the OS disks of the VMs in the set.</span></span> <span data-ttu-id="0caab-139">저장소 계정당 20개 이하의 VM 비율은 최대 IO를 수행하고 _오버프로비전_을 활용하는 것도 좋습니다(아래 참조).</span><span class="sxs-lookup"><span data-stu-id="0caab-139">A ratio of 20 VMs per storage account or less is recommended to achieve maximum IO and also take advantage of _overprovisioning_ (see below).</span></span> <span data-ttu-id="0caab-140">또한 저장소 계정 이름의 시작하는 문자에 알파벳을 고르게 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-140">It is also recommended that you spread the beginning characters of the storage account names across the alphabet.</span></span> <span data-ttu-id="0caab-141">그러면 여러 내부 시스템에서 부하를 분산할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-141">Doing so helps spread load across different internal systems.</span></span> 


## <a name="overprovisioning"></a><span data-ttu-id="0caab-142">오버프로비전</span><span class="sxs-lookup"><span data-stu-id="0caab-142">Overprovisioning</span></span>
<span data-ttu-id="0caab-143">확장 집합은 현재 VM을 “오버프로비전”하도록 기본적으로 설정되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-143">Scale sets currently default to "overprovisioning" VMs.</span></span> <span data-ttu-id="0caab-144">오버프로비전을 켜면 확장 집합은 실제로 사용자가 요청한 것보다 더 많은 VM을 작동한 다음 요청된 VM 수가 성공적으로 프로비전되면 추가 VM을 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-144">With overprovisioning turned on, the scale set actually spins up more VMs than you asked for, then deletes the extra VMs once the requested number of VMs are successfully provisioned.</span></span> <span data-ttu-id="0caab-145">오버프로비전은 프로비전 성공률을 높이고 배포 시간을 절약합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-145">Overprovisioning improves provisioning success rates and reduces deployment time.</span></span> <span data-ttu-id="0caab-146">추가 VM에 대한 추가 비용은 청구되지 않으며 할당량 한도에 포함되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-146">You are not billed for the extra VMs, and they do not count toward your quota limits.</span></span>

<span data-ttu-id="0caab-147">오버프로비전을 사용하면 프로비전 성공률이 향상되지만 나타난 다음 사라지는 추가 VM을 처리하도록 설계되지 않은 응용 프로그램에서 동작이 혼란스러워질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-147">While overprovisioning does improve provisioning success rates, it can cause confusing behavior for an application that is not designed to handle extra VMs appearing and then disappearing.</span></span> <span data-ttu-id="0caab-148">오버프로비전을 해제하려면 템플릿에 `"overprovision": "false"` 문자열이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-148">To turn overprovisioning off, ensure you have the following string in your template: `"overprovision": "false"`.</span></span> <span data-ttu-id="0caab-149">자세한 내용은 [확장 집합 REST API 설명서](/rest/api/virtualmachinescalesets/create-or-update-a-set)에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-149">More details can be found in the [Scale Set REST API documentation](/rest/api/virtualmachinescalesets/create-or-update-a-set).</span></span>

<span data-ttu-id="0caab-150">확장 집합이 사용자 관리 저장소를 사용하고 오버프로비전을 해제하는 경우 저장소 계정당 20개 이상의 VM을 가질 수 있지만 IO 성능상의 이유로 40개 이상은 권장되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-150">If your scale set uses user-managed storage, and you turn off overprovisioning, you can have more than 20 VMs per storage account, but it is not recommended to go above 40 for IO performance reasons.</span></span> 

## <a name="limits"></a><span data-ttu-id="0caab-151">제한</span><span class="sxs-lookup"><span data-stu-id="0caab-151">Limits</span></span>
<span data-ttu-id="0caab-152">Marketplace 이미지에 구축되고(플랫폼 이미지라고도 함) Azure Managed Disks를 사용하도록 구성된 확장 집합은 최대 1,000개의 VM 용량을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-152">A scale set built on a Marketplace image (also known as a platform image) and configured to use Azure Managed Disks supports a capacity of up to 1,000 VMs.</span></span> <span data-ttu-id="0caab-153">100개 이상의 VM을 지원하도록 확장 집합을 구성하는 경우 모든 시나리오가 동일하게 동작하지 않습니다(예: 부하 분산).</span><span class="sxs-lookup"><span data-stu-id="0caab-153">If you configure your scale set to support more than 100 VMs, not all scenarios work the same (for example load balancing).</span></span> <span data-ttu-id="0caab-154">자세한 내용은 [대규모 가상 컴퓨터 확장 집합과 작동](virtual-machine-scale-sets-placement-groups.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="0caab-154">For more information, see [Working with large virtual machine scale sets](virtual-machine-scale-sets-placement-groups.md).</span></span> 

<span data-ttu-id="0caab-155">사용자 관리 저장소 계정으로 구성된 확장 집합은 현재 100개의 VM으로 제한되어 있습니다(5개의 저장소 계정이 이 규모에 권장됨).</span><span class="sxs-lookup"><span data-stu-id="0caab-155">A scale set configured with user-managed storage accounts is currently limited to 100 VMs (and 5 storage accounts are recommended for this scale).</span></span>

<span data-ttu-id="0caab-156">사용자 지정 이미지에 구축된 확장 집합은 Azure Managed Disks로 구성된 경우 최대 100개의 VM 용량을 가질 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-156">A scale set built on a custom image (one built by you) can have a capacity of up to 100 VMs when configured with Azure Managed disks.</span></span> <span data-ttu-id="0caab-157">확장 집합이 사용자 관리 저장소 계정으로 구성된 경우 하나의 저장소 계정 내에서 모든 OS 디스크 VHD를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-157">If the scale set is configured with user-managed storage accounts, it must create all OS disk VHDs within one storage account.</span></span> <span data-ttu-id="0caab-158">그 결과 사용자 지정 이미지 및 사용자 관리 저장소에 구축하는 확장 집합의 최대 추천 VM 수는 20개입니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-158">As a result, the maximum recommended number of VMs in a scale set built on a custom image and user-managed storage is 20.</span></span> <span data-ttu-id="0caab-159">오버프로비전을 해제할 경우 40개를 초과할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-159">If you turn off overprovisioning, you can go up to 40.</span></span>

<span data-ttu-id="0caab-160">이러한 한도보다 더 많은 VM이 있는 경우 [이 템플릿](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale)에 나오는 것처럼 여러 확장 집합을 배포해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0caab-160">For more VMs than these limits allow, you need to deploy multiple scale sets as shown in [this template](https://github.com/Azure/azure-quickstart-templates/tree/master/301-custom-images-at-scale).</span></span>

