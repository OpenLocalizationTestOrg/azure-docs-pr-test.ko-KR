---
title: "응용 프로그램 업그레이드: 데이터 직렬화 | Microsoft Docs"
description: "데이터 직렬화 모범 사례 및 응용 프로그램 업그레이드 배포에 미치는 영향"
services: service-fabric
documentationcenter: .net
author: vturecek
manager: timlt
editor: 
ms.assetid: a5f36366-a2ab-4ae3-bb08-bc2f9533bc5a
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 06/29/2017
ms.author: vturecek
ms.openlocfilehash: 1b65dfd3813423550631490640a81953864f58e3
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="how-data-serialization-affects-an-application-upgrade"></a><span data-ttu-id="b9fae-103">데이터 serialization이 응용 프로그램 업그레이드에 미치는 영향</span><span class="sxs-lookup"><span data-stu-id="b9fae-103">How data serialization affects an application upgrade</span></span>
<span data-ttu-id="b9fae-104">에 [롤링 응용 프로그램 업그레이드](service-fabric-application-upgrade.md), hello 업그레이드가 적용된 tooa 노드의 하위 집합을 한 번에 하나의 업그레이드 도메인입니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-104">In a [rolling application upgrade](service-fabric-application-upgrade.md), hello upgrade is applied tooa subset of nodes, one upgrade domain at a time.</span></span> <span data-ttu-id="b9fae-105">이 과정에서 몇 가지 업그레이드 도메인 hello 최신 버전의 응용 프로그램에 있으며 hello 이전 버전의 응용 프로그램에 몇 가지 업그레이드 도메인은 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-105">During this process, some upgrade domains are on hello newer version of your application, and some upgrade domains are on hello older version of your application.</span></span> <span data-ttu-id="b9fae-106">Hello 롤아웃 중 hello 새 버전의 응용 프로그램, 데이터의 수 tooread hello 이전 버전 이어야 합니다. 및 hello 이전 버전의 응용 프로그램 수 tooread hello 새 버전의 데이터 여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-106">During hello rollout, hello new version of your application must be able tooread hello old version of your data, and hello old version of your application must be able tooread hello new version of your data.</span></span> <span data-ttu-id="b9fae-107">Hello 데이터 형식이 앞 이나 뒤로 hello 업그레이드가 호환 되지 않는 경우 수 실패, 또는 데이터 있습니다 수 손실 또는 손상 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-107">If hello data format is not forward and backward compatible, hello upgrade may fail, or worse, data may be lost or corrupted.</span></span> <span data-ttu-id="b9fae-108">이 문서에서는 데이터 서식을 구성하는 요소에 대해 설명하며 데이터가 상위 버전 및 하위 버전과 호환되도록 하는 모범 사례를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-108">This article discusses what constitutes your data format and offers best practices for ensuring that your data is forward and backward compatible.</span></span>

## <a name="what-makes-up-your-data-format"></a><span data-ttu-id="b9fae-109">데이터 형식을 구성하는 요소</span><span class="sxs-lookup"><span data-stu-id="b9fae-109">What makes up your data format?</span></span>
<span data-ttu-id="b9fae-110">Azure 서비스 패브릭에서 hello 데이터 유지 되 고 복제는 C# 클래스에서 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-110">In Azure Service Fabric, hello data that is persisted and replicated comes from your C# classes.</span></span> <span data-ttu-id="b9fae-111">사용 하는 응용 프로그램에 대 한 [신뢰할 수 있는 컬렉션](service-fabric-reliable-services-reliable-collections.md), 데이터를 신뢰할 수 있는 사전 hello 및 큐에 있는 hello 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-111">For applications that use [Reliable Collections](service-fabric-reliable-services-reliable-collections.md), that data is hello objects in hello reliable dictionaries and queues.</span></span> <span data-ttu-id="b9fae-112">사용 하는 응용 프로그램에 대 한 [Reliable Actors](service-fabric-reliable-actors-introduction.md), hello 작업자에 대 한 상태를 백업 하는 hello 즉 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-112">For applications that use [Reliable Actors](service-fabric-reliable-actors-introduction.md), that is hello backing state for hello actor.</span></span> <span data-ttu-id="b9fae-113">이러한 C# 클래스를 직렬화 해야 toobe 유지 하 고 복제 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-113">These C# classes must be serializable toobe persisted and replicated.</span></span> <span data-ttu-id="b9fae-114">따라서 hello 데이터 형식은 hello 필드와 속성을 serialize 되 면도 serialize 되는 방식으로 정의 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-114">Therefore, hello data format is defined by hello fields and properties that are serialized, as well as how they are serialized.</span></span> <span data-ttu-id="b9fae-115">예를 들어, 한 `IReliableDictionary<int, MyClass>` hello 데이터는 serialize 된 `int` 는 serialize 된 및 `MyClass`합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-115">For example, in an `IReliableDictionary<int, MyClass>` hello data is a serialized `int` and a serialized `MyClass`.</span></span>

### <a name="code-changes-that-result-in-a-data-format-change"></a><span data-ttu-id="b9fae-116">데이터 형식 변경이 발생하는 코드 변경</span><span class="sxs-lookup"><span data-stu-id="b9fae-116">Code changes that result in a data format change</span></span>
<span data-ttu-id="b9fae-117">Hello 데이터 형식은 C# 클래스에 의해 결정 됩니다, 이후 데이터 형식 변경이 변경 toohello 클래스에 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-117">Since hello data format is determined by C# classes, changes toohello classes may cause a data format change.</span></span> <span data-ttu-id="b9fae-118">주의 해야 롤링 업그레이드를 처리할 수 있는 tooensure hello 데이터 형식을 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-118">Care must be taken tooensure that a rolling upgrade can handle hello data format change.</span></span> <span data-ttu-id="b9fae-119">다음은 데이터 형식이 변경될 수 있는 예입니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-119">Examples that may cause data format changes:</span></span>

* <span data-ttu-id="b9fae-120">필드/속성 추가 또는 제거</span><span class="sxs-lookup"><span data-stu-id="b9fae-120">Adding or removing fields or properties</span></span>
* <span data-ttu-id="b9fae-121">필드 또는 속성의 이름 변경</span><span class="sxs-lookup"><span data-stu-id="b9fae-121">Renaming fields or properties</span></span>
* <span data-ttu-id="b9fae-122">필드 또는 속성의 hello 형식 변경</span><span class="sxs-lookup"><span data-stu-id="b9fae-122">Changing hello types of fields or properties</span></span>
* <span data-ttu-id="b9fae-123">Hello 클래스 이름 또는 네임 스페이스 변경</span><span class="sxs-lookup"><span data-stu-id="b9fae-123">Changing hello class name or namespace</span></span>

### <a name="data-contract-as-hello-default-serializer"></a><span data-ttu-id="b9fae-124">기본 serializer hello으로 데이터 계약</span><span class="sxs-lookup"><span data-stu-id="b9fae-124">Data Contract as hello default serializer</span></span>
<span data-ttu-id="b9fae-125">hello serializer는 일반적으로를 hello 데이터를 읽는 hello 현재 버전으로 역직렬화 하는 동안 hello 데이터를 이전에 있더라도 또는 *최신* 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-125">hello serializer is generally responsible for reading hello data and deserializing it into hello current version, even if hello data is in an older or *newer* version.</span></span> <span data-ttu-id="b9fae-126">hello 기본 serializer는 hello [데이터 계약 serializer](https://msdn.microsoft.com/library/ms733127.aspx)를 잘 정의 된 버전 관리 규칙이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-126">hello default serializer is hello [Data Contract serializer](https://msdn.microsoft.com/library/ms733127.aspx), which has well-defined versioning rules.</span></span> <span data-ttu-id="b9fae-127">신뢰할 수 있는 컬렉션 수를 재정의 하는 hello serializer toobe 하지만 Reliable Actors 현재 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-127">Reliable Collections allow hello serializer toobe overridden, but Reliable Actors currently do not.</span></span> <span data-ttu-id="b9fae-128">롤링 업그레이드를 사용 하기 위한 중요 한 역할 hello 데이터 직렬 변환기입니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-128">hello data serializer plays an important role in enabling rolling upgrades.</span></span> <span data-ttu-id="b9fae-129">hello 데이터 계약 직렬화 기는 서비스 패브릭 응용 프로그램에 대해 권장 하는 hello serializer입니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-129">hello Data Contract serializer is hello serializer that we recommend for Service Fabric applications.</span></span>

## <a name="how-hello-data-format-affects-a-rolling-upgrade"></a><span data-ttu-id="b9fae-130">Hello 데이터 형식을 롤링 업그레이드에 미치는 영향</span><span class="sxs-lookup"><span data-stu-id="b9fae-130">How hello data format affects a rolling upgrade</span></span>
<span data-ttu-id="b9fae-131">롤링 업그레이드는 두 가지 주요 시나리오 hello serializer 이전 발생할 수 또는 *최신* 데이터 버전:</span><span class="sxs-lookup"><span data-stu-id="b9fae-131">During a rolling upgrade, there are two main scenarios where hello serializer may encounter an older or *newer* version of your data:</span></span>

1. <span data-ttu-id="b9fae-132">노드를 업그레이드 하 고 다시 시작, 후 hello 새 serializer hello 했던 데이터를 지속형된 toodisk hello 이전 버전에서 로드 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-132">After a node is upgraded and starts back up, hello new serializer will load hello data that was persisted toodisk by hello old version.</span></span>
2. <span data-ttu-id="b9fae-133">롤링 업그레이드 hello, 하는 동안 hello 클러스터 hello 이전 및 새 버전의 코드를 혼합 하 여 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-133">During hello rolling upgrade, hello cluster will contain a mix of hello old and new versions of your code.</span></span> <span data-ttu-id="b9fae-134">복제본은 서로 다른 업그레이드 도메인에 배치 될 수 있습니다 하 고 복제본이 보낼 데이터 tooeach 다른 hello 새 및/또는 이전 버전의 데이터는 사용자 serializer의 hello 새 및/또는 이전 버전에서 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-134">Since replicas may be placed in different upgrade domains, and replicas send data tooeach other, hello new and/or old version of your data may be encountered by hello new and/or old version of your serializer.</span></span>

> [!NOTE]
> <span data-ttu-id="b9fae-135">"새 버전" 및 "이전 버전" hello 여기 toohello 버전의 실행 중인 코드를 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-135">hello "new version" and "old version" here refer toohello version of your code that is running.</span></span> <span data-ttu-id="b9fae-136">"새 serializer" hello hello 새 버전의 응용 프로그램에서 실행 되는 toohello serializer 코드를 참조 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-136">hello "new serializer" refers toohello serializer code that is executing in hello new version of your application.</span></span> <span data-ttu-id="b9fae-137">"새 데이터" hello hello 새 버전의 응용 프로그램에서 직렬화 toohello C# 클래스를 참조합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-137">hello "new data" refers toohello serialized C# class from hello new version of your application.</span></span>
> 
> 

<span data-ttu-id="b9fae-138">코드의 두 버전 hello 및 앞으로 및 뒤로 데이터 형식 이어야 호환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-138">hello two versions of code and data format must be both forward and backward compatible.</span></span> <span data-ttu-id="b9fae-139">호환 되지 않으므로, 롤링 업그레이드 hello에 오류가 발생 하거나 데이터가 손실 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-139">If they are not compatible, hello rolling upgrade may fail or data may be lost.</span></span> <span data-ttu-id="b9fae-140">hello 코드 또는 serializer가 throw 될 수 있습니다 예외 또는 오류 hello를 발견 한 경우 다른 버전 hello 롤링 업그레이드가 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-140">hello rolling upgrade may fail because hello code or serializer may throw exceptions or a fault when it encounters hello other version.</span></span> <span data-ttu-id="b9fae-141">예를 들어 새 속성이 추가 되었습니다 하지만 hello 이전 serializer 역직렬화 하는 동안 삭제 하는 경우 데이터가 손실 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-141">Data may be lost if, for example, a new property was added but hello old serializer discards it during deserialization.</span></span>

<span data-ttu-id="b9fae-142">데이터 계약은 hello 권장 데이터를 호환을 위한 솔루션입니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-142">Data Contract is hello recommended solution for ensuring that your data is compatible.</span></span> <span data-ttu-id="b9fae-143">데이터 계약에는 필드의 추가, 제거 및 변경에 대해 잘 정의된 버전 관리 규칙이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-143">It has well-defined versioning rules for adding, removing, and changing fields.</span></span> <span data-ttu-id="b9fae-144">알 수 없는 필드를 다루는 hello serialization 및 deserialization 프로세스에 연결 하 고 클래스 상속을 다루는 대 한 지원을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-144">It also has support for dealing with unknown fields, hooking into hello serialization and deserialization process, and dealing with class inheritance.</span></span> <span data-ttu-id="b9fae-145">자세한 내용은 [데이터 계약 사용](https://msdn.microsoft.com/library/ms733127.aspx)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="b9fae-145">For more information, see [Using Data Contract](https://msdn.microsoft.com/library/ms733127.aspx).</span></span>

## <a name="next-steps"></a><span data-ttu-id="b9fae-146">다음 단계</span><span class="sxs-lookup"><span data-stu-id="b9fae-146">Next steps</span></span>
<span data-ttu-id="b9fae-147">[Visual Studio를 사용하여 응용 프로그램 업그레이드](service-fabric-application-upgrade-tutorial.md) 에서는 Visual Studio를 사용하여 응용 프로그램 업그레이드를 진행하는 방법을 안내합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-147">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="b9fae-148">[Powershell을 사용하여 응용 프로그램 업그레이드](service-fabric-application-upgrade-tutorial-powershell.md) 에서는 PowerShell을 사용하여 응용 프로그램 업그레이드를 진행하는 방법을 안내합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-148">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="b9fae-149">[업그레이드 매개 변수](service-fabric-application-upgrade-parameters.md)를 사용하여 응용 프로그램 업그레이드 방법을 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-149">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="b9fae-150">Toouse 너무 참조 하 여 응용 프로그램을 업그레이드 하는 동안 기능에 고급 하는 방법에 대해 알아봅니다[고급 항목](service-fabric-application-upgrade-advanced.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-150">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="b9fae-151">toohello 단계를 참조 하 여 응용 프로그램 업그레이드의 일반적인 문제를 수정 [응용 프로그램 업그레이드 문제 해결 ](service-fabric-application-upgrade-troubleshooting.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="b9fae-151">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades ](service-fabric-application-upgrade-troubleshooting.md).</span></span>

