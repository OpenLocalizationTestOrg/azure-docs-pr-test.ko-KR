---
title: "패브릭 응용 프로그램 업그레이드: aaaService | Microsoft Docs"
description: "이 문서에서는 소개 tooupgrading 업그레이드 모드 선택 및 성능의 상태 검사를 포함 하 여 서비스 패브릭 응용 프로그램을 제공 합니다."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 803c9c63-373a-4d6a-8ef2-ea97e16e88dd
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 6f649ef4a5c0afab682522bcba7d2d66a4268ead
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="service-fabric-application-upgrade"></a><span data-ttu-id="79811-103">서비스 패브릭 응용 프로그램 업그레이드</span><span class="sxs-lookup"><span data-stu-id="79811-103">Service Fabric application upgrade</span></span>
<span data-ttu-id="79811-104">Azure 서비스 패브릭 응용 프로그램은 서비스의 컬렉션입니다.</span><span class="sxs-lookup"><span data-stu-id="79811-104">An Azure Service Fabric application is a collection of services.</span></span> <span data-ttu-id="79811-105">업그레이드 하는 동안 서비스 패브릭 비교 hello 새 [응용 프로그램 매니페스트](service-fabric-application-model.md#describe-an-application) hello 이전 버전으로 hello 응용 프로그램에서 서비스 업데이트 필요를 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-105">During an upgrade, Service Fabric compares hello new [application manifest](service-fabric-application-model.md#describe-an-application) with hello previous version and determines which services in hello application require updates.</span></span> <span data-ttu-id="79811-106">서비스 패브릭 hello 이전 버전의 hello 버전 번호를 가진 숫자 hello 서비스에서 매니페스트 hello 버전을 비교 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-106">Service Fabric compares hello version numbers in hello service manifests with hello version numbers in hello previous version.</span></span> <span data-ttu-id="79811-107">서비스가 변경되지 않으면 해당 서비스가 업그레이드되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-107">If a service has not changed, that service is not upgraded.</span></span>

## <a name="rolling-upgrades-overview"></a><span data-ttu-id="79811-108">롤링 업그레이드 개요</span><span class="sxs-lookup"><span data-stu-id="79811-108">Rolling upgrades overview</span></span>
<span data-ttu-id="79811-109">응용 프로그램 롤링 업그레이드를 hello 업그레이드 단계로 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="79811-109">In a rolling application upgrade, hello upgrade is performed in stages.</span></span> <span data-ttu-id="79811-110">각 단계에서 hello 업그레이드가 적용된 tooa 업데이트 도메인 이라고 하는 hello 클러스터의 노드 하위 집합입니다.</span><span class="sxs-lookup"><span data-stu-id="79811-110">At each stage, hello upgrade is applied tooa subset of nodes in hello cluster, called an update domain.</span></span> <span data-ttu-id="79811-111">결과적으로, hello 응용 프로그램 남아 hello 업그레이드 전체에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-111">As a result, hello application remains available throughout hello upgrade.</span></span> <span data-ttu-id="79811-112">Hello 업그레이드 하는 동안 hello 클러스터 hello 이전 및 새 버전의 혼합을 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-112">During hello upgrade, hello cluster may contain a mix of hello old and new versions.</span></span>

<span data-ttu-id="79811-113">이런 이유로 hello 두 버전 해야 앞 이나 뒤로 호환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="79811-113">For that reason, hello two versions must be forward and backward compatible.</span></span> <span data-ttu-id="79811-114">호환 되지 않는, 경우 응용 프로그램 관리자에 게는 여러 단계 업그레이드 toomaintain 가용성을 준비 하는 일을 담당 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-114">If they are not compatible, hello application administrator is responsible for staging a multiple-phase upgrade toomaintain availability.</span></span> <span data-ttu-id="79811-115">Hello 첫 번째 단계를 여러 단계 업그레이드 중에 tooan hello 이전 버전과 호환 되는 hello 응용 프로그램의 중간 버전을 업그레이드 하 고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-115">In a multiple-phase upgrade, hello first step is upgrading tooan intermediate version of hello application that is compatible with hello previous version.</span></span> <span data-ttu-id="79811-116">hello 두 번째 단계는 hello 업데이트 이전 버전과 호환성을 중단 하지만 hello 중간 버전와 호환 되는 tooupgrade hello 최종 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="79811-116">hello second step is tooupgrade hello final version that breaks compatibility with hello pre-update version, but is compatible with hello intermediate version.</span></span>

<span data-ttu-id="79811-117">업데이트 도메인은 hello 클러스터를 구성할 때 hello 클러스터 매니페스트에 지정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="79811-117">Update domains are specified in hello cluster manifest when you configure hello cluster.</span></span> <span data-ttu-id="79811-118">업데이트 도메인은 업데이트를 특정 순서로 받지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-118">Update domains do not receive updates in a particular order.</span></span> <span data-ttu-id="79811-119">업데이트 도메인은 응용 프로그램에 대한 배포의 논리 단위입니다.</span><span class="sxs-lookup"><span data-stu-id="79811-119">An update domain is a logical unit of deployment for an application.</span></span> <span data-ttu-id="79811-120">업그레이드 하는 동안 고가용성에서 hello 서비스 tooremain를 허용 하는 업데이트 도메인.</span><span class="sxs-lookup"><span data-stu-id="79811-120">Update domains allow hello services tooremain at high availability during an upgrade.</span></span>

<span data-ttu-id="79811-121">비 롤링 업그레이드는 hello 업그레이드 하는 hello hello 응용 프로그램에 하나의 업데이트 도메인에 있을 때 hello 클러스터의 적용 된 tooall 노드 있으면 가능 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-121">Non-rolling upgrades are possible if hello upgrade is applied tooall nodes in hello cluster, which is hello case when hello application has only one update domain.</span></span> <span data-ttu-id="79811-122">Hello 서비스 작동이 중단 하 고 업그레이드 hello 시간에 사용할 수 없는 되므로이 방법은 권장 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-122">This approach is not recommended, since hello service goes down and isn't available at hello time of upgrade.</span></span> <span data-ttu-id="79811-123">또한 업데이트 도메인 하나로 클러스터를 설정할 경우 Azure에서 어떤 보증도 제공하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-123">Additionally, Azure doesn't provide any guarantees when a cluster is set up with only one update domain.</span></span>

## <a name="health-checks-during-upgrades"></a><span data-ttu-id="79811-124">업그레이드 동안 상태 검사</span><span class="sxs-lookup"><span data-stu-id="79811-124">Health checks during upgrades</span></span>
<span data-ttu-id="79811-125">업그레이드에 대 한 상태 정책 설정 toobe (하거나 기본값을 사용할 수 있습니다).</span><span class="sxs-lookup"><span data-stu-id="79811-125">For an upgrade, health policies have toobe set (or default values may be used).</span></span> <span data-ttu-id="79811-126">성공적으로 업그레이드 하는 라는 용어가 사용은 제한 시간, 지정 된 모든 업데이트 도메인은 hello 내에서 업그레이드 하는 경우 및 모든 업데이트 도메인 정상 여겨지는 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-126">An upgrade is termed successful when all update domains are upgraded within hello specified time-outs, and when all update domains are deemed healthy.</span></span>  <span data-ttu-id="79811-127">정상 업데이트 도메인 hello 상태 정책에 지정 된 모든 hello 상태 검사를 통과 하는 hello 업데이트 도메인을 의미 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-127">A healthy update domain means that hello update domain passed all hello health checks specified in hello health policy.</span></span> <span data-ttu-id="79811-128">예를 들어 상태 정책에 따라 응용 프로그램 인스턴스의 모든 서비스가 *정상*이어야 하고, 상태는 Service Fabric에서 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="79811-128">For example, a health policy may mandate that all services within an application instance must be *healthy*, as health is defined by Service Fabric.</span></span>

<span data-ttu-id="79811-129">업그레이드가 진행되는 동안 서비스 패브릭에서 수행하는 상태 정책 및 상태 검사는 서비스 및 응용 프로그램을 구분하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-129">Health policies and checks during upgrade by Service Fabric are service and application agnostic.</span></span> <span data-ttu-id="79811-130">즉, 서비스별 테스트를 수행하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-130">That is, no service-specific tests are done.</span></span>  <span data-ttu-id="79811-131">예를 들어 서비스 처리량 요구 사항이 있을 수 있지만 서비스 패브릭 hello 정보 toocheck 처리량이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-131">For example, your service might have a throughput requirement, but Service Fabric does not have hello information toocheck throughput.</span></span> <span data-ttu-id="79811-132">Toohello 참조 [상태 문서](service-fabric-health-introduction.md) 수행 하는 hello 검사에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-132">Refer toohello [health articles](service-fabric-health-introduction.md) for hello checks that are performed.</span></span> <span data-ttu-id="79811-133">hello 인스턴스가 시작 되었고 여부 hello 응용 프로그램 패키지를 올바르게 복사 하는지 여부에 대 한 업그레이드 테스트는 동안 발생 하는 hello 검사 및 기타 등등.</span><span class="sxs-lookup"><span data-stu-id="79811-133">hello checks that happen during an upgrade include tests for whether hello application package was copied correctly, whether hello instance was started, and so on.</span></span>

<span data-ttu-id="79811-134">hello 응용 프로그램 상태가 hello 자식 엔터티 hello 응용 프로그램의 집계입니다.</span><span class="sxs-lookup"><span data-stu-id="79811-134">hello application health is an aggregation of hello child entities of hello application.</span></span> <span data-ttu-id="79811-135">즉, 서비스 패브릭 hello 응용 프로그램에 보고 된 hello 상태를 통해 hello 응용 프로그램의 hello 상태를 평가 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-135">In short, Service Fabric evaluates hello health of hello application through hello health that is reported on hello application.</span></span> <span data-ttu-id="79811-136">Hello 상태 hello 응용 프로그램에 대 한 모든 hello 서비스의 이러한 방식으로 계산합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-136">It also evaluates hello health of all hello services for hello application this way.</span></span> <span data-ttu-id="79811-137">서비스 패브릭 추가 hello 서비스 복제본 같이 해당 자식 항목의 hello 상태를 집계 하 여 hello 응용 프로그램 서비스의 hello 상태를 평가 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-137">Service Fabric further evaluates hello health of hello application services by aggregating hello health of their children, such as hello service replica.</span></span> <span data-ttu-id="79811-138">Hello 응용 프로그램 상태 정책이 충족 되 면 hello 업그레이드를 진행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-138">Once hello application health policy is satisfied, hello upgrade can proceed.</span></span> <span data-ttu-id="79811-139">Hello 상태 정책 위반 되 면 hello 응용 프로그램 업그레이드가 실패 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-139">If hello health policy is violated, hello application upgrade fails.</span></span>

## <a name="upgrade-modes"></a><span data-ttu-id="79811-140">업그레이드 모드</span><span class="sxs-lookup"><span data-stu-id="79811-140">Upgrade modes</span></span>
<span data-ttu-id="79811-141">응용 프로그램 업그레이드에 대해 권장 하는 hello 모드는 hello 일반적으로 사용 되는 모드 모니터링 hello 모드입니다.</span><span class="sxs-lookup"><span data-stu-id="79811-141">hello mode that we recommend for application upgrade is hello monitored mode, which is hello commonly used mode.</span></span> <span data-ttu-id="79811-142">모니터링된 모드에서 한 번의 업데이트 도메인 hello 업그레이드를 수행 하 고 모든 상태를 확인 하는 경우 hello 정책 지정) (당 패스 toohello 다음 업데이트 도메인에 자동으로 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-142">Monitored mode performs hello upgrade on one update domain, and if all health checks pass (per hello policy specified), moves on toohello next update domain automatically.</span></span>  <span data-ttu-id="79811-143">상태 검사에 실패할 경우 시간 제한에 도달 하면, hello 업그레이드 하거나 hello 업데이트 도메인에 대 한 롤백되거나 hello 모드 변경 된 toounmonitored 수동입니다.</span><span class="sxs-lookup"><span data-stu-id="79811-143">If health checks fail and/or time-outs are reached, hello upgrade is either rolled back for hello update domain, or hello mode is changed toounmonitored manual.</span></span> <span data-ttu-id="79811-144">Hello 업그레이드 toochoose 실패 한 업그레이드를 위해 이러한 두 모드 중 하나를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-144">You can configure hello upgrade toochoose one of those two modes for failed upgrades.</span></span> 

<span data-ttu-id="79811-145">모니터링 되지 않는 수동 모드로 업그레이드 하는 업데이트 도메인에 모든, tookick hello 다음 업데이트 도메인에서 hello 업그레이드 해제 한 후 수동 작업이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-145">Unmonitored manual mode needs manual intervention after every upgrade on an update domain, tookick off hello upgrade on hello next update domain.</span></span> <span data-ttu-id="79811-146">서비스 패브릭 상태 검사가 수행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-146">No Service Fabric health checks are performed.</span></span> <span data-ttu-id="79811-147">관리자에 게 hello 다음 업데이트 도메인에 있는 hello 업그레이드를 시작 하기 전에 hello 상태 또는 상태 검사를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-147">hello administrator performs hello health or status checks before starting hello upgrade in hello next update domain.</span></span>

## <a name="upgrade-default-services"></a><span data-ttu-id="79811-148">기본 서비스 업그레이드</span><span class="sxs-lookup"><span data-stu-id="79811-148">Upgrade default services</span></span>
<span data-ttu-id="79811-149">서비스 패브릭 응용 프로그램 내에서 기본 서비스 응용 프로그램의 hello 업그레이드 프로세스 중 업그레이드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-149">Default services within Service Fabric application can be upgraded during hello upgrade process of an application.</span></span> <span data-ttu-id="79811-150">기본 서비스는 hello에 정의 된 [응용 프로그램 매니페스트](service-fabric-application-model.md#describe-an-application)합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-150">Default services are defined in hello [application manifest](service-fabric-application-model.md#describe-an-application).</span></span> <span data-ttu-id="79811-151">기본 서비스 업그레이드 hello 표준 규칙은입니다.</span><span class="sxs-lookup"><span data-stu-id="79811-151">hello standard rules of upgrading default services are:</span></span>

1. <span data-ttu-id="79811-152">기본 서비스에서 새 hello [응용 프로그램 매니페스트](service-fabric-application-model.md#describe-an-application) hello 클러스터에 존재 하지 않는 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="79811-152">Default services in hello new [application manifest](service-fabric-application-model.md#describe-an-application) that do not exist in hello cluster are created.</span></span>
> [!TIP]
> <span data-ttu-id="79811-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) toobe tootrue tooenable hello 규칙을 설정 하는 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-153">[EnableDefaultServicesUpgrade](service-fabric-cluster-fabric-settings.md#fabric-settings-that-you-can-customize) needs toobe set tootrue tooenable hello following rules.</span></span> <span data-ttu-id="79811-154">이 기능은 v5.5에서 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="79811-154">This feature is supported from v5.5.</span></span>

2. <span data-ttu-id="79811-155">이전 [응용 프로그램 매니페스트](service-fabric-application-model.md#describe-an-application) 및 새 버전 모두에 있는 기존 서비스가 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="79811-155">Default services existing in both previous [application manifest](service-fabric-application-model.md#describe-an-application) and new version are updated.</span></span> <span data-ttu-id="79811-156">Hello 새 버전의 서비스 설명 hello 클러스터에 이미 없는 덮어씁니다.</span><span class="sxs-lookup"><span data-stu-id="79811-156">Service descriptions in hello new version would overwrite those already in hello cluster.</span></span> <span data-ttu-id="79811-157">기본 서비스 실패를 업데이트하는 경우 응용 프로그램 업그레이드가 자동으로 롤백됩니다.</span><span class="sxs-lookup"><span data-stu-id="79811-157">Application upgrade would rollback automatically upon updating default service failure.</span></span>
3. <span data-ttu-id="79811-158">기본 서비스에서 이전 hello [응용 프로그램 매니페스트](service-fabric-application-model.md#describe-an-application) 하지만 hello 새 버전에 없는 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-158">Default services in hello previous [application manifest](service-fabric-application-model.md#describe-an-application) but not in hello new version are deleted.</span></span> <span data-ttu-id="79811-159">**기본 서비스를 삭제하는 작업은 되돌릴 수 없습니다.**</span><span class="sxs-lookup"><span data-stu-id="79811-159">**Note that this deleting default services can not be reverted.**</span></span>

<span data-ttu-id="79811-160">응용 프로그램의 업그레이드가 롤백되면 하는 경우 기본 서비스 업그레이드가 시작 전에 되돌린된 toohello 상태를 됩니다.</span><span class="sxs-lookup"><span data-stu-id="79811-160">In case of an application upgrade is rolled back, default services are reverted toohello status before upgrade started.</span></span> <span data-ttu-id="79811-161">하지만 삭제된 서비스를 만들 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-161">But deleted services can never be created.</span></span>

## <a name="application-upgrade-flowchart"></a><span data-ttu-id="79811-162">응용 프로그램 업그레이드 순서도</span><span class="sxs-lookup"><span data-stu-id="79811-162">Application upgrade flowchart</span></span>
<span data-ttu-id="79811-163">이 단락이 다음 hello 순서도 서비스 패브릭 응용 프로그램의 hello 업그레이드 프로세스를 이해 하는 데 유용 합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-163">hello flowchart following this paragraph can help you understand hello upgrade process of a Service Fabric application.</span></span> <span data-ttu-id="79811-164">특히 hello 흐름 설명 방법을 포함 하 여 제한 시간, hello *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, 및 *UpgradeHealthCheckInterval*, 성공 또는 실패 한 업데이트 도메인에 있는 hello 업그레이드도 간주 되 면 제어할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="79811-164">In particular, hello flow describes how hello time-outs, including *HealthCheckStableDuration*, *HealthCheckRetryTimeout*, and *UpgradeHealthCheckInterval*, help control when hello upgrade in one update domain is considered a success or a failure.</span></span>

![서비스 패브릭 응용 프로그램에 대 한 hello 업그레이드 프로세스][image]

## <a name="next-steps"></a><span data-ttu-id="79811-166">다음 단계</span><span class="sxs-lookup"><span data-stu-id="79811-166">Next steps</span></span>
<span data-ttu-id="79811-167">[Visual Studio를 사용하여 응용 프로그램 업그레이드](service-fabric-application-upgrade-tutorial.md) 에서는 Visual Studio를 사용하여 응용 프로그램 업그레이드를 진행하는 방법을 안내합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-167">[Upgrading your Application Using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="79811-168">[Powershell을 사용하여 응용 프로그램 업그레이드](service-fabric-application-upgrade-tutorial-powershell.md) 에서는 PowerShell을 사용하여 응용 프로그램 업그레이드를 진행하는 방법을 안내합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-168">[Upgrading your Application Using Powershell](service-fabric-application-upgrade-tutorial-powershell.md) walks you through an application upgrade using PowerShell.</span></span>

<span data-ttu-id="79811-169">[업그레이드 매개 변수](service-fabric-application-upgrade-parameters.md)를 사용하여 응용 프로그램 업그레이드 방법을 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-169">Control how your application upgrades by using [Upgrade Parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="79811-170">응용 프로그램 업그레이드를 학습 하 여 호환 되도록 어떻게 toouse [데이터 직렬화](service-fabric-application-upgrade-data-serialization.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-170">Make your application upgrades compatible by learning how toouse [Data Serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="79811-171">Toouse 너무 참조 하 여 응용 프로그램을 업그레이드 하는 동안 기능에 고급 하는 방법에 대해 알아봅니다[고급 항목](service-fabric-application-upgrade-advanced.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-171">Learn how toouse advanced functionality while upgrading your application by referring too[Advanced Topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="79811-172">toohello 단계를 참조 하 여 응용 프로그램 업그레이드의 일반적인 문제를 수정 [응용 프로그램 업그레이드 문제 해결](service-fabric-application-upgrade-troubleshooting.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="79811-172">Fix common problems in application upgrades by referring toohello steps in [Troubleshooting Application Upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

[image]: media/service-fabric-application-upgrade/service-fabric-application-upgrade-flowchart.png
