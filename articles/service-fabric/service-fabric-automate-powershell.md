---
title: "Azure Service Fabric 응용 프로그램 관리 자동화 | Microsoft Docs"
description: "PowerShell을 사용하여 서비스 패브릭 응용 프로그램 배포, 업그레이드, 테스트 및 제거"
services: service-fabric
documentationcenter: .net
author: rwike77
manager: timlt
editor: 
ms.assetid: f03f4294-571d-4262-8a77-cc8b481b959d
ms.service: service-fabric
ms.workload: na
ms.tgt_pltfrm: na
ms.devlang: dotnet
ms.topic: article
ms.date: 06/16/2017
ms.author: ryanwi
redirect_url: /azure/service-fabric/service-fabric-deploy-remove-applications
ms.openlocfilehash: fb3c2a77ea887289eebf343e223c190781d0e4c2
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="automate-the-application-lifecycle-using-powershell"></a><span data-ttu-id="3d293-103">PowerShell을 사용하여 응용 프로그램 수명 주기 자동화</span><span class="sxs-lookup"><span data-stu-id="3d293-103">Automate the application lifecycle using PowerShell</span></span>
<span data-ttu-id="3d293-104">[서비스 패브릭 응용 프로그램 수명 주기](service-fabric-application-lifecycle.md) 의 여러 측면을 자동화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-104">Many aspects of the [Service Fabric application lifecycle](service-fabric-application-lifecycle.md) can be automated.</span></span>  <span data-ttu-id="3d293-105">이 문서에서는 PowerShell을 사용해 Azure 서비스 패브릭 응용 프로그램을 배포, 업그레이드, 제거 및 테스트하는 일반적인 작업을 자동화하는 방법을 보여줍니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-105">This article shows how to use PowerShell to automate common tasks for deploying, upgrading, removing, and testing Azure Service Fabric applications.</span></span>  <span data-ttu-id="3d293-106">앱 관리를 위한 관리되는 API 및 HTTP API도 사용 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-106">Managed and HTTP APIs for app management are also available.</span></span> <span data-ttu-id="3d293-107">자세한 내용은 [앱 수명 주기](service-fabric-application-lifecycle.md) 를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="3d293-107">See [app lifecycle](service-fabric-application-lifecycle.md) for more information.</span></span>  

## <a name="prerequisites"></a><span data-ttu-id="3d293-108">필수 조건</span><span class="sxs-lookup"><span data-stu-id="3d293-108">Prerequisites</span></span>
<span data-ttu-id="3d293-109">다음은 문서의 작업으로 넘어가기 전에 해야 할 일입니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-109">Before you move on to the tasks in the article, be sure to:</span></span>

* <span data-ttu-id="3d293-110">[서비스 패브릭의 기술 개요](service-fabric-technical-overview.md)에 설명된 서비스 패브릭 개념을 숙지합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-110">Get familiar with the Service Fabric concepts described in [Technical overview of Service Fabric](service-fabric-technical-overview.md).</span></span>
* <span data-ttu-id="3d293-111">[런타임, SDK 및 도구를 설치](service-fabric-get-started.md)합니다. **ServiceFabric** PowerShell 모듈도 함께 설치될 것입니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-111">[Install the runtime, SDK, and tools](service-fabric-get-started.md), which also installs the **ServiceFabric** PowerShell module.</span></span>
* <span data-ttu-id="3d293-112">[PowerShell 스크립트 실행을 활성화](service-fabric-get-started.md#enable-powershell-script-execution)합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-112">[Enable PowerShell script execution](service-fabric-get-started.md#enable-powershell-script-execution).</span></span>
* <span data-ttu-id="3d293-113">로컬 클러스터를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-113">Start a local cluster.</span></span>  <span data-ttu-id="3d293-114">관리자로 새 PowerShell 창을 시작한 다음 SDK 폴더에서 클러스터 설치 스크립트를 실행합니다. `& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span><span class="sxs-lookup"><span data-stu-id="3d293-114">Launch a new PowerShell window as an administrator and then run the cluster setup script from the SDK folder: `& "$ENV:ProgramFiles\Microsoft SDKs\Service Fabric\ClusterSetup\DevClusterSetup.ps1"`</span></span>
* <span data-ttu-id="3d293-115">이 문서에서는 PowerShell 명령을 실행하기 전에 먼저 [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps)(`Connect-ServiceFabricCluster localhost:19000`)를 사용하여 로컬 Service Fabric 클러스터에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-115">Before you run any PowerShell commands in this article, first connect to the local Service Fabric cluster by using [Connect-ServiceFabricCluster](/powershell/module/servicefabric/connect-servicefabriccluster?view=azureservicefabricps): `Connect-ServiceFabricCluster localhost:19000`</span></span>
* <span data-ttu-id="3d293-116">다음 작업에서 배포에는 v1 응용 프로그램 패키지, 업그레이드에는 v2 응용 프로그램 패키지가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-116">The following tasks require a v1 application package to deploy and a v2 application package for upgrade.</span></span> <span data-ttu-id="3d293-117">[**WordCount** 응용 프로그램 예제](http://aka.ms/servicefabricsamples)(시작 샘플에 있음)를 다운로드합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-117">Download the [**WordCount** sample application](http://aka.ms/servicefabricsamples) (located in the Getting Started samples).</span></span> <span data-ttu-id="3d293-118">솔루션 탐색기에서 **WordCount**를 마우스 오른쪽 단추로 클릭하고 **패키지**를 선택하여 Visual Studio에서 응용 프로그램을 빌드 및 패키지합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-118">Build and package the application in Visual Studio (right-click on **WordCount** in Solution Explorer and select **Package**).</span></span> <span data-ttu-id="3d293-119">`C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug`의 v1 패키지를 `C:\Temp\WordCount`에 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-119">Copy the v1 package in `C:\ServiceFabricSamples\Services\WordCount\WordCount\pkg\Debug` to `C:\Temp\WordCount`.</span></span> <span data-ttu-id="3d293-120">`C:\Temp\WordCount`를 `C:\Temp\WordCountV2`에 복사하여 업그레이드에 사용할 v2 응용 프로그램 패키지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-120">Copy `C:\Temp\WordCount` to `C:\Temp\WordCountV2`, creating the v2 application package for upgrade.</span></span> <span data-ttu-id="3d293-121">텍스트 편집기에서 `C:\Temp\WordCountV2\ApplicationManifest.xml` 파일을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-121">Open `C:\Temp\WordCountV2\ApplicationManifest.xml` in a text editor.</span></span> <span data-ttu-id="3d293-122">**ApplicationManifest** 요소에서 **ApplicationTypeVersion** 특성을 "1.0.0"에서 "2.0.0"으로 변경하여 앱 버전 번호를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-122">In the **ApplicationManifest** element, change the **ApplicationTypeVersion** attribute from "1.0.0" to "2.0.0" to update the app version number.</span></span> <span data-ttu-id="3d293-123">변경된 ApplicationManifest.xml 파일을 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-123">Save the changed ApplicationManifest.xml file.</span></span>

## <a name="task-deploy-a-service-fabric-application"></a><span data-ttu-id="3d293-124">작업: 서비스 패브릭 응용 프로그램 배포</span><span class="sxs-lookup"><span data-stu-id="3d293-124">Task: Deploy a Service Fabric application</span></span>
<span data-ttu-id="3d293-125">응용 프로그램을 빌드 및 패키지(또는 응용 프로그램 패키지를 다운로드)한 후에는 로컬 서비스 패브릭 클러스터로 응용 프로그램을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-125">After you've built and packaged the application (or downloaded the application package), you can deploy the application into a local Service Fabric cluster.</span></span> <span data-ttu-id="3d293-126">배포에는 응용 프로그램 패키지를 업로드하고 응용 프로그램 형식을 등록하며 응용 프로그램 인스턴스를 만드는 작업이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-126">Deployment involves uploading the application package, registering the application type, and creating the application instance.</span></span> <span data-ttu-id="3d293-127">이 섹션의 지침에 따라 새 응용 프로그램을 클러스터에 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-127">Use the instructions in this section to deploy a new application to a cluster.</span></span>

### <a name="step-1-upload-the-application-package"></a><span data-ttu-id="3d293-128">1단계: 응용 프로그램 패키지 업로드</span><span class="sxs-lookup"><span data-stu-id="3d293-128">Step 1: Upload the application package</span></span>
<span data-ttu-id="3d293-129">응용 프로그램 패키지를 이미지 저장소에 업로드하면 내부 서비스 패브릭 구성 요소에 의해 액세스할 수 있는 위치에 배치됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-129">Uploading the application package to the image store puts it in a location accessible to internal Service Fabric components.</span></span>  <span data-ttu-id="3d293-130">응용 프로그램 패키지에는 필요한 응용 프로그램 매니페스트, 서비스 매니페스트, 그리고 응용 프로그램 및 서비스 인스턴스를 만드는 데 필요한 코드/구성/데이터 패키지가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-130">The application package contains the necessary application manifest, service manifests, and code, configuration, and data package(s) to create the application and service instances.</span></span> <span data-ttu-id="3d293-131">앱 패키지를 로컬로 확인하려는 경우 [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-131">If you want to verify the app package locally, use the [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span>  <span data-ttu-id="3d293-132">[Copy-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) 명령으로 패키지를 업로드합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-132">The [Copy-ServiceFabricApplicationPackage](/powershell/module/servicefabric/copy-servicefabricapplicationpackage?view=azureservicefabricps) command uploads the package.</span></span> <span data-ttu-id="3d293-133">예:</span><span class="sxs-lookup"><span data-stu-id="3d293-133">For example:</span></span>

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCount\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

### <a name="step-2-register-the-application-type"></a><span data-ttu-id="3d293-134">2단계: 응용 프로그램 형식 등록</span><span class="sxs-lookup"><span data-stu-id="3d293-134">Step 2: Register the application type</span></span>
<span data-ttu-id="3d293-135">응용 프로그램 패키지 등록은 응용 프로그램 매니페스트에서 사용하기 위해 응용 프로그램 형식과 버전을 사용할 수 있도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-135">Registering the application package makes the application type and version declared in the application manifest available for use.</span></span> <span data-ttu-id="3d293-136">시스템은 1단계에서 업로드된 패키지를 읽은 다음 패키지를 확인하며(로컬에서 [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage)를 실행하는 경우와 동일함), 패키지 콘텐츠를 처리하고 처리된 패키지를 내부 시스템 위치에 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-136">The system reads the package uploaded in the step 1, verify the package (equivalent to running [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) locally), process the package contents, and copy the processed package to an internal system location.</span></span>  <span data-ttu-id="3d293-137">[Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-137">Run the [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCount
```
<span data-ttu-id="3d293-138">클러스터에 등록된 모든 응용 프로그램 유형을 보려면 [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-138">To see all the application types registered in the cluster, run the [Get-ServiceFabricApplicationType](/powershell/module/servicefabric/get-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationType
```

### <a name="step-3-create-the-application-instance"></a><span data-ttu-id="3d293-139">3단계: 응용 프로그램 인스턴스 만들기</span><span class="sxs-lookup"><span data-stu-id="3d293-139">Step 3: Create the application instance</span></span>
<span data-ttu-id="3d293-140">응용 프로그램은 [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) 명령을 사용하여 성공적으로 등록된 모든 응용 프로그램 형식 버전을 사용하여 인스턴스화될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-140">An application can be instantiated by using any application type version that has been registered successfully by using the [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) command.</span></span> <span data-ttu-id="3d293-141">각 응용 프로그램의 이름은 배포 시에 선언되며 반드시 **fabric:** 체계로 시작하고 각 응용 프로그램 인스턴스에 대해 고유해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-141">The name of each application is declared at deploy time and must start with the **fabric:** scheme and be unique for each application instance.</span></span> <span data-ttu-id="3d293-142">응용 프로그램 형식 이름 및 응용 프로그램 형식 버전은 응용 프로그램 패키지의 **ApplicationManifest.xml** 파일에 선언됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-142">The application type name and application type version are declared in the **ApplicationManifest.xml** file of the application package.</span></span> <span data-ttu-id="3d293-143">기본 서비스가 대상 응용 프로그램 형식의 응용 프로그램 매니페스트에 정의된 경우 이때 이러한 서비스도 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-143">If any default services were defined in the application manifest of the target application type, then those are created at this time.</span></span>

```powershell
New-ServiceFabricApplication fabric:/WordCount WordCount 1.0.0
```

<span data-ttu-id="3d293-144">[Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) 명령은 해당 모든 상태에 따라 성공적으로 만들어진 모든 응용 프로그램 인스턴스를 나열합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-144">The [Get-ServiceFabricApplication](/powershell/servicefabric/vlatest/get-servicefabricapplication) command lists all application instances that were successfully created, along with their overall status.</span></span> <span data-ttu-id="3d293-145">[Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) 명령은 주어진 응용 프로그램 인스턴스 내에서 성공적으로 만들어진 모든 서비스 인스턴스를 나열합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-145">The [Get-ServiceFabricService](/powershell/module/servicefabric/get-servicefabricservice?view=azureservicefabricps) command lists all of the service instances that were successfully created within a given application instance.</span></span> <span data-ttu-id="3d293-146">기본 서비스(있는 경우)가 나열됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-146">Default services (if any) are listed.</span></span>

```powershell
Get-ServiceFabricApplication

Get-ServiceFabricApplication | Get-ServiceFabricService
```

## <a name="task-upgrade-a-service-fabric-application"></a><span data-ttu-id="3d293-147">작업: 서비스 패브릭 응용 프로그램 업그레이드</span><span class="sxs-lookup"><span data-stu-id="3d293-147">Task: Upgrade a Service Fabric application</span></span>
<span data-ttu-id="3d293-148">업데이트된 응용 프로그램 패키지를 사용하여 이전에 배포된 서비스 패브릭 응용 프로그램을 업그레이드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-148">You can upgrade a previously deployed Service Fabric application with an updated application package.</span></span> <span data-ttu-id="3d293-149">이 작업은 "작업: 서비스 패브릭 응용 프로그램 배포"에서 배포했던 WordCount 응용 프로그램을 업그레이드합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-149">This task upgrades the WordCount application that was deployed in "Task: Deploy a Service Fabric application."</span></span> <span data-ttu-id="3d293-150">자세한 내용은 [서비스 패브릭 응용 프로그램 업그레이드](service-fabric-application-upgrade.md) 를 읽어보세요.</span><span class="sxs-lookup"><span data-stu-id="3d293-150">Read through [Service Fabric application upgrade](service-fabric-application-upgrade.md) for more information.</span></span>

<span data-ttu-id="3d293-151">이 예와 관련된 모든 작업을 단순화하기 위해 필수 조건에서 만든 WordCountV2 응용 프로그램 패키지에서 응용 프로그램 버전 번호만 업데이트 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-151">To keep things simple for this example, only the application version number was updated in the WordCountV2 application package created in the prerequisites.</span></span> <span data-ttu-id="3d293-152">보다 현실적인 시나리오에서는 서비스 코드, 구성 또는 데이터 파일을 업데이트한 다음 업데이트된 버전 번호를 사용하여 응용 프로그램을 다시 빌드하고 패키지할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-152">A more realistic scenario would involve updating your service code, configuration, or data files and then rebuilding and packaging the application with updated version numbers.</span></span>  

### <a name="step-1-upload-the-updated-application-package"></a><span data-ttu-id="3d293-153">1단계: 업데이트된 응용 프로그램 패키지 업로드</span><span class="sxs-lookup"><span data-stu-id="3d293-153">Step 1: Upload the updated application package</span></span>
<span data-ttu-id="3d293-154">WordCount v1 응용 프로그램이 업그레이드 준비가 완료되었습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-154">The WordCount v1 application is ready to be upgraded.</span></span> <span data-ttu-id="3d293-155">관리자 권한으로 PowerShell 창을 열고 [**Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps)을 입력하면 WordCount 응용 프로그램 형식의 버전 1.0.0이 배포되었음이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-155">If you open up a PowerShell window as administrator and type [**Get-ServiceFabricApplication**](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), you see that version 1.0.0 of the WordCount application type is deployed.</span></span>  

<span data-ttu-id="3d293-156">이제 업데이트된 응용 프로그램 패키지를 서비스 패브릭 이미지 저장소(서비스 패브릭에 의해 응용 프로그램 패키지가 저장된 곳)에 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-156">Now copy the updated application package to the Service Fabric image store (where the application packages are stored by Service Fabric).</span></span> <span data-ttu-id="3d293-157">매개 변수 **ApplicationPackagePathInImageStore** 는 서비스 패브릭에 응용 프로그램 패키지를 찾을 수 있는 위치를 알립니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-157">The parameter **ApplicationPackagePathInImageStore** informs Service Fabric where it can find the application package.</span></span> <span data-ttu-id="3d293-158">다음 명령은 응용 프로그램 패키지를 이미지 저장소의 **WordCountV2** 에 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-158">The following command copies the application package to **WordCountV2** in the image store:</span></span>  

```powershell
Copy-ServiceFabricApplicationPackage C:\Temp\WordCountV2\ -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCountV2

```
### <a name="step-2-register-the-updated-application-type"></a><span data-ttu-id="3d293-159">2단계: 업데이트된 응용 프로그램 형식 등록</span><span class="sxs-lookup"><span data-stu-id="3d293-159">Step 2: Register the updated application type</span></span>
<span data-ttu-id="3d293-160">다음 단계에서는 Service Fabric으로 새 버전의 응용 프로그램을 등록하는 것이며 이 작업은 [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet을 사용하여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-160">The next step is to register the new version of the application with Service Fabric, which can be performed by using the [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Register-ServiceFabricApplicationType WordCountV2
```

### <a name="step-3-start-the-upgrade"></a><span data-ttu-id="3d293-161">3단계: 업그레이드 시작</span><span class="sxs-lookup"><span data-stu-id="3d293-161">Step 3: Start the upgrade</span></span>
<span data-ttu-id="3d293-162">응용 프로그램 업그레이드에는 다양한 업그레이드 매개 변수, 제한 시간 및 상태 기준을 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-162">Various upgrade parameters, timeouts, and health criteria can be applied to application upgrades.</span></span> <span data-ttu-id="3d293-163">자세히 알아보려면 [응용 프로그램 업그레이드 매개 변수](service-fabric-application-upgrade-parameters.md) 및 [업그레이드 프로세스](service-fabric-application-upgrade.md) 문서를 읽어보세요.</span><span class="sxs-lookup"><span data-stu-id="3d293-163">Read through the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and [upgrade process](service-fabric-application-upgrade.md) documents to learn more.</span></span> <span data-ttu-id="3d293-164">모든 서비스 및 인스턴스는 업그레이드 후 *정상* 상태여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-164">All services and instances should be *healthy* after the upgrade.</span></span>  <span data-ttu-id="3d293-165">**HealthCheckStableDuration** 을 60초로 설정하면 서비스는 다음 업그레이드 도메인으로 업그레이드를 진행하기 전에 적어도 20초간 정상 상태로 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-165">Set the **HealthCheckStableDuration** to 60 seconds (so that the services are healthy for at least 20 seconds before the upgrade proceeds to the next upgrade domain).</span></span>  <span data-ttu-id="3d293-166">또한 **UpgradeDomainTimeout**을 1200초로, **UpgradeTimeout**을 3000초로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-166">Also set the **UpgradeDomainTimeout** to 1200 seconds and the **UpgradeTimeout** to 3000 seconds.</span></span> <span data-ttu-id="3d293-167">마지막으로 업그레이드하는 동안 문제가 발생한 경우 Service Fabric이 응용 프로그램을 이전 버전으로 롤백하도록 요청하는 **롤백**으로 **UpgradeFailureAction**을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-167">Finally, set the **UpgradeFailureAction** to **rollback**, which requests that Service Fabric rolls back the application to the previous version if failures are encountered during upgrade.</span></span>

<span data-ttu-id="3d293-168">이제 [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet을 사용하여 응용 프로그램 업그레이드를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-168">You can now start the application upgrade by using the [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/WordCount -ApplicationTypeVersion 2.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000  -FailureAction Rollback -Monitored
```

<span data-ttu-id="3d293-169">응용 프로그램 이름은 이전에 배포한 v1.0.0 응용 프로그램 이름과 동일합니다(fabric:/WordCount).</span><span class="sxs-lookup"><span data-stu-id="3d293-169">Note that the application name is the same as the previously deployed v1.0.0 application name (fabric:/WordCount).</span></span> <span data-ttu-id="3d293-170">서비스 패브릭은 이 이름을 사용하여 업그레이드할 응용 프로그램을 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-170">Service Fabric uses this name to identify which application is getting upgraded.</span></span> <span data-ttu-id="3d293-171">제한 시간을 너무 짧게 설정하면 문제 발생을 알리는 오류 메시지가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-171">If you set the time-outs to be too short, you might encounter a time-out failure message that states the problem.</span></span> <span data-ttu-id="3d293-172">[응용 프로그램 업그레이드 문제 해결](service-fabric-application-upgrade-troubleshooting.md)을 참조하거나 시간 제한을 늘리세요.</span><span class="sxs-lookup"><span data-stu-id="3d293-172">Refer to [Troubleshoot application upgrades](service-fabric-application-upgrade-troubleshooting.md), or increase the time-outs.</span></span>

### <a name="step-4-check-upgrade-progress"></a><span data-ttu-id="3d293-173">4단계: 업그레이드 진행률 확인</span><span class="sxs-lookup"><span data-stu-id="3d293-173">Step 4: Check upgrade progress</span></span>
<span data-ttu-id="3d293-174">[Service Fabric Explorer](service-fabric-visualizing-your-cluster.md)를 사용하거나 [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet을 사용하여 응용 프로그램 업그레이드 진행 상태를 모니터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-174">You can monitor application upgrade progress by using [Service Fabric Explorer](service-fabric-visualizing-your-cluster.md), or by using the [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet:</span></span>

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/WordCount
```

<span data-ttu-id="3d293-175">잠시 후에 [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet을 실행하면 모든 업그레이드 도메인이 업그레이드되었으며 작업이 완료되었음이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-175">In a few minutes, the [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) cmdlet shows that all upgrade domains were upgraded (completed).</span></span>

## <a name="task-test-a-service-fabric-application"></a><span data-ttu-id="3d293-176">작업: 서비스 패브릭 응용 프로그램 테스트</span><span class="sxs-lookup"><span data-stu-id="3d293-176">Task: Test a Service Fabric application</span></span>
<span data-ttu-id="3d293-177">고품질 서비스를 작성하려면 개발자는 불안정한 인프라 결함을 유도하여 서비스의 안정성을 테스트할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-177">To write high-quality services, developers need to be able to induce unreliable infrastructure faults to test the stability of their services.</span></span> <span data-ttu-id="3d293-178">서비스 패브릭은 비정상 및 장애 조치(failover) 테스트 시나리오를 사용하여 개발자에게 오류가 있는 상황에서 서비스를 테스트할 수 있도록 오류 작업을 유도하는 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-178">Service Fabric gives developers the ability to induce fault actions and test services in the presence of failures by using the chaos and failover test scenarios.</span></span>  <span data-ttu-id="3d293-179">자세한 내용은 [오류 분석 서비스 소개](service-fabric-testability-overview.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="3d293-179">Read through [Introduction to the Fault Analysis Service](service-fabric-testability-overview.md) for additional information.</span></span>

### <a name="step-1-run-the-chaos-test-scenario"></a><span data-ttu-id="3d293-180">1단계: 비정상 상황 테스트 시나리오 실행</span><span class="sxs-lookup"><span data-stu-id="3d293-180">Step 1: Run the chaos test scenario</span></span>
<span data-ttu-id="3d293-181">비정상 상황 테스트 시나리오는 전체 서비스 패브릭 클러스터에서 오류를 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-181">The chaos test scenario generates faults across the entire Service Fabric cluster.</span></span> <span data-ttu-id="3d293-182">이 시나리오에서는 일반적으로 수개월 또는 수년 후에 발견되는 오류를 수 시간으로 압축합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-182">The scenario compresses faults generally seen over months or years to a few hours.</span></span> <span data-ttu-id="3d293-183">인터리브 오류를 높은 오류 비율과 결합하면 놓치기 쉬운 특이한 사례를 발견할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-183">The combination of interleaved faults with a high fault rate finds corner cases that would otherwise be missed.</span></span> <span data-ttu-id="3d293-184">다음 예제에서는 60분 동안 비정상 상황 테스트 시나리오를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-184">The following example runs the chaos test scenario for 60 minutes.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$concurrentFaults = 3
$waitTimeBetweenIterationsSec = 60

Invoke-ServiceFabricChaosTestScenario -TimeToRunMinute $timeToRun -MaxClusterStabilizationTimeoutSec $maxStabilizationTimeSecs -MaxConcurrentFaults $concurrentFaults -EnableMoveReplicaFaults -WaitTimeBetweenIterationsSec $waitTimeBetweenIterationsSec
```

### <a name="step-2-run-the-failover-test-scenario"></a><span data-ttu-id="3d293-185">2단계: 비정상 상황 테스트 시나리오 실행</span><span class="sxs-lookup"><span data-stu-id="3d293-185">Step 2: Run the failover test scenario</span></span>
<span data-ttu-id="3d293-186">장애 조치(failover) 테스트 시나리오는 전체 클러스터가 아닌 특정 서비스 파티션을 대상으로 하고 기타 서비스는 영향을 받지 않은 상태로 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-186">The failover test scenario targets a specific service partition instead of the entire cluster, and it leaves other services unaffected.</span></span> <span data-ttu-id="3d293-187">비즈니스 논리가 실행되는 동안 서비스 유효성 검사에서 일련의 시뮬레이션된 오류를 통해 시나리오가 반복됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-187">The scenario iterates through a sequence of simulated faults in service validation while your business logic runs.</span></span> <span data-ttu-id="3d293-188">서비스 유효성 검사에서 오류가 발생하면 추가 조사가 필요한 문제가 있다는 의미입니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-188">A failure in service validation indicates an issue that needs further investigation.</span></span> <span data-ttu-id="3d293-189">비정상 상황 테스트 시나리오에서 다중 오류가 가능한 것과는 달리 장애 조치(failover) 테스트는 한 번에 하나씩 오류를 유도할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-189">The failover test induces only one fault at a time, as opposed to the chaos test scenario, which can induce multiple faults.</span></span> <span data-ttu-id="3d293-190">다음 예제는 fabric:/WordCount/WordCountService 서비스에 대해 60분 동안 장애 조치 테스트를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-190">The following example runs the failover test for 60 minutes against the fabric:/WordCount/WordCountService service.</span></span>

```powershell
$timeToRun = 60
$maxStabilizationTimeSecs = 180
$waitTimeBetweenFaultsSec = 10
$serviceName = "fabric:/WordCount/WordCountService"

Invoke-ServiceFabricFailoverTestScenario -TimeToRunMinute $timeToRun -MaxServiceStabilizationTimeoutSec $maxStabilizationTimeSecs -WaitTimeBetweenFaultsSec $waitTimeBetweenFaultsSec -ServiceName $serviceName -PartitionKindUniformInt64 -PartitionKey 1
```

## <a name="task-remove-a-service-fabric-application"></a><span data-ttu-id="3d293-191">작업: 서비스 패브릭 응용 프로그램 제거</span><span class="sxs-lookup"><span data-stu-id="3d293-191">Task: Remove a Service Fabric application</span></span>
<span data-ttu-id="3d293-192">배포된 응용 프로그램의 인스턴스를 삭제하고 클러스터에서 프로비전된 응용 프로그램 형식을 제거하며 ImageStore에서 응용 프로그램 패키지를 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-192">You can delete an instance of a deployed application, remove the provisioned application type from the cluster, and remove the application package from the ImageStore.</span></span>

### <a name="step-1-remove-an-application-instance"></a><span data-ttu-id="3d293-193">1단계: 응용 프로그램 인스턴스 제거</span><span class="sxs-lookup"><span data-stu-id="3d293-193">Step 1: Remove an application instance</span></span>
<span data-ttu-id="3d293-194">응용 프로그램 인스턴스가 더 이상 필요하지 않은 경우, [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet을 사용하여 영구적으로 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-194">When an application instance is no longer needed, you can permanently remove it by using the [Remove-ServiceFabricApplication](/powershell/module/servicefabric/remove-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="3d293-195">이렇게 하면 응용 프로그램에 속한 모든 서비스도 자동으로 제거되므로 모든 서비스 상태가 영구적으로 제거됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-195">This also automatically removes all services belonging to the application, permanently removing all service state.</span></span> <span data-ttu-id="3d293-196">이 작업은 되돌릴 수 없으며 응용 프로그램 상태는 복구할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-196">This operation cannot be reversed and application state cannot be recovered.</span></span>

```powershell
Remove-ServiceFabricApplication fabric:/WordCount
```

### <a name="step-2-unregister-the-application-type"></a><span data-ttu-id="3d293-197">2단계: 응용 프로그램 형식 등록 취소</span><span class="sxs-lookup"><span data-stu-id="3d293-197">Step 2: Unregister the application type</span></span>
<span data-ttu-id="3d293-198">응용 프로그램 형식의 특정 버전이 더 이상 필요하지 않은 경우, [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet을 사용하여 등록 취소할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-198">When you no longer need a particular version of an application type, unregister it by using the [Unregister-ServiceFabricApplicationType](/powershell/module/servicefabric/unregister-servicefabricapplicationtype?view=azureservicefabricps) cmdlet.</span></span> <span data-ttu-id="3d293-199">사용하지 않는 형식을 등록 취소하면 이미지 저장소에서 해당 응용 프로그램 패키지가 사용하는 저장소 공간이 해제됩니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-199">Unregistering unused types releases storage space used by the application package in the image store.</span></span> <span data-ttu-id="3d293-200">응용 프로그램 형식은 이에 대해 인스턴스화된 응용 프로그램이나 이를 참조하는 보류 중인 응용 프로그램이 없는 한 등록 취소할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-200">An application type can be unregistered as long as there are no applications instantiated against it or pending application upgrades referencing it.</span></span>

```powershell
Unregister-ServiceFabricApplicationType WordCount 1.0.0
```

### <a name="step-3-remove-the-application-package"></a><span data-ttu-id="3d293-201">3단계: 응용 프로그램 패키지 제거</span><span class="sxs-lookup"><span data-stu-id="3d293-201">Step 3: Remove the application package</span></span>
<span data-ttu-id="3d293-202">응용 프로그램 형식이 등록 취소되면 [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet을 사용하여 이미지 저장소에서 응용 프로그램 패키지를 제거할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3d293-202">After the application type is unregistered, the application package can be removed from the image store by using the [Remove-ServiceFabricApplicationPackage](/powershell/module/servicefabric/remove-servicefabricapplicationpackage?view=azureservicefabricps) cmdlet.</span></span>

```powershell
Remove-ServiceFabricApplicationPackage -ImageStoreConnectionString file:C:\SfDevCluster\Data\ImageStoreShare -ApplicationPackagePathInImageStore WordCount
```

## <a name="next-steps"></a><span data-ttu-id="3d293-203">다음 단계</span><span class="sxs-lookup"><span data-stu-id="3d293-203">Next steps</span></span>
[<span data-ttu-id="3d293-204">서비스 패브릭 응용 프로그램 수명 주기</span><span class="sxs-lookup"><span data-stu-id="3d293-204">Service Fabric application lifecycle</span></span>](service-fabric-application-lifecycle.md)

[<span data-ttu-id="3d293-205">응용 프로그램 배포</span><span class="sxs-lookup"><span data-stu-id="3d293-205">Deploy an application</span></span>](service-fabric-deploy-remove-applications.md)

[<span data-ttu-id="3d293-206">응용 프로그램 업그레이드</span><span class="sxs-lookup"><span data-stu-id="3d293-206">Application upgrade</span></span>](service-fabric-application-upgrade.md)

[<span data-ttu-id="3d293-207">Azure Service Fabric cmdlet</span><span class="sxs-lookup"><span data-stu-id="3d293-207">Azure Service Fabric cmdlets</span></span>](/powershell/azure/overview?view=azureservicefabricps)

