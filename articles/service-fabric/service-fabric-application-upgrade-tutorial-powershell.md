---
title: "PowerShell을 사용하여 Service Fabric 앱 업그레이드 | Microsoft Docs"
description: "이 문서는 PowerShell을 사용하여 서비스 패브릭 응용 프로그램의 배포, 코드 변경, 업그레이드 롤아웃 환경을 안내합니다."
services: service-fabric
documentationcenter: .net
author: mani-ramaswamy
manager: timlt
editor: 
ms.assetid: 9bc75748-96b0-49ca-8d8a-41fe08398f25
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 8/9/2017
ms.author: subramar
ms.openlocfilehash: 3591ced970887d4eb5a33cec8f6951b5476d04f8
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/18/2017
---
# <a name="service-fabric-application-upgrade-using-powershell"></a><span data-ttu-id="c6f27-103">PowerShell을 사용하여 서비스 패브릭 응용 프로그램 업그레이드</span><span class="sxs-lookup"><span data-stu-id="c6f27-103">Service Fabric application upgrade using PowerShell</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="c6f27-104">PowerShell</span><span class="sxs-lookup"><span data-stu-id="c6f27-104">PowerShell</span></span>](service-fabric-application-upgrade-tutorial-powershell.md)
> * [<span data-ttu-id="c6f27-105">Visual Studio</span><span class="sxs-lookup"><span data-stu-id="c6f27-105">Visual Studio</span></span>](service-fabric-application-upgrade-tutorial.md)
> 
> 

<br/>

<span data-ttu-id="c6f27-106">가장 자주 사용되며 바람직한 업그레이드 방법은 모니터링 되는 롤링 업그레이드입니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-106">The most frequently used and recommended upgrade approach is the monitored rolling upgrade.</span></span>  <span data-ttu-id="c6f27-107">Azure 서비스 패브릭은 상태 정책 세트에 기반하여 업그레이드되는 응용 프로그램의 상태를 모니터링합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-107">Azure Service Fabric monitors the health of the application being upgraded based on a set of health policies.</span></span> <span data-ttu-id="c6f27-108">UD(업데이트 도메인)이 업그레이드된 경우, 서비스 패브릭은 응용 프로그램의 상태를 평가하고 다음 업데이트 도메인으로 진행할지 또는 업그레이드를 실패할지 여부를 상태 정책에 기반하여 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-108">Once an update domain (UD) is upgraded, Service Fabric evaluates the application health and either proceeds to the next update domain or fails the upgrade depending on the health policies.</span></span>

<span data-ttu-id="c6f27-109">모니터링되는 응용 프로그램 업그레이드는 관리된 네이티브 API, PowerShell, REST를 사용하여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-109">A monitored application upgrade can be performed using the managed or native APIs, PowerShell, or REST.</span></span> <span data-ttu-id="c6f27-110">Visual Studio를 사용하여 업그레이드를 수행하는 지침은 [Visual Studio를 사용하여 응용 프로그램 업그레이드](service-fabric-application-upgrade-tutorial.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c6f27-110">For instructions on performing an upgrade using Visual Studio, see [Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md).</span></span>

<span data-ttu-id="c6f27-111">서비스 패브릭 모니터링되는 롤링 업그레이드는 응용 프로그램 관리자가 서비스 패브릭이 사용하여 응용 프로그램이 정상인지 결정하는 상태 평가 정책을 구성할 수 있게 합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-111">With Service Fabric monitored rolling upgrades, the application administrator can configure the health evaluation policy that Service Fabric uses to determine if the application is healthy.</span></span> <span data-ttu-id="c6f27-112">또한 관리자는 상태 평가가 실패했을 때 자동 롤백과 같은 수행할 작업을 구성할 수 있습니다. 이 섹션에서는 PowerShell을 사용하는 SDK 샘플 중 하나에 대해 모니터링되는 업그레이드를 연습합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-112">In addition, the administrator can configure the action to be taken when the health evaluation fails (for example, doing an automatic rollback.) This section walks through a monitored upgrade for one of the SDK samples that uses PowerShell.</span></span> <span data-ttu-id="c6f27-113">또한 다음 Microsoft Virtual Academy 비디오는 앱 업그레이드를 안내합니다. <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span><span class="sxs-lookup"><span data-stu-id="c6f27-113">The following Microsoft Virtual Academy video also walks you through an app upgrade: <center><a target="_blank" href="https://mva.microsoft.com/en-US/training-courses/building-microservices-applications-on-azure-service-fabric-16747?l=OrHJH66yC_6406218965">
<img src="./media/service-fabric-application-upgrade-tutorial-powershell/AppLifecycleVid.png" WIDTH="360" HEIGHT="244">
</a></center></span></span>

## <a name="step-1-build-and-deploy-the-visual-objects-sample"></a><span data-ttu-id="c6f27-114">1단계: 시각적 개체 샘플 빌드 및 배포</span><span class="sxs-lookup"><span data-stu-id="c6f27-114">Step 1: Build and deploy the Visual Objects sample</span></span>
<span data-ttu-id="c6f27-115">응용 프로그램 프로젝트 **VisualObjectsApplication,**을 마우스 오른쪽 단추로 클릭하고 **게시** 명령을 선택하여 응용 프로그램을 빌드 및 게시합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-115">Build and publish the application by right-clicking on the application project, **VisualObjectsApplication,** and selecting the **Publish** command.</span></span>  <span data-ttu-id="c6f27-116">자세한 내용은 [서비스 패브릭 응용 프로그램 업그레이드 자습서](service-fabric-application-upgrade-tutorial.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="c6f27-116">For more information, see [Service Fabric application upgrade tutorial](service-fabric-application-upgrade-tutorial.md).</span></span>  <span data-ttu-id="c6f27-117">또는 PowerShell을 사용하여 응용 프로그램을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-117">Alternatively, you can use PowerShell to deploy your application.</span></span>

> [!NOTE]
> <span data-ttu-id="c6f27-118">어떤 서비스 패브릭 명령이 PowerShell에서 사용되기 전에 `Connect-ServiceFabricCluster` cmdlet을 사용하여 클러스터에 처음 연결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-118">Before any of the Service Fabric commands may be used in PowerShell, you first need to connect to the cluster by using the `Connect-ServiceFabricCluster` cmdlet.</span></span> <span data-ttu-id="c6f27-119">마찬가지로, 클러스터는 로컬 컴퓨터에 이미 설치된 것으로 간주됩니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-119">Similarly, it is assumed that the Cluster has already been set up on your local machine.</span></span> <span data-ttu-id="c6f27-120">[서비스 패브릭 개발 환경 설정](service-fabric-get-started.md)문서를 참조하십시오.</span><span class="sxs-lookup"><span data-stu-id="c6f27-120">See the article on [setting up your Service Fabric development environment](service-fabric-get-started.md).</span></span>
> 
> 

<span data-ttu-id="c6f27-121">Visual Studio에서 프로젝트를 빌드한 후, PowerShell 명령 [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) 를 사용하여 응용 프로그램 패키지를 ImageStore에 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-121">After building the project in Visual Studio, you can use the PowerShell command [Copy-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/copy-servicefabricapplicationpackage) to copy the application package to the ImageStore.</span></span> <span data-ttu-id="c6f27-122">앱 패키지를 로컬로 확인하려는 경우 [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-122">If you want to verify the app package locally, use the [Test-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/test-servicefabricapplicationpackage) cmdlet.</span></span> <span data-ttu-id="c6f27-123">다음 단계는 [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet을 사용하여 서비스 패브릭 런타임에 응용 프로그램을 등록하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-123">The next step is to register the application to the Service Fabric runtime using the [Register-ServiceFabricApplicationPackage](/powershell/servicefabric/vlatest/register-servicefabricapplicationtype) cmdlet.</span></span> <span data-ttu-id="c6f27-124">마지막 단계로, [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet을 사용하여 응용 프로그램의 인스턴스를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-124">The final step is to start an instance of the application by using the [New-ServiceFabricApplication](/powershell/module/servicefabric/new-servicefabricapplication?view=azureservicefabricps) cmdlet.</span></span>  <span data-ttu-id="c6f27-125">이 세 단계는 Visual Studio의 **배포** 메뉴를 사용하는 것과 유사합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-125">These three steps are analogous to using the **Deploy** menu item in Visual Studio.</span></span>

<span data-ttu-id="c6f27-126">이제 [클러스터 및 응용 프로그램을 보는 서비스 패브릭 탐색기](service-fabric-visualizing-your-cluster.md)를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-126">Now, you can use [Service Fabric Explorer to view the cluster and the application](service-fabric-visualizing-your-cluster.md).</span></span> <span data-ttu-id="c6f27-127">응용 프로그램에는 웹 서비스가 있으며, Internet Explorer 주소 표시줄에 [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) 를 입력하여 웹 서비스로 이동할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-127">The application has a web service that can be navigated to in Internet Explorer by typing [http://localhost:8081/visualobjects](http://localhost:8081/visualobjects) in the address bar.</span></span>  <span data-ttu-id="c6f27-128">화면에서 일부 부동 시각적 개체가 움직이는 것을 볼 수 있을 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-128">You should see some floating visual objects moving around in the screen.</span></span>  <span data-ttu-id="c6f27-129">또한 [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) 을 사용하여 응용 프로그램 상태를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-129">Additionally, you can use [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps) to check the application status.</span></span>

## <a name="step-2-update-the-visual-objects-sample"></a><span data-ttu-id="c6f27-130">2단계: 시각적 개체 샘플 업데이트</span><span class="sxs-lookup"><span data-stu-id="c6f27-130">Step 2: Update the Visual Objects sample</span></span>
<span data-ttu-id="c6f27-131">1단계에서에서 배포된 버전에서 알 수 있듯이 시각적 개체는 회전하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-131">You might notice that with the version that was deployed in Step 1, the visual objects do not rotate.</span></span> <span data-ttu-id="c6f27-132">이 응용 프로그램을 시각적 개체도 회전하도록 업그레이드하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-132">Let's upgrade this application to one where the visual objects also rotate.</span></span>

<span data-ttu-id="c6f27-133">VisualObjects 솔루션에서 VisualObjects.ActorService 프로젝트를 선택하고, StatefulVisualObjectActor.cs 파일을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-133">Select the VisualObjects.ActorService project within the VisualObjects solution, and open the StatefulVisualObjectActor.cs file.</span></span> <span data-ttu-id="c6f27-134">해당 파일 내에서 `MoveObject` 메서드로 이동하고 `this.State.Move()`를 주석 처리하고 `this.State.Move(true)`의 주석 처리를 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-134">Within that file, navigate to the method `MoveObject`, comment out `this.State.Move()`, and uncomment `this.State.Move(true)`.</span></span> <span data-ttu-id="c6f27-135">이렇게 변경하면 서비스가 업그레이드된 후 개체가 회전됩니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-135">This change rotates the objects after the service is upgraded.</span></span>

<span data-ttu-id="c6f27-136">프로젝트 *VisualObjects.ActorService* 의 **ServiceManifest.xml**파일(PackageRoot 아래)도 업데이트해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-136">We also need to update the *ServiceManifest.xml* file (under PackageRoot) of the project **VisualObjects.ActorService**.</span></span> <span data-ttu-id="c6f27-137">*CodePackage* 및 서비스 버전을 2.0으로 업데이트하고 *ServiceManifest.xml* 파일의 해당 줄을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-137">Update the *CodePackage* and the service version to 2.0, and the corresponding lines in the *ServiceManifest.xml* file.</span></span>
<span data-ttu-id="c6f27-138">솔루션을 마우스 오른쪽 단추로 클릭한 다음 Visual Studio *Edit Manifest Files* (매니페스트 파일 편집) 옵션을 사용하여 매니패스트 파일을 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-138">You can use the Visual Studio *Edit Manifest Files* option after you right-click on the solution to make the manifest file changes.</span></span>

<span data-ttu-id="c6f27-139">변경 후 매니페스트 버전은 다음과 같이 설정됩니다(강조 표시된 글씨가 변경된 부분임).</span><span class="sxs-lookup"><span data-stu-id="c6f27-139">After the changes are made, the manifest should look like the following (highlighted portions show the changes):</span></span>

```xml
<ServiceManifestName="VisualObjects.ActorService" Version="2.0" xmlns="http://schemas.microsoft.com/2011/01/fabric" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">

<CodePackageName="Code" Version="2.0">
```

<span data-ttu-id="c6f27-140">이제 *ApplicationManifest.xml* 파일(**VisualObjects** 솔루션 내 **VisualObjects** 프로젝트 내에서 찾을 수 있음)이 **VisualObjects.ActorService** 프로젝트의 2.0 버전으로 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-140">Now the *ApplicationManifest.xml* file (found under the **VisualObjects** project under the **VisualObjects** solution) is updated to version 2.0 of the **VisualObjects.ActorService** project.</span></span> <span data-ttu-id="c6f27-141">또한 응용 프로그램 버전이 1.0.0.0에서 2.0.0.0으로 업데이트됩니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-141">In addition, the Application version is updated to 2.0.0.0 from 1.0.0.0.</span></span> <span data-ttu-id="c6f27-142">*ApplicationManifest.xml* 은 다음 코드 조각과 비슷합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-142">The *ApplicationManifest.xml* should look like the following snippet:</span></span>

```xml
<ApplicationManifestxmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" ApplicationTypeName="VisualObjects" ApplicationTypeVersion="2.0.0.0" xmlns="http://schemas.microsoft.com/2011/01/fabric">

 <ServiceManifestRefServiceManifestName="VisualObjects.ActorService" ServiceManifestVersion="2.0" />
```


<span data-ttu-id="c6f27-143">이제 **ActorService** 프로젝트를 선택하고 마우스 오른쪽 단추를 클릭한 후 Visual Studio에서 **Build** 옵션을 선택하여 프로젝트를 빌드합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-143">Now, build the project by selecting just the **ActorService** project, and then right-clicking and selecting the **Build** option in Visual Studio.</span></span> <span data-ttu-id="c6f27-144">**모두 다시 빌드**를 선택한 경우 코드가 변경되었으므로 모든 프로젝트의 버전을 업데이트해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-144">If you select **Rebuild all**, you should update the versions for all projects, since the code would have changed.</span></span> <span data-ttu-id="c6f27-145">다음으로, ***VisualObjectsApplication***을 마우스 오른쪽 단추로 클릭하고 서비스 패브릭 메뉴를 선택한 후 **패키지**를 선택하여 업데이트된 응용 프로그램을 패키지해봅시다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-145">Next, let's package the updated application by right-clicking on ***VisualObjectsApplication***, selecting the Service Fabric Menu, and choosing **Package**.</span></span> <span data-ttu-id="c6f27-146">이 작업을 수행하면 배포 가능한 응용 프로그램 패키지가 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-146">This action creates an application package that can be deployed.</span></span>  <span data-ttu-id="c6f27-147">업데이트된 응용 프로그램의 배포 준비가 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-147">Your updated application is ready to be deployed.</span></span>

## <a name="step-3--decide-on-health-policies-and-upgrade-parameters"></a><span data-ttu-id="c6f27-148">3단계: 상태 정책 결정 및 매개 변수 업그레이드</span><span class="sxs-lookup"><span data-stu-id="c6f27-148">Step 3:  Decide on health policies and upgrade parameters</span></span>
<span data-ttu-id="c6f27-149">[응용 프로그램 업그레이드 매개 변수](service-fabric-application-upgrade-parameters.md) 및 [업그레이드 프로세스](service-fabric-application-upgrade.md)를 파악하여 다양한 업그레이드 매개 변수, 제한 시간 및 적용되는 상태 조건을 잘 이해하세요.</span><span class="sxs-lookup"><span data-stu-id="c6f27-149">Familiarize yourself with the [application upgrade parameters](service-fabric-application-upgrade-parameters.md) and the [upgrade process](service-fabric-application-upgrade.md) to get a good understanding of the various upgrade parameters, time-outs, and health criterion applied.</span></span> <span data-ttu-id="c6f27-150">이 연습에서는 서비스 상태 평가 조건이 모든 서비스 및 인스턴스가 업그레이드 후에 *정상* 이 되어야 함을 의미하는 기본값(및 권장값)으로 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-150">For this walkthrough, the service health evaluation criterion is set to the default (and recommended) values, which means that all services and instances should be *healthy* after the upgrade.</span></span>  

<span data-ttu-id="c6f27-151">그러나 *HealthCheckStableDuration* 을 60초로 증가시켜 보겠습니다(그러면 서비스는 다음 업데이트 도메인으로 업그레이드를 진행하기 전에 적어도 20초간 정상이 됩니다).</span><span class="sxs-lookup"><span data-stu-id="c6f27-151">However, let's increase the *HealthCheckStableDuration* to 60 seconds (so that the services are healthy for at least 20 seconds before the upgrade proceeds to the next update domain).</span></span>  <span data-ttu-id="c6f27-152">또한 *UpgradeDomainTimeout*을 1200초로, *UpgradeTimeout*을 3000초로 설정해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-152">Let's also set the *UpgradeDomainTimeout* to be 1200 seconds and the *UpgradeTimeout* to be 3000 seconds.</span></span>

<span data-ttu-id="c6f27-153">마지막으로 *UpgradeFailureAction* 이 롤백되도록 설정해 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-153">Finally, let's also set the *UpgradeFailureAction* to rollback.</span></span> <span data-ttu-id="c6f27-154">이 옵션에서는 업그레이드 중에 문제가 발생할 경우 서비스 패브릭이 응용 프로그램을 이전 버전으로 롤백해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-154">This option requires Service Fabric to roll back the application to the previous version if it encounters any issues during the upgrade.</span></span> <span data-ttu-id="c6f27-155">따라서 업그레이드를 시작할 때(4단계) 다음 매개 변수가 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-155">Thus, when starting the upgrade (in Step 4), the following parameters are specified:</span></span>

<span data-ttu-id="c6f27-156">FailureAction = Rollback</span><span class="sxs-lookup"><span data-stu-id="c6f27-156">FailureAction = Rollback</span></span>

<span data-ttu-id="c6f27-157">HealthCheckStableDurationSec = 60</span><span class="sxs-lookup"><span data-stu-id="c6f27-157">HealthCheckStableDurationSec = 60</span></span>

<span data-ttu-id="c6f27-158">UpgradeDomainTimeoutSec = 1200</span><span class="sxs-lookup"><span data-stu-id="c6f27-158">UpgradeDomainTimeoutSec = 1200</span></span>

<span data-ttu-id="c6f27-159">UpgradeTimeout = 3000</span><span class="sxs-lookup"><span data-stu-id="c6f27-159">UpgradeTimeout = 3000</span></span>

## <a name="step-4-prepare-application-for-upgrade"></a><span data-ttu-id="c6f27-160">4단계: 업그레이드를 위한 응용 프로그램 준비</span><span class="sxs-lookup"><span data-stu-id="c6f27-160">Step 4: Prepare application for upgrade</span></span>
<span data-ttu-id="c6f27-161">이제 응용 프로그램이 빌드되고 업그레이드 준비되었습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-161">Now the application is built and ready to be upgraded.</span></span> <span data-ttu-id="c6f27-162">관리자로 PowerShell 창을 열고 [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps)을 입력하면 **VisualObjects**의 응용 프로그램 형식 1.0.0.0이 배포되었음을 알려줍니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-162">If you open up a PowerShell window as an administrator and type [Get-ServiceFabricApplication](/powershell/module/servicefabric/get-servicefabricapplication?view=azureservicefabricps), it should let you know that it is application type 1.0.0.0 of **VisualObjects** that's been deployed.</span></span>  

<span data-ttu-id="c6f27-163">이 응용 프로그램 패키지는 Service Fabric SDK의 압축을 푼 다음 상대 경로 아래 저장됩니다. *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*</span><span class="sxs-lookup"><span data-stu-id="c6f27-163">The application package is stored under the following relative path where you uncompressed the Service Fabric SDK - *Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug*.</span></span> <span data-ttu-id="c6f27-164">디렉터리에서 응용 프로그램 패키지가 저장된 "Package" 폴더를 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-164">You should find a "Package" folder in that directory, where the application package is stored.</span></span> <span data-ttu-id="c6f27-165">타임스탬프를 확인하여 최신 빌드인지 확인합니다(경로를 적절하게 수정해야 할 수 있음).</span><span class="sxs-lookup"><span data-stu-id="c6f27-165">Check the timestamps to ensure that it is the latest build (you may need to modify the paths appropriately as well).</span></span>

<span data-ttu-id="c6f27-166">이제 업데이트된 응용 프로그램 패키지를 서비스 패브릭 ImageStore(서비스 패브릭에 의해 응용 프로그램 패키지가 저장된 곳)에 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-166">Now let's copy the updated application package to the Service Fabric ImageStore (where the application packages are stored by Service Fabric).</span></span> <span data-ttu-id="c6f27-167">매개 변수 *ApplicationPackagePathInImageStore* 는 서비스 패브릭에 응용 프로그램 패키지를 찾을 수 있는 위치를 알립니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-167">The parameter *ApplicationPackagePathInImageStore* informs Service Fabric where it can find the application package.</span></span> <span data-ttu-id="c6f27-168">다음 명령으로 업데이트된 응용 프로그램을 "VisualObjects\_V2"에 저장하였습니다(경로를 다시 적절하게 수정해야 할 수 있습니다).</span><span class="sxs-lookup"><span data-stu-id="c6f27-168">We have put the updated application in "VisualObjects\_V2" with the following command (you may need to modify paths again appropriately).</span></span>

```powershell
Copy-ServiceFabricApplicationPackage  -ApplicationPackagePath .\Samples\Services\Stateful\VisualObjects\VisualObjects\obj\x64\Debug\Package
-ImageStoreConnectionString fabric:ImageStore   -ApplicationPackagePathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="c6f27-169">다음 단계에서는 Service Fabric으로 이 응용 프로그램을 등록하는 것이며, [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) 명령을 사용하여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-169">The next step is to register this application with Service Fabric, which can be performed using the [Register-ServiceFabricApplicationType](/powershell/module/servicefabric/register-servicefabricapplicationtype?view=azureservicefabricps) command:</span></span>

```powershell
Register-ServiceFabricApplicationType -ApplicationPathInImageStore "VisualObjects\_V2"
```

<span data-ttu-id="c6f27-170">위 명령이 실패하면 모든 서비스를 다시 빌드해야 할 가능성이 높습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-170">If the preceding command doesn't succeed, it is likely that you need a rebuild of all services.</span></span> <span data-ttu-id="c6f27-171">2단계에서 언급했듯이 WebService 버전도 업데이트해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-171">As mentioned in Step 2, you may have to update your WebService version as well.</span></span>

## <a name="step-5-start-the-application-upgrade"></a><span data-ttu-id="c6f27-172">5단계: 응용 프로그램 업그레이드 시작</span><span class="sxs-lookup"><span data-stu-id="c6f27-172">Step 5: Start the application upgrade</span></span>
<span data-ttu-id="c6f27-173">이제 [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) 명령을 사용하여 응용 프로그램 업그레이드를 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-173">Now, we're all set to start the application upgrade by using the [Start-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/start-servicefabricapplicationupgrade?view=azureservicefabricps) command:</span></span>

```powershell
Start-ServiceFabricApplicationUpgrade -ApplicationName fabric:/VisualObjects -ApplicationTypeVersion 2.0.0.0 -HealthCheckStableDurationSec 60 -UpgradeDomainTimeoutSec 1200 -UpgradeTimeout 3000   -FailureAction Rollback -Monitored
```


<span data-ttu-id="c6f27-174">응용 프로그램 이름은 *ApplicationManifest.xml* 파일에 기재된 것과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-174">The application name is the same as it was described in the *ApplicationManifest.xml* file.</span></span> <span data-ttu-id="c6f27-175">서비스 패브릭은 이 이름을 사용하여 업그레이드할 응용 프로그램을 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-175">Service Fabric uses this name to identify which application is getting upgraded.</span></span> <span data-ttu-id="c6f27-176">제한 시간을 너무 짧게 설정하면 문제 발생을 알리는 오류 메시지가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-176">If you set the time-outs to be too short, you may encounter a failure message that states the problem.</span></span> <span data-ttu-id="c6f27-177">문제 해결 섹션을 참조하거나 제한 시간을 늘리십시오.</span><span class="sxs-lookup"><span data-stu-id="c6f27-177">Refer to the troubleshooting section, or increase the time-outs.</span></span>

<span data-ttu-id="c6f27-178">이제 응용 프로그램 업그레이드가 진행되면 Service Fabric Explorer 또는 [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell 명령을 사용하여 이 업그레이드를 모니터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-178">Now, as the application upgrade proceeds, you can monitor it using Service Fabric Explorer, or by using the [Get-ServiceFabricApplicationUpgrade](/powershell/module/servicefabric/get-servicefabricapplicationupgrade?view=azureservicefabricps) PowerShell command:</span></span> 

```powershell
Get-ServiceFabricApplicationUpgrade fabric:/VisualObjects
```

<span data-ttu-id="c6f27-179">몇 분 후, 앞의 PowerShell 명령을 사용하여 얻은 상태는 모든 업데이트 도메인이 업그레이드되었음(완료)을 알립니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-179">In a few minutes, the status that you got by using the preceding PowerShell command, should state that all update domains were upgraded (completed).</span></span> <span data-ttu-id="c6f27-180">브라우저 창에서 시각적 개체가 이제 회전되는 것을 볼 수 있을 것입니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-180">And you should find that the visual objects in your browser window have started rotating!</span></span>

<span data-ttu-id="c6f27-181">연습을 위해 버전 2에서 버전 3으로 또는 버전 2에서 버전 1로 업그레이드를 시도할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-181">You can try upgrading from version 2 to version 3, or from version 2 to version 1 as an exercise.</span></span> <span data-ttu-id="c6f27-182">버전 2에서 버전 1로 이동하는 것도 업그레이드로 간주됩니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-182">Moving from version 2 to version 1 is also considered an upgrade.</span></span> <span data-ttu-id="c6f27-183">제한 시간과 상태 정책을 변경해 보면서 익숙해지십시오.</span><span class="sxs-lookup"><span data-stu-id="c6f27-183">Play with time-outs and health policies to make yourself familiar with them.</span></span> <span data-ttu-id="c6f27-184">Azure 클러스터에 배포하는 경우 매개 변수를 적절히 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-184">When you are deploying to an Azure cluster, the parameters need to be set appropriately.</span></span> <span data-ttu-id="c6f27-185">제한 시간을 신중하게 설정하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-185">It is good to set the time-outs conservatively.</span></span>

## <a name="next-steps"></a><span data-ttu-id="c6f27-186">다음 단계</span><span class="sxs-lookup"><span data-stu-id="c6f27-186">Next steps</span></span>
<span data-ttu-id="c6f27-187">[Visual Studio를 사용하여 응용 프로그램 업그레이드](service-fabric-application-upgrade-tutorial.md) 에서는 Visual Studio를 사용하여 응용 프로그램 업그레이드를 진행하는 방법을 안내합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-187">[Upgrading your application using Visual Studio](service-fabric-application-upgrade-tutorial.md) walks you through an application upgrade using Visual Studio.</span></span>

<span data-ttu-id="c6f27-188">[업그레이드 매개 변수](service-fabric-application-upgrade-parameters.md)를 사용하여 응용 프로그램 업그레이드 방법을 제어합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-188">Control how your application upgrades by using [upgrade parameters](service-fabric-application-upgrade-parameters.md).</span></span>

<span data-ttu-id="c6f27-189">[데이터 직렬화](service-fabric-application-upgrade-data-serialization.md)사용 방법을 익혀 응용 프로그램 업그레이드와 호환되도록 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-189">Make your application upgrades compatible by learning how to use [data serialization](service-fabric-application-upgrade-data-serialization.md).</span></span>

<span data-ttu-id="c6f27-190">[고급 항목](service-fabric-application-upgrade-advanced.md)을 참조하여 응용 프로그램을 업그레이드하는 동안 고급 기능을 사용하는 방법에 대해 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-190">Learn how to use advanced functionality while upgrading your application by referring to [Advanced topics](service-fabric-application-upgrade-advanced.md).</span></span>

<span data-ttu-id="c6f27-191">[응용 프로그램 업그레이드 문제 해결](service-fabric-application-upgrade-troubleshooting.md)의 단계를 참조하여 응용 프로그램 업그레이드 중 발생하는 일반적인 문제를 해결합니다.</span><span class="sxs-lookup"><span data-stu-id="c6f27-191">Fix common problems in application upgrades by referring to the steps in [Troubleshooting application upgrades](service-fabric-application-upgrade-troubleshooting.md).</span></span>

