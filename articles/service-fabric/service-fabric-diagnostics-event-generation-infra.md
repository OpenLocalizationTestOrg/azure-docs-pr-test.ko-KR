---
title: "Azure Service Fabric 플랫폼 수준 모니터링 | Microsoft Docs"
description: "Azure Service Fabric 클러스터를 모니터링 및 진단하는 데 사용되는 플랫폼 수준 이벤트 및 로그를 알아봅니다."
services: service-fabric
documentationcenter: .net
author: dkkapur
manager: timlt
editor: 
ms.assetid: 
ms.service: service-fabric
ms.devlang: dotnet
ms.topic: article
ms.tgt_pltfrm: NA
ms.workload: NA
ms.date: 08/24/2017
ms.author: dekapur
ms.openlocfilehash: c5857515ae8357b003f0999c4b11bd666c32bbf9
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/29/2017
---
# <a name="platform-level-event-and-log-generation"></a><span data-ttu-id="14cec-103">플랫폼 수준 이벤트 및 로그 생성</span><span class="sxs-lookup"><span data-stu-id="14cec-103">Platform level event and log generation</span></span>

## <a name="monitoring-the-cluster"></a><span data-ttu-id="14cec-104">클러스터 모니터링</span><span class="sxs-lookup"><span data-stu-id="14cec-104">Monitoring the cluster</span></span>

<span data-ttu-id="14cec-105">하드웨어와 클러스터가 예상대로 동작하는지 확인하려면 플랫폼 수준에서 모니터링해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-105">It is important to monitor at the platform level to determine whether or not your hardware and cluster are behaving as expected.</span></span> <span data-ttu-id="14cec-106">Service Fabric은 하드웨어 오류 시에도 응용 프로그램을 계속 실행할 수 있지만, 응용 프로그램이나 기본 인프라에서 오류가 발생하는지를 여전히 진단해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-106">Though Service Fabric can keep applications running during a hardware failure, but you still need to diagnose whether an error is occurring in an application or in the underlying infrastructure.</span></span> <span data-ttu-id="14cec-107">하드웨어 추가 또는 제거에 대한 결정 시 도움이 되도록 용량 계획을 개선하려면 클러스터를 모니터링해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-107">You also should monitor your clusters to better plan for capacity, helping in decisions about adding or removing hardware.</span></span>

<span data-ttu-id="14cec-108">Service Fabric은 다음 이벤트를 생성하는 다섯 가지 기본 제공 로그 채널을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-108">Service Fabric provides five different log channels out-of-the-box that generate the following events:</span></span>

* <span data-ttu-id="14cec-109">작동 채널: 노드에 대해 발생하는 이벤트, 배포되는 새 응용 프로그램 또는 SF 업그레이드 롤백 등이 포함된 Service Fabric 및 클러스터에서 수행하는 상위 수준 작업</span><span class="sxs-lookup"><span data-stu-id="14cec-109">Operational channel: high-level operations performed by Service Fabric and the cluster, including events for a node coming up, a new application being deployed, or a SF upgrade rollback, etc.</span></span>
* <span data-ttu-id="14cec-110">작동 채널 - 상세: 상태 보고서 및 부하 분산 결정</span><span class="sxs-lookup"><span data-stu-id="14cec-110">Operational channel - detailed: health reports and load balancing decisions</span></span>
* <span data-ttu-id="14cec-111">데이터 및 메시징 채널: 메시징(현재는 ReverseProxy만) 및 데이터 경로(신뢰할 수 있는 서비스 모델)에서 생성된 중요한 로그 및 이벤트</span><span class="sxs-lookup"><span data-stu-id="14cec-111">Data & Messaging channel: critical logs and events generated in our messaging (currently only the ReverseProxy) and data path (reliable services models)</span></span>
* <span data-ttu-id="14cec-112">데이터 및 메시징 채널 - 상세: 클러스터의 메시징 데이터에서 중요하지 않은 모든 로그를 포함하는 상세 채널(이 채널은 상당한 양의 이벤트 포함)</span><span class="sxs-lookup"><span data-stu-id="14cec-112">Data & Messaging channel - detailed: verbose channel that contains all the non-critical logs from data and messaging in the cluster (this channel has a very high volume of events)</span></span>   
* <span data-ttu-id="14cec-113">[Reliable Services 이벤트](service-fabric-reliable-services-diagnostics.md): 프로그래밍 모델 특정 이벤트</span><span class="sxs-lookup"><span data-stu-id="14cec-113">[Reliable Services events](service-fabric-reliable-services-diagnostics.md): programming model specific events</span></span>
* <span data-ttu-id="14cec-114">[Reliable Actors 이벤트](service-fabric-reliable-actors-diagnostics.md): 프로그래밍 모델 특정 이벤트 및 성능 카운터</span><span class="sxs-lookup"><span data-stu-id="14cec-114">[Reliable Actors events](service-fabric-reliable-actors-diagnostics.md): programming model specific events and performance counters</span></span>
* <span data-ttu-id="14cec-115">지원 로그: 지원을 제공할 때만 사용되는 Service Fabric에서 생성된 시스템 로그</span><span class="sxs-lookup"><span data-stu-id="14cec-115">Support logs: system logs generated by Service Fabric only to be used by us when providing support</span></span>

<span data-ttu-id="14cec-116">이러한 다양한 채널에서 권장되는 대부분의 플랫폼 수준 로깅을 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-116">These various channels cover most of the platform level logging that is recommended.</span></span> <span data-ttu-id="14cec-117">플랫폼 수준 로깅을 개선하려면 상태 모델을 더 잘 파악하는 데 투자하고 사용자 지정 상태 보고서를 추가해 보고, 사용자 지정 **성능 카운터**를 추가하여 서비스와 응용 프로그램이 클러스터에 미치는 영향을 실시간으로 파악하는 기능을 빌드하세요.</span><span class="sxs-lookup"><span data-stu-id="14cec-117">To improve platform level logging, consider investing in better understanding the health model and adding custom health reports, and adding custom **Performance Counters** to build a real-time understanding of the impact of your services and applications on the cluster.</span></span>

### <a name="azure-service-fabric-health-and-load-reporting"></a><span data-ttu-id="14cec-118">Azure Service Fabric 상태 및 로드 보고</span><span class="sxs-lookup"><span data-stu-id="14cec-118">Azure Service Fabric health and load reporting</span></span>

<span data-ttu-id="14cec-119">Service Fabric에는 다음과 같은 문서에서 자세히 설명하는 자체의 상태 모델이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-119">Service Fabric has its own health model, which is described in detail in these articles:</span></span>
- [<span data-ttu-id="14cec-120">Service Fabric 상태 모니터링 소개</span><span class="sxs-lookup"><span data-stu-id="14cec-120">Introduction to Service Fabric health monitoring</span></span>](service-fabric-health-introduction.md)
- [<span data-ttu-id="14cec-121">서비스 상태 보고 및 확인</span><span class="sxs-lookup"><span data-stu-id="14cec-121">Report and check service health</span></span>](service-fabric-diagnostics-how-to-report-and-check-service-health.md)
- [<span data-ttu-id="14cec-122">사용자 지정 서비스 패브릭 상태 보고서 추가</span><span class="sxs-lookup"><span data-stu-id="14cec-122">Add custom Service Fabric health reports</span></span>](service-fabric-report-health.md)
- [<span data-ttu-id="14cec-123">서비스 패브릭 상태 보고서 보기</span><span class="sxs-lookup"><span data-stu-id="14cec-123">View Service Fabric health reports</span></span>](service-fabric-view-entities-aggregated-health.md)

<span data-ttu-id="14cec-124">상태 모니터링은 서비스 운영의 여러 측면에서 매우 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-124">Health monitoring is critical to multiple aspects of operating a service.</span></span> <span data-ttu-id="14cec-125">상태 모니터링은 Service Fabric에서 명명된 응용 프로그램 업그레이드를 수행할 때 특히 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-125">Health monitoring is especially important when Service Fabric performs a named application upgrade.</span></span> <span data-ttu-id="14cec-126">서비스의 각 업그레이드 도메인을 업그레이드하고 고객이 사용할 수 있게 되면, 배포가 다음 업그레이드 도메인으로 이동하기 전에 업그레이드 도메인이 상태 검사를 통과해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-126">After each upgrade domain of the service is upgraded and is available to your customers, the upgrade domain must pass health checks before the deployment moves to the next upgrade domain.</span></span> <span data-ttu-id="14cec-127">상태가 양호하지 않으면 배포를 롤백하여 응용 프로그램을 알려진 양호한 상태로 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-127">If good health status cannot be achieved, the deployment is rolled back, so that the application is in a known, good state.</span></span> <span data-ttu-id="14cec-128">서비스를 롤백하기 전에 일부 고객이 영향을 받을 수 있지만, 대부분의 고객에게는 문제가 발생하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-128">Although some customers might be affected before the services are rolled back, most customers won't experience an issue.</span></span> <span data-ttu-id="14cec-129">또한 비교적 빨리 해결되며 운영자가 조치를 취할 때까지 기다릴 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-129">Also, a resolution occurs relatively quickly, and without having to wait for action from a human operator.</span></span> <span data-ttu-id="14cec-130">코드에 통합된 상태 검사가 많을수록 배포 문제에 대한 서비스 복원력이 더욱 높아집니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-130">The more health checks that are incorporated into your code, the more resilient your service is to deployment issues.</span></span>

<span data-ttu-id="14cec-131">서비스 상태의 또 다른 측면은 서비스의 메트릭 보고입니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-131">Another aspect of service health is reporting metrics from the service.</span></span> <span data-ttu-id="14cec-132">메트릭은 리소스 사용량을 조정하는 데 사용되므로 Service Fabric에서 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-132">Metrics are important in Service Fabric because they are used to balance resource usage.</span></span> <span data-ttu-id="14cec-133">또한 메트릭은 시스템 상태 표시기가 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-133">Metrics also can be an indicator of system health.</span></span> <span data-ttu-id="14cec-134">예를 들어 많은 서비스가 있는 응용 프로그램을 가질 수 있으며, 각 인스턴스에서 RPS(초당 요청 수)를 보고합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-134">For example, you might have an application that has many services, and each instance reports a requests per second (RPS) metric.</span></span> <span data-ttu-id="14cec-135">한 서비스에서 다른 서비스보다 많은 리소스를 사용하는 경우 Service Fabric에서 클러스터 주변의 서비스 인스턴스를 이동하여 리소스 사용률을 유지하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-135">If one service is using more resources than another service, Service Fabric moves service instances around the cluster, to try to maintain even resource utilization.</span></span> <span data-ttu-id="14cec-136">리소스 사용률이 작동하는 방식에 대한 자세한 설명은 [메트릭을 사용하여 Service Fabric에서 리소스 부하 및 소비 관리](service-fabric-cluster-resource-manager-metrics.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="14cec-136">For a more detailed explanation of how resource utilization works, see [Manage resource consumption and load in Service Fabric with metrics](service-fabric-cluster-resource-manager-metrics.md).</span></span>

<span data-ttu-id="14cec-137">또한 메트릭을 통해 서비스 수행 방식에 대한 통찰력을 얻을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-137">Metrics also can help give you insight into how your service is performing.</span></span> <span data-ttu-id="14cec-138">시간이 지남에 따라 메트릭을 사용하여 서비스가 예상된 매개 변수 내에서 작동하는지 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-138">Over time, you can use metrics to check that the service is operating within expected parameters.</span></span> <span data-ttu-id="14cec-139">예를 들어 추세에서 월요일 오전 9시의 평균 RPS가 1,000인 경우 RPS가 500 미만이거나 1,500 이상일 때 경고하는 상태 보고서를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-139">For example, if trends show that at 9 AM on Monday morning the average RPS is 1,000, then you might set up a health report that alerts you if the RPS is below 500 or above 1,500.</span></span> <span data-ttu-id="14cec-140">모든 것이 완벽할 수도 있지만 고객이 매우 만족스럽게 경험하고 있는지도 확인할 만한 가치가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-140">Everything might be perfectly fine, but it might be worth a look to be sure that your customers are having a great experience.</span></span> <span data-ttu-id="14cec-141">서비스에서 상태 검사를 위해 보고할 수 있지만 클러스터의 리소스 분산에는 영향을 미치지 않는 메트릭 집합을 정의할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-141">Your service can define a set of metrics that can be reported for health check purposes, but that don't affect the resource balancing of the cluster.</span></span> <span data-ttu-id="14cec-142">이렇게 하려면 메트릭 가중치를 0으로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-142">To do this, set the metric weight to zero.</span></span> <span data-ttu-id="14cec-143">가중치가 0인 모든 메트릭을 시작하고 메트릭의 가중치가 클러스터의 리소스 분산에 미치는 영향을 확실히 이해할 때까지 가중치를 높이지 않는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-143">We recommend that you start all metrics with a weight of zero, and not increase the weight  until you are sure that you understand how weighting the metrics affects resource balancing for your cluster.</span></span>

> [!TIP]
> <span data-ttu-id="14cec-144">너무 높은 가중치가 적용된 메트릭은 사용하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="14cec-144">Don't use too many weighted metrics.</span></span> <span data-ttu-id="14cec-145">분산을 조정하기 위해 서비스 인스턴스를 이동하는 이유를 이해하기 어려울 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-145">It can be difficult to understand why service instances are being moved around for balancing.</span></span> <span data-ttu-id="14cec-146">몇 가지 메트릭에는 많은 시간이 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-146">A few metrics can go a long way!</span></span>

<span data-ttu-id="14cec-147">응용 프로그램의 상태 및 성능을 나타낼 수 있는 정보는 메트릭 및 상태 보고서의 후보가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-147">Any information that can indicate the health and performance of your application is a candidate for metrics and health reports.</span></span> <span data-ttu-id="14cec-148">CPU 성능 카운터는 노드가 활용되는 상태를 알려주지만 단일 노드에서 여러 서비스가 실행될 수 있기 때문에 특정 서비스의 상태가 정상인지 여부는 알려주지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-148">A CPU performance counter can tell you how your node is utilized, but it doesn't tell you whether a particular service is healthy, because multiple services might be running on a single node.</span></span> <span data-ttu-id="14cec-149">그러나 RPS, 처리된 항목 및 요청 대기 시간과 같은 메트릭은 모두 특정 서비스의 상태를 나타낼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-149">But, metrics like RPS, items processed, and request latency all can indicate the health of a specific service.</span></span>

<span data-ttu-id="14cec-150">상태를 보고하려면 다음과 유사한 코드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-150">To report health, use code similar to this:</span></span>

  ```csharp
    if (!result.HasValue)
    {
        HealthInformation healthInformation = new HealthInformation("ServiceCode", "StateDictionary", HealthState.Error);
        this.Partition.ReportInstanceHealth(healthInformation);
    }
  ```

<span data-ttu-id="14cec-151">메트릭을 보고하려면 다음과 유사한 코드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-151">To report a metric, use code similar to this:</span></span>

  ```csharp
    this.Partition.ReportLoad(new List<LoadMetric> { new LoadMetric("MemoryInMb", 1234), new LoadMetric("metric1", 42) });
  ```

### <a name="service-fabric-support-logs"></a><span data-ttu-id="14cec-152">Service Fabric 지원 로그</span><span class="sxs-lookup"><span data-stu-id="14cec-152">Service Fabric support logs</span></span>

<span data-ttu-id="14cec-153">Azure Service Fabric 클러스터에 대한 도움을 받기 위해 Microsoft 지원에 문의해야 하는 경우 지원 로그가 거의 항상 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-153">If you need to contact Microsoft support for help with your Azure Service Fabric cluster, support logs are almost always required.</span></span> <span data-ttu-id="14cec-154">클러스터가 Azure에서 호스팅되는 경우 클러스터를 만드는 과정의 일부로 이러한 로그를 자동으로 구성하여 수집합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-154">If your cluster is hosted in Azure, support logs are automatically configured and collected as part of creating a cluster.</span></span> <span data-ttu-id="14cec-155">로그는 클러스터의 리소스 그룹에 있는 전용 저장소 계정에 저장됩니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-155">The logs are stored in a dedicated storage account in your cluster's resource group.</span></span> <span data-ttu-id="14cec-156">저장소 계정에 고정된 이름은 없지만, 계정에는 *fabric*으로 시작하는 이름의 Blob 컨테이너와 테이블이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-156">The storage account doesn't have a fixed name, but in the account, you see blob containers and tables with names that start with *fabric*.</span></span> <span data-ttu-id="14cec-157">독립 실행형 클러스터의 로그 수집 설정에 대한 자세한 내용은 [독립 실행형 Azure Service Fabric 클러스터 만들기 및 관리](service-fabric-cluster-creation-for-windows-server.md) 및 [독립 실행형 Windows 클러스터에 대한 구성 설정](service-fabric-cluster-manifest.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="14cec-157">For information about setting up log collections for a standalone cluster, see [Create and manage a standalone Azure Service Fabric cluster](service-fabric-cluster-creation-for-windows-server.md) and [Configuration settings for a standalone Windows cluster](service-fabric-cluster-manifest.md).</span></span> <span data-ttu-id="14cec-158">독립 실행형 Service Fabric 인스턴스의 경우 로그는 로컬 파일 공유로 보내야 합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-158">For standalone Service Fabric instances, the logs should be sent to a local file share.</span></span> <span data-ttu-id="14cec-159">지원을 받으려면 이러한 로그가 **필요하지만** Microsoft 고객 지원 팀 외부의 사람이 사용할 수 있는 것은 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-159">You are **required** to have these logs for support, but they are not intended to be usable by anyone outside of the Microsoft customer support team.</span></span>

## <a name="enabling-diagnostics-for-a-cluster"></a><span data-ttu-id="14cec-160">클러스터에 대한 진단 사용</span><span class="sxs-lookup"><span data-stu-id="14cec-160">Enabling Diagnostics for a cluster</span></span>

<span data-ttu-id="14cec-161">이러한 로그를 활용하려면 클러스터를 만드는 동안 "진단"을 사용하도록 설정하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-161">In order to take advantage of these logs, it is highly recommended that during cluster creation, "Diagnostics" is enabled.</span></span> <span data-ttu-id="14cec-162">진단을 켜면 클러스터가 배포될 때 Microsoft Azure 진단에서는 작동, Reliable Services 및 Reliable Actors 채널을 인식하고 [Azure 진단을 사용하여 이벤트 집계](service-fabric-diagnostics-event-aggregation-wad.md)에 추가로 설명된 대로 데이터를 저장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-162">By turning on diagnostics, when the cluster is deployed, Windows Azure Diagnostics is able to acknowledge the Operational, Reliable Services, and Reliable actors channels, and store the data as explained further in [Aggregate events with Azure Diagnostics](service-fabric-diagnostics-event-aggregation-wad.md).</span></span>

<span data-ttu-id="14cec-163">위에 표시된 것처럼 AI(Application Insights) 계측 키를 추가할 선택적 필드도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-163">As seen above, there is also an optional field to add an Application Insights (AI) instrumentation key.</span></span> <span data-ttu-id="14cec-164">이벤트 분석에 AI를 사용하도록 선택하면(이에 대한 자세한 내용은 [Application Insights를 사용하여 이벤트 분석](service-fabric-diagnostics-event-analysis-appinsights.md) 참조) AppInsights 리소스 instrumentationKey(GUID)를 여기에 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-164">If you choose to use AI for any event analysis (read more about this in [Event Analysis with Application Insights](service-fabric-diagnostics-event-analysis-appinsights.md)), include the AppInsights resource instrumentationKey (GUID) here.</span></span>


<span data-ttu-id="14cec-165">클러스터에 컨테이너를 배포하려는 경우 "WadCfg > DiagnosticMonitorConfiguration"에 이 컨테이너를 추가하는 방식으로 WAD를 통해 Docker 통계를 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-165">If you are going to deploy containers to your cluster, enable WAD to pick up docker stats by adding this to your "WadCfg > DiagnosticMonitorConfiguration":</span></span>

```json
"DockerSources": {
    "Stats": {
        "enabled": true,
        "sampleRate": "PT1M"
    }
},

```

## <a name="measuring-performance"></a><span data-ttu-id="14cec-166">성능 측정</span><span class="sxs-lookup"><span data-stu-id="14cec-166">Measuring performance</span></span>

<span data-ttu-id="14cec-167">클러스터 성능 측정을 통해 어떻게 부하를 처리하고 클러스터 크기 조정과 관련된 의사 결정을 주도할 수 있는지 이해할 수 있습니다([Azure에서](service-fabric-cluster-scale-up-down.md) 또는 [온-프레미스로](service-fabric-cluster-windows-server-add-remove-nodes.md) 클러스터 크기를 조정하는 방법에 대한 자세한 내용 참조).</span><span class="sxs-lookup"><span data-stu-id="14cec-167">Measure performance of your cluster will help you understand how it is able to handle load and drive decisions around scaling your cluster (see more about scaling a cluster [on Azure](service-fabric-cluster-scale-up-down.md), or [on-premises](service-fabric-cluster-windows-server-add-remove-nodes.md)).</span></span> <span data-ttu-id="14cec-168">성능 데이터는 나중에 로그를 분석할 때 사용자나 응용 프로그램 및 서비스가 수행한 작업에 비교될 경우에도 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-168">Performance data is also useful when compared to actions you or your applications and services may have taken, when analyzing logs in the future.</span></span> 

<span data-ttu-id="14cec-169">Service Fabric을 사용할 경우 수집할 경우 수집할 성능 카운터에 대해서는 [Service Fabric의 성능 카운터](service-fabric-diagnostics-event-generation-perf.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="14cec-169">For a list of performance counters to collect when using Service Fabric, see [Performance Counters in Service Fabric](service-fabric-diagnostics-event-generation-perf.md)</span></span>

<span data-ttu-id="14cec-170">클러스터에 대한 성능 데이터 수집을 설정하는 두 가지 일반적인 방법은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-170">Here are two common ways in which you can set up collecting performance data for your cluster:</span></span>

* <span data-ttu-id="14cec-171">에이전트 사용: 일반적으로 에이전트에는 수집할 수 있는 가능한 성능 메트릭 목록이 있으므로 이 방법은 컴퓨터에서 성능을 수집하는 기본 설정 방법이고 수집하거나 변경할 메트릭을 선택하는 것은 비교적 쉬운 프로세스입니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-171">Using an agent: this is the preferred way of collecting performance from a machine, since agents usually have a list of possible performance metrics that can be collected, and it is a relatively easy process to choose the metrics you want to collect or change them.</span></span> <span data-ttu-id="14cec-172">클러스터 VM 및 배포된 컨테이너에 대한 성능 데이터를 선택할 수 있는 하나의 모니터링 에이전트인 OMS 에이전트에 대한 자세한 내용은 [Service Fabric에 대해 OMS를 구성하는 방법](service-fabric-diagnostics-event-analysis-oms.md) 및 [OMS Windows 에이전트 설정](../log-analytics/log-analytics-windows-agents.md) 문서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="14cec-172">Read about [how to configure the OMS for Service Fabric](service-fabric-diagnostics-event-analysis-oms.md) and [Setting up the OMS Windows Agent](../log-analytics/log-analytics-windows-agents.md) articles to learn more about the OMS agent, which is one such monitoring agent that is able to pick up performance data for cluster VMs and deployed containers.</span></span>

* <span data-ttu-id="14cec-173">성능 데이터를 테이블에 쓰도록 진단 구성: Azure에 있는 클러스터의 경우 이 방법은 클러스터의 VM에서 적절한 성능 카운터를 선택하도록 Azure 진단 구성을 변경하고 컨테이너를 배포할 경우 Docker 통계를 선택할 수 있도록 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-173">Configuring diagnostics to write performance counters to a table: for clusters on Azure, this means changing the Azure Diagnostics configuration to pick up the appropriate performance counters from the VMs in your cluster, and enabling it to pick up docker stats if you will be deploying any containers.</span></span> <span data-ttu-id="14cec-174">성능 카운터 수집을 설정하려면 Service Fabric에서 [WAD의 성능 카운터](service-fabric-diagnostics-event-aggregation-wad.md)를 구성하는 방법을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="14cec-174">Read about configuring [Performance Counters in WAD](service-fabric-diagnostics-event-aggregation-wad.md) in Service Fabric to set up performance counter collection.</span></span>

## <a name="next-steps"></a><span data-ttu-id="14cec-175">다음 단계</span><span class="sxs-lookup"><span data-stu-id="14cec-175">Next steps</span></span>

<span data-ttu-id="14cec-176">로그와 이벤트는 분석 플랫폼으로 보내기 전에 집계해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="14cec-176">Your logs and events need to be aggregated before they can be sent to any analysis platform.</span></span> <span data-ttu-id="14cec-177">권장 옵션을 더 잘 이해하려면 [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) 및 [WAD](service-fabric-diagnostics-event-aggregation-wad.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="14cec-177">Read about [EventFlow](service-fabric-diagnostics-event-aggregation-eventflow.md) and [WAD](service-fabric-diagnostics-event-aggregation-wad.md) to better understand some of the recommended options.</span></span>
