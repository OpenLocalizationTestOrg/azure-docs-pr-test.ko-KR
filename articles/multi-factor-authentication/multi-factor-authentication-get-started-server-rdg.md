---
title: "aaaRDG 및 RADIUS를 사용 하는 Azure MFA 서버 | Microsoft Docs"
description: "RD (원격 데스크톱) 게이트웨이 및 Azure Multi-factor Authentication 서버 RADIUS를 사용 하 여를 배포 하는 데 도움이 되는 hello Azure multi-factor authentication 페이지입니다."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: f2354ac4-a3a7-48e5-a86d-84a9e5682b42
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/27/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: it-pro
ms.openlocfilehash: fd280e9b6ff90c82927cffe593c4f1fda7047842
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="remote-desktop-gateway-and-azure-multi-factor-authentication-server-using-radius"></a><span data-ttu-id="0c7b7-103">RADIUS를 사용한 원격 데스크톱 게이트웨이 및 Azure Multi-Factor Authentication 서버</span><span class="sxs-lookup"><span data-stu-id="0c7b7-103">Remote Desktop Gateway and Azure Multi-Factor Authentication Server using RADIUS</span></span>
<span data-ttu-id="0c7b7-104">종종 RD (원격 데스크톱) 게이트웨이 hello 로컬 서비스 NPS (네트워크 정책) tooauthenticate 사용자를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-104">Often, Remote Desktop (RD) Gateway uses hello local Network Policy Services (NPS) tooauthenticate users.</span></span> <span data-ttu-id="0c7b7-105">이 문서에서는 RADIUS tooroute 아웃 hello 원격 데스크톱 게이트웨이에서 요청 하는 방법을 설명 (을 통해 로컬 NPS hello) toohello Multi-factor Authentication 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-105">This article describes how tooroute RADIUS requests out from hello Remote Desktop Gateway (through hello local NPS) toohello Multi-Factor Authentication Server.</span></span> <span data-ttu-id="0c7b7-106">hello Azure MFA 및 RD 게이트웨이의 조합을 사용자가 액세스할 수 있음을 의미의 작업 환경 어디에서 든 강력한 인증을 수행 하는 중입니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-106">hello combination of Azure MFA and RD Gateway means that your users can access their work environments from anywhere while performing strong authentication.</span></span> 

<span data-ttu-id="0c7b7-107">터미널 서비스에 대해 Windows 인증 Server 2012 r 2에 대 한 지원 되지 않으므로, MFA 서버와 RD 게이트웨이 및 RADIUS toointegrate를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-107">Since Windows Authentication for terminal services is not supported for Server 2012 R2, use RD Gateway and RADIUS toointegrate with MFA Server.</span></span> 

<span data-ttu-id="0c7b7-108">Hello RADIUS 요청을 프록시 hello 원격 데스크톱 게이트웨이 서버에서 NPS toohello 백업 하는 별도 서버에 hello Azure Multi-factor Authentication 서버를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-108">Install hello Azure Multi-Factor Authentication Server on a separate server, which proxies hello RADIUS request back toohello NPS on hello Remote Desktop Gateway Server.</span></span> <span data-ttu-id="0c7b7-109">NPS hello 사용자 이름 및 암호 유효성을 검사 한 후 응답 toohello Multi-factor Authentication 서버를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-109">After NPS validates hello username and password, it returns a response toohello Multi-Factor Authentication Server.</span></span> <span data-ttu-id="0c7b7-110">그런 다음 MFA 서버 hello hello 2 단계 인증을 결과 toohello 게이트웨이 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-110">Then, hello MFA Server performs hello second factor of authentication and returns a result toohello gateway.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="0c7b7-111">필수 조건</span><span class="sxs-lookup"><span data-stu-id="0c7b7-111">Prerequisites</span></span>

- <span data-ttu-id="0c7b7-112">도메인에 가입된 Azure MFA 서버.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-112">A domain-joined Azure MFA Server.</span></span> <span data-ttu-id="0c7b7-113">이미 설치 된 없다면 hello 단계에 따라 [Azure Multi-factor Authentication 서버 hello로 시작](multi-factor-authentication-get-started-server.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-113">If you don't have one installed already, follow hello steps in [Getting started with hello Azure Multi-Factor Authentication Server](multi-factor-authentication-get-started-server.md).</span></span>
- <span data-ttu-id="0c7b7-114">네트워크 정책 서비스를 인증하는 원격 데스크톱 게이트웨이.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-114">A Remote Desktop Gateway that authenticates with Network Policy Services.</span></span>

## <a name="configure-hello-remote-desktop-gateway"></a><span data-ttu-id="0c7b7-115">Hello 원격 데스크톱 게이트웨이 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-115">Configure hello Remote Desktop Gateway</span></span>
<span data-ttu-id="0c7b7-116">Hello RD 게이트웨이 toosend RADIUS 인증 tooan Azure Multi-factor Authentication 서버를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-116">Configure hello RD Gateway toosend RADIUS authentication tooan Azure Multi-Factor Authentication Server.</span></span> 

1. <span data-ttu-id="0c7b7-117">RD 게이트웨이 관리자에서 hello 서버 이름을 마우스 오른쪽 단추로 클릭 하 고 선택 **속성**합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-117">In RD Gateway Manager, right-click hello server name and select **Properties**.</span></span>
2. <span data-ttu-id="0c7b7-118">Toohello 이동 **RD CAP 저장소** 탭을 선택한 **NPS를 실행 하는 중앙 서버**합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-118">Go toohello **RD CAP Store** tab and select **Central server running NPS**.</span></span> 
3. <span data-ttu-id="0c7b7-119">RADIUS 서버로 hello 이름 또는 각 서버의 IP 주소를 입력 하 여 하나 이상의 Azure Multi-factor Authentication 서버를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-119">Add one or more Azure Multi-Factor Authentication Servers as RADIUS servers by entering hello name or IP address of each server.</span></span> 
4. <span data-ttu-id="0c7b7-120">각 서버에 대한 공유 암호를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-120">Create a shared secret for each server.</span></span>

## <a name="configure-nps"></a><span data-ttu-id="0c7b7-121">NPS 구성</span><span class="sxs-lookup"><span data-stu-id="0c7b7-121">Configure NPS</span></span>
<span data-ttu-id="0c7b7-122">hello RD 게이트웨이 NPS toosend hello RADIUS 요청 tooAzure Multi-factor Authentication을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-122">hello RD Gateway uses NPS toosend hello RADIUS request tooAzure Multi-Factor Authentication.</span></span> <span data-ttu-id="0c7b7-123">NPS tooconfigure 먼저 hello 제한 시간 설정을 변경한 tooprevent hello RD 게이트웨이 시간 초과 전에 hello 2 단계 확인을 완료 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-123">tooconfigure NPS, first you change hello timeout settings tooprevent hello RD Gateway from timing out before hello two-step verification has completed.</span></span> <span data-ttu-id="0c7b7-124">그런 다음 MFA 서버에서 NPS tooreceive RADIUS 인증을 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-124">Then, you update NPS tooreceive RADIUS authentications from your MFA Server.</span></span> <span data-ttu-id="0c7b7-125">다음 프로시저 tooconfigure NPS hello를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-125">Use hello following procedure tooconfigure NPS:</span></span>

### <a name="modify-hello-timeout-policy"></a><span data-ttu-id="0c7b7-126">Hello 제한 시간 정책 수정</span><span class="sxs-lookup"><span data-stu-id="0c7b7-126">Modify hello timeout policy</span></span>

1. <span data-ttu-id="0c7b7-127">NPS에서 열고 hello **RADIUS 클라이언트 및 서버** hello 선택한 열을 왼쪽의 메뉴 **원격 RADIUS 서버 그룹**합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-127">In NPS, open hello **RADIUS Clients and Server** menu in hello left column and select **Remote RADIUS Server Groups**.</span></span> 
2. <span data-ttu-id="0c7b7-128">선택 hello **TS 게이트웨이 서버 그룹**합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-128">Select hello **TS GATEWAY SERVER GROUP**.</span></span> 
3. <span data-ttu-id="0c7b7-129">Toohello 이동 **부하 분산** 탭 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-129">Go toohello **Load Balancing** tab.</span></span> 
4. <span data-ttu-id="0c7b7-130">두 hello 변경 **요청이 것으로 간주 되기 전에 응답 없이 시간 (초)을 삭제** 및 hello **서버가 사용할 수 없는 상태로 표시 된 경우 요청 사이의 시간 (초)** toobetween 30 및 60 시간 (초)입니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-130">Change both hello **Number of seconds without response before request is considered dropped** and hello **Number of seconds between requests when server is identified as unavailable** toobetween 30 and 60 seconds.</span></span> <span data-ttu-id="0c7b7-131">(해당 hello 서버 여전히 제한 시간이 인증 중에 찾을 수 여기로 돌아와서 있으며 hello 시간 (초) 늘립니다.)</span><span class="sxs-lookup"><span data-stu-id="0c7b7-131">(If you find that hello server still times out during authentication, you can come back here and increase hello number of seconds.)</span></span>
5. <span data-ttu-id="0c7b7-132">Toohello 이동 **인증/계정** 탭 하 고 hello RADIUS 포트가 일치 hello Multi-factor Authentication 서버에서 수신 대기 하는 hello 포트 지정 되어 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-132">Go toohello **Authentication/Account** tab and check that hello RADIUS ports specified match hello ports that hello Multi-Factor Authentication Server is listening on.</span></span>

### <a name="prepare-nps-tooreceive-authentications-from-hello-mfa-server"></a><span data-ttu-id="0c7b7-133">Hello와 MFA 서버에서에서 NPS tooreceive 인증 준비</span><span class="sxs-lookup"><span data-stu-id="0c7b7-133">Prepare NPS tooreceive authentications from hello MFA Server</span></span>

1. <span data-ttu-id="0c7b7-134">마우스 오른쪽 단추로 클릭 **RADIUS 클라이언트** RADIUS 클라이언트와 서버 hello 왼쪽 열 및 선택에에서 아래 **새로**합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-134">Right-click **RADIUS Clients** under RADIUS Clients and Servers in hello left column and select **New**.</span></span>
2. <span data-ttu-id="0c7b7-135">Hello Azure Multi-factor Authentication 서버를 RADIUS 클라이언트로 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-135">Add hello Azure Multi-Factor Authentication Server as a RADIUS client.</span></span> <span data-ttu-id="0c7b7-136">친숙한 이름을 선택하고 공유 암호를 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-136">Choose a Friendly name and specify a shared secret.</span></span>
3. <span data-ttu-id="0c7b7-137">열기 hello **정책** hello 선택한 열을 왼쪽의 메뉴 **연결 요청 정책**합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-137">Open hello **Policies** menu in hello left column and select **Connection Request Policies**.</span></span> <span data-ttu-id="0c7b7-138">RD 게이트웨이를 구성할 때 만든 TS 게이트웨이 권한 부여 정책이라는 정책이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-138">You should see a policy called TS GATEWAY AUTHORIZATION POLICY that was created when RD Gateway was configured.</span></span> <span data-ttu-id="0c7b7-139">이 정책은 RADIUS 요청 toohello Multi-factor Authentication 서버를 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-139">This policy forwards RADIUS requests toohello Multi-Factor Authentication Server.</span></span>
4. <span data-ttu-id="0c7b7-140">**TS 게이트웨이 권한 부여 정책**을 마우스 오른쪽 단추로 클릭하고 **복제 정책**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-140">Right-click **TS GATEWAY AUTHORIZATION POLICY** and select **Duplicate Policy**.</span></span> 
5. <span data-ttu-id="0c7b7-141">Hello 새 정책 및 go toohello 열고 **조건** 탭 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-141">Open hello new policy and go toohello **Conditions** tab.</span></span>
6. <span data-ttu-id="0c7b7-142">Hello 클라이언트 이름이 Azure Multi-factor Authentication 서버 RADIUS 클라이언트 hello에 대 한 2 단계에서 설정한 hello 친숙 한 이름 일치 하는 조건을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-142">Add a condition that matches hello Client Friendly Name with hello Friendly name set in step 2 for hello Azure Multi-Factor Authentication Server RADIUS client.</span></span> 
7. <span data-ttu-id="0c7b7-143">Toohello 이동 **설정** 탭을 선택한 **인증**합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-143">Go toohello **Settings** tab and select **Authentication**.</span></span>
8. <span data-ttu-id="0c7b7-144">Hello 인증 공급자도 변경**이 서버에서 요청을 인증**합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-144">Change hello Authentication Provider too**Authenticate requests on this server**.</span></span> <span data-ttu-id="0c7b7-145">이 정책을 통해 NPS hello Azure MFA 서버에서에서 RADIUS 요청을 받으면, hello 인증이 RADIUS 요청 백 toohello 루프 상황을 발생 시키는 Azure Multi-factor Authentication 서버를 전송 하는 대신 로컬로 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-145">This policy ensures that when NPS receives a RADIUS request from hello Azure MFA Server, hello authentication occurs locally instead of sending a RADIUS request back toohello Azure Multi-Factor Authentication Server, which would result in a loop condition.</span></span> 
9. <span data-ttu-id="0c7b7-146">루프 조건 tooprevent hello hello에서 원래 정책 보다 위에 정렬 되는 새 정책을 hello 있는지 확인 **연결 요청 정책** 창.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-146">tooprevent a loop condition, make sure that hello new policy is ordered ABOVE hello original policy in hello **Connection Request Policies** pane.</span></span>

## <a name="configure-azure-multi-factor-authentication"></a><span data-ttu-id="0c7b7-147">Azure Multi-Factor Authentication 구성</span><span class="sxs-lookup"><span data-stu-id="0c7b7-147">Configure Azure Multi-Factor Authentication</span></span>

<span data-ttu-id="0c7b7-148">hello Azure Multi-factor Authentication 서버는 RD 게이트웨이와 NPS 간의 RADIUS 프록시로 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-148">hello Azure Multi-Factor Authentication Server is configured as a RADIUS proxy between RD Gateway and NPS.</span></span>  <span data-ttu-id="0c7b7-149">Hello RD 게이트웨이 서버와에서 별개의 도메인에 가입 된 서버에 설치 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-149">It should be installed on a domain-joined server that is separate from hello RD Gateway server.</span></span> <span data-ttu-id="0c7b7-150">다음 프로시저 tooconfigure hello Azure Multi-factor Authentication 서버 hello를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-150">Use hello following procedure tooconfigure hello Azure Multi-Factor Authentication Server.</span></span>

1. <span data-ttu-id="0c7b7-151">Azure Multi-factor Authentication 서버 hello 열고 hello RADIUS 인증 아이콘을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-151">Open hello Azure Multi-Factor Authentication Server and select hello RADIUS Authentication icon.</span></span> 
2. <span data-ttu-id="0c7b7-152">Hello 확인 **RADIUS 인증 사용** 확인란을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-152">Check hello **Enable RADIUS authentication** checkbox.</span></span>
3. <span data-ttu-id="0c7b7-153">Hello 클라이언트 탭에서 hello 포트가 NPS에 구성 된 일치 해야 하 고 선택 **추가**합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-153">On hello Clients tab, ensure hello ports match what is configured in NPS then select **Add**.</span></span>
4. <span data-ttu-id="0c7b7-154">Hello RD 게이트웨이 서버 IP 주소, 응용 프로그램 이름 (선택 사항) 및 공유 암호를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-154">Add hello RD Gateway server IP address, application name (optional), and a shared secret.</span></span> <span data-ttu-id="0c7b7-155">hello 공유 비밀 요구 toobe hello hello Azure Multi-factor Authentication 서버와 RD 게이트웨이 모두에서 동일 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-155">hello shared secret needs toobe hello same on both hello Azure Multi-Factor Authentication Server and RD Gateway.</span></span>
3. <span data-ttu-id="0c7b7-156">Toohello 이동 **대상** 탭 및 선택 hello **RADIUS 서버** 라디오 단추입니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-156">Go toohello **Target** tab and select hello **RADIUS server(s)** radio button.</span></span>
4. <span data-ttu-id="0c7b7-157">선택 **추가** hello IP 주소, 공유 암호 및 hello NPS 서버의 포트를 입력 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-157">Select **Add** and enter hello IP address, shared secret, and ports of hello NPS server.</span></span> <span data-ttu-id="0c7b7-158">중앙 NPS를 사용 하지 않는 hello RADIUS 클라이언트 및 RADIUS 대상은 같은 hello 됩니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-158">Unless using a central NPS, hello RADIUS client and RADIUS target are hello same.</span></span> <span data-ttu-id="0c7b7-159">hello 공유 암호는 hello hello NPS 서버의 RADIUS 클라이언트 섹션에서에서 설정한 hello 일치 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="0c7b7-159">hello shared secret must match hello one setup in hello RADIUS client section of hello NPS server.</span></span>

![RADIUS 인증](./media/multi-factor-authentication-get-started-server-rdg/radius.png)

## <a name="next-steps"></a><span data-ttu-id="0c7b7-161">다음 단계</span><span class="sxs-lookup"><span data-stu-id="0c7b7-161">Next steps</span></span>

- <span data-ttu-id="0c7b7-162">Azure MFA 및 [IIS 웹앱](multi-factor-authentication-get-started-server-iis.md) 통합</span><span class="sxs-lookup"><span data-stu-id="0c7b7-162">Integrate Azure MFA and [IIS web apps](multi-factor-authentication-get-started-server-iis.md)</span></span>

- <span data-ttu-id="0c7b7-163">Hello에 대 한 답변을 얻을 [Azure Multi-factor Authentication FAQ](multi-factor-authentication-faq.md)</span><span class="sxs-lookup"><span data-stu-id="0c7b7-163">Get answers in hello [Azure Multi-Factor Authentication FAQ](multi-factor-authentication-faq.md)</span></span>
