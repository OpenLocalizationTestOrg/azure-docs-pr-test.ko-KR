---
title: "LDAP 인증 및 Azure MFA 서버 | Microsoft Docs"
description: "LDAP 인증 및 Azure Multi-Factor Authentication 서버 배포에 도움이 되는 Azure Multi-Factor 인증 페이지입니다."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
editor: yossib
ms.assetid: e1a68568-53d1-4365-9e41-50925ad00869
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 05/03/2017
ms.author: kgremban
ms.openlocfilehash: 8f4d5f9e84ad7bb4fff501370036e7f0da589bf3
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="ldap-authentication-and-azure-multi-factor-authentication-server"></a><span data-ttu-id="6a9b4-103">LDAP 인증 및 Azure Multi-Factor Authentication 서버</span><span class="sxs-lookup"><span data-stu-id="6a9b4-103">LDAP authentication and Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="6a9b4-104">기본적으로 Azure Multi-Factor Authentication 서버는 Active Directory에서 사용자를 가져오거나 동기화하도록 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-104">By default, the Azure Multi-Factor Authentication Server is configured to import or synchronize users from Active Directory.</span></span> <span data-ttu-id="6a9b4-105">그러나 ADAM 디렉터리 또는 특정 Active Directory 도메인 컨트롤러 같은 다른 LDAP 디렉터리에 바인딩하도록 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-105">However, it can be configured to bind to different LDAP directories, such as an ADAM directory, or specific Active Directory domain controller.</span></span> <span data-ttu-id="6a9b4-106">LDAP를 통해 디렉터리에 연결된 경우 Azure Multi-Factor Authentication 서버는 LDAP 프록시의 역할인 인증을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-106">When connected to a directory via LDAP, the Azure Multi-Factor Authentication Server can act as an LDAP proxy to perform authentications.</span></span> <span data-ttu-id="6a9b4-107">또한 RADIUS 대상으로서 LDAP 바인딩 사용, IIS 인증을 사용한 사용자의 사전 인증 또는 Azure MFA 사용자 포털에서 기본 인증이 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-107">It also allows for the use of LDAP bind as a RADIUS target, for pre-authentication of users with IIS Authentication, or for primary authentication in the Azure MFA user portal.</span></span>

<span data-ttu-id="6a9b4-108">Azure Multi-Factor Authentication을 LDAP 프록시로 사용하려면 Azure Multi-Factor Authentication 서버를 LDAP 클라이언트(예: VPN 어플라이언스, 응용 프로그램)와 LDAP 디렉터리 서버 사이에 삽입합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-108">To use Azure Multi-Factor Authentication as an LDAP proxy, insert the Azure Multi-Factor Authentication Server between the LDAP client (for example, VPN appliance, application) and the LDAP directory server.</span></span> <span data-ttu-id="6a9b4-109">Azure Multi-Factor Authentication 서버가 클라이언트 서버 및 LDAP 디렉터리와 모두 통신할 수 있도록 구성되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-109">The Azure Multi-Factor Authentication Server must be configured to communicate with both the client servers and the LDAP directory.</span></span> <span data-ttu-id="6a9b4-110">이 구성에서 Azure Multi-Factor Authentication 서버는 클라이언트 서버 및 응용 프로그램의 LDAP 요청을 수락하고 대상 LDAP 디렉터리 서버에 전달하여 기본 자격 증명의 유효성을 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-110">In this configuration, the Azure Multi-Factor Authentication Server accepts LDAP requests from client servers and applications and forwards them to the target LDAP directory server to validate the primary credentials.</span></span> <span data-ttu-id="6a9b4-111">LDAP 디렉터리가 기본 자격 증명의 유효성을 검사하면 Azure Multi-Factor Authentication은 두 번째 ID 검증을 수행하고 다시 LDAP 클라이언트로 응답을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-111">If the LDAP directory validates the primary credentials, Azure Multi-Factor Authentication performs a second identity verification and sends a response back to the LDAP client.</span></span> <span data-ttu-id="6a9b4-112">LDAP 서버 인증 및 2단계 검증이 모두 성공해야만 전체 인증에 성공합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-112">The entire authentication succeeds only if both the LDAP server authentication and the second-step verification succeed.</span></span>

## <a name="configure-ldap-authentication"></a><span data-ttu-id="6a9b4-113">LDAP 인증 구성</span><span class="sxs-lookup"><span data-stu-id="6a9b4-113">Configure LDAP authentication</span></span>
<span data-ttu-id="6a9b4-114">LDAP 인증을 구성하려면 Windows 서버에 Azure Multi-Factor Authentication 서버를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-114">To configure LDAP authentication, install the Azure Multi-Factor Authentication Server on a Windows server.</span></span> <span data-ttu-id="6a9b4-115">이렇게 하려면 다음 절차를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-115">Use the following procedure:</span></span>

### <a name="add-an-ldap-client"></a><span data-ttu-id="6a9b4-116">LDAP 클라이언트를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-116">Add an LDAP client</span></span>

1. <span data-ttu-id="6a9b4-117">Azure Multi-Factor Authentication 서버의 왼쪽 메뉴에서 LDAP 인증 아이콘을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-117">In the Azure Multi-Factor Authentication Server, select the LDAP Authentication icon in the left menu.</span></span>
2. <span data-ttu-id="6a9b4-118">**LDAP 인증 사용** 확인란을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-118">Check the **Enable LDAP Authentication** checkbox.</span></span>

   ![LDAP 인증](./media/multi-factor-authentication-get-started-server-ldap/ldap2.png)

3. <span data-ttu-id="6a9b4-120">LDAP 요청을 수신하기 위해 Azure Multi-Factor Authentication LDAP 서비스가 비표준 포트에 바인딩해야 하는 경우 클라이언트 탭에서 TCP 포트 및 SSL 포트를 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-120">On the Clients tab, change the TCP port and SSL port if the Azure Multi-Factor Authentication LDAP service should bind to non-standard ports to listen for LDAP requests.</span></span>
4. <span data-ttu-id="6a9b4-121">클라이언트에서 Azure Multi-Factor Authentication 서버까지 LDAPS를 사용하려는 경우 MFA 서버와 동일한 서버에 SSL 인증서가 설치되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-121">If you plan to use LDAPS from the client to the Azure Multi-Factor Authentication Server, an SSL certificate must be installed on the same server as MFA Server.</span></span> <span data-ttu-id="6a9b4-122">SSL 인증서 상자 옆에 있는 **찾아보기**를 클릭하고 보안 연결에 사용할 인증서를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-122">Click **Browse** next to the SSL certificate box, and select a certificate to use for the secure connection.</span></span>
5. <span data-ttu-id="6a9b4-123">**추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-123">Click **Add**.</span></span>
6. <span data-ttu-id="6a9b4-124">[LDAP 클라이언트 추가] 대화 상자에서 서버 및 응용 프로그램 이름(선택 사항)을 인증하는 응용 프로그램의 IP 주소, 서버 및 응용 프로그램을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-124">In the Add LDAP Client dialog box, enter the IP address of the appliance, server, or application that authenticates to the Server and an Application name (optional).</span></span> <span data-ttu-id="6a9b4-125">응용 프로그램 이름이 Azure Multi-Factor Authentication 보고서에 나타나며 SMS 또는 모바일 앱 인증 메시지 내에 표시될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-125">The Application name appears in Azure Multi-Factor Authentication reports and may be displayed within SMS or Mobile App authentication messages.</span></span>
7. <span data-ttu-id="6a9b4-126">모든 사용자를 서버로 가져왔거나 가져올 예정이고 2단계 확인을 적용하는 경우 **Azure Multi-Factor Authentication 사용자 일치 필요** 확인란을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-126">Check the **Require Azure Multi-Factor Authentication user match** box if all users have been or will be imported into the Server and subject to two-step verification.</span></span> <span data-ttu-id="6a9b4-127">많은 수의 사용자를 서버에 아직 가져오지 않았거나 2단계 확인에서 제외할 예정이면 이 확인란을 선택 취소합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-127">If a significant number of users have not yet been imported into the Server and/or are exempt from two-step verification, leave the box unchecked.</span></span> <span data-ttu-id="6a9b4-128">이 기능에 대한 자세한 내용은 MFA 서버 도움말 파일을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-128">See the MFA Server help file for additional information on this feature.</span></span>

<span data-ttu-id="6a9b4-129">LDAP 클라이언트를 더 추가하려면 이 단계를 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-129">Repeat these steps to add additional LDAP clients.</span></span>

### <a name="configure-the-ldap-directory-connection"></a><span data-ttu-id="6a9b4-130">LDAP 디렉터리 연결 구성</span><span class="sxs-lookup"><span data-stu-id="6a9b4-130">Configure the LDAP directory connection</span></span>

<span data-ttu-id="6a9b4-131">Azure Multi-Factor Authentication이 LDAP 인증을 받도록 구성된 경우 해당 인증을 LDAP 디렉터리로 프록시해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-131">When the Azure Multi-Factor Authentication is configured to receive LDAP authentications, it must proxy those authentications to the LDAP directory.</span></span> <span data-ttu-id="6a9b4-132">따라서 대상 탭에는 LDAP 대상을 사용하기 위해 단일한 회색 옵션만 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-132">Therefore, the Target tab only displays a single, grayed out option to use an LDAP target.</span></span>

1. <span data-ttu-id="6a9b4-133">LDAP 디렉터리 연결을 구성하려면 **디렉터리 통합** 아이콘을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-133">To configure the LDAP directory connection, click the **Directory Integration** icon.</span></span>
2. <span data-ttu-id="6a9b4-134">설정 탭에서 **특정 LDAP 구성 사용** 라디오 단추를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-134">On the Settings tab, select the **Use specific LDAP configuration** radio button.</span></span>
3. <span data-ttu-id="6a9b4-135">**편집…**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-135">Select **Edit…**</span></span>
4. <span data-ttu-id="6a9b4-136">Edit LDAP Configuration(LDAP 구성 편집) 대화 상자에서 LDAP 디렉터리 연결에 필요한 정보를 필드에 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-136">In the Edit LDAP Configuration dialog box, populate the fields with the information required to connect to the LDAP directory.</span></span> <span data-ttu-id="6a9b4-137">필드의 설명은 Azure Multi-Factor Authentication 서버 도움말 파일에도 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-137">Descriptions of the fields are included in the Azure Multi-Factor Authentication Server help file.</span></span>

    ![디렉터리 통합](./media/multi-factor-authentication-get-started-server-ldap/ldap.png)

5. <span data-ttu-id="6a9b4-139">**테스트** 단추를 클릭하여 LDAP 연결을 테스트합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-139">Test the LDAP connection by clicking the **Test** button.</span></span>
6. <span data-ttu-id="6a9b4-140">LDAP 연결 테스트가 성공한 경우 **확인** 단추를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-140">If the LDAP connection test was successful, click the **OK** button.</span></span>
7. <span data-ttu-id="6a9b4-141">**필터** 탭을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-141">Click the **Filters** tab.</span></span> <span data-ttu-id="6a9b4-142">Active Directory에서 컨테이너, 보안 그룹 및 사용자를 로드하도록 서버가 미리 구성되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-142">The Server is pre-configured to load containers, security groups, and users from Active Directory.</span></span> <span data-ttu-id="6a9b4-143">다른 LDAP 디렉터리에 바인딩하는 경우 표시되는 필터를 편집해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-143">If binding to a different LDAP directory, you probably need to edit the filters displayed.</span></span> <span data-ttu-id="6a9b4-144">필터에 대한 자세한 내용은 **도움말** 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-144">Click the **Help** link for more information on filters.</span></span>
8. <span data-ttu-id="6a9b4-145">**특성** 탭을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-145">Click the **Attributes** tab.</span></span> <span data-ttu-id="6a9b4-146">Active Directory의 특성을 매핑하도록 서버가 미리 구성되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-146">The Server is pre-configured to map attributes from Active Directory.</span></span>
9. <span data-ttu-id="6a9b4-147">다른 LDAP 디렉터리에 바인딩하거나 미리 구성된 특성 매핑을 변경하려는 경우 **편집...**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-147">If you're binding to a different LDAP directory or to change the pre-configured attribute mappings, click **Edit…**</span></span>
10. <span data-ttu-id="6a9b4-148">Edit Attributes(특성 편집) 대화 상자에서 디렉터리에 대한 LDAP 특성 매핑을 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-148">In the Edit Attributes dialog box, modify the LDAP attribute mappings for your directory.</span></span> <span data-ttu-id="6a9b4-149">각 필드 옆에 있는 **…**</span><span class="sxs-lookup"><span data-stu-id="6a9b4-149">Attribute names can be typed in or selected by clicking the **…**</span></span> <span data-ttu-id="6a9b4-150">단추를 클릭하면 특성 이름을 입력하거나 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-150">button next to each field.</span></span> <span data-ttu-id="6a9b4-151">특성에 대한 자세한 내용은 **도움말** 링크를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-151">Click the **Help** link for more information on attributes.</span></span>
11. <span data-ttu-id="6a9b4-152">**확인** 단추를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-152">Click the **OK** button.</span></span>
12. <span data-ttu-id="6a9b4-153">**회사 설정** 아이콘을 클릭하고 **사용자 이름 확인** 탭을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-153">Click the **Company Settings** icon and select the **Username Resolution** tab.</span></span>
13. <span data-ttu-id="6a9b4-154">도메인에 가입된 서버에서 Active Directory에 연결하는 경우 **사용자 이름과 일치하는 Windows 보안 식별자(SID) 사용** 라디오 단추를 선택한 상태로 그대로 둡니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-154">If you're connecting to Active Directory from a domain-joined server, leave the **Use Windows security identifiers (SIDs) for matching usernames** radio button selected.</span></span> <span data-ttu-id="6a9b4-155">그렇지 않으면 **사용자 이름과 일치하는 LDAP 고유 식별자 특성 사용** 라디오 단추를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-155">Otherwise, select the **Use LDAP unique identifier attribute for matching usernames** radio button.</span></span> 

<span data-ttu-id="6a9b4-156">**사용자 이름과 일치하는 LDAP 고유 식별자 특성 사용** 라디오 단추를 선택한 경우 Azure Multi-factor Authentication 서버에서는 각 사용자 이름을 LDAP 디렉터리의 고유 식별자로 결정하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-156">When the **Use LDAP unique identifier attribute for matching usernames** radio button is selected, the Azure Multi-Factor Authentication Server attempts to resolve each username to a unique identifier in the LDAP directory.</span></span> <span data-ttu-id="6a9b4-157">LDAP 검색은 [디렉터리 통합 -> 특성] 탭에서 정의된 사용자 이름 특성에 대해 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-157">An LDAP search is performed on the Username attributes defined in the Directory Integration -> Attributes tab.</span></span> <span data-ttu-id="6a9b4-158">사용자가 인증하는 경우 사용자 이름은 LDAP 디렉터리에서 고유 식별자로 확인됩니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-158">When a user authenticates, the username is resolved to the unique identifier in the LDAP directory.</span></span> <span data-ttu-id="6a9b4-159">Azure Multi-Factor Authentication 데이터 파일에서 사용자를 일치시키기 위해 고유 식별자를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-159">The unique identifier is used for matching the user in the Azure Multi-Factor Authentication data file.</span></span> <span data-ttu-id="6a9b4-160">이를 통해 대/소문자 구분 비교 및 길고 짧은 사용자 이름 형식 사용이 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-160">This allows for case-insensitive comparisons, and long and short username formats.</span></span>

<span data-ttu-id="6a9b4-161">이 단계를 완료한 후에 MFA 서버는 구성된 클라이언트의 LDAP 액세스 요청에 대해 구성된 포트에서 수신하고 인증하기 위해 LDAP 디렉터리로 해당 요청의 프록시 역할을 담당합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-161">After you complete these steps, the MFA Server listens on the configured ports for LDAP access requests from the configured clients, and acts as a proxy for those requests to the LDAP directory for authentication.</span></span>

## <a name="configure-ldap-client"></a><span data-ttu-id="6a9b4-162">LDAP 클라이언트 구성</span><span class="sxs-lookup"><span data-stu-id="6a9b4-162">Configure LDAP client</span></span>
<span data-ttu-id="6a9b4-163">LDAP 클라이언트를 구성하려면 다음 지침을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-163">To configure the LDAP client, use the guidelines:</span></span>

* <span data-ttu-id="6a9b4-164">어플라이언스, 서버 또는 응용 프로그램이 마치 LDAP 디렉터리인 것처럼 LDAP를 통해 Azure Multi-Factor Authentication 서버를 인증하도록 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-164">Configure your appliance, server, or application to authenticate via LDAP to the Azure Multi-Factor Authentication Server as though it were your LDAP directory.</span></span> <span data-ttu-id="6a9b4-165">일반적으로 LDAP 디렉터리에 직접 연결하기 위해 사용하는 설정과 동일한 설정을 사용합니다. 단 Azure Multi-Factor Authentication 서버에 사용할 서버 이름 또는 IP 주소는 그렇지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-165">Use the same settings that you would normally use to connect directly to your LDAP directory, except for the server name or IP address, which will be that of the Azure Multi-Factor Authentication Server.</span></span>
* <span data-ttu-id="6a9b4-166">LDAP 디렉터리를 사용하여 사용자 자격 증명의 유효성을 검사할 시간이 있도록 LDAP 제한 시간을 30~60초로 구성하고 2단계 검증을 수행하고 응답을 받고 LDAP 액세스 요청에 응답합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-166">Configure the LDAP timeout to 30-60 seconds so that there is time to validate the user’s credentials with the LDAP directory, perform the second-step verification, receive their response, and respond to the LDAP access request.</span></span>
* <span data-ttu-id="6a9b4-167">LDAPS를 사용하는 경우 LDAP 쿼리를 만드는 어플라이언스 또는 서버는 Azure Multi-Factor Authentication 서버에 설치된 SSL 인증서를 신뢰해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="6a9b4-167">If using LDAPS, the appliance or server making the LDAP queries must trust the SSL certificate installed on the Azure Multi-Factor Authentication Server.</span></span>

