---
title: "aaaAzure MFA 서버 업그레이드 | Microsoft Docs"
description: "단계 및 지침 tooupgrade hello Azure Multi-factor Authentication 서버 tooa 최신 버전입니다."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 50bb8ac3-5559-4d8b-a96a-799a74978b14
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/16/2017
ms.author: kgremban
ms.reviewer: yossib
ms.custom: it-pro
ms.openlocfilehash: aaa8d400e0e5f1c6be3a6d22cde6dd893ef4d546
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="upgrade-toohello-latest-azure-multi-factor-authentication-server"></a><span data-ttu-id="9dd8c-103">Toohello 업그레이드 최신 Azure Multi-factor Authentication 서버</span><span class="sxs-lookup"><span data-stu-id="9dd8c-103">Upgrade toohello latest Azure Multi-Factor Authentication Server</span></span>

<span data-ttu-id="9dd8c-104">이 문서에서는 hello를 통해 Azure Multi-factor Authentication (MFA) 서버 v6.0 업그레이드 프로세스 또는 더 높은 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-104">This article walks you through hello process of upgrading Azure Multi-Factor Authentication (MFA) Server v6.0 or higher.</span></span> <span data-ttu-id="9dd8c-105">이전 버전의 hello PhoneFactor Agent tooupgrade, 필요한 경우 너무 참조[업그레이드 hello PhoneFactor Agent tooAzure Multi-factor Authentication 서버](multi-factor-authentication-get-started-server-upgrade.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-105">If you need tooupgrade an old version of hello PhoneFactor Agent, refer too[Upgrade hello PhoneFactor Agent tooAzure Multi-Factor Authentication Server](multi-factor-authentication-get-started-server-upgrade.md).</span></span>

<span data-ttu-id="9dd8c-106">V6.x 또는 이전 toov7.x에서 업그레이드 하거나 최신 인 경우 모든 구성 요소는.NET 2.0 too.NET 4.5에서에서 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-106">If you're upgrading from v6.x or older toov7.x or newer, all components change from .NET 2.0 too.NET 4.5.</span></span> <span data-ttu-id="9dd8c-107">모든 구성 요소에는 Microsoft Visual C++ 2015 재배포 가능 패키지 업데이트 1 이상이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-107">All components also require Microsoft Visual C++ 2015 Redistributable Update 1 or higher.</span></span> <span data-ttu-id="9dd8c-108">이미 설치 되어 있지 않으면 hello MFA 서버 설치 프로그램에서 모두 hello x86 및 x64 버전의 이러한 구성 요소를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-108">hello MFA Server installer installs both hello x86 and x64 versions of these components if they aren't already installed.</span></span> <span data-ttu-id="9dd8c-109">Hello 사용자 포털 및 모바일 앱 웹 서비스에 별도 서버에서 실행 해야 tooinstall 패키지만 해당 구성 요소를 업그레이드 하기 전에.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-109">If hello User Portal and Mobile App Web Service run on separate servers, you need tooinstall those packages before upgrading those components.</span></span> <span data-ttu-id="9dd8c-110">Hello hello에 최신 Microsoft Visual c + + 2015 재배포 가능 패키지 업데이트를 검색할 수 있습니다 [Microsoft 다운로드 센터](https://www.microsoft.com/en-us/download/)합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-110">You can search for hello latest Microsoft Visual C++ 2015 Redistributable update on hello [Microsoft Download Center](https://www.microsoft.com/en-us/download/).</span></span> 

## <a name="install-hello-latest-version-of-azure-mfa-server"></a><span data-ttu-id="9dd8c-111">Hello 최신 버전의 Azure MFA 서버 설치</span><span class="sxs-lookup"><span data-stu-id="9dd8c-111">Install hello latest version of Azure MFA Server</span></span>

1. <span data-ttu-id="9dd8c-112">Hello 지침에 따라 [Azure Multi-factor Authentication 서버 다운로드 hello](multi-factor-authentication-get-started-server.md#download-the-azure-multi-factor-authentication-server) tooget hello 최신 버전의 Azure MFA 서버 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-112">Use hello instructions in [Download hello Azure Multi-Factor Authentication Server](multi-factor-authentication-get-started-server.md#download-the-azure-multi-factor-authentication-server) tooget hello latest version of hello Azure MFA Server.</span></span>
2. <span data-ttu-id="9dd8c-113">마스터 서버에 MFA C:\Program Files\multi-factor Authentication Server\Data\PhoneFactor.pfdata (되었다고 가정 하면 hello 기본 설치 위치)에 있는 hello와 MFA 서버 데이터 파일의 백업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-113">Make a backup of hello MFA Server data file located at C:\Program Files\Multi-Factor Authentication Server\Data\PhoneFactor.pfdata (assuming hello default install location) on your master MFA Server.</span></span>
3. <span data-ttu-id="9dd8c-114">고가용성을 위해 여러 서버를 실행 하는 경우 toohello 서버를 업그레이드 하는 트래픽 전송을 중지 되도록 toohello MFA 서버를 인증 하는 hello 클라이언트 시스템을 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-114">If you run multiple servers for high availability, change hello client systems that authenticate toohello MFA Server so that they stop sending traffic toohello servers that are upgrading.</span></span> <span data-ttu-id="9dd8c-115">부하 분산 장치를 사용 하는 경우 MFA 서버 hello 부하 분산 장치에서 제거 업그레이드 hello을 수행한 다음 hello 팜으로 hello 서버를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-115">If you use a load balancer, remove a MFA Server from hello load balancer, do hello upgrade, and then add hello server back into hello farm.</span></span>
4. <span data-ttu-id="9dd8c-116">각 MFA 서버 hello 새 설치를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-116">Run hello new installer on each MFA Server.</span></span> <span data-ttu-id="9dd8c-117">Hello hello 마스터 여 복제 되는 이전 데이터 파일을 읽을 수 때문에 먼저 하위 서버를 업그레이드 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-117">Upgrade subordinate servers first because they can read hello old data file being replicated by hello master.</span></span> 

  <span data-ttu-id="9dd8c-118">않아도 toouninstall hello 설치 관리자를 실행 하기 전에 현재 MFA 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-118">You do not need toouninstall your current MFA Server before running hello installer.</span></span> <span data-ttu-id="9dd8c-119">hello 설치는 적절 한 업그레이드를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-119">hello installer performs an in-place upgrade.</span></span> <span data-ttu-id="9dd8c-120">hello 설치 경로에서 선택 되었습니다 hello 레지스트리 hello 이전 설치에서 설치 hello에서 동일 하므로 위치 (예: C:\Program Files\multi-factor Authentication Server).</span><span class="sxs-lookup"><span data-stu-id="9dd8c-120">hello installation path is picked up from hello registry from hello previous installation, so it installs in hello same location (for example, C:\Program Files\Multi-Factor Authentication Server).</span></span> 
  
5. <span data-ttu-id="9dd8c-121">증명된 tooinstall Microsoft Visual c + + 2015 재배포 가능 패키지 업데이트 패키지를 사용 하는 경우에 hello 라는 메시지를 수락 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-121">If you're prompted tooinstall a Microsoft Visual C++ 2015 Redistributable update package, accept hello prompt.</span></span> <span data-ttu-id="9dd8c-122">Hello 패키지의 hello x86 및 x64 버전이 모두 설치 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-122">Both hello x86 and x64 versions of hello package are installed.</span></span>
5. <span data-ttu-id="9dd8c-123">Hello 웹 서비스 SDK를 사용 하는 경우 메시지가 표시 되 tooinstall hello 새 웹 서비스 SDK입니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-123">If you use hello Web Service SDK, you are prompted tooinstall hello new Web Service SDK.</span></span> <span data-ttu-id="9dd8c-124">새 웹 서비스 SDK hello, 설치할 때 해당 hello 가상 디렉터리 이름이 이전에 설치 하는 hello 가상 디렉터리 (예를 들어 MultiFactorAuthWebServiceSdk)와 일치 하는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-124">When you install hello new Web Service SDK, make sure that hello virtual directory name matches hello previously installed virtual directory (for example, MultiFactorAuthWebServiceSdk).</span></span>
6. <span data-ttu-id="9dd8c-125">모든 하위 서버에서 hello 단계를 반복 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-125">Repeat hello steps on all subordinate servers.</span></span> <span data-ttu-id="9dd8c-126">Hello 부하 직원 toobe hello 새 마스터를 다음 업그레이드 hello 이전 마스터 서버 중 하나를 승격 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-126">Promote one of hello subordinates toobe hello new master, then upgrade hello old master server.</span></span> 

## <a name="upgrade-hello-user-portal"></a><span data-ttu-id="9dd8c-127">Hello 사용자 포털 업그레이드</span><span class="sxs-lookup"><span data-stu-id="9dd8c-127">Upgrade hello User Portal</span></span>

1. <span data-ttu-id="9dd8c-128">Hello hello 사용자 포털 설치 위치 (예: C:\inetpub\wwwroot\MultiFactorAuth)의 가상 디렉터리에 있는 hello web.config 파일의 백업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-128">Make a backup of hello web.config file that is in hello virtual directory of hello User Portal installation location (for example, C:\inetpub\wwwroot\MultiFactorAuth).</span></span> <span data-ttu-id="9dd8c-129">Toohello 기본 테마 변경 사항, 경우에 hello App_Themes\Default 폴더의 백업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-129">If any changes were made toohello default theme, make a backup of hello App_Themes\Default folder as well.</span></span> <span data-ttu-id="9dd8c-130">더 나은 toocreate hello 기본 폴더의 복사본 되며 toochange hello 기본 테마 보다 새 테마를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-130">It is better toocreate a copy of hello Default folder and create a new theme than toochange hello Default theme.</span></span>
2. <span data-ttu-id="9dd8c-131">사용자 포털 hello 동일한 서버 hello 다른 MFA 서버 구성 요소 같이 hello hello에서 실행 하는 경우 MFA 서버 설치 tooupdate hello 사용자 포털이 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-131">If hello User Portal runs on hello same server as hello other MFA Server components, hello MFA Server installation prompts you tooupdate hello User Portal.</span></span> <span data-ttu-id="9dd8c-132">Hello 메시지를 확인 하 고 hello 사용자 포털 업데이트를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-132">Accept hello prompt and install hello User Portal update.</span></span> <span data-ttu-id="9dd8c-133">이전에 설치 하는 hello 가상 디렉터리 (예를 들어 MultiFactorAuth) 일치 하는 해당 hello 가상 디렉터리 이름을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-133">Check that hello virtual directory name matches hello previously installed virtual directory (for example, MultiFactorAuth).</span></span>
3. <span data-ttu-id="9dd8c-134">사용자 포털 hello 자체 서버에 있으면 hello로 hello MultiFactorAuthenticationUserPortalSetup64.msi 파일을 복사 hello MFA 서버 중 하나의 위치를 설치 하 고 hello 사용자 포털 웹 서버에 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-134">If hello User Portal is on its own server, copy hello MultiFactorAuthenticationUserPortalSetup64.msi file from hello install location of one of hello MFA Servers and put it onto hello User Portal web server.</span></span> <span data-ttu-id="9dd8c-135">Hello 설치 관리자를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-135">Run hello installer.</span></span> 

  <span data-ttu-id="9dd8c-136">상자가 오류가 발생 하는 경우 "Microsoft Visual c + + 2015 재배포 가능 패키지 업데이트 1 이상이 필요 는"에서 다운로드 및 설치 hello 최신 업데이트 패키지 hello [Microsoft 다운로드 센터](https://www.microsoft.com/download/)합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-136">If an error occurs stating, "Microsoft Visual C++ 2015 Redistributable Update 1 or higher is required," download and install hello latest update package from hello [Microsoft Download Center](https://www.microsoft.com/download/).</span></span> <span data-ttu-id="9dd8c-137">Hello x86 및 x64 버전을 모두 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-137">Install both hello x86 and x64 versions.</span></span>

4. <span data-ttu-id="9dd8c-138">소프트웨어를 설치 하는 사용자 포털을 업데이트 하는 hello 후 hello 새 web.config 파일로 1 단계에서 만든 hello web.config 백업을 비교 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-138">After hello updated User Portal software is installed, compare hello web.config backup you made in step 1 with hello new web.config file.</span></span> <span data-ttu-id="9dd8c-139">Hello 새 web.config에 새 특성이 있으면 hello 가상 디렉터리 toooverwrite hello 새에 백업 하려면 web.config를 복사 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-139">If no new attributes exist in hello new web.config, copy your backup web.config into hello virtual directory toooverwrite hello new one.</span></span> <span data-ttu-id="9dd8c-140">또 다른 방법은 toocopy/붙여넣기 hello appSettings 값과 hello hello 백업 hello 새 web.config 파일에서 웹 서비스 SDK URL입니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-140">Another option is toocopy/paste hello appSettings values and hello Web Service SDK URL from hello backup file into hello new web.config.</span></span>

<span data-ttu-id="9dd8c-141">여러 서버에서 사용자 포털 hello를 사용 하도록 설정한 경우 모든 속성에 hello 설치를 반복 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-141">If you have hello User Portal on multiple servers, repeat hello installation on all of them.</span></span> 


## <a name="upgrade-hello-mobile-app-web-service"></a><span data-ttu-id="9dd8c-142">Hello 모바일 앱 웹 서비스를 업그레이드 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-142">Upgrade hello Mobile App Web Service</span></span>

1. <span data-ttu-id="9dd8c-143">모바일 앱 웹 서비스 설치 위치 (예를 들어 C:\inetpub\wwwroot\app 또는 C:\inetpub\wwwroot\MultiFactorAuthMobileAppWebService)의 hello hello 가상 디렉터리에 있는 hello web.config 파일의 백업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-143">Make a backup of hello web.config file that is in hello virtual directory of hello Mobile App Web Service installation location (for example, C:\inetpub\wwwroot\app or C:\inetpub\wwwroot\MultiFactorAuthMobileAppWebService).</span></span>
2. <span data-ttu-id="9dd8c-144">MFA 서버 hello의 위치를 설치 하 고 hello 모바일 응용 프로그램 등록 웹 서버에 저장 하는 hello로 hello MultiFactorAuthenticationMobileAppWebServiceSetup64.msi 파일을 복사 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-144">Copy hello MultiFactorAuthenticationMobileAppWebServiceSetup64.msi file from hello install location of hello MFA Servers and put it onto hello Mobile App registration web server.</span></span>
3. <span data-ttu-id="9dd8c-145">Hello 설치 관리자를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-145">Run hello installer.</span></span> 

  <span data-ttu-id="9dd8c-146">Microsoft Visual c + + 2015 재배포 가능 패키지 업데이트 1 이상이 필요한 않음을 나타내는 오류가 발생 하는 경우 다운로드 하 여 hello hello 최신 업데이트 패키지 설치 [Microsoft 다운로드 센터](https://www.microsoft.com/download/)합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-146">If an error occurs stating that Microsoft Visual C++ 2015 Redistributable Update 1 or higher is required, download and install hello latest update package from hello [Microsoft Download Center](https://www.microsoft.com/download/).</span></span> <span data-ttu-id="9dd8c-147">Hello x86 및 x64 버전을 모두 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-147">Install both hello x86 and x64 versions.</span></span>

4. <span data-ttu-id="9dd8c-148">업데이트 하는 hello 모바일 앱 웹 서비스 소프트웨어를 설치한 후 새 web.config 파일로 hello 1 단계에서 백업한 hello web.config 파일을 비교 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-148">After hello updated Mobile App Web Service software installs, compare hello web.config file that was backed up in step 1 with hello new web.config file.</span></span> <span data-ttu-id="9dd8c-149">새 특성이 없는 hello 새 web.config에 있는 경우 hello 가상 디렉터리에 다시 저장 된 web.config를 복사 수 있으며 새 hello를 덮어씁니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-149">If no new attributes exist in hello new web.config, you can copy your saved web.config back into hello virtual directory and overwrite hello new one.</span></span> <span data-ttu-id="9dd8c-150">또 다른 방법은 toocopy/붙여넣기 hello appSettings 값과 hello hello 백업 hello 새 web.config 파일에서 웹 서비스 SDK URL입니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-150">Another option is toocopy/paste hello appSettings values and hello Web Service SDK URL from hello backup file into hello new web.config.</span></span>

<span data-ttu-id="9dd8c-151">여러 서버에서 모바일 앱 웹 서비스 hello를 사용 하도록 설정한 경우 모든 속성에 hello 설치를 반복 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-151">If you have hello Mobile App Web Service on multiple servers, repeat hello installation on all of them.</span></span> 

## <a name="upgrade-hello-ad-fs-adapters"></a><span data-ttu-id="9dd8c-152">Hello AD FS 어댑터를 업그레이드 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-152">Upgrade hello AD FS Adapters</span></span>


### <a name="if-mfa-runs-on-different-servers-than-ad-fs"></a><span data-ttu-id="9dd8c-153">MFA가 AD FS 이외의 다른 서버에서 실행되는 경우</span><span class="sxs-lookup"><span data-stu-id="9dd8c-153">If MFA runs on different servers than AD FS</span></span>

<span data-ttu-id="9dd8c-154">다음 지침은 AD FS 서버와는 별도로 Multi-factor Authentication 서버를 실행하는 경우에만 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-154">These instructions only apply if you run Multi-Factor Authentication Server separately from your AD FS servers.</span></span> <span data-ttu-id="9dd8c-155">두 서비스에서 실행 하는 경우 동일한 서버 hello,이 섹션을 건너뛰고 toohello 설치 단계를 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-155">If both services run on hello same servers, skip this section and go toohello installation steps.</span></span> 

1. <span data-ttu-id="9dd8c-156">AD FS에서 등록 된 hello MultiFactorAuthenticationAdfsAdapter.config 파일의 복사본을 저장 하거나 다음 PowerShell 명령을 hello를 사용 하 여 hello 구성 내보내기: `Export-AdfsAuthenticationProviderConfigurationData -Name [adapter name] -FilePath [path tooconfig file]`합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-156">Save a copy of hello MultiFactorAuthenticationAdfsAdapter.config file that was registered in AD FS, or export hello configuration using hello following PowerShell command: `Export-AdfsAuthenticationProviderConfigurationData -Name [adapter name] -FilePath [path tooconfig file]`.</span></span> <span data-ttu-id="9dd8c-157">hello 어댑터 이름은 이전에 설치 하는 hello 버전에 따라 "WindowsAzureMultiFactorAuthentication" 또는 "AzureMfaServerAuthentication" 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-157">hello adapter name is either "WindowsAzureMultiFactorAuthentication" or "AzureMfaServerAuthentication" depending on hello version previously installed.</span></span>
2. <span data-ttu-id="9dd8c-158">Hello 파일 hello와 MFA 서버 설치 위치 toohello AD FS 서버에서 다음을 복사 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-158">Copy hello following files from hello MFA Server installation location toohello AD FS servers:</span></span>

  - <span data-ttu-id="9dd8c-159">MultiFactorAuthenticationAdfsAdapterSetup64.msi</span><span class="sxs-lookup"><span data-stu-id="9dd8c-159">MultiFactorAuthenticationAdfsAdapterSetup64.msi</span></span>
  - <span data-ttu-id="9dd8c-160">Register-MultiFactorAuthenticationAdfsAdapter.ps1</span><span class="sxs-lookup"><span data-stu-id="9dd8c-160">Register-MultiFactorAuthenticationAdfsAdapter.ps1</span></span>
  - <span data-ttu-id="9dd8c-161">Unregister-MultiFactorAuthenticationAdfsAdapter.ps1</span><span class="sxs-lookup"><span data-stu-id="9dd8c-161">Unregister-MultiFactorAuthenticationAdfsAdapter.ps1</span></span>
  - <span data-ttu-id="9dd8c-162">MultiFactorAuthenticationAdfsAdapter.config</span><span class="sxs-lookup"><span data-stu-id="9dd8c-162">MultiFactorAuthenticationAdfsAdapter.config</span></span>

3. <span data-ttu-id="9dd8c-163">추가 하 여 hello Register-multifactorauthenticationadfsadapter.ps1 스크립트를 편집 `-ConfigurationFilePath [path]` hello toohello 끝 `Register-AdfsAuthenticationProvider` 명령입니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-163">Edit hello Register-MultiFactorAuthenticationAdfsAdapter.ps1 script by adding `-ConfigurationFilePath [path]` toohello end of hello `Register-AdfsAuthenticationProvider` command.</span></span> <span data-ttu-id="9dd8c-164">대체 *[경로]* 와 hello 전체 경로 toohello MultiFactorAuthenticationAdfsAdapter.config 파일 또는 hello 구성 파일 단계에서 내보낸 hello 이전 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-164">Replace *[path]* with hello full path toohello MultiFactorAuthenticationAdfsAdapter.config file or hello configuration file exported in hello previous step.</span></span> 

  <span data-ttu-id="9dd8c-165">Hello 이전 구성 파일을 일치 하는 경우 새 MultiFactorAuthenticationAdfsAdapter.config toosee hello에에서 hello 특성을 검사 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-165">Check hello attributes in hello new MultiFactorAuthenticationAdfsAdapter.config toosee if they match hello old config file.</span></span> <span data-ttu-id="9dd8c-166">특성이 추가 되거나 hello 새 버전에서 제거 된, 경우 hello 이전 구성 파일 toohello 새에서에서 hello 특성 값을 복사 하거나 hello 이전 구성 파일 toomatch 수정 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-166">If any attributes were added or removed in hello new version, copy hello attribute values from hello old configuration file toohello new one or modify hello old configuration file toomatch.</span></span>

### <a name="install-new-ad-fs-adapters"></a><span data-ttu-id="9dd8c-167">새 AD FS 어댑터 설치</span><span class="sxs-lookup"><span data-stu-id="9dd8c-167">Install new AD FS adapters</span></span>

> [!IMPORTANT] 
> <span data-ttu-id="9dd8c-168">사용자가이 섹션의 3-8 단계 동안 필요한 tooperform 2 단계 인증 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-168">Your users will not be required tooperform two-step verification during steps 3-8 of this section.</span></span> <span data-ttu-id="9dd8c-169">AD FS에 구성 된 경우 여러 클러스터를 제거할 수 있습니다, 업그레이드 및 hello의 각 클러스터와 독립적으로 팜 복원 hello 다른 클러스터 tooavoid 가동 중지 시간.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-169">If you have AD FS configured in multiple clusters, you can remove, upgrade, and restore each cluster in hello farm independently of hello other clusters tooavoid downtime.</span></span>

1. <span data-ttu-id="9dd8c-170">Hello 팜에서 일부 AD FS 서버를 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-170">Remove some AD FS servers from hello farm.</span></span> <span data-ttu-id="9dd8c-171">실행 중인 다른 hello 하는 동안 이러한 서버를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-171">Update these servers while hello others are still running.</span></span>
2. <span data-ttu-id="9dd8c-172">Hello AD FS 팜에서 제거 하는 각 서버에 hello 새 AD FS 어댑터를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-172">Install hello new AD FS adapter on each server removed from hello AD FS farm.</span></span> <span data-ttu-id="9dd8c-173">MFA 서버 hello 각 AD FS 서버에 설치 되어, 사용자 환경 admin 님 안녕하세요 MFA 서버를 통해 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-173">If hello MFA Server is installed on each AD FS server, you can update through hello MFA Server admin UX.</span></span> <span data-ttu-id="9dd8c-174">그렇지 않으면 MultiFactorAuthenticationAdfsAdapterSetup64.msi를 실행하여 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-174">Otherwise, update by running MultiFactorAuthenticationAdfsAdapterSetup64.msi.</span></span> 

  <span data-ttu-id="9dd8c-175">상자가 오류가 발생 하는 경우 "Microsoft Visual c + + 2015 재배포 가능 패키지 업데이트 1 이상이 필요 는"에서 다운로드 및 설치 hello 최신 업데이트 패키지 hello [Microsoft 다운로드 센터](https://www.microsoft.com/download/)합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-175">If an error occurs stating, "Microsoft Visual C++ 2015 Redistributable Update 1 or higher is required," download and install hello latest update package from hello [Microsoft Download Center](https://www.microsoft.com/download/).</span></span> <span data-ttu-id="9dd8c-176">Hello x86 및 x64 버전을 모두 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-176">Install both hello x86 and x64 versions.</span></span>

3. <span data-ttu-id="9dd8c-177">너무 이동**AD FS** > **인증 정책** > **전역 다단계 인증 정책 편집**합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-177">Go too**AD FS** > **Authentication Policies** > **Edit Global MultiFactor Authentication Policy**.</span></span> <span data-ttu-id="9dd8c-178">선택을 취소 **WindowsAzureMultiFactorAuthentication** 또는 **AzureMFAServerAuthentication** (에 따라 설치 된 hello 현재 버전).</span><span class="sxs-lookup"><span data-stu-id="9dd8c-178">Uncheck **WindowsAzureMultiFactorAuthentication** or **AzureMFAServerAuthentication** (depending on hello current version installed).</span></span> 

  <span data-ttu-id="9dd8c-179">이 단계가 완료되면 8단계를 완료할 때까지 이 AD FS 클러스터에서 MFA 서버를 통한 2단계 인증을 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-179">Once this step is complete, two-step verification through MFA Server is not available in this AD FS cluster until you complete step 8.</span></span>

4. <span data-ttu-id="9dd8c-180">등록 취소 hello 이전 버전의 hello Unregister-multifactorauthenticationadfsadapter.ps1 PowerShell 스크립트를 실행 하 여 hello AD FS 어댑터.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-180">Unregister hello older version of hello AD FS adapter by running hello Unregister-MultiFactorAuthenticationAdfsAdapter.ps1 PowerShell script.</span></span> <span data-ttu-id="9dd8c-181">해당 hello 확인 *-이름* 매개 변수 ("WindowsAzureMultiFactorAuthentication" 또는 "AzureMFAServerAuthentication")에 3 단계에 표시 된 hello 이름과 일치 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-181">Ensure that hello *-Name* parameter (either “WindowsAzureMultiFactorAuthentication” or "AzureMFAServerAuthentication") matches hello name that was displayed in step 3.</span></span> <span data-ttu-id="9dd8c-182">이 중앙에서 구성 되므로 tooall 서버 hello 동일한 AD FS 클러스터에 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-182">This applies tooall servers in hello same AD FS cluster since there is a central configuration.</span></span>
5. <span data-ttu-id="9dd8c-183">Hello Register-multifactorauthenticationadfsadapter.ps1 PowerShell 스크립트를 실행 하 여 hello 새 AD FS 어댑터를 등록 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-183">Register hello new AD FS adapter by running hello Register-MultiFactorAuthenticationAdfsAdapter.ps1 PowerShell script.</span></span> <span data-ttu-id="9dd8c-184">이 중앙에서 구성 되므로 tooall 서버 hello 동일한 AD FS 클러스터에 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-184">This applies tooall servers in hello same AD FS cluster since there is a central configuration.</span></span>
6. <span data-ttu-id="9dd8c-185">Hello hello AD FS 팜에서 제거 하는 각 서버에서 AD FS 서비스를 다시 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-185">Restart hello AD FS service on each server removed from hello AD FS farm.</span></span>
7. <span data-ttu-id="9dd8c-186">제거 hello 팜에서 다른 서버 hello 및 hello 업데이트 서버를 toohello AD FS 팜에 다시 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-186">Add hello updated servers back toohello AD FS farm and remove hello other servers from hello farm.</span></span>
8. <span data-ttu-id="9dd8c-187">너무 이동**AD FS** > **인증 정책** > **전역 다단계 인증 정책 편집**합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-187">Go too**AD FS** > **Authentication Policies** > **Edit Global MultiFactor Authentication Policy**.</span></span> <span data-ttu-id="9dd8c-188">**AzureMfaServerAuthentication**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-188">Check **AzureMfaServerAuthentication**.</span></span>
9. <span data-ttu-id="9dd8c-189">2 단계 tooupdate hello 서버 hello AD FS 팜에서 들었습니다. 그러나 이제를 반복 하 고 해당 서버의 hello AD FS 서비스를 다시 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-189">Repeat step 2 tooupdate hello servers now removed from hello AD FS farm and restart hello AD FS service on those servers.</span></span>
10. <span data-ttu-id="9dd8c-190">Hello AD FS 팜으로 서버를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="9dd8c-190">Add those servers back into hello AD FS farm.</span></span>

## <a name="next-steps"></a><span data-ttu-id="9dd8c-191">다음 단계</span><span class="sxs-lookup"><span data-stu-id="9dd8c-191">Next steps</span></span>

- <span data-ttu-id="9dd8c-192">[Azure Multi-Factor Authentication 및 타사 VPN을 사용한 고급 시나리오](multi-factor-authentication-advanced-vpn-configurations.md) 예제 보기</span><span class="sxs-lookup"><span data-stu-id="9dd8c-192">Get examples of [Advanced scenarios with Azure Multi-Factor Authentication and third-party VPNs](multi-factor-authentication-advanced-vpn-configurations.md)</span></span>

- [<span data-ttu-id="9dd8c-193">MFA 서버를 Windows Server Active Directory와 동기화</span><span class="sxs-lookup"><span data-stu-id="9dd8c-193">Synchronize MFA Server with Windows Server Active Directory</span></span>](multi-factor-authentication-get-started-server-dirint.md)

- <span data-ttu-id="9dd8c-194">응용 프로그램에 대한 [Windows 인증 구성](multi-factor-authentication-get-started-server-windows.md)</span><span class="sxs-lookup"><span data-stu-id="9dd8c-194">[Configure Windows Authentication](multi-factor-authentication-get-started-server-windows.md) for your applications</span></span>
