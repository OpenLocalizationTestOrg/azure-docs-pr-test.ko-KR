---
title: "Azure MFA 서버로 PhoneFactor 업그레이드 | Microsoft Docs"
description: "이전 phonefactor agent에서 업그레이드하는 경우 Azure MFA 서버로 시작합니다."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
editor: yossib
ms.assetid: 42838ff7-bdf2-4d06-bacc-b3839a00cd76
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/06/2017
ms.author: kgremban
ms.openlocfilehash: 7ab7e693909f807781744ae53eed75d425096590
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="upgrade-the-phonefactor-agent-to-azure-multi-factor-authentication-server"></a><span data-ttu-id="fa587-103">PhoneFactor Agent를 Azure Multi-Factor Authentication 서버로 업그레이드</span><span class="sxs-lookup"><span data-stu-id="fa587-103">Upgrade the PhoneFactor Agent to Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="fa587-104">PhoneFactor Agent v5.x 또는 이전 버전을 Azure Multi-Factor Authentication 서버로 업그레이드하려면 PhoneFactor Agent 및 연결된 구성 요소를 먼저 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-104">To upgrade the PhoneFactor Agent v5.x or older to Azure Multi-Factor Authentication Server, uninstall the PhoneFactor Agent and affiliated components first.</span></span> <span data-ttu-id="fa587-105">그런 다음 Multi-Factor Authentication 서버 및 연결된 구성 요소를 설치할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-105">Then the Multi-Factor Authentication Server and its affiliated components can be installed.</span></span>

## <a name="uninstall-the-phonefactor-agent"></a><span data-ttu-id="fa587-106">PhoneFactor Agent 제거</span><span class="sxs-lookup"><span data-stu-id="fa587-106">Uninstall the PhoneFactor Agent</span></span>

1. <span data-ttu-id="fa587-107">먼저 PhoneFactor 데이터 파일을 백업합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-107">First, back up the PhoneFactor data file.</span></span> <span data-ttu-id="fa587-108">기본 설치 위치는 C:\Program Files\PhoneFactor\Data\Phonefactor.pfdata입니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-108">The default installation location is C:\Program Files\PhoneFactor\Data\Phonefactor.pfdata.</span></span>

2. <span data-ttu-id="fa587-109">사용자 포털이 설치된 경우</span><span class="sxs-lookup"><span data-stu-id="fa587-109">If the User Portal is installed:</span></span>
  1. <span data-ttu-id="fa587-110">설치 폴더로 이동한 다음 web.config 파일을 백업합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-110">Navigate to the install folder and back up the web.config file.</span></span> <span data-ttu-id="fa587-111">기본 설치 위치는 C:\inetpub\wwwroot\PhoneFactor입니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-111">The default installation location is C:\inetpub\wwwroot\PhoneFactor.</span></span>

  2. <span data-ttu-id="fa587-112">포털에 사용자 지정 테마를 추가한 경우 C:\inetpub\wwwroot\PhoneFactor\App_Themes 디렉터리 아래에 사용자 지정 폴더를 백업합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-112">If you have added custom themes to the portal, back up your custom folder below the C:\inetpub\wwwroot\PhoneFactor\App_Themes directory.</span></span>

  3. <span data-ttu-id="fa587-113">PhoneFactor Agent(PhoneFactor Agent와 동일한 서버에 설치된 경우에만 사용 가능) 또는 Windows 프로그램 및 기능을 통해 사용자 포털을 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-113">Uninstall the User Portal either through the PhoneFactor Agent (only available if installed on the same server as the PhoneFactor Agent) or through Windows Programs and Features.</span></span>

3. <span data-ttu-id="fa587-114">모바일 앱 웹 서비스를 설치하려면:</span><span class="sxs-lookup"><span data-stu-id="fa587-114">If the Mobile App Web Service is installed:</span></span>

  1. <span data-ttu-id="fa587-115">설치 폴더로 이동한 다음 web.config 파일을 백업합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-115">Go to the install folder and back up the web.config file.</span></span> <span data-ttu-id="fa587-116">기본 설치 위치는 C:\inetpub\wwwroot\PhoneFactorPhoneAppWebService입니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-116">The default installation location is C:\inetpub\wwwroot\PhoneFactorPhoneAppWebService.</span></span>

  2. <span data-ttu-id="fa587-117">Windows 프로그램 및 기능을 통해 모바일 앱 웹 서비스를 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-117">Uninstall the Mobile App Web Service through Windows Programs and Features.</span></span>

4. <span data-ttu-id="fa587-118">웹 서비스 SDK가 설치된 경우 PhoneFactor Agent 또는 Windows 프로그램 및 기능을 통해 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-118">If the Web Service SDK is installed, uninstall it either through the PhoneFactor Agent or through Windows Programs and Features.</span></span>

5. <span data-ttu-id="fa587-119">Windows 프로그램 및 기능을 통해 PhoneFactor Agent를 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-119">Uninstall the PhoneFactor Agent through Windows Programs and Features.</span></span>

## <a name="install-the-multi-factor-authentication-server"></a><span data-ttu-id="fa587-120">Multi-Factor Authentication 서버 설치</span><span class="sxs-lookup"><span data-stu-id="fa587-120">Install the Multi-Factor Authentication Server</span></span>

<span data-ttu-id="fa587-121">이전 PhoneFactor Agent 설치의 레지스트리에서 설치 경로가 선택되므로 동일한 위치(예: C:\Program Files\PhoneFactor)에 설치되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-121">The installation path is picked up from the registry from the previous PhoneFactor Agent installation, so it should install in the same location (for example, C:\Program Files\PhoneFactor).</span></span> <span data-ttu-id="fa587-122">새 설치는 다른 기본 설치 경로(예: C:\Program Files\multi-factor Authentication Server)를 갖게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-122">New installations have a different default install path (for example, C:\Program Files\Multi-Factor Authentication Server).</span></span> <span data-ttu-id="fa587-123">이전 PhoneFactor Agent에 의해 남아 있는 데이터 파일은 설치 중에 업그레이드되므로 새 Multi-Factor Authentication 서버를 설치한 후에도 사용자 및 설정이 해당 위치에 그대로 남아 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-123">The data file left by the previous PhoneFactor Agent should be upgraded during installation, so your users and settings should still be there after installing the new Multi-Factor Authentication Server.</span></span>

1. <span data-ttu-id="fa587-124">Multi-Factor Authentication 서버의 정품 인증을 받으라는 메시지가 표시되면 진행하고 올바른 복제 그룹에 할당되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-124">If prompted, activate the Multi-Factor Authentication Server and ensure it is assigned to the correct replication group.</span></span>

2. <span data-ttu-id="fa587-125">웹 서비스 SDK를 이전에 설치한 경우 Multi-Factor Authentication 서버 사용자 인터페이스를 통해 새 웹 서비스 SDK를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-125">If the Web Service SDK was previously installed, install the new Web Service SDK through the Multi-Factor Authentication Server User Interface.</span></span>

  <span data-ttu-id="fa587-126">기본 가상 디렉터리 이름은 이제 **PhoneFactorWebServiceSdk** 대신 **MultiFactorAuthWebServiceSdk**가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-126">The default virtual directory name is now **MultiFactorAuthWebServiceSdk** instead of **PhoneFactorWebServiceSdk**.</span></span> <span data-ttu-id="fa587-127">이전 이름을 사용하려는 경우 설치하는 동안 가상 디렉터리의 이름을 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-127">If you want to use the previous name, you must change the name of the virtual directory during installation.</span></span> <span data-ttu-id="fa587-128">그렇지 않은 경우 새 기본 이름을 사용하여 설치할 수 있으면 사용자 포털 및 모바일 앱 웹 서비스 등의 웹 서비스 SDK를 참조하는 모든 응용 프로그램의 URL이 올바른 위치를 가리키도록 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-128">Otherwise, if you allow the install to use the new default name, you have to change the URL in any applications that reference the Web Service SDK (like the User Portal and Mobile App Web Service) to point at the correct location.</span></span>

3. <span data-ttu-id="fa587-129">사용자 포털이 이전에 PhoneFactor Agent 서버에 설치된 경우 Multi-Factor Authentication 서버 사용자 인터페이스를 통해 새 Multi-Factor Authentication 사용자 포털을 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-129">If the User Portal was previously installed on the PhoneFactor Agent Server, install the new Multi-Factor Authentication User Portal through the Multi-Factor Authentication Server User Interface.</span></span>

  <span data-ttu-id="fa587-130">기본 가상 디렉터리 이름은 이제 **PhoneFactor** 대신 **MultiFactorAuth**가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-130">The default virtual directory name is now **MultiFactorAuth** instead of **PhoneFactor**.</span></span> <span data-ttu-id="fa587-131">이전 이름을 사용하려는 경우 설치하는 동안 가상 디렉터리의 이름을 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-131">If you want to use the previous name, you must change the name of the virtual directory during installation.</span></span> <span data-ttu-id="fa587-132">그렇지 않은 경우 설치 중에 새 기본 이름이 사용되도록 허용하면 Multi-Factor Authentication 서버에서 사용자 포털 아이콘을 클릭하고 설정 탭에서 사용자 포털 URL을 업데이트해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-132">Otherwise, if you allow the install to use the new default name, you should click the User Portal icon in the Multi-Factor Authentication Server and update the User Portal URL on the Settings tab.</span></span>

4. <span data-ttu-id="fa587-133">사용자 포털 및/또는 모바일 앱 웹 서비스가 이전에 PhoneFactor Agent와 다른 서버에 설치된 경우:</span><span class="sxs-lookup"><span data-stu-id="fa587-133">If the User Portal and/or Mobile App Web Service was previously installed on a different server from the PhoneFactor Agent:</span></span>

  1. <span data-ttu-id="fa587-134">설치 위치(예: C:\Program Files\PhoneFactor)로 이동한 후에 하나 이상의 설치 관리자를 다른 서버로 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-134">Go to the install location (for example, C:\Program Files\PhoneFactor) and copy one or more installers to the other server.</span></span> <span data-ttu-id="fa587-135">사용자 포털 및 모바일 앱 웹 서비스에 대해 32비트 및 64비트의 설치 관리자가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-135">There are 32-bit and 64-bit installers for both the User Portal and Mobile App Web Service.</span></span> <span data-ttu-id="fa587-136">이러한 설치 관리자는 MultiFactorAuthenticationUserPortalSetupXX.msi 및 MultiFactorAuthenticationMobileAppWebServiceSetupXX.msi입니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-136">They are called MultiFactorAuthenticationUserPortalSetupXX.msi and MultiFactorAuthenticationMobileAppWebServiceSetupXX.msi.</span></span>

  2. <span data-ttu-id="fa587-137">웹 서버에 사용자 포털을 설치하려면 관리자 권한으로 명령 프롬프트를 열고 MultiFactorAuthenticationUserPortalSetupXX.msi를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-137">To install the User Portal on the web server, open a command prompt as an administrator and run MultiFactorAuthenticationUserPortalSetupXX.msi.</span></span>

    <span data-ttu-id="fa587-138">기본 가상 디렉터리 이름은 이제 **PhoneFactor** 대신 **MultiFactorAuth**가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-138">The default virtual directory name is now **MultiFactorAuth** instead of **PhoneFactor**.</span></span> <span data-ttu-id="fa587-139">이전 이름을 사용하려는 경우 설치하는 동안 가상 디렉터리의 이름을 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-139">If you want to use the previous name, you must change the name of the virtual directory during installation.</span></span> <span data-ttu-id="fa587-140">그렇지 않은 경우 설치 중에 새 기본 이름이 사용되도록 허용하면 Multi-Factor Authentication 서버에서 사용자 포털 아이콘을 클릭하고 설정 탭에서 사용자 포털 URL을 업데이트해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-140">Otherwise, if you allow the install to use the new default name, you should click the User Portal icon in the Multi-Factor Authentication Server and update the User Portal URL on the Settings tab.</span></span> <span data-ttu-id="fa587-141">기존 사용자에게 새 URL을 알려 주어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-141">Existing users need to be informed of the new URL.</span></span>

  3. <span data-ttu-id="fa587-142">사용자 포털 설치 위치(예: C:\inetpub\wwwroot\MultiFactorAuth)로 이동한 후 web.config 파일을 편집합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-142">Go to the User Portal install location (for example, C:\inetpub\wwwroot\MultiFactorAuth) and edit the web.config file.</span></span> <span data-ttu-id="fa587-143">새 web.config 파일로 업그레이드하기 전에 백업했던 원본 web.config 파일에서 appSettings 및 applicationSettings 섹션의 값을 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-143">Copy the values in the appSettings and applicationSettings sections from your original web.config file that was backed up before the upgrade into the new web.config file.</span></span> <span data-ttu-id="fa587-144">웹 서비스 SDK를 설치할 때 새 기본 가상 디렉터리 이름을 유지한 경우 applicationSettings 섹션의 URL이 올바른 위치를 가리키도록 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-144">If the new default virtual directory name was kept when installing the Web Service SDK, change the URL in the applicationSettings section to point to the correct location.</span></span> <span data-ttu-id="fa587-145">이전 web.config 파일에서 기타 기본값을 변경한 경우 새 web.config 파일에 같은 변경 내용을 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-145">If any other defaults were changed in the previous web.config file, apply those same changes to the new web.config file.</span></span>

  4. <span data-ttu-id="fa587-146">웹 서버에 모바일 앱 웹 서비스를 설치하려면 관리자 권한으로 명령 프롬프트를 열고 MultiFactorAuthenticationMobileAppWebServiceSetupXX.msi를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-146">To install the Mobile App Web Service on the web server, open a command prompt as an administrator and run the MultiFactorAuthenticationMobileAppWebServiceSetupXX.msi.</span></span>

    <span data-ttu-id="fa587-147">기본 가상 디렉터리 이름은 이제 **PhoneFactorPhoneAppWebService** 대신 **MultiFactorAuthMobileAppWebService**가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-147">The default virtual directory name is now **MultiFactorAuthMobileAppWebService** instead of **PhoneFactorPhoneAppWebService**.</span></span> <span data-ttu-id="fa587-148">이전 이름을 사용하려는 경우 설치하는 동안 가상 디렉터리의 이름을 변경해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-148">If you want to use the previous name, you must change the name of the virtual directory during installation.</span></span> <span data-ttu-id="fa587-149">최종 사용자가 자신의 모바일 장치에서 좀 더 쉽게 입력할 수 있도록 짧은 이름을 선택하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-149">You may want to choose a shorter name to make it easy for end users to type in on their mobile devices.</span></span> <span data-ttu-id="fa587-150">그렇지 않은 경우 설치 중에 새 기본 이름이 사용되도록 허용하면 Multi-Factor Authentication 서버에서 모바일 앱 아이콘을 클릭하고 모바일 앱 웹 서비스 URL을 업데이트해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-150">Otherwise, if you allow the install to use the new default name, you should click the Mobile App icon in the Multi-Factor Authentication Server and update the Mobile App Web Service URL.</span></span>

  5. <span data-ttu-id="fa587-151">모바일 앱 웹 서비스 설치 위치(예: C:\inetpub\wwwroot\MultiFactorAuthMobileAppWebService)로 이동한 후 web.config 파일을 편집합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-151">Go to the Mobile App Web Service install location (for example, C:\inetpub\wwwroot\MultiFactorAuthMobileAppWebService) and edit the web.config file.</span></span> <span data-ttu-id="fa587-152">새 web.config 파일로 업그레이드하기 전에 백업했던 원본 web.config 파일에서 appSettings 및 applicationSettings 섹션의 값을 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-152">Copy the values in the appSettings and applicationSettings sections from your original web.config file that was backed up before the upgrade into the new web.config file.</span></span> <span data-ttu-id="fa587-153">웹 서비스 SDK를 설치할 때 새 기본 가상 디렉터리 이름을 유지한 경우 applicationSettings 섹션의 URL이 올바른 위치를 가리키도록 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-153">If the new default virtual directory name was kept when installing the Web Service SDK, change the URL in the applicationSettings section to point to the correct location.</span></span> <span data-ttu-id="fa587-154">이전 web.config 파일에서 기타 기본값을 변경한 경우 새 web.config 파일에 같은 변경 내용을 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-154">If any other defaults were changed in the previous web.config file, apply those same changes to the new web.config file.</span></span>

## <a name="next-steps"></a><span data-ttu-id="fa587-155">다음 단계</span><span class="sxs-lookup"><span data-stu-id="fa587-155">Next steps</span></span>

- <span data-ttu-id="fa587-156">Azure Multi-Factor Authentication 서버의 [사용자 포털을 설치](multi-factor-authentication-get-started-portal.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-156">[Install the users portal](multi-factor-authentication-get-started-portal.md) for the Azure Multi-Factor Authentication Server.</span></span>

- <span data-ttu-id="fa587-157">응용 프로그램에 대한 [Windows 인증](multi-factor-authentication-get-started-server-windows.md)을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="fa587-157">[Configure Windows Authentication](multi-factor-authentication-get-started-server-windows.md) for your applications.</span></span> 
