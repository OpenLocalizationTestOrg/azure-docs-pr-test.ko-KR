---
title: "Windows server에서 AD fs 서버 aaaMFA | Microsoft Docs"
description: "이 문서에서는 Azure Multi-factor Authentication 및 2016 및 Windows Server 2012 r 2에서 AD FS를 사용 하 여 tooget 시작 하는 방법을 설명 합니다."
services: multi-factor-authentication
documentationcenter: 
author: kgremban
manager: femila
editor: yossib
ms.assetid: 57208068-1e55-45b6-840f-fdcd13723074
ms.service: multi-factor-authentication
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 03/29/2017
ms.author: kgremban
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 656785abcc63a020add765a86670b488a3b84b51
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="configure-azure-multi-factor-authentication-server-toowork-with-ad-fs-in-windows-server"></a><span data-ttu-id="75620-103">Windows server에서 AD FS를 사용 하 여 Azure Multi-factor Authentication 서버 toowork 구성</span><span class="sxs-lookup"><span data-stu-id="75620-103">Configure Azure Multi-Factor Authentication Server toowork with AD FS in Windows Server</span></span>
<span data-ttu-id="75620-104">Active Directory Federation Services (AD FS)을 사용 하 고 toosecure 클라우드 또는 온-프레미스 리소스를 사용할 경우 AD FS와 함께 Azure Multi-factor Authentication 서버 toowork를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-104">If you use Active Directory Federation Services (AD FS) and want toosecure cloud or on-premises resources, you can configure Azure Multi-Factor Authentication Server toowork with AD FS.</span></span> <span data-ttu-id="75620-105">이 구성은 높은 값의 끝점에 대해 2단계 인증을 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-105">This configuration triggers two-step verification for high-value endpoints.</span></span>

<span data-ttu-id="75620-106">이 문서에서는 Windows Server 2012 R2 또는 Windows Server 2016에서 AD FS와 함께 Azure Multi-Factor Authentication 서버를 사용하는 방법을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-106">In this article, we discuss using Azure Multi-Factor Authentication Server with AD FS in Windows Server 2012 R2 or Windows Server 2016.</span></span> <span data-ttu-id="75620-107">자세한 내용은 읽는 방법에 대 한 너무[AD fs 2.0 Azure Multi-factor Authentication 서버를 사용 하 여 클라우드 및 온-프레미스 리소스 보호](multi-factor-authentication-get-started-adfs-adfs2.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-107">For more information, read about how too[secure cloud and on-premises resources by using Azure Multi-Factor Authentication Server with AD FS 2.0](multi-factor-authentication-get-started-adfs-adfs2.md).</span></span>

## <a name="secure-windows-server-ad-fs-with-azure-multi-factor-authentication-server"></a><span data-ttu-id="75620-108">Azure Multi-Factor Authentication 서버를 사용하여 Windows Server AD FS 보안 유지</span><span class="sxs-lookup"><span data-stu-id="75620-108">Secure Windows Server AD FS with Azure Multi-Factor Authentication Server</span></span>
<span data-ttu-id="75620-109">Azure Multi-factor Authentication 서버를 설치할 때 다음 옵션 hello 있습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-109">When you install Azure Multi-Factor Authentication Server, you have hello following options:</span></span>

* <span data-ttu-id="75620-110">Hello에 Azure Multi-factor Authentication 서버를 로컬로 설치 AD FS와 동일한 서버</span><span class="sxs-lookup"><span data-stu-id="75620-110">Install Azure Multi-Factor Authentication Server locally on hello same server as AD FS</span></span>
* <span data-ttu-id="75620-111">Hello AD FS 서버에서 로컬로 hello Azure Multi-factor Authentication 어댑터를 설치 하 고 다른 컴퓨터에 Multi-factor Authentication 서버 설치</span><span class="sxs-lookup"><span data-stu-id="75620-111">Install hello Azure Multi-Factor Authentication adapter locally on hello AD FS server, and then install Multi-Factor Authentication Server on a different computer</span></span>

<span data-ttu-id="75620-112">시작 하기 전에 다음 정보는 hello 고려해 야 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-112">Before you begin, be aware of hello following information:</span></span>

* <span data-ttu-id="75620-113">AD FS 서버에 대해 필요한 tooinstall Azure Multi-factor Authentication 서버 않습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-113">You are not required tooinstall Azure Multi-Factor Authentication Server on your AD FS server.</span></span> <span data-ttu-id="75620-114">그러나 AD FS를 실행 하는 Windows Server 2016 또는 Windows Server 2012 r 2에서 AD FS에 대 한 hello Multi-factor Authentication 어댑터를 설치 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-114">However, you must install hello Multi-Factor Authentication adapter for AD FS on a Windows Server 2012 R2 or Windows Server 2016 that is running AD FS.</span></span> <span data-ttu-id="75620-115">지원 되는 버전 이며 AD FS 페더레이션 서버에서 개별적으로 hello AD FS 어댑터를 설치 하는 경우 다른 컴퓨터에 hello 서버를 설치할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-115">You can install hello server on a different computer if it is a supported version and you install hello AD FS adapter separately on your AD FS federation server.</span></span> <span data-ttu-id="75620-116">Hello 참조 프로시저 toolearn 다음 방법을 tooinstall hello 어댑터 별도로 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-116">See hello following procedures toolearn how tooinstall hello adapter separately.</span></span>
* <span data-ttu-id="75620-117">조직에는 문자 메시지 또는 모바일 앱 확인 방법을 사용 하는, 하는 경우 회사 설정에 정의 된 hello 문자열 자리 표시자를 포함 하는 <$*i o n _*$> 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-117">If your organization is using text message or mobile app verification methods, hello strings defined in Company Settings contain a placeholder, <$*application_name*$>.</span></span> <span data-ttu-id="75620-118">MFA 서버 v7.1에서 이 자리 표시자를 대체하는 응용 프로그램 이름을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-118">In MFA Server v7.1, you can provide an application name that replaces this placeholder.</span></span> <span data-ttu-id="75620-119">V7.0에서 또는 이전 hello AD FS 어댑터를 사용 하 여이 자리 표시자가 자동으로 대체 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-119">In v7.0 or older, this placeholder is not automatically replaced when you use hello AD FS adapter.</span></span> <span data-ttu-id="75620-120">이러한 이전 버전에 대 한 AD FS 보안을 유지 하면 hello 자리 표시자 hello 적절 한 문자열에서 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-120">For those older versions, remove hello placeholder from hello appropriate strings when you secure AD FS.</span></span>
* <span data-ttu-id="75620-121">toosign를 사용 하는 hello 계정에는 Active Directory 서비스에 사용자 권한 toocreate 보안 그룹 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-121">hello account that you use toosign in must have user rights toocreate security groups in your Active Directory service.</span></span>
* <span data-ttu-id="75620-122">hello Multi-factor Authentication AD FS 어댑터 설치 마법사는 라는 인스턴스의 Active Directory에서 PhoneFactor Admins 보안 그룹을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="75620-122">hello Multi-Factor Authentication AD FS adapter installation wizard creates a security group called PhoneFactor Admins in your instance of Active Directory.</span></span> <span data-ttu-id="75620-123">다음 페더레이션 서비스 toothis 그룹의 hello AD FS 서비스 계정을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-123">It then adds hello AD FS service account of your federation service toothis group.</span></span> <span data-ttu-id="75620-124">도메인 컨트롤러에서 PhoneFactor Admins 그룹이 실제로 생성 되는 hello 및 hello AD FS 서비스 계정을이 그룹의 구성원 인지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-124">Verify on your domain controller that hello PhoneFactor Admins group is indeed created and that hello AD FS service account is a member of this group.</span></span> <span data-ttu-id="75620-125">필요한 경우 수동으로 도메인 컨트롤러에 hello AD FS 서비스 계정 toohello PhoneFactor Admins 그룹을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-125">If necessary, manually add hello AD FS service account toohello PhoneFactor Admins group on your domain controller.</span></span>
* <span data-ttu-id="75620-126">에 대해 알아보세요 hello 사용자 포털을 사용 하 여 hello 웹 서비스 SDK를 설치 하는 방법에 대 한 내용은 [Azure Multi-factor Authentication 서버에 대 한 hello 사용자 포털을 배포 합니다.](multi-factor-authentication-get-started-portal.md)</span><span class="sxs-lookup"><span data-stu-id="75620-126">For information about installing hello Web Service SDK with hello user portal, read about [deploying hello user portal for Azure Multi-Factor Authentication Server.](multi-factor-authentication-get-started-portal.md)</span></span>

### <a name="install-azure-multi-factor-authentication-server-locally-on-hello-ad-fs-server"></a><span data-ttu-id="75620-127">Hello AD FS 서버에서 Azure Multi-factor Authentication 서버를 로컬로 설치</span><span class="sxs-lookup"><span data-stu-id="75620-127">Install Azure Multi-Factor Authentication Server locally on hello AD FS server</span></span>
1. <span data-ttu-id="75620-128">AD FS 서버에 Azure Multi-Factor Authentication 서버를 다운로드하여 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-128">Download and install Azure Multi-Factor Authentication Server on your AD FS server.</span></span> <span data-ttu-id="75620-129">설치에 대한 내용은 [Azure Multi-factor Authentication 서버로 시작](multi-factor-authentication-get-started-server.md)을 읽어보세요.</span><span class="sxs-lookup"><span data-stu-id="75620-129">For installation information, read about [getting started with Azure Multi-Factor Authentication Server](multi-factor-authentication-get-started-server.md).</span></span>
2. <span data-ttu-id="75620-130">Hello Azure Multi-factor Authentication 서버 관리 콘솔에서 클릭 hello **AD FS** 아이콘입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-130">In hello Azure Multi-Factor Authentication Server management console, click hello **AD FS** icon.</span></span> <span data-ttu-id="75620-131">Hello 옵션을 선택 **사용자 등록 허용** 및 **있도록 tooselect 메서드**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-131">Select hello options **Allow user enrollment** and **Allow users tooselect method**.</span></span>
3. <span data-ttu-id="75620-132">원하는 toospecify 조직에 대 한 추가 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-132">Select any additional options you'd like toospecify for your organization.</span></span>
4. <span data-ttu-id="75620-133">**AD FS 어댑터 설치**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-133">Click **Install AD FS Adapter**.</span></span>
   
   <span data-ttu-id="75620-134"><center>![클라우드](./media/multi-factor-authentication-get-started-adfs-w2k12/server.png)</center></span><span class="sxs-lookup"><span data-stu-id="75620-134"><center>![Cloud](./media/multi-factor-authentication-get-started-adfs-w2k12/server.png)</center></span></span>

5. <span data-ttu-id="75620-135">Hello Active Directory 창이 표시 되는 경우 다음 두 가지 즉.</span><span class="sxs-lookup"><span data-stu-id="75620-135">If hello Active Directory window is displayed, that means two things.</span></span> <span data-ttu-id="75620-136">컴퓨터가 도메인에 가입된 tooa 및 hello AD FS 어댑터와 hello Multi-factor Authentication 서비스 간에 보안 통신에 대 한 hello Active Directory 구성이 완료 되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-136">Your computer is joined tooa domain, and hello Active Directory configuration for securing communication between hello AD FS adapter and hello Multi-Factor Authentication service is incomplete.</span></span> <span data-ttu-id="75620-137">클릭 **다음** tooautomatically이이 구성을 완료 하거나 hello 선택 **자동 Active Directory 구성을 건너뛰고 구성 설정을 수동으로** 확인란 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-137">Click **Next** tooautomatically complete this configuration, or select hello **Skip automatic Active Directory configuration and configure settings manually** check box.</span></span> <span data-ttu-id="75620-138">**다음**을 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="75620-138">Click **Next**.</span></span>
6. <span data-ttu-id="75620-139">로컬 그룹 windows hello 표시 되 면 다음 두 가지 즉.</span><span class="sxs-lookup"><span data-stu-id="75620-139">If hello Local Group windows is displayed, that means two things.</span></span> <span data-ttu-id="75620-140">컴퓨터는 조인 된 tooa 도메인 및 hello AD FS 어댑터와 hello Multi-factor Authentication 서비스 간에 보안 통신에 대 한 hello 로컬 그룹 구성이 완료 되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-140">Your computer is not joined tooa domain, and hello local group configuration for securing communication between hello AD FS adapter and hello Multi-Factor Authentication service is incomplete.</span></span> <span data-ttu-id="75620-141">클릭 **다음** tooautomatically이이 구성을 완료 하거나 hello 선택 **자동 로컬 그룹 구성을 건너뛰고 구성 설정을 수동으로** 확인란 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-141">Click **Next** tooautomatically complete this configuration, or select hello **Skip automatic Local Group configuration and configure settings manually** check box.</span></span> <span data-ttu-id="75620-142">**다음**을 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="75620-142">Click **Next**.</span></span>
7. <span data-ttu-id="75620-143">Hello 설치 마법사에서 **다음**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-143">In hello installation wizard, click **Next**.</span></span> <span data-ttu-id="75620-144">Azure Multi-factor Authentication 서버 hello PhoneFactor Admins 그룹을 만들고 hello AD FS 서비스 계정 toohello PhoneFactor Admins 그룹을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-144">Azure Multi-Factor Authentication Server creates hello PhoneFactor Admins group and adds hello AD FS service account toohello PhoneFactor Admins group.</span></span>
   <span data-ttu-id="75620-145"><center>![클라우드](./media/multi-factor-authentication-get-started-adfs-w2k12/adapter.png)</center></span><span class="sxs-lookup"><span data-stu-id="75620-145"><center>![Cloud](./media/multi-factor-authentication-get-started-adfs-w2k12/adapter.png)</center></span></span>
8. <span data-ttu-id="75620-146">Hello에 **설치 관리자 시작** 페이지 **다음**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-146">On hello **Launch Installer** page, click **Next**.</span></span>
9. <span data-ttu-id="75620-147">Hello Multi-factor Authentication AD FS 어댑터 설치 관리자에서 클릭 **다음**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-147">In hello Multi-Factor Authentication AD FS adapter installer, click **Next**.</span></span>
10. <span data-ttu-id="75620-148">클릭 **닫기** hello 설치가 완료 되는 경우.</span><span class="sxs-lookup"><span data-stu-id="75620-148">Click **Close** when hello installation is finished.</span></span>
11. <span data-ttu-id="75620-149">Hello 어댑터 설치가 완료 된 후 AD FS와 함께 등록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-149">When hello adapter has been installed, you must register it with AD FS.</span></span> <span data-ttu-id="75620-150">Windows PowerShell을 열고 다음 명령을 hello를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-150">Open Windows PowerShell and run hello following command:</span></span><br><span data-ttu-id="75620-151">
    `C:\Program Files\Multi-Factor Authentication Server\Register-MultiFactorAuthenticationAdfsAdapter.ps1`
    <center>![클라우드](./media/multi-factor-authentication-get-started-adfs-w2k12/pshell.png)</center></span><span class="sxs-lookup"><span data-stu-id="75620-151">
`C:\Program Files\Multi-Factor Authentication Server\Register-MultiFactorAuthenticationAdfsAdapter.ps1`
<center>![Cloud](./media/multi-factor-authentication-get-started-adfs-w2k12/pshell.png)</center></span></span>
12. <span data-ttu-id="75620-152">toouse 새로 등록 된 어댑터를 AD FS에서 사용 되는 hello 전역 인증 정책 편집 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-152">toouse your newly registered adapter, edit hello global authentication policy in AD FS.</span></span> <span data-ttu-id="75620-153">Hello AD FS 관리 콘솔에서 toohello 이동 **인증 정책** 노드.</span><span class="sxs-lookup"><span data-stu-id="75620-153">In hello AD FS management console, go toohello **Authentication Policies** node.</span></span> <span data-ttu-id="75620-154">Hello에 **multi-factor Authentication** 섹션에서 hello **편집** 다음 toohello 연결 **전역 설정** 섹션.</span><span class="sxs-lookup"><span data-stu-id="75620-154">In hello **Multi-factor Authentication** section, click hello **Edit** link next toohello **Global Settings** section.</span></span> <span data-ttu-id="75620-155">Hello에 **전역 인증 정책 편집** 창에서 **Multi-factor Authentication** 클릭 한 다음 추가 인증 방법으로 **확인**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-155">In hello **Edit Global Authentication Policy** window, select **Multi-Factor Authentication** as an additional authentication method, and then click **OK**.</span></span> <span data-ttu-id="75620-156">hello 어댑터는 WindowsAzureMultiFactorAuthentication으로 등록 됩니다.</span><span class="sxs-lookup"><span data-stu-id="75620-156">hello adapter is registered as WindowsAzureMultiFactorAuthentication.</span></span> <span data-ttu-id="75620-157">Hello 등록 tootake 효과 대 한 hello AD FS 서비스를 다시 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-157">Restart hello AD FS service for hello registration tootake effect.</span></span>

<span data-ttu-id="75620-158"><center>![클라우드](./media/multi-factor-authentication-get-started-adfs-w2k12/global.png)</center></span><span class="sxs-lookup"><span data-stu-id="75620-158"><center>![Cloud](./media/multi-factor-authentication-get-started-adfs-w2k12/global.png)</center></span></span>

<span data-ttu-id="75620-159">이 시점에서 AD fs를 사용 하는 추가 인증 공급자 toouse Multi-factor Authentication 서버를 toobe 설정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="75620-159">At this point, Multi-Factor Authentication Server is set up toobe an additional authentication provider toouse with AD FS.</span></span>

## <a name="install-a-standalone-instance-of-hello-ad-fs-adapter-by-using-hello-web-service-sdk"></a><span data-ttu-id="75620-160">Hello 웹 서비스 SDK를 사용 하 여 hello AD FS 어댑터의 독립 실행형 인스턴스를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-160">Install a standalone instance of hello AD FS adapter by using hello Web Service SDK</span></span>
1. <span data-ttu-id="75620-161">Multi-factor Authentication 서버를 실행 하는 hello 서버에 hello 웹 서비스 SDK를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-161">Install hello Web Service SDK on hello server that is running Multi-Factor Authentication Server.</span></span>
2. <span data-ttu-id="75620-162">Hello \program에서 파일을 복사 hello 다음-tooinstall hello AD FS 어댑터 하려는 Authentication Server 디렉터리 toohello 서버:</span><span class="sxs-lookup"><span data-stu-id="75620-162">Copy hello following files from hello \Program Files\Multi-Factor Authentication Server directory toohello server on which you plan tooinstall hello AD FS adapter:</span></span>
   * <span data-ttu-id="75620-163">MultiFactorAuthenticationAdfsAdapterSetup64.msi</span><span class="sxs-lookup"><span data-stu-id="75620-163">MultiFactorAuthenticationAdfsAdapterSetup64.msi</span></span>
   * <span data-ttu-id="75620-164">Register-MultiFactorAuthenticationAdfsAdapter.ps1</span><span class="sxs-lookup"><span data-stu-id="75620-164">Register-MultiFactorAuthenticationAdfsAdapter.ps1</span></span>
   * <span data-ttu-id="75620-165">Unregister-MultiFactorAuthenticationAdfsAdapter.ps1</span><span class="sxs-lookup"><span data-stu-id="75620-165">Unregister-MultiFactorAuthenticationAdfsAdapter.ps1</span></span>
   * <span data-ttu-id="75620-166">MultiFactorAuthenticationAdfsAdapter.config</span><span class="sxs-lookup"><span data-stu-id="75620-166">MultiFactorAuthenticationAdfsAdapter.config</span></span>
3. <span data-ttu-id="75620-167">Hello MultiFactorAuthenticationAdfsAdapterSetup64.msi 설치 파일을 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-167">Run hello MultiFactorAuthenticationAdfsAdapterSetup64.msi installation file.</span></span>
4. <span data-ttu-id="75620-168">Hello Multi-factor Authentication AD FS 어댑터 설치 관리자에서 클릭 **다음** toostart hello 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-168">In hello Multi-Factor Authentication AD FS adapter installer, click **Next** toostart hello installation.</span></span>
5. <span data-ttu-id="75620-169">클릭 **닫기** hello 설치가 완료 되는 경우.</span><span class="sxs-lookup"><span data-stu-id="75620-169">Click **Close** when hello installation is finished.</span></span>

## <a name="edit-hello-multifactorauthenticationadfsadapterconfig-file"></a><span data-ttu-id="75620-170">Hello MultiFactorAuthenticationAdfsAdapter.config 파일 편집</span><span class="sxs-lookup"><span data-stu-id="75620-170">Edit hello MultiFactorAuthenticationAdfsAdapter.config file</span></span>
<span data-ttu-id="75620-171">이러한 단계 tooedit hello MultiFactorAuthenticationAdfsAdapter.config 파일을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-171">Follow these steps tooedit hello MultiFactorAuthenticationAdfsAdapter.config file:</span></span>

1. <span data-ttu-id="75620-172">집합 hello **UseWebServiceSdk** 노드 너무**true**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-172">Set hello **UseWebServiceSdk** node too**true**.</span></span>  
2. <span data-ttu-id="75620-173">에 대 한 hello 값 설정 **WebServiceSdkUrl** hello Multi-factor Authentication 웹 서비스 SDK의 toohello URL입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-173">Set hello value for **WebServiceSdkUrl** toohello URL of hello Multi-Factor Authentication Web Service SDK.</span></span> <span data-ttu-id="75620-174">예를 들어: *https://contoso.com/&lt;certificatename&gt;/MultiFactorAuthWebServiceSdk/PfWsSdk.asmx*여기서 *certificatename* hello 인증서 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-174">For example:  *https://contoso.com/&lt;certificatename&gt;/MultiFactorAuthWebServiceSdk/PfWsSdk.asmx*, Where *certificatename* is hello name of your certificate.</span></span>  
3. <span data-ttu-id="75620-175">추가 하 여 hello Register-multifactorauthenticationadfsadapter.ps1 스크립트를 편집 *-ConfigurationFilePath &lt;경로&gt;*  hello toohello 끝 `Register-AdfsAuthenticationProvider` 명령, 여기서  *&lt;경로&gt;*  hello toohello MultiFactorAuthenticationAdfsAdapter.config 파일 전체 경로입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-175">Edit hello Register-MultiFactorAuthenticationAdfsAdapter.ps1 script by adding *-ConfigurationFilePath &lt;path&gt;* toohello end of hello `Register-AdfsAuthenticationProvider` command, where *&lt;path&gt;* is hello full path toohello MultiFactorAuthenticationAdfsAdapter.config file.</span></span>

### <a name="configure-hello-web-service-sdk-with-a-username-and-password"></a><span data-ttu-id="75620-176">사용자 이름 및 암호를 사용 하 여 웹 서비스 SDK hello 구성</span><span class="sxs-lookup"><span data-stu-id="75620-176">Configure hello Web Service SDK with a username and password</span></span>
<span data-ttu-id="75620-177">Hello 웹 서비스 SDK를 구성 하기 위한 방법은 두 가지가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-177">There are two options for configuring hello Web Service SDK.</span></span> <span data-ttu-id="75620-178">hello 먼저 사용자 이름 및 암호를 클라이언트 인증서를 사용 하는 hello 둘째는.</span><span class="sxs-lookup"><span data-stu-id="75620-178">hello first is with a username and password, hello second is with a client certificate.</span></span> <span data-ttu-id="75620-179">Hello 첫 번째 옵션에 대해 다음이 단계를 수행 하거나 두 번째 hello에 대 한 바로 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-179">Follow these steps for hello first option, or skip ahead for hello second.</span></span>  

1. <span data-ttu-id="75620-180">에 대 한 hello 값 설정 **WebServiceSdkUsername** hello PhoneFactor Admins 보안 그룹의 멤버인 tooan 계정.</span><span class="sxs-lookup"><span data-stu-id="75620-180">Set hello value for **WebServiceSdkUsername** tooan account that is a member of hello PhoneFactor Admins security group.</span></span> <span data-ttu-id="75620-181">사용 하 여 hello &lt;도메인&gt;&#92;&lt; 사용자 이름&gt; 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-181">Use hello &lt;domain&gt;&#92;&lt;user name&gt; format.</span></span>  
2. <span data-ttu-id="75620-182">에 대 한 hello 값 설정 **WebServiceSdkPassword** toohello 적절 한 계정 암호입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-182">Set hello value for **WebServiceSdkPassword** toohello appropriate account password.</span></span>

### <a name="configure-hello-web-service-sdk-with-a-client-certificate"></a><span data-ttu-id="75620-183">클라이언트 인증서를 사용 하 여 웹 서비스 SDK hello 구성</span><span class="sxs-lookup"><span data-stu-id="75620-183">Configure hello Web Service SDK with a client certificate</span></span>
<span data-ttu-id="75620-184">Toouse 사용자 이름 및 암호를 않으려는 경우 클라이언트 인증서를 사용 하는 이러한 단계 tooconfigure hello 웹 서비스 SDK를 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="75620-184">If you don't want toouse a username and password, follow these steps tooconfigure hello Web Service SDK with a client certificate.</span></span>

1. <span data-ttu-id="75620-185">Hello 웹 서비스 SDK를 실행 하는 hello 서버에 대 한 인증 기관에서 클라이언트 인증서를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="75620-185">Obtain a client certificate from a certificate authority for hello server that is running hello Web Service SDK.</span></span> <span data-ttu-id="75620-186">너무 방법에 대해 알아봅니다[클라이언트 인증서를 얻은](https://technet.microsoft.com/library/cc770328.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-186">Learn how too[obtain client certificates](https://technet.microsoft.com/library/cc770328.aspx).</span></span>  
2. <span data-ttu-id="75620-187">가져오기 hello 클라이언트 인증서 toohello 로컬 컴퓨터 개인 인증서 저장소에 hello 웹 서비스 SDK를 실행 하는 hello 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-187">Import hello client certificate toohello local computer personal certificate store on hello server that is running hello Web Service SDK.</span></span> <span data-ttu-id="75620-188">해당 hello 인증 기관의 공용 인증서가 신뢰할 수 있는 루트 인증서 인증서 저장소에 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-188">Make sure that hello certificate authority's public certificate is in Trusted Root Certificates certificate store.</span></span>  
3. <span data-ttu-id="75620-189">Hello 클라이언트 인증서 tooa.pfx 파일의 hello 공개 및 개인 키를 내보냅니다.</span><span class="sxs-lookup"><span data-stu-id="75620-189">Export hello public and private keys of hello client certificate tooa .pfx file.</span></span>  
4. <span data-ttu-id="75620-190">Hello Base64 형식 tooa.cer 파일에서 공개 키를 내보냅니다.</span><span class="sxs-lookup"><span data-stu-id="75620-190">Export hello public key in Base64 format tooa .cer file.</span></span>  
5. <span data-ttu-id="75620-191">서버 관리자에서 해당 hello 웹 서버 (IIS) \Web Server\Security\IIS 클라이언트 인증서 매핑 인증 기능이 설치 된 것을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-191">In Server Manager, verify that hello Web Server (IIS)\Web Server\Security\IIS Client Certificate Mapping Authentication feature is installed.</span></span> <span data-ttu-id="75620-192">이 설치 되어 있지 않으면 선택 **역할 및 기능 추가** tooadd이이 기능입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-192">If it is not installed, select **Add Roles and Features** tooadd this feature.</span></span>  
6. <span data-ttu-id="75620-193">IIS 관리자에서 두 번 클릭 **구성 편집기** hello 웹 서비스 SDK 가상 디렉터리를 포함 하는 hello 웹 사이트에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-193">In IIS Manager, double-click **Configuration Editor** in hello website that contains hello Web Service SDK virtual directory.</span></span> <span data-ttu-id="75620-194">Hello 가상 디렉터리가 아닌 중요 tooselect hello 웹 사이트입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-194">It is important tooselect hello website, not hello virtual directory.</span></span>  
7. <span data-ttu-id="75620-195">Toohello 이동 **system.webServer/security/authentication/iisClientCertificateMappingAuthentication** 섹션.</span><span class="sxs-lookup"><span data-stu-id="75620-195">Go toohello **system.webServer/security/authentication/iisClientCertificateMappingAuthentication** section.</span></span>  
8. <span data-ttu-id="75620-196">Set도 활성화**true**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-196">Set enabled too**true**.</span></span>  
9. <span data-ttu-id="75620-197">OneToOneCertificateMappingsEnabled를 너무 설정**true**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-197">Set oneToOneCertificateMappingsEnabled too**true**.</span></span>  
10. <span data-ttu-id="75620-198">Hello 클릭 **...**  다음 toooneToOneMappings 단추를 선택한 다음 hello 클릭 **추가** 링크 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-198">Click hello **...** button next toooneToOneMappings, and then click hello **Add** link.</span></span>  
11. <span data-ttu-id="75620-199">앞에서 내보낸 hello Base64.cer 파일을 엽니다.</span><span class="sxs-lookup"><span data-stu-id="75620-199">Open hello Base64 .cer file you exported earlier.</span></span> <span data-ttu-id="75620-200">*-----BEGIN CERTIFICATE-----*, *-----END CERTIFICATE-----* 및 줄바꿈을 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-200">Remove *-----BEGIN CERTIFICATE-----*, *-----END CERTIFICATE-----*, and any line breaks.</span></span> <span data-ttu-id="75620-201">Hello 결과 문자열을 복사 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-201">Copy hello resulting string.</span></span>  
12. <span data-ttu-id="75620-202">집합 인증서 toohello hello 앞 단계에서에서 복사한 문자열입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-202">Set certificate toohello string copied in hello preceding step.</span></span>  
13. <span data-ttu-id="75620-203">Set도 활성화**true**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-203">Set enabled too**true**.</span></span>  
14. <span data-ttu-id="75620-204">Hello PhoneFactor Admins 보안 그룹의 구성원 인 사용자 이름 tooan 계정을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-204">Set userName tooan account that is a member of hello PhoneFactor Admins security group.</span></span> <span data-ttu-id="75620-205">사용 하 여 hello &lt;도메인&gt;&#92;&lt; 사용자 이름&gt; 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-205">Use hello &lt;domain&gt;&#92;&lt;user name&gt; format.</span></span>  
15. <span data-ttu-id="75620-206">Hello 암호 toohello 적절 한 계정 암호를 설정 하 고 구성 편집기를 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-206">Set hello password toohello appropriate account password, and then close Configuration Editor.</span></span>  
16. <span data-ttu-id="75620-207">Hello 클릭 **적용** 링크 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-207">Click hello **Apply** link.</span></span>  
17. <span data-ttu-id="75620-208">Hello 웹 서비스 SDK 가상 디렉터리를 두 번 클릭 **인증**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-208">In hello Web Service SDK virtual directory, double-click **Authentication**.</span></span>  
18. <span data-ttu-id="75620-209">ASP.NET 가장 및 기본 인증을 너무 설정 되어 있는지 확인**Enabled**, 다른 모든 항목이 너무 설정 되 고**비활성화**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-209">Verify that ASP.NET Impersonation and Basic Authentication are set too**Enabled**, and that all other items are set too**Disabled**.</span></span>  
19. <span data-ttu-id="75620-210">Hello 웹 서비스 SDK 가상 디렉터리를 두 번 클릭 **SSL 설정**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-210">In hello Web Service SDK virtual directory, double-click **SSL Settings**.</span></span>  
20. <span data-ttu-id="75620-211">클라이언트 인증서를 너무 설정**Accept**, 클릭 하 고 **적용**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-211">Set Client Certificates too**Accept**, and then click **Apply**.</span></span>  
21. <span data-ttu-id="75620-212">이전 버전의 toohello 서버 hello AD FS 어댑터를 실행 하는 내보낸 hello.pfx 파일을 복사 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-212">Copy hello .pfx file you exported earlier toohello server that is running hello AD FS adapter.</span></span>  
22. <span data-ttu-id="75620-213">Hello.pfx 파일 toohello 로컬 컴퓨터 개인 인증서 저장소를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="75620-213">Import hello .pfx file toohello local computer personal certificate store.</span></span>  
23. <span data-ttu-id="75620-214">마우스 오른쪽 단추로 클릭 하 고 선택 **개인 키 관리**, 및 다음 grant 읽기 액세스 toohello 계정 toosign toohello AD FS 서비스에서 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-214">Right-click and select **Manage Private Keys**, and then grant read access toohello account you used toosign in toohello AD FS service.</span></span>  
24. <span data-ttu-id="75620-215">Hello 클라이언트 인증서 및 복사 hello 지문을 hello에서 열고 **세부 정보** 탭 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-215">Open hello client certificate and copy hello thumbprint from hello **Details** tab.</span></span>  
25. <span data-ttu-id="75620-216">Hello MultiFactorAuthenticationAdfsAdapter.config 파일에서 설정 **WebServiceSdkCertificateThumbprint** toohello 문자열 hello 이전 단계에서 복사 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-216">In hello MultiFactorAuthenticationAdfsAdapter.config file, set **WebServiceSdkCertificateThumbprint** toohello string copied in hello previous step.</span></span>  

<span data-ttu-id="75620-217">마지막으로, tooregister hello 어댑터 hello \program 실행-PowerShell에서 단계 Authentication Server\register-multifactorauthenticationadfsadapter.ps1 스크립트입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-217">Finally, tooregister hello adapter, run hello \Program Files\Multi-Factor Authentication Server\Register-MultiFactorAuthenticationAdfsAdapter.ps1 script in PowerShell.</span></span> <span data-ttu-id="75620-218">hello 어댑터는 WindowsAzureMultiFactorAuthentication으로 등록 됩니다.</span><span class="sxs-lookup"><span data-stu-id="75620-218">hello adapter is registered as WindowsAzureMultiFactorAuthentication.</span></span> <span data-ttu-id="75620-219">Hello 등록 tootake 효과 대 한 hello AD FS 서비스를 다시 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-219">Restart hello AD FS service for hello registration tootake effect.</span></span>

## <a name="secure-azure-ad-resources-using-ad-fs"></a><span data-ttu-id="75620-220">AD FS를 사용하여 Azure AD 리소스 보안 유지</span><span class="sxs-lookup"><span data-stu-id="75620-220">Secure Azure AD resources using AD FS</span></span>
<span data-ttu-id="75620-221">toosecure 클라우드 리소스에 있도록를 설정 클레임 규칙 2 단계 인증을 성공적으로 수행할 때 Active Directory Federation Services hello multipleauthn 클레임을 내보냅니다.</span><span class="sxs-lookup"><span data-stu-id="75620-221">toosecure your cloud resource, set up a claims rule so that Active Directory Federation Services emits hello multipleauthn claim when a user performs two-step verification successfully.</span></span> <span data-ttu-id="75620-222">이 클레임 tooAzure AD에 전달 됩니다.</span><span class="sxs-lookup"><span data-stu-id="75620-222">This claim is passed on tooAzure AD.</span></span> <span data-ttu-id="75620-223">이 프로시저 toowalk hello 단계를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-223">Follow this procedure toowalk through hello steps:</span></span>

1. <span data-ttu-id="75620-224">AD FS 관리를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="75620-224">Open AD FS Management.</span></span>
2. <span data-ttu-id="75620-225">Hello 왼쪽에서 선택 **신뢰 당사자 트러스트**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-225">On hello left, select **Relying Party Trusts**.</span></span>
3. <span data-ttu-id="75620-226">**Microsoft Office 365 ID 플랫폼**을 마우스 오른쪽 단추로 클릭하고 **클레임 규칙 편집...**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-226">Right-click on **Microsoft Office 365 Identity Platform** and select **Edit Claim Rules…**</span></span>

   ![클라우드](./media/multi-factor-authentication-get-started-adfs-cloud/trustedip1.png)

4. <span data-ttu-id="75620-228">발급 변환 규칙에서 **규칙 추가**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-228">On Issuance Transform Rules, click **Add Rule.**</span></span>

   ![클라우드](./media/multi-factor-authentication-get-started-adfs-cloud/trustedip2.png)

5. <span data-ttu-id="75620-230">변환 클레임 규칙 추가 마법사 hello, 선택 **통과 또는 들어오는 클레임 필터링** 에서 드롭 다운 hello 및 **다음**합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-230">On hello Add Transform Claim Rule Wizard, select **Pass Through or Filter an Incoming Claim** from hello drop-down and click **Next**.</span></span>

   ![클라우드](./media/multi-factor-authentication-get-started-adfs-cloud/trustedip3.png)

6. <span data-ttu-id="75620-232">규칙의 이름을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-232">Give your rule a name.</span></span>
7. <span data-ttu-id="75620-233">선택 **인증 방법 참조** 들어오는 hello로 클레임 유형입니다.</span><span class="sxs-lookup"><span data-stu-id="75620-233">Select **Authentication Methods References** as hello Incoming claim type.</span></span>
8. <span data-ttu-id="75620-234">**모든 클레임 값 통과**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-234">Select **Pass through all claim values**.</span></span>
    <span data-ttu-id="75620-235">![변환 클레임 규칙 추가 마법사](./media/multi-factor-authentication-get-started-adfs-cloud/configurewizard.png)</span><span class="sxs-lookup"><span data-stu-id="75620-235">![Add Transform Claim Rule Wizard](./media/multi-factor-authentication-get-started-adfs-cloud/configurewizard.png)</span></span>
9. <span data-ttu-id="75620-236">**마침**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="75620-236">Click **Finish**.</span></span> <span data-ttu-id="75620-237">Hello AD FS 관리 콘솔을 닫습니다.</span><span class="sxs-lookup"><span data-stu-id="75620-237">Close hello AD FS Management console.</span></span>

## <a name="related-topics"></a><span data-ttu-id="75620-238">관련된 항목</span><span class="sxs-lookup"><span data-stu-id="75620-238">Related topics</span></span>
<span data-ttu-id="75620-239">문제 해결 도움말을 참조 hello [Azure Multi-factor Authentication Faq](multi-factor-authentication-faq.md)</span><span class="sxs-lookup"><span data-stu-id="75620-239">For troubleshooting help, see hello [Azure Multi-Factor Authentication FAQs](multi-factor-authentication-faq.md)</span></span>
