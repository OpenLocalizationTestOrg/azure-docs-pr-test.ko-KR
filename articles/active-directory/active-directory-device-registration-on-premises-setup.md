---
title: "Azure Active Directory 장치 등록을 사용하여 온-프레미스 조건부 액세스 설정 | Microsoft Docs"
description: "Windows Server 2012 R2에서 AD FS(Active Directory Federation Service)를 사용하여 온-프레미스 응용 프로그램에 대한 조건부 액세스를 사용하도록 설정하는 단계별 가이드입니다."
services: active-directory
documentationcenter: 
author: MarkusVi
manager: femila
editor: 
ms.assetid: 6ae9df8b-31fe-4d72-9181-cf50cfebbf05
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/31/2017
ms.author: markvi
ms.reviewer: jairoc
ms.openlocfilehash: 1a6f1c6566468188daa71939db8345280b7a529f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/03/2017
---
# <a name="setting-up-on-premises-conditional-access-by-using-azure-active-directory-device-registration"></a><span data-ttu-id="817e5-103">Azure Active Directory 장치 등록을 사용하여 온-프레미스 조건부 액세스 설정</span><span class="sxs-lookup"><span data-stu-id="817e5-103">Setting up on-premises conditional access by using Azure Active Directory device registration</span></span>
<span data-ttu-id="817e5-104">사용자가 Azure AD(Azure Active Directory) 장치 등록 서비스에 자신의 개인 장치를 작업 공간에 연결하도록 요구하면 해당 장치가 조직에 알려진 것으로 표시될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-104">When you require users to workplace-join their personal devices to the Azure Active Directory (Azure AD) device registration service, their devices can be marked as known to your organization.</span></span> <span data-ttu-id="817e5-105">다음은 Windows Server 2012 R2에서 AD FS(Active Directory Federation Services)를 사용하여 온-프레미스 응용 프로그램에 대한 조건부 액세스를 사용하도록 설정하는 단계별 가이드입니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-105">Following is a step-by-step guide for enabling conditional access to on-premises applications by using Active Directory Federation Services (AD FS) in Windows Server 2012 R2.</span></span>

> [!NOTE]
> <span data-ttu-id="817e5-106">Azure Active Directory 장치 등록 서비스 조건부 액세스 정책에 등록된 장치를 사용하는 경우 Office 365 라이선스 또는 Azure AD Premium 라이선스가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-106">An Office 365 license or Azure AD Premium license is required when using devices that are registered in Azure Active Directory device registration service conditional access policies.</span></span> <span data-ttu-id="817e5-107">여기에는 온-프레미스 리소스에서 AD FS에 의해 적용되는 정책이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-107">These include policies that are enforced by AD FS in on-premises resources.</span></span>
> 
> <span data-ttu-id="817e5-108">온-프레미스 리소스의 조건부 액세스 시나리오에 대한 자세한 내용은 [회사 응용 프로그램에서 SSO 및 원활한 2단계 인증을 위해 모든 장치에서 작업 공간 연결](https://technet.microsoft.com/library/dn280945.aspx)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="817e5-108">For more information about the conditional access scenarios for on-premises resources, see [Join to workplace from any device for SSO and seamless second-factor authentication across company applications](https://technet.microsoft.com/library/dn280945.aspx).</span></span>

<span data-ttu-id="817e5-109">이러한 기능은 Azure Active Directory Premium 라이선스를 구입한 고객에게 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-109">These capabilities are available to customers who purchase an Azure Active Directory Premium license.</span></span>

## <a name="supported-devices"></a><span data-ttu-id="817e5-110">지원되는 장치</span><span class="sxs-lookup"><span data-stu-id="817e5-110">Supported devices</span></span>
* <span data-ttu-id="817e5-111">Windows 7 도메인 가입 장치</span><span class="sxs-lookup"><span data-stu-id="817e5-111">Windows 7 domain-joined devices</span></span>
* <span data-ttu-id="817e5-112">Windows 8.1 개인 및 도메인 가입 장치</span><span class="sxs-lookup"><span data-stu-id="817e5-112">Windows 8.1 personal and domain-joined devices</span></span>
* <span data-ttu-id="817e5-113">Safari 브라우저의 경우 iOS 6 이상</span><span class="sxs-lookup"><span data-stu-id="817e5-113">iOS 6 and later for the Safari browser</span></span>
* <span data-ttu-id="817e5-114">Android 4.0 이상, 삼성 GS3 이상 휴대폰, 삼성 갤럭시 노트 2 이상 태블릿</span><span class="sxs-lookup"><span data-stu-id="817e5-114">Android 4.0 or later, Samsung GS3 or later phones, Samsung Galaxy Note 2 or later tablets</span></span>

## <a name="scenario-prerequisites"></a><span data-ttu-id="817e5-115">시나리오 필수 조건</span><span class="sxs-lookup"><span data-stu-id="817e5-115">Scenario prerequisites</span></span>
* <span data-ttu-id="817e5-116">Office 365 또는 Azure Active Directory Premium 구독</span><span class="sxs-lookup"><span data-stu-id="817e5-116">Subscription to Office 365 or Azure Active Directory Premium</span></span>
* <span data-ttu-id="817e5-117">Azure Active Directory 테넌트</span><span class="sxs-lookup"><span data-stu-id="817e5-117">An Azure Active Directory tenant</span></span>
* <span data-ttu-id="817e5-118">Windows Server Active Directory(Windows Server 2008 이상)</span><span class="sxs-lookup"><span data-stu-id="817e5-118">Windows Server Active Directory (Windows Server 2008 or later)</span></span>
* <span data-ttu-id="817e5-119">Windows Server 2012 R2에서 업데이트된 스키마</span><span class="sxs-lookup"><span data-stu-id="817e5-119">Updated schema in Windows Server 2012 R2</span></span>
* <span data-ttu-id="817e5-120">Azure Active Directory Premium에 대한 라이선스</span><span class="sxs-lookup"><span data-stu-id="817e5-120">License for Azure Active Directory Premium</span></span>
* <span data-ttu-id="817e5-121">Azure AD에 대해 SSO로 구성된 Windows Server 2012 R2 페더레이션 서비스</span><span class="sxs-lookup"><span data-stu-id="817e5-121">Windows Server 2012 R2 Federation Services, configured for SSO to Azure AD</span></span>
* <span data-ttu-id="817e5-122">Windows Server 2012 R2 웹 응용 프로그램 프록시</span><span class="sxs-lookup"><span data-stu-id="817e5-122">Windows Server 2012 R2 Web Application Proxy</span></span> 
* <span data-ttu-id="817e5-123">Azure AD Connect(Microsoft Azure Active Directory Connect)[(Azure AD Connect 다운로드)](http://www.microsoft.com/en-us/download/details.aspx?id=47594)</span><span class="sxs-lookup"><span data-stu-id="817e5-123">Microsoft Azure Active Directory Connect (Azure AD Connect) [(Download Azure AD Connect)](http://www.microsoft.com/en-us/download/details.aspx?id=47594)</span></span>
* <span data-ttu-id="817e5-124">확인된 도메인</span><span class="sxs-lookup"><span data-stu-id="817e5-124">Verified domain</span></span>

## <a name="known-issues-in-this-release"></a><span data-ttu-id="817e5-125">이 릴리스의 알려진 문제</span><span class="sxs-lookup"><span data-stu-id="817e5-125">Known issues in this release</span></span>
* <span data-ttu-id="817e5-126">장치 기반 조건부 액세스 정책을 사용하려면 장치 개체를 Azure Active Directory에서 Active Directory로 쓰기 저장해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-126">Device-based conditional access policies require device object writeback to Active Directory from Azure Active Directory.</span></span> <span data-ttu-id="817e5-127">장치 개체를 Active Directory에 쓰기 저장하는 데 최대 3시간이 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-127">It can take up to three hours for device objects to be written back to Active Directory.</span></span>
* <span data-ttu-id="817e5-128">iOS 7 장치는 항상 클라이언트 인증서 인증 중에 사용자에게 인증서를 선택하라는 메시지를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-128">iOS 7 devices  always prompt the user to select a certificate during client certificate authentication.</span></span>
* <span data-ttu-id="817e5-129">iOS 8.3 이전의 iOS 8 버전 중 일부는 작동하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-129">Some versions of iOS 8 before iOS 8.3 do not work.</span></span>

## <a name="scenario-assumptions"></a><span data-ttu-id="817e5-130">시나리오의 가정</span><span class="sxs-lookup"><span data-stu-id="817e5-130">Scenario assumptions</span></span>
<span data-ttu-id="817e5-131">이 시나리오에서는 Azure AD 테넌트와 온-프레미스 Active Directory로 구성된 하이브리드 환경이 있다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-131">This scenario assumes that you have a hybrid environment consisting of an Azure AD tenant and an on-premises Active Directory.</span></span> <span data-ttu-id="817e5-132">이러한 테넌트는 Azure AD Connect, 확인된 도메인 및 SSO용 AD FS를 사용하여 연결되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-132">These tenants should be connected with Azure AD Connect, with a verified domain, and with AD FS for SSO.</span></span> <span data-ttu-id="817e5-133">요구 사항에 따라 다음 검사 목록을 사용하여 환경을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-133">Use the following checklist to help you configure your environment according to the requirements.</span></span>

## <a name="checklist-prerequisites-for-conditional-access-scenario"></a><span data-ttu-id="817e5-134">검사 목록: 조건부 액세스 시나리오를 위한 필수 조건</span><span class="sxs-lookup"><span data-stu-id="817e5-134">Checklist: Prerequisites for conditional access scenario</span></span>
<span data-ttu-id="817e5-135">Azure AD 테넌트를 온-프레미스 Active Directory 인스턴스와 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-135">Connect your Azure AD tenant with your on-premises Active Directory instance.</span></span>

## <a name="configure-azure-active-directory-device-registration-service"></a><span data-ttu-id="817e5-136">Azure Active Directory 장치 등록 서비스 구성</span><span class="sxs-lookup"><span data-stu-id="817e5-136">Configure Azure Active Directory device registration service</span></span>
<span data-ttu-id="817e5-137">이 가이드를 사용하여 조직에 맞게 Azure Active Directory 장치 등록 서비스를 배포하고 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-137">Use this guide to deploy and configure the Azure Active Directory device registration service for your organization.</span></span>

<span data-ttu-id="817e5-138">여기서는 Windows Server Active Directory를 구성하고 Microsoft Azure Active Directory를 구독했다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-138">This guide assumes that you've configured Windows Server Active Directory and have subscribed to Microsoft Azure Active Directory.</span></span> <span data-ttu-id="817e5-139">앞에서 설명한 필수 구성 요소를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="817e5-139">See the prerequisites described earlier.</span></span>

<span data-ttu-id="817e5-140">Azure Active Directory 테넌트에 Azure Active Directory 장치 등록 서비스를 배포하려면 다음 검사 목록의 작업을 순서대로 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-140">To deploy the Azure Active Directory device registration service with your Azure Active Directory tenant, complete the tasks in the following checklist in order.</span></span> <span data-ttu-id="817e5-141">참조 링크가 개념 항목으로 이동하는 경우 나중에 이 검사 목록으로 돌아가서 나머지 작업을 계속 진행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-141">When a reference link takes you to a conceptual topic, return to this checklist afterward, so that you can proceed with the remaining tasks.</span></span> <span data-ttu-id="817e5-142">일부 작업에는 단계가 성공적으로 완료되었는지 확인할 수 있는 시나리오 유효성 검사 단계가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-142">Some tasks include a scenario validation step that can help you confirm whether the step was completed successfully.</span></span>

## <a name="part-1-enable-azure-active-directory-device-registration"></a><span data-ttu-id="817e5-143">1부: Azure Active Directory 장치 등록 사용</span><span class="sxs-lookup"><span data-stu-id="817e5-143">Part 1: Enable Azure Active Directory device registration</span></span>
<span data-ttu-id="817e5-144">검사 목록의 단계에 따라 Azure Active Directory 장치 등록 서비스를 사용하도록 설정하고 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-144">Follow the steps in the checklist to enable and configure the Azure Active Directory device registration service.</span></span>

| <span data-ttu-id="817e5-145">작업</span><span class="sxs-lookup"><span data-stu-id="817e5-145">Task</span></span> | <span data-ttu-id="817e5-146">참조</span><span class="sxs-lookup"><span data-stu-id="817e5-146">Reference</span></span> | 
| --- | --- |
| <span data-ttu-id="817e5-147">Azure Active Directory 테넌트에서 장치 등록을 사용하도록 설정하여 장치에서 작업 공간에 연결할 수 있게 합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-147">Enable device registration in your Azure Active Directory tenant to allow devices to join the workplace.</span></span> <span data-ttu-id="817e5-148">기본적으로 Multi-Factor Authentication은 서비스에서 사용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-148">By default, Azure Multi-Factor Authentication is not enabled for the service.</span></span> <span data-ttu-id="817e5-149">그러나 장치를 등록할 때는 Multi-Factor Authentication을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-149">However, we recommend that you use Multi-Factor Authentication when you register a device.</span></span> <span data-ttu-id="817e5-150">Active Directory 등록 서비스에서 Multi-Factor Authentication을 사용하도록 설정하기 전에 먼저 AD FS가 Multi-Factor Authentication 공급자에 대해 구성되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-150">Before enabling Multi-Factor Authentication in Active Directory registration service, ensure that AD FS is configured for a Multi-Factor Authentication  provider.</span></span> |[<span data-ttu-id="817e5-151">Azure Active Directory 장치 등록 사용</span><span class="sxs-lookup"><span data-stu-id="817e5-151">Enable Azure Active Directory device registration</span></span>](active-directory-device-registration-get-started.md)| 
|<span data-ttu-id="817e5-152">장치에서 잘 알려진 DNS 레코드를 찾아 Azure Active Directory 장치 등록 서비스를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-152">Devices discover your Azure Active Directory device registration service by looking for well-known DNS records.</span></span> <span data-ttu-id="817e5-153">장치에서 Azure Active Directory 장치 등록 서비스를 검색할 수 있도록 회사 DNS를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-153">Configure your company DNS so that devices can discover your Azure Active Directory device registration service.</span></span> |[<span data-ttu-id="817e5-154">Azure Active Directory 장치 등록 검색 구성</span><span class="sxs-lookup"><span data-stu-id="817e5-154">Configure Azure Active Directory device registration discovery</span></span>](active-directory-device-registration-get-started.md)| 


## <a name="part-2-deploy-and-configure-windows-server-2012-r2-active-directory-federation-services-and-set-up-a-federation-relationship-with-azure-ad"></a><span data-ttu-id="817e5-155">2부: Windows Server 2012 R2 Active Directory Federation Services를 배포 및 구성하고 Azure AD와의 페더레이션 관계를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-155">Part 2: Deploy and configure Windows Server 2012 R2 Active Directory Federation Services and set up a federation relationship with Azure AD</span></span>

| <span data-ttu-id="817e5-156">작업</span><span class="sxs-lookup"><span data-stu-id="817e5-156">Task</span></span> | <span data-ttu-id="817e5-157">참조</span><span class="sxs-lookup"><span data-stu-id="817e5-157">Reference</span></span> |
| --- | --- |
| <span data-ttu-id="817e5-158">Windows Server 2012 R2 스키마 확장을 사용하여 Active Directory Domain Services를 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-158">Deploy Active Directory Domain Services with the Windows Server 2012 R2 schema extensions.</span></span> <span data-ttu-id="817e5-159">도메인 컨트롤러는 Windows Server 2012 R2로 업그레이드할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-159">You do not need to upgrade any of your domain controllers to Windows Server 2012 R2.</span></span> <span data-ttu-id="817e5-160">스키마 업그레이드만 수행하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-160">The schema upgrade is the only requirement.</span></span> |[<span data-ttu-id="817e5-161">Active Directory Domain Services 스키마 업그레이드</span><span class="sxs-lookup"><span data-stu-id="817e5-161">Upgrade your Active Directory Domain Services schema</span></span>](#upgrade-your-active-directory-domain-services-schema) |
| <span data-ttu-id="817e5-162">장치에서 잘 알려진 DNS 레코드를 찾아 Azure Active Directory 장치 등록 서비스를 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-162">Devices discover your Azure Active Directory device registration service by looking for well-known DNS records.</span></span> <span data-ttu-id="817e5-163">장치에서 Azure Active Directory 장치 등록 서비스를 검색할 수 있도록 회사 DNS를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-163">Configure your company DNS so that devices can discover your Azure Active Directory device registration service.</span></span> |[<span data-ttu-id="817e5-164">Active Directory 지원 장치 준비</span><span class="sxs-lookup"><span data-stu-id="817e5-164">Prepare your Active Directory support devices</span></span>](#prepare-your-active-directory-to-support-devices) |

## <a name="part-3-enable-device-writeback-in-azure-ad"></a><span data-ttu-id="817e5-165">3부: Azure AD에서 장치 쓰기 저장 사용</span><span class="sxs-lookup"><span data-stu-id="817e5-165">Part 3: Enable device writeback in Azure AD</span></span>
| <span data-ttu-id="817e5-166">작업</span><span class="sxs-lookup"><span data-stu-id="817e5-166">Task</span></span> | <span data-ttu-id="817e5-167">참조</span><span class="sxs-lookup"><span data-stu-id="817e5-167">Reference</span></span> |
| --- | --- |
| <span data-ttu-id="817e5-168">"Azure AD Connect에서 장치 쓰기 저장 사용"의 2부를 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-168">Complete part two of "Enabling device writeback in Azure AD Connect."</span></span> <span data-ttu-id="817e5-169">완료한 후에 이 가이드로 돌아옵니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-169">After you finish it, return to this guide.</span></span> |[<span data-ttu-id="817e5-170">Azure AD Connect에서 장치 쓰기 저장 사용</span><span class="sxs-lookup"><span data-stu-id="817e5-170">Enabling device writeback in Azure AD Connect</span></span>](#upgrade-your-active-directory-domain-services-schema) |

## <a name="optional-part-4-enable-multi-factor-authentication"></a><span data-ttu-id="817e5-171">[선택 사항] 4부: Multi-Factor Authentication 사용</span><span class="sxs-lookup"><span data-stu-id="817e5-171">[Optional] Part 4: Enable Multi-Factor Authentication</span></span>
<span data-ttu-id="817e5-172">Multi-Factor Authentication을 위한 여러 옵션 중 하나를 구성하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-172">We strongly recommended that you configure one of the several options for Multi-Factor Authentication.</span></span> <span data-ttu-id="817e5-173">Multi-Factor Authentication을 요구하려면 [사용자를 위한 Multi-Factor Authentication 보안 솔루션 선택](../multi-factor-authentication/multi-factor-authentication-get-started.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="817e5-173">If you want to require Multi-Factor Authentication, see [Choose the Multi-Factor Authentication security solution for you](../multi-factor-authentication/multi-factor-authentication-get-started.md).</span></span> <span data-ttu-id="817e5-174">여기에는 각 솔루션에 대한 설명, 선택한 솔루션을 구성하는 데 도움이 되는 링크가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-174">It includes a description of each solution, and links to help you configure the solution of your choice.</span></span>

## <a name="part-5-verification"></a><span data-ttu-id="817e5-175">5부: 확인</span><span class="sxs-lookup"><span data-stu-id="817e5-175">Part 5: Verification</span></span>
<span data-ttu-id="817e5-176">이제 배포가 완료되었으므로 몇 가지 시나리오를 체험할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-176">The deployment is now complete, and you can try out some scenarios.</span></span> <span data-ttu-id="817e5-177">다음 링크를 사용하여 서비스를 시험해 보고 기능을 익혀 보세요.</span><span class="sxs-lookup"><span data-stu-id="817e5-177">Use the following links to experiment with the service and become familiar with its features.</span></span>

| <span data-ttu-id="817e5-178">작업</span><span class="sxs-lookup"><span data-stu-id="817e5-178">Task</span></span> | <span data-ttu-id="817e5-179">참조</span><span class="sxs-lookup"><span data-stu-id="817e5-179">Reference</span></span> |
| --- | --- |
| <span data-ttu-id="817e5-180">Azure Active Directory 장치 등록을 사용하여 일부 장치를 작업 공간에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-180">Join some devices to your workplace by using Azure Active Directory device registration service.</span></span> <span data-ttu-id="817e5-181">iOS, Windows 및 Android 장치를 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-181">You can join iOS, Windows, and Android devices.</span></span> |[<span data-ttu-id="817e5-182">Azure Active Directory 장치 등록 서비스를 사용하여 작업 공간에 장치 연결</span><span class="sxs-lookup"><span data-stu-id="817e5-182">Join devices to your workplace using Azure Active Directory device registration service</span></span>](#join-devices-to-your-workplace-using-azure-active-directory-device-registration) |
| <span data-ttu-id="817e5-183">관리자 포털을 사용하여 등록된 장치를 보고 사용하거나 사용하지 않도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-183">View and enable or disable registered devices by using the administrator portal.</span></span> <span data-ttu-id="817e5-184">이 작업에서는 관리자 포털을 사용하여 등록된 장치 일부를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-184">In this task, you view some registered devices by using the administrator portal.</span></span> |[<span data-ttu-id="817e5-185">Azure Active Directory 장치 등록 서비스 개요</span><span class="sxs-lookup"><span data-stu-id="817e5-185">Azure Active Directory device registration service overview</span></span>](active-directory-device-registration-get-started.md) |
| <span data-ttu-id="817e5-186">Azure Active Directory에서 Windows Server Active Directory로 장치 개체가 다시 기록되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-186">Verify that device objects are written back from Azure Active Directory to Windows Server Active Directory.</span></span> |[<span data-ttu-id="817e5-187">등록된 장치가 Active Directory에 쓰기 저장되는지 확인</span><span class="sxs-lookup"><span data-stu-id="817e5-187">Verify registered devices are written back to Active Directory</span></span>](#verify-registered-devices-are-written-back-to-active-directory) |
| <span data-ttu-id="817e5-188">이제 사용자가 장치를 등록할 수 있으므로 등록된 장치만 허용하도록 AD FS에서 응용 프로그램 액세스 정책을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-188">Now that users can register their devices, you can create application access polices in AD FS that allow only registered devices.</span></span> <span data-ttu-id="817e5-189">이 작업에서는 응용 프로그램 액세스 규칙과 사용자 지정 액세스 거부 메시지를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-189">In this task, you create an application access rule and a custom access-denied message.</span></span> |[<span data-ttu-id="817e5-190">응용 프로그램 액세스 정책 및 사용자 지정 액세스 거부 메시지 만들기</span><span class="sxs-lookup"><span data-stu-id="817e5-190">Create an application access policy and custom access-denied message</span></span>](#create-an-application-access-policy-and-custom-access-denied-message) |

## <a name="integrate-azure-active-directory-with-on-premises-active-directory"></a><span data-ttu-id="817e5-191">온-프레미스 Active Directory와 Azure Active Directory 통합</span><span class="sxs-lookup"><span data-stu-id="817e5-191">Integrate Azure Active Directory with on-premises Active Directory</span></span>
<span data-ttu-id="817e5-192">이 단계에서는 Azure AD Connect를 사용하여 Azure AD 테넌트와 온-프레미스 Active Directory를 통합할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-192">This step helps you integrate your Azure AD tenant with your on-premises Active Directory by using Azure AD Connect.</span></span> <span data-ttu-id="817e5-193">이 단계는 Azure 클래식 포털에서도 사용할 수 있지만 이 섹션에서 나열하는 특별 지침에 유의하세요.</span><span class="sxs-lookup"><span data-stu-id="817e5-193">Although the steps are available in the Azure classic portal, make note of any special instructions that are listed in this section.</span></span>

1. <span data-ttu-id="817e5-194">Azure AD의 전역 관리자인 계정을 사용하여 Azure 클래식 포털에 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-194">Sign in to the Azure classic portal by using an account that is a global administrator in Azure AD.</span></span>
2. <span data-ttu-id="817e5-195">왼쪽 창에서 **Active Directory**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-195">On the left pane, select **Active Directory**.</span></span>
3. <span data-ttu-id="817e5-196">**디렉터리** 탭에서 해당 디렉터리를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-196">On the **Directory** tab, select your directory.</span></span>
4. <span data-ttu-id="817e5-197">**디렉터리 통합** 탭을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-197">Select the **Directory Integration** tab.</span></span>
5. <span data-ttu-id="817e5-198">**배포 및 관리** 섹션 아래에서 1-3단계에 따라 온-프레미스 디렉터리와 Azure Active Directory를 통합합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-198">Under the **deploy and manage** section, follow steps 1 through 3 to integrate Azure Active Directory with your on-premises directory.</span></span>
   
   1. <span data-ttu-id="817e5-199">도메인을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-199">Add domains.</span></span>
   2. <span data-ttu-id="817e5-200">[Azure AD Connect의 사용자 지정 설치](connect/active-directory-aadconnect-get-started-custom.md) 지침을 사용하여 Azure AD Connect를 설치하고 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-200">Install and run Azure AD Connect by using the instructions at [Custom installation of Azure AD Connect](connect/active-directory-aadconnect-get-started-custom.md).</span></span>
   3. <span data-ttu-id="817e5-201">디렉터리 동기화를 확인하고 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-201">Verify and manage directory sync.</span></span> <span data-ttu-id="817e5-202">이 단계에는 SSO(Single Sign-On) 지침이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-202">Single sign-on instructions are available within this step.</span></span>
   
   <span data-ttu-id="817e5-203">또한 [Azure AD Connect의 사용자 지정 설치](connect/active-directory-aadconnect-get-started-custom.md)에서 설명한 대로 AD FS를 사용하여 페더레이션을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-203">In addition, configure federation with AD FS as outlined in [Custom installation of Azure AD Connect](connect/active-directory-aadconnect-get-started-custom.md).</span></span>

## <a name="upgrade-your-active-directory-domain-services-schema"></a><span data-ttu-id="817e5-204">Active Directory 도메인 서비스 스키마 업그레이드</span><span class="sxs-lookup"><span data-stu-id="817e5-204">Upgrade your Active Directory Domain Services schema</span></span>
> [!NOTE]
> <span data-ttu-id="817e5-205">Active Directory 스키마를 업그레이드한 후에는 프로세스를 취소할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-205">After you upgrade your Active Directory schema, the process cannot be reversed.</span></span> <span data-ttu-id="817e5-206">먼저 테스트 환경에서 업그레이드를 수행하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-206">We recommend that you first perform the upgrade in a test environment.</span></span>
> 

1. <span data-ttu-id="817e5-207">엔터프라이즈 관리자 및 스키마 관리자 권한이 모두 있는 계정으로 도메인 컨트롤러에 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-207">Sign in to your domain controller with an account that has both enterprise administrator and schema administrator rights.</span></span>
2. <span data-ttu-id="817e5-208">**[media]\support\adprep** 디렉터리 및 하위 디렉터리를 Active Directory 도메인 컨트롤러 중 하나(여기서 **[media]**는 Windows Server 2012 R2 설치 미디어의 경로임)에 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-208">Copy the **[media]\support\adprep** directory and subdirectories to one of your Active Directory domain controllers (where **[media]** is the path to the Windows Server 2012 R2 installation media).</span></span>
4. <span data-ttu-id="817e5-209">명령 프롬프트에서 **adprep** 디렉터리로 이동하여 **adprep.exe /forestprep**을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-209">From a command prompt, go to the **adprep** directory and run **adprep.exe /forestprep**.</span></span> <span data-ttu-id="817e5-210">화면의 지시에 따라 스키마 업그레이드를 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-210">Follow the onscreen instructions to complete the schema upgrade.</span></span>

## <a name="prepare-your-active-directory-to-support-devices"></a><span data-ttu-id="817e5-211">장치를 지원하도록 Active Directory 준비</span><span class="sxs-lookup"><span data-stu-id="817e5-211">Prepare your Active Directory to support devices</span></span>
> [!NOTE]
> <span data-ttu-id="817e5-212">장치를 지원하도록 Active Directory 포리스트를 준비하기 위해 실행해야 하는 일회성 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-212">This is a one-time operation that you must run to prepare your Active Directory forest to support devices.</span></span> <span data-ttu-id="817e5-213">이 절차를 완료하려면 엔터프라이즈 관리자 권한으로 로그인해야 하며 Active Directory 포리스트에 Windows Server 2012 R2 스키마가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-213">To complete this procedure, you must be signed in with enterprise administrator permissions and your Active Directory forest must have the Windows Server 2012 R2 schema.</span></span>
> 


### <a name="prepare-your-active-directory-forest"></a><span data-ttu-id="817e5-214">Active Directory 포리스트 준비</span><span class="sxs-lookup"><span data-stu-id="817e5-214">Prepare your Active Directory forest</span></span>
1. <span data-ttu-id="817e5-215">페더레이션 서버에서 Windows PowerShell 명령 창을 열고 **Initialize-ADDeviceRegistration**을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-215">On your federation server, open a Windows PowerShell command window, and then type **Initialize-ADDeviceRegistration**.</span></span> 
2. <span data-ttu-id="817e5-216">**ServiceAccountName**에 대한 메시지가 표시되면 AD FS에 대한 서비스 계정으로 선택한 서비스 계정의 이름을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-216">When prompted for **ServiceAccountName**, enter the name of the service account you selected as the service account for AD FS.</span></span> <span data-ttu-id="817e5-217">gMSA 계정인 경우 **domain\accountname$** 형식으로 계정을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-217">If it's a gMSA account, enter the account in the **domain\accountname$** format.</span></span> <span data-ttu-id="817e5-218">도메인 계정의 경우 **domain\accountname** 형식을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-218">For a domain account, use the format **domain\accountname**.</span></span>

### <a name="enable-device-authentication-in-ad-fs"></a><span data-ttu-id="817e5-219">AD FS에서 장치 인증 사용</span><span class="sxs-lookup"><span data-stu-id="817e5-219">Enable device authentication in AD FS</span></span>
1. <span data-ttu-id="817e5-220">페더레이션 서버에서 AD FS 관리 콘솔을 열고 **AD FS** > **인증 정책**으로 차례로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-220">On your federation server, open the AD FS management console and go to **AD FS** > **Authentication Policies**.</span></span>
2. <span data-ttu-id="817e5-221">**동작** 창에서 **전역 기본 인증 편집**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-221">On the **Actions** pane, select **Edit Global Primary Authentication**.</span></span>
3. <span data-ttu-id="817e5-222">**장치 인증 사용**을 선택한 다음 **확인**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-222">Check **Enable device authentication**, and then select **OK**.</span></span>
4. <span data-ttu-id="817e5-223">기본적으로 AD FS는 Active Directory에서 사용하지 않은 장치를 정기적으로 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-223">By default, AD FS periodically removes unused devices from Active Directory.</span></span> <span data-ttu-id="817e5-224">Azure에서 장치를 관리할 수 있도록 Azure Active Directory 장치 등록 서비스를 사용하는 경우 이 작업을 비활성화합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-224">Disable this task when you're using Azure Active Directory device registration service so that devices can be managed in Azure.</span></span>

### <a name="disable-unused-device-cleanup"></a><span data-ttu-id="817e5-225">사용하지 않은 장치 정리 사용 안 함</span><span class="sxs-lookup"><span data-stu-id="817e5-225">Disable unused device cleanup</span></span>
<span data-ttu-id="817e5-226">페더레이션 서버에서 Windows PowerShell 명령 창을 연 다음 **Set-AdfsDeviceRegistration -MaximumInactiveDays 0**을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-226">On your federation server, open a Windows PowerShell command window, and then type **Set-AdfsDeviceRegistration -MaximumInactiveDays 0**.</span></span>

### <a name="prepare-azure-ad-connect-for-device-writeback"></a><span data-ttu-id="817e5-227">장치 쓰기 저장을 위해 Azure AD Connect 준비</span><span class="sxs-lookup"><span data-stu-id="817e5-227">Prepare Azure AD Connect for device writeback</span></span>
<span data-ttu-id="817e5-228">'1부 Azure AD Connect 준비'를 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-228">Complete part 1: Prepare Azure AD Connect.</span></span>

## <a name="join-devices-to-your-workplace-by-using-azure-active-directory-device-registration-service"></a><span data-ttu-id="817e5-229">Azure Active Directory 장치 등록을 사용하여 작업 공간에 장치 연결</span><span class="sxs-lookup"><span data-stu-id="817e5-229">Join devices to your workplace by using Azure Active Directory device registration service</span></span>

### <a name="join-an-ios-device-by-using-azure-active-directory-device-registration"></a><span data-ttu-id="817e5-230">Azure Active Directory 장치 등록을 사용하여 iOS 장치 연결</span><span class="sxs-lookup"><span data-stu-id="817e5-230">Join an iOS device by using Azure Active Directory device registration</span></span>
<span data-ttu-id="817e5-231">Azure Active Directory 장치 등록은 iOS 장치에 대한 공중파 프로필 등록 프로세스를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-231">Azure Active Directory device registration uses the Over-the-Air Profile enrollment process for iOS devices.</span></span> <span data-ttu-id="817e5-232">이 프로세스는 사용자가 Safari를 사용하여 프로필 등록 URL에 연결할 때 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-232">This process begins when the user connects to the profile enrollment URL with Safari.</span></span> <span data-ttu-id="817e5-233">URL 형식은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-233">The URL format is as follows:</span></span>

    https://enterpriseregistration.windows.net/enrollmentserver/otaprofile/"yourdomainname"

<span data-ttu-id="817e5-234">이 경우 `yourdomainname`은 Azure Active Directory를 사용하여 구성한 도메인 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-234">In this case, `yourdomainname` is the domain name that you configured with Azure Active Directory.</span></span> <span data-ttu-id="817e5-235">예를 들어 도메인 이름이 contoso.com인 경우 URL은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-235">For example, if your domain name is contoso.com, the URL is as follows:</span></span>

    https://enterpriseregistration.windows.net/enrollmentserver/otaprofile/contoso.com

<span data-ttu-id="817e5-236">다양한 방법으로 이 URL을 사용자에게 알릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-236">There are many different ways to communicate this URL to your users.</span></span> <span data-ttu-id="817e5-237">예를 들어 AD FS의 사용자 지정 응용 프로그램 액세스 거부 메시지에 이 URL을 게시하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-237">For example, one method we recommend is publishing this URL in a custom application access-denied message in AD FS.</span></span> <span data-ttu-id="817e5-238">이 정보는 다음에 나오는 [응용 프로그램 액세스 정책 및 사용자 지정 액세스 거부 메시지 만들기](#create-an-application-access-policy-and-custom-access-denied-message) 섹션에서 설명됩니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-238">This information is covered in the upcoming section [Create an application access policy and custom access-denied message](#create-an-application-access-policy-and-custom-access-denied-message).</span></span>

### <a name="join-a-windows-81-device-by-using-azure-active-directory-device-registration"></a><span data-ttu-id="817e5-239">Azure Active Directory 장치 등록을 사용하여 Windows 8.1 장치 연결</span><span class="sxs-lookup"><span data-stu-id="817e5-239">Join a Windows 8.1 device by using Azure Active Directory device registration</span></span>
1. <span data-ttu-id="817e5-240">Windows 8.1 장치에서 **PC 설정** > **네트워크** > **작업 공간**을 차례로 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-240">On your Windows 8.1 device, select **PC Settings** > **Network** > **Workplace**.</span></span>
2. <span data-ttu-id="817e5-241">사용자 이름을 UPN 형식(예: **dan@contoso.com**)으로 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-241">Enter your user name in UPN format; for example, **dan@contoso.com**.</span></span>
3. <span data-ttu-id="817e5-242">**연결**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-242">Select **Join**.</span></span>
4. <span data-ttu-id="817e5-243">메시지가 표시되면 자격 증명으로 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-243">When prompted, sign in with your credentials.</span></span> <span data-ttu-id="817e5-244">이제 장치가 연결되었습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-244">The device is now joined.</span></span>

### <a name="join-a-windows-7-device-by-using-azure-active-directory-device-registration"></a><span data-ttu-id="817e5-245">Azure Active Directory 장치 등록을 사용하여 Windows 7 장치 연결</span><span class="sxs-lookup"><span data-stu-id="817e5-245">Join a Windows 7 device by using Azure Active Directory device registration</span></span>
<span data-ttu-id="817e5-246">Windows 7 도메인 가입 장치를 등록하려면 장치 등록 소프트웨어 패키지를 배포해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-246">To register Windows 7 domain-joined devices, you need to deploy the device registration software package.</span></span> <span data-ttu-id="817e5-247">이 소프트웨어 패키지는 Windows 7용 작업 공간 연결이라고 하며, [Microsoft Connect 웹 사이트](https://connect.microsoft.com/site1164)에서 다운로드할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-247">The software package is called Workplace Join for Windows 7, and it's available for download at the [Microsoft Connect website](https://connect.microsoft.com/site1164).</span></span> 

<span data-ttu-id="817e5-248">패키지를 사용하는 방법에 대한 지침은 [Windows 도메인 가입 장치의 Azure Active Directory 자동 등록을 구성하는 방법](active-directory-conditional-access-automatic-device-registration-setup.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="817e5-248">Instructions about how to use the package are available in [How to configure automatic registration of Windows domain-joined devices with Azure Active Directory](active-directory-conditional-access-automatic-device-registration-setup.md).</span></span>

## <a name="verify-that-registered-devices-are-written-back-to-active-directory"></a><span data-ttu-id="817e5-249">등록된 장치가 Active Directory에 쓰기 저장되었는지 확인</span><span class="sxs-lookup"><span data-stu-id="817e5-249">Verify that registered devices are written back to Active Directory</span></span>
<span data-ttu-id="817e5-250">LDP.exe 또는 ADSI 편집을 사용하여 장치 개체가 Active Directory에 쓰기 저장되었는지 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-250">You can view and verify that your device objects have been written back to your Active Directory by using LDP.exe or ADSI Edit.</span></span> <span data-ttu-id="817e5-251">둘 다 Active Directory 관리자 도구에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-251">Both are available with the Active Directory administrator tools.</span></span>

<span data-ttu-id="817e5-252">기본적으로 Azure Active Directory에서 쓰기 저장된 장치 개체는 AD FS 팜과 동일한 도메인에 배치됩니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-252">By default, device objects that are written back from Azure Active Directory are placed in the same domain as your AD FS farm.</span></span>

    CN=RegisteredDevices,defaultNamingContext

## <a name="create-an-application-access-policy-and-custom-access-denied-message"></a><span data-ttu-id="817e5-253">응용 프로그램 액세스 정책 및 사용자 지정 액세스 거부 메시지 만들기</span><span class="sxs-lookup"><span data-stu-id="817e5-253">Create an application access policy and custom access-denied message</span></span>
<span data-ttu-id="817e5-254">다음 시나리오를 고려합니다. AD FS에서 응용 프로그램 신뢰 당사자 트러스트를 만들고 등록된 장치만 허용하는 발급 권한 부여 규칙을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-254">Consider the following scenario: You create an application Relying Party Trust in AD FS and configure an Issuance Authorization Rule that allows only registered devices.</span></span> <span data-ttu-id="817e5-255">이제 등록된 장치만 응용 프로그램에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-255">Now only devices that are registered are allowed to access the application.</span></span> 

<span data-ttu-id="817e5-256">사용자가 응용 프로그램에 쉽게 액세스할 수 있게 하려면 장치를 연결하는 방법에 대한 지침이 포함된 사용자 지정 액세스 거부 메시지를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-256">To make it easy for your users to gain access to the application, you configure a custom access-denied message that includes instructions for how to join their device.</span></span> <span data-ttu-id="817e5-257">이제 사용자는 응용 프로그램에 액세스할 수 있도록 해당 장치를 원활하게 등록할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-257">Now your users have a seamless way to register their devices so they can access an application.</span></span>

<span data-ttu-id="817e5-258">다음 단계에서는 이 시나리오를 구현하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-258">The following steps show you how to implement this scenario.</span></span>

> [!NOTE]
> <span data-ttu-id="817e5-259">이 섹션에서는 AD FS에서 응용 프로그램에 대한 신뢰 당사자 트러스트를 이미 구성했다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-259">This section assumes that you have already configured a Relying Party Trust for your application in AD FS.</span></span>
> 

1. <span data-ttu-id="817e5-260">AD FS MMC 도구를 연 다음 **AD FS** > **트러스트 관계** > **신뢰 당사자 트러스트**를 차례로 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-260">Open the AD FS MMC tool, and then select **AD FS** > **Trust Relationships** > **Relying Party Trusts**.</span></span>
2. <span data-ttu-id="817e5-261">새로운 이 액세스 규칙이 적용되는 응용 프로그램을 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-261">Locate the application to which this new access rule applies.</span></span> <span data-ttu-id="817e5-262">응용 프로그램을 마우스 오른쪽 단추로 클릭한 다음 **클레임 규칙 편집**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-262">Right-click the application, and then select **Edit Claim Rules**.</span></span>
3. <span data-ttu-id="817e5-263">**발급 권한 부여 규칙** 탭을 선택한 다음 **규칙 추가**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-263">Select the **Issuance Authorization Rules** tab, and then select **Add Rule**.</span></span>
4. <span data-ttu-id="817e5-264">**클레임 규칙** 템플릿 드롭다운 목록에서 **들어오는 클레임을 기준으로 사용자 허용 또는 거부**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-264">From the **Claim rule** template drop-down list, select **Permit or Deny Users Based on an Incoming Claim**.</span></span> <span data-ttu-id="817e5-265">그런 후 **다음**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-265">Then select **Next**.</span></span>
5. <span data-ttu-id="817e5-266">**클레임 규칙 이름** 필드에서 **등록된 장치에서 액세스 허용**을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-266">In the **Claim rule name** field, type **Permit access from registered devices**.</span></span>
6. <span data-ttu-id="817e5-267">**들어오는 클레임 유형** 드롭다운 목록에서 **등록된 사용자**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-267">From the **Incoming claim type** drop-down list, select **Is Registered User**.</span></span>
7. <span data-ttu-id="817e5-268">**들어오는 클레임 값** 필드에 **true**를 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-268">In the **Incoming claim value** field, type **true**.</span></span>
8. <span data-ttu-id="817e5-269">**이 들어오는 클레임의 사용자에 대한 액세스 허용** 라디오 단추를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-269">Select the **Permit access to users with this incoming claim** radio button.</span></span>
9. <span data-ttu-id="817e5-270">**마침**을 선택한 다음 **적용**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-270">Select **Finish**, and then select **Apply**.</span></span>
10. <span data-ttu-id="817e5-271">허용 범위가 만든 규칙보다 더 넓은 규칙을 모두 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-271">Remove any rules that are more permissive than the rule you created.</span></span> <span data-ttu-id="817e5-272">예를 들어 **모든 사용자에게 액세스 허용** 기본 규칙을 제거합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-272">For example, remove the default rule **Permit Access to all Users**.</span></span>

<span data-ttu-id="817e5-273">이제 응용 프로그램이 사용자가 작업 공간에 등록 및 연결한 장치에서 들어오는 경우에만 액세스를 허용하도록 구성되었습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-273">Your application is now configured to allow access only when the user is coming from a device that they registered and joined to the workplace.</span></span> <span data-ttu-id="817e5-274">자세한 고급 액세스 정책은 [추가 Multi-Factor Authentication을 통해 중요한 응용 프로그램에 대한 위험 관리](https://technet.microsoft.com/library/dn280949.aspx)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="817e5-274">For more advanced access polices, see [Manage Risk with Additional Multi-Factor Authentication for Sensitive Applications](https://technet.microsoft.com/library/dn280949.aspx).</span></span>

<span data-ttu-id="817e5-275">다음으로 응용 프로그램에 대한 사용자 지정 오류 메시지를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-275">Next, you configure a custom error message for your application.</span></span> <span data-ttu-id="817e5-276">오류 메시지를 통해 사용자는 장치를 작업 공간에 연결해야 응용 프로그램에 액세스할 수 있음을 알게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-276">The error message lets users know that they must join their device to the workplace before they can access the application.</span></span> <span data-ttu-id="817e5-277">사용자 지정 HTML 및 PowerShell을 사용하여 사용자 지정 응용 프로그램 액세스 거부 메시지를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-277">You can create a custom application access-denied message by using custom HTML and PowerShell.</span></span>

<span data-ttu-id="817e5-278">페더레이션 서버에서 PowerShell 명령 창을 열고 다음 명령을 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-278">On your federation server, open a PowerShell command window, and then type the following command.</span></span> <span data-ttu-id="817e5-279">명령 부분을 시스템과 관련된 항목으로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-279">Replace portions of the command with items that are specific to your system:</span></span>

    Set-AdfsRelyingPartyWebContent -Name "relying party trust name" -ErrorPageAuthorizationErrorMessage
<span data-ttu-id="817e5-280">이 응용 프로그램에 액세스하려면 먼저 장치를 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-280">You must register your device before you can access this application.</span></span>

<span data-ttu-id="817e5-281">**iOS 장치를 사용하는 경우 다음 링크를 선택하여 장치를 연결합니다**.</span><span class="sxs-lookup"><span data-stu-id="817e5-281">**If you are using an iOS device, select this link to join your device**:</span></span>

    a href='https://enterpriseregistration.windows.net/enrollmentserver/otaprofile/yourdomain.com

<span data-ttu-id="817e5-282">이 iOS 장치를 작업 공간에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-282">Join this iOS device to your workplace.</span></span>

<span data-ttu-id="817e5-283">Windows 8.1 장치를 사용하는 경우 **PC 설정**> **네트워크** > **작업 공간**을 차례로 선택하여 장치를 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-283">If you are using a Windows 8.1 device, you can join your device by selecting **PC Settings**> **Network** > **Workplace**.</span></span>

<span data-ttu-id="817e5-284">앞의 명령에서 **relying party trust name**(신뢰 당사자 트러스트 이름)은 AD FS에 있는 응용 프로그램의 신뢰 당사자 트러스트 개체 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-284">In the preceding commands, **relying party trust name** is the name of your application's Relying Party Trust object in AD FS.</span></span>
<span data-ttu-id="817e5-285">그리고 **yourdomain.com**은 Azure Active Directory로 구성한 도메인 이름(예: contoso.com)입니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-285">And **yourdomain.com** is the domain name that you have configured with Azure Active Directory (for example, contoso.com).</span></span>
<span data-ttu-id="817e5-286">**Set-AdfsRelyingPartyWebContent** cmdlet에 전달하는 HTML 콘텐츠에서 줄 바꿈을 모두 제거해야 합니다(있는 경우).</span><span class="sxs-lookup"><span data-stu-id="817e5-286">Be sure to remove any line breaks (if any) from the HTML content that you pass to the **Set-AdfsRelyingPartyWebContent** cmdlet.</span></span>

<span data-ttu-id="817e5-287">이제 사용자가 Azure Active Directory 장치 등록 서비스에 등록되지 않은 장치에서 응용 프로그램에 액세스하면 아래 스크린샷과 비슷한 페이지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="817e5-287">Now when users access your application from a device that's not registered with the Azure Active Directory device registration service, they see a page that looks similar to the following screenshot.</span></span>

![사용자가 자신의 장치를 Azure AD에 등록하지 않은 경우의 오류 스크린샷](./media/active-directory-conditional-access/error-azureDRS-device-not-registered.gif)


