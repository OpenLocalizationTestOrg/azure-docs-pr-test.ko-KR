---
title: "Azure AD Connect: Azure AD가 이미 있는 경우 | Microsoft Docs"
description: "이 문서에서는 기존 Azure AD 테넌트가 있을 때 Connect를 사용하는 방법에 대해 설명합니다."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: 
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 908c576b0427a23934c844362a4fd69443800d0f
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-when-you-have-an-existent-tenant"></a><span data-ttu-id="01d17-103">Azure AD Connect: 기존 테넌트가 있는 경우</span><span class="sxs-lookup"><span data-stu-id="01d17-103">Azure AD Connect: When you have an existent tenant</span></span>
<span data-ttu-id="01d17-104">Azure AD Connect를 사용하는 방법에 대한 항목 중 대부분은 새 Azure AD 테넌트로 시작하고 여기에는 사용자 또는 다른 개체가 없다고 가정하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-104">Most of the topics for how to use Azure AD Connect assumes you start with a new Azure AD tenant and that there are no users or other objects there.</span></span> <span data-ttu-id="01d17-105">그러나 이미 Azure AD 테넌트로 시작하여 사용자와 다른 개체를 제공한 후에 Connect를 사용하려는 경우 이 문서가 도움이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-105">But if you have started with an Azure AD tenant, populated it with users and other objects, and now want to use Connect, then this topic is for you.</span></span>

## <a name="the-basics"></a><span data-ttu-id="01d17-106">기본 사항</span><span class="sxs-lookup"><span data-stu-id="01d17-106">The basics</span></span>
<span data-ttu-id="01d17-107">Azure AD의 개체는 클라우드(Azure AD) 또는 온-프레미스에서 마스터됩니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-107">An object in Azure AD is either mastered in the cloud (Azure AD) or on-premises.</span></span> <span data-ttu-id="01d17-108">단일 개체의 경우 온-프레미스의 일부 특성과 Azure AD의 다른 일부 특성은 관리할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-108">For one single object, you cannot manage some attributes on-premises and some other attributes in Azure AD.</span></span> <span data-ttu-id="01d17-109">각 개체에는 해당 개체를 관리하는 위치를 나타내는 플래그가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-109">Each object has a flag indicating where the object is managed.</span></span>

<span data-ttu-id="01d17-110">온-프레미스의 일부 사용자와 Azure AD의 다른 사용자는 관리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-110">You can manage some users on-premises and other in the cloud.</span></span> <span data-ttu-id="01d17-111">이 구성의 일반적인 시나리오는 회계 직원과 판매 직원이 혼합된 조직입니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-111">A common scenario for this configuration is an organization with a mix of accounting workers and sales workers.</span></span> <span data-ttu-id="01d17-112">회계 직원은 온-프레미스 AD 계정을 갖는 반면 판매 직원은 그렇지 않습니다. 판매 직원은 Azure AD에서 계정을 갖습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-112">The accounting workers have an on-premises AD account, but the sales workers do not, they have an account in Azure AD.</span></span> <span data-ttu-id="01d17-113">온-프레미스의 일부 사용자와 Azure AD의 일부 사용자를 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-113">You would manage some users on-premises and some in Azure AD.</span></span>

<span data-ttu-id="01d17-114">Azure AD와 온-프레미스에 있는 사용자를 관리하기 시작했으며 나중에 Connect를 사용하려는 경우 고려해야 할 몇 가지 추가 사항이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-114">If you started to manage users in Azure AD that are also in on-premises AD and later want to use Connect, then there are some additional concerns you need to consider.</span></span>

## <a name="sync-with-existing-users-in-azure-ad"></a><span data-ttu-id="01d17-115">Azure AD의 기존 사용자와 동기화</span><span class="sxs-lookup"><span data-stu-id="01d17-115">Sync with existing users in Azure AD</span></span>
<span data-ttu-id="01d17-116">Azure AD Connect를 설치하고 동기화를 시작할 때 Azure AD 동기화 서비스(Azure AD에서)는 새 개체를 모두 검사하여 일치하는 기존 개체를 찾으려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-116">When you install Azure AD Connect and you start synchronizing, the Azure AD sync service (in Azure AD) does a check on every new object and try to find an existing object to match.</span></span> <span data-ttu-id="01d17-117">이 프로세스에는 **userPrincipalName**, **proxyAddresses** 및 **sourceAnchor**/**immutableID**의 세 가지 특성이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-117">There are three attributes used for this process: **userPrincipalName**, **proxyAddresses**, and **sourceAnchor**/**immutableID**.</span></span> <span data-ttu-id="01d17-118">**userPrincipalName** 및 **proxyAddresses**에 대한 일치를 **소프트 일치**라고 하며,</span><span class="sxs-lookup"><span data-stu-id="01d17-118">A match on **userPrincipalName** and **proxyAddresses** is known as a **soft match**.</span></span> <span data-ttu-id="01d17-119">**sourceAnchor**에 대한 일치는 **하드 일치**라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-119">A match on **sourceAnchor** is known as **hard match**.</span></span> <span data-ttu-id="01d17-120">기본 전자 메일 주소인 **proxyAddresses** 특성의 경우 **SMTP:**가 있는 값만 평가에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-120">For the **proxyAddresses** attribute only the value with **SMTP:**, that is the primary email address, is used for the evaluation.</span></span>

<span data-ttu-id="01d17-121">일치는 Connect에서 나오는 새 개체에 대해서만 평가됩니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-121">The match is only evaluated for new objects coming from Connect.</span></span> <span data-ttu-id="01d17-122">이러한 특성 중 하나와 일치하도록 기존 개체를 변경하는 경우 오류가 대신 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-122">If you change an exiting object so it is matching any of these attributes, then you see an error instead.</span></span>

<span data-ttu-id="01d17-123">Azure AD가 Connect에서 나오는 개체의 특성 값과 동일하고 Azure AD에 이미 있는 개체를 찾으면 Connect에서 Azure AD의 개체를 받습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-123">If Azure AD finds an object where the attribute values are the same for an object coming from Connect and that it is already present in Azure AD, then the object in Azure AD is taken over by Connect.</span></span> <span data-ttu-id="01d17-124">이전에 클라우드에서 관리된 개체는 온-프레미스 관리 대상으로 플래그가 지정됩니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-124">The previously cloud-managed object is flagged as on-premises managed.</span></span> <span data-ttu-id="01d17-125">온 프레미스 AD의 값이 있는 Azure AD의 모든 특성은 온-프레미스 값으로 덮어씁니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-125">All attributes in Azure AD with a value in on-premises AD are overwritten with the on-premises value.</span></span> <span data-ttu-id="01d17-126">예외는 특성에 **NULL** 온-프레미스 값이 있는 경우입니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-126">The exception is when an attribute has a **NULL** value on-premises.</span></span> <span data-ttu-id="01d17-127">이 경우 Azure AD의 값은 그대로 유지되지만 온-프레미스에서 다른 값으로만 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-127">In this case, the value in Azure AD remains, but you can still only change it on-premises to something else.</span></span>

> [!WARNING]
> <span data-ttu-id="01d17-128">Azure AD의 모든 특성은 온-프레미스 값으로 덮어쓰게 되므로 온-프레미스 데이터가 양호한지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-128">Since all attributes in Azure AD are going to be overwritten by the on-premises value, make sure you have good data on-premises.</span></span> <span data-ttu-id="01d17-129">예를 들어 Office 365에서만 전자 메일 주소를 관리하고 온-프레미스 AD DS에서 전자 메일 주소를 업데이트하지 않은 경우 AD DS에 없는 Azure AD/Office 365의 값을 잃게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-129">For example, if you only have managed email address in Office 365 and not kept it updated in on-premises AD DS, then you lose any values in Azure AD/Office 365 not present in AD DS.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="01d17-130">항상 기본 설정으로 사용되는 암호 동기화를 사용하는 경우 Azure AD의 암호는 온-프레미스 AD의 암호로 덮어씁니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-130">If you use password sync, which is always used by express settings, then the password in Azure AD is overwritten with the password in on-premises AD.</span></span> <span data-ttu-id="01d17-131">사용자가 다른 암호를 관리하는 데 사용되는 경우 Connect를 설치할 때 온-프레미스 암호를 사용해야 한다고 사용자에게 알려야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-131">If your users are used to manage different passwords, then you need to inform them that they should use the on-premises password when you have installed Connect.</span></span>

<span data-ttu-id="01d17-132">이전 섹션과 경고는 계획에 고려되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-132">The previous section and warning must be considered in your planning.</span></span> <span data-ttu-id="01d17-133">온-프레미스 AD DS에 반영되지 않은 변경을 Azure AD에서 많이 수행한 경우에는 개체를 Azure AD Connect와 동기화하기 전에 업데이트된 값으로 AD DS를 채우는 방법을 계획해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-133">If you have made many changes in Azure AD not reflected in on-premises AD DS, then you need to plan for how to populate AD DS with the updated values before you sync your objects with Azure AD Connect.</span></span>

<span data-ttu-id="01d17-134">개체를 소프트 일치로 일치시키는 경우 Azure AD의 개체에 **sourceAnchor**가 추가되어 나중에 하드 일치를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-134">If you matched your objects with a soft-match, then the **sourceAnchor** is added to the object in Azure AD so a hard match can be used later.</span></span>

### <a name="hard-match-vs-soft-match"></a><span data-ttu-id="01d17-135">하드 일치 및 소프트 일치</span><span class="sxs-lookup"><span data-stu-id="01d17-135">Hard-match vs Soft-match</span></span>
<span data-ttu-id="01d17-136">Connect를 새로 설치하는 경우 소프트 일치와 하드 일치 사이에 실질적인 차이가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-136">For a new installation of Connect, there is no practical difference between a soft- and a hard-match.</span></span> <span data-ttu-id="01d17-137">차이점은 재해 복구 상황에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-137">The difference is in a disaster recovery situation.</span></span> <span data-ttu-id="01d17-138">Azure AD Connect를 사용하여 서버를 잃어버린 경우 데이터 손실 없이 새 인스턴스를 다시 설치할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-138">If you have lost your server with Azure AD Connect, you can reinstall a new instance without losing any data.</span></span> <span data-ttu-id="01d17-139">sourceAnchor가 있는 개체는 초기 설치 시 Connect로 보내집니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-139">An object with a sourceAnchor is sent to Connect during initial install.</span></span> <span data-ttu-id="01d17-140">그런 다음 Azure AD에서 동일하게 수행하는 것보다 훨씬 빠른 클라이언트(Azure AD Connect)에서 일치를 평가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-140">The match can then be evaluated by the client (Azure AD Connect), which is a lot faster than doing the same in Azure AD.</span></span> <span data-ttu-id="01d17-141">하드 일치는 Connect와 Azure AD 모두에서 평가되지만,</span><span class="sxs-lookup"><span data-stu-id="01d17-141">A hard match is evaluated both by Connect and by Azure AD.</span></span> <span data-ttu-id="01d17-142">소프트 일치는 Azure AD에서만 평가됩니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-142">A soft match is only evaluated by Azure AD.</span></span>

### <a name="other-objects-than-users"></a><span data-ttu-id="01d17-143">사용자 이외의 다른 개체</span><span class="sxs-lookup"><span data-stu-id="01d17-143">Other objects than users</span></span>
<span data-ttu-id="01d17-144">사용자에는 일반적으로 userPrincipalName과 proxyAddresses 특성이 모두 있어 쉽게 일치시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-144">Users usually have both userPrincipalName and proxyAddresses, making the match easy.</span></span> <span data-ttu-id="01d17-145">그러나 보안 그룹과 같은 다른 개체에는 이러한 특성이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-145">But other objects, such as security groups, do not have those.</span></span> <span data-ttu-id="01d17-146">이 경우 sourceAnchor를 사용하여 하드 일치에서만 일치시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-146">In this case, you can only match on a hard match using the sourceAnchor.</span></span> <span data-ttu-id="01d17-147">sourceAnchor는 항상 온-프레미스에서 Base64로 변환된 **objectGUID**이므로 두 개체를 일치시켜야 할 때는 Azure AD의 값을 업데이트해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-147">The sourceAnchor is always the Base64 converted **objectGUID** on-premises, so you must update the value in Azure AD when you need two objects to match.</span></span> <span data-ttu-id="01d17-148">sourceAnchor/immutableID는 포털이 아니라 PowerShell을 통해서만 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-148">The sourceAnchor/immutableID can only be updated with PowerShell and not through the portals.</span></span>

## <a name="create-a-new-on-premises-active-directory-from-data-in-azure-ad"></a><span data-ttu-id="01d17-149">Azure AD의 데이터에서 새로운 온-프레미스 Active Directory 만들기</span><span class="sxs-lookup"><span data-stu-id="01d17-149">Create a new on-premises Active Directory from data in Azure AD</span></span>
<span data-ttu-id="01d17-150">일부 고객은 Azure AD를 사용하는 클라우드 전용 솔루션으로 시작하고 온-프레미스 AD를 사용하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-150">Some customers start with a cloud-only solution with Azure AD and they do not have an on-premises AD.</span></span> <span data-ttu-id="01d17-151">나중에 온-프레미스 리소스를 사용하지만 Azure AD 데이터를 기반으로 하는 온-프레미스 AD를 구축하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-151">Later they want to consume on-premises resources and want to build an on-premises AD based on Azure AD data.</span></span> <span data-ttu-id="01d17-152">이 시나리오에서는 Azure AD Connect가 도움이 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-152">Azure AD Connect cannot help you for this scenario.</span></span> <span data-ttu-id="01d17-153">온-프레미스 사용자를 만들지 않으며 온-프레미스 암호를 Azure AD에서와 동일하게 설정할 수 있는 기능이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-153">It does not create users on-premises and it does not have any ability to set the password on-premises to the same as in Azure AD.</span></span>

<span data-ttu-id="01d17-154">온-프레미스 AD를 추가하려는 유일한 이유가 LOB(기간 업무 앱)를 지원하는 것이라면 [Azure AD 도메인 서비스](../../active-directory-domain-services/index.md)를 대신 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-154">If the only reason why you plan to add on-premises AD is to support LOBs (Line-of-Business apps), then maybe you should consider to use [Azure AD domain services](../../active-directory-domain-services/index.md) instead.</span></span>

## <a name="next-steps"></a><span data-ttu-id="01d17-155">다음 단계</span><span class="sxs-lookup"><span data-stu-id="01d17-155">Next steps</span></span>
<span data-ttu-id="01d17-156">[Azure Active Directory와 온-프레미스 ID 통합](active-directory-aadconnect.md)에 대해 자세히 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="01d17-156">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
