---
title: "Azure AD Connect 동기화: 기본 구성 이해 | Microsoft Docs"
description: "이 문서에서는 Azure AD Connect 동기화의 기본 구성을 설명합니다."
services: active-directory
documentationcenter: 
author: andkjell
manager: femila
editor: 
ms.assetid: ed876f22-6892-4b9d-acbe-6a2d112f1cd1
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 32a693c059a1b4261f33a3d6f50f397365e9dac4
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-sync-understanding-the-default-configuration"></a><span data-ttu-id="8ef75-103">Azure AD Connect 동기화: 기본 구성 이해</span><span class="sxs-lookup"><span data-stu-id="8ef75-103">Azure AD Connect sync: Understanding the default configuration</span></span>
<span data-ttu-id="8ef75-104">이 문서는 기본 구성 규칙을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-104">This article explains the out-of-box configuration rules.</span></span> <span data-ttu-id="8ef75-105">규칙 및 해당 규칙이 구성에 어떤 영향을 주는지를 문서화합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-105">It documents the rules and how these rules impact the configuration.</span></span> <span data-ttu-id="8ef75-106">또한 Azure AD Connect 동기화의 기본 구성을 안내합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-106">It also walks you through the default configuration of Azure AD Connect sync.</span></span> <span data-ttu-id="8ef75-107">목표는 판독기로 선언적 프로비전이라고 명명된 구성 모델이 실제 예제에서 작동하는 방식을 이해하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-107">The goal is that the reader understands how the configuration model, named declarative provisioning, is working in a real-world example.</span></span> <span data-ttu-id="8ef75-108">이 문서에서는 설치 마법사를 사용하여 Azure AD Connect 동기화를 설치한 뒤 구성하는 상황을 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-108">This article assumes that you have already installed and configure Azure AD Connect sync using the installation wizard.</span></span>

<span data-ttu-id="8ef75-109">구성 모델의 세부 정보를 이해하려면 [선언적 프로비전 이해](active-directory-aadconnectsync-understanding-declarative-provisioning.md)를 읽어 보세요.</span><span class="sxs-lookup"><span data-stu-id="8ef75-109">To understand the details of the configuration model, read [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>

## <a name="out-of-box-rules-from-on-premises-to-azure-ad"></a><span data-ttu-id="8ef75-110">온-프레미스에서 Azure AD로 기본 규칙</span><span class="sxs-lookup"><span data-stu-id="8ef75-110">Out-of-box rules from on-premises to Azure AD</span></span>
<span data-ttu-id="8ef75-111">다음 식은 기본 구성에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-111">The following expressions can be found in the out-of-box configuration.</span></span>

### <a name="user-out-of-box-rules"></a><span data-ttu-id="8ef75-112">사용자 기본 규칙</span><span class="sxs-lookup"><span data-stu-id="8ef75-112">User out-of-box rules</span></span>
<span data-ttu-id="8ef75-113">또한 이러한 규칙은 iNetOrgPerson 개체 형식에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-113">These rules also apply to the iNetOrgPerson object type.</span></span>

<span data-ttu-id="8ef75-114">사용자 개체를 동기화하려면 다음을 만족해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-114">A user object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="8ef75-115">sourceAnchor가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-115">Must have a sourceAnchor.</span></span>
* <span data-ttu-id="8ef75-116">Azure AD에서 개체를 만든 후에 sourceAnchor는 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-116">After the object has been created in Azure AD, then sourceAnchor cannot change.</span></span> <span data-ttu-id="8ef75-117">값이 변경된 온-프레미스인 경우 sourceAnchor가 이전 값으로 다시 변경될 때까지 개체의 동기화는 중지됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-117">If the value is changed on-premises, the object stops synchronizing until the sourceAnchor is changed back to its previous value.</span></span>
* <span data-ttu-id="8ef75-118">accountEnabled(userAccountControl) 특성이 채워져야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-118">Must have the accountEnabled (userAccountControl) attribute populated.</span></span> <span data-ttu-id="8ef75-119">온-프레미스 Active Directory를 통해 이 특성은 항상 존재하고 채워집니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-119">With an on-premises Active Directory, this attribute is always present and populated.</span></span>

<span data-ttu-id="8ef75-120">다음 사용자 개체는 Azure AD에 동기화되지 **않습니다** .</span><span class="sxs-lookup"><span data-stu-id="8ef75-120">The following user objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="8ef75-121">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-121">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="8ef75-122">기본 제공 관리자 계정과 같은 Active Directory의 많은 기본 개체가 동기화되지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-122">Ensure many out-of-box objects in Active Directory, such as the built-in administrator account, are not synchronized.</span></span>
* <span data-ttu-id="8ef75-123">`IsPresent([sAMAccountName]) = False`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-123">`IsPresent([sAMAccountName]) = False`.</span></span> <span data-ttu-id="8ef75-124">sAMAccountName 특성이 없는 사용자 개체가 동기화되지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-124">Ensure user objects with no sAMAccountName attribute are not synchronized.</span></span> <span data-ttu-id="8ef75-125">이 경우는 실질적으로 NT4에서 업그레이드된 도메인에 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-125">This case would only practically happen in a domain upgraded from NT4.</span></span>
* <span data-ttu-id="8ef75-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-126">`Left([sAMAccountName], 4) = "AAD_"`, `Left([sAMAccountName], 5) = "MSOL_"`.</span></span> <span data-ttu-id="8ef75-127">Azure AD Connect 동기화 및 이전 버전에서 사용한 서비스 계정을 동기화하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-127">Do not synchronize the service account used by Azure AD Connect sync and its earlier versions.</span></span>
* <span data-ttu-id="8ef75-128">Exchange Online에서 작동하지 않는 Exchange 계정을 동기화하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-128">Do not synchronize Exchange accounts that would not work in Exchange Online.</span></span>
  * `[sAMAccountName] = "SUPPORT_388945a0"`
  * `Left([mailNickname], 14) = "SystemMailbox{"`
  * `(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`
  * `(Left([sAMAccountName], 4) = "CAS_" && (InStr([sAMAccountName], "}")> 0))`
* <span data-ttu-id="8ef75-129">Exchange Online에서 작동하지 않는 개체를 동기화하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-129">Do not synchronize objects that would not work in Exchange Online.</span></span>
  `CBool(IIF(IsPresent([msExchRecipientTypeDetails]),BitAnd([msExchRecipientTypeDetails],&H21C07000) > 0,NULL))`  
  <span data-ttu-id="8ef75-130">이 비트 마스크(&amp;H21C07000)는 다음 개체도 필터링합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-130">This bitmask (&H21C07000) would filter out the following objects:</span></span>
  * <span data-ttu-id="8ef75-131">메일 사용 공용 폴더</span><span class="sxs-lookup"><span data-stu-id="8ef75-131">Mail-enabled Public Folder</span></span>
  * <span data-ttu-id="8ef75-132">시스템 도우미 사서함</span><span class="sxs-lookup"><span data-stu-id="8ef75-132">System Attendant Mailbox</span></span>
  * <span data-ttu-id="8ef75-133">사서함 데이터베이스 사서함(시스템 사서함)</span><span class="sxs-lookup"><span data-stu-id="8ef75-133">Mailbox Database Mailbox (System Mailbox)</span></span>
  * <span data-ttu-id="8ef75-134">유니버설 보안 그룹(사용자에 대해 적용하지 않지만 레거시를 지원하기 위해 존재합니다)</span><span class="sxs-lookup"><span data-stu-id="8ef75-134">Universal Security Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="8ef75-135">비유니버설 그룹(사용자에 대해 적용하지 않지만 레거시를 지원하기 위해 존재합니다)</span><span class="sxs-lookup"><span data-stu-id="8ef75-135">Non-Universal Group (wouldn't apply for a user, but is present for legacy reasons)</span></span>
  * <span data-ttu-id="8ef75-136">사서함 계획</span><span class="sxs-lookup"><span data-stu-id="8ef75-136">Mailbox Plan</span></span>
  * <span data-ttu-id="8ef75-137">검색 사서함</span><span class="sxs-lookup"><span data-stu-id="8ef75-137">Discovery Mailbox</span></span>
* <span data-ttu-id="8ef75-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-138">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="8ef75-139">복제 피해 개체를 동기화하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-139">Do not synchronize any replication victim objects.</span></span>

<span data-ttu-id="8ef75-140">다음 특성 규칙이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-140">The following attribute rules apply:</span></span>

* <span data-ttu-id="8ef75-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-141">`sourceAnchor <- IIF([msExchRecipientTypeDetails]=2,NULL,..)`.</span></span> <span data-ttu-id="8ef75-142">sourceAnchor 특성은 연결된 사서함에서 제공되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-142">The sourceAnchor attribute is not contributed from a linked mailbox.</span></span> <span data-ttu-id="8ef75-143">실제 계정에서 연결된 사서함을 찾은 경우 실제 계정이 나중에 조인된다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-143">It is assumed that if a linked mailbox has been found, the actual account is joined later.</span></span>
* <span data-ttu-id="8ef75-144">Exchange 관련 특성은 특성 **mailNickName** 에 값이 있는 경우 동기화됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-144">Exchange related attributes are only synchronized if the attribute **mailNickName** has a value.</span></span>
* <span data-ttu-id="8ef75-145">포리스트가 여러 개인 경우 특성은 다음 순서대로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-145">When there are multiple forests, then attributes are consumed in the following order:</span></span>
  1. <span data-ttu-id="8ef75-146">로그온에 관련된 특성(예: userPrincipalName)은 활성화된 계정을 사용하여 포리스트에서 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-146">Attributes related to sign-in (for example userPrincipalName) are contributed from the forest with an enabled account.</span></span>
  2. <span data-ttu-id="8ef75-147">Exchange GAL(전체 주소 목록)에서 찾을 수 있는 특성은 Exchange 사서함이 있는 포리스트에서 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-147">Attributes that can be found in an Exchange GAL (Global Address List) are contributed from the forest with an Exchange Mailbox.</span></span>
  3. <span data-ttu-id="8ef75-148">사서함이 없는 경우 이러한 특성은 포리스트에서 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-148">If no mailbox can be found, then these attributes can come from any forest.</span></span>
  4. <span data-ttu-id="8ef75-149">Exchange 관련 특성(GAL에 표시되지 않는 기술 특성)은 `mailNickname ISNOTNULL`의 포리스트에서 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-149">Exchange related attributes (technical attributes not visible in the GAL) are contributed from the forest where `mailNickname ISNOTNULL`.</span></span>
  5. <span data-ttu-id="8ef75-150">이러한 규칙 중 하나를 만족하는 다중 포리스트가 있는 경우 어떤 포리스트가 특성을 제공할지 결정하는 데 커넥터(포리스트)의 생성 순서(날짜/시간)가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-150">If there are multiple forests that would satisfy one of these rules, then the creation order (date/time) of the Connectors (forests) is used to determine which forest contributes the attributes.</span></span>

### <a name="contact-out-of-box-rules"></a><span data-ttu-id="8ef75-151">연락처 기본 규칙</span><span class="sxs-lookup"><span data-stu-id="8ef75-151">Contact out-of-box rules</span></span>
<span data-ttu-id="8ef75-152">연락처 개체를 동기화하려면 다음을 만족해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-152">A contact object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="8ef75-153">연락처는 메일을 사용할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-153">The contact must be mail-enabled.</span></span> <span data-ttu-id="8ef75-154">다음 규칙을 통해 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-154">It is verified with the following rules:</span></span>
  * <span data-ttu-id="8ef75-155">`IsPresent([proxyAddresses]) = True)`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-155">`IsPresent([proxyAddresses]) = True)`.</span></span> <span data-ttu-id="8ef75-156">proxyAddresses 특성을 채워야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-156">The proxyAddresses attribute must be populated.</span></span>
  * <span data-ttu-id="8ef75-157">기본 전자 메일 주소는 proxyAddresses 특성 또는 메일 특성에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-157">A primary email address can be found in either the proxyAddresses attribute or the mail attribute.</span></span> <span data-ttu-id="8ef75-158">현재 상태는 @ 하는 데 콘텐츠 전자 메일 주소 인지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-158">The presence of an @ is used to verify that the content is an email address.</span></span> <span data-ttu-id="8ef75-159">이 두 가지 규칙 중 하나가 True로 평가되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-159">One of these two rules must be evaluated to True.</span></span>
    * <span data-ttu-id="8ef75-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`</span><span class="sxs-lookup"><span data-stu-id="8ef75-160">`(Contains([proxyAddresses], "SMTP:") > 0) && (InStr(Item([proxyAddresses], Contains([proxyAddresses], "SMTP:")), "@") > 0))`.</span></span> <span data-ttu-id="8ef75-161">포함 된 항목을 "SMTP:" 없을 경우, 수 및는 @ 문자열에서 찾을 수 있습니까?</span><span class="sxs-lookup"><span data-stu-id="8ef75-161">Is there an entry with "SMTP:" and if there is, can an @ be found in the string?</span></span>
    * <span data-ttu-id="8ef75-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`</span><span class="sxs-lookup"><span data-stu-id="8ef75-162">`(IsPresent([mail]) = True && (InStr([mail], "@") > 0)`.</span></span> <span data-ttu-id="8ef75-163">메일 특성 채워지고 이면 수는 @ 문자열에서 찾을 수 있습니까?</span><span class="sxs-lookup"><span data-stu-id="8ef75-163">Is the mail attribute populated and if it is, can an @ be found in the string?</span></span>

<span data-ttu-id="8ef75-164">다음 연락처 개체는 Azure AD에 동기화되지 **않습니다** .</span><span class="sxs-lookup"><span data-stu-id="8ef75-164">The following contact objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="8ef75-165">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-165">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="8ef75-166">중요로 표시된 연락처 개체가 동기화되지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-166">Ensure no contact objects marked as critical are synchronized.</span></span> <span data-ttu-id="8ef75-167">기본 구성을 사용하지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-167">Shouldn't be any with a default configuration.</span></span>
* <span data-ttu-id="8ef75-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-168">`((InStr([displayName], "(MSOL)") > 0) && (CBool([msExchHideFromAddressLists])))`.</span></span>
* <span data-ttu-id="8ef75-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-169">`(Left([mailNickname], 4) = "CAS_" && (InStr([mailNickname], "}") > 0))`.</span></span> <span data-ttu-id="8ef75-170">해당 개체는 Exchange Online에서 작동하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-170">These objects wouldn't work in Exchange Online.</span></span>
* <span data-ttu-id="8ef75-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-171">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="8ef75-172">복제 피해 개체를 동기화하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-172">Do not synchronize any replication victim objects.</span></span>

### <a name="group-out-of-box-rules"></a><span data-ttu-id="8ef75-173">그룹 기본 규칙</span><span class="sxs-lookup"><span data-stu-id="8ef75-173">Group out-of-box rules</span></span>
<span data-ttu-id="8ef75-174">그룹 개체를 동기화하려면 다음을 만족해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-174">A group object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="8ef75-175">50,000명 미만의 멤버가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-175">Must have less than 50,000 members.</span></span> <span data-ttu-id="8ef75-176">이 개수는 온-프레미스 그룹의 멤버 수입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-176">This count is the number of members in the on-premises group.</span></span>
  * <span data-ttu-id="8ef75-177">동기화를 처음으로 시작하기 전에 더 많은 멤버가 있으면 그룹은 동기화되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-177">If it has more members before synchronization starts the first time, the group is not synchronized.</span></span>
  * <span data-ttu-id="8ef75-178">처음 만들어질 때 멤버 수가 증가하면 50,000명의 멤버에 도달할 때 멤버 자격 수가 다시 50,000보다 낮아질 때까지 동기화가 중지됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-178">If the number of members grow from when it was initially created, then when it reaches 50,000 members it stops synchronizing until the membership count is lower than 50,000 again.</span></span>
  * <span data-ttu-id="8ef75-179">참고: 또한 50,000명의 멤버 자격 수는 Azure AD에서 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-179">Note: The 50,000 membership count is also enforced by Azure AD.</span></span> <span data-ttu-id="8ef75-180">이 규칙을 수정하거나 제거하는 경우 더 많은 멤버가 있는 그룹을 동기화할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-180">You are not able to synchronize groups with more members even if you modify or remove this rule.</span></span>
* <span data-ttu-id="8ef75-181">그룹이 **배포 그룹**인 경우 메일을 사용할 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-181">If the group is a **Distribution Group**, then it must also be mail enabled.</span></span> <span data-ttu-id="8ef75-182">이러한 규칙이 적용되는 데 대해 [연락처 기본 규칙](#contact-out-of-box-rules)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8ef75-182">See [Contact out-of-box rules](#contact-out-of-box-rules) for this rule is enforced.</span></span>

<span data-ttu-id="8ef75-183">다음 그룹 개체는 Azure AD에 동기화되지 **않습니다** .</span><span class="sxs-lookup"><span data-stu-id="8ef75-183">The following group objects are **not** synchronized to Azure AD:</span></span>

* <span data-ttu-id="8ef75-184">`IsPresent([isCriticalSystemObject])`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-184">`IsPresent([isCriticalSystemObject])`.</span></span> <span data-ttu-id="8ef75-185">기본 제공 관리자 그룹과 같은 Active Directory의 많은 기본 개체가 동기화되지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-185">Ensure many out-of-box objects in Active Directory, such as the built-in administrators group, are not synchronized.</span></span>
* <span data-ttu-id="8ef75-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-186">`[sAMAccountName] = "MSOL_AD_Sync_RichCoexistence"`.</span></span> <span data-ttu-id="8ef75-187">DirSync에서 사용하는 레거시 그룹입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-187">Legacy group used by DirSync.</span></span>
* <span data-ttu-id="8ef75-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-188">`BitAnd([msExchRecipientTypeDetails],&amp;H40000000)`.</span></span> <span data-ttu-id="8ef75-189">역할 그룹입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-189">Role Group.</span></span>
* <span data-ttu-id="8ef75-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-190">`CBool(InStr(DNComponent(CRef([dn]),1),"\\0ACNF:")>0)`.</span></span> <span data-ttu-id="8ef75-191">복제 피해 개체를 동기화하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-191">Do not synchronize any replication victim objects.</span></span>

### <a name="foreignsecurityprincipal-out-of-box-rules"></a><span data-ttu-id="8ef75-192">ForeignSecurityPrincipal 기본 규칙</span><span class="sxs-lookup"><span data-stu-id="8ef75-192">ForeignSecurityPrincipal out-of-box rules</span></span>
<span data-ttu-id="8ef75-193">FSP는 메타버스에서 "어떤"(\*) 개체에 조인됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-193">FSPs are joined to "any" (\*) object in the metaverse.</span></span> <span data-ttu-id="8ef75-194">실제로 이 조인은 사용자 및 보안 그룹의 경우에만 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-194">In reality, this join only happens for users and security groups.</span></span> <span data-ttu-id="8ef75-195">이 구성을 통해 포리스트 간 멤버 자격을 확인하고 Azure AD에 올바르게 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-195">This configuration ensures that cross-forest memberships are resolved and represented correctly in Azure AD.</span></span>

### <a name="computer-out-of-box-rules"></a><span data-ttu-id="8ef75-196">컴퓨터 기본 규칙</span><span class="sxs-lookup"><span data-stu-id="8ef75-196">Computer out-of-box rules</span></span>
<span data-ttu-id="8ef75-197">컴퓨터 개체를 동기화하려면 다음을 만족해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-197">A computer object must satisfy the following to be synchronized:</span></span>

* <span data-ttu-id="8ef75-198">`userCertificate ISNOTNULL`.</span><span class="sxs-lookup"><span data-stu-id="8ef75-198">`userCertificate ISNOTNULL`.</span></span> <span data-ttu-id="8ef75-199">Windows 10 컴퓨터만이 이 특성을 채웁니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-199">Only Windows 10 computers populate this attribute.</span></span> <span data-ttu-id="8ef75-200">이 특성의 값을 가진 컴퓨터 개체를 모두 동기화합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-200">All computer objects with a value in this attribute are synchronized.</span></span>

## <a name="understanding-the-out-of-box-rules-scenario"></a><span data-ttu-id="8ef75-201">기본 규칙 시나리오 이해</span><span class="sxs-lookup"><span data-stu-id="8ef75-201">Understanding the out-of-box rules scenario</span></span>
<span data-ttu-id="8ef75-202">이 예제에서 계정 포리스트(A), 리소스 포리스트(R) 및 Azure AD 디렉터리가 각각 하나씩 포함된 배포를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-202">In this example, we are using a deployment with one account forest (A), one resource forest (R), and one Azure AD directory.</span></span>

![시나리오 설명이 있는 그림](./media/active-directory-aadconnectsync-understanding-default-configuration/scenario.png)

<span data-ttu-id="8ef75-204">이 구성에서 계정 포리스트의 활성화된 계정 및 연결된 사서함이 있는 리소스 포리스트의 비활성화된 계정이 있다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-204">In this configuration, it is assumed there is an enabled account in the account forest and a disabled account in the resource forest with a linked mailbox.</span></span>

<span data-ttu-id="8ef75-205">기본 구성에서 목표는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-205">Our goal with the default configuration is:</span></span>

* <span data-ttu-id="8ef75-206">로그인에 관련된 특성은 설정된 계정이 있는 포리스트에서 동기화됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-206">Attributes related to sign-in are synchronized from the forest with the enabled account.</span></span>
* <span data-ttu-id="8ef75-207">GAL(전체 주소 목록)에서 찾을 수 있는 특성은 사서함이 있는 포리스트에서 동기화됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-207">Attributes that can be found in the GAL (Global Address List) are synchronized from the forest with the mailbox.</span></span> <span data-ttu-id="8ef75-208">사서함을 찾을 수 없는 경우 다른 포리스트가 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-208">If no mailbox can be found, any other forest is used.</span></span>
* <span data-ttu-id="8ef75-209">연결된 사서함이 있는 경우 Azure AD로 내보낼 개체에 대해 연결되고 활성화된 계정을 찾을 수 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-209">If a linked mailbox is found, the linked enabled account must be found for the object to be exported to Azure AD.</span></span>

### <a name="synchronization-rule-editor"></a><span data-ttu-id="8ef75-210">동기화 규칙 편집기</span><span class="sxs-lookup"><span data-stu-id="8ef75-210">Synchronization Rule Editor</span></span>
<span data-ttu-id="8ef75-211">구성은 SRE(동기화 규칙 편집기) 도구를 사용하여 확인하고 변경하며 해당 바로 가기는 시작 메뉴에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-211">The configuration can be viewed and changed with the tool Synchronization Rules Editor (SRE) and a shortcut to it can be found in the start menu.</span></span>

![동기화 규칙 편집기 아이콘](./media/active-directory-aadconnectsync-understanding-default-configuration/sre.png)

<span data-ttu-id="8ef75-213">SRE는 리소스 키트 도구이며 Azure AD Connect 동기화와 함께 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-213">The SRE is a resource kit tool and it is installed with Azure AD Connect sync.</span></span> <span data-ttu-id="8ef75-214">시작할 수 있으려면 사용자가 ADSyncAdmins 그룹의 멤버여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-214">To be able to start it, you must be a member of the ADSyncAdmins group.</span></span> <span data-ttu-id="8ef75-215">시작할 때 다음과 같이 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-215">When it starts, you see something like this:</span></span>

![동기화 규칙 인바운드](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="8ef75-217">이 창에서 사용자의 구성을 위해 만든 모든 동기화 규칙을 보게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-217">In this pane, you see all Synchronization Rules created for your configuration.</span></span> <span data-ttu-id="8ef75-218">테이블의 각 줄은 하나의 동기화 규칙입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-218">Each line in the table is one Synchronization Rule.</span></span> <span data-ttu-id="8ef75-219">왼쪽의 규칙 우형 아래에 인바운드 및 아웃바운드의 두 가지 유형이 나열됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-219">To the left under Rule Types, the two different types are listed: Inbound and Outbound.</span></span> <span data-ttu-id="8ef75-220">인바운드 및 아웃바운드는 메타버스의 보기에서 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-220">Inbound and Outbound is from the view of the metaverse.</span></span> <span data-ttu-id="8ef75-221">이 개요에서는 주로 인바운드 규칙에 집중합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-221">You are mainly going to focus on the inbound rules in this overview.</span></span> <span data-ttu-id="8ef75-222">동기화 규칙의 실제 목록은 AD에서 검색된 스키마에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-222">The actual list of Synchronization Rules depends on the detected schema in AD.</span></span> <span data-ttu-id="8ef75-223">위의 그림에서 계정 포리스트(fabrikamonline.com)에는 Exchange, Lync 등의 서비스가 없으며 이러한 서비스에 대해 어떤 동기화 규칙도 만들어지지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-223">In the picture above, the account forest (fabrikamonline.com) does not have any services, such as Exchange and Lync, and no Synchronization Rules have been created for these services.</span></span> <span data-ttu-id="8ef75-224">그러나 리소스 포리스트(res.fabrikamonline.com)에서 이러한 서비스에 대한 동기화 규칙을 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-224">However, in the resource forest (res.fabrikamonline.com) you find Synchronization Rules for these services.</span></span> <span data-ttu-id="8ef75-225">규칙의 콘텐츠는 검색된 버전에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-225">The content of the rules is different depending on the version detected.</span></span> <span data-ttu-id="8ef75-226">예를 들어 Exchange 2013를 사용한 배포에서는 Exchange 2010/2007에서 보다 자세한 특성 흐름이 구성되었습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-226">For example, in a deployment with Exchange 2013 there are more attribute flows configured than in Exchange 2010/2007.</span></span>

### <a name="synchronization-rule"></a><span data-ttu-id="8ef75-227">동기화 규칙</span><span class="sxs-lookup"><span data-stu-id="8ef75-227">Synchronization Rule</span></span>
<span data-ttu-id="8ef75-228">동기화 규칙은 조건을 만족할 때 흐르는 특성 집합이 포함된 구성 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-228">A Synchronization Rule is a configuration object with a set of attributes flowing when a condition is satisfied.</span></span> <span data-ttu-id="8ef75-229">또한 커넥터 공간에는 개체가 **조인** 또는 **일치**로 알려진 메타버스에 있는 개체와 관련되는 방법을 설명하기 위해서도 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-229">It is also used to describe how an object in a connector space is related to an object in the metaverse, known as **join** or **match**.</span></span> <span data-ttu-id="8ef75-230">동기화 규칙에는 서로 관계를 나타내는 우선 순위 값이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-230">The Synchronization Rules have a precedence value indicating how they relate to each other.</span></span> <span data-ttu-id="8ef75-231">낮은 숫자 값을 가진 동기화 규칙이 더 높은 우선 순위를 가지며 특성 흐름 충돌에서 높은 우선 순위가 충돌을 해결합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-231">A Synchronization Rule with a lower numeric value has a higher precedence and in an attribute flow conflict, higher precedence wins the conflict resolution.</span></span>

<span data-ttu-id="8ef75-232">한 예로 동기화 규칙 **AD에서 들어오기 – 사용자 AccountEnabled**를 살펴보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-232">As an example, look at the Synchronization Rule **In from AD – User AccountEnabled**.</span></span> <span data-ttu-id="8ef75-233">SRE에서 이 줄을 표시하고 **편집**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-233">Mark this line in the SRE and select **Edit**.</span></span>

<span data-ttu-id="8ef75-234">이 규칙이 기본 규칙이므로 규칙을 열 때 경고를 받게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-234">Since this rule is an out-of-box rule, you receive a warning when you open the rule.</span></span> <span data-ttu-id="8ef75-235">[기본 규칙을 변경](active-directory-aadconnectsync-best-practices-changing-default-configuration.md)하지 않아야 하므로 사용자의 의도를 묻습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-235">You should not make any [changes to out-of-box rules](active-directory-aadconnectsync-best-practices-changing-default-configuration.md), so you are asked what your intentions are.</span></span> <span data-ttu-id="8ef75-236">이 경우 단순히 규칙을 확인하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-236">In this case, you only want to view the rule.</span></span> <span data-ttu-id="8ef75-237">**아니오**를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-237">Select **No**.</span></span>

![동기화 규칙 경고](./media/active-directory-aadconnectsync-understanding-default-configuration/warningeditrule.png)

<span data-ttu-id="8ef75-239">동기화 규칙에는 설명, 범위 지정 필터, 조인 규칙 및 변환의 네 가지 구성 섹션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-239">A Synchronization Rule has four configuration sections: Description, Scoping filter, Join rules, and Transformations.</span></span>

#### <a name="description"></a><span data-ttu-id="8ef75-240">설명</span><span class="sxs-lookup"><span data-stu-id="8ef75-240">Description</span></span>
<span data-ttu-id="8ef75-241">첫 번째 섹션은 이름 및 설명과 같은 기본 정보를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-241">The first section provides basic information such as a name and description.</span></span>

![<span data-ttu-id="8ef75-242">동기화 규칙 편집기의 설명 탭</span><span class="sxs-lookup"><span data-stu-id="8ef75-242">Description tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruledescription.png)

<span data-ttu-id="8ef75-243">이 규칙이 관련된 연결된 시스템, 적용되는 연결된 시스템의 개체 유형 및 메타버스 개체 유형에 관한 정보를 찾을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-243">You also find information about which connected system this rule is related to, which object type in the connected system it applies to, and the metaverse object type.</span></span> <span data-ttu-id="8ef75-244">메타버스 개체 형식은 소스 개체 형식이 사용자, iNetOrgPerson 또는 연락처인지와 관계 없이 항상 사람입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-244">The metaverse object type is always person regardless when the source object type is a user, iNetOrgPerson, or contact.</span></span> <span data-ttu-id="8ef75-245">메타버스 개체 형식은 일반 형식으로 생성되어야 하므로 변경되어서는 안됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-245">The metaverse object type should never change so it is created as a generic type.</span></span> <span data-ttu-id="8ef75-246">링크 형식은 조인, StickyJoin, 또는 프로 비전으로 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-246">The Link Type can be set to Join, StickyJoin, or Provision.</span></span> <span data-ttu-id="8ef75-247">이 설정은 조인 규칙 섹션과 함께 작동하며 나중에 설명됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-247">This setting works together with the Join Rules section and is covered later.</span></span>

<span data-ttu-id="8ef75-248">또한 이 동기화 규칙이 암호 동기화에 사용됨을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-248">You can also see that this sync rule is used for password sync.</span></span> <span data-ttu-id="8ef75-249">사용자가 이 동기화 규칙에 대한 범위에 있는 경우 암호는 온-프레미스에서 클라우드로 동기화됩니다(암호 동기화 기능을 사용한다고 가정).</span><span class="sxs-lookup"><span data-stu-id="8ef75-249">If a user is in scope for this sync rule, the password is synchronized from on-premises to cloud (assuming you have enabled the password sync feature).</span></span>

#### <a name="scoping-filter"></a><span data-ttu-id="8ef75-250">범위 지정 필터</span><span class="sxs-lookup"><span data-stu-id="8ef75-250">Scoping filter</span></span>
<span data-ttu-id="8ef75-251">범위 지정 필터 섹션은 동기화 규칙을 적용할 시기를 구성하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-251">The Scoping Filter section is used to configure when a Synchronization Rule should apply.</span></span> <span data-ttu-id="8ef75-252">검색하려는 동기화 규칙의 이름을 보면 활성화된 사용자에게만 적용해야 함을 알 수 있으므로 AD 특성 **userAccountControl** 에는 비트 2가 설정되지 않도록 범위가 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-252">Since the name of the Synchronization Rule you are looking at indicates it should only be applied for enabled users, the scope is configured so the AD attribute **userAccountControl** must not have the bit 2 set.</span></span> <span data-ttu-id="8ef75-253">동기화 엔진이 AD에서 사용자를 찾을 때 **userAccountControl** 이 10진수 값 512(활성화된 일반 사용자)로 설정된 경우 이 동기화 규칙을 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-253">When the sync engine finds a user in AD, it applies this sync rule when **userAccountControl** is set to the decimal value 512 (enabled normal user).</span></span> <span data-ttu-id="8ef75-254">사용자가 **userAccountControl**을 514(비활성화된 일반 사용자)로 설정한 경우 규칙이 적용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-254">It does not apply the rule when the user has **userAccountControl** set to 514 (disabled normal user).</span></span>

![<span data-ttu-id="8ef75-255">동기화 규칙 편집기의 범위 지정 탭</span><span class="sxs-lookup"><span data-stu-id="8ef75-255">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilter.png)

<span data-ttu-id="8ef75-256">범위 지정 필터에는 중첩될 수 있는 그룹 및 절이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-256">The scoping filter has Groups and Clauses that can be nested.</span></span> <span data-ttu-id="8ef75-257">동기화 규칙을 적용하려면 그룹 내의 모든 절을 충족해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-257">All clauses inside a group must be satisfied for a Synchronization Rule to apply.</span></span> <span data-ttu-id="8ef75-258">여러 그룹이 정의된 경우, 하나 이상의 그룹이 적용할 규칙에 충족되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-258">When multiple groups are defined, then at least one group must be satisfied for the rule to apply.</span></span> <span data-ttu-id="8ef75-259">즉, 논리 OR은 그룹들 간에 평가되며 논리 AND는 하나의 그룹 내에서 평가됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-259">That is, a logical OR is evaluated between groups and a logical AND is evaluated inside a group.</span></span> <span data-ttu-id="8ef75-260">이 구성의 예는 **AAD로 나가기 - 그룹 조인**아웃바운드 동기화 규칙에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-260">An example of this configuration can be found in the outbound Synchronization Rule **Out to AAD – Group Join**.</span></span> <span data-ttu-id="8ef75-261">예를 들어 몇 가지 동기화 필터 그룹, 보안 그룹에 대한 하나의 필터 그룹(`securityEnabled EQUAL True`) 및 배포 그룹에 대한 하나의 필터 그룹(`securityEnabled EQUAL False`)이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-261">There are several synchronization filter groups, for example one for security groups (`securityEnabled EQUAL True`) and one for distribution groups (`securityEnabled EQUAL False`).</span></span>

![<span data-ttu-id="8ef75-262">동기화 규칙 편집기의 범위 지정 탭</span><span class="sxs-lookup"><span data-stu-id="8ef75-262">Scoping tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulescopingfilterout.png)

<span data-ttu-id="8ef75-263">이 규칙은 Azure AD에 프로비전해야 하는 그룹을 정의하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-263">This rule is used to define which Groups should be provisioned to Azure AD.</span></span> <span data-ttu-id="8ef75-264">배포 그룹은 Azure AD와 동기화할 수 있도록 메일을 설정해야 하지만 보안 그룹에 대해서는 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-264">Distribution Groups must be mail enabled to be synchronized with Azure AD, but for security groups an email is not required.</span></span>

#### <a name="join-rules"></a><span data-ttu-id="8ef75-265">조인 규칙</span><span class="sxs-lookup"><span data-stu-id="8ef75-265">Join rules</span></span>
<span data-ttu-id="8ef75-266">세 번째 섹션은 커넥터 공간의 개체가 메타버스의 개체와 관련되는 방법을 구성하는데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-266">The third section is used to configure how objects in the connector space relate to objects in the metaverse.</span></span> <span data-ttu-id="8ef75-267">이전에 살펴본 규칙에는 조인 규칙에 대한 구성은 없으며, 대신 **AD에서 들어오기 – 사용자 조인**에서 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-267">The rule you have looked at earlier does not have any configuration for Join Rules, so instead you are going to look at **In from AD – User Join**.</span></span>

![<span data-ttu-id="8ef75-268">동기화 규칙 편집기의 조인 규칙 탭</span><span class="sxs-lookup"><span data-stu-id="8ef75-268">Join rules tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulejoinrules.png)

<span data-ttu-id="8ef75-269">조인 규칙의 콘텐츠는 설치 마법사에서 선택한 일치 옵션에 따라 달라집니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-269">The content of the join rule depends on the matching option selected in the installation wizard.</span></span> <span data-ttu-id="8ef75-270">인바운드 규칙의 경우, 평가는 원본 커넥터 공간에서 개체와 함께 시작되며 조인 규칙의 각 그룹이 순서대로 평가됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-270">For an inbound rule, the evaluation starts with an object in the source connector space and each group in the join rules is evaluated in sequence.</span></span> <span data-ttu-id="8ef75-271">원본 개체가 조인 규칙 중 하나를 사용하는 메타버스로의 개체 하나와 정확히 일치하는 것으로 평가되는 경우, 개체는 조인됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-271">If a source object is evaluated to match exactly one object in the metaverse using one of the join rules, the objects are joined.</span></span> <span data-ttu-id="8ef75-272">모든 규칙이 평가되며 일치 항목이 없는 경우, 설명 페이지의 링크 형식이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-272">If all rules have been evaluated and there is no match, then the Link Type on the description page is used.</span></span> <span data-ttu-id="8ef75-273">이 구성이 **프로비전**에 설정된 경우 대상, 메타버스에서 새 개체가 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-273">If this configuration is set to **Provision**, then a new object is created in the target, the metaverse.</span></span> <span data-ttu-id="8ef75-274">메타버스에 새 개체를 프로비전하는 것은 개체를 메타버스에 **프로젝트** 하는 것이라고도 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-274">To provision a new object to the metaverse is also known as to **project** an object to the metaverse.</span></span>

<span data-ttu-id="8ef75-275">조인 규칙은 한 번만 평가됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-275">The join rules are only evaluated once.</span></span> <span data-ttu-id="8ef75-276">커넥터 공간 개체 및 메타버스 개체가 결합된 경우, 동기화 규칙의 범위가 충족되는 한 조인 상태를 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-276">When a connector space object and a metaverse object are joined, they remain joined as long as the scope of the Synchronization Rule is still satisfied.</span></span>

<span data-ttu-id="8ef75-277">동기화 규칙을 평가할 때 정의된 조인 규칙이 포함된 동기화 규칙 하나만이 범위 내에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-277">When evaluating Synchronization Rules, only one Synchronization Rule with join rules defined must be in scope.</span></span> <span data-ttu-id="8ef75-278">조인 규칙이 포함된 여러 동기화 규칙이 하나의 개체에 대해 발견되면 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-278">If multiple Synchronization Rules with join rules are found for one object, an error is thrown.</span></span> <span data-ttu-id="8ef75-279">이러한 이유로, 여러 동기화 규칙이 개체의 범위에 있을 경우 정의된 조인을 포함한 하나의 동기화 규칙만이 있는 것이 가장 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-279">For this reason, the best practice is to have only one Synchronization Rule with join defined when multiple Synchronization Rules are in scope for an object.</span></span> <span data-ttu-id="8ef75-280">Azure AD Connect 동기화에 대한 기본 구성에서 이름으로 이 규칙을 찾을 수 있으며 이름의 끝에서 **조인** 이라는 단어가 있는 규칙을 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-280">In the out-of-box configuration for Azure AD Connect sync, these rules can be found by looking at the name and find those with the word **Join** at the end of the name.</span></span> <span data-ttu-id="8ef75-281">다른 동기화 규칙이 개체와 함께 결합되거나 대상의 새 개체를 프로비전하는 경우 정의된 조인 규칙이 없는 동기화 규칙이 특성 흐름을 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-281">A Synchronization Rule without any join rules defined applies the attribute flows when another Synchronization Rule joined the objects together or provisioned a new object in the target.</span></span>

<span data-ttu-id="8ef75-282">위 그림을 보면 규칙이 **msExchMasterAccountSid**(Exchange) 및 **msRTCSIP-OriginatorSid**(Lync)를 사용하여 **objectSID**에 조인하려는 시도를 확인할 수 있으며 이는 계정 리소스 포리스트 토폴로지에서 발생할 것으로 예상됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-282">If you look at the picture above, you can see that the rule is trying to join **objectSID** with **msExchMasterAccountSid** (Exchange) and **msRTCSIP-OriginatorSid** (Lync), which is what we expect in an account-resource forest topology.</span></span> <span data-ttu-id="8ef75-283">모든 포리스트에서 동일한 규칙을 발견합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-283">You find the same rule on all forests.</span></span> <span data-ttu-id="8ef75-284">즉, 모든 포리스트가 계정 또는 리소스 포리스트일 수 있다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-284">The assumption is that every forest could be either an account or resource forest.</span></span> <span data-ttu-id="8ef75-285">또한 이 구성은 단일 포리스트에 작동되고 조인할 수 없는 계정이 있는 경우에 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-285">This configuration also works if you have accounts that live in a single forest and do not have to be joined.</span></span>

#### <a name="transformations"></a><span data-ttu-id="8ef75-286">변환</span><span class="sxs-lookup"><span data-stu-id="8ef75-286">Transformations</span></span>
<span data-ttu-id="8ef75-287">변환 섹션은 개체가 조인되고 범위 지정 필터를 충족하는 경우 대상 개체에 적용되도록 모든 특성 흐름을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-287">The transformation section defines all attribute flows that apply to the target object when the objects are joined and the scope filter is satisfied.</span></span> <span data-ttu-id="8ef75-288">**AD에서 들어오기 – 사용자 AccountEnabled** 동기화 규칙으로 돌아가서 다음 변환을 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-288">Going back to the **In from AD – User AccountEnabled** Synchronization Rule, you find the following transformations:</span></span>

![<span data-ttu-id="8ef75-289">동기화 규칙 편집기의 변환 탭</span><span class="sxs-lookup"><span data-stu-id="8ef75-289">Transformations tab in Sync rule editor</span></span> ](./media/active-directory-aadconnectsync-understanding-default-configuration/syncruletransformations.png)

<span data-ttu-id="8ef75-290">이 구성을 컨텍스트에 배치하려면 계정 리소스 포리스트 배포에서 Exchange 및 Lync 설정을 사용하여 계정 포리스트에서 활성화된 계정을 찾고 리소스 포리스트에서 비활성화된 계정을 찾을 예정입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-290">To put this configuration in context, in an Account-Resource forest deployment, it is expected to find an enabled account in the account forest and a disabled account in the resource forest with Exchange and Lync settings.</span></span> <span data-ttu-id="8ef75-291">찾고 있는 동기화 규칙은 로그인에 필요한 특성을 포함하며 해당 특성은 활성화된 계정이 있는 포리스트에서부터 진행되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-291">The Synchronization Rule you are looking at contains the attributes required for sign-in and these attributes should flow from the forest where there is an enabled account.</span></span> <span data-ttu-id="8ef75-292">이러한 모든 특성 흐름은 하나의 동기화 규칙에 함께 배치됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-292">All these attribute flows are put together in one Synchronization Rule.</span></span>

<span data-ttu-id="8ef75-293">변환은 다른 형식을 가질 수 있습니다: 상수, 직접 및 식.</span><span class="sxs-lookup"><span data-stu-id="8ef75-293">A transformation can have different types: Constant, Direct, and Expression.</span></span>

* <span data-ttu-id="8ef75-294">일정한 흐름은 항상 하드 코딩된 값을 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-294">A constant flow always flows a hardcoded value.</span></span> <span data-ttu-id="8ef75-295">위의 경우 **accountEnabled**라는 메타버스 특성에서 값을 항상 **True**로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-295">In the case above, it always sets the value **True** in the metaverse attribute named **accountEnabled**.</span></span>
* <span data-ttu-id="8ef75-296">직접 흐름은 원본에 있는 특성의 값을 대상 특성에 항상 있는 그대로 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-296">A direct flow always flows the value of the attribute in the source to the target attribute as-is.</span></span>
* <span data-ttu-id="8ef75-297">세 번째 흐름 형식은 표현식으로, 더 많은 고급 구성에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-297">The third flow type is Expression and it allows for more advanced configurations.</span></span>

<span data-ttu-id="8ef75-298">표현식 언어는 VBA(Visual Basic for Applications)로 Microsoft Office 또는 VBScript의 경험을 가진 사람은 형식을 인식할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-298">The expression language is VBA (Visual Basic for Applications), so people with experience of Microsoft Office or VBScript will recognize the format.</span></span> <span data-ttu-id="8ef75-299">특성은 대괄호로 묶입니다(예: [attributeName]).</span><span class="sxs-lookup"><span data-stu-id="8ef75-299">Attributes are enclosed in square brackets, [attributeName].</span></span> <span data-ttu-id="8ef75-300">특성 이름 및 함수 이름은 대/소문자를 구분하지만 동기화 규칙 편집기는 표현식을 평가하여 표현식이 유효하지 않은 경우 경고를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-300">Attribute names and function names are case-sensitive, but the Synchronization Rules Editor evaluates the expressions and provide a warning if the expression is not valid.</span></span> <span data-ttu-id="8ef75-301">모든 표현식은 함수가 중첩된 단일 행으로 표현됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-301">All expressions are expressed on a single line with nested functions.</span></span> <span data-ttu-id="8ef75-302">다음은 구성 언어의 강력한 기능을 표시하기 위해 삽입된 추가 주석이 있는 pwdLastSet에 대한 흐름입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-302">To show the power of the configuration language, here is the flow for pwdLastSet, but with additional comments inserted:</span></span>

```
// If-then-else
IIF(
// (The evaluation for IIF) Is the attribute pwdLastSet present in AD?
IsPresent([pwdLastSet]),
// (The True part of IIF) If it is, then from right to left, convert the AD time format to a .Net datetime, change it to the time format used by Azure AD, and finally convert it to a string.
CStr(FormatDateTime(DateFromNum([pwdLastSet]),"yyyyMMddHHmmss.0Z")),
// (The False part of IIF) Nothing to contribute
NULL
)
```

<span data-ttu-id="8ef75-303">특성 흐름에 대한 식 언어의 자세한 내용은 [선언적 프로비전 식 이해](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) 를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8ef75-303">See [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md) for more information on the expression language for attribute flows.</span></span>

### <a name="precedence"></a><span data-ttu-id="8ef75-304">우선 순위</span><span class="sxs-lookup"><span data-stu-id="8ef75-304">Precedence</span></span>
<span data-ttu-id="8ef75-305">일부 개별 동기화 규칙을 살펴보았지만 규칙은 구성에서 함께 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-305">You have now looked at some individual Synchronization Rules, but the rules work together in the configuration.</span></span> <span data-ttu-id="8ef75-306">일부 경우에 특성 값은 여러 동기화 규칙에서 동일한 대상 특성에 기여합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-306">In some cases, an attribute value is contributed from multiple synchronization rules to the same target attribute.</span></span> <span data-ttu-id="8ef75-307">이 경우 특성 우선 순위는 어떤 특성이 이기는지를 결정하는 데 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-307">In this case, attribute precedence is used to determine which attribute wins.</span></span> <span data-ttu-id="8ef75-308">예를 들어 특성 sourceAnchor를 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-308">As an example, look at the attribute sourceAnchor.</span></span> <span data-ttu-id="8ef75-309">이 특성은 Azure AD에 로그인할 수 있는 중요한 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-309">This attribute is an important attribute to be able to sign in to Azure AD.</span></span> <span data-ttu-id="8ef75-310">**AD에서 들어오기 – 사용자 AccountEnabled** 및 **AD에서 들어오기 – 사용자 공통**이라는 다른 두 가지 동기화 규칙에서 이 특성에 대한 특성 흐름에 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-310">You can find an attribute flow for this attribute in two different Synchronization Rules, **In from AD – User AccountEnabled** and **In from AD – User Common**.</span></span> <span data-ttu-id="8ef75-311">동기화 규칙 우선 순위로 인해 메타버스 개체에 조인하는 개체가 있는 경우 sourceAnchor 특성은 사용하도록 설정된 계정을 사용하는 포리스트에서 먼저 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-311">Due to Synchronization Rule precedence, the sourceAnchor attribute is contributed from the forest with an enabled account first when there are several objects joined to the metaverse object.</span></span> <span data-ttu-id="8ef75-312">활성화된 계정이 없는 경우 동기화 엔진은 일반 동기화 규칙 **AD에서 들어오기 – 일반적인 사용자**를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-312">If there are no enabled accounts, then the sync engine uses the catch-all Synchronization Rule **In from AD – User Common**.</span></span> <span data-ttu-id="8ef75-313">이 구성은 비활성화된 계정에 대해서도 여전히 sourceAnchor가 있다는 것을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-313">This configuration ensures that even for accounts that are disabled, there is still a sourceAnchor.</span></span>

![동기화 규칙 인바운드](./media/active-directory-aadconnectsync-understanding-default-configuration/syncrulesinbound.png)

<span data-ttu-id="8ef75-315">동기화 규칙에 대한 우선 순위는 설치 마법사에 의해 그룹에 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-315">The precedence for Synchronization Rules is set in groups by the installation wizard.</span></span> <span data-ttu-id="8ef75-316">그룹의 모든 규칙은 동일한 이름을 갖지만 다른 연결된 디렉터리에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-316">All rules in a group have the same name, but they are connected to different connected directories.</span></span> <span data-ttu-id="8ef75-317">설치 마법사는 **AD에서 들어오기 – 사용자 조인** 규칙에 가장 높은 우선순위를 제공하고 모든 연결된 AD 디렉터리를 반복합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-317">The installation wizard gives the rule **In from AD – User Join** highest precedence and it iterates over all connected AD directories.</span></span> <span data-ttu-id="8ef75-318">그런 다음 미리 정의된 순서에 따라 규칙의 다음 그룹을 계속 진행합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-318">It then continues with the next groups of rules in a predefined order.</span></span> <span data-ttu-id="8ef75-319">그룹 내에서 규칙은 마법사에 추가된 커넥터의 순서로 추가됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-319">Inside a group, the rules are added in the order the Connectors were added in the wizard.</span></span> <span data-ttu-id="8ef75-320">다른 커넥터가 마법사를 통해 추가되면 동기화 규칙은 다시 정렬되고 새 커넥터의 규칙은 각 그룹에 마지막으로 삽입됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-320">If another Connector is added through the wizard, the Synchronization Rules are reordered and the new Connector’s rules are inserted last in each group.</span></span>

### <a name="putting-it-all-together"></a><span data-ttu-id="8ef75-321">모든 항목 요약</span><span class="sxs-lookup"><span data-stu-id="8ef75-321">Putting it all together</span></span>
<span data-ttu-id="8ef75-322">이제 다른 동기화 규칙을 사용하여 구성이 작동하는 방식을 이해할 수 있을 만큼 동기화 규칙에 대해 충분히 알고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-322">We now know enough about Synchronization Rules to be able to understand how the configuration works with the different Synchronization Rules.</span></span> <span data-ttu-id="8ef75-323">메타버스에도 제공된 사용자와 특성을 보면 다음과 같은 순서로 규칙이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-323">If you look at a user and the attributes that are contributed to the metaverse, the rules are applied in the following order:</span></span>

| <span data-ttu-id="8ef75-324">이름</span><span class="sxs-lookup"><span data-stu-id="8ef75-324">Name</span></span> | <span data-ttu-id="8ef75-325">주석</span><span class="sxs-lookup"><span data-stu-id="8ef75-325">Comment</span></span> |
|:--- |:--- |
| <span data-ttu-id="8ef75-326">AD에서 들어오기 – 사용자 조인</span><span class="sxs-lookup"><span data-stu-id="8ef75-326">In from AD – User Join</span></span> |<span data-ttu-id="8ef75-327">메타버스를 사용하여 커넥터 공간 개체에 조인시키기 위한 규칙.</span><span class="sxs-lookup"><span data-stu-id="8ef75-327">Rule for joining connector space objects with metaverse.</span></span> |
| <span data-ttu-id="8ef75-328">AD에서 들어오기 – 사용하도록 설정된 UserAccount</span><span class="sxs-lookup"><span data-stu-id="8ef75-328">In from AD – UserAccount Enabled</span></span> |<span data-ttu-id="8ef75-329">Azure AD 및 Office 365에 로그인하는 데 필요한 속성.</span><span class="sxs-lookup"><span data-stu-id="8ef75-329">Attributes required for sign-in to Azure AD and Office 365.</span></span> <span data-ttu-id="8ef75-330">사용된 계정에서 이러한 특성이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-330">We want these attributes from the enabled account.</span></span> |
| <span data-ttu-id="8ef75-331">AD에서 들어오기 – Exchange에서 사용자 공통</span><span class="sxs-lookup"><span data-stu-id="8ef75-331">In from AD – User Common from Exchange</span></span> |<span data-ttu-id="8ef75-332">전체 주소 목록에 있는 특성.</span><span class="sxs-lookup"><span data-stu-id="8ef75-332">Attributes found in the Global Address List.</span></span> <span data-ttu-id="8ef75-333">사용자의 사서함이 위치한 포리스트에서 데이터 품질이 가장 훌륭하다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-333">We assume the data quality is best in the forest where we have found the user’s mailbox.</span></span> |
| <span data-ttu-id="8ef75-334">AD에서 들어오기 – 사용자 공통</span><span class="sxs-lookup"><span data-stu-id="8ef75-334">In from AD – User Common</span></span> |<span data-ttu-id="8ef75-335">전체 주소 목록에 있는 특성.</span><span class="sxs-lookup"><span data-stu-id="8ef75-335">Attributes found in the Global Address List.</span></span> <span data-ttu-id="8ef75-336">사서함을 찾지 못한 경우에 다른 조인된 개체가 특성 값을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-336">In case we didn’t find a mailbox, any other joined object can contribute the attribute value.</span></span> |
| <span data-ttu-id="8ef75-337">AD에서 들어오기 – 사용자 Exchange</span><span class="sxs-lookup"><span data-stu-id="8ef75-337">In from AD – User Exchange</span></span> |<span data-ttu-id="8ef75-338">Exchange가 감지되는 경우에만 존재합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-338">Only exists if Exchange has been detected.</span></span> <span data-ttu-id="8ef75-339">인프라 Exchange 특성을 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-339">It flows all infrastructure Exchange attributes.</span></span> |
| <span data-ttu-id="8ef75-340">AD에서 들어오기 – 사용자 Lync</span><span class="sxs-lookup"><span data-stu-id="8ef75-340">In from AD – User Lync</span></span> |<span data-ttu-id="8ef75-341">Lync가 감지되는 경우에만 존재합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-341">Only exists if Lync has been detected.</span></span> <span data-ttu-id="8ef75-342">모든 인프라 Lync 특성을 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-342">It flows all infrastructure Lync attributes.</span></span> |

## <a name="next-steps"></a><span data-ttu-id="8ef75-343">다음 단계</span><span class="sxs-lookup"><span data-stu-id="8ef75-343">Next steps</span></span>
* <span data-ttu-id="8ef75-344">[선언적 프로비전 이해](active-directory-aadconnectsync-understanding-declarative-provisioning.md)에서 구성 모델에 대해 자세히 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-344">Read more about the configuration model in [Understanding Declarative Provisioning](active-directory-aadconnectsync-understanding-declarative-provisioning.md).</span></span>
* <span data-ttu-id="8ef75-345">[선언적 프로비전 식 이해](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md)에서 식 언어에 대해 자세히 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="8ef75-345">Read more about the expression language in [Understanding Declarative Provisioning Expressions](active-directory-aadconnectsync-understanding-declarative-provisioning-expressions.md).</span></span>
* <span data-ttu-id="8ef75-346">기본 구성이 [사용자 및 연락처 이해](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span><span class="sxs-lookup"><span data-stu-id="8ef75-346">Continue reading how the out-of-box configuration works in [Understanding Users and Contacts](active-directory-aadconnectsync-understanding-users-and-contacts.md)</span></span>
* <span data-ttu-id="8ef75-347">[기본 구성으로 변경하는 방법](active-directory-aadconnectsync-change-the-configuration.md)에서 선언적 프로비전을 사용하여 실용적으로 변경하는 방법을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="8ef75-347">See how to make a practical change using declarative provisioning in [How to make a change to the default configuration](active-directory-aadconnectsync-change-the-configuration.md).</span></span>

<span data-ttu-id="8ef75-348">**개요 항목**</span><span class="sxs-lookup"><span data-stu-id="8ef75-348">**Overview topics**</span></span>

* [<span data-ttu-id="8ef75-349">Azure AD Connect 동기화: 동기화의 이해 및 사용자 지정</span><span class="sxs-lookup"><span data-stu-id="8ef75-349">Azure AD Connect sync: Understand and customize synchronization</span></span>](active-directory-aadconnectsync-whatis.md)
* [<span data-ttu-id="8ef75-350">Azure Active Directory와 온-프레미스 ID 통합</span><span class="sxs-lookup"><span data-stu-id="8ef75-350">Integrating your on-premises identities with Azure Active Directory</span></span>](active-directory-aadconnect.md)

