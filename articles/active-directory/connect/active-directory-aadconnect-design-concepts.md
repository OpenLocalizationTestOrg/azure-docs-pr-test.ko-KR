---
title: "Azure AD Connect: 설계 개념 | Microsoft Docs"
description: "이 항목에서는 특정 구현 설계 영역을 자세히 설명합니다."
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: f23443d438c95a784f655fb9a5f20dfcf37be189
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/03/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="16471-103">Azure AD Connect: 설계 개념</span><span class="sxs-lookup"><span data-stu-id="16471-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="16471-104">이 항목에서는 Azure AD Connect의 설계를 구현하는 중에 고려해야 할 영역을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-104">The purpose of this topic is to describe areas that must be thought through during the implementation design of Azure AD Connect.</span></span> <span data-ttu-id="16471-105">이 항목은 특정 영역을 심층 분석하고 이 개념을 다른 항목에서처럼 간단히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="16471-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="16471-106">sourceAnchor</span></span>
<span data-ttu-id="16471-107">sourceAnchor 특성은 *개체의 수명 동안 변경할 수 없는 속성*으로 정의됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-107">The sourceAnchor attribute is defined as *an attribute immutable during the lifetime of an object*.</span></span> <span data-ttu-id="16471-108">온-프레미스와 Azure AD의 동일한 개체처럼 개체를 고유하게 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-108">It uniquely identifies an object as being the same object on-premises and in Azure AD.</span></span> <span data-ttu-id="16471-109">이 특성은 **immutableId** 라고도 하며 두 이름을 서로 바꿔 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-109">The attribute is also called **immutableId** and the two names are used interchangeable.</span></span>

<span data-ttu-id="16471-110">변경이 불가능한 말(즉, “변경할 수 없음”)은 이 항목에서 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-110">The word immutable, that is "cannot be changed", is important to this topic.</span></span> <span data-ttu-id="16471-111">이 특성의 값은 한번 설정된 후에는 변경할 수 없기 때문에 시나리오를 지원하는 설계를 선택하는 것이 중요합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-111">Since this attribute’s value cannot be changed after it has been set, it is important to pick a design that supports your scenario.</span></span>

<span data-ttu-id="16471-112">이 특성은 다음 시나리오에서 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-112">The attribute is used for the following scenarios:</span></span>

* <span data-ttu-id="16471-113">새 동기화 엔진 서버를 구축하거나 재해 복구 시나리오를 다시 구축할 때,이 특성은 개체 온-프레미스의 Azure AD 내의 기존 개체에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="16471-114">클라우드 전용 ID에서 동기화 ID 모델로 이동하면 이 특성은 온-프레미스 개체를 포함한 Azure AD의 “완전 일치”하는 기존 개체에 개체를 허용합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-114">If you move from a cloud-only identity to a synchronized identity model, then this attribute allows objects to "hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="16471-115">페더레이션을 사용하면 **userPrincipalName** 을 포함한 특성은 사용자를 고유하게 식별하는 클레임에서 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-115">If you use federation, then this attribute together with the **userPrincipalName** is used in the claim to uniquely identify a user.</span></span>

<span data-ttu-id="16471-116">이 항목에서는 사용자와 관련이 있는 sourceAnchor만 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-116">This topic only talks about sourceAnchor as it relates to users.</span></span> <span data-ttu-id="16471-117">동일한 규칙이 모든 개체 형식에 적용되나 이 문제가 주로 관련이 있는 사용자에게만 해당됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-117">The same rules apply to all object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="16471-118">알맞은 sourceAnchor 특성을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="16471-119">특성 값은 다음 규칙을 따라야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-119">The attribute value must follow the following rules:</span></span>

* <span data-ttu-id="16471-120">길이는 60자 미만이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="16471-121">문자가 a-z, A-Z 또는 0-9가 아니면 인코드되고 3개의 문자로 계산됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="16471-122">&#92; !</span><span class="sxs-lookup"><span data-stu-id="16471-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="16471-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="16471-123"># $ % & * + / = ?</span></span> <span data-ttu-id="16471-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="16471-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="16471-125">전역적으로 고유해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-125">Must be globally unique</span></span>
* <span data-ttu-id="16471-126">문자열, 정수 또는 이진이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="16471-127">사용자 이름을 기반으로 할 수 없습니다. 사용자 이름은 변경됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="16471-128">대/소문자를 구분할 수 없으며 대/소문자에 따라 달라질 수 있는 값을 사용하지 않도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="16471-129">개체를 만들 때 할당되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-129">Should be assigned when the object is created</span></span>

<span data-ttu-id="16471-130">선택된 sourceAnchor가 문자열 형식이 아닌 경우 Azure AD Connect는 특성 값에 특수 문자가 나타나지 않도록 Base64로 인코딩합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-130">If the selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode the attribute value to ensure no special characters appear.</span></span> <span data-ttu-id="16471-131">ADFS 이외의 다른 페더레이션 서버를 사용할 경우 서버의 특성이 Base64Encode일 수 있는지 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="16471-131">If you use another federation server than ADFS, make sure your server can also Base64Encode the attribute.</span></span>

<span data-ttu-id="16471-132">SourceAnchor 특성은 대/소문자를 구분합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-132">The sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="16471-133">"JohnDoe"의 값은 "johndoe"와 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="16471-133">A value of “JohnDoe” is not the same as “johndoe”.</span></span> <span data-ttu-id="16471-134">하지만 대/소문자만 다른 두 개체가 있어서는 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="16471-135">단일 포리스트 온-프레미스가 있는 경우 사용해야 할 특성은 **objectGUID**입니다.</span><span class="sxs-lookup"><span data-stu-id="16471-135">If you have a single forest on-premises, then the attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="16471-136">Azure AD Connect에서 사용되는 express 설정을 사용할 때 사용되는 특성이기도 하며 DirSync가 사용하는 특성이기도 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-136">This is also the attribute used when you use express settings in Azure AD Connect and also the attribute used by DirSync.</span></span>

<span data-ttu-id="16471-137">여러 포리스트가 있고 사용자를 포리스트 및 도메인 간에 이동하지 않는 경우 **objectGUID** 특성을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute to use even in this case.</span></span>

<span data-ttu-id="16471-138">포리스트 및 도메인 간에 사용자를 이동하는 경우 변경되지 않거나 이동 중 사용자와 함께 이동할 수 있는 특성을 찾아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with the users during the move.</span></span> <span data-ttu-id="16471-139">가상 특성을 도입하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-139">A recommended approach is to introduce a synthetic attribute.</span></span> <span data-ttu-id="16471-140">GUID처럼 보이는 것을 포함할 수 있는 특성이 적합합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="16471-141">개체가 생성되는 동안 새 GUID는 생성되고 사용자에게 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-141">During object creation, a new GUID is created and stamped on the user.</span></span> <span data-ttu-id="16471-142">동기화 엔진 서버에서 사용자 지정 동기화 규칙을 만들어 **objectGUID** 에 따라 이 값을 만들고 ADDS에서 선택한 특성을 업데이트할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-142">A custom sync rule can be created in the sync engine server to create this value based on the **objectGUID** and update the selected attribute in ADDS.</span></span> <span data-ttu-id="16471-143">개체를 이동할 때, 이 값의 콘텐츠도 복사했는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-143">When you move the object, make sure to also copy the content of this value.</span></span>

<span data-ttu-id="16471-144">다른 솔루션은 변경되지 않는 것을 알고 있는 기존 특성을 선택하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="16471-144">Another solution is to pick an existing attribute you know does not change.</span></span> <span data-ttu-id="16471-145">일반적으로 사용되는 특성에는 **employeeID**가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="16471-146">문자를 포함하는 특성을 고려하는 경우 특성 값의 대/소문자가 변경될 수 있는 가능성이 없는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-146">If you consider an attribute that contains letters, make sure there is no chance the case (upper case vs. lower case) can change for the attribute's value.</span></span> <span data-ttu-id="16471-147">나쁜 속성은 사용자 이름의 해당 속성을 포함하여 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-147">Bad attributes that should not be used include those attributes with the name of the user.</span></span> <span data-ttu-id="16471-148">결혼 또는 이혼해서 이름을 바꿔야 하는 경우에도 이 특성에서는 허용되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-148">In a marriage or divorce, the name is expected to change, which is not allowed for this attribute.</span></span> <span data-ttu-id="16471-149">**userPrincipalName**, **mail** 및 **targetAddress**와 같은 특성을 Azure AD Connect 설치 마법사에서 선택할 수 없는 이유이기도 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible to select in the Azure AD Connect installation wizard.</span></span> <span data-ttu-id="16471-150">이러한 특성은 sourceAnchor에서 허용되지 않는 "@" 문자도 포함하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-150">Those attributes also contain the "@" character, which is not allowed in the sourceAnchor.</span></span>

### <a name="changing-the-sourceanchor-attribute"></a><span data-ttu-id="16471-151">SourceAnchor 특성 변경</span><span class="sxs-lookup"><span data-stu-id="16471-151">Changing the sourceAnchor attribute</span></span>
<span data-ttu-id="16471-152">sourceAnchor 특성값은 개체가 Azure AD에 생성되고 ID가 동기화된 후에는 값을 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-152">The sourceAnchor attribute value cannot be changed after the object has been created in Azure AD and the identity is synchronized.</span></span>

<span data-ttu-id="16471-153">이러한 이유로 Azure AD Connect에는 다음과 같은 제한사항이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-153">For this reason, the following restrictions apply to Azure AD Connect:</span></span>

* <span data-ttu-id="16471-154">SourceAnchor 특성은 오직 초기 설치 동안에만 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-154">The sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="16471-155">설치 마법사를 다시 실행하는 경우 이 옵션은 읽기 전용입니다.</span><span class="sxs-lookup"><span data-stu-id="16471-155">If you rerun the installation wizard, this option is read-only.</span></span> <span data-ttu-id="16471-156">이 설정을 변경해야 할 경우 제거하고 다시 설치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-156">If you need to change this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="16471-157">다른 Azure AD Connect 서버를 설치한 경우 이전에 사용했던 동일한 sourceAnchor 특성을 선택해야만 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-157">If you install another Azure AD Connect server, then you must select the same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="16471-158">이전부터 DirSync를 사용했으며 Azure AD Connect로 이동한 경우 DirSync에서 사용했던 특성이므로 **objectGUID** 를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-158">If you have earlier been using DirSync and move to Azure AD Connect, then you must use **objectGUID** since that is the attribute used by DirSync.</span></span>
* <span data-ttu-id="16471-159">개체를 Azure AD로 내보낸 후 sourceAnchor 값이 변경된 경우 Azure AD Connect 동기화는 오류가 발생하고 문제가 해결되거나 sourceAnchor를 소스 디렉터리에 원상 복귀시키기 전까지는 어떠한 변경도 허용하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-159">If the value for sourceAnchor is changed after the object has been exported to Azure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before the issue has been fixed and the sourceAnchor is changed back in the source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="16471-160">msDS-ConsistencyGuid를 sourceAnchor로 사용</span><span class="sxs-lookup"><span data-stu-id="16471-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="16471-161">기본적으로 Azure AD Connect(버전 1.1.486.0 이상)는 objectGUID를 sourceAnchor 특성으로 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as the sourceAnchor attribute.</span></span> <span data-ttu-id="16471-162">ObjectGUID는 시스템에서 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="16471-163">온-프레미스 AD 개체를 만들 때는 해당 값을 지정할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="16471-164">[sourceAnchor](#sourceanchor) 섹션에서 설명한 대로 sourceAnchor 값을 지정해야 하는 시나리오가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need to specify the sourceAnchor value.</span></span> <span data-ttu-id="16471-165">시나리오를 적용할 수 있는 경우 구성 가능한 AD 특성(예: msDS-ConsistencyGuid)을 sourceAnchor 특성으로 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-165">If the scenarios are applicable to you, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as the sourceAnchor attribute.</span></span>

<span data-ttu-id="16471-166">Azure AD Connect(버전 1.1.524.0 이상)는 이제 msDS-ConsistencyGuid를 sourceAnchor 특성으로 더 쉽게 사용할 수 있게 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates the use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="16471-167">이 기능을 사용하면 Azure AD Connect에서 동기화 규칙을 다음과 같이 자동으로 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-167">When using this feature, Azure AD Connect automatically configures the synchronization rules to:</span></span>

1. <span data-ttu-id="16471-168">User 개체에 대한 sourceAnchor 특성으로 msDS-ConsistencyGuid를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-168">Use msDS-ConsistencyGuid as the sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="16471-169">ObjectGUID는 다른 개체 형식에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="16471-170">msDS-ConsistencyGuid 특성이 채워지지 않은 지정된 모든 온-프레미스 AD User 개체의 경우 Azure AD Connect는 해당 objectGUID 값을 온-프레미스 Active Directory의 msDS-ConsistencyGuid 특성에 다시 씁니다.</span><span class="sxs-lookup"><span data-stu-id="16471-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="16471-171">msDS-ConsistencyGuid 특성이 채워지면 Azure AD Connect는 개체를 Azure AD로 내보냅니다.</span><span class="sxs-lookup"><span data-stu-id="16471-171">After the msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports the object to Azure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="16471-172">온-프레미스 AD 개체를 Azure AD Connect로 가져오면(즉, AD 커넥터 공간으로 가져와서 메타버스에 투영하면) sourceAnchor 값을 더 이상 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into the AD Connector Space and projected into the Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="16471-173">지정된 온-프레미스 AD 개체에 대한 sourceAnchor 값을 지정하려면 Azure AD Connect로 가져오기 전에 해당 msDS-ConsistencyGuid 특성을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-173">To specify the sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="16471-174">필요한 권한</span><span class="sxs-lookup"><span data-stu-id="16471-174">Permission required</span></span>
<span data-ttu-id="16471-175">이 기능을 사용하려면 온-프레미스 Active Directory와 동기화하는 데 사용되는 AD DS 계정에 온-프레미스 Active Directory의 msDS-ConsistencyGuid 특성에 대한 쓰기 권한을 부여해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-175">For this feature to work, the AD DS account used to synchronize with on-premises Active Directory must be granted write permission to the msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature---new-installation"></a><span data-ttu-id="16471-176">ConsistencyGuid 기능을 사용하도록 설정하는 방법 - 새로 설치</span><span class="sxs-lookup"><span data-stu-id="16471-176">How to enable the ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="16471-177">새로 설치하는 동안 sourceAnchor로 ConsistencyGuid 사용을 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-177">You can enable the use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="16471-178">이 섹션에서는 기본 설치 및 사용자 지정 설치를 자세히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="16471-179">최신 버전의 Azure AD Connect(1.1.524.0 이상)만 새로 설치하는 동안 sourceAnchor로 ConsistencyGuid 사용을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports the use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-to-enable-the-consistencyguid-feature"></a><span data-ttu-id="16471-180">ConsistencyGuid 기능을 사용하도록 설정하는 방법</span><span class="sxs-lookup"><span data-stu-id="16471-180">How to enable the ConsistencyGuid feature</span></span>
<span data-ttu-id="16471-181">현재 이 기능은 새 Azure AD Connect를 설치하는 중에만 사용하도록 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-181">Currently, the feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="16471-182">기본 설치</span><span class="sxs-lookup"><span data-stu-id="16471-182">Express Installation</span></span>
<span data-ttu-id="16471-183">Azure AD Connect를 기본 모드로 설치하는 경우 Azure AD Connect 마법사에서 다음 논리를 사용하여 sourceAnchor 특성으로 사용할 가장 적절한 AD 특성을 자동으로 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-183">When installing Azure AD Connect with Express mode, the Azure AD Connect wizard automatically determines the most appropriate AD attribute to use as the sourceAnchor attribute using the following logic:</span></span>

* <span data-ttu-id="16471-184">먼저 Azure AD Connect 마법사에서 Azure AD 테넌트를 쿼리하여 이전 Azure AD Connect 설치(있는 경우)에서 sourceAnchor 특성으로 사용된 AD 특성을 검색합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-184">First, the Azure AD Connect wizard queries your Azure AD tenant to retrieve the AD attribute used as the sourceAnchor attribute in the previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="16471-185">이 정보를 사용할 수 있으면 Azure AD Connect는 동일한 AD 특성을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-185">If this information is available, Azure AD Connect uses the same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="16471-186">최신 버전의 Azure AD Connect(1.1.524.0 이상)만 설치하는 동안 사용된 sourceAnchor 특성에 대한 정보를 Azure AD 테넌트에 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about the sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="16471-187">이전 버전의 Azure AD Connect는 그렇지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="16471-188">사용되는 sourceAnchor 특성에 대한 정보를 사용할 수 없는 경우 마법사는 온-프레미스 Active Directory의 msDS-ConsistencyGuid 특성의 상태를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-188">If information about the sourceAnchor attribute used isn't available, the wizard checks the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="16471-189">특성이 디렉터리에 있는 모든 개체에 구성되어 있지 않으면, 마법사에서 msDS-ConsistencyGuid를 sourceAnchor 특성으로 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-189">If the attribute isn't configured on any object in the directory, the wizard uses the msDS-ConsistencyGuid as the sourceAnchor attribute.</span></span> <span data-ttu-id="16471-190">특성이 디렉터리에 있는 하나 이상의 개체에 구성되어 있으면, 마법사에서 특성이 다른 응용 프로그램에서 사용되고 있으며 sourceAnchor 특성으로 적합하지 않다고 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-190">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="16471-191">이 경우 마법사는 objectGUID를 sourceAnchor 특성으로 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-191">In which case, the wizard falls back to using objectGUID as the sourceAnchor attribute.</span></span>

* <span data-ttu-id="16471-192">sourceAnchor 특성이 결정되면 마법사는 Azure AD 테넌트에 해당 정보를 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-192">Once the sourceAnchor attribute is decided, the wizard stores the information in your Azure AD tenant.</span></span> <span data-ttu-id="16471-193">이 정보는 나중에 Azure AD Connect를 설치할 때 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-193">The information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="16471-194">기본 설치가 완료되면 마법사에서 원본 앵커 특성으로 선택된 특성을 사용자에게 알려줍니다.</span><span class="sxs-lookup"><span data-stu-id="16471-194">Once Express installation completes, the wizard informs you which attribute has been picked as the Source Anchor attribute.</span></span>

![sourceAnchor로 선택된 AD 특성을 알려주는 마법사](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="16471-196">사용자 지정 설치</span><span class="sxs-lookup"><span data-stu-id="16471-196">Custom installation</span></span>
<span data-ttu-id="16471-197">Azure AD Connect를 사용자 지정 모드로 설치하는 경우 Azure AD Connect 마법사에서 sourceAnchor 특성을 구성할 때 다음 두 가지 옵션을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-197">When installing Azure AD Connect with Custom mode, the Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![사용자 지정 설치 - sourceAnchor 구성](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="16471-199">설정</span><span class="sxs-lookup"><span data-stu-id="16471-199">Setting</span></span> | <span data-ttu-id="16471-200">설명</span><span class="sxs-lookup"><span data-stu-id="16471-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="16471-201">Let Azure manage the source anchor for me(Azure에서 원본 앵커를 대신 관리)</span><span class="sxs-lookup"><span data-stu-id="16471-201">Let Azure manage the source anchor for me</span></span> | <span data-ttu-id="16471-202">Azure AD에서 이 특성을 선택하게 하려면 이 옵션을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-202">Select this option if you want Azure AD to pick the attribute for you.</span></span> <span data-ttu-id="16471-203">이 옵션을 선택하면 Azure AD Connect 마법사에서 [기본 설치에서 사용된 것과 동일한 sourceAnchor 특성 선택 논리](#express-installation)를 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-203">If you select this option, Azure AD Connect wizard applies the same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="16471-204">기본 설치와 마찬가지로 사용자 정의 설치가 완료되면 마법사에서 원본 앵커 특성으로 선택된 특성을 사용자에게 알려줍니다.</span><span class="sxs-lookup"><span data-stu-id="16471-204">Similar to Express installation, the wizard informs you which attribute has been picked as the Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="16471-205">특정 특성</span><span class="sxs-lookup"><span data-stu-id="16471-205">A specific attribute</span></span> | <span data-ttu-id="16471-206">기존 AD 특성을 sourceAnchor 특성으로 지정하려면 이 옵션을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-206">Select this option if you wish to specify an existing AD attribute as the sourceAnchor attribute.</span></span> |

### <a name="how-to-enable-the-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="16471-207">ConsistencyGuid 기능을 사용하도록 설정하는 방법 - 기존 배포</span><span class="sxs-lookup"><span data-stu-id="16471-207">How to enable the ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="16471-208">Source Anchor 특성으로 objectGUID를 사용하는 기존 Azure AD Connect 배포가 있는 경우 ConsistencyGuid를 대신 사용하도록 전환할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-208">If you have an existing Azure AD Connect deployment which is using objectGUID as the Source Anchor attribute, you can switch it to using ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="16471-209">최신 버전의 Azure AD Connect(1.1.552.0 이상)만 Source Anchor 특성으로 ObjectGuid에서 ConsistencyGuid로의 전환을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid to ConsistencyGuid as the Source Anchor attribute.</span></span>

<span data-ttu-id="16471-210">Source Anchor 특성으로 objectGUID에서 ConsistencyGuid로 전환하려면:</span><span class="sxs-lookup"><span data-stu-id="16471-210">To switch from objectGUID to ConsistencyGuid as the Source Anchor attribute:</span></span>

1. <span data-ttu-id="16471-211">Azure AD Connect 마법사를 시작하고 **구성**을 클릭하여 작업 화면으로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-211">Start the Azure AD Connect wizard and click **Configure** to go to the Tasks screen.</span></span>

2. <span data-ttu-id="16471-212">**Source Anchor 구성** 작업 옵션을 선택하고 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-212">Select the **Configure Source Anchor** task option and click **Next**.</span></span>

   ![기존 배포에 대해 ConsistencyGuid 사용 - 2단계](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="16471-214">Azure AD 관리자 자격 증명을 입력하고 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="16471-215">Azure AD Connect 마법사에서 온-프레미스 Active Directory의 msDS-ConsistencyGuid 특성 상태를 분석합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-215">Azure AD Connect wizard analyzes the state of the msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="16471-216">특성이 디렉터리의 개체에서 구성되지 않는 경우 Azure AD Connect는 다른 응용 프로그램이 현재 특성을 사용하지 않고 있으며 Source Anchor 특성으로 사용하는 데 안전하다고 판단합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-216">If the attribute isn't configured on any object in the directory, Azure AD Connect concludes that no other application is currently using the attribute and is safe to use it as the Source Anchor attribute.</span></span> <span data-ttu-id="16471-217">**다음**을 클릭하여 계속합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-217">Click **Next** to continue.</span></span>

   ![기존 배포에 대해 ConsistencyGuid 사용 - 4단계](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="16471-219">**구성할 준비 완료** 화면에서 **구성**을 클릭하여 구성을 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-219">In the **Ready to Configure** screen, click **Configure** to make the configuration change.</span></span>

   ![기존 배포에 대해 ConsistencyGuid 사용 - 5단계](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="16471-221">구성이 완료되면 마법사는 msDS-ConsistencyGuid가 Source Anchor 특성으로 사용되고 있음을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="16471-221">Once the configuration completes, the wizard indicates that msDS-ConsistencyGuid is now being used as the Source Anchor attribute.</span></span>

   ![기존 배포에 대해 ConsistencyGuid 사용 - 6단계](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="16471-223">분석하는 동안(4단계) 특성이 디렉터리에 있는 하나 이상의 개체에 구성되어 있으면, 마법사에서 특성이 다른 응용 프로그램에서 사용되고 있다고 결정하고 아래 그림과 같은 오류를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-223">During the analysis (step 4), if the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by another application and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="16471-224">기존 응용 프로그램에서 특성을 사용하지 않는다고 확신하는 경우, 오류를 표시하지 않는 방법에 대한 정보를 얻기 위해 지원에 문의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-224">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![기존 배포에 대해 ConsistencyGuid 사용 - 오류](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="16471-226">AD FS 또는 타사 페더레이션 구성에 미치는 영향</span><span class="sxs-lookup"><span data-stu-id="16471-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="16471-227">Azure AD Connect를 사용하여 온-프레미스 AD FS 배포를 관리하는 경우, Azure AD Connect에서 클레임 규칙을 자동으로 업데이트하여 sourceAnchor와 동일한 AD 특성을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-227">If you are using Azure AD Connect to manage on-premises AD FS deployment, the Azure AD Connect automatically updates the claim rules to use the same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="16471-228">이렇게 하면 AD FS에서 생성된 ImmutableID 클레임이 Azure AD로 내보낸 sourceAnchor 값과 일치하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-228">This ensures that the ImmutableID claim generated by ADFS is consistent with the sourceAnchor values exported to Azure AD.</span></span>

<span data-ttu-id="16471-229">Azure AD Connect 외부에서 AD FS를 관리하거나 타사 페더레이션 서버를 사용하여 인증하는 경우, [AD FS 클레임 규칙 수정](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims) 문서 섹션에서 설명한 대로 Azure AD로 내보낸 sourceAnchor 값과 일치하도록 ImmutableID 클레임에 대한 클레임 규칙을 수동으로 업데이트해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update the claim rules for ImmutableID claim to be consistent with the sourceAnchor values exported to Azure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="16471-230">설치가 완료되면 마법사에서 다음과 같은 경고를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-230">The wizard returns the following warning after installation completes:</span></span>

![타사 페더레이션 구성](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-to-existing-deployment"></a><span data-ttu-id="16471-232">기존 배포에 새 디렉터리 추가</span><span class="sxs-lookup"><span data-stu-id="16471-232">Adding new directories to existing deployment</span></span>
<span data-ttu-id="16471-233">활성화된 ConsistencyGuid 기능으로 Azure AD Connect를 배포한 후에 이제 다른 디렉터리를 배포에 추가하려고 한다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-233">Suppose you have deployed Azure AD Connect with the ConsistencyGuid feature enabled, and now you would like to add another directory to the deployment.</span></span> <span data-ttu-id="16471-234">디렉터리를 추가하려고 하는 경우 Azure AD Connect 마법사에서 디렉터리의 mSDS-ConsistencyGuid 특성 상태를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-234">When you try to add the directory, Azure AD Connect wizard checks the state of the mSDS-ConsistencyGuid attribute in the directory.</span></span> <span data-ttu-id="16471-235">특성이 디렉터리에 있는 하나 이상의 개체에 구성되어 있으면, 마법사에서 특성이 다른 응용 프로그램에서 사용되고 있다고 결정하고 아래 그림과 같은 오류를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-235">If the attribute is configured on one or more objects in the directory, the wizard concludes the attribute is being used by other applications and returns an error as illustrated in the diagram below.</span></span> <span data-ttu-id="16471-236">기존 응용 프로그램에서 특성을 사용하지 않는다고 확신하는 경우, 오류를 표시하지 않는 방법에 대한 정보를 얻기 위해 지원에 문의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-236">If you are certain that the attribute isn't used by existing applications, you need to contact Support for information on how to suppress the error.</span></span>

![기존 배포에 새 디렉터리 추가](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="16471-238">Azure AD 로그인</span><span class="sxs-lookup"><span data-stu-id="16471-238">Azure AD sign-in</span></span>
<span data-ttu-id="16471-239">Azure AD와 온-프레미스 디렉터리를 통합하는 동안 동기화 설정이 사용자가 인증하는 방식에 어떤 영향을 주는지를 이해해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-239">While integrating your on-premises directory with Azure AD, it is important to understand how the synchronization settings can affect the way user authenticates.</span></span> <span data-ttu-id="16471-240">Azure AD는 UPN(userPrincipalName)을 사용하여 사용자를 인증합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-240">Azure AD uses userPrincipalName (UPN) to authenticate the user.</span></span> <span data-ttu-id="16471-241">그러나 사용자를 동기화할 경우 신중하게 userPrincipalName의 값에 사용할 특성을 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-241">However, when you synchronize your users, you must choose the attribute to be used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-the-attribute-for-userprincipalname"></a><span data-ttu-id="16471-242">userPrincipalName의 특성 선택</span><span class="sxs-lookup"><span data-stu-id="16471-242">Choosing the attribute for userPrincipalName</span></span>
<span data-ttu-id="16471-243">Azure에서 사용할 UPN의 값을 제공하기 위해 특성을 선택하는 경우 다음을 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-243">When you are selecting the attribute for providing the value of UPN to be used in Azure one should ensure</span></span>

* <span data-ttu-id="16471-244">특성 값은 UPN 구문(RFC 822)을 맞춥니다. 즉, username@domain 형식이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-244">The attribute values conform to the UPN syntax (RFC 822), that is it should be of the format username@domain</span></span>
* <span data-ttu-id="16471-245">값의 접미사는 Azure AD에서 확인된 사용자 지정 도메인 중 하나에 일치합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-245">The suffix in the values matches to one of the verified custom domains in Azure AD</span></span>

<span data-ttu-id="16471-246">Express 설정에서 특성에 userPrincipalName을 선택할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="16471-246">In express settings, the assumed choice for the attribute is userPrincipalName.</span></span> <span data-ttu-id="16471-247">userPrincipalName 특성에 사용자가 Azure에 로그인하는 데 사용하려는 값이 포함되지 않은 경우 **사용자 지정 설치**를 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-247">If the userPrincipalName attribute does not contain the value you want your users to sign in to Azure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="16471-248">사용자 지정 도메인 상태 및 UPN</span><span class="sxs-lookup"><span data-stu-id="16471-248">Custom domain state and UPN</span></span>
<span data-ttu-id="16471-249">UPN 접미사에 확인된 도메인이 있는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-249">It is important to ensure that there is a verified domain for the UPN suffix.</span></span>

<span data-ttu-id="16471-250">John은 contoso.com의 사용자입니다.</span><span class="sxs-lookup"><span data-stu-id="16471-250">John is a user in contoso.com.</span></span> <span data-ttu-id="16471-251">사용자를 Azure AD 디렉터리 contoso.onmicrosoft.com에 동기화한 후에 John이 Azure에 로그인하는 데 온-프레미스 UPN john@contoso.com 을 사용하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-251">You want John to use the on-premises UPN john@contoso.com to sign in to Azure after you have synced users to your Azure AD directory contoso.onmicrosoft.com.</span></span> <span data-ttu-id="16471-252">이렇게 하려면 사용자를 동기화하기 전에 Azure AD에서 contoso.com을 사용자 지정 도메인으로 추가하고 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-252">To do so, you need to add and verify contoso.com as a custom domain in Azure AD before you can start syncing the users.</span></span> <span data-ttu-id="16471-253">John의 UPN 접미사(예: contoso.com)가 Azure AD에서 확인된 도메인과 일치하지 않으면 Azure AD는 UPN 접미사를 contoso.onmicrosoft.com으로 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="16471-253">If the UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces the UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="16471-254">라우팅할 수 있는 온-프레미스가 아닌 도메인 및 Azure AD에 대한 UPN</span><span class="sxs-lookup"><span data-stu-id="16471-254">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="16471-255">일부 조직에는 라우팅할 수 없는 도메인(예: contoso.local) 또는 간단한 단일 레이블 도메인(예: contoso)이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-255">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="16471-256">Azure AD에서 라우팅할 수 없는 도메인을 확인할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-256">You are not able to verify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="16471-257">Azure AD Connect는 Azure AD에서 확인된 도메인에 동기화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-257">Azure AD Connect can sync to only a verified domain in Azure AD.</span></span> <span data-ttu-id="16471-258">Azure AD 디렉터리를 만들면 라우팅 가능한 도메인을 만들고 다시 Azure AD에 대한 기본 도메인(예: contoso.onmicrosoft.com)이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-258">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com.</span></span> <span data-ttu-id="16471-259">따라서 기본 도메인(onmicrosoft.com)에 동기화하지 않으려는 경우 이 시나리오에서 라우팅할 수 있는 다른 도메인을 확인하는 데 필요하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="16471-259">Therefore, it becomes necessary to verify any other routable domain in such a scenario in case you don't want to sync to the default onmicrosoft.com domain.</span></span>

<span data-ttu-id="16471-260">도메인을 추가하고 확인하는 방법에 대한 자세한 내용은 [Azure Active Directory에 사용자 지정 도메인 이름 추가](../active-directory-add-domain.md) 를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="16471-260">Read [Add your custom domain name to Azure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="16471-261">Azure AD Connect는 라우팅할 수 없는 도메인 환경에서 실행하는지를 검색하고 Express 설정을 계속 진행하는 경우 적절하게 경고합니다.</span><span class="sxs-lookup"><span data-stu-id="16471-261">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="16471-262">라우팅할 수 없는 도메인에서 작업하는 경우 사용자의 UPN이 라우팅할 수 없는 접미사를 포함할 가능성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-262">If you are operating in a non-routable domain, then it is likely that the UPN of the users have non-routable suffixes too.</span></span> <span data-ttu-id="16471-263">예를 들어 contoso.local에서 실행하는 경우 Azure AD Connect는 Express 설정을 사용하지 않고 사용자 지정 설정을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-263">For example, if you are running under contoso.local, Azure AD Connect suggests you to use custom settings rather than using express settings.</span></span> <span data-ttu-id="16471-264">사용자 지정 설정을 사용하면 사용자가 Azure AD에 동기화된 후에 Azure에 로그인하기 위해 UPN으로 사용해야 하는 특성을 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="16471-264">Using custom settings, you are able to specify the attribute that should be used as UPN to sign in to Azure after the users are synced to Azure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="16471-265">다음 단계</span><span class="sxs-lookup"><span data-stu-id="16471-265">Next steps</span></span>
<span data-ttu-id="16471-266">[Azure Active Directory와 온-프레미스 ID 통합](active-directory-aadconnect.md)에 대해 자세히 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="16471-266">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
