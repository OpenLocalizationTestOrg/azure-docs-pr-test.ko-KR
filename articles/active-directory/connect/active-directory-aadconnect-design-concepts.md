---
title: "Azure AD Connect: 설계 개념 | Microsoft Docs"
description: "이 항목에서는 특정 구현 설계 영역을 자세히 설명합니다."
services: active-directory
documentationcenter: 
author: billmath
manager: femila
editor: 
ms.assetid: 4114a6c0-f96a-493c-be74-1153666ce6c9
ms.service: active-directory
ms.custom: azure-ad-connect
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: Identity
ms.date: 07/13/2017
ms.author: billmath
ms.openlocfilehash: 1e5d5c6a716ca653fb14fc059e8155124b433732
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="azure-ad-connect-design-concepts"></a><span data-ttu-id="a302c-103">Azure AD Connect: 설계 개념</span><span class="sxs-lookup"><span data-stu-id="a302c-103">Azure AD Connect: Design concepts</span></span>
<span data-ttu-id="a302c-104">이 항목의 hello 용도는 Azure AD Connect의 hello 구현 설계 하는 동안 간주할 수 있는 toodescribe 영역입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-104">hello purpose of this topic is toodescribe areas that must be thought through during hello implementation design of Azure AD Connect.</span></span> <span data-ttu-id="a302c-105">이 항목은 특정 영역을 심층 분석하고 이 개념을 다른 항목에서처럼 간단히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-105">This topic is a deep dive on certain areas and these concepts are briefly described in other topics as well.</span></span>

## <a name="sourceanchor"></a><span data-ttu-id="a302c-106">sourceAnchor</span><span class="sxs-lookup"><span data-stu-id="a302c-106">sourceAnchor</span></span>
<span data-ttu-id="a302c-107">hello sourceAnchor 특성으로 정의 됩니다 *개체의 hello 수명 동안 변경할 수 없는 특성*합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-107">hello sourceAnchor attribute is defined as *an attribute immutable during hello lifetime of an object*.</span></span> <span data-ttu-id="a302c-108">개체를 고유 하 게 식별 hello 종류로 동일한 개체 온-프레미스와 Azure AD에서 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-108">It uniquely identifies an object as being hello same object on-premises and in Azure AD.</span></span> <span data-ttu-id="a302c-109">hello 특성 라고도 **immutableId** hello 두 이름은 서로 바꿔 사용할 수는 데 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-109">hello attribute is also called **immutableId** and hello two names are used interchangeable.</span></span>

<span data-ttu-id="a302c-110">hello 단어에 변경할 수 없으므로 "을 변경할 수 없습니다", 중요 toothis 항목입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-110">hello word immutable, that is "cannot be changed", is important toothis topic.</span></span> <span data-ttu-id="a302c-111">이 설정 된 후에이 특성의이 값을 변경할 수 없으며, 되므로 중요 한 toopick을 지 원하는 시나리오 설계 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-111">Since this attribute’s value cannot be changed after it has been set, it is important toopick a design that supports your scenario.</span></span>

<span data-ttu-id="a302c-112">hello 특성은 다음 시나리오는 hello에 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-112">hello attribute is used for hello following scenarios:</span></span>

* <span data-ttu-id="a302c-113">새 동기화 엔진 서버를 구축하거나 재해 복구 시나리오를 다시 구축할 때,이 특성은 개체 온-프레미스의 Azure AD 내의 기존 개체에 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-113">When a new sync engine server is built, or rebuilt after a disaster recovery scenario, this attribute links existing objects in Azure AD with objects on-premises.</span></span>
* <span data-ttu-id="a302c-114">클라우드 전용 id tooa 동기화 된 id 모델을 이동 하면 경우이 특성 개체가 너무 수 있도록 온-프레미스 개체와 Azure AD에 "하드 일치" 기존 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-114">If you move from a cloud-only identity tooa synchronized identity model, then this attribute allows objects too"hard match" existing objects in Azure AD with on-premises objects.</span></span>
* <span data-ttu-id="a302c-115">페더레이션 다음 hello와 함께이 특성을 사용 하는 경우 **userPrincipalName** hello에 사용 되는 사용자를 식별 하는 toouniquely 클레임 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-115">If you use federation, then this attribute together with hello **userPrincipalName** is used in hello claim toouniquely identify a user.</span></span>

<span data-ttu-id="a302c-116">이 항목 toousers 관련해 서에 sourceAnchor에 대 한 설명입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-116">This topic only talks about sourceAnchor as it relates toousers.</span></span> <span data-ttu-id="a302c-117">hello 동일한 규칙이 적용 tooall 개체 유형 이지만 사용자에 대해서만 일반적으로이 문제에이 중요 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-117">hello same rules apply tooall object types, but it is only for users this problem usually is a concern.</span></span>

### <a name="selecting-a-good-sourceanchor-attribute"></a><span data-ttu-id="a302c-118">알맞은 sourceAnchor 특성을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-118">Selecting a good sourceAnchor attribute</span></span>
<span data-ttu-id="a302c-119">hello 특성 값을 hello 규칙에 따라야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-119">hello attribute value must follow hello following rules:</span></span>

* <span data-ttu-id="a302c-120">길이는 60자 미만이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-120">Be less than 60 characters in length</span></span>
  * <span data-ttu-id="a302c-121">문자가 a-z, A-Z 또는 0-9가 아니면 인코드되고 3개의 문자로 계산됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-121">Characters not being a-z, A-Z, or 0-9 are encoded and counted as 3 characters</span></span>
* <span data-ttu-id="a302c-122">&#92; !</span><span class="sxs-lookup"><span data-stu-id="a302c-122">Not contain a special character: &#92; !</span></span> <span data-ttu-id="a302c-123"># $ % & * + / = ?</span><span class="sxs-lookup"><span data-stu-id="a302c-123"># $ % & * + / = ?</span></span> <span data-ttu-id="a302c-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span><span class="sxs-lookup"><span data-stu-id="a302c-124">^ &#96; { } | ~ < > ( ) ' ; : , [ ] " @ _</span></span>
* <span data-ttu-id="a302c-125">전역적으로 고유해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-125">Must be globally unique</span></span>
* <span data-ttu-id="a302c-126">문자열, 정수 또는 이진이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-126">Must be either a string, integer, or binary</span></span>
* <span data-ttu-id="a302c-127">사용자 이름을 기반으로 할 수 없습니다. 사용자 이름은 변경됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-127">Should not be based on user's name, these changes</span></span>
* <span data-ttu-id="a302c-128">대/소문자를 구분할 수 없으며 대/소문자에 따라 달라질 수 있는 값을 사용하지 않도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-128">Should not be case-sensitive and avoid values that may vary by case</span></span>
* <span data-ttu-id="a302c-129">Hello 개체가 만들어질 때 할당 해야</span><span class="sxs-lookup"><span data-stu-id="a302c-129">Should be assigned when hello object is created</span></span>

<span data-ttu-id="a302c-130">Hello sourceAnchor를 선택한 경우 않습니다 형식 문자열의 Azure AD 연결 Base64Encode hello 특성 값 tooensure 특수 문자가 없는 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-130">If hello selected sourceAnchor is not of type string, then Azure AD Connect Base64Encode hello attribute value tooensure no special characters appear.</span></span> <span data-ttu-id="a302c-131">ADFS 보다 다른 페더레이션 서버를 사용 하는 경우 해야 서버 Base64Encode hello 특성 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-131">If you use another federation server than ADFS, make sure your server can also Base64Encode hello attribute.</span></span>

<span data-ttu-id="a302c-132">hello sourceAnchor 특성은 대/소문자 구분입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-132">hello sourceAnchor attribute is case-sensitive.</span></span> <span data-ttu-id="a302c-133">"JohnDoe" 값 "johndoe"와 동일는 hello 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-133">A value of “JohnDoe” is not hello same as “johndoe”.</span></span> <span data-ttu-id="a302c-134">하지만 대/소문자만 다른 두 개체가 있어서는 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-134">But you should not have two different objects with only a difference in case.</span></span>

<span data-ttu-id="a302c-135">단일 포리스트가 있는 경우 온-프레미스를 사용 해야 하는 다음 hello 특성은 **objectGUID**합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-135">If you have a single forest on-premises, then hello attribute you should use is **objectGUID**.</span></span> <span data-ttu-id="a302c-136">기본 설정을 사용 하 여 Azure AD Connect의 고도 DirSync에 의해 사용 되는 특성을 hello를 사용 하는 hello 특성 이기도 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-136">This is also hello attribute used when you use express settings in Azure AD Connect and also hello attribute used by DirSync.</span></span>

<span data-ttu-id="a302c-137">다중 포리스트 되어 있고 이동 하지 마십시오 사용자 포리스트 및 도메인 사이의 다음 **objectGUID** 좋은 특성 toouse도이 경우에 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-137">If you have multiple forests and do not move users between forests and domains, then **objectGUID** is a good attribute toouse even in this case.</span></span>

<span data-ttu-id="a302c-138">포리스트 및 도메인 간에 사용자를 이동 하는 경우 다음 찾아야는 특성을 변경 하지 않는 또는 이동할 수 있습니다 hello 사용자와 hello 이동 중.</span><span class="sxs-lookup"><span data-stu-id="a302c-138">If you move users between forests and domains, then you must find an attribute that does not change or can be moved with hello users during hello move.</span></span> <span data-ttu-id="a302c-139">권장 되는 방법에는 toointroduce 합성 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-139">A recommended approach is toointroduce a synthetic attribute.</span></span> <span data-ttu-id="a302c-140">GUID처럼 보이는 것을 포함할 수 있는 특성이 적합합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-140">An attribute that could hold something that looks like a GUID would be suitable.</span></span> <span data-ttu-id="a302c-141">개체를 만드는 동안 새 GUID는 만들고 hello 사용자에 게 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-141">During object creation, a new GUID is created and stamped on hello user.</span></span> <span data-ttu-id="a302c-142">사용자 지정 동기화 규칙을 만들 수 있습니다 hello 동기화 엔진 서버 toocreate hello에 따라이 값 **objectGUID** 및 업데이트 hello 선택한 특성에 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-142">A custom sync rule can be created in hello sync engine server toocreate this value based on hello **objectGUID** and update hello selected attribute in ADDS.</span></span> <span data-ttu-id="a302c-143">Hello 개체를 이동 하면이 값의 있는지 tooalso 복사 hello 내용을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-143">When you move hello object, make sure tooalso copy hello content of this value.</span></span>

<span data-ttu-id="a302c-144">다른 솔루션은 toopick 바뀌지 않으면 알고 있는 기존 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-144">Another solution is toopick an existing attribute you know does not change.</span></span> <span data-ttu-id="a302c-145">일반적으로 사용되는 특성에는 **employeeID**가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-145">Commonly used attributes include **employeeID**.</span></span> <span data-ttu-id="a302c-146">문자를 포함 하는 특성을 고려 하면 없는지 확인 (대문자 및 소문자) 가능성이 hello 케이스가 없는 hello 특성의 값에 대 한 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-146">If you consider an attribute that contains letters, make sure there is no chance hello case (upper case vs. lower case) can change for hello attribute's value.</span></span> <span data-ttu-id="a302c-147">Hello 사용자의 hello 이름으로 해당 특성을 포함 하는 잘못 된 특성을 사용 하지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-147">Bad attributes that should not be used include those attributes with hello name of hello user.</span></span> <span data-ttu-id="a302c-148">결혼 또는 이혼 hello 이름이 예상된 toochange는이 특성에 대해 허용 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-148">In a marriage or divorce, hello name is expected toochange, which is not allowed for this attribute.</span></span> <span data-ttu-id="a302c-149">이 또한 한 가지 이유 이유와 같은 특성 **userPrincipalName**, **메일**, 및 **targetAddress** 가능한 tooselect hello Azure AD Connect 설치에서 되지 않습니다 마법사입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-149">This is also one reason why attributes such as **userPrincipalName**, **mail**, and **targetAddress** are not even possible tooselect in hello Azure AD Connect installation wizard.</span></span> <span data-ttu-id="a302c-150">이러한 특성에는 또한 hello 포함 "@" 문자는 hello sourceAnchor에 허용 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-150">Those attributes also contain hello "@" character, which is not allowed in hello sourceAnchor.</span></span>

### <a name="changing-hello-sourceanchor-attribute"></a><span data-ttu-id="a302c-151">Hello sourceAnchor 특성 변경</span><span class="sxs-lookup"><span data-stu-id="a302c-151">Changing hello sourceAnchor attribute</span></span>
<span data-ttu-id="a302c-152">hello 개체가 Azure AD에서 생성 되었음을 있으며 hello identity 동기화 된 후에 hello sourceAnchor 특성 값을 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-152">hello sourceAnchor attribute value cannot be changed after hello object has been created in Azure AD and hello identity is synchronized.</span></span>

<span data-ttu-id="a302c-153">이러한 이유로 hello 다음 제한 사항이 적용 tooAzure AD 연결:</span><span class="sxs-lookup"><span data-stu-id="a302c-153">For this reason, hello following restrictions apply tooAzure AD Connect:</span></span>

* <span data-ttu-id="a302c-154">hello sourceAnchor 특성은 초기 설치 중만 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-154">hello sourceAnchor attribute can only be set during initial installation.</span></span> <span data-ttu-id="a302c-155">Hello 설치 마법사를 다시 실행 하는 경우이 옵션은 읽기 전용입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-155">If you rerun hello installation wizard, this option is read-only.</span></span> <span data-ttu-id="a302c-156">필요한 경우 toochange이이 설정을 제거 하 고 다시 설치 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-156">If you need toochange this setting, then you must uninstall and reinstall.</span></span>
* <span data-ttu-id="a302c-157">해야 다른 Azure AD Connect 서버에 설치 하는 경우 선택 hello 같이 이전에 사용한 동일한 sourceAnchor 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-157">If you install another Azure AD Connect server, then you must select hello same sourceAnchor attribute as previously used.</span></span> <span data-ttu-id="a302c-158">DirSync 사용 이전 하 고 AD tooAzure 이동 하는 경우 연결을 사용 해야 합니다 **objectGUID** DirSync에 의해 사용 되는 hello 특성 이므로 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-158">If you have earlier been using DirSync and move tooAzure AD Connect, then you must use **objectGUID** since that is hello attribute used by DirSync.</span></span>
* <span data-ttu-id="a302c-159">Hello 개체에 대 한 다음 Azure AD Connect 동기화 오류를 throw 하 고 hello 문제를 해결 하 고 hello sourceAnchor hello에서 다시 변경 하는 해당 개체에서 더 이상 변경 내용을 허용 하지 않는 내보낸된 tooAzure 광고를 수행한 후 sourceAnchor에 대 한 hello 값이 변경 되는 경우 소스 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-159">If hello value for sourceAnchor is changed after hello object has been exported tooAzure AD, then Azure AD Connect sync throws an error and does not allow any more changes on that object before hello issue has been fixed and hello sourceAnchor is changed back in hello source directory.</span></span>

## <a name="using-msds-consistencyguid-as-sourceanchor"></a><span data-ttu-id="a302c-160">msDS-ConsistencyGuid를 sourceAnchor로 사용</span><span class="sxs-lookup"><span data-stu-id="a302c-160">Using msDS-ConsistencyGuid as sourceAnchor</span></span>
<span data-ttu-id="a302c-161">기본적으로 Azure AD Connect (1.1.486.0 버전 및 이전) objectGUID hello sourceAnchor 특성으로 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-161">By default, Azure AD Connect (version 1.1.486.0 and older) uses objectGUID as hello sourceAnchor attribute.</span></span> <span data-ttu-id="a302c-162">ObjectGUID는 시스템에서 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-162">ObjectGUID is system-generated.</span></span> <span data-ttu-id="a302c-163">온-프레미스 AD 개체를 만들 때는 해당 값을 지정할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-163">You cannot specify its value when creating on-premises AD objects.</span></span> <span data-ttu-id="a302c-164">섹션에서 설명한 대로 [sourceAnchor](#sourceanchor), toospecify hello sourceAnchor 값 해야 하는 시나리오가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-164">As explained in section [sourceAnchor](#sourceanchor), there are scenarios where you need toospecify hello sourceAnchor value.</span></span> <span data-ttu-id="a302c-165">Hello 시나리오 인 적용 가능한 tooyou hello sourceAnchor 특성으로 구성 가능한 AD 특성 (예를 들어 게스트가 ConsistencyGuid)를 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-165">If hello scenarios are applicable tooyou, you must use a configurable AD attribute (for example, msDS-ConsistencyGuid) as hello sourceAnchor attribute.</span></span>

<span data-ttu-id="a302c-166">Azure AD Connect (버전 1.1.524.0 후) 이제 sourceAnchor 특성으로 게스트가 ConsistencyGuid hello 사용을 용이 하 게 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-166">Azure AD Connect (version 1.1.524.0 and after) now facilitates hello use of msDS-ConsistencyGuid as sourceAnchor attribute.</span></span> <span data-ttu-id="a302c-167">이 기능을 사용할 경우 Azure AD Connect hello 동기화 규칙을을 자동으로 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-167">When using this feature, Azure AD Connect automatically configures hello synchronization rules to:</span></span>

1. <span data-ttu-id="a302c-168">게스트가 ConsistencyGuid를 사용자 개체에 대 한 hello sourceAnchor 특성으로 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-168">Use msDS-ConsistencyGuid as hello sourceAnchor attribute for User objects.</span></span> <span data-ttu-id="a302c-169">ObjectGUID는 다른 개체 형식에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-169">ObjectGUID is used for other object types.</span></span>

2. <span data-ttu-id="a302c-170">지정 된 모든 온-프레미스 AD 사용자 개체 속성을 가진 게스트가 ConsistencyGuid 채워져 있지 Azure AD Connect는 온-프레미스 Active Directory에서 해당 objectGUID 값 백 toohello 게스트가 ConsistencyGuid 특성을 씁니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-170">For any given on-premises AD User object whose msDS-ConsistencyGuid attribute isn't populated, Azure AD Connect writes its objectGUID value back toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span> <span data-ttu-id="a302c-171">Hello 게스트가 ConsistencyGuid 특성이 채워진 후에 Azure AD Connect 다음 hello 개체 tooAzure AD을 내보냅니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-171">After hello msDS-ConsistencyGuid attribute is populated, Azure AD Connect then exports hello object tooAzure AD.</span></span>

>[!NOTE]
> <span data-ttu-id="a302c-172">한 번 온-프레미스 AD 개체 (즉, hello AD 커넥터 공간으로 가져오고 hello 메타 버스에 투영) Azure AD Connect로 가져오는, 더 이상 해당 sourceAnchor 값을 변경할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-172">Once an on-premises AD object is imported into Azure AD Connect (that is, imported into hello AD Connector Space and projected into hello Metaverse), you cannot change its sourceAnchor value anymore.</span></span> <span data-ttu-id="a302c-173">toospecify hello sourceAnchor 값에 대 한는 주어진 온-프레미스 AD 개체, Azure AD Connect로 가져오기 전에 해당 게스트가 ConsistencyGuid 특성을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-173">toospecify hello sourceAnchor value for a given on-premises AD object, configure its msDS-ConsistencyGuid attribute before it is imported into Azure AD Connect.</span></span>

### <a name="permission-required"></a><span data-ttu-id="a302c-174">필요한 권한</span><span class="sxs-lookup"><span data-stu-id="a302c-174">Permission required</span></span>
<span data-ttu-id="a302c-175">이 기능은 toowork에 대 한 hello AD DS 사용 되는 계정 toosynchronize 온-프레미스 Active Directory와 온-프레미스 Active Directory에서 쓰기 권한 toohello 게스트가 ConsistencyGuid 특성을 부여 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-175">For this feature toowork, hello AD DS account used toosynchronize with on-premises Active Directory must be granted write permission toohello msDS-ConsistencyGuid attribute in on-premises Active Directory.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature---new-installation"></a><span data-ttu-id="a302c-176">Tooenable는 ConsistencyGuid 기능-새로 설치 하는 hello 하는 방법</span><span class="sxs-lookup"><span data-stu-id="a302c-176">How tooenable hello ConsistencyGuid feature - New installation</span></span>
<span data-ttu-id="a302c-177">새로 설치 하는 동안 sourceAnchor로 ConsistencyGuid hello 사용을 활성화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-177">You can enable hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span> <span data-ttu-id="a302c-178">이 섹션에서는 기본 설치 및 사용자 지정 설치를 자세히 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-178">This section covers both Express and Custom installation in details.</span></span>

  >[!NOTE]
  > <span data-ttu-id="a302c-179">최신 버전의 Azure AD Connect (1.1.524.0 후)에서는 새로 설치 하는 동안 ConsistencyGuid sourceAnchor 활용 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-179">Only newer versions of Azure AD Connect (1.1.524.0 and after) supports hello use of ConsistencyGuid as sourceAnchor during new installation.</span></span>

### <a name="how-tooenable-hello-consistencyguid-feature"></a><span data-ttu-id="a302c-180">Tooenable는 ConsistencyGuid 기능 hello 하는 방법</span><span class="sxs-lookup"><span data-stu-id="a302c-180">How tooenable hello ConsistencyGuid feature</span></span>
<span data-ttu-id="a302c-181">현재 hello 기능은 새로운 Azure AD Connect 설치 하는 동안만 활성화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-181">Currently, hello feature can only be enabled during new Azure AD Connect installation only.</span></span>

#### <a name="express-installation"></a><span data-ttu-id="a302c-182">기본 설치</span><span class="sxs-lookup"><span data-stu-id="a302c-182">Express Installation</span></span>
<span data-ttu-id="a302c-183">빠른 모드와 Azure AD Connect를 설치할 때 hello Azure AD Connect 마법사는 자동으로 가장 적절 한 광고 hello 특성 toouse 논리 hello를 사용 하 여 hello sourceAnchor 특성으로 결정:</span><span class="sxs-lookup"><span data-stu-id="a302c-183">When installing Azure AD Connect with Express mode, hello Azure AD Connect wizard automatically determines hello most appropriate AD attribute toouse as hello sourceAnchor attribute using hello following logic:</span></span>

* <span data-ttu-id="a302c-184">먼저, Azure AD 테 넌 트 tooretrieve hello AD 특성으로 사용 하는 hello Azure AD Connect 마법사 쿼리 hello hello 이전 Azure AD Connect 설치에 sourceAnchor 특성 (있는 경우).</span><span class="sxs-lookup"><span data-stu-id="a302c-184">First, hello Azure AD Connect wizard queries your Azure AD tenant tooretrieve hello AD attribute used as hello sourceAnchor attribute in hello previous Azure AD Connect installation (if any).</span></span> <span data-ttu-id="a302c-185">이 정보를 사용할 수 있는 경우 Azure AD Connect hello 동일한 AD 특성을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-185">If this information is available, Azure AD Connect uses hello same AD attribute.</span></span>

  >[!NOTE]
  > <span data-ttu-id="a302c-186">최신 버전의 Azure AD Connect (1.1.524.0 후) 설치 하는 동안 사용 되는 hello sourceAnchor 특성에 대 한 Azure AD 테 넌 트의 정보를 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-186">Only newer versions of Azure AD Connect (1.1.524.0 and after) stores information in your Azure AD tenant about hello sourceAnchor attribute used during installation.</span></span> <span data-ttu-id="a302c-187">이전 버전의 Azure AD Connect는 그렇지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-187">Older versions of Azure AD Connect do not.</span></span>

* <span data-ttu-id="a302c-188">사용 하는 hello sourceAnchor 특성에 대 한 정보를 사용할 수 없는 경우 hello 마법사는 온-프레미스 Active Directory에 hello 게스트가 ConsistencyGuid 특성의 hello 상태를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-188">If information about hello sourceAnchor attribute used isn't available, hello wizard checks hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="a302c-189">Hello 디렉터리에서 개체에 hello 특성이 구성 되지 않으면 hello 마법사 hello 게스트가 ConsistencyGuid hello sourceAnchor 특성으로 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-189">If hello attribute isn't configured on any object in hello directory, hello wizard uses hello msDS-ConsistencyGuid as hello sourceAnchor attribute.</span></span> <span data-ttu-id="a302c-190">Hello 디렉터리에 있는 하나 이상의 개체에 hello 특성은 구성 된 경우 hello 특성 다른 응용 프로그램에서 사용 되 고 sourceAnchor 특성으로 적합 하지 않은 hello 마법사 종료 중...</span><span class="sxs-lookup"><span data-stu-id="a302c-190">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and is not suitable as sourceAnchor attribute...</span></span>

* <span data-ttu-id="a302c-191">이 경우 hello 마법사 대신 toousing objectGUID hello sourceAnchor 특성으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-191">In which case, hello wizard falls back toousing objectGUID as hello sourceAnchor attribute.</span></span>

* <span data-ttu-id="a302c-192">Hello sourceAnchor 특성은 결정 되 면 hello 마법사 Azure AD 테 넌 트에 hello 정보를 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-192">Once hello sourceAnchor attribute is decided, hello wizard stores hello information in your Azure AD tenant.</span></span> <span data-ttu-id="a302c-193">hello 정보는 나중에 Azure AD Connect 설치 하 여 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-193">hello information will be used by future installation of Azure AD Connect.</span></span>

<span data-ttu-id="a302c-194">Express 설치가 완료 되 면 hello 마법사 hello 원본 앵커 특성으로 사용할 특성 선택 않은 알려 줍니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-194">Once Express installation completes, hello wizard informs you which attribute has been picked as hello Source Anchor attribute.</span></span>

![sourceAnchor로 선택된 AD 특성을 알려주는 마법사](./media/active-directory-aadconnect-design-concepts/consistencyGuid-01.png)

#### <a name="custom-installation"></a><span data-ttu-id="a302c-196">사용자 지정 설치</span><span class="sxs-lookup"><span data-stu-id="a302c-196">Custom installation</span></span>
<span data-ttu-id="a302c-197">Azure AD Connect 사용자 지정 모드를 설치할 때는 hello Azure AD Connect 마법사 sourceAnchor 특성을 구성할 때 두 가지 옵션이 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-197">When installing Azure AD Connect with Custom mode, hello Azure AD Connect wizard provides two options when configuring sourceAnchor attribute:</span></span>

![사용자 지정 설치 - sourceAnchor 구성](./media/active-directory-aadconnect-design-concepts/consistencyGuid-02.png)

| <span data-ttu-id="a302c-199">설정</span><span class="sxs-lookup"><span data-stu-id="a302c-199">Setting</span></span> | <span data-ttu-id="a302c-200">설명</span><span class="sxs-lookup"><span data-stu-id="a302c-200">Description</span></span> |
| --- | --- |
| <span data-ttu-id="a302c-201">Azure 내 hello 원본 앵커를 관리할 수 있도록</span><span class="sxs-lookup"><span data-stu-id="a302c-201">Let Azure manage hello source anchor for me</span></span> | <span data-ttu-id="a302c-202">Azure AD toopick hello 특성을 원하는 경우이 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-202">Select this option if you want Azure AD toopick hello attribute for you.</span></span> <span data-ttu-id="a302c-203">이 옵션을 선택 하는 경우 Azure AD Connect 마법사 적용 hello 동일 [Express 설치 중에 사용 하는 sourceAnchor 특성 선택 논리](#express-installation)합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-203">If you select this option, Azure AD Connect wizard applies hello same [sourceAnchor attribute selection logic used during Express installation](#express-installation).</span></span> <span data-ttu-id="a302c-204">유사한 tooExpress 설치 hello 마법사 알려는 특성 선택 않은 hello로 원본 앵커 특성 사용자 지정 설치가 완료 된 후입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-204">Similar tooExpress installation, hello wizard informs you which attribute has been picked as hello Source Anchor attribute after Custom installation completes.</span></span> |
| <span data-ttu-id="a302c-205">특정 특성</span><span class="sxs-lookup"><span data-stu-id="a302c-205">A specific attribute</span></span> | <span data-ttu-id="a302c-206">Toospecify hello sourceAnchor 특성으로 기존 AD 특성을 원하는 경우이 옵션을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-206">Select this option if you wish toospecify an existing AD attribute as hello sourceAnchor attribute.</span></span> |

### <a name="how-tooenable-hello-consistencyguid-feature---existing-deployment"></a><span data-ttu-id="a302c-207">Tooenable는 ConsistencyGuid 기능-기존 배포를 hello 하는 방법</span><span class="sxs-lookup"><span data-stu-id="a302c-207">How tooenable hello ConsistencyGuid feature - Existing deployment</span></span>
<span data-ttu-id="a302c-208">Hello 원본 앵커 특성으로 objectGUID를 사용 하는 기존 Azure AD Connect 배포를 설정한 경우 전환할 수도 있습니다 toousing ConsistencyGuid 대신 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-208">If you have an existing Azure AD Connect deployment which is using objectGUID as hello Source Anchor attribute, you can switch it toousing ConsistencyGuid instead.</span></span>

>[!NOTE]
> <span data-ttu-id="a302c-209">최신 버전의 Azure AD Connect (1.1.552.0 후) hello 원본 앵커 특성으로 ObjectGuid tooConsistencyGuid에서 전환 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-209">Only newer versions of Azure AD Connect (1.1.552.0 and after) supports switching from ObjectGuid tooConsistencyGuid as hello Source Anchor attribute.</span></span>

<span data-ttu-id="a302c-210">hello 원본 앵커 특성으로 objectGUID tooConsistencyGuid에서 tooswitch:</span><span class="sxs-lookup"><span data-stu-id="a302c-210">tooswitch from objectGUID tooConsistencyGuid as hello Source Anchor attribute:</span></span>

1. <span data-ttu-id="a302c-211">Hello Azure AD Connect 마법사를 시작 하 고 클릭 **구성** toogo toohello 작업 화면입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-211">Start hello Azure AD Connect wizard and click **Configure** toogo toohello Tasks screen.</span></span>

2. <span data-ttu-id="a302c-212">선택 hello **원본 앵커 구성** 옵션을 작업 하 고 클릭 **다음**합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-212">Select hello **Configure Source Anchor** task option and click **Next**.</span></span>

   ![기존 배포에 대해 ConsistencyGuid 사용 - 2단계](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment01.png)

3. <span data-ttu-id="a302c-214">Azure AD 관리자 자격 증명을 입력하고 **다음**을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-214">Enter your Azure AD Administrator credentials and click **Next**.</span></span>

4. <span data-ttu-id="a302c-215">Azure AD Connect 마법사는 온-프레미스 Active Directory에 hello 게스트가 ConsistencyGuid 특성의 hello 상태를 분석합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-215">Azure AD Connect wizard analyzes hello state of hello msDS-ConsistencyGuid attribute in your on-premises Active Directory.</span></span> <span data-ttu-id="a302c-216">Hello 특성에서 구성 되지 않으면 개체를 다른 응용 프로그램에서 현재 hello 특성을 사용 하며 안전 toouse 있는지 디렉터리, Azure AD Connect 끝나는 hello 것 hello 원본 앵커 특성으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-216">If hello attribute isn't configured on any object in hello directory, Azure AD Connect concludes that no other application is currently using hello attribute and is safe toouse it as hello Source Anchor attribute.</span></span> <span data-ttu-id="a302c-217">클릭 **다음** toocontinue 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-217">Click **Next** toocontinue.</span></span>

   ![기존 배포에 대해 ConsistencyGuid 사용 - 4단계](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment02.png)

5. <span data-ttu-id="a302c-219">Hello에 **준비 tooConfigure** 화면 **구성** toomake hello 구성 변경 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-219">In hello **Ready tooConfigure** screen, click **Configure** toomake hello configuration change.</span></span>

   ![기존 배포에 대해 ConsistencyGuid 사용 - 5단계](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment03.png)

6. <span data-ttu-id="a302c-221">Hello 구성 완료 되 면 해당 게스트가 ConsistencyGuid hello 원본 앵커 특성으로 사용 중인 hello 마법사에 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-221">Once hello configuration completes, hello wizard indicates that msDS-ConsistencyGuid is now being used as hello Source Anchor attribute.</span></span>

   ![기존 배포에 대해 ConsistencyGuid 사용 - 6단계](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeployment04.png)

<span data-ttu-id="a302c-223">Hello 분석 (4 단계) 하는 동안 hello 특성 hello 디렉터리에 있는 하나 이상의 개체에 구성 된 경우 hello 마법사 완료 hello 특성 다른 응용 프로그램에서 사용 되 고 아래 hello 다이어그램에 나타난 것 처럼 오류가 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-223">During hello analysis (step 4), if hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by another application and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="a302c-224">인 경우 해당 hello 특성은 기존 응용 프로그램에 사용 되지 않는 특정 toosuppress 오류 hello 하는 방법에 대 한 내용은 toocontact 지원 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-224">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![기존 배포에 대해 ConsistencyGuid 사용 - 오류](./media/active-directory-aadconnect-design-concepts/consistencyguidexistingdeploymenterror.png)

### <a name="impact-on-ad-fs-or-third-party-federation-configuration"></a><span data-ttu-id="a302c-226">AD FS 또는 타사 페더레이션 구성에 미치는 영향</span><span class="sxs-lookup"><span data-stu-id="a302c-226">Impact on AD FS or third-party federation configuration</span></span>
<span data-ttu-id="a302c-227">Azure를 사용 하는 경우 AD Connect toomanage 온-프레미스 AD FS 배포, Azure AD Connect hello sourceAnchor로 hello 클레임 규칙 toouse hello 동일한 AD 특성을 자동으로 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-227">If you are using Azure AD Connect toomanage on-premises AD FS deployment, hello Azure AD Connect automatically updates hello claim rules toouse hello same AD attribute as sourceAnchor.</span></span> <span data-ttu-id="a302c-228">이렇게 하면 ad FS에 의해 생성 된 해당 hello ImmutableID 클레임 hello sourceAnchor 값 내보낸된 tooAzure AD와 일치 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-228">This ensures that hello ImmutableID claim generated by ADFS is consistent with hello sourceAnchor values exported tooAzure AD.</span></span>

<span data-ttu-id="a302c-229">Hello sourceAnchor 값과 일치 하는 클레임 toobe 내보낸 tooAzure AD로 ImmutableID에 대 한 클레임 규칙 hello를 수동으로 업데이트 해야 Azure AD Connect 외부에서 AD FS를 관리 하는 인증에 대 한 타사 페더레이션 서버를 사용 하는 경우 문서 섹션에 설명 된 [수정 AD FS 클레임 규칙](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims)합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-229">If you are managing AD FS outside of Azure AD Connect or you are using third-party federation servers for authentication, you must manually update hello claim rules for ImmutableID claim toobe consistent with hello sourceAnchor values exported tooAzure AD as described in article section [Modify AD FS claim rules](https://docs.microsoft.com/azure/active-directory/connect/active-directory-aadconnect-federation-management#modclaims).</span></span> <span data-ttu-id="a302c-230">hello 마법사 설치가 완료 된 후에 경고를 수행 하는 hello를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-230">hello wizard returns hello following warning after installation completes:</span></span>

![타사 페더레이션 구성](./media/active-directory-aadconnect-design-concepts/consistencyGuid-03.png)

### <a name="adding-new-directories-tooexisting-deployment"></a><span data-ttu-id="a302c-232">새 디렉터리 tooexisting 배포 추가</span><span class="sxs-lookup"><span data-stu-id="a302c-232">Adding new directories tooexisting deployment</span></span>
<span data-ttu-id="a302c-233">배포한 Azure AD Connect hello ConsistencyGuid 기능을 사용 하 고 원하는 tooadd 이제 다른 디렉터리 toohello 배포 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-233">Suppose you have deployed Azure AD Connect with hello ConsistencyGuid feature enabled, and now you would like tooadd another directory toohello deployment.</span></span> <span data-ttu-id="a302c-234">Tooadd hello 디렉터리를 시도할 때 Azure AD Connect 마법사 hello 디렉터리에 hello 게스트가 ConsistencyGuid 특성의 hello 상태를 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-234">When you try tooadd hello directory, Azure AD Connect wizard checks hello state of hello mSDS-ConsistencyGuid attribute in hello directory.</span></span> <span data-ttu-id="a302c-235">Hello 디렉터리에 있는 하나 이상의 개체에 hello 특성은 구성 된 경우 hello 마법사 완료 hello 특성 다른 응용 프로그램에서 사용 되 고 아래 hello 다이어그램에 나타난 것 처럼 오류가 반환 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-235">If hello attribute is configured on one or more objects in hello directory, hello wizard concludes hello attribute is being used by other applications and returns an error as illustrated in hello diagram below.</span></span> <span data-ttu-id="a302c-236">인 경우 해당 hello 특성은 기존 응용 프로그램에 사용 되지 않는 특정 toosuppress 오류 hello 하는 방법에 대 한 내용은 toocontact 지원 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-236">If you are certain that hello attribute isn't used by existing applications, you need toocontact Support for information on how toosuppress hello error.</span></span>

![새 디렉터리 tooexisting 배포 추가](./media/active-directory-aadconnect-design-concepts/consistencyGuid-04.png)

## <a name="azure-ad-sign-in"></a><span data-ttu-id="a302c-238">Azure AD 로그인</span><span class="sxs-lookup"><span data-stu-id="a302c-238">Azure AD sign-in</span></span>
<span data-ttu-id="a302c-239">Azure AD와 온-프레미스 디렉터리를 통합 하는 동안 것이 중요 한 toounderstand hello 동기화 설정을 hello 방식으로 사용자에 주는 영향을 인증 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-239">While integrating your on-premises directory with Azure AD, it is important toounderstand how hello synchronization settings can affect hello way user authenticates.</span></span> <span data-ttu-id="a302c-240">Azure AD는 UPN (userPrincipalName) tooauthenticate hello 사용자를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-240">Azure AD uses userPrincipalName (UPN) tooauthenticate hello user.</span></span> <span data-ttu-id="a302c-241">그러나 사용자가 동기화 하는 경우에 hello 특성 toobe userPrincipalName의 값에 대해 신중 하 게 사용을 선택 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-241">However, when you synchronize your users, you must choose hello attribute toobe used for value of userPrincipalName carefully.</span></span>

### <a name="choosing-hello-attribute-for-userprincipalname"></a><span data-ttu-id="a302c-242">UserPrincipalName에 대 한 hello 특성을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-242">Choosing hello attribute for userPrincipalName</span></span>
<span data-ttu-id="a302c-243">확인 해야 Azure 곳에 사용 되는 UPN toobe hello 값을 제공 하는 데 hello 특성 선택 하면</span><span class="sxs-lookup"><span data-stu-id="a302c-243">When you are selecting hello attribute for providing hello value of UPN toobe used in Azure one should ensure</span></span>

* <span data-ttu-id="a302c-244">hello 형식의 것 않은 toohello UPN 구문 (RFC 822)를 준수 하는 hello 특성 값username@domain</span><span class="sxs-lookup"><span data-stu-id="a302c-244">hello attribute values conform toohello UPN syntax (RFC 822), that is it should be of hello format username@domain</span></span>
* <span data-ttu-id="a302c-245">hello 접미사의 hello hello 값 일치 tooone의 Azure AD에서 사용자 지정 도메인 확인</span><span class="sxs-lookup"><span data-stu-id="a302c-245">hello suffix in hello values matches tooone of hello verified custom domains in Azure AD</span></span>

<span data-ttu-id="a302c-246">기본 설정 hello hello 특성에 대 한 선택 항목은 userPrincipalName 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-246">In express settings, hello assumed choice for hello attribute is userPrincipalName.</span></span> <span data-ttu-id="a302c-247">Hello userPrincipalName 특성에 hello 값이 포함 되어 있지 않으면 tooAzure에서 프로그램 사용자 toosign 합니다를 선택 해야 **사용자 지정 설치**합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-247">If hello userPrincipalName attribute does not contain hello value you want your users toosign in tooAzure, then you must choose **Custom Installation**.</span></span>

### <a name="custom-domain-state-and-upn"></a><span data-ttu-id="a302c-248">사용자 지정 도메인 상태 및 UPN</span><span class="sxs-lookup"><span data-stu-id="a302c-248">Custom domain state and UPN</span></span>
<span data-ttu-id="a302c-249">것이 중요 한 tooensure hello UPN 접미사에 대 한 확인 된 도메인 임을 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-249">It is important tooensure that there is a verified domain for hello UPN suffix.</span></span>

<span data-ttu-id="a302c-250">John은 contoso.com의 사용자입니다. 이한일은 원하는 toouse hello 온-프레미스 UPN john@contoso.com toosign tooAzure 한 후에 사용자가 Azure AD tooyour 디렉터리 contoso.onmicrosoft.com. toodo에 따라서 동기화 했는지, tooadd 필요 하 고 시작 하려면 먼저 Azure AD에서 contoso.com으로 사용자 지정 도메인 확인 hello 사용자를 동기화 하는 중입니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-250">John is a user in contoso.com. You want John toouse hello on-premises UPN john@contoso.com toosign in tooAzure after you have synced users tooyour Azure AD directory contoso.onmicrosoft.com. toodo so, you need tooadd and verify contoso.com as a custom domain in Azure AD before you can start syncing hello users.</span></span> <span data-ttu-id="a302c-251">John, 예를 들어 contoso.com의 hello UPN 접미사는 Azure AD에서 확인 된 도메인을 일치 하지 않습니다, Azure AD contoso.onmicrosoft.com으로 hello UPN 접미사를 바꿉니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-251">If hello UPN suffix of John, for example contoso.com, does not match a verified domain in Azure AD, then Azure AD replaces hello UPN suffix with contoso.onmicrosoft.com.</span></span>

### <a name="non-routable-on-premises-domains-and-upn-for-azure-ad"></a><span data-ttu-id="a302c-252">라우팅할 수 있는 온-프레미스가 아닌 도메인 및 Azure AD에 대한 UPN</span><span class="sxs-lookup"><span data-stu-id="a302c-252">Non-routable on-premises domains and UPN for Azure AD</span></span>
<span data-ttu-id="a302c-253">일부 조직에는 라우팅할 수 없는 도메인(예: contoso.local) 또는 간단한 단일 레이블 도메인(예: contoso)이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-253">Some organizations have non-routable domains, like contoso.local, or simple single label domains like contoso.</span></span> <span data-ttu-id="a302c-254">Azure AD에 수 tooverify 라우팅할 수 없는 도메인 없는 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-254">You are not able tooverify a non-routable domain in Azure AD.</span></span> <span data-ttu-id="a302c-255">Azure AD Connect Azure AD의 tooonly 확인 된 도메인을 동기화 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-255">Azure AD Connect can sync tooonly a verified domain in Azure AD.</span></span> <span data-ttu-id="a302c-256">Azure AD 디렉터리를 만들면 라우팅 가능한 도메인을 만들고 다시 Azure AD에 대한 기본 도메인(예: contoso.onmicrosoft.com)이 됩니다. 따라서 데이터베이스가 필요한 tooverify 이러한 시나리오에서는 다른 라우팅 가능한 도메인 toosync toohello 기본 onmicrosoft.com 도메인 원하는 경우에 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-256">When you create an Azure AD directory, it creates a routable domain that becomes default domain for your Azure AD for example, contoso.onmicrosoft.com. Therefore, it becomes necessary tooverify any other routable domain in such a scenario in case you don't want toosync toohello default onmicrosoft.com domain.</span></span>

<span data-ttu-id="a302c-257">읽기 [추가 사용자 지정 도메인 이름을 tooAzure Active Directory](../active-directory-add-domain.md) 에 대 한 자세한 정보를 추가 하 고 도메인을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-257">Read [Add your custom domain name tooAzure Active Directory](../active-directory-add-domain.md) for more info on adding and verifying domains.</span></span>

<span data-ttu-id="a302c-258">Azure AD Connect는 라우팅할 수 없는 도메인 환경에서 실행하는지를 검색하고 Express 설정을 계속 진행하는 경우 적절하게 경고합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-258">Azure AD Connect detects if you are running in a non-routable domain environment and would appropriately warn you from going ahead with express settings.</span></span> <span data-ttu-id="a302c-259">해당 hello hello 사용자의 UPN이 가능성이 라우팅할 수 없는 도메인에서 작동 하는 경우 라우팅할 수 없는 접미사를 너무 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-259">If you are operating in a non-routable domain, then it is likely that hello UPN of hello users have non-routable suffixes too.</span></span> <span data-ttu-id="a302c-260">예를 들어 Azure AD Connect를 contoso.local에서 실행 하는 경우 기본 설정을 사용 하는 대신 있습니다 toouse 사용자 지정 설정을 제안 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-260">For example, if you are running under contoso.local, Azure AD Connect suggests you toouse custom settings rather than using express settings.</span></span> <span data-ttu-id="a302c-261">수 toospecify hello 특성 hello 사용자가 동기화 된 tooAzure AD 후 tooAzure에 UPN toosign으로 사용 해야 하는 사용자 지정 설정을 사용 하 고 합니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-261">Using custom settings, you are able toospecify hello attribute that should be used as UPN toosign in tooAzure after hello users are synced tooAzure AD.</span></span>

## <a name="next-steps"></a><span data-ttu-id="a302c-262">다음 단계</span><span class="sxs-lookup"><span data-stu-id="a302c-262">Next steps</span></span>
<span data-ttu-id="a302c-263">[Azure Active Directory와 온-프레미스 ID 통합](active-directory-aadconnect.md)에 대해 자세히 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="a302c-263">Learn more about [Integrating your on-premises identities with Azure Active Directory](active-directory-aadconnect.md).</span></span>
