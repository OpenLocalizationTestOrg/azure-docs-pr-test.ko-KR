---
title: "Azure Active Directory v2.0 토큰 참조 | Microsoft Docs"
description: "Azure AD v2.0 끝점에서 내보내는 토큰 및 클레임 형식"
services: active-directory
documentationcenter: 
author: dstrockis
manager: mbaldwin
editor: 
ms.assetid: dc58c282-9684-4b38-b151-f3e079f034fd
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 01/07/2017
ms.author: dastrock
ms.custom: aaddev
ms.openlocfilehash: a3611a239fe044cf1b953220a6e96b0e101f47a4
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="azure-active-directory-v20-tokens-reference"></a><span data-ttu-id="af34b-103">Azure Active Directory v2.0 토큰 참조</span><span class="sxs-lookup"><span data-stu-id="af34b-103">Azure Active Directory v2.0 tokens reference</span></span>
<span data-ttu-id="af34b-104">Azure AD(Azure Active Directory) v2.0 끝점은 각 [인증 흐름](active-directory-v2-flows.md)에서 여러 유형의 보안 토큰을 내보냅니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-104">The Azure Active Directory (Azure AD) v2.0 endpoint emits several types of security tokens in each [authentication flow](active-directory-v2-flows.md).</span></span> <span data-ttu-id="af34b-105">이 참조에서는 각 토큰 유형의 형식, 보안 특성 및 내용을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-105">This reference describes the format, security characteristics, and contents of each type of token.</span></span>

> [!NOTE]
> <span data-ttu-id="af34b-106">v2.0 끝점에서는 일부 Azure Active Directory 시나리오 및 기능만 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-106">The v2.0 endpoint does not support all Azure Active Directory scenarios and features.</span></span> <span data-ttu-id="af34b-107">v2.0 끝점을 사용해야 하는지 확인하려면 [v2.0 제한 사항](active-directory-v2-limitations.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af34b-107">To determine whether you should use the v2.0 endpoint, read about [v2.0 limitations](active-directory-v2-limitations.md).</span></span>
>
>

## <a name="types-of-tokens"></a><span data-ttu-id="af34b-108">토큰 형식</span><span class="sxs-lookup"><span data-stu-id="af34b-108">Types of tokens</span></span>
<span data-ttu-id="af34b-109">v2.0 끝점은 액세스 토큰 및 새로 고침 토큰을 사용하는 [OAuth 2.0 인증 프로토콜](active-directory-v2-protocols.md)을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-109">The v2.0 endpoint supports the [OAuth 2.0 authorization protocol](active-directory-v2-protocols.md), which uses access tokens and refresh tokens.</span></span> <span data-ttu-id="af34b-110">또한 [OpenID Connect](active-directory-v2-protocols.md)를 통한 인증 및 로그인을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-110">The v2.0 endpoint also supports authentication and sign-in via [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="af34b-111">OpenID Connect는 세 번째 유형의 토큰인 ID 토큰을 소개합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-111">OpenID Connect introduces a third type of token, the ID token.</span></span> <span data-ttu-id="af34b-112">이러한 토큰은 각각 *전달자* 토큰으로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-112">Each of these tokens is represented as a *bearer* token.</span></span>

<span data-ttu-id="af34b-113">전달자 토큰은 보호된 리소스에 대한 전달자 액세스 권한을 부여하는 간단한 보안 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-113">A bearer token is a lightweight security token that grants the bearer access to a protected resource.</span></span> <span data-ttu-id="af34b-114">전달자는 토큰을 제공할 수 있는 당사자입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-114">The bearer is any party that can present the token.</span></span> <span data-ttu-id="af34b-115">이 당사자는 전달자 토큰을 수신하기 위해 Azure AD에 인증해야 하지만 전송 및 저장 시 토큰 보안을 유지하는 데 필요한 단계를 취하지 않는 경우 의도하지 않은 당사자가 토큰을 가로채서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-115">Although a party must authenticate with Azure AD to receive the bearer token, if steps are not taken to secure the token during transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="af34b-116">일부 보안 토큰에는 권한이 없는 당사자가 토큰을 사용하지 못하게 하는 메커니즘이 기본 제공되지만 전달자 토큰에는 이 메커니즘이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-116">Some security tokens have a built-in mechanism to prevent unauthorized parties from using them, but bearer tokens do not.</span></span> <span data-ttu-id="af34b-117">전달자 토큰은 전송 계층 보안(HTTPS) 등의 보안 채널에서 전송해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-117">Bearer tokens must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="af34b-118">전달자 토큰이 이 유형의 보안 없이 전송되는 경우 악의적인 당사자가 “메시지 가로채기(man-in-the-middle)” 공격으로 토큰을 획득하고 이를 사용하여 보호된 리소스에 무단으로 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-118">If a bearer token is transmitted without this type of security, a malicious party could use a "man-in-the-middle attack" to acquire the token and use it for unauthorized access to a protected resource.</span></span> <span data-ttu-id="af34b-119">나중에 사용하기 위해 전달자 토큰을 저장하거나 캐싱할 때도 동일한 보안 원칙이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-119">The same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="af34b-120">항상 앱이 전달자 토큰을 안전하게 전송하고 저장하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-120">Always ensure that your app securely transmits and stores bearer tokens.</span></span> <span data-ttu-id="af34b-121">전달자 토큰의 보안 고려 사항을 자세히 알아보려면 [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af34b-121">For more security considerations for bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>

<span data-ttu-id="af34b-122">v2.0 끝점에서 발급된 토큰은 대부분 JWT(JSON Web Token)로 구현됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-122">Many of the tokens issued by the v2.0 endpoint are implemented as JSON Web Tokens (JWTs).</span></span> <span data-ttu-id="af34b-123">JWT는 두 당사자 간에 정보를 전송하는 URL로부터 안전한 간단한 방법입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-123">A JWT is a compact, URL-safe way to transfer information between two parties.</span></span> <span data-ttu-id="af34b-124">JWT의 정보를 *클레임*이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-124">The information in a JWT is called a *claim*.</span></span> <span data-ttu-id="af34b-125">이는 토큰의 주체 및 전달자에 대한 정보의 어설션입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-125">It's an assertion of information about the bearer and subject of the token.</span></span> <span data-ttu-id="af34b-126">JWT의 클레임은 전송을 위해 인코드 및 직렬화된 JSON(JavaScript Object Notation) 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-126">The claims in a JWT are JavaScript Object Notation (JSON) objects that are encoded and serialized for transmission.</span></span> <span data-ttu-id="af34b-127">V2.0 끝점에 의해 발급된 JWT가 서명되었지만 암호화되지 않았으므로 디버깅을 위해 JWT의 내용을 쉽게 검사할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-127">Because the JWTs issued by the v2.0 endpoint are signed but not encrypted, you can easily inspect the contents of a JWT for debugging purposes.</span></span> <span data-ttu-id="af34b-128">JWT에 대한 자세한 내용은 [JWT 사양](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af34b-128">For more information about JWTs, see the [JWT specification](http://self-issued.info/docs/draft-ietf-oauth-json-web-token.html).</span></span>

### <a name="id-tokens"></a><span data-ttu-id="af34b-129">ID 토큰</span><span class="sxs-lookup"><span data-stu-id="af34b-129">ID tokens</span></span>
<span data-ttu-id="af34b-130">ID 토큰은 [OpenID Connect](active-directory-v2-protocols.md)를 사용하여 인증을 수행할 때 앱이 받는 로그인 보안 토큰의 한 형태입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-130">An ID token is a form of sign-in security token that your app receives when it performs authentication by using [OpenID Connect](active-directory-v2-protocols.md).</span></span> <span data-ttu-id="af34b-131">ID 토큰은 [JWT](#types-of-tokens)로 표시되며 사용자로 앱에 로그인하는 데 사용할 수 있는 클레임을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-131">ID tokens are represented as [JWTs](#types-of-tokens), and they contain claims that you can use to sign the user in to your app.</span></span> <span data-ttu-id="af34b-132">다양한 방법으로 ID 토큰에서 클레임을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-132">You can use the claims in an ID token in various ways.</span></span> <span data-ttu-id="af34b-133">일반적으로 관리자는 ID 토큰을 사용하여 계정 정보를 표시하거나 앱에서 액세스 제어를 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-133">Typically, admins use ID tokens to display account information or to make access control decisions in an app.</span></span> <span data-ttu-id="af34b-134">v2.0 끝점은 로그인한 사용자 유형에 관계없이 일관된 클레임 집합을 포함하는 하나의 ID 토큰 유형만 발급합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-134">The v2.0 endpoint issues only one type of ID token, which has a consistent set of claims, regardless of the type of user that is signed in.</span></span> <span data-ttu-id="af34b-135">ID 토큰의 형식 및 내용은 개인 Microsoft 계정 사용자와 회사 또는 학교 계정에 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-135">The format and content of ID tokens are the same for personal Microsoft account users and for work or school accounts.</span></span>

<span data-ttu-id="af34b-136">ID 토큰은 현재 서명되었지만 암호화되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-136">Currently, ID tokens are signed but not encrypted.</span></span> <span data-ttu-id="af34b-137">앱이 ID 토큰을 받으면 [서명의 유효성을 검사](#validating-tokens)하여 토큰의 신뢰성을 입증하고 토큰에 있는 몇 개 클레임의 유효성을 검사하여 유효성을 입증해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-137">When your app receives an ID token, it must [validate the signature](#validating-tokens) to prove the token's authenticity and validate a few claims in the token to prove its validity.</span></span> <span data-ttu-id="af34b-138">앱에서 유효성을 검사하는 클레임은 시나리오 요구 사항에 따라 다를 수 있지만 앱은 모든 시나리오에서 몇 가지 [일반적인 클레임 유효성 검사](#validating-tokens) 를 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-138">The claims validated by an app vary depending on scenario requirements, but your app must perform some [common claim validations](#validating-tokens) in every scenario.</span></span>

<span data-ttu-id="af34b-139">ID 토큰 이외에 다음 섹션에도 ID 토큰의 클레임에 대한 자세한 내용이 나와 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-139">We give you the full details about claims in ID tokens in the following sections, in addition to a sample ID token.</span></span> <span data-ttu-id="af34b-140">ID 토큰의 클레임은 특정 순서로 반환되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-140">Note that claims in ID tokens are not returned in a specific order.</span></span> <span data-ttu-id="af34b-141">또한 언제든지 새 클레임을 ID 토큰에 도입할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-141">Also, new claims can be introduced into ID tokens at any time.</span></span> <span data-ttu-id="af34b-142">새 클레임이 도입될 때 앱을 중단하지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-142">Your app should not break when new claims are introduced.</span></span> <span data-ttu-id="af34b-143">다음 목록에는 앱이 현재 안정적으로 해석할 수 있는 클레임이 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-143">The following list includes the claims that your app currently can reliably interpret.</span></span> <span data-ttu-id="af34b-144">자세한 내용은 [OpenID Connect 사양](http://openid.net/specs/openid-connect-core-1_0.html)에서 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-144">You can find more details in the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span>

#### <a name="sample-id-token"></a><span data-ttu-id="af34b-145">샘플 ID 토큰</span><span class="sxs-lookup"><span data-stu-id="af34b-145">Sample ID token</span></span>
```
eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsImtpZCI6Ik1uQ19WWmNBVGZNNXBPWWlKSE1iYTlnb0VLWSJ9.eyJhdWQiOiI2NzMxZGU3Ni0xNGE2LTQ5YWUtOTdiYy02ZWJhNjkxNDM5MWUiLCJpc3MiOiJodHRwczovL2xvZ2luLm1pY3Jvc29mdG9ubGluZS5jb20vYjk0MTk4MTgtMDlhZi00OWMyLWIwYzMtNjUzYWRjMWYzNzZlL3YyLjAiLCJpYXQiOjE0NTIyODUzMzEsIm5iZiI6MTQ1MjI4NTMzMSwiZXhwIjoxNDUyMjg5MjMxLCJuYW1lIjoiQmFiZSBSdXRoIiwibm9uY2UiOiIxMjM0NSIsIm9pZCI6ImExZGJkZGU4LWU0ZjktNDU3MS1hZDkzLTMwNTllMzc1MGQyMyIsInByZWZlcnJlZF91c2VybmFtZSI6InRoZWdyZWF0YmFtYmlub0BueXkub25taWNyb3NvZnQuY29tIiwic3ViIjoiTUY0Zi1nZ1dNRWppMTJLeW5KVU5RWnBoYVVUdkxjUXVnNWpkRjJubDAxUSIsInRpZCI6ImI5NDE5ODE4LTA5YWYtNDljMi1iMGMzLTY1M2FkYzFmMzc2ZSIsInZlciI6IjIuMCJ9.p_rYdrtJ1oCmgDBggNHB9O38KTnLCMGbMDODdirdmZbmJcTHiZDdtTc-hguu3krhbtOsoYM2HJeZM3Wsbp_YcfSKDY--X_NobMNsxbT7bqZHxDnA2jTMyrmt5v2EKUnEeVtSiJXyO3JWUq9R0dO-m4o9_8jGP6zHtR62zLaotTBYHmgeKpZgTFB9WtUq8DVdyMn_HSvQEfz-LWqckbcTwM_9RNKoGRVk38KChVJo4z5LkksYRarDo8QgQ7xEKmYmPvRr_I7gvM2bmlZQds2OeqWLB1NSNbFZqyFOCgYn3bAQ-nEQSKwBaA36jYGPOVG2r2Qv1uKcpSOxzxaQybzYpQ
```

> [!TIP]
> <span data-ttu-id="af34b-146">연습을 위해 샘플 ID 토큰에 있는 클레임을 [calebb.net](http://calebb.net/)에 붙여넣어 검사하세요.</span><span class="sxs-lookup"><span data-stu-id="af34b-146">For practice, to inspect the claims in the sample ID token, paste the sample ID token into [calebb.net](http://calebb.net/).</span></span>
>
>

#### <a name="claims-in-id-tokens"></a><span data-ttu-id="af34b-147">ID 토큰의 클레임</span><span class="sxs-lookup"><span data-stu-id="af34b-147">Claims in ID tokens</span></span>
| <span data-ttu-id="af34b-148">이름</span><span class="sxs-lookup"><span data-stu-id="af34b-148">Name</span></span> | <span data-ttu-id="af34b-149">클레임</span><span class="sxs-lookup"><span data-stu-id="af34b-149">Claim</span></span> | <span data-ttu-id="af34b-150">예제 값</span><span class="sxs-lookup"><span data-stu-id="af34b-150">Example value</span></span> | <span data-ttu-id="af34b-151">설명</span><span class="sxs-lookup"><span data-stu-id="af34b-151">Description</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="af34b-152">audience</span><span class="sxs-lookup"><span data-stu-id="af34b-152">audience</span></span> |`aud` |`6731de76-14a6-49ae-97bc-6eba6914391e` |<span data-ttu-id="af34b-153">토큰의 의도한 수신자를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-153">Identifies the intended recipient of the token.</span></span> <span data-ttu-id="af34b-154">ID 토큰에서 대상은 Microsoft 응용 프로그램 등록 포털에서 앱에 할당된 앱의 응용 프로그램 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-154">In ID tokens, the audience is your app's Application ID, assigned to your app in the Microsoft Application Registration Portal.</span></span> <span data-ttu-id="af34b-155">앱은 이 값의 유효성을 검사하고 값이 일치하지 않을 경우 토큰을 거부해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-155">Your app should validate this value, and reject the token if the value does not match.</span></span> |
| <span data-ttu-id="af34b-156">발급자</span><span class="sxs-lookup"><span data-stu-id="af34b-156">issuer</span></span> |`iss` |`https://login.microsoftonline.com/b9419818-09af-49c2-b0c3-653adc1f376e/v2.0 ` |<span data-ttu-id="af34b-157">토큰을 생성하고 반환하는 STS(보안 토큰 서비스) 및 사용자가 인증된 Azure AD 테넌트를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-157">Identifies the security token service (STS) that constructs and returns the token, and the Azure AD tenant in which the user was authenticated.</span></span> <span data-ttu-id="af34b-158">앱은 발급자 클레임의 유효성을 검사하여 토큰이 v2.0 끝점에서 제공된 것인지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-158">Your app should validate the issuer claim to ensure that the token came from the v2.0 endpoint.</span></span> <span data-ttu-id="af34b-159">또한 클레임의 GUID 부분을 사용하여 앱에 로그인할 수 있는 테넌트 집합을 제한할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-159">It also should use the GUID portion of the claim to restrict the set of tenants that can sign in to the app.</span></span> <span data-ttu-id="af34b-160">사용자가 Microsoft 계정의 소비자 사용자임을 나타내는 GUID는 `9188040d-6c67-4c5b-b112-36a304b66dad`입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-160">The GUID that indicates that the user is a consumer user from a Microsoft account is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> |
| <span data-ttu-id="af34b-161">발급 시간</span><span class="sxs-lookup"><span data-stu-id="af34b-161">issued at</span></span> |`iat` |`1452285331` |<span data-ttu-id="af34b-162">epoch 시간으로 표시된, 토큰이 발급된 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-162">The time at which the token was issued, represented in epoch time.</span></span> |
| <span data-ttu-id="af34b-163">만료 시간</span><span class="sxs-lookup"><span data-stu-id="af34b-163">expiration time</span></span> |`exp` |`1452289231` |<span data-ttu-id="af34b-164">epoch 시간으로 표시된, 토큰이 무효화되는 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-164">The time at which the token becomes invalid, represented in epoch time.</span></span> <span data-ttu-id="af34b-165">앱은 이 클레임을 사용하여 토큰 수명의 유효성을 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-165">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="af34b-166">이전이 아님</span><span class="sxs-lookup"><span data-stu-id="af34b-166">not before</span></span> |`nbf` |`1452285331` |<span data-ttu-id="af34b-167">epoch 시간으로 표시된, 토큰이 유효화되는 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-167">The time at which the token becomes valid, represented in epoch time.</span></span> <span data-ttu-id="af34b-168">발급 시간과 일반적으로 동일합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-168">It is usually the same as the issuance time.</span></span> <span data-ttu-id="af34b-169">앱은 이 클레임을 사용하여 토큰 수명의 유효성을 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-169">Your app should use this claim to verify the validity of the token lifetime.</span></span> |
| <span data-ttu-id="af34b-170">버전</span><span class="sxs-lookup"><span data-stu-id="af34b-170">version</span></span> |`ver` |`2.0` |<span data-ttu-id="af34b-171">Azure AD에서 정의된 ID 토큰의 버전입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-171">The version of the ID token, as defined by Azure AD.</span></span> <span data-ttu-id="af34b-172">V2.0 끝점의 경우 값은 `2.0`입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-172">For the v2.0 endpoint, the value is `2.0`.</span></span> |
| <span data-ttu-id="af34b-173">테넌트 ID</span><span class="sxs-lookup"><span data-stu-id="af34b-173">tenant ID</span></span> |`tid` |`b9419818-09af-49c2-b0c3-653adc1f376e` |<span data-ttu-id="af34b-174">사용자가 속해 있는 Azure AD 테넌트를 나타내는 GUID입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-174">A GUID that represents the Azure AD tenant that the user is from.</span></span> <span data-ttu-id="af34b-175">회사 및 학교 계정의 경우 GUID는 사용자가 속해 있는 조직의 변경 불가능 테넌트 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-175">For work and school accounts, the GUID is the immutable tenant ID of the organization that the user belongs to.</span></span> <span data-ttu-id="af34b-176">개인 계정의 경우 이 값은 `9188040d-6c67-4c5b-b112-36a304b66dad`입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-176">For personal accounts, the value is `9188040d-6c67-4c5b-b112-36a304b66dad`.</span></span> <span data-ttu-id="af34b-177">`profile` 범위는 이 클레임을 받기 위해 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-177">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="af34b-178">코드 해시</span><span class="sxs-lookup"><span data-stu-id="af34b-178">code hash</span></span> |`c_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="af34b-179">코드 해시는 OAuth 2.0 권한 부여 코드와 함께 ID 토큰이 발급된 경우에만 ID 토큰에 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-179">The code hash is included in ID tokens only when the ID token is issued with an OAuth 2.0 authorization code.</span></span> <span data-ttu-id="af34b-180">인증 코드의 신뢰성이 유효한지 검사하는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-180">It can be used to validate the authenticity of an authorization code.</span></span> <span data-ttu-id="af34b-181">이 유효성 검사를 수행하는 방법에 대한 자세한 내용은 [OpenID Connect 사양](http://openid.net/specs/openid-connect-core-1_0.html)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af34b-181">For details about performing this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="af34b-182">액세스 토큰 해시</span><span class="sxs-lookup"><span data-stu-id="af34b-182">access token hash</span></span> |`at_hash` |`SGCPtt01wxwfgnYZy2VJtQ` |<span data-ttu-id="af34b-183">액세스 토큰 해시는 OAuth 2.0 액세스 토큰과 함께 ID 토큰이 발급된 경우에만 ID 토큰에 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-183">The access token hash is included in ID tokens only when the ID token is issued with an OAuth 2.0 access token.</span></span> <span data-ttu-id="af34b-184">액세스 토큰의 신뢰성이 유효한지 검사하는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-184">It can be used to validate the authenticity of an access token.</span></span> <span data-ttu-id="af34b-185">이 유효성 검사를 수행하는 방법에 대한 자세한 내용은 [OpenID Connect 사양](http://openid.net/specs/openid-connect-core-1_0.html)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af34b-185">For details about performing this validation, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html).</span></span> |
| <span data-ttu-id="af34b-186">nonce</span><span class="sxs-lookup"><span data-stu-id="af34b-186">nonce</span></span> |`nonce` |`12345` |<span data-ttu-id="af34b-187">nonce는 토큰 재생 공격을 완화하기 위한 전략입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-187">The nonce is a strategy for mitigating token replay attacks.</span></span> <span data-ttu-id="af34b-188">앱은 `nonce` 쿼리 매개 변수를 사용하여 권한 부여 요청에 nonce를 지정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-188">Your app can specify a nonce in an authorization request by using the `nonce` query parameter.</span></span> <span data-ttu-id="af34b-189">요청에 제공한 값은 수정되지 않고 ID 토큰의 `nonce` 클레임에 내보내집니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-189">The value you provide in the request is emitted in the ID token's `nonce` claim, unmodified.</span></span> <span data-ttu-id="af34b-190">앱은 특정 ID 토큰과 앱 세션을 연결하는 요청에 지정된 값과 비교하여 값을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-190">Your app can verify the value against the value it specified on the request, which associates the app's session with a specific ID token.</span></span> <span data-ttu-id="af34b-191">앱은 ID 토큰 유효성 검사 프로세스 중에 이 유효성 검사를 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-191">Your app should perform this validation during the ID token validation process.</span></span> |
| <span data-ttu-id="af34b-192">name</span><span class="sxs-lookup"><span data-stu-id="af34b-192">name</span></span> |`name` |`Babe Ruth` |<span data-ttu-id="af34b-193">이름 클레임은 토큰의 주체를 식별하는, 사람이 읽을 수 있는 값을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-193">The name claim provides a human-readable value that identifies the subject of the token.</span></span> <span data-ttu-id="af34b-194">이 값은 반드시 고유한 것은 아니며 변경 가능하고 표시 용도로만 사용하도록 디자인되었습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-194">The value is not guaranteed to be unique, it is mutable, and it's designed to be used only for display purposes.</span></span> <span data-ttu-id="af34b-195">`profile` 범위는 이 클레임을 받기 위해 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-195">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="af34b-196">email</span><span class="sxs-lookup"><span data-stu-id="af34b-196">email</span></span> |`email` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="af34b-197">만약 있다면 사용자 계정과 연결된 기본 전자 메일 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-197">The primary email address associated with the user account, if one exists.</span></span> <span data-ttu-id="af34b-198">해당 값은 변경 가능하며 시간이 지남에 따라 변경될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-198">Its value is mutable and might change over time.</span></span> <span data-ttu-id="af34b-199">`email` 범위는 이 클레임을 받기 위해 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-199">The `email` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="af34b-200">기본 설정된 사용자 이름</span><span class="sxs-lookup"><span data-stu-id="af34b-200">preferred username</span></span> |`preferred_username` |`thegreatbambino@nyy.onmicrosoft.com` |<span data-ttu-id="af34b-201">v2.0 끝점에서 사용자를 나타내는 기본 사용자 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-201">The primary username that represents the user in the v2.0 endpoint.</span></span> <span data-ttu-id="af34b-202">메일 주소, 전화 번호 또는 지정된 형식이 없는 일반 사용자 이름일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-202">It could be an email address, phone number, or a generic username without a specified format.</span></span> <span data-ttu-id="af34b-203">해당 값은 변경 가능하며 시간이 지남에 따라 변경될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-203">Its value is mutable and might change over time.</span></span> <span data-ttu-id="af34b-204">`profile` 범위는 이 클레임을 받기 위해 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-204">The `profile` scope is required in order to receive this claim.</span></span> |
| <span data-ttu-id="af34b-205">subject</span><span class="sxs-lookup"><span data-stu-id="af34b-205">subject</span></span> |`sub` |`MF4f-ggWMEji12KynJUNQZphaUTvLcQug5jdF2nl01Q` | <span data-ttu-id="af34b-206">앱 사용자 등 토큰에서 정보를 어설션하는 보안 주체입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-206">The principal about which the token asserts information, such as the user of an app.</span></span> <span data-ttu-id="af34b-207">이 값은 변경할 수 없으며 재할당 또는 재사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-207">This value is immutable and cannot be reassigned or reused.</span></span> <span data-ttu-id="af34b-208">예를 들어, 리소스 액세스에 토큰을 사용할 때 이 값을 사용하면 안전하게 인증 검사를 수행하고 데이터베이스 테이블에서 키로 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-208">It can be used to perform authorization checks safely, such as when the token is used to access a resource, and can be used as a key in database tables.</span></span> <span data-ttu-id="af34b-209">Azure AD에서 발급하는 토큰에는 항상 주체가 있기 때문에 이 값을 일반 용도의 인증 시스템에 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-209">Because the subject is always present in the tokens that Azure AD issues, we recommend using this value in a general-purpose authorization system.</span></span> <span data-ttu-id="af34b-210">그러나 주체는 쌍으로 된 식별자이며 특정 응용 프로그램 ID에 고유합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-210">The subject is, however, a pairwise identifier - it is unique to a particular application ID.</span></span>  <span data-ttu-id="af34b-211">따라서 단일 사용자가 두 개의 다른 클라이언트 ID를 사용하여 두 개의 다른 앱에 로그인하는 경우 해당 앱은 주체 클레임에 두 개의 다른 값을 받게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-211">Therefore, if a single user signs into two different apps using two different client IDs, those apps will receive two different values for the subject claim.</span></span>  <span data-ttu-id="af34b-212">아키텍처 및 개인 정보 보호 요구 사항에 따라 적합할 수도 있고 적합하지 않을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-212">This may or may not be desired depending on your architecture and privacy requirements.</span></span> |
| <span data-ttu-id="af34b-213">개체 ID</span><span class="sxs-lookup"><span data-stu-id="af34b-213">object ID</span></span> |`oid` |`a1dbdde8-e4f9-4571-ad93-3059e3750d23` | <span data-ttu-id="af34b-214">이 경우에 Microsoft ID 시스템에 있는 개체의 변경할 수 없는 식별자는 사용자 계정입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-214">The immutable identifier for an object in the Microsoft identity system, in this case, a user account.</span></span>  <span data-ttu-id="af34b-215">데이터베이스 테이블의 키로써 안전하게 권한 부여 검사를 수행하는 데 사용할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-215">It can also be used to perform authorization checks safely and as a key in database tables.</span></span> <span data-ttu-id="af34b-216">이 ID는 응용 프로그램에서 사용자를 고유하게 식별합니다. 동일한 사용자가 로그인한 두 개의 다른 응용 프로그램은 `oid` 클레임에서 동일한 값을 받습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-216">This ID uniquely identifies the user across applications - two different applications signing in the same user will receive the same value in the `oid` claim.</span></span>  <span data-ttu-id="af34b-217">즉, Microsoft Graph와 같은 Microsoft Online Services에 대한 쿼리를 수행할 때 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-217">This means that it can be used when making queries to Microsoft online services, such as the Microsoft Graph.</span></span>  <span data-ttu-id="af34b-218">Microsoft Graph는 이 ID를 지정된 사용자 계정에 대한 `id` 속성으로 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-218">The Microsoft Graph will return this ID as the `id` property for a given user account.</span></span>  <span data-ttu-id="af34b-219">`oid`를 사용하면 여러 앱에서 사용자의 상관 관계를 지정하기 때문에 이 클레임을 수신하기 위해 `profile` 범위가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-219">Because the `oid` allows multiple apps to correlate users, the `profile` scope is required in order to receive this claim.</span></span> <span data-ttu-id="af34b-220">단일 사용자가 여러 테넌트에 존재하는 경우 사용자는 각 테넌트에서 다른 개체 ID를 포함합니다. 사용자가 동일한 자격 증명으로 각 계정에 로그인하더라도 서로 다른 계정으로 간주됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-220">Note that if a single user exists in multiple tenants, the user will contain a different object ID in each tenant - they are considered different accounts, even though the user logs into each account with the same credentials.</span></span> |

### <a name="access-tokens"></a><span data-ttu-id="af34b-221">액세스 토큰</span><span class="sxs-lookup"><span data-stu-id="af34b-221">Access tokens</span></span>
<span data-ttu-id="af34b-222">v2.0 끝점이 발급하는 액세스 토큰은 현재 Microsoft 서비스에서만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-222">Currently, access tokens issued by the v2.0 endpoint can be consumed only by Microsoft Services.</span></span> <span data-ttu-id="af34b-223">현재 지원되는 시나리오에 대해서는 앱이 액세스 토큰의 유효성 검사 또는 검사를 수행할 필요가 없습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-223">Your apps shouldn't need to perform any validation or inspection of access tokens for any of the currently supported scenarios.</span></span> <span data-ttu-id="af34b-224">액세스 토큰을 완전 불투명으로 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-224">You can treat access tokens as completely opaque.</span></span> <span data-ttu-id="af34b-225">앱이 HTTP 요청을 통해 Microsoft에 전달할 수 있는 문자열일 뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-225">They are just strings that your app can pass to Microsoft in HTTP requests.</span></span>

<span data-ttu-id="af34b-226">조만간 v2.0 끝점에 다른 클라이언트의 액세스 토큰을 받을 수 있는 기능이 도입될 예정입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-226">In the near future, the v2.0 endpoint will introduce the ability for your app to receive access tokens from other clients.</span></span> <span data-ttu-id="af34b-227">그때 이 참조 항목의 정보는 앱이 액세스 토큰 유효성 검사 및 기타 유사한 작업을 수행하는 데 필요한 정보로 업데이트될 것입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-227">At that time, the information in this reference topic will be updated with the information that you need for your app to perform access token validation and other similar tasks.</span></span>

<span data-ttu-id="af34b-228">v2.0 끝점의 액세스 토큰을 요청하는 경우 앱이 사용할 수 있도록 액세스 토큰에 대한 메타데이터도 v2.0 끝점에서 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-228">When you request an access token from the v2.0 endpoint, the v2.0 endpoint also returns metadata about the access token for your app to use.</span></span> <span data-ttu-id="af34b-229">이 정보에는 액세스 토큰의 만료 시간 및 유효한 범위가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-229">This information includes the expiry time of the access token and the scopes for which it is valid.</span></span> <span data-ttu-id="af34b-230">앱은 이 메타데이터를 사용하여 액세스 토큰 자체를 구문 분석하지 않고도 액세스 토큰의 지능형 캐싱을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-230">Your app uses this metadata to perform intelligent caching of access tokens without having to parse open the access token itself.</span></span>

### <a name="refresh-tokens"></a><span data-ttu-id="af34b-231">새로 고침 토큰</span><span class="sxs-lookup"><span data-stu-id="af34b-231">Refresh tokens</span></span>
<span data-ttu-id="af34b-232">새로 고침 토큰은 앱이 OAuth 2.0 흐름에서 새 액세스 토큰을 가져오는 데 사용할 수 있는 보안 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-232">Refresh tokens are security tokens that your app can use to get new access tokens in an OAuth 2.0 flow.</span></span> <span data-ttu-id="af34b-233">앱은 새로 고침 토큰을 사용하여 사용자 상호 작용을 요구하지 않고도 사용자 대신 리소스에 장기적으로 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-233">Your app can use refresh tokens to achieve long-term access to resources on behalf of a user without requiring interaction with the user.</span></span>

<span data-ttu-id="af34b-234">새로 고침 토큰은 다중 리소스입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-234">Refresh tokens are multi-resource.</span></span> <span data-ttu-id="af34b-235">한 리소스에 대한 토큰 요청 중에 받은 새로 고침 토큰을 완전히 다른 리소스에 대한 액세스 토큰으로 교환할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-235">A refresh token received during a token request for one resource can be redeemed for access tokens to a completely different resource.</span></span>

<span data-ttu-id="af34b-236">토큰 응답에서 새로 고침을 받으려면 앱이 `offline_acesss` 범위를 요청하고 부여 받아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-236">To receive a refresh in a token response, your app must request and be granted the `offline_acesss` scope.</span></span> <span data-ttu-id="af34b-237">`offline_access` 범위에 대한 자세한 내용은 [동의 및 범위](active-directory-v2-scopes.md) 문서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af34b-237">To learn more about the `offline_access` scope, see the [consent and scopes](active-directory-v2-scopes.md) article.</span></span>

<span data-ttu-id="af34b-238">새로 고침 토큰은 앱에 완전히 불투명하며 항상 그럴 것입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-238">Refresh tokens are, and always will be, completely opaque to your app.</span></span> <span data-ttu-id="af34b-239">새로 고침 토큰은 Azure AD v2.0 끝점에서 발급되며 Azure AD v2.0 끝점에서만 검사되고 해석됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-239">They are issued by the Azure AD v2.0 endpoint and can only be inspected and interpreted by the v2.0 endpoint.</span></span> <span data-ttu-id="af34b-240">또한 새로 고침 토큰은 수명이 길지만 일정 기간 지속될 것으로 예상하도록 앱을 작성해서는 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-240">They are long-lived, but your app should not be written to expect that a refresh token will last for any period of time.</span></span> <span data-ttu-id="af34b-241">다양한 이유로 언제든지 새로 고침 토큰이 무효화될 수 있기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-241">Refresh tokens can be invalidated at any moment for various reasons.</span></span> <span data-ttu-id="af34b-242">앱에서 새로 고침 토큰이 유효한지 확인하는 유일한 방법은 v2.0 끝점에 대한 토큰 요청을 수행하여 교환하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-242">The only way for your app to know if a refresh token is valid is to attempt to redeem it by making a token request to the v2.0 endpoint.</span></span>

<span data-ttu-id="af34b-243">새로 고침 토큰을 새 액세스 토큰으로 교환할 때 앱에 `offline_access` 범위가 부여된 경우 토큰 응답에 새로운 새로 고침 토큰을 받게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-243">When you redeem a refresh token for a new access token (and if your app had been granted the `offline_access` scope), you receive a new refresh token in the token response.</span></span> <span data-ttu-id="af34b-244">새로 발급된 새로 고침 토큰을 저장하여 요청에 사용한 토큰을 대체해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-244">Save the newly issued refresh token, to replace the one you used in the request.</span></span> <span data-ttu-id="af34b-245">이렇게 하면 새로 고침 토큰이 최대한 오랫동안 유효한 상태로 유지되도록 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-245">This guarantees that your refresh tokens remain valid for as long as possible.</span></span>

## <a name="validating-tokens"></a><span data-ttu-id="af34b-246">토큰 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="af34b-246">Validating tokens</span></span>
<span data-ttu-id="af34b-247">현재 앱이 수행해야 하는 토큰 유효성 검사는 ID 토큰 유효성 검사뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-247">Currently, the only token validation your apps should need to perform is validating ID tokens.</span></span> <span data-ttu-id="af34b-248">ID 토큰의 유효성을 검사하려면 앱이 ID 토큰의 서명과 ID 토큰에 있는 클레임의 유효성을 모두 검사해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-248">To validate an ID token, your app should validate both the ID token's signature and the claims in the ID token.</span></span>

<!-- TODO: Link -->
<span data-ttu-id="af34b-249">Microsoft는 토큰 유효성 검사를 쉽게 처리하는 방법을 보여 주는 라이브러리 및 코드 샘플을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-249">Microsoft provides libraries and code samples that show you how to easily handle token validation.</span></span> <span data-ttu-id="af34b-250">다음 섹션에서는 기본 프로세스를 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-250">In the next sections, we describe the underlying process.</span></span> <span data-ttu-id="af34b-251">JWT 유효성 검사에 사용할 수 있는 여러 타사 오픈 소스 라이브러리도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-251">Several third-party open-source libraries also are available for JWT validation.</span></span> <span data-ttu-id="af34b-252">거의 모든 플랫폼 및 언어에 대해 하나 이상의 옵션이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-252">There's at least one library option for almost every platform and language.</span></span>

### <a name="validate-the-signature"></a><span data-ttu-id="af34b-253">서명의 유효성을 검사</span><span class="sxs-lookup"><span data-stu-id="af34b-253">Validate the signature</span></span>
<span data-ttu-id="af34b-254">JWT에는 `.` 문자로 구분된 세 개의 세그먼트가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-254">A JWT contains three segments, which are separated by the `.` character.</span></span> <span data-ttu-id="af34b-255">첫 번째 세그먼트는 *헤더*, 두 번째 세그먼트는 *본문*, 세 번째 세그먼트는 *서명*이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-255">The first segment is known as the *header*, the second segment is the *body*, and the third segment is the *signature*.</span></span> <span data-ttu-id="af34b-256">서명 세그먼트는 앱이 신뢰할 수 있도록 ID 토큰의 신뢰성이 유효한지 검사하는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-256">The signature segment can be used to validate the authenticity of the ID token so that it can be trusted by your app.</span></span>

<span data-ttu-id="af34b-257">ID 토큰은 RSA 256 등의 업계 표준 비대칭 암호화 알고리즘을 사용하여 서명됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-257">ID tokens are signed by using industry-standard asymmetric encryption algorithms, such as RSA 256.</span></span> <span data-ttu-id="af34b-258">ID 토큰의 헤더에는 토큰 서명에 사용된 키 및 암호화 방법에 대한 정보가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-258">The header of the ID token has information about the key and encryption method used to sign the token.</span></span> <span data-ttu-id="af34b-259">예:</span><span class="sxs-lookup"><span data-stu-id="af34b-259">For example:</span></span>

```
{
  "typ": "JWT",
  "alg": "RS256",
  "kid": "MnC_VZcATfM5pOYiJHMba9goEKY"
}
```

<span data-ttu-id="af34b-260">`alg` 클레임은 토큰을 서명하는 데 사용된 알고리즘을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-260">The `alg` claim indicates the algorithm that was used to sign the token.</span></span> <span data-ttu-id="af34b-261">`kid` 클레임은 토큰을 서명하는 데 사용된 공개 키를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-261">The `kid` claim indicates the public key that was used to sign the token.</span></span>

<span data-ttu-id="af34b-262">언제든지 v2.0 끝점은 공개-개인 키 쌍의 특정 집합 중 하나를 사용하여 ID 토큰을 서명할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-262">At any time, the v2.0 endpoint might sign an ID token by using any one of a specific set of public-private key pairs.</span></span> <span data-ttu-id="af34b-263">v2.0 끝점은 주기적으로 가능한 키 집합을 순환하므로 이러한 키 변경을 자동으로 처리하도록 앱을 작성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-263">The v2.0 endpoint periodically rotates the possible set of keys, so your app should be written to handle those key changes automatically.</span></span> <span data-ttu-id="af34b-264">v2.0 끝점에서 사용된 공개 키에 대한 업데이트를 확인하는 적절한 빈도는 매 24시간입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-264">A reasonable frequency to check for updates to the public keys used by the v2.0 endpoint is every 24 hours.</span></span>

<span data-ttu-id="af34b-265">다음 위치에 있는 OpenID Connect 메타데이터 문서를 사용하여 서명 유효성 검사에 필요한 서명 키 데이터를 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-265">You can acquire the signing key data that you need to validate the signature by using the OpenID Connect metadata document located at:</span></span>

```
https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration
```

> [!TIP]
> <span data-ttu-id="af34b-266">브라우저에서 이 URL을 사용해 보세요!</span><span class="sxs-lookup"><span data-stu-id="af34b-266">Try the URL in a browser!</span></span>
>
>

<span data-ttu-id="af34b-267">이 메타데이터 문서는 OpenID Connect 인증에 필요한 다양한 끝점의 위치 등 여러 유용한 정보가 있는 JSON 개체입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-267">This metadata document is a JSON object that has several useful pieces of information, such as the location of the various endpoints required for OpenID Connect authentication.</span></span>  <span data-ttu-id="af34b-268">이 문서에는 토큰 서명에 사용되는 공개 키 집합의 위치를 제공하는 *jwks_uri*도 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-268">The document also includes a *jwks_uri*, which gives the location of the set of public keys used to sign tokens.</span></span> <span data-ttu-id="af34b-269">jwks_uri에 있는 JSON 문서에는 현재 사용 중인 모든 공개 키 정보가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-269">The JSON document located at the jwks_uri has all the public key information that is currently in use.</span></span> <span data-ttu-id="af34b-270">앱은 JWT 헤더에 `kid` 클레임을 사용하여 토큰 서명에 사용된 공개 키를 이 문서에서 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-270">Your app can use the `kid` claim in the JWT header to select which public key in this document has been used to sign a token.</span></span> <span data-ttu-id="af34b-271">그런 다음 올바른 공개 키와 표시된 알고리즘을 사용하여 서명 유효성 검사를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-271">It then performs signature validation by using the correct public key and the indicated algorithm.</span></span>

<span data-ttu-id="af34b-272">서명 유효성 검사 수행은 이 문서의 범위를 벗어납니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-272">Performing signature validation is outside the scope of this document.</span></span> <span data-ttu-id="af34b-273">많은 오픈 소스 라이브러리가 도움이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-273">Many open-source libraries are available to help you with this.</span></span>

### <a name="validate-the-claims"></a><span data-ttu-id="af34b-274">클레임 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="af34b-274">Validate the claims</span></span>
<span data-ttu-id="af34b-275">사용자 로그인 시 앱이 ID 토큰을 받은 경우 ID 토큰의 클레임에 대해서도 몇 가지 검사를 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-275">When your app receives an ID token upon user sign-in, it should also perform a few checks against the claims in the ID token.</span></span> <span data-ttu-id="af34b-276">포함하지만 다음과 같이 제한되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-276">These include but are not limited to:</span></span>

* <span data-ttu-id="af34b-277">**대상** 클레임 - ID 토큰이 앱에 제공하려고 의도했던 것이 맞는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-277">**audience** claim, to verify that the ID token was intended to be given to your app</span></span>
* <span data-ttu-id="af34b-278">**이전이 아님** 및 **만료 시간** 클레임 - ID 토큰이 만료되지 않았는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-278">**not before** and **expiration time** claims, to verify that the ID token has not expired</span></span>
* <span data-ttu-id="af34b-279">**발급자** 클레임 - v2.0 끝점이 앱에 토큰을 발급했는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-279">**issuer** claim, to verify that the token was issued to your app by the v2.0 endpoint</span></span>
* <span data-ttu-id="af34b-280">**nonce** - 토큰 재생 공격 완화로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-280">**nonce**, as a token replay attack mitigation</span></span>

<span data-ttu-id="af34b-281">앱이 수행해야 하는 클레임 유효성 검사의 전체 목록은 [OpenID Connect 사양](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="af34b-281">For a full list of claim validations that your app should perform, see the [OpenID Connect specification](http://openid.net/specs/openid-connect-core-1_0.html#IDTokenValidation).</span></span>

<span data-ttu-id="af34b-282">이러한 클레임의 예상 값에 대한 자세한 내용은 [ID 토큰](# ID tokens) 섹션에 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-282">Details of the expected values for these claims are included in the [ID tokens](# ID tokens) section.</span></span>

## <a name="token-lifetimes"></a><span data-ttu-id="af34b-283">토큰 수명</span><span class="sxs-lookup"><span data-stu-id="af34b-283">Token lifetimes</span></span>
<span data-ttu-id="af34b-284">다음 토큰 수명은 앱 개발 및 디버그에 유용할 수 있으므로</span><span class="sxs-lookup"><span data-stu-id="af34b-284">We provide the following token lifetimes for your information only.</span></span> <span data-ttu-id="af34b-285">순수하게 이해를 돕기 위해 제공되었습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-285">The information might help you as you develop and debug apps.</span></span> <span data-ttu-id="af34b-286">이러한 수명이 일정하게 유지된다고 예상하도록 앱을 작성해서는 안 됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-286">Your apps should not be written to expect any of these lifetimes to remain constant.</span></span> <span data-ttu-id="af34b-287">토큰 수명은 언제든지 변경될 수 있고 변경됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-287">Token lifetimes can and will change at any time.</span></span>

| <span data-ttu-id="af34b-288">위임</span><span class="sxs-lookup"><span data-stu-id="af34b-288">Token</span></span> | <span data-ttu-id="af34b-289">수명</span><span class="sxs-lookup"><span data-stu-id="af34b-289">Lifetime</span></span> | <span data-ttu-id="af34b-290">설명</span><span class="sxs-lookup"><span data-stu-id="af34b-290">Description</span></span> |
| --- | --- | --- |
| <span data-ttu-id="af34b-291">ID 토큰(회사 또는 학교 계정)</span><span class="sxs-lookup"><span data-stu-id="af34b-291">ID tokens (work or school accounts)</span></span> |<span data-ttu-id="af34b-292">1시간</span><span class="sxs-lookup"><span data-stu-id="af34b-292">1 hour</span></span> |<span data-ttu-id="af34b-293">ID 토큰은 일반적으로 1시간 동안 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-293">ID tokens typically are valid for 1 hour.</span></span> <span data-ttu-id="af34b-294">웹앱은 이 동일한 수명을 사용하여 사용자와의 자체 세션을 유지 관리하거나 완전히 다른 세션 수명을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-294">Your web app can use this same lifetime to maintain its own session with the user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="af34b-295">앱이 새 ID 토큰을 가져와야 하는 경우 v2.0 권한 부여 끝점에 대한 새 로그인 요청을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-295">If your app needs to get a new ID token, it needs to make a new sign-in request to the v2.0 authorize endpoint.</span></span> <span data-ttu-id="af34b-296">사용자에게 v2.0 끝점과의 유효한 브라우저 세션이 있는 경우 자격 증명을 다시 입력할 필요가 없을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-296">If the user has a valid browser session with the v2.0 endpoint, the user might not be required to enter their credentials again.</span></span> |
| <span data-ttu-id="af34b-297">ID 토큰(개인 계정)</span><span class="sxs-lookup"><span data-stu-id="af34b-297">ID tokens (personal accounts)</span></span> |<span data-ttu-id="af34b-298">24시간</span><span class="sxs-lookup"><span data-stu-id="af34b-298">24 hours</span></span> |<span data-ttu-id="af34b-299">개인 계정에 대한 ID 토큰은 일반적으로 24시간 동안 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-299">ID tokens for personal accounts typically are valid for 24 hours.</span></span> <span data-ttu-id="af34b-300">웹앱은 이 동일한 수명을 사용하여 사용자와의 자체 세션을 유지 관리하거나 완전히 다른 세션 수명을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-300">Your web app can use this same lifetime to maintain its own session with the user (recommended), or you can choose a completely different session lifetime.</span></span> <span data-ttu-id="af34b-301">앱이 새 ID 토큰을 가져와야 하는 경우 v2.0 권한 부여 끝점에 대한 새 로그인 요청을 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-301">If your app needs to get a new ID token, it needs to make a new sign-in request to the v2.0 authorize endpoint.</span></span> <span data-ttu-id="af34b-302">사용자에게 v2.0 끝점과의 유효한 브라우저 세션이 있는 경우 자격 증명을 다시 입력할 필요가 없을 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-302">If the user has a valid browser session with the v2.0 endpoint, the user might not be required to enter their credentials again.</span></span> |
| <span data-ttu-id="af34b-303">액세스 토큰(회사 또는 학교 계정)</span><span class="sxs-lookup"><span data-stu-id="af34b-303">Access tokens (work or school accounts)</span></span> |<span data-ttu-id="af34b-304">1시간</span><span class="sxs-lookup"><span data-stu-id="af34b-304">1 hour</span></span> |<span data-ttu-id="af34b-305">토큰 메타데이터의 일부로 토큰 응답에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-305">Indicated in token responses as part of the token metadata.</span></span> |
| <span data-ttu-id="af34b-306">액세스 토큰(개인 계정)</span><span class="sxs-lookup"><span data-stu-id="af34b-306">Access tokens (personal accounts)</span></span> |<span data-ttu-id="af34b-307">1시간</span><span class="sxs-lookup"><span data-stu-id="af34b-307">1 hour</span></span> |<span data-ttu-id="af34b-308">토큰 메타데이터의 일부로 토큰 응답에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-308">Indicated in token responses as part of the token metadata.</span></span> <span data-ttu-id="af34b-309">개인 계정 대신 발급된 액세스 토큰은 다른 수명으로 구성할 수도 있지만 1시간이 일반적입니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-309">Access tokens that are issued on behalf of personal accounts can be configured for a different lifetime, but 1 hour is typical.</span></span> |
| <span data-ttu-id="af34b-310">새로 고침 토큰(회사 또는 학교 계정)</span><span class="sxs-lookup"><span data-stu-id="af34b-310">Refresh tokens (work or school account)</span></span> |<span data-ttu-id="af34b-311">최대 14일</span><span class="sxs-lookup"><span data-stu-id="af34b-311">Up to 14 days</span></span> |<span data-ttu-id="af34b-312">단일 새로 고침 토큰이 최대 14일 동안 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-312">A single refresh token is valid for a maximum of 14 days.</span></span> <span data-ttu-id="af34b-313">그러나 새로 고침 토큰은 다양한 이유로 언제든지 무효화될 수 있으므로 실패하거나 앱이 새로운 새로 고침 토큰으로 대체할 때까지 앱에서 계속 새로 고침 토큰을 시도하고 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-313">However, the refresh token might become invalid at any time for various reasons, so your app should continue to try to use a refresh token until it fails, or until your app replaces it with a new refresh token.</span></span> <span data-ttu-id="af34b-314">사용자가 자격 증명을 입력한 후 90일이 경과한 경우에도 새로 고침 토큰이 무효화됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-314">A refresh token also becomes invalid if it has been 90 days since the user has entered their credentials.</span></span> |
| <span data-ttu-id="af34b-315">새로 고침 토큰(개인 계정)</span><span class="sxs-lookup"><span data-stu-id="af34b-315">Refresh tokens (personal accounts)</span></span> |<span data-ttu-id="af34b-316">최대 1년</span><span class="sxs-lookup"><span data-stu-id="af34b-316">Up to 1 year</span></span> |<span data-ttu-id="af34b-317">단일 새로 고침 토큰이 최대 1년 동안 유효합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-317">A single refresh token is valid for a maximum of 1 year.</span></span> <span data-ttu-id="af34b-318">그러나 새로 고침 토큰은 다양한 이유로 언제든지 무효화될 수 있으므로 실패할 때까지 앱에서 계속 새로 고침 토큰을 시도하고 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-318">However, the refresh token might become invalid at any time for various reasons, so your app should continue to try to use a refresh token until it fails.</span></span> |
| <span data-ttu-id="af34b-319">권한 부여 코드(회사 또는 학교 계정)</span><span class="sxs-lookup"><span data-stu-id="af34b-319">Authorization codes (work or school accounts)</span></span> |<span data-ttu-id="af34b-320">10분</span><span class="sxs-lookup"><span data-stu-id="af34b-320">10 minutes</span></span> |<span data-ttu-id="af34b-321">권한 부여 코드는 의도적으로 수명이 짧으므로 받는 즉시 액세스 토큰 및 새로 고침 토큰으로 교환해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-321">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when the tokens are received.</span></span> |
| <span data-ttu-id="af34b-322">권한 부여 코드(개인 계정)</span><span class="sxs-lookup"><span data-stu-id="af34b-322">Authorization codes (personal accounts)</span></span> |<span data-ttu-id="af34b-323">5분</span><span class="sxs-lookup"><span data-stu-id="af34b-323">5 minutes</span></span> |<span data-ttu-id="af34b-324">권한 부여 코드는 의도적으로 수명이 짧으므로 받는 즉시 액세스 토큰 및 새로 고침 토큰으로 교환해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-324">Authorization codes are purposely short-lived, and should be immediately redeemed for access tokens and refresh tokens when the tokens are received.</span></span> <span data-ttu-id="af34b-325">개인 계정 대신 발급된 권한 부여 코드는 일회용으로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="af34b-325">Authorization codes that are issued on behalf of personal accounts are for one-time use.</span></span> |
