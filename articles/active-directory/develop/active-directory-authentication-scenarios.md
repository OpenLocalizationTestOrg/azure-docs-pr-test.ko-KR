---
title: "Azure AD에 대 한 시나리오 aaaAuthentication | Microsoft Docs"
description: "Hello 5 가장 일반적인 인증 시나리오에 대 한 Azure Active Directory (AAD)의 개요"
services: active-directory
documentationcenter: dev-center-name
author: skwan
manager: mbaldwin
editor: 
ms.assetid: 0c84e7d0-16aa-4897-82f2-f53c6c990fd9
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: skwan
ms.custom: aaddev
ms.openlocfilehash: 5b391e3f096fcb52934c4a8aff08688352bfd3dc
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="authentication-scenarios-for-azure-ad"></a><span data-ttu-id="33c07-103">Azure AD의 인증 시나리오</span><span class="sxs-lookup"><span data-stu-id="33c07-103">Authentication Scenarios for Azure AD</span></span>
<span data-ttu-id="33c07-104">Azure Active Directory (Azure AD) 제공 하 여 identity 서비스를 지 원하는 산업 표준 OAuth 2.0 및 OpenID Connect와 같은 오픈 소스 라이브러리 toohelp 다양 한 플랫폼에 대 한 프로토콜에 대 한 개발자를 위한 인증을 간소화 신속 하 게 코딩을 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-104">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect, as well as open source libraries for different platforms toohelp you start coding quickly.</span></span> <span data-ttu-id="33c07-105">이 문서는 데 도움이 됩니다 다양 한 Azure AD 시나리오에서는 hello 및 안내해 tooget 시작 하는 방법을 파악 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-105">This document will help you understand hello various scenarios Azure AD supports and will show you how tooget started.</span></span> <span data-ttu-id="33c07-106">Hello 다음 섹션으로 구분 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-106">It’s divided into hello following sections:</span></span>

* [<span data-ttu-id="33c07-107">Azure AD 인증의 기본 사항</span><span class="sxs-lookup"><span data-stu-id="33c07-107">Basics of Authentication in Azure AD</span></span>](#basics-of-authentication-in-azure-ad)
* [<span data-ttu-id="33c07-108">Azure AD 보안 토큰의 클레임</span><span class="sxs-lookup"><span data-stu-id="33c07-108">Claims in Azure AD Security Tokens</span></span>](#claims-in-azure-ad-security-tokens)
* [<span data-ttu-id="33c07-109">Azure AD 응용 프로그램 등록의 기본 사항</span><span class="sxs-lookup"><span data-stu-id="33c07-109">Basics of Registering an Application in Azure AD</span></span>](#basics-of-registering-an-application-in-azure-ad)
* [<span data-ttu-id="33c07-110">응용 프로그램 종류 및 시나리오</span><span class="sxs-lookup"><span data-stu-id="33c07-110">Application Types and Scenarios</span></span>](#application-types-and-scenarios)
  
  * [<span data-ttu-id="33c07-111">웹 브라우저 tooWeb 응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="33c07-111">Web Browser tooWeb Application</span></span>](#web-browser-to-web-application)
  * [<span data-ttu-id="33c07-112">SPA(단일 페이지 응용 프로그램)</span><span class="sxs-lookup"><span data-stu-id="33c07-112">Single Page Application (SPA)</span></span>](#single-page-application-spa)
  * [<span data-ttu-id="33c07-113">네이티브 응용 프로그램 tooWeb API</span><span class="sxs-lookup"><span data-stu-id="33c07-113">Native Application tooWeb API</span></span>](#native-application-to-web-api)
  * [<span data-ttu-id="33c07-114">웹 응용 프로그램 tooWeb API</span><span class="sxs-lookup"><span data-stu-id="33c07-114">Web Application tooWeb API</span></span>](#web-application-to-web-api)
  * [<span data-ttu-id="33c07-115">디먼 또는 서버 응용 프로그램 tooWeb API</span><span class="sxs-lookup"><span data-stu-id="33c07-115">Daemon or Server Application tooWeb API</span></span>](#daemon-or-server-application-to-web-api)

## <a name="basics-of-authentication-in-azure-ad"></a><span data-ttu-id="33c07-116">Azure AD 인증의 기본 사항</span><span class="sxs-lookup"><span data-stu-id="33c07-116">Basics of Authentication in Azure AD</span></span>
<span data-ttu-id="33c07-117">Azure AD 인증의 기본 개념을 잘 모른다면 이 섹션을 읽어 보세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-117">If you are unfamiliar with basic concepts of authentication in Azure AD, read this section.</span></span> <span data-ttu-id="33c07-118">그렇지 않으면 할 수 있습니다 tooskip 아래로 너무[응용 프로그램 유형과 시나리오](#application-types-and-scenarios)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-118">Otherwise, you may want tooskip down too[Application Types and Scenarios](#application-types-and-scenarios).</span></span>

<span data-ttu-id="33c07-119">Id가 필요한 hello 가장 기본적인 시나리오를 생각해 봅시다: tooauthenticate tooa 웹 응용 프로그램에는 사용자 웹 브라우저에 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-119">Let’s consider hello most basic scenario where identity is required: a user in a web browser needs tooauthenticate tooa web application.</span></span> <span data-ttu-id="33c07-120">이 시나리오는 hello에 더 자세히 설명 [tooWeb 웹 브라우저 응용 프로그램](#web-browser-to-web-application) 는 유용한 구역의 하지만 hello Azure AD의 기능 및 hello 시나리오의 작동 방식을 개념화 지점 tooillustrate를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-120">This scenario is described in greater detail in hello [Web Browser tooWeb Application](#web-browser-to-web-application) section, but it’s a useful starting point tooillustrate hello capabilities of Azure AD and conceptualize how hello scenario works.</span></span> <span data-ttu-id="33c07-121">이 시나리오에 대 한 다이어그램을 다음 hello를 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-121">Consider hello following diagram for this scenario:</span></span>

![로그온 tooweb 응용 프로그램의 개요](./media/active-directory-authentication-scenarios/basics_of_auth_in_aad.png)

<span data-ttu-id="33c07-123">위의 다이어그램에 주의 hello,으로 다음은 필요한 다양 한 구성 요소에 대 한 tooknow:</span><span class="sxs-lookup"><span data-stu-id="33c07-123">With hello diagram above in mind, here’s what you need tooknow about its various components:</span></span>

* <span data-ttu-id="33c07-124">Azure AD는 hello id 공급자를 사용자와 조직의 디렉터리에 존재 하는 응용 프로그램의 hello id를 확인 하 고 궁극적으로 해당 사용자와 응용 프로그램의 인증 성공 시 보안 토큰을 발행 하는 일을 담당 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-124">Azure AD is hello identity provider, responsible for verifying hello identity of users and applications that exist in an organization’s directory, and ultimately issuing security tokens upon successful authentication of those users and applications.</span></span>
* <span data-ttu-id="33c07-125">Toooutsource 인증 tooAzure AD가 응용 프로그램을 등록 하 고 고유 하 게 식별 hello 앱 hello 디렉터리에 Azure AD에 등록 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-125">An application that wants toooutsource authentication tooAzure AD must be registered in Azure AD, which registers and uniquely identifies hello app in hello directory.</span></span>
* <span data-ttu-id="33c07-126">개발자가 인증을 사용할 수 hello 오픈 소스 Azure AD 인증 라이브러리 toomake 쉽게 hello 프로토콜 세부 정보를 처리 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-126">Developers can use hello open source Azure AD authentication libraries toomake authentication easy by handling hello protocol details for you.</span></span> <span data-ttu-id="33c07-127">자세한 내용은 [Azure Active Directory 인증 라이브러리](active-directory-authentication-libraries.md) 를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-127">See [Azure Active Directory Authentication Libraries](active-directory-authentication-libraries.md) for more information.</span></span>

<span data-ttu-id="33c07-128">• 사용자가 한 번 인증 되었는지, hello 응용 프로그램 보안 토큰 tooensure hello 사용자의 유효성을 검사 해야 hello 의도 파티에 대 한 인증에 성공 했습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-128">• Once a user has been authenticated, hello application must validate hello user’s security token tooensure that authentication was successful for hello intended parties.</span></span> <span data-ttu-id="33c07-129">개발자는 JSON 웹 토큰 (JWT) 또는 SAML 2.0을 포함 하 여 Azure AD에서 모든 토큰의 인증 라이브러리 toohandle 유효성 검사를 제공 하는 hello를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-129">Developers can use hello provided authentication libraries toohandle validation of any token from Azure AD, including JSON Web Tokens (JWT) or SAML 2.0.</span></span> <span data-ttu-id="33c07-130">수동으로 tooperform 유효성 검사를 하려는 경우 참조 hello [JWT 토큰 처리기](https://msdn.microsoft.com/library/dn205065.aspx) 설명서입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-130">If you want tooperform validation manually, see hello [JWT Token Handler](https://msdn.microsoft.com/library/dn205065.aspx) documentation.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="33c07-131">Azure AD는 공개 키 암호화 toosign 토큰을 사용 하 고 유효한 지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-131">Azure AD uses public key cryptography toosign tokens and verify that they are valid.</span></span> <span data-ttu-id="33c07-132">참조 [중요 한 정보에 대 한 서명 키 롤오버 Azure AD에서](active-directory-signing-key-rollover.md) 대 한 자세한 내용은 hello 필수 논리가 응용 프로그램 tooensure의 hello 최신 키를 가진 업데이트 항상 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-132">See [Important Information About Signing Key Rollover in Azure AD](active-directory-signing-key-rollover.md) for more information on hello necessary logic you must have in your application tooensure it’s always updated with hello latest keys.</span></span>
> 
> 

<span data-ttu-id="33c07-133">• hello 요청 흐름과 hello 인증 프로세스에 대 한 응답은 OAuth 2.0, OpenID Connect 등 사용 된 hello 인증 프로토콜에 의해 결정 됩니다 Ws-federation 또는 SAML 2.0.</span><span class="sxs-lookup"><span data-stu-id="33c07-133">• hello flow of requests and responses for hello authentication process is determined by hello authentication protocol that was used, such as OAuth 2.0, OpenID Connect, WS-Federation, or SAML 2.0.</span></span> <span data-ttu-id="33c07-134">이러한 프로토콜이 hello에 보다 자세히 설명 되어 [Azure Active Directory 인증 프로토콜](active-directory-authentication-protocols.md) 항목 및 아래 hello 섹션.</span><span class="sxs-lookup"><span data-stu-id="33c07-134">These protocols are discussed in more detail in hello [Azure Active Directory Authentication Protocols](active-directory-authentication-protocols.md) topic and in hello sections below.</span></span>

> [!NOTE]
> <span data-ttu-id="33c07-135">Azure AD에서는 OAuth 2.0 hello 지원 및 Jwt로 대표 되는 전달자 토큰을 포함 하 여 전달자 토큰을 광범위 하 게 하는 OpenID Connect 표준을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-135">Azure AD supports hello OAuth 2.0 and OpenID Connect standards that make extensive use of bearer tokens, including bearer tokens represented as JWTs.</span></span> <span data-ttu-id="33c07-136">전달자 토큰은 보호 된 리소스를 부여 "전달자" 액세스 tooa hello 하는 경량 보안 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-136">A bearer token is a lightweight security token that grants hello “bearer” access tooa protected resource.</span></span> <span data-ttu-id="33c07-137">이 전반에 "bearer" hello hello 토큰을 제공할 수 있는 당사자입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-137">In this sense, hello “bearer” is any party that can present hello token.</span></span> <span data-ttu-id="33c07-138">파티 먼저 Azure AD tooreceive hello bearer 토큰으로 인증 hello 필요한 단계는 전송 및 저장에서 toosecure hello 토큰을 따르지 않은 경우, 있지만 차단 하 고 의도 하지 않은 당사자에서 사용 하는 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-138">Though a party must first authenticate with Azure AD tooreceive hello bearer token, if hello required steps are not taken toosecure hello token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="33c07-139">일부 보안 토큰에는 권한 없는 당사자가 사용하는 것을 방지하는 기본 제공 메커니즘이 있지만, 전달자 토큰에는 이러한 메커니즘이 없으므로 전송 계층 보안(HTTPS)과 같은 보안 채널에서 전달자 토큰을 전송해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-139">While some security tokens have a built-in mechanism for preventing unauthorized parties from using them, bearer tokens do not have this mechanism and must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="33c07-140">전달자 토큰 지우기 hello에 전송 되기 매뉴얼에 hello 중간 공격 악의적인 당사자 tooacquire hello 토큰에서 사용할 수 있습니다 하 고 사용 하 여 무단된 액세스 tooa 보호 된 리소스에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-140">If a bearer token is transmitted in hello clear, a man-in hello middle attack can be used by a malicious party tooacquire hello token and use it for an unauthorized access tooa protected resource.</span></span> <span data-ttu-id="33c07-141">hello 저장 하거나 나중에 사용 하기 위해 전달자 토큰을 캐시 하는 경우 동일한 보안 원칙이 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-141">hello same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="33c07-142">항상 응용 프로그램이 안전한 방식으로 전달자 토큰을 전송하고 저장하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-142">Always ensure that your application transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="33c07-143">전달자 토큰의 보안 고려 사항을 자세히 알아보려면 [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-143">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>
> 
> 

<span data-ttu-id="33c07-144">이제의 toounderstand 아래 hello 섹션을 참조 하는 hello 기본 한 개요 방법을 Azure AD에서 작동 하는 프로 비전을 hello 일반적인 시나리오는 Azure AD를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-144">Now that you have an overview of hello basics, read hello sections below toounderstand how provisioning works in Azure AD and hello common scenarios Azure AD supports.</span></span>

## <a name="claims-in-azure-ad-security-tokens"></a><span data-ttu-id="33c07-145">Azure AD 보안 토큰의 클레임</span><span class="sxs-lookup"><span data-stu-id="33c07-145">Claims in Azure AD Security Tokens</span></span>
<span data-ttu-id="33c07-146">보안 토큰을 Azure AD에서 발급 한 인증 된 hello 주제에 대 한 정보 어설션 또는 클레임을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-146">Security tokens issued by Azure AD contain claims, or assertions of information about hello subject that has been authenticated.</span></span> <span data-ttu-id="33c07-147">이러한 클레임은 다양 한 작업에 대 한 hello 응용 프로그램에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-147">These claims can be used by hello application for various tasks.</span></span> <span data-ttu-id="33c07-148">예를 들어 사용된 toovalidate hello 토큰 이어야, 식별 hello 주체의 디렉터리 테 넌 트, 사용자 정보를 표시, hello 주체의 권한 부여를 결정 하 고 수 등입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-148">For example, they can be used toovalidate hello token, identify hello subject's directory tenant, display user information, determine hello subject's authorization, and so on.</span></span> <span data-ttu-id="33c07-149">지정된 된 보안 토큰에 있는 hello 클레임은 토큰의 hello 형식, 사용 된 자격 증명 tooauthenticate hello 사용자 및 hello 응용 프로그램 구성의 hello 형식에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-149">hello claims present in any given security token are dependent upon hello type of token, hello type of credential used tooauthenticate hello user, and hello application configuration.</span></span> <span data-ttu-id="33c07-150">Azure AD에서 나오는 클레임의 각 유형에 대 한 간략 한 설명은 hello 테이블 아래에 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-150">A brief description of each type of claim emitted by Azure AD is provided in hello table below.</span></span> <span data-ttu-id="33c07-151">자세한 내용은 참조 너무[지원 되는 토큰 및 클레임 유형](active-directory-token-and-claims.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-151">For more information, refer too[Supported Token and Claim Types](active-directory-token-and-claims.md).</span></span>

| <span data-ttu-id="33c07-152">클레임</span><span class="sxs-lookup"><span data-stu-id="33c07-152">Claim</span></span> | <span data-ttu-id="33c07-153">설명</span><span class="sxs-lookup"><span data-stu-id="33c07-153">Description</span></span> |
| --- | --- |
| <span data-ttu-id="33c07-154">응용 프로그램 UI</span><span class="sxs-lookup"><span data-stu-id="33c07-154">Application ID</span></span> |<span data-ttu-id="33c07-155">Hello 토큰을 사용 하는 hello 응용 프로그램을 식별 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-155">Identifies hello application that is using hello token.</span></span> |
| <span data-ttu-id="33c07-156">대상</span><span class="sxs-lookup"><span data-stu-id="33c07-156">Audience</span></span> |<span data-ttu-id="33c07-157">Hello 받는 사람 리소스를 식별에 대 한 hello 토큰을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-157">Identifies hello recipient resource hello token is intended for.</span></span> |
| <span data-ttu-id="33c07-158">응용 프로그램 인증 컨텍스트 클래스 참조</span><span class="sxs-lookup"><span data-stu-id="33c07-158">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="33c07-159">Hello 클라이언트 인증된 (공용 클라이언트 및 기밀 클라이언트)를가 하는 방법을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-159">Indicates how hello client was authenticated (public client vs. confidential client).</span></span> |
| <span data-ttu-id="33c07-160">인증 인스턴트</span><span class="sxs-lookup"><span data-stu-id="33c07-160">Authentication Instant</span></span> |<span data-ttu-id="33c07-161">레코드에는 날짜 및 시간 hello 인증 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-161">Records hello date and time when hello authentication occurred.</span></span> |
| <span data-ttu-id="33c07-162">인증 방법</span><span class="sxs-lookup"><span data-stu-id="33c07-162">Authentication Method</span></span> |<span data-ttu-id="33c07-163">Hello 토큰의 주체 hello 인증 된 방법을 나타냅니다 (암호, 인증서 등).</span><span class="sxs-lookup"><span data-stu-id="33c07-163">Indicates how hello subject of hello token was authenticated (password, certificate, etc.).</span></span> |
| <span data-ttu-id="33c07-164">이름</span><span class="sxs-lookup"><span data-stu-id="33c07-164">First Name</span></span> |<span data-ttu-id="33c07-165">Azure AD의 집합으로 hello 사용자의 지정 된 이름 hello를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-165">Provides hello given name of hello user as set in Azure AD.</span></span> |
| <span data-ttu-id="33c07-166">그룹</span><span class="sxs-lookup"><span data-stu-id="33c07-166">Groups</span></span> |<span data-ttu-id="33c07-167">Hello 사용자가 멤버인 개체 Id의 Azure AD 그룹에 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-167">Contains object Ids of Azure AD groups hello user is a member of.</span></span> |
| <span data-ttu-id="33c07-168">ID 공급자</span><span class="sxs-lookup"><span data-stu-id="33c07-168">Identity Provider</span></span> |<span data-ttu-id="33c07-169">Hello 토큰의 hello 주체를 인증 하는 레코드 hello id 공급자입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-169">Records hello identity provider that authenticated hello subject of hello token.</span></span> |
| <span data-ttu-id="33c07-170">발급 시간</span><span class="sxs-lookup"><span data-stu-id="33c07-170">Issued At</span></span> |<span data-ttu-id="33c07-171">레코드 hello는 hello에 토큰이 발급 된 시간, 자주 토큰 새로 고침에 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-171">Records hello time at which hello token was issued, often used for token freshness.</span></span> |
| <span data-ttu-id="33c07-172">발급자</span><span class="sxs-lookup"><span data-stu-id="33c07-172">Issuer</span></span> |<span data-ttu-id="33c07-173">Hello 내보낸 STS를으로 hello 토큰 hello Azure AD 테 넌 트를 식별 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-173">Identifies hello STS that emitted hello token as well as hello Azure AD tenant.</span></span> |
| <span data-ttu-id="33c07-174">성</span><span class="sxs-lookup"><span data-stu-id="33c07-174">Last Name</span></span> |<span data-ttu-id="33c07-175">설정 hello surname hello 사용자의 Azure AD에서 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-175">Provides hello surname of hello user as set in Azure AD.</span></span> |
| <span data-ttu-id="33c07-176">이름</span><span class="sxs-lookup"><span data-stu-id="33c07-176">Name</span></span> |<span data-ttu-id="33c07-177">Hello 토큰의 hello 주체를 식별 하는 사람이 읽을 수 있는 값을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-177">Provides a human readable value that identifies hello subject of hello token.</span></span> |
| <span data-ttu-id="33c07-178">개체 ID</span><span class="sxs-lookup"><span data-stu-id="33c07-178">Object Id</span></span> |<span data-ttu-id="33c07-179">Azure AD에서 주체의 hello는 변경할 수 없는 고유 식별자를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-179">Contains an immutable, unique identifier of hello subject in Azure AD.</span></span> |
| <span data-ttu-id="33c07-180">역할</span><span class="sxs-lookup"><span data-stu-id="33c07-180">Roles</span></span> |<span data-ttu-id="33c07-181">친숙 한 이름이 포함 된 해당 hello 사용자가 부여한 Azure AD 응용 프로그램 역할입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-181">Contains friendly names of Azure AD Application Roles that hello user has been granted.</span></span> |
| <span data-ttu-id="33c07-182">범위</span><span class="sxs-lookup"><span data-stu-id="33c07-182">Scope</span></span> |<span data-ttu-id="33c07-183">Hello 사용 권한을 부여한 toohello 클라이언트 응용 프로그램을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-183">Indicates hello permissions granted toohello client application.</span></span> |
| <span data-ttu-id="33c07-184">제목</span><span class="sxs-lookup"><span data-stu-id="33c07-184">Subject</span></span> |<span data-ttu-id="33c07-185">토큰 정보를 어설션하는 hello에 대 한 hello 보안 주체를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-185">Indicates hello principal about which hello token asserts information.</span></span> |
| <span data-ttu-id="33c07-186">테넌트 ID</span><span class="sxs-lookup"><span data-stu-id="33c07-186">Tenant Id</span></span> |<span data-ttu-id="33c07-187">Hello 디렉터리 테 넌 트의 hello 토큰을 발급 하는 변경할 수 없는 고유 식별자를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-187">Contains an immutable, unique identifier of hello directory tenant that issued hello token.</span></span> |
| <span data-ttu-id="33c07-188">토큰 수명</span><span class="sxs-lookup"><span data-stu-id="33c07-188">Token Lifetime</span></span> |<span data-ttu-id="33c07-189">Hello 유효한 시간 간격을 토큰을 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-189">Defines hello time interval within which a token is valid.</span></span> |
| <span data-ttu-id="33c07-190">사용자 계정 이름</span><span class="sxs-lookup"><span data-stu-id="33c07-190">User Principal Name</span></span> |<span data-ttu-id="33c07-191">Hello hello 주체의 사용자 계정 이름에 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-191">Contains hello user principal name of hello subject.</span></span> |
| <span data-ttu-id="33c07-192">버전</span><span class="sxs-lookup"><span data-stu-id="33c07-192">Version</span></span> |<span data-ttu-id="33c07-193">Hello 토큰의 hello 버전 번호를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-193">Contains hello version number of hello token.</span></span> |

## <a name="basics-of-registering-an-application-in-azure-ad"></a><span data-ttu-id="33c07-194">Azure AD 응용 프로그램 등록의 기본 사항</span><span class="sxs-lookup"><span data-stu-id="33c07-194">Basics of Registering an Application in Azure AD</span></span>
<span data-ttu-id="33c07-195">모든 아웃소싱하는 응용 프로그램 인증 tooAzure AD 디렉터리에 등록 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-195">Any application that outsources authentication tooAzure AD must be registered in a directory.</span></span> <span data-ttu-id="33c07-196">이 단계에서는 hello URL을 포함 하 여 응용 프로그램에 대 한 Azure AD에 알리는, hello URL toosend 회신 hello URI tooidentify 인증 후 응용 프로그램 등에입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-196">This step involves telling Azure AD about your application, including hello URL where it’s located, hello URL toosend replies after authentication, hello URI tooidentify your application, and more.</span></span> <span data-ttu-id="33c07-197">이러한 정보가 필요한 주된 이유는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-197">This information is required for a few key reasons:</span></span>

* <span data-ttu-id="33c07-198">Azure AD는 로그온 하거나 토큰을 교환할 처리할 때 좌표 toocommunicate hello 응용 프로그램과 함께 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-198">Azure AD needs coordinates toocommunicate with hello application when handling sign-on or exchanging tokens.</span></span> <span data-ttu-id="33c07-199">Hello 다음을 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-199">These include hello following:</span></span>
  
  * <span data-ttu-id="33c07-200">응용 프로그램에 대 한 응용 프로그램 ID URI: hello 식별자입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-200">Application ID URI: hello identifier for an application.</span></span> <span data-ttu-id="33c07-201">이 값에는 응용 프로그램 hello 호출자가 토큰을 인증 tooindicate 하는 동안 AD tooAzure 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-201">This value is sent tooAzure AD during authentication tooindicate which application hello caller wants a token for.</span></span> <span data-ttu-id="33c07-202">또한이 값 hello 응용 프로그램 hello 대상 의도 한 것을 알 수 있도록 hello 토큰에 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-202">Additionally, this value is included in hello token so that hello application knows it was hello intended target.</span></span>
  * <span data-ttu-id="33c07-203">회신 URL 및 리디렉션 URI:, 웹 API 또는 웹 응용 프로그램의 hello 경우 hello 회신 URL은 Azure AD가 인증에 성공 하면 토큰을 포함 하 여 hello 인증 응답을 전송할 hello 위치 toowhich 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-203">Reply URL and Redirect URI: In hello case of a web API or web application, hello Reply URL is hello location toowhich Azure AD will send hello authentication response, including a token if authentication was successful.</span></span> <span data-ttu-id="33c07-204">네이티브 응용 프로그램의 경우 hello hello 리디렉션 URI는 고유 식별자 toowhich Azure AD에서 OAuth 2.0 요청에 hello 사용자-에이전트를 리디렉션할는 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-204">In hello case of a native application, hello Redirect URI is a unique identifier toowhich Azure AD will redirect hello user-agent in an OAuth 2.0 request.</span></span>
  * <span data-ttu-id="33c07-205">응용 프로그램 ID: hello 응용 프로그램 등록 될 때 Azure AD에서 생성 된 응용 프로그램에 대 한 ID를 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-205">Application ID: hello ID for an application, which is generated by Azure AD when hello application is registered.</span></span> <span data-ttu-id="33c07-206">인증 코드나 토큰을 요청할 때 hello 응용 프로그램 ID와 키 tooAzure AD를 인증 하는 동안 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-206">When requesting an authorization code or token, hello Application ID and key are sent tooAzure AD during authentication.</span></span>
  * <span data-ttu-id="33c07-207">AD tooAzure toocall 웹 API에 인증할 때 응용 프로그램 ID와 함께 전송 되는 키: hello 키입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-207">Key: hello key that is sent along with a Application ID when authenticating tooAzure AD toocall a web API.</span></span>
* <span data-ttu-id="33c07-208">Azure AD 요구 tooensure hello 응용 프로그램에 디렉터리 데이터를 다른 응용 프로그램을 조직에 필요한 사용 권한이 tooaccess hello 하 고</span><span class="sxs-lookup"><span data-stu-id="33c07-208">Azure AD needs tooensure hello application has hello required permissions tooaccess your directory data, other applications in your organization, and so on</span></span>

<span data-ttu-id="33c07-209">Azure AD를 사용하여 개발 및 통합할 수 있는 두 가지 범주의 응용 프로그램이 있다는 것을 이해하면 프로비저닝이 더 분명해집니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-209">Provisioning becomes clearer when you understand that there are two categories of applications that can be developed and integrated with Azure AD:</span></span>

* <span data-ttu-id="33c07-210">단일 테넌트 응용 프로그램: 단일 테넌트 응용 프로그램은 단일 조직에서 사용하기 위한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-210">Single tenant application: A single tenant application is intended for use in one organization.</span></span> <span data-ttu-id="33c07-211">일반적으로 엔터프라이즈 개발자가 작성한 LoB(기간 업무) 응용 프로그램이 이에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-211">These are typically line-of-business (LoB) applications written by an enterprise developer.</span></span> <span data-ttu-id="33c07-212">단일 테 넌 트 응용 프로그램만 toobe 한 디렉터리의 사용자가 액세스 하며 결과적으로, 특정 디렉터리에서 사용자를 프로 비전 toobe만 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-212">A single tenant application only needs toobe accessed by users in one directory, and as a result, it only needs toobe provisioned in one directory.</span></span> <span data-ttu-id="33c07-213">이러한 응용 프로그램은 일반적으로 개발자 hello 조직에 등록 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-213">These applications are typically registered by a developer in hello organization.</span></span>
* <span data-ttu-id="33c07-214">다중 테넌트 응용 프로그램: 다중 테넌트 응용 프로그램은 하나의 조직뿐만 아니라 다수의 조직에서 사용하기 위한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-214">Multi-tenant application: A multi-tenant application is intended for use in many organizations, not just one organization.</span></span> <span data-ttu-id="33c07-215">일반적으로 ISV(Independent Software Vendor)가 작성한 SaaS(Software-as-a-Service) 응용 프로그램이 이에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-215">These are typically software-as-a-service (SaaS) applications written by an independent software vendor (ISV).</span></span> <span data-ttu-id="33c07-216">다중 테 넌 트 응용 프로그램은 사용자 또는 관리자 동의 tooregister 필요한 위치에 사용 될, 각 디렉터리에 사용자를 프로 비전 toobe 필요 하 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-216">Multi-tenant applications need toobe provisioned in each directory where they will be used, which requires user or administrator consent tooregister them.</span></span> <span data-ttu-id="33c07-217">응용 프로그램 hello 디렉터리에 등록 되었습니다. 그 액세스 toohello Graph API 또는 다른 웹 API이 동의 프로세스 시작 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-217">This consent process starts when an application has been registered in hello directory and is given access toohello Graph API or perhaps another web API.</span></span> <span data-ttu-id="33c07-218">사용자 또는 다른 조직에서 관리자 toouse hello 응용 프로그램 등록을 hello 응용 프로그램에 필요한 hello 사용 권한을 표시 하는 대화 상자가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-218">When a user or administrator from a different organization signs up toouse hello application, they are presented with a dialog that displays hello permissions hello application requires.</span></span> <span data-ttu-id="33c07-219">hello 사용자 또는 관리자 동의 toohello 응용 프로그램을 응용 프로그램 액세스 toohello hello 수 있도록 데이터를 지정 하 고 마지막으로 레지스터 hello 해당 디렉터리에서 응용 프로그램 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-219">hello user or administrator can then consent toohello application, which gives hello application access toohello stated data, and finally registers hello application in their directory.</span></span> <span data-ttu-id="33c07-220">자세한 내용은 참조 [hello 동의 프레임 워크 개요](active-directory-integrating-applications.md#overview-of-the-consent-framework)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-220">For more information, see [Overview of hello Consent Framework](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span></span>

<span data-ttu-id="33c07-221">단일 테넌트 응용 프로그램 대신 다중 테넌트 응용 프로그램을 개발할 때 고려할 몇 가지 추가 사항이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-221">Some additional considerations arise when developing a multi-tenant application instead of a single tenant application.</span></span> <span data-ttu-id="33c07-222">예를 들어 여러 디렉터리의 응용 프로그램 사용 가능한 toousers를 만들 때는 필요 메커니즘 toodetermine 더에 테 넌 트입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-222">For example, if you are making your application available toousers in multiple directories, you need a mechanism toodetermine which tenant they’re in.</span></span> <span data-ttu-id="33c07-223">단일 테 넌 트 응용 프로그램 하기만 toolook 자체 디렉터리에 사용자가 다중 테 넌 트 응용 프로그램이 Azure AD에서 tooidentify 모든 hello 디렉터리에서 특정 사용자를 필요로 동안 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-223">A single tenant application only needs toolook in its own directory for a user, while a multi-tenant application needs tooidentify a specific user from all hello directories in Azure AD.</span></span> <span data-ttu-id="33c07-224">tooaccomplish이이 작업을 Azure AD는 모든 다중 테 넌 트 응용 프로그램 로그인 요청을 테 넌 트 별 끝점 대신에 지시할 수 있는 공용 인증 끝점을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-224">tooaccomplish this task, Azure AD provides a common authentication endpoint where any multi-tenant application can direct sign-in requests, instead of a tenant-specific endpoint.</span></span> <span data-ttu-id="33c07-225">이 끝점 중인 https://login.microsoftonline.com/common 모든 디렉터리에 대 한 Azure AD 테 넌 트 별 끝점 https://login.microsoftonline.com/contoso.onmicrosoft.com 일 수 있습니다. hello 일반 끝점이 특히 중요 한 tooconsider 때 필요 하므로 hello 필수 논리가 toohandle 여러 테 넌 트에 로그인, 로그 아웃 및 토큰 유효성 검사 하는 동안 응용 프로그램을 개발 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-225">This endpoint is https://login.microsoftonline.com/common for all directories in Azure AD, whereas a tenant-specific endpoint might be https://login.microsoftonline.com/contoso.onmicrosoft.com. hello common endpoint is especially important tooconsider when developing your application because you’ll need hello necessary logic toohandle multiple tenants during sign-in, sign-out, and token validation.</span></span>

<span data-ttu-id="33c07-226">현재 단일 테 넌 트 응용 프로그램을 개발 하는 경우 있지만 toomake 원하는 것 toomany 사용할 수 있는 조직에서는 쉽게 수행할 수 있습니다 변경 toohello 응용 프로그램 및 해당 구성에서 Azure AD toomake 것 수 있는 다중 테 넌입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-226">If you are currently developing a single tenant application but want toomake it available toomany organizations, you can easily make changes toohello application and its configuration in Azure AD toomake it multi-tenant capable.</span></span> <span data-ttu-id="33c07-227">또한 Azure AD에서는 hello 동일한 서명 키의 모든 디렉터리에서 모든 토큰에 대 한 여부를 제공 하는 단일 테 넌 트 또는 다중 테 넌 트 응용 프로그램에 인증 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-227">In addition, Azure AD uses hello same signing key for all tokens in all directories, whether you are providing authentication in a single tenant or multi-tenant application.</span></span>

<span data-ttu-id="33c07-228">이 문서에 나온 각 시나리오에는 해당 프로비저닝 요구 사항을 설명하는 하위 섹션이 나옵니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-228">Each scenario listed in this document includes a sub-section that describes its provisioning requirements.</span></span> <span data-ttu-id="33c07-229">Azure AD에서 응용 프로그램을 프로 비전 하는 방법에 대 한 자세한 내용은 단일 및 다중 테 넌 트 응용 프로그램 간의 차이점을 hello, 참조 및 [Azure Active Directory와 응용 프로그램 통합](active-directory-integrating-applications.md) 자세한 정보에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-229">For more in-depth information about provisioning an application in Azure AD and hello differences between single and multi-tenant applications, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md) for more information.</span></span> <span data-ttu-id="33c07-230">계속 Azure AD에서 toounderstand hello 일반적인 응용 프로그램 시나리오를 진행 하십시오.</span><span class="sxs-lookup"><span data-stu-id="33c07-230">Continue reading toounderstand hello common application scenarios in Azure AD.</span></span>

## <a name="application-types-and-scenarios"></a><span data-ttu-id="33c07-231">응용 프로그램 종류 및 시나리오</span><span class="sxs-lookup"><span data-stu-id="33c07-231">Application Types and Scenarios</span></span>
<span data-ttu-id="33c07-232">각각이 문서에서 설명 하는 hello 시나리오의 다양 한 언어 및 플랫폼을 사용 하 여 개발할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-232">Each of hello scenarios described in this document can be developed using various languages and platforms.</span></span> <span data-ttu-id="33c07-233">모두에서 사용할 수 있는 전체 코드 샘플에서 지원 우리의 [코드 샘플 안내](active-directory-code-samples.md), 또는 hello 해당에서 직접 [샘플 GitHub 리포지토리에](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-233">They are all backed by complete code samples which are available in our [Code Samples guide](active-directory-code-samples.md), or directly from hello corresponding [GitHub sample repositories](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span></span> <span data-ttu-id="33c07-234">또한 응용 프로그램에 종단 간 시나리오의 특정 부분이나 세그먼트가 필요한 경우 대부분 해당 기능을 개별적으로 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-234">In addition, if your application needs a specific piece or segment of an end-to-end scenario, in most cases that functionality can be added independently.</span></span> <span data-ttu-id="33c07-235">예를 들어 web API를 호출 하는 네이티브 응용 프로그램의 경우도 hello 웹 API를 호출 하는 웹 응용 프로그램을 쉽게 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-235">For example, if you have a native application that calls a web API, you can easily add a web application that also calls hello web API.</span></span> <span data-ttu-id="33c07-236">hello 다음 다이어그램에서는 이러한 시나리오 및 응용 프로그램 유형, 방식과 다양 한 구성 요소를 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-236">hello following diagram illustrates these scenarios and application types, and how different components can be added:</span></span>

![응용 프로그램 종류 및 시나리오](./media/active-directory-authentication-scenarios/application_types_and_scenarios.png)

<span data-ttu-id="33c07-238">다음은 Azure AD에서 지 원하는 hello 5 개의 기본 응용 프로그램 시나리오입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-238">These are hello five primary application scenarios supported by Azure AD:</span></span>

* <span data-ttu-id="33c07-239">[웹 브라우저 tooWeb 응용 프로그램](#web-browser-to-web-application): 사용자는 Azure AD로 보호 되는 tooa 웹 응용 프로그램에서 toosign 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-239">[Web Browser tooWeb Application](#web-browser-to-web-application): A user needs toosign in tooa web application that is secured by Azure AD.</span></span>
* <span data-ttu-id="33c07-240">[단일 페이지 응용 프로그램 (SPA)](#single-page-application-spa): 사용자는 Azure AD로 보호 되는 tooa 단일 페이지 응용 프로그램에서 toosign 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-240">[Single Page Application (SPA)](#single-page-application-spa): A user needs toosign in tooa single page application that is secured by Azure AD.</span></span>
* <span data-ttu-id="33c07-241">[네이티브 응용 프로그램 tooWeb API](#native-application-to-web-api): 네이티브 응용 프로그램에서 실행 되는 휴대폰, 태블릿 또는 PC 요구 tooauthenticate 사용자 tooget 리소스 web API에서에서 Azure AD로 보호 되는 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-241">[Native Application tooWeb API](#native-application-to-web-api): A native application that runs on a phone, tablet, or PC needs tooauthenticate a user tooget resources from a web API that is secured by Azure AD.</span></span>
* <span data-ttu-id="33c07-242">[웹 응용 프로그램 tooWeb API](#web-application-to-web-api): 웹 응용 프로그램 웹 Azure AD에서 보호 하는 API에서에서 tooget 리소스가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-242">[Web Application tooWeb API](#web-application-to-web-api): A web application needs tooget resources from a web API secured by Azure AD.</span></span>
* <span data-ttu-id="33c07-243">[디먼 또는 서버 응용 프로그램 tooWeb API](#daemon-or-server-application-to-web-api): 디먼 응용 프로그램 또는 서버 응용 프로그램 웹 사용자 인터페이스 없이 웹 Azure AD에서 보호 하는 API에서에서 tooget 리소스가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-243">[Daemon or Server Application tooWeb API](#daemon-or-server-application-to-web-api): A daemon application or a server application with no web user interface needs tooget resources from a web API secured by Azure AD.</span></span>

### <a name="web-browser-tooweb-application"></a><span data-ttu-id="33c07-244">웹 브라우저 tooWeb 응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="33c07-244">Web Browser tooWeb Application</span></span>
<span data-ttu-id="33c07-245">이 섹션에서는 웹 브라우저 tooa 웹 응용 프로그램의 사용자를 인증 하는 응용 프로그램에 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-245">This section describes an application that authenticates a user in a web browser tooa web application.</span></span> <span data-ttu-id="33c07-246">이 시나리오에서는 웹 응용 프로그램 hello 지시 hello 사용자의 브라우저 toosign tooAzure AD에서에서 해당 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-246">In this scenario, hello web application directs hello user’s browser toosign them in tooAzure AD.</span></span> <span data-ttu-id="33c07-247">Azure AD 보안 토큰에 hello 사용자에 대 한 클레임을 포함 하는 hello 사용자의 브라우저를 통해 로그인 응답을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-247">Azure AD returns a sign-in response through hello user’s browser, which contains claims about hello user in a security token.</span></span> <span data-ttu-id="33c07-248">이 시나리오에서는 로그온 지원 hello Ws-federation, SAML 2.0 및 OpenID Connect 프로토콜을 사용 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-248">This scenario supports sign-on using hello WS-Federation, SAML 2.0, and OpenID Connect protocols.</span></span>

#### <a name="diagram"></a><span data-ttu-id="33c07-249">다이어그램</span><span class="sxs-lookup"><span data-stu-id="33c07-249">Diagram</span></span>
![브라우저 tooweb 응용 프로그램에 대 한 인증 흐름](./media/active-directory-authentication-scenarios/web_browser_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="33c07-251">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="33c07-251">Description of Protocol Flow</span></span>
1. <span data-ttu-id="33c07-252">때 사용자 hello 응용 프로그램 방문에 toosign을 리디렉션됩니다 로그인 요청 toohello 인증 끝점을 통해 Azure AD에서.</span><span class="sxs-lookup"><span data-stu-id="33c07-252">When a user visits hello application and needs toosign in, they are redirected via a sign-in request toohello authentication endpoint in Azure AD.</span></span>
2. <span data-ttu-id="33c07-253">hello 사용자가 hello 로그인 페이지에 로그인 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-253">hello user signs in on hello sign-in page.</span></span>
3. <span data-ttu-id="33c07-254">인증이 성공 하는 경우 Azure AD 인증 토큰을 만들고 hello Azure 포털에에서 구성 된는 로그인 응답 toohello 응용 프로그램의 회신 URL을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-254">If authentication is successful, Azure AD creates an authentication token and returns a sign-in response toohello application’s Reply URL that was configured in hello Azure Portal.</span></span> <span data-ttu-id="33c07-255">프로덕션 응용 프로그램의 경우 이 회신 URL은 HTTPS여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-255">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="33c07-256">토큰을 반환 하는 hello hello 응용 프로그램 toovalidate hello 토큰에서 필요로 하는 hello 사용자와 Azure AD에 대 한 클레임을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-256">hello returned token includes claims about hello user and Azure AD that are required by hello application toovalidate hello token.</span></span>
4. <span data-ttu-id="33c07-257">hello 응용 프로그램 공개 서명 키 및 발급자 정보를 사용할 수 있는 hello 페더레이션 메타 데이터 문서에서 Azure AD에 대 한 사용 하 여 hello 토큰을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-257">hello application validates hello token by using a public signing key and issuer information available at hello federation metadata document for Azure AD.</span></span> <span data-ttu-id="33c07-258">Hello 응용 프로그램에 hello 토큰 유효성을 검사 한 후 Azure AD는 hello 사용자와 새 세션을 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-258">After hello application validates hello token, Azure AD starts a new session with hello user.</span></span> <span data-ttu-id="33c07-259">이 세션 만료 될 때까지 hello 사용자 tooaccess hello 응용 프로그램을 허용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-259">This session allows hello user tooaccess hello application until it expires.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="33c07-260">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="33c07-260">Code Samples</span></span>
<span data-ttu-id="33c07-261">웹 브라우저 tooWeb 응용 프로그램 시나리오에 대 한 hello 코드 샘플을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-261">See hello code samples for Web Browser tooWeb Application scenarios.</span></span> <span data-ttu-id="33c07-262">자주 확인-hello 항상 새로운 샘플이 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-262">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="33c07-263">[웹 브라우저 응용 프로그램 tooWeb](active-directory-code-samples.md#web-browser-to-web-application)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-263">[Web Browser tooWeb Application](active-directory-code-samples.md#web-browser-to-web-application).</span></span>

#### <a name="registering"></a><span data-ttu-id="33c07-264">등록</span><span class="sxs-lookup"><span data-stu-id="33c07-264">Registering</span></span>
* <span data-ttu-id="33c07-265">단일 테 넌 트: 조직에 대 한 응용 프로그램을 작성 하는 경우 등록 해야 회사의 디렉터리에 hello Azure 포털을 사용 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-265">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using hello Azure Portal.</span></span>
* <span data-ttu-id="33c07-266">다중 테 넌 트: 조직 외부 사용자가 사용할 수 있는 응용 프로그램을 작성 하는 경우 것 회사 디렉터리에 등록 해야 하지만 또한 hello 응용 프로그램을 사용할 각 조직의 디렉터리에 등록 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-266">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using hello application.</span></span> <span data-ttu-id="33c07-267">toomake가 디렉터리에서 사용할 수 있는 응용 프로그램을 tooconsent tooyour 응용 프로그램 수 있게 해 주는 고객에 대 한 등록 프로세스를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-267">toomake your application available in their directory, you can include a sign-up process for your customers that enables them tooconsent tooyour application.</span></span> <span data-ttu-id="33c07-268">응용 프로그램에 로그인 할 때 hello 권한 hello 응용 프로그램을 필요한 하 고 다음 옵션 tooconsent hello 보여 주는 대화 상자가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-268">When they sign up for your application, they will be presented with a dialog that shows hello permissions hello application requires, and then hello option tooconsent.</span></span> <span data-ttu-id="33c07-269">Hello 관리자 hello 필요한 사용 권한에 따라 다른 조직의 수 있습니다 toogive 동의 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-269">Depending on hello required permissions, an administrator in hello other organization may be required toogive consent.</span></span> <span data-ttu-id="33c07-270">Hello 사용자 또는 관리자가 동의한 경우 hello 응용 프로그램은 해당 디렉터리에 등록 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-270">When hello user or administrator consents, hello application is registered in their directory.</span></span> <span data-ttu-id="33c07-271">자세한 내용은 [Azure Active Directory와 응용 프로그램 통합](active-directory-integrating-applications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-271">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="33c07-272">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="33c07-272">Token Expiration</span></span>
<span data-ttu-id="33c07-273">Azure AD에서 발급 하는 hello 토큰의 hello 수명이 만료 될 경우 hello 사용자의 세션이 만료 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-273">hello user’s session expires when hello lifetime of hello token issued by Azure AD expires.</span></span> <span data-ttu-id="33c07-274">원한다면 비활성 기간을 기준으로 사용자를 로그아웃시키는 등, 응용 프로그램이 세션 만료 시간을 단축할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-274">Your application can shorten this time period if desired, such as signing out users based on a period of inactivity.</span></span> <span data-ttu-id="33c07-275">Hello 세션이 만료 되 면 hello 사용자의 증명된 toosign 다시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-275">When hello session expires, hello user will be prompted toosign in again.</span></span>

### <a name="single-page-application-spa"></a><span data-ttu-id="33c07-276">SPA(단일 페이지 응용 프로그램)</span><span class="sxs-lookup"><span data-stu-id="33c07-276">Single Page Application (SPA)</span></span>
<span data-ttu-id="33c07-277">이 섹션에서는 Azure AD를 사용 하는 단일 페이지 응용 프로그램에 대 한 인증 설명 고 hello OAuth 2.0 암시적 권한 부여의 웹 API 백 엔드 toosecure 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-277">This section describes authentication for a Single Page Application, that uses Azure AD and hello OAuth 2.0 implicit authorization grant toosecure its web API back end.</span></span> <span data-ttu-id="33c07-278">단일 페이지 응용 프로그램은 일반적으로 서버에서 실행 되는 웹 API 백 엔드로 hello 브라우저에서 실행 되는 JavaScript 프레젠테이션 계층 (프런트 엔드)으로 구성 하 고 구현 hello 응용 프로그램의 비즈니스 논리입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-278">Single Page Applications are typically structured as a JavaScript presentation layer (front end) that runs in hello browser and a Web API back end that runs on a server and implements hello application’s business logic.</span></span> <span data-ttu-id="33c07-279">hello 암시적 권한 부여 및 응용 프로그램 시나리오에 적합 한지 결정 하는 도움말에 대해 자세히 toolearn 참조 [이해 hello OAuth2 암시적 부여 흐름이 Azure Active Directory에서](active-directory-dev-understanding-oauth2-implicit-grant.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-279">toolearn more about hello implicit authorization grant, and help you decide whether it's right for your application scenario, see [Understanding hello OAuth2 implicit grant flow in Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span></span>

<span data-ttu-id="33c07-280">이 시나리오에서는 hello 사용자가 로그인 할 때 JavaScript 프런트 엔드 사용 하 여 hello 됩니다. [Active Directory 인증 라이브러리 (ADAL javascript. JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) hello 암시적 권한 부여 tooobtain ID 토큰 (id_token) Azure AD에서 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-280">In this scenario, when hello user signs in, hello JavaScript front end uses [Active Directory Authentication Library for JavaScript (ADAL.JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) and hello implicit authorization grant tooobtain an ID token (id_token) from Azure AD.</span></span> <span data-ttu-id="33c07-281">hello 토큰이 캐시 되 한 hello 클라이언트 다시 연결 toohello 요청 hello bearer 토큰으로 tooits 웹 API 백 엔드 hello OWIN 미들웨어를 사용 하 여 보호 되는 호출을 수행 하는 경우.</span><span class="sxs-lookup"><span data-stu-id="33c07-281">hello token is cached and hello client attaches it toohello request as hello bearer token when making calls tooits Web API back end, which is secured using hello OWIN middleware.</span></span> 

#### <a name="diagram"></a><span data-ttu-id="33c07-282">다이어그램</span><span class="sxs-lookup"><span data-stu-id="33c07-282">Diagram</span></span>
![단일 페이지 응용 프로그램 다이어그램](./media/active-directory-authentication-scenarios/single_page_app.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="33c07-284">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="33c07-284">Description of Protocol Flow</span></span>
1. <span data-ttu-id="33c07-285">hello 사용자 toohello 웹 응용 프로그램을 탐색합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-285">hello user navigates toohello web application.</span></span>
2. <span data-ttu-id="33c07-286">hello 응용 프로그램 hello JavaScript 프런트 엔드 (프레젠테이션 계층) toohello 브라우저를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-286">hello application returns hello JavaScript front end (presentation layer) toohello browser.</span></span>
3. <span data-ttu-id="33c07-287">hello 사용자를 로그인으로 로그인의 로그인 링크를 클릭 하 여 예를 들어 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-287">hello user initiates sign in, for example by clicking a sign in link.</span></span> <span data-ttu-id="33c07-288">hello 브라우저 GET toohello Azure AD 권한 부여 끝점 toorequest ID 토큰을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-288">hello browser sends a GET toohello Azure AD authorization endpoint toorequest an ID token.</span></span> <span data-ttu-id="33c07-289">이 요청 hello 응용 프로그램 ID와 회신 URL hello 쿼리 매개 변수를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-289">This request includes hello application ID and reply URL in hello query parameters.</span></span>
4. <span data-ttu-id="33c07-290">Azure AD는 hello hello Azure 포털에에서 구성 된 회신 URL을 등록 하는 hello에 대 한 회신 URL을 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-290">Azure AD validates hello Reply URL against hello registered Reply URL that was configured in hello Azure Portal.</span></span>
5. <span data-ttu-id="33c07-291">hello 사용자가 hello 로그인 페이지에 로그인 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-291">hello user signs in on hello sign-in page.</span></span>
6. <span data-ttu-id="33c07-292">인증이 성공 하는 경우 Azure AD ID 토큰을 만들고는 URL 조각 (#) toohello 응용 프로그램의 회신 URL로 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-292">If authentication is successful, Azure AD creates an ID token and returns it as a URL fragment (#) toohello application’s Reply URL.</span></span> <span data-ttu-id="33c07-293">프로덕션 응용 프로그램의 경우 이 회신 URL은 HTTPS여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-293">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="33c07-294">토큰을 반환 하는 hello hello 응용 프로그램 toovalidate hello 토큰에서 필요로 하는 hello 사용자와 Azure AD에 대 한 클레임을 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-294">hello returned token includes claims about hello user and Azure AD that are required by hello application toovalidate hello token.</span></span>
7. <span data-ttu-id="33c07-295">hello hello 브라우저에서 실행 되는 JavaScript 클라이언트 코드가 toohello 응용 프로그램의 웹 API 백 엔드 호출 보안에 대 한 응답 toouse hello에서에서 hello 토큰을 추출 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-295">hello JavaScript client code running in hello browser extracts hello token from hello response toouse in securing calls toohello application’s web API back end.</span></span>
8. <span data-ttu-id="33c07-296">hello 브라우저 호출 hello 응용 프로그램의 웹 API 백 hello 인증 헤더에 액세스 토큰 hello 끝나야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-296">hello browser calls hello application’s web API back end with hello access token in hello authorization header.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="33c07-297">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="33c07-297">Code Samples</span></span>
<span data-ttu-id="33c07-298">단일 페이지 응용 프로그램 (SPA) 시나리오에 대 한 hello 코드 샘플을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-298">See hello code samples for Single Page Application (SPA) scenarios.</span></span> <span data-ttu-id="33c07-299">있는지 toocheck 다시를 자주-수 새로운 샘플이 추가 모든 hello 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-299">Be sure toocheck back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="33c07-300">[SPA(단일 페이지 응용 프로그램)](active-directory-code-samples.md#single-page-application-spa).</span><span class="sxs-lookup"><span data-stu-id="33c07-300">[Single Page Application (SPA)](active-directory-code-samples.md#single-page-application-spa).</span></span>

#### <a name="registering"></a><span data-ttu-id="33c07-301">등록</span><span class="sxs-lookup"><span data-stu-id="33c07-301">Registering</span></span>
* <span data-ttu-id="33c07-302">단일 테 넌 트: 조직에 대 한 응용 프로그램을 작성 하는 경우 등록 해야 회사의 디렉터리에 hello Azure 포털을 사용 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-302">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using hello Azure Portal.</span></span>
* <span data-ttu-id="33c07-303">다중 테 넌 트: 조직 외부 사용자가 사용할 수 있는 응용 프로그램을 작성 하는 경우 것 회사 디렉터리에 등록 해야 하지만 또한 hello 응용 프로그램을 사용할 각 조직의 디렉터리에 등록 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-303">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using hello application.</span></span> <span data-ttu-id="33c07-304">toomake가 디렉터리에서 사용할 수 있는 응용 프로그램을 tooconsent tooyour 응용 프로그램 수 있게 해 주는 고객에 대 한 등록 프로세스를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-304">toomake your application available in their directory, you can include a sign-up process for your customers that enables them tooconsent tooyour application.</span></span> <span data-ttu-id="33c07-305">응용 프로그램에 로그인 할 때 hello 권한 hello 응용 프로그램을 필요한 하 고 다음 옵션 tooconsent hello 보여 주는 대화 상자가 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-305">When they sign up for your application, they will be presented with a dialog that shows hello permissions hello application requires, and then hello option tooconsent.</span></span> <span data-ttu-id="33c07-306">Hello 관리자 hello 필요한 사용 권한에 따라 다른 조직의 수 있습니다 toogive 동의 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-306">Depending on hello required permissions, an administrator in hello other organization may be required toogive consent.</span></span> <span data-ttu-id="33c07-307">Hello 사용자 또는 관리자가 동의한 경우 hello 응용 프로그램은 해당 디렉터리에 등록 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-307">When hello user or administrator consents, hello application is registered in their directory.</span></span> <span data-ttu-id="33c07-308">자세한 내용은 [Azure Active Directory와 응용 프로그램 통합](active-directory-integrating-applications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-308">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

<span data-ttu-id="33c07-309">Hello 응용 프로그램을 등록 한 후 구성 된 toouse OAuth 2.0 Implicit Grant 프로토콜 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-309">After registering hello application, it must be configured toouse OAuth 2.0 Implicit Grant protocol.</span></span> <span data-ttu-id="33c07-310">기본적으로 이 프로토콜은 응용 프로그램에 대해 사용하지 않도록 설정되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-310">By default, this protocol is disabled for applications.</span></span> <span data-ttu-id="33c07-311">응용 프로그램에 대 한 OAuth2 Implicit Grant 프로토콜 tooenable hello hello Azure 포털에서에서 해당 응용 프로그램 매니페스트를 편집 하 고 "oauth2AllowImplicitFlow" 값 tootrue hello를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-311">tooenable hello OAuth2 Implicit Grant protocol for your application, edit its application manifest from hello Azure Portal and set hello “oauth2AllowImplicitFlow” value tootrue.</span></span> <span data-ttu-id="33c07-312">자세한 지침은 [단일 페이지 응용 프로그램에 OAuth 2.0 암시적 허용 사용](active-directory-integrating-applications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-312">For detailed instructions, see [Enabling OAuth 2.0 Implicit Grant for Single Page Applications](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="33c07-313">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="33c07-313">Token Expiration</span></span>
<span data-ttu-id="33c07-314">ADAL.js toomanage 인증을 사용 하 여 Azure AD에는 만료 된 토큰으로 hello 응용 프로그램에서 호출할 수 있는 추가 웹 API 리소스에 대 한 토큰을 가져오는 여러 가지 기능에서 활용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-314">When you use ADAL.js toomanage authentication with Azure AD, you benefit from several features that facilitate refreshing an expired token as well as getting tokens for additional web API resources that may be called by hello application.</span></span> <span data-ttu-id="33c07-315">Hello 사용자 Azure AD에 성공적으로 인증 hello 브라우저와 Azure AD 간의 hello 사용자에 대 한 쿠키로 보호 된 세션이 설정 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-315">When hello user successfully authenticates with Azure AD, a session secured by a cookie is established for hello user between hello browser and Azure AD.</span></span> <span data-ttu-id="33c07-316">것이 중요 한 toonote hello 사용자와 Azure AD 간의 및 not between hello 사용자와 hello 서버에서 실행 되는 hello 웹 응용 프로그램 hello 세션 존재 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-316">It’s important toonote that hello session exists between hello user and Azure AD and not between hello user and hello web application running on hello server.</span></span> <span data-ttu-id="33c07-317">토큰 만료 되 면 ADAL.js toosilently 다른 토큰을 가져올이 세션을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-317">When a token expires, ADAL.js uses this session toosilently obtain another token.</span></span> <span data-ttu-id="33c07-318">숨겨진된 iFrame toosend를 사용 하 여이 작업을 수행 하 고 hello OAuth Implicit Grant 프로토콜을 사용 하 여 hello 요청을 수신 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-318">It does this by using a hidden iFrame toosend and receive hello request using hello OAuth Implicit Grant protocol.</span></span> <span data-ttu-id="33c07-319">ADAL.js 동일한이 메커니즘을 사용할 수 있습니다 toosilently API 리소스 hello 응용 프로그램 호출 이러한 리소스 지원 크로스-원본 자원 공유 (CORS)으로 등록 된를 hello 사용자의 디렉터리에 다른 웹에 대 한 Azure AD에서 액세스 토큰을 가져올 및 동의는 hello 사용자가 로그인 하는 동안 제공 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-319">ADAL.js can also use this same mechanism toosilently obtain access tokens from Azure AD for other web API resources that hello application calls as long as these resources support cross-origin resource sharing (CORS), are registered in hello user’s directory, and any required consent was given by hello user during sign-in.</span></span>

### <a name="native-application-tooweb-api"></a><span data-ttu-id="33c07-320">네이티브 응용 프로그램 tooWeb API</span><span class="sxs-lookup"><span data-stu-id="33c07-320">Native Application tooWeb API</span></span>
<span data-ttu-id="33c07-321">이 섹션에서는 사용자를 대신하여 웹 API를 호출하는 네이티브 응용 프로그램에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-321">This section describes a native application that calls a web API on behalf of a user.</span></span> <span data-ttu-id="33c07-322">이 시나리오는 기반으로 공용 클라이언트 hello OAuth 2.0 인증 코드 권한 유형을 hello의 섹션 4.1에에서 설명 된 대로 [OAuth 2.0 사양](http://tools.ietf.org/html/rfc6749)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-322">This scenario is built on hello OAuth 2.0 authorization code grant type with a public client, as described in section 4.1 of hello [OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="33c07-323">hello 네이티브 응용 프로그램은 hello OAuth 2.0 프로토콜을 사용 하 여 hello 사용자에 대 한 액세스 토큰을 획득 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-323">hello native application obtains an access token for hello user by using hello OAuth 2.0 protocol.</span></span> <span data-ttu-id="33c07-324">이 액세스 토큰 hello 요청 toohello 웹 API에 hello 사용자 권한을 부여 hello 필요한 리소스를 반환 하는 다음 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-324">This access token is then sent in hello request toohello web API, which authorizes hello user and returns hello desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="33c07-325">다이어그램</span><span class="sxs-lookup"><span data-stu-id="33c07-325">Diagram</span></span>
![네이티브 응용 프로그램 tooWeb API 다이어그램](./media/active-directory-authentication-scenarios/native_app_to_web_api.png)

#### <a name="authentication-flow-for-native-application-tooapi"></a><span data-ttu-id="33c07-327">TooAPI 네이티브 응용 프로그램에 대 한 인증 흐름</span><span class="sxs-lookup"><span data-stu-id="33c07-327">Authentication flow for native application tooAPI</span></span>
#### <a name="description-of-protocol-flow"></a><span data-ttu-id="33c07-328">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="33c07-328">Description of Protocol Flow</span></span>
<span data-ttu-id="33c07-329">Hello AD 인증 라이브러리를 사용 하는 경우 대부분의 hello 프로토콜 세부 정보 아래에 설명 된 hello 브라우저 팝업, 토큰 캐싱 및 새로 고침 토큰 처리 등을 처리 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-329">If you are using hello AD Authentication Libraries, most of hello protocol details described below are handled for you, such as hello browser pop-up, token caching, and handling of refresh tokens.</span></span>

1. <span data-ttu-id="33c07-330">Hello 네이티브 응용 프로그램은 브라우저 팝업을 사용 하 여 Azure AD에 요청 toohello 권한 부여 끝점을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-330">Using a browser pop-up, hello native application makes a request toohello authorization endpoint in Azure AD.</span></span> <span data-ttu-id="33c07-331">이 요청 hello Azure 포털 및 hello 웹 API에 대 한 hello 응용 프로그램 ID URI에 표시 된 대로 응용 프로그램 ID hello 및 hello 리디렉션 hello 네이티브 응용 프로그램의 URI 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-331">This request includes hello Application ID and hello redirect URI of hello native application as shown in hello Azure Portal, and hello application ID URI for hello web API.</span></span> <span data-ttu-id="33c07-332">증명된 toosign 다시는 hello 사용자가 아직 로그인 하는 경우</span><span class="sxs-lookup"><span data-stu-id="33c07-332">If hello user hasn’t already signed in, they are prompted toosign in again</span></span>
2. <span data-ttu-id="33c07-333">Azure AD는 hello 사용자를 인증합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-333">Azure AD authenticates hello user.</span></span> <span data-ttu-id="33c07-334">다중 테 넌 트 응용 프로그램 동의 필요한 toouse hello 응용 프로그램을 아직 수행 하지 않은 이러한 경우 hello 사용자가 필요한 tooconsent을 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-334">If it is a multi-tenant application and consent is required toouse hello application, hello user will be required tooconsent if they haven’t already done so.</span></span> <span data-ttu-id="33c07-335">동의한 후 및 인증 성공 시 Azure AD는 인증 코드 응답 백 toohello 클라이언트 응용 프로그램의 리디렉션 URI를 발급 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-335">After granting consent and upon successful authentication, Azure AD issues an authorization code response back toohello client application’s redirect URI.</span></span>
3. <span data-ttu-id="33c07-336">Azure AD는 인증 코드 응답을 다시 발급 하면 toohello 리디렉션 URI, 클라이언트 응용 프로그램 중지 브라우저 상호 작용 및 추출 hello에서에서 인증 코드 응답 hello hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-336">When Azure AD issues an authorization code response back toohello redirect URI, hello client application stops browser interaction and extracts hello authorization code from hello response.</span></span> <span data-ttu-id="33c07-337">이 인증 코드를 사용 하 여 hello 권한 부여 코드를 포함 하는 요청 tooAzure AD의 토큰 끝점을 전송 하는 hello 클라이언트 응용 프로그램, 클라이언트 응용 프로그램 (응용 프로그램 ID 및 리디렉션 URI) hello 고 원하는 리소스 (응용 프로그램 ID hello에 대 한 세부 정보 URI hello 웹 API에 대 한)입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-337">Using this authorization code, hello client application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
4. <span data-ttu-id="33c07-338">hello 권한 부여 코드와 hello 클라이언트 응용 프로그램 및 web API에 대 한 정보는 Azure AD에 의해 유효성이 검사 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-338">hello authorization code and information about hello client application and web API are validated by Azure AD.</span></span> <span data-ttu-id="33c07-339">유효성 검사가 성공하면 Azure AD는 JWT 액세스 토큰과 JWT 새로 고침 토큰 등 두 가지 토큰을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-339">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span> <span data-ttu-id="33c07-340">Azure AD에서 자신의 표시 이름 및 테 넌 트 ID와 같은 hello 사용자에 대 한 기본 정보를 반환 하는 또한</span><span class="sxs-lookup"><span data-stu-id="33c07-340">In addition, Azure AD returns basic information about hello user, such as their display name and tenant ID.</span></span>
5. <span data-ttu-id="33c07-341">HTTPS를 통해 클라이언트 응용 프로그램 hello hello 요청 toohello web API의 hello 권한 부여 헤더에 JWT 액세스 토큰 tooadd hello "Bearer" 라는 지정 JWT 문자열을 반환 하는 hello를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-341">Over HTTPS, hello client application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="33c07-342">hello web API 다음 hello JWT 토큰을 확인 하 고 원하는 리소스를 반환 hello 유효성 검사가 성공 하면 키를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-342">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>
6. <span data-ttu-id="33c07-343">Hello 액세스 토큰이 만료 되 면 hello 클라이언트 응용 프로그램 hello 사용자 필요한 tooauthenticate 다시 나타내는 오류가 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-343">When hello access token expires, hello client application will receive an error that indicates hello user needs tooauthenticate again.</span></span> <span data-ttu-id="33c07-344">Hello 응용 프로그램에 유효한 새로 고침 토큰을 사용 하는 tooacquire 확인 하지 않고 새 액세스 토큰에서 사용자 toosign 안녕 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-344">If hello application has a valid refresh token, it can be used tooacquire a new access token without prompting hello user toosign in again.</span></span> <span data-ttu-id="33c07-345">Hello 새로 고침 토큰이 만료 되 면 hello 진행 되는 toointeractively 다시 한 번 hello 사용자를 인증 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-345">If hello refresh token expires, hello application will need toointeractively authenticate hello user once again.</span></span>

> [!NOTE]
> <span data-ttu-id="33c07-346">새로 고침 토큰 hello Azure AD에서 발급 될 수 있습니다 사용된 tooaccess 여러 리소스가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-346">hello refresh token issued by Azure AD can be used tooaccess multiple resources.</span></span> <span data-ttu-id="33c07-347">예를 들어 권한 toocall 두 웹 Api에 있는 클라이언트 응용 프로그램이 있는 경우 hello 새로 고침 토큰이 사용 되는 tooget 액세스 토큰 toohello 다른 웹 API도 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-347">For example, if you have a client application that has permission toocall two web APIs, hello refresh token can be used tooget an access token toohello other web API as well.</span></span>
> 
> 

#### <a name="code-samples"></a><span data-ttu-id="33c07-348">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="33c07-348">Code Samples</span></span>
<span data-ttu-id="33c07-349">네이티브 응용 프로그램 tooWeb API 시나리오에 대 한 hello 코드 샘플을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-349">See hello code samples for Native Application tooWeb API scenarios.</span></span> <span data-ttu-id="33c07-350">자주 확인-hello 항상 새로운 샘플이 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-350">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="33c07-351">[네이티브 응용 프로그램 tooWeb API](active-directory-code-samples.md#native-application-to-web-api)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-351">[Native Application tooWeb API](active-directory-code-samples.md#native-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="33c07-352">등록</span><span class="sxs-lookup"><span data-stu-id="33c07-352">Registering</span></span>
* <span data-ttu-id="33c07-353">단일 테 넌 트: 네이티브 응용 프로그램 둘 다 hello 및 hello에 hello web API를 등록 해야 Azure AD에서 동일한 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-353">Single Tenant: Both hello native application and hello web API must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="33c07-354">hello web API 구성된 tooexpose tooits 리소스에 사용 되는 toolimit hello 네이티브 응용 프로그램의 액세스는 권한 집합이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-354">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello native application’s access tooits resources.</span></span> <span data-ttu-id="33c07-355">hello 그러면 클라이언트 응용 프로그램 hello Azure 포털의에서 hello "tooOther 응용 프로그램 사용 권한" 드롭다운 메뉴에서 원하는 hello 사용 권한을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-355">hello client application then selects hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span>
* <span data-ttu-id="33c07-356">다중 테 넌 트: 먼저 hello 네이티브 응용 프로그램에만 등록 hello 개발자 또는 게시자의 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-356">Multi-Tenant: First, hello native application only ever registered in hello developer or publisher’s directory.</span></span> <span data-ttu-id="33c07-357">둘째, hello 네이티브 응용 프로그램은 구성 된 tooindicate hello toobe 기능 필요한 사용 권한을 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-357">Second, hello native application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="33c07-358">동의 toohello 응용 프로그램을 사용할 수 있는 tootheir 조직 하므로 하면이 관리자 사용자 또는 관리자 hello 대상 디렉터리에 필요한 사용 권한이 목록은이 대화 상자에서 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-358">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="33c07-359">일부 응용 프로그램 hello 조직의 모든 사용자에 동의할 수 있는 사용자 수준 권한이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-359">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="33c07-360">다른 응용 프로그램에 동의할 수 없습니다 hello 조직에 있는 사용자는 관리자 수준 사용 권한이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-360">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="33c07-361">디렉터리 관리자만이 수준의 권한이 필요한 동의 tooapplications를 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-361">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="33c07-362">Hello 사용자 또는 관리자가 동의한 경우만 hello web API가 디렉터리에 등록 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-362">When hello user or administrator consents, only hello web API is registered in their directory.</span></span> <span data-ttu-id="33c07-363">자세한 내용은 [Azure Active Directory와 응용 프로그램 통합](active-directory-integrating-applications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-363">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="33c07-364">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="33c07-364">Token Expiration</span></span>
<span data-ttu-id="33c07-365">Hello 네이티브 응용 프로그램에서 JWT 액세스 토큰의 권한 부여 코드 tooget를 사용 하는 경우 JWT 새로 고침 토큰도 수신 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-365">When hello native application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="33c07-366">Hello 새로 고침 토큰 사용된 toore 수 hello 액세스 토큰이 만료 되 면-않고도 toosign 다시 hello 사용자를 인증 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-366">When hello access token expires, hello refresh token can be used toore-authenticate hello user without requiring them toosign in again.</span></span> <span data-ttu-id="33c07-367">이 새로 고침 토큰은 사용 되는 tooauthenticate hello 사용자, 발생 하는 새 액세스에서 토큰 및 새로 고침 한 후 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-367">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

### <a name="web-application-tooweb-api"></a><span data-ttu-id="33c07-368">웹 응용 프로그램 tooWeb API</span><span class="sxs-lookup"><span data-stu-id="33c07-368">Web Application tooWeb API</span></span>
<span data-ttu-id="33c07-369">이 섹션에서는 web API 로부터 리소스 tooget 하는 웹 응용 프로그램을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-369">This section describes a web application that needs tooget resources from a web API.</span></span> <span data-ttu-id="33c07-370">이 시나리오에는 웹 응용 프로그램 hello 하는 두 개의 id 유형을 수 tooauthenticate를 사용 하 여 있고 hello web API를 호출할: 응용 프로그램 id 또는 위임 된 사용자 id입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-370">In this scenario, there are two identity types that hello web application can use tooauthenticate and call hello web API: an application identity, or a delegated user identity.</span></span>

<span data-ttu-id="33c07-371">*응용 프로그램 id:* OAuth 2.0 클라이언트 자격 증명 hello 응용 프로그램 및 액세스 hello tooauthenticate 부여이 시나리오에서는 웹 API입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-371">*Application identity:* This scenario uses OAuth 2.0 client credentials grant tooauthenticate as hello application and access hello web API.</span></span> <span data-ttu-id="33c07-372">응용 프로그램 id를 hello 웹 API는 hello 웹 응용 프로그램 호출 하 고 검색할 수 있습니다를 사용 하는 경우 hello로 web API 받지 않습니다 hello 사용자에 대 한 정보.</span><span class="sxs-lookup"><span data-stu-id="33c07-372">When using an application identity, hello web API can only detect that hello web application is calling it, as hello web API does not receive any information about hello user.</span></span> <span data-ttu-id="33c07-373">Hello 응용 프로그램 hello 사용자에 대 한 정보를 받으면 hello 응용 프로그램 프로토콜을 통해 보내집니다 및 Azure AD에서 서명 되지 않은 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-373">If hello application receives information about hello user, it will be sent via hello application protocol, and it is not signed by Azure AD.</span></span> <span data-ttu-id="33c07-374">hello web API hello 웹 응용 프로그램 hello 사용자를 인증 신뢰 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-374">hello web API trusts that hello web application authenticated hello user.</span></span> <span data-ttu-id="33c07-375">이런 이유로, 이 패턴을 신뢰할 수 있는 하위 시스템이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-375">For this reason, this pattern is called a trusted subsystem.</span></span>

<span data-ttu-id="33c07-376">*위임된 사용자 ID:* 기밀 클라이언트에서 OpenID Connect 및 OAuth 2.0 인증 코드 권한 등 두 가지 방법으로 시나리오를 완수할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-376">*Delegated user identity:* This scenario can be accomplished in two ways: OpenID Connect, and OAuth 2.0 authorization code grant with a confidential client.</span></span> <span data-ttu-id="33c07-377">hello 웹 응용 프로그램 사용자 hello toohello web API 해당 hello 사용자 성공적으로 인증 toohello 웹 응용 프로그램의 변수를 증명 하 고 hello 웹 응용 프로그램을 수 tooobtain 위임 된 사용자 identity toocall hello web API에 대 한 액세스 토큰을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-377">hello web application obtains an access token for hello user, which proves toohello web API that hello user successfully authenticated toohello web application and that hello web application was able tooobtain a delegated user identity toocall hello web API.</span></span> <span data-ttu-id="33c07-378">이 액세스 토큰 hello 요청 toohello web API에는 hello 사용자 권한을 부여 하 고 원하는 hello 리소스 반환에 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-378">This access token is sent in hello request toohello web API, which authorizes hello user and returns hello desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="33c07-379">다이어그램</span><span class="sxs-lookup"><span data-stu-id="33c07-379">Diagram</span></span>
![웹 응용 프로그램 API tooWeb 다이어그램](./media/active-directory-authentication-scenarios/web_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="33c07-381">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="33c07-381">Description of Protocol Flow</span></span>
<span data-ttu-id="33c07-382">둘 다 hello 응용 프로그램 id와 위임 된 사용자 id 유형을 hello 흐름 아래에서 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-382">Both hello application identity and delegated user identity types are discussed in hello flow below.</span></span> <span data-ttu-id="33c07-383">hello 둘 간의 주요 차이점은 hello 위임 된 사용자 id hello 사용자 로그인 하 고 수 전에 얻을 toohello 웹 API 액세스 권한 부여 코드 획득 먼저 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-383">hello key difference between them is that hello delegated user identity must first acquire an authorization code before hello user can sign-in and gain access toohello web API.</span></span>

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="33c07-384">OAuth 2.0 클라이언트 자격 증명 권한을 사용한 응용 프로그램 ID</span><span class="sxs-lookup"><span data-stu-id="33c07-384">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="33c07-385">Hello 웹 응용 프로그램에서 tooAzure AD 사용자가 로그인 (hello 참조 [tooWeb 웹 브라우저 응용 프로그램](#web-browser-to-web-application) 위에).</span><span class="sxs-lookup"><span data-stu-id="33c07-385">A user is signed in tooAzure AD in hello web application (see hello [Web Browser tooWeb Application](#web-browser-to-web-application) above).</span></span>
2. <span data-ttu-id="33c07-386">hello 웹 응용 프로그램 toohello 웹 API를 인증 하 고 원하는 hello 리소스를 검색할 수 있도록 tooacquire 액세스 토큰이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-386">hello web application needs tooacquire an access token so that it can authenticate toohello web API and retrieve hello desired resource.</span></span> <span data-ttu-id="33c07-387">Hello 자격 증명, 응용 프로그램 ID 및 web API의 응용 프로그램 ID URI를 제공 하는 요청 tooAzure AD의 토큰 끝점을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-387">It makes a request tooAzure AD’s token endpoint, providing hello credential, Application ID, and web API’s application ID URI.</span></span>
3. <span data-ttu-id="33c07-388">Azure AD hello 응용 프로그램을 인증 하 고는 사용 되는 toocall hello 웹 API JWT 액세스 토큰을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-388">Azure AD authenticates hello application and returns a JWT access token that is used toocall hello web API.</span></span>
4. <span data-ttu-id="33c07-389">HTTPS를 통해 웹 응용 프로그램 hello hello 요청 toohello web API의 hello 권한 부여 헤더에 JWT 액세스 토큰 tooadd hello "Bearer" 라는 지정 JWT 문자열을 반환 하는 hello를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-389">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="33c07-390">hello web API 다음 hello JWT 토큰을 확인 하 고 원하는 리소스를 반환 hello 유효성 검사가 성공 하면 키를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-390">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-openid-connect"></a><span data-ttu-id="33c07-391">OpenID Connect를 사용한 위임된 사용자 ID</span><span class="sxs-lookup"><span data-stu-id="33c07-391">Delegated User Identity with OpenID Connect</span></span>
1. <span data-ttu-id="33c07-392">사용자가 Azure AD를 사용 하 여 tooa 웹 응용 프로그램에 로그인 (hello 참조 [tooWeb 웹 브라우저 응용 프로그램](#web-browser-to-web-application) 위의 섹션).</span><span class="sxs-lookup"><span data-stu-id="33c07-392">A user is signed in tooa web application using Azure AD (see hello [Web Browser tooWeb Application](#web-browser-to-web-application) section above).</span></span> <span data-ttu-id="33c07-393">Hello 웹 응용 프로그램의 hello 사용자가 하지 아직 동의한 tooallowing hello 웹 응용 프로그램 toocall hello 웹 API를 대신 하는 경우 hello 사용자 tooconsent이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-393">If hello user of hello web application has not yet consented tooallowing hello web application toocall hello web API on its behalf, hello user will need tooconsent.</span></span> <span data-ttu-id="33c07-394">hello 응용 프로그램, 필요한 hello 사용 권한을 나타내고 hello 디렉터리의 일반 사용자 수 tooconsent 관리자 수준 사용 권한이 이러한 경우 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-394">hello application will display hello permissions it requires, and if any of these are administrator-level permissions, a normal user in hello directory will not be able tooconsent.</span></span> <span data-ttu-id="33c07-395">이 동의 프로세스 hello 응용 프로그램에는 hello 필요한 권한을 이미 있을 것 처럼 toomulti 테 넌 트 응용 프로그램을 하지 단일 테 넌 트 응용 프로그램에만 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-395">This consent process only applies toomulti-tenant applications, not single tenant applications, as hello application will already have hello necessary permissions.</span></span> <span data-ttu-id="33c07-396">Hello 사용자가 로그인 할 때, hello 웹 응용 프로그램 hello 사용자 인증 코드에 대 한 정보와 함께 ID 토큰을 받았습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-396">When hello user signed in, hello web application received an ID token with information about hello user, as well as an authorization code.</span></span>
2. <span data-ttu-id="33c07-397">Hello 웹 응용 프로그램이 보내는 hello 권한 부여 코드를 포함 하는 요청 tooAzure AD의 토큰 끝점, hello 클라이언트 응용 프로그램 (응용 프로그램 ID 및 리디렉션 URI) 및 hello에 대 한 세부 정보 원하는 리소스 (Azure AD에서 발급 하는 hello 인증 코드를 사용 하 여 응용 프로그램 ID URI hello 웹 API에 대 한).</span><span class="sxs-lookup"><span data-stu-id="33c07-397">Using hello authorization code issued by Azure AD, hello web application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
3. <span data-ttu-id="33c07-398">hello 권한 부여 코드와 hello 웹 응용 프로그램 및 web API에 대 한 정보는 Azure AD에 의해 유효성이 검사 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-398">hello authorization code and information about hello web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="33c07-399">유효성 검사가 성공하면 Azure AD는 JWT 액세스 토큰과 JWT 새로 고침 토큰 등 두 가지 토큰을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-399">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
4. <span data-ttu-id="33c07-400">HTTPS를 통해 웹 응용 프로그램 hello hello 요청 toohello web API의 hello 권한 부여 헤더에 JWT 액세스 토큰 tooadd hello "Bearer" 라는 지정 JWT 문자열을 반환 하는 hello를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-400">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="33c07-401">hello web API 다음 hello JWT 토큰을 확인 하 고 원하는 리소스를 반환 hello 유효성 검사가 성공 하면 키를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-401">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-authorization-code-grant"></a><span data-ttu-id="33c07-402">OAuth 2.0 인증 코드 권한을 사용한 위임된 사용자 ID</span><span class="sxs-lookup"><span data-stu-id="33c07-402">Delegated User Identity with OAuth 2.0 Authorization Code Grant</span></span>
1. <span data-ttu-id="33c07-403">사용자 인증 메커니즘이 Azure AD와 별개인 tooa 웹 응용 프로그램에 이미 로그인 했습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-403">A user is already signed in tooa web application, whose authentication mechanism is independent of Azure AD.</span></span>
2. <span data-ttu-id="33c07-404">hello 웹 응용 프로그램, 인증, hello 응용 프로그램 ID를 제공 하는 hello 브라우저 tooAzure AD의 권한 부여 끝점을 통해 요청을 실행 하므로, 액세스 토큰이 tooacquire 코드 및 필요 후 hello 웹 응용 프로그램에 대 한 리디렉션 URI 성공 인증입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-404">hello web application requires an authorization code tooacquire an access token, so it issues a request through hello browser tooAzure AD’s authorization endpoint, providing hello Application ID and redirect URI for hello web application after successful authentication.</span></span> <span data-ttu-id="33c07-405">hello 사용자 tooAzure AD에에서 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-405">hello user signs in tooAzure AD.</span></span>
3. <span data-ttu-id="33c07-406">Hello 웹 응용 프로그램의 hello 사용자가 하지 아직 동의한 tooallowing hello 웹 응용 프로그램 toocall hello 웹 API를 대신 하는 경우 hello 사용자 tooconsent이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-406">If hello user of hello web application has not yet consented tooallowing hello web application toocall hello web API on its behalf, hello user will need tooconsent.</span></span> <span data-ttu-id="33c07-407">hello 응용 프로그램, 필요한 hello 사용 권한을 나타내고 hello 디렉터리의 일반 사용자 수 tooconsent 관리자 수준 사용 권한이 이러한 경우 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-407">hello application will display hello permissions it requires, and if any of these are administrator-level permissions, a normal user in hello directory will not be able tooconsent.</span></span> <span data-ttu-id="33c07-408">이러한 용도로 tooboth 단일 및 다중 테 넌 트 응용 프로그램을 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-408">This consent applies tooboth single and multi-tenant application.</span></span>  <span data-ttu-id="33c07-409">Hello 단일 테 넌 트의 경우에서 관리자가 사용자 대신 관리자 동의 tooconsent를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-409">In hello single tenant case, an admin can perform admin consent tooconsent on behalf of their users.</span></span>  <span data-ttu-id="33c07-410">이렇게 hello를 사용 하 여 `Grant Permissions` hello 단추 [Azure 포털](https://portal.azure.com)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-410">This can be done using hello `Grant Permissions` button in hello [Azure Portal](https://portal.azure.com).</span></span> 
4. <span data-ttu-id="33c07-411">Hello 사용자가 동의 hello 웹 응용 프로그램 tooacquire 액세스 토큰이 필요 함을 hello 인증 코드를 수신 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-411">After hello user has consented, hello web application receives hello authorization code that it needs tooacquire an access token.</span></span>
5. <span data-ttu-id="33c07-412">Hello 웹 응용 프로그램이 보내는 hello 권한 부여 코드를 포함 하는 요청 tooAzure AD의 토큰 끝점, hello 클라이언트 응용 프로그램 (응용 프로그램 ID 및 리디렉션 URI) 및 hello에 대 한 세부 정보 원하는 리소스 (Azure AD에서 발급 하는 hello 인증 코드를 사용 하 여 응용 프로그램 ID URI hello 웹 API에 대 한).</span><span class="sxs-lookup"><span data-stu-id="33c07-412">Using hello authorization code issued by Azure AD, hello web application sends a request tooAzure AD’s token endpoint that includes hello authorization code, details about hello client application (Application ID and redirect URI), and hello desired resource (application ID URI for hello web API).</span></span>
6. <span data-ttu-id="33c07-413">hello 권한 부여 코드와 hello 웹 응용 프로그램 및 web API에 대 한 정보는 Azure AD에 의해 유효성이 검사 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-413">hello authorization code and information about hello web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="33c07-414">유효성 검사가 성공하면 Azure AD는 JWT 액세스 토큰과 JWT 새로 고침 토큰 등 두 가지 토큰을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-414">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
7. <span data-ttu-id="33c07-415">HTTPS를 통해 웹 응용 프로그램 hello hello 요청 toohello web API의 hello 권한 부여 헤더에 JWT 액세스 토큰 tooadd hello "Bearer" 라는 지정 JWT 문자열을 반환 하는 hello를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-415">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="33c07-416">hello web API 다음 hello JWT 토큰을 확인 하 고 원하는 리소스를 반환 hello 유효성 검사가 성공 하면 키를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-416">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="33c07-417">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="33c07-417">Code Samples</span></span>
<span data-ttu-id="33c07-418">웹 응용 프로그램 tooWeb API 시나리오에 대 한 hello 코드 샘플을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-418">See hello code samples for Web Application tooWeb API scenarios.</span></span> <span data-ttu-id="33c07-419">자주 확인-hello 항상 새로운 샘플이 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-419">And, check back frequently -- we add new samples all hello time.</span></span> <span data-ttu-id="33c07-420">웹 [응용 프로그램 tooWeb API](active-directory-code-samples.md#web-application-to-web-api)합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-420">Web [Application tooWeb API](active-directory-code-samples.md#web-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="33c07-421">등록</span><span class="sxs-lookup"><span data-stu-id="33c07-421">Registering</span></span>
* <span data-ttu-id="33c07-422">단일 테 넌 트: hello 응용 프로그램 id와 위임 된 사용자 id의 경우 모두 hello 웹 응용 프로그램 및 hello에 hello web API를 등록 해야 Azure AD에서 동일한 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-422">Single Tenant: For both hello application identity and delegated user identity cases, hello web application and hello web API must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="33c07-423">hello web API 구성된 tooexpose tooits 리소스에 사용 되는 toolimit hello 웹 응용 프로그램의 액세스는 권한 집합이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-423">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello web application’s access tooits resources.</span></span> <span data-ttu-id="33c07-424">위임 된 사용자 id 유형을 사용 중인 경우 hello Azure 포털의에서 hello "tooOther 응용 프로그램 사용 권한" 드롭다운 메뉴에서 원하는 hello 권한을 tooselect hello 웹 응용 프로그램에 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-424">If a delegated user identity type is being used, hello web application needs tooselect hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span> <span data-ttu-id="33c07-425">Hello 응용 프로그램 id 유형을 사용 중인 경우에이 단계가 필요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-425">This step is not required if hello application identity type is being used.</span></span>
* <span data-ttu-id="33c07-426">첫째, 다중 테 넌 트: hello 웹 응용 프로그램 구성 된 tooindicate hello toobe 기능 필요한 사용 권한을 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-426">Multi-Tenant: First, hello web application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="33c07-427">동의 toohello 응용 프로그램을 사용할 수 있는 tootheir 조직 하므로 하면이 관리자 사용자 또는 관리자 hello 대상 디렉터리에 필요한 사용 권한이 목록은이 대화 상자에서 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-427">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="33c07-428">일부 응용 프로그램 hello 조직의 모든 사용자에 동의할 수 있는 사용자 수준 권한이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-428">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="33c07-429">다른 응용 프로그램에 동의할 수 없습니다 hello 조직에 있는 사용자는 관리자 수준 사용 권한이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-429">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="33c07-430">디렉터리 관리자만이 수준의 권한이 필요한 동의 tooapplications를 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-430">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="33c07-431">Hello 사용자 또는 관리자 동의 hello 웹 응용 프로그램 및 hello web API 하는 경우는 모두 해당 디렉터리에 등록 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-431">When hello user or administrator consents, hello web application and hello web API are both registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="33c07-432">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="33c07-432">Token Expiration</span></span>
<span data-ttu-id="33c07-433">해당 권한 부여 코드 tooget JWT 액세스 토큰을 사용 하는 hello 웹 응용 프로그램 경우 JWT 새로 고침 토큰도 수신 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-433">When hello web application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="33c07-434">Hello 새로 고침 토큰 사용된 toore 수 hello 액세스 토큰이 만료 되 면-않고도 toosign 다시 hello 사용자를 인증 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-434">When hello access token expires, hello refresh token can be used toore-authenticate hello user without requiring them toosign in again.</span></span> <span data-ttu-id="33c07-435">이 새로 고침 토큰은 사용 되는 tooauthenticate hello 사용자, 발생 하는 새 액세스에서 토큰 및 새로 고침 한 후 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-435">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

### <a name="daemon-or-server-application-tooweb-api"></a><span data-ttu-id="33c07-436">디먼 또는 서버 응용 프로그램 tooWeb API</span><span class="sxs-lookup"><span data-stu-id="33c07-436">Daemon or Server Application tooWeb API</span></span>
<span data-ttu-id="33c07-437">이 섹션에서는 web API에서에서 tooget 리소스를 필요로 하는 디먼 또는 서버 응용 프로그램을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-437">This section describes a daemon or server application that needs tooget resources from a web API.</span></span> <span data-ttu-id="33c07-438">두 가지 하위 시나리오 toothis 섹션에 적용 되: toocall OAuth 2.0 클라이언트 자격 증명 권한 유형을; 기반 웹 API를 필요로 하는 디먼으로 한 서버 하는 응용 프로그램 (예: web API) toocall OAuth 2.0 On-Behalf-Of 초안 사양을 기반 웹 API를 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-438">There are two sub-scenarios that apply toothis section: A daemon that needs toocall a web API, built on OAuth 2.0 client credentials grant type; and a server application (such as a web API) that needs toocall a web API, built on OAuth 2.0 On-Behalf-Of draft specification.</span></span>

<span data-ttu-id="33c07-439">Hello 시나리오에 대 한 디먼 응용 프로그램이 웹 API toocall 필요한 경우에 중요 한 toounderstand 몇 가지 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-439">For hello scenario when a daemon application needs toocall a web API, it’s important toounderstand a few things.</span></span> <span data-ttu-id="33c07-440">첫째, 사용자 상호 작용 hello 응용 프로그램 toohave 자체 id를 요구 하는 디먼 응용 프로그램으로 수는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-440">First, user interaction is not possible with a daemon application, which requires hello application toohave its own identity.</span></span> <span data-ttu-id="33c07-441">디먼 응용 프로그램의 예는 일괄 처리 작업 또는 hello 백그라운드에서 실행 되는 운영 체제 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-441">An example of a daemon application is a batch job, or an operating system service running in hello background.</span></span> <span data-ttu-id="33c07-442">이 유형의 응용 프로그램의 응용 프로그램 id를 사용 하 여 해당 응용 프로그램 ID, 자격 증명 (암호 또는 인증서) 및 응용 프로그램 ID URI tooAzure 광고를 제공 함으로써 액세스 토큰을 요청 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-442">This type of application requests an access token by using its application identity and presenting its Application ID, credential (password or certificate), and application ID URI tooAzure AD.</span></span> <span data-ttu-id="33c07-443">인증을 완료 한 후 hello 데몬 사용 되는 toocall hello web API가 Azure AD에서 액세스 토큰을 받습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-443">After successful authentication, hello daemon receives an access token from Azure AD, which is then used toocall hello web API.</span></span>

<span data-ttu-id="33c07-444">Hello 시나리오에 대 한 서버 응용 프로그램 toocall web API에 필요한 경우에 유용한 toouse 예 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-444">For hello scenario when a server application needs toocall a web API, it’s helpful toouse an example.</span></span> <span data-ttu-id="33c07-445">사용자가 인증 하는 네이티브 응용 프로그램에이 네이티브 응용 프로그램이 필요한 웹 API toocall 한다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-445">Imagine that a user has authenticated on a native application, and this native application needs toocall a web API.</span></span> <span data-ttu-id="33c07-446">Azure AD는 JWT 액세스 토큰 toocall hello web API를 발급합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-446">Azure AD issues a JWT access token toocall hello web API.</span></span> <span data-ttu-id="33c07-447">Hello web API는 toocall 다른 다운스트림 web API를 필요한 hello에 대신-흐름 toodelegate hello 사용자 id를 사용 하 여 있고 toohello 두 번째 계층 web API를 인증 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-447">If hello web API needs toocall another downstream web API, it can use hello on-behalf-of flow toodelegate hello user’s identity and authenticate toohello second-tier web API.</span></span>

#### <a name="diagram"></a><span data-ttu-id="33c07-448">다이어그램</span><span class="sxs-lookup"><span data-stu-id="33c07-448">Diagram</span></span>
![디먼 또는 서버 응용 프로그램 API tooWeb 다이어그램](./media/active-directory-authentication-scenarios/daemon_server_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="33c07-450">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="33c07-450">Description of Protocol Flow</span></span>
##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="33c07-451">OAuth 2.0 클라이언트 자격 증명 권한을 사용한 응용 프로그램 ID</span><span class="sxs-lookup"><span data-stu-id="33c07-451">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="33c07-452">첫째, hello 서버 응용 프로그램에 대화형 로그온 대화 상자와 같은 사용자 상호 작용 없이 자체적으로 Azure AD와 tooauthenticate가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-452">First, hello server application needs tooauthenticate with Azure AD as itself, without any human interaction such as an interactive sign-on dialog.</span></span> <span data-ttu-id="33c07-453">Hello 자격 증명, 응용 프로그램 ID 및 응용 프로그램 ID URI를 제공 하는 요청 tooAzure AD의 토큰 끝점을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-453">It makes a request tooAzure AD’s token endpoint, providing hello credential, Application ID, and application ID URI.</span></span>
2. <span data-ttu-id="33c07-454">Azure AD hello 응용 프로그램을 인증 하 고는 사용 되는 toocall hello 웹 API JWT 액세스 토큰을 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-454">Azure AD authenticates hello application and returns a JWT access token that is used toocall hello web API.</span></span>
3. <span data-ttu-id="33c07-455">HTTPS를 통해 웹 응용 프로그램 hello hello 요청 toohello web API의 hello 권한 부여 헤더에 JWT 액세스 토큰 tooadd hello "Bearer" 라는 지정 JWT 문자열을 반환 하는 hello를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-455">Over HTTPS, hello web application uses hello returned JWT access token tooadd hello JWT string with a “Bearer” designation in hello Authorization header of hello request toohello web API.</span></span> <span data-ttu-id="33c07-456">hello web API 다음 hello JWT 토큰을 확인 하 고 원하는 리소스를 반환 hello 유효성 검사가 성공 하면 키를 누릅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-456">hello web API then validates hello JWT token, and if validation is successful, returns hello desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-on-behalf-of-draft-specification"></a><span data-ttu-id="33c07-457">OAuth 2.0 대리 초안 사양을 사용한 위임된 사용자 ID</span><span class="sxs-lookup"><span data-stu-id="33c07-457">Delegated User Identity with OAuth 2.0 On-Behalf-Of Draft Specification</span></span>
<span data-ttu-id="33c07-458">아래에서 설명 하는 hello 흐름 (예: 네이티브 응용 프로그램), 다른 응용 프로그램에는 사용자가 인증 된 사용자 id에 사용 되는 tooacquire 액세스 토큰 toohello 첫 번째 계층 web API 되었습니다 되었다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-458">hello flow discussed below assumes that a user has been authenticated on another application (such as a native application), and their user identity has been used tooacquire an access token toohello first-tier web API.</span></span>

1. <span data-ttu-id="33c07-459">hello 네이티브 응용 프로그램 hello 액세스 토큰 toohello 첫 번째 계층 web을 API를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-459">hello native application sends hello access token toohello first-tier web API.</span></span>
2. <span data-ttu-id="33c07-460">hello 첫 번째 계층 web API hello 사용자의 액세스 토큰 뿐만 아니라 해당 응용 프로그램 ID 및 자격 증명을 제공 하는 요청 tooAzure AD의 토큰 끝점을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-460">hello first-tier web API sends a request tooAzure AD’s token endpoint, providing its Application ID and credentials, as well as hello user’s access token.</span></span> <span data-ttu-id="33c07-461">또한 hello 요청이 함께 보내집니다는 hello를 나타내는 매개 변수 on_behalf_of 웹 API를 새로운 요청 토큰을 hello 원래 사용자 대신 toocall 다운스트림 web API입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-461">In addition, hello request is sent with an on_behalf_of parameter that indicates hello web API is requesting new tokens toocall a downstream web API on behalf of hello original user.</span></span>
3. <span data-ttu-id="33c07-462">Azure AD 확인 하는 hello 첫 번째 계층 web API 사용 권한을 tooaccess hello 두 번째 계층 web API에 hello 요청의 유효성을 검사 JWT 액세스 토큰 및 JWT 새로 고침 토큰 toohello 첫 번째 계층 web API를 반환 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-462">Azure AD verifies that hello first-tier web API has permissions tooaccess hello second-tier web API and validates hello request, returning a JWT access token and a JWT refresh token toohello first-tier web API.</span></span>
4. <span data-ttu-id="33c07-463">HTTPS를 통해 hello 첫 번째 계층 web API 호출 hello 요청에 hello 인증 헤더에 토큰 문자열 hello를 추가 하 여 두 번째 계층 web API를 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-463">Over HTTPS, hello first-tier web API then calls hello second-tier web API by appending hello token string in hello Authorization header in hello request.</span></span> <span data-ttu-id="33c07-464">hello 첫 번째 계층 web API hello 액세스 토큰 및 새로 고침 토큰이 유효한 지으로 toocall hello 두 번째 계층 web API를 계속 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-464">hello first-tier web API can continue toocall hello second-tier web API as long as hello access token and refresh tokens are valid.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="33c07-465">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="33c07-465">Code Samples</span></span>
<span data-ttu-id="33c07-466">디먼 또는 서버 응용 프로그램 API tooWeb 시나리오에 대 한 hello 코드 샘플을 참조 하세요.</span><span class="sxs-lookup"><span data-stu-id="33c07-466">See hello code samples for Daemon or Server Application tooWeb API scenarios.</span></span> <span data-ttu-id="33c07-467">자주 확인-hello 항상 새로운 샘플이 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-467">And, check back frequently -- we add new samples all hello time.</span></span> [<span data-ttu-id="33c07-468">서버 또는 데몬 응용 프로그램 tooWeb API</span><span class="sxs-lookup"><span data-stu-id="33c07-468">Server or Daemon Application tooWeb API</span></span>](active-directory-code-samples.md#server-or-daemon-application-to-web-api)

#### <a name="registering"></a><span data-ttu-id="33c07-469">등록</span><span class="sxs-lookup"><span data-stu-id="33c07-469">Registering</span></span>
* <span data-ttu-id="33c07-470">단일 테 넌 트: hello 응용 프로그램 id와 위임 된 사용자 id의 경우 모두 hello 디먼 또는 서버 응용 프로그램에에서 등록 해야 hello Azure AD에서 동일한 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-470">Single Tenant: For both hello application identity and delegated user identity cases, hello daemon or server application must be registered in hello same directory in Azure AD.</span></span> <span data-ttu-id="33c07-471">hello web API 구성된 tooexpose 사용된 toolimit hello 디먼 또는 서버의 tooits 리소스 액세스 권한 집합이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-471">hello web API can be configured tooexpose a set of permissions, which are used toolimit hello daemon or server’s access tooits resources.</span></span> <span data-ttu-id="33c07-472">위임 된 사용자 id 유형을 사용 중인 경우 hello Azure 포털의에서 hello "tooOther 응용 프로그램 사용 권한" 드롭다운 메뉴에서 원하는 hello 권한을 tooselect hello 서버 응용 프로그램에 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-472">If a delegated user identity type is being used, hello server application needs tooselect hello desired permissions from hello “Permissions tooOther Applications” drop-down menu in hello Azure Portal.</span></span> <span data-ttu-id="33c07-473">Hello 응용 프로그램 id 유형을 사용 중인 경우에이 단계가 필요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-473">This step is not required if hello application identity type is being used.</span></span>
* <span data-ttu-id="33c07-474">첫째, 다중 테 넌 트: hello 디먼 또는 서버 응용 프로그램 구성 된 tooindicate hello toobe 기능 필요한 사용 권한을 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-474">Multi-Tenant: First, hello daemon or server application is configured tooindicate hello permissions it requires toobe functional.</span></span> <span data-ttu-id="33c07-475">동의 toohello 응용 프로그램을 사용할 수 있는 tootheir 조직 하므로 하면이 관리자 사용자 또는 관리자 hello 대상 디렉터리에 필요한 사용 권한이 목록은이 대화 상자에서 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-475">This list of required permissions is shown in a dialog when a user or administrator in hello destination directory gives consent toohello application, which makes it available tootheir organization.</span></span> <span data-ttu-id="33c07-476">일부 응용 프로그램 hello 조직의 모든 사용자에 동의할 수 있는 사용자 수준 권한이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-476">Some applications require just user-level permissions, which any user in hello organization can consent to.</span></span> <span data-ttu-id="33c07-477">다른 응용 프로그램에 동의할 수 없습니다 hello 조직에 있는 사용자는 관리자 수준 사용 권한이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-477">Other applications require administrator-level permissions, which a user in hello organization cannot consent to.</span></span> <span data-ttu-id="33c07-478">디렉터리 관리자만이 수준의 권한이 필요한 동의 tooapplications를 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-478">Only a directory administrator can give consent tooapplications that require this level of permissions.</span></span> <span data-ttu-id="33c07-479">Hello 사용자 또는 관리자가 동의한 경우 모두 hello 웹 Api는 해당 디렉터리에 등록 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-479">When hello user or administrator consents, both of hello web APIs are registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="33c07-480">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="33c07-480">Token Expiration</span></span>
<span data-ttu-id="33c07-481">해당 권한 부여 코드 tooget JWT 액세스 토큰을 사용 하는 hello 첫 번째 응용 프로그램 경우 JWT 새로 고침 토큰도 수신 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-481">When hello first application uses its authorization code tooget a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="33c07-482">Hello 새로 고침 토큰 사용된 toore 수 hello 액세스 토큰이 만료 되 면-자격 증명을 확인 하지 않고 hello 사용자를 인증 합니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-482">When hello access token expires, hello refresh token can be used toore-authenticate hello user without prompting for credentials.</span></span> <span data-ttu-id="33c07-483">이 새로 고침 토큰은 사용 되는 tooauthenticate hello 사용자, 발생 하는 새 액세스에서 토큰 및 새로 고침 한 후 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="33c07-483">This refresh token is then used tooauthenticate hello user, which results in a new access token and refresh token.</span></span>

## <a name="see-also"></a><span data-ttu-id="33c07-484">참고 항목</span><span class="sxs-lookup"><span data-stu-id="33c07-484">See Also</span></span>
[<span data-ttu-id="33c07-485">Azure Active Directory 개발자 가이드</span><span class="sxs-lookup"><span data-stu-id="33c07-485">Azure Active Directory Developer's Guide</span></span>](active-directory-developers-guide.md)

[<span data-ttu-id="33c07-486">Azure Active Directory 코드 샘플</span><span class="sxs-lookup"><span data-stu-id="33c07-486">Azure Active Directory Code Samples</span></span>](active-directory-code-samples.md)

[<span data-ttu-id="33c07-487">Azure AD의 서명 키 롤오버에 대한 중요한 정보</span><span class="sxs-lookup"><span data-stu-id="33c07-487">Important Information About Signing Key Rollover in Azure AD</span></span>](active-directory-signing-key-rollover.md)

[<span data-ttu-id="33c07-488">Azure AD의 OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="33c07-488">OAuth 2.0 in Azure AD</span></span>](https://msdn.microsoft.com/library/azure/dn645545.aspx)

