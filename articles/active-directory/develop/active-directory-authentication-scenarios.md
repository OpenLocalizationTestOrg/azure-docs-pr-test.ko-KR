---
title: "Azure AD의 인증 시나리오 | Microsoft Docs"
description: "AAD(Azure Active Directory)에 대한 5개의 가장 일반적인 인증 시나리오 개요"
services: active-directory
documentationcenter: dev-center-name
author: skwan
manager: mbaldwin
editor: 
ms.assetid: 0c84e7d0-16aa-4897-82f2-f53c6c990fd9
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 04/27/2017
ms.author: skwan
ms.custom: aaddev
ms.openlocfilehash: 2f9410bdaa037f1839cf7c12c3532b51be669ed5
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/18/2017
---
# <a name="authentication-scenarios-for-azure-ad"></a><span data-ttu-id="5a79a-103">Azure AD의 인증 시나리오</span><span class="sxs-lookup"><span data-stu-id="5a79a-103">Authentication Scenarios for Azure AD</span></span>
<span data-ttu-id="5a79a-104">Azure AD(Azure Active Directory)는 Identity-as-a-service를 제공하며 OAuth 2.0 및 OpenID Connect 등의 업계 표준 프로토콜뿐만 아니라 신속하게 코딩을 시작하는 데 유용한 여러 플랫폼용 오픈 소스 라이브러리를 지원하여 개발자의 인증 작업을 간소화합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-104">Azure Active Directory (Azure AD) simplifies authentication for developers by providing identity as a service, with support for industry-standard protocols such as OAuth 2.0 and OpenID Connect, as well as open source libraries for different platforms to help you start coding quickly.</span></span> <span data-ttu-id="5a79a-105">이 문서는 Azure AD가 지원하는 다양한 시나리오에 대해 설명하고 시작하는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-105">This document will help you understand the various scenarios Azure AD supports and will show you how to get started.</span></span> <span data-ttu-id="5a79a-106">다음 섹션으로 구분하여 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-106">It’s divided into the following sections:</span></span>

* [<span data-ttu-id="5a79a-107">Azure AD 인증의 기본 사항</span><span class="sxs-lookup"><span data-stu-id="5a79a-107">Basics of Authentication in Azure AD</span></span>](#basics-of-authentication-in-azure-ad)
* [<span data-ttu-id="5a79a-108">Azure AD 보안 토큰의 클레임</span><span class="sxs-lookup"><span data-stu-id="5a79a-108">Claims in Azure AD Security Tokens</span></span>](#claims-in-azure-ad-security-tokens)
* [<span data-ttu-id="5a79a-109">Azure AD 응용 프로그램 등록의 기본 사항</span><span class="sxs-lookup"><span data-stu-id="5a79a-109">Basics of Registering an Application in Azure AD</span></span>](#basics-of-registering-an-application-in-azure-ad)
* [<span data-ttu-id="5a79a-110">응용 프로그램 종류 및 시나리오</span><span class="sxs-lookup"><span data-stu-id="5a79a-110">Application Types and Scenarios</span></span>](#application-types-and-scenarios)
  
  * [<span data-ttu-id="5a79a-111">웹 브라우저-웹 응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="5a79a-111">Web Browser to Web Application</span></span>](#web-browser-to-web-application)
  * [<span data-ttu-id="5a79a-112">SPA(단일 페이지 응용 프로그램)</span><span class="sxs-lookup"><span data-stu-id="5a79a-112">Single Page Application (SPA)</span></span>](#single-page-application-spa)
  * [<span data-ttu-id="5a79a-113">네이티브 응용 프로그램-Web API</span><span class="sxs-lookup"><span data-stu-id="5a79a-113">Native Application to Web API</span></span>](#native-application-to-web-api)
  * [<span data-ttu-id="5a79a-114">웹 응용 프로그램-Web API</span><span class="sxs-lookup"><span data-stu-id="5a79a-114">Web Application to Web API</span></span>](#web-application-to-web-api)
  * [<span data-ttu-id="5a79a-115">디먼 또는 서버 응용 프로그램-Web API</span><span class="sxs-lookup"><span data-stu-id="5a79a-115">Daemon or Server Application to Web API</span></span>](#daemon-or-server-application-to-web-api)

## <a name="basics-of-authentication-in-azure-ad"></a><span data-ttu-id="5a79a-116">Azure AD 인증의 기본 사항</span><span class="sxs-lookup"><span data-stu-id="5a79a-116">Basics of Authentication in Azure AD</span></span>
<span data-ttu-id="5a79a-117">Azure AD 인증의 기본 개념을 잘 모른다면 이 섹션을 읽어 보세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-117">If you are unfamiliar with basic concepts of authentication in Azure AD, read this section.</span></span> <span data-ttu-id="5a79a-118">그렇지 않은 경우에는 [응용 프로그램 종류 및 시나리오](#application-types-and-scenarios)로 건너뛰어도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-118">Otherwise, you may want to skip down to [Application Types and Scenarios](#application-types-and-scenarios).</span></span>

<span data-ttu-id="5a79a-119">ID가 필요한 가장 기본적인 시나리오를 가정하겠습니다. 예를 들어 웹 브라우저 사용자가 웹 응용 프로그램에 대한 인증을 받아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-119">Let’s consider the most basic scenario where identity is required: a user in a web browser needs to authenticate to a web application.</span></span> <span data-ttu-id="5a79a-120">이 시나리오에 대해서는 [웹 브라우저-웹 응용 프로그램](#web-browser-to-web-application) 섹션에서 더 자세히 설명하지만, 시작하면서 Azure AD의 기능을 설명하고 시나리오의 작동 방식을 개념화해 두면 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-120">This scenario is described in greater detail in the [Web Browser to Web Application](#web-browser-to-web-application) section, but it’s a useful starting point to illustrate the capabilities of Azure AD and conceptualize how the scenario works.</span></span> <span data-ttu-id="5a79a-121">이 시나리오에 대해 다음 다이어그램을 참조합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-121">Consider the following diagram for this scenario:</span></span>

![웹 응용 프로그램에 대한 로그온 개요](./media/active-directory-authentication-scenarios/basics_of_auth_in_aad.png)

<span data-ttu-id="5a79a-123">위의 다이어그램을 고려할 때, 다양한 구성 요소에 대해 알아야 할 사항은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-123">With the diagram above in mind, here’s what you need to know about its various components:</span></span>

* <span data-ttu-id="5a79a-124">Azure AD는 조직의 디렉터리에 존재하는 사용자 및 응용 프로그램의 ID를 확인하고 궁극적으로 해당 사용자와 응용 프로그램을 성공적으로 인증하면 보안 토큰을 발급하는 ID 공급자입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-124">Azure AD is the identity provider, responsible for verifying the identity of users and applications that exist in an organization’s directory, and ultimately issuing security tokens upon successful authentication of those users and applications.</span></span>
* <span data-ttu-id="5a79a-125">Azure AD에 인증을 아웃소싱하려는 응용 프로그램은 Azure AD에서 등록되어 있어야 합니다. 이렇게 등록하면 디렉터리의 응용 프로그램을 등록하고 고유하게 식별하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-125">An application that wants to outsource authentication to Azure AD must be registered in Azure AD, which registers and uniquely identifies the app in the directory.</span></span>
* <span data-ttu-id="5a79a-126">개발자는 오픈 소스 Azure AD 인증 라이브러리를 사용하여 프로토콜 세부 정보를 처리함으로써 인증을 간편하게 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-126">Developers can use the open source Azure AD authentication libraries to make authentication easy by handling the protocol details for you.</span></span> <span data-ttu-id="5a79a-127">자세한 내용은 [Azure Active Directory 인증 라이브러리](active-directory-authentication-libraries.md) 를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-127">See [Azure Active Directory Authentication Libraries](active-directory-authentication-libraries.md) for more information.</span></span>

<span data-ttu-id="5a79a-128">• 사용자가 인증되고 나면 응용 프로그램은 이 사용자의 보안 토큰의 유효성을 검사하여 의도한 당사자에 대해 인증이 성공했는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-128">• Once a user has been authenticated, the application must validate the user’s security token to ensure that authentication was successful for the intended parties.</span></span> <span data-ttu-id="5a79a-129">개발자는 제공된 인증 라이브러리를 사용하여 JWT(JSON Web Token) 또는 SAML 2.0를 포함한 Azure AD의 토큰에 대한 유효성 인증을 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-129">Developers can use the provided authentication libraries to handle validation of any token from Azure AD, including JSON Web Tokens (JWT) or SAML 2.0.</span></span> <span data-ttu-id="5a79a-130">유효성 검사를 수동으로 수행하려는 경우 [JWT 토큰 처리기](https://msdn.microsoft.com/library/dn205065.aspx) 설명서를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-130">If you want to perform validation manually, see the [JWT Token Handler](https://msdn.microsoft.com/library/dn205065.aspx) documentation.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="5a79a-131">Azure AD는 공개 키 암호화를 사용하여 토큰을 서명하고 토큰 유효성을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-131">Azure AD uses public key cryptography to sign tokens and verify that they are valid.</span></span> <span data-ttu-id="5a79a-132">응용 프로그램이 항상 최신 키로 업데이트되도록 하기 위해 응용 프로그램에 있어야 하는 필수 논리에 대해 자세히 알아보려면 [Azure AD의 서명 키 롤오버에 대한 중요한 정보](active-directory-signing-key-rollover.md) 를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-132">See [Important Information About Signing Key Rollover in Azure AD](active-directory-signing-key-rollover.md) for more information on the necessary logic you must have in your application to ensure it’s always updated with the latest keys.</span></span>
> 
> 

<span data-ttu-id="5a79a-133">• 인증 프로세스에 대한 요청 및 응답 흐름은 사용된 인증 프로토콜(예: OAuth 2.0, OpenID Connect, WS-Federation 또는 SAML 2.0)에 의해 결정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-133">• The flow of requests and responses for the authentication process is determined by the authentication protocol that was used, such as OAuth 2.0, OpenID Connect, WS-Federation, or SAML 2.0.</span></span> <span data-ttu-id="5a79a-134">이 프로토콜에 대한 자세한 내용은 [Azure Active Directory 인증 프로토콜](active-directory-authentication-protocols.md) 항목 및 다음 섹션을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-134">These protocols are discussed in more detail in the [Azure Active Directory Authentication Protocols](active-directory-authentication-protocols.md) topic and in the sections below.</span></span>

> [!NOTE]
> <span data-ttu-id="5a79a-135">Azure AD는 JWT로 표현되는 전달자 토큰을 포함한 전달자 토큰을 광범위하게 활용하는 OAuth 2.0 및 OpenID Connect 표준을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-135">Azure AD supports the OAuth 2.0 and OpenID Connect standards that make extensive use of bearer tokens, including bearer tokens represented as JWTs.</span></span> <span data-ttu-id="5a79a-136">전달자 토큰은 보호된 리소스에 대한 "전달자" 액세스 권한을 부여하는 간단한 보안 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-136">A bearer token is a lightweight security token that grants the “bearer” access to a protected resource.</span></span> <span data-ttu-id="5a79a-137">이런 의미에서, "전달자"는 토큰을 제공할 수 있는 당사자입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-137">In this sense, the “bearer” is any party that can present the token.</span></span> <span data-ttu-id="5a79a-138">이 당사자는 전달자 토큰을 수신하려면 먼저 Azure AD를 사용하여 인증해야 합니다. 하지만 전송 및 저장 시 토큰 보안을 유지하는 데 필요한 단계를 취하지 않는 경우 의도하지 않은 당사자가 토큰을 가로채서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-138">Though a party must first authenticate with Azure AD to receive the bearer token, if the required steps are not taken to secure the token in transmission and storage, it can be intercepted and used by an unintended party.</span></span> <span data-ttu-id="5a79a-139">일부 보안 토큰에는 권한 없는 당사자가 사용하는 것을 방지하는 기본 제공 메커니즘이 있지만, 전달자 토큰에는 이러한 메커니즘이 없으므로 전송 계층 보안(HTTPS)과 같은 보안 채널에서 전달자 토큰을 전송해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-139">While some security tokens have a built-in mechanism for preventing unauthorized parties from using them, bearer tokens do not have this mechanism and must be transported in a secure channel such as transport layer security (HTTPS).</span></span> <span data-ttu-id="5a79a-140">전달자 토큰이 일반 텍스트 상태로 전송되는 경우 악의적인 사용자가 메시지 가로채기(man-in-the-middle) 공격을 사용해서 토큰을 획득하고 보호된 리소스에 무단으로 액세스하는 데 이 토큰을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-140">If a bearer token is transmitted in the clear, a man-in the middle attack can be used by a malicious party to acquire the token and use it for an unauthorized access to a protected resource.</span></span> <span data-ttu-id="5a79a-141">나중에 사용하기 위해 전달자 토큰을 저장하거나 캐싱할 때도 동일한 보안 원칙이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-141">The same security principles apply when storing or caching bearer tokens for later use.</span></span> <span data-ttu-id="5a79a-142">항상 응용 프로그램이 안전한 방식으로 전달자 토큰을 전송하고 저장하도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-142">Always ensure that your application transmits and stores bearer tokens in a secure manner.</span></span> <span data-ttu-id="5a79a-143">전달자 토큰의 보안 고려 사항을 자세히 알아보려면 [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-143">For more security considerations on bearer tokens, see [RFC 6750 Section 5](http://tools.ietf.org/html/rfc6750).</span></span>
> 
> 

<span data-ttu-id="5a79a-144">기본 사항을 간략하게 살펴보았으므로, 이제 아래 섹션을 읽어 보고 Azure AD에서 프로비저닝이 작동하는 방법 및 Azure AD가 지원하는 일반적인 시나리오를 살펴보세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-144">Now that you have an overview of the basics, read the sections below to understand how provisioning works in Azure AD and the common scenarios Azure AD supports.</span></span>

## <a name="claims-in-azure-ad-security-tokens"></a><span data-ttu-id="5a79a-145">Azure AD 보안 토큰의 클레임</span><span class="sxs-lookup"><span data-stu-id="5a79a-145">Claims in Azure AD Security Tokens</span></span>
<span data-ttu-id="5a79a-146">Azure AD에서 발급된 보안 토큰에는 인증된 주체에 대한 클레임 또는 정보 어설션이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-146">Security tokens issued by Azure AD contain claims, or assertions of information about the subject that has been authenticated.</span></span> <span data-ttu-id="5a79a-147">이 클레임은 응용 프로그램에서 다양한 작업에 대해 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-147">These claims can be used by the application for various tasks.</span></span> <span data-ttu-id="5a79a-148">예를 들어 토큰 유효성 검사, 대상의 디렉터리 테넌트 식별, 사용자 정보 표시, 주체의 권한 부여 확인 등을 수행하는 데 클레임을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-148">For example, they can be used to validate the token, identify the subject's directory tenant, display user information, determine the subject's authorization, and so on.</span></span> <span data-ttu-id="5a79a-149">임의의 지정된 보안 토큰에 있는 클레임은 토큰 형식, 사용자 인증에 사용되는 자격 증명 유형, 응용 프로그램 구성 등에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-149">The claims present in any given security token are dependent upon the type of token, the type of credential used to authenticate the user, and the application configuration.</span></span> <span data-ttu-id="5a79a-150">아래 표에서는 Azure AD에서 내보내는 각 클레임 유형에 대해 간략하게 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-150">A brief description of each type of claim emitted by Azure AD is provided in the table below.</span></span> <span data-ttu-id="5a79a-151">자세한 내용은 [지원되는 토큰 및 클레임 유형](active-directory-token-and-claims.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-151">For more information, refer to [Supported Token and Claim Types](active-directory-token-and-claims.md).</span></span>

| <span data-ttu-id="5a79a-152">클레임</span><span class="sxs-lookup"><span data-stu-id="5a79a-152">Claim</span></span> | <span data-ttu-id="5a79a-153">설명</span><span class="sxs-lookup"><span data-stu-id="5a79a-153">Description</span></span> |
| --- | --- |
| <span data-ttu-id="5a79a-154">응용 프로그램 UI</span><span class="sxs-lookup"><span data-stu-id="5a79a-154">Application ID</span></span> |<span data-ttu-id="5a79a-155">토큰을 사용 중인 응용 프로그램을 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-155">Identifies the application that is using the token.</span></span> |
| <span data-ttu-id="5a79a-156">대상</span><span class="sxs-lookup"><span data-stu-id="5a79a-156">Audience</span></span> |<span data-ttu-id="5a79a-157">토큰의 의도된 받는 사람 리소스를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-157">Identifies the recipient resource the token is intended for.</span></span> |
| <span data-ttu-id="5a79a-158">응용 프로그램 인증 컨텍스트 클래스 참조</span><span class="sxs-lookup"><span data-stu-id="5a79a-158">Application Authentication Context Class Reference</span></span> |<span data-ttu-id="5a79a-159">클라이언트가 인증된 방법을 나타냅니다(공용 클라이언트 또는 기밀 클라이언트).</span><span class="sxs-lookup"><span data-stu-id="5a79a-159">Indicates how the client was authenticated (public client vs. confidential client).</span></span> |
| <span data-ttu-id="5a79a-160">인증 인스턴트</span><span class="sxs-lookup"><span data-stu-id="5a79a-160">Authentication Instant</span></span> |<span data-ttu-id="5a79a-161">인증이 발생한 날짜 및 시간을 기록합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-161">Records the date and time when the authentication occurred.</span></span> |
| <span data-ttu-id="5a79a-162">인증 방법</span><span class="sxs-lookup"><span data-stu-id="5a79a-162">Authentication Method</span></span> |<span data-ttu-id="5a79a-163">토큰의 주체가 인증된 방법을 나타냅니다(예: 암호, 인증서 등).</span><span class="sxs-lookup"><span data-stu-id="5a79a-163">Indicates how the subject of the token was authenticated (password, certificate, etc.).</span></span> |
| <span data-ttu-id="5a79a-164">이름</span><span class="sxs-lookup"><span data-stu-id="5a79a-164">First Name</span></span> |<span data-ttu-id="5a79a-165">Azure AD에서 설정된 사용자 이름을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-165">Provides the given name of the user as set in Azure AD.</span></span> |
| <span data-ttu-id="5a79a-166">그룹</span><span class="sxs-lookup"><span data-stu-id="5a79a-166">Groups</span></span> |<span data-ttu-id="5a79a-167">사용자가 구성원으로 속한 Azure AD 그룹의 개체 ID를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-167">Contains object Ids of Azure AD groups the user is a member of.</span></span> |
| <span data-ttu-id="5a79a-168">ID 공급자</span><span class="sxs-lookup"><span data-stu-id="5a79a-168">Identity Provider</span></span> |<span data-ttu-id="5a79a-169">토큰의 주체를 인증한 ID 공급자를 기록합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-169">Records the identity provider that authenticated the subject of the token.</span></span> |
| <span data-ttu-id="5a79a-170">발급 시간</span><span class="sxs-lookup"><span data-stu-id="5a79a-170">Issued At</span></span> |<span data-ttu-id="5a79a-171">토큰이 발급된 시간을 기록합니다. 종종 토큰 새로 고침에 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-171">Records the time at which the token was issued, often used for token freshness.</span></span> |
| <span data-ttu-id="5a79a-172">발급자</span><span class="sxs-lookup"><span data-stu-id="5a79a-172">Issuer</span></span> |<span data-ttu-id="5a79a-173">토큰을 내보낸 STS 및 Azure AD 테넌트를 식별합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-173">Identifies the STS that emitted the token as well as the Azure AD tenant.</span></span> |
| <span data-ttu-id="5a79a-174">성</span><span class="sxs-lookup"><span data-stu-id="5a79a-174">Last Name</span></span> |<span data-ttu-id="5a79a-175">Azure AD에서 설정된 사용자 성을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-175">Provides the surname of the user as set in Azure AD.</span></span> |
| <span data-ttu-id="5a79a-176">이름</span><span class="sxs-lookup"><span data-stu-id="5a79a-176">Name</span></span> |<span data-ttu-id="5a79a-177">토큰의 주체를 식별하는, 사람이 인식할 수 있는 값을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-177">Provides a human readable value that identifies the subject of the token.</span></span> |
| <span data-ttu-id="5a79a-178">개체 ID</span><span class="sxs-lookup"><span data-stu-id="5a79a-178">Object Id</span></span> |<span data-ttu-id="5a79a-179">Azure AD의 주체에 대한 변경 불가능한 고유 식별자를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-179">Contains an immutable, unique identifier of the subject in Azure AD.</span></span> |
| <span data-ttu-id="5a79a-180">역할</span><span class="sxs-lookup"><span data-stu-id="5a79a-180">Roles</span></span> |<span data-ttu-id="5a79a-181">사용자에게 부여된 Azure AD 응용 프로그램 역할의 이름을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-181">Contains friendly names of Azure AD Application Roles that the user has been granted.</span></span> |
| <span data-ttu-id="5a79a-182">범위</span><span class="sxs-lookup"><span data-stu-id="5a79a-182">Scope</span></span> |<span data-ttu-id="5a79a-183">클라이언트 응용 프로그램에 부여된 권한을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-183">Indicates the permissions granted to the client application.</span></span> |
| <span data-ttu-id="5a79a-184">제목</span><span class="sxs-lookup"><span data-stu-id="5a79a-184">Subject</span></span> |<span data-ttu-id="5a79a-185">토큰에서 어설션하는 정보의 주체를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-185">Indicates the principal about which the token asserts information.</span></span> |
| <span data-ttu-id="5a79a-186">테넌트 ID</span><span class="sxs-lookup"><span data-stu-id="5a79a-186">Tenant Id</span></span> |<span data-ttu-id="5a79a-187">토큰을 발급한 디렉터리 테넌트에 대한 변경 불가능한 고유 식별자를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-187">Contains an immutable, unique identifier of the directory tenant that issued the token.</span></span> |
| <span data-ttu-id="5a79a-188">토큰 수명</span><span class="sxs-lookup"><span data-stu-id="5a79a-188">Token Lifetime</span></span> |<span data-ttu-id="5a79a-189">토큰이 유효한 시간 간격을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-189">Defines the time interval within which a token is valid.</span></span> |
| <span data-ttu-id="5a79a-190">사용자 계정 이름</span><span class="sxs-lookup"><span data-stu-id="5a79a-190">User Principal Name</span></span> |<span data-ttu-id="5a79a-191">주체의 사용자 계정 이름을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-191">Contains the user principal name of the subject.</span></span> |
| <span data-ttu-id="5a79a-192">버전</span><span class="sxs-lookup"><span data-stu-id="5a79a-192">Version</span></span> |<span data-ttu-id="5a79a-193">토큰의 버전 번호를 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-193">Contains the version number of the token.</span></span> |

## <a name="basics-of-registering-an-application-in-azure-ad"></a><span data-ttu-id="5a79a-194">Azure AD 응용 프로그램 등록의 기본 사항</span><span class="sxs-lookup"><span data-stu-id="5a79a-194">Basics of Registering an Application in Azure AD</span></span>
<span data-ttu-id="5a79a-195">Azure AD로 인증을 아웃소싱하는 응용 프로그램을 디렉터리에 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-195">Any application that outsources authentication to Azure AD must be registered in a directory.</span></span> <span data-ttu-id="5a79a-196">이 단계에서는 응용 프로그램이 위치한 URL, 인증 후 응답을 보낼 URL, 응용 프로그램을 식별하는 URI 등을 포함하여 응용 프로그램에 대한 정보를 Azure AD에 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-196">This step involves telling Azure AD about your application, including the URL where it’s located, the URL to send replies after authentication, the URI to identify your application, and more.</span></span> <span data-ttu-id="5a79a-197">이러한 정보가 필요한 주된 이유는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-197">This information is required for a few key reasons:</span></span>

* <span data-ttu-id="5a79a-198">Azure AD에는 로그온을 처리하거나 토큰을 교환할 때 응용 프로그램과 통신하는 좌표가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-198">Azure AD needs coordinates to communicate with the application when handling sign-on or exchanging tokens.</span></span> <span data-ttu-id="5a79a-199">여기에는 다음이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-199">These include the following:</span></span>
  
  * <span data-ttu-id="5a79a-200">응용 프로그램 ID URI: 응용 프로그램에 대한 식별자입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-200">Application ID URI: The identifier for an application.</span></span> <span data-ttu-id="5a79a-201">이 값은 인증 과정에 호출자가 토큰을 필요로 하는 응용 프로그램이 어느 것인지 나타내기 위해 Azure AD로 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-201">This value is sent to Azure AD during authentication to indicate which application the caller wants a token for.</span></span> <span data-ttu-id="5a79a-202">또한 이 값은 의도된 대상임을 응용 프로그램에서 알 수 있도록 토큰에 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-202">Additionally, this value is included in the token so that the application knows it was the intended target.</span></span>
  * <span data-ttu-id="5a79a-203">회신 URL 및 리디렉션 URI: 웹 API 또는 웹 응용 프로그램의 경우 회신 URL은 Azure AD가 인증 응답(인증이 성공한 경우 토큰 포함)을 보내는 위치입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-203">Reply URL and Redirect URI: In the case of a web API or web application, the Reply URL is the location to which Azure AD will send the authentication response, including a token if authentication was successful.</span></span> <span data-ttu-id="5a79a-204">네이티브 응용 프로그램의 경우 리디렉션 URI는 Azure AD가 OAuth 2.0 요청에서 사용자-에이전트를 리디렉션하는 고유 식별자입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-204">In the case of a native application, the Redirect URI is a unique identifier to which Azure AD will redirect the user-agent in an OAuth 2.0 request.</span></span>
  * <span data-ttu-id="5a79a-205">응용 프로그램 ID: 응용 프로그램의 ID로서, 응용 프로그램이 등록되면 Azure AD에서 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-205">Application ID: The ID for an application, which is generated by Azure AD when the application is registered.</span></span> <span data-ttu-id="5a79a-206">인증 코드 또는 토큰을 요청하면 인증 과정에서 응용 프로그램 ID 및 키가 Azure AD로 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-206">When requesting an authorization code or token, the Application ID and key are sent to Azure AD during authentication.</span></span>
  * <span data-ttu-id="5a79a-207">키: 웹 API를 호출하기 위해 Azure AD에 대해 인증할 때 응용 프로그램 ID와 함께 전송되는 키입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-207">Key: The key that is sent along with a Application ID when authenticating to Azure AD to call a web API.</span></span>
* <span data-ttu-id="5a79a-208">Azure AD는 응용 프로그램에 디렉터리 데이터나 조직의 다른 응용 프로그램 등에 액세스하는 데 필요한 권한이 있는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-208">Azure AD needs to ensure the application has the required permissions to access your directory data, other applications in your organization, and so on</span></span>

<span data-ttu-id="5a79a-209">Azure AD를 사용하여 개발 및 통합할 수 있는 두 가지 범주의 응용 프로그램이 있다는 것을 이해하면 프로비저닝이 더 분명해집니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-209">Provisioning becomes clearer when you understand that there are two categories of applications that can be developed and integrated with Azure AD:</span></span>

* <span data-ttu-id="5a79a-210">단일 테넌트 응용 프로그램: 단일 테넌트 응용 프로그램은 단일 조직에서 사용하기 위한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-210">Single tenant application: A single tenant application is intended for use in one organization.</span></span> <span data-ttu-id="5a79a-211">일반적으로 엔터프라이즈 개발자가 작성한 LoB(기간 업무) 응용 프로그램이 이에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-211">These are typically line-of-business (LoB) applications written by an enterprise developer.</span></span> <span data-ttu-id="5a79a-212">단일 테넌트 응용 프로그램은 하나의 디렉터리에 있는 사용자들만 액세스해야 하므로 하나의 디렉터리에서만 프로비전해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-212">A single tenant application only needs to be accessed by users in one directory, and as a result, it only needs to be provisioned in one directory.</span></span> <span data-ttu-id="5a79a-213">이 응용 프로그램은 일반적으로 조직 내에서 개발자가 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-213">These applications are typically registered by a developer in the organization.</span></span>
* <span data-ttu-id="5a79a-214">다중 테넌트 응용 프로그램: 다중 테넌트 응용 프로그램은 하나의 조직뿐만 아니라 다수의 조직에서 사용하기 위한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-214">Multi-tenant application: A multi-tenant application is intended for use in many organizations, not just one organization.</span></span> <span data-ttu-id="5a79a-215">일반적으로 ISV(Independent Software Vendor)가 작성한 SaaS(Software-as-a-Service) 응용 프로그램이 이에 해당합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-215">These are typically software-as-a-service (SaaS) applications written by an independent software vendor (ISV).</span></span> <span data-ttu-id="5a79a-216">다중 테넌트 응용 프로그램은 사용될 각 디렉터리에서 프로비저닝해야 하며, 그러려면 사용자나 관리자가 등록에 동의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-216">Multi-tenant applications need to be provisioned in each directory where they will be used, which requires user or administrator consent to register them.</span></span> <span data-ttu-id="5a79a-217">이러한 동의 프로세스는 응용 프로그램이 디렉터리에 등록되고 Graph API 또는 다른 웹 API에 대한 액세스 권한이 제공되면 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-217">This consent process starts when an application has been registered in the directory and is given access to the Graph API or perhaps another web API.</span></span> <span data-ttu-id="5a79a-218">다른 조직의 사용자나 관리자가 응용 프로그램을 사용하기 위해 등록할 때는 응용 프로그램에서 요구되는 권한을 표시하는 대화 상자가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-218">When a user or administrator from a different organization signs up to use the application, they are presented with a dialog that displays the permissions the application requires.</span></span> <span data-ttu-id="5a79a-219">이 사용자 또는 관리자는 응용 프로그램에 동의할 수 있으며, 이 경우 응용 프로그램에서 주어진 데이터에 액세스할 수 있게 되고 최종적으로 디렉터리에서 응용 프로그램이 등록됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-219">The user or administrator can then consent to the application, which gives the application access to the stated data, and finally registers the application in their directory.</span></span> <span data-ttu-id="5a79a-220">자세한 내용은 [동의 프레임 워크 개요](active-directory-integrating-applications.md#overview-of-the-consent-framework)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-220">For more information, see [Overview of the Consent Framework](active-directory-integrating-applications.md#overview-of-the-consent-framework).</span></span>

<span data-ttu-id="5a79a-221">단일 테넌트 응용 프로그램 대신 다중 테넌트 응용 프로그램을 개발할 때 고려할 몇 가지 추가 사항이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-221">Some additional considerations arise when developing a multi-tenant application instead of a single tenant application.</span></span> <span data-ttu-id="5a79a-222">예를 들어 여러 디렉터리에 있는 사용자에게 응용 프로그램을 사용할 수 있도록 만들려면 사용자가 속한 테넌트를 확인할 수 있는 메커니즘이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-222">For example, if you are making your application available to users in multiple directories, you need a mechanism to determine which tenant they’re in.</span></span> <span data-ttu-id="5a79a-223">단일 테넌트 응용 프로그램은 한 사용자에 대한 고유한 자체 디렉터리만 검토하면 되지만, 다중 테넌트 응용 프로그램은 Azure AD의 모든 디렉터리에서 특정 사용자를 식별해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-223">A single tenant application only needs to look in its own directory for a user, while a multi-tenant application needs to identify a specific user from all the directories in Azure AD.</span></span> <span data-ttu-id="5a79a-224">이 작업을 수행할 수 있도록, Azure AD는 테넌트 특정 끝점을 제공하지 않고 다중 테넌트 응용 프로그램이 로그인 요청을 디렉션할 수 있는 공통 인증 끝점을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-224">To accomplish this task, Azure AD provides a common authentication endpoint where any multi-tenant application can direct sign-in requests, instead of a tenant-specific endpoint.</span></span> <span data-ttu-id="5a79a-225">이 끝점은 Azure AD의 모든 디렉터리에 대해 https://login.microsoftonline.com/common인 반면, 테넌트 특정 끝점은 https://login.microsoftonline.com/contoso.onmicrosoft.com일 수 있습니다. 공통 끝점은 응용 프로그램을 개발할 때 특히 중요하게 고려해야 합니다. 로그인, 로그아웃, 토큰 유효성 검사 도중에 다중 테넌트를 처리하는 필수 논리가 있어야 하기 때문입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-225">This endpoint is https://login.microsoftonline.com/common for all directories in Azure AD, whereas a tenant-specific endpoint might be https://login.microsoftonline.com/contoso.onmicrosoft.com. The common endpoint is especially important to consider when developing your application because you’ll need the necessary logic to handle multiple tenants during sign-in, sign-out, and token validation.</span></span>

<span data-ttu-id="5a79a-226">현재 단일 테넌트 응용 프로그램을 개발 중이지만 이 응용 프로그램을 다수의 조직에서 사용할 수 있도록 만들려는 경우 Azure AD에서 응용 프로그램 및 해당 구성을 쉽게 변경하여 다중 테넌트를 지원하도록 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-226">If you are currently developing a single tenant application but want to make it available to many organizations, you can easily make changes to the application and its configuration in Azure AD to make it multi-tenant capable.</span></span> <span data-ttu-id="5a79a-227">또한 단일 테넌트 응용 프로그램의 인증을 제공하든 아니면 다중 테넌트 응용 프로그램의 인증을 제공하든 상관없이, Azure AD는 모든 디렉터리의 모든 토큰에 동일한 서명 키를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-227">In addition, Azure AD uses the same signing key for all tokens in all directories, whether you are providing authentication in a single tenant or multi-tenant application.</span></span>

<span data-ttu-id="5a79a-228">이 문서에 나온 각 시나리오에는 해당 프로비저닝 요구 사항을 설명하는 하위 섹션이 나옵니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-228">Each scenario listed in this document includes a sub-section that describes its provisioning requirements.</span></span> <span data-ttu-id="5a79a-229">Azure AD에서 응용 프로그램을 프로비전하는 방법 및 단일 테넌트 응용 프로그램과 다중 테넌트 응용 프로그램 간의 차이점에 대한 자세한 내용은 [Azure Active Directory와 응용 프로그램 통합](active-directory-integrating-applications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-229">For more in-depth information about provisioning an application in Azure AD and the differences between single and multi-tenant applications, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md) for more information.</span></span> <span data-ttu-id="5a79a-230">계속 읽으면서 Azure AD의 일반적인 응용 프로그램 시나리오를 이해하시기 바랍니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-230">Continue reading to understand the common application scenarios in Azure AD.</span></span>

## <a name="application-types-and-scenarios"></a><span data-ttu-id="5a79a-231">응용 프로그램 종류 및 시나리오</span><span class="sxs-lookup"><span data-stu-id="5a79a-231">Application Types and Scenarios</span></span>
<span data-ttu-id="5a79a-232">이 문서에 설명된 각 시나리오는 다양한 언어 및 플랫폼을 사용하여 개발할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-232">Each of the scenarios described in this document can be developed using various languages and platforms.</span></span> <span data-ttu-id="5a79a-233">모두 [코드 샘플 가이드](active-directory-code-samples.md)에서 제공되거나 해당하는 [GitHub 샘플 리포지토리](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory)에서 직접 사용할 수 있는 전체 코드 샘플로 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-233">They are all backed by complete code samples which are available in our [Code Samples guide](active-directory-code-samples.md), or directly from the corresponding [GitHub sample repositories](https://github.com/Azure-Samples?utf8=%E2%9C%93&query=active-directory).</span></span> <span data-ttu-id="5a79a-234">또한 응용 프로그램에 종단 간 시나리오의 특정 부분이나 세그먼트가 필요한 경우 대부분 해당 기능을 개별적으로 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-234">In addition, if your application needs a specific piece or segment of an end-to-end scenario, in most cases that functionality can be added independently.</span></span> <span data-ttu-id="5a79a-235">예를 들어 웹 API를 호출하는 네이티브 응용 프로그램이 있는 경우 웹 API도 호출하는 웹 응용 프로그램을 쉽게 추가할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-235">For example, if you have a native application that calls a web API, you can easily add a web application that also calls the web API.</span></span> <span data-ttu-id="5a79a-236">다음 다이어그램은 이 시나리오 및 응용 프로그램 종류, 다양한 구성 요소를 추가할 수 있는 방법 등을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-236">The following diagram illustrates these scenarios and application types, and how different components can be added:</span></span>

![응용 프로그램 종류 및 시나리오](./media/active-directory-authentication-scenarios/application_types_and_scenarios.png)

<span data-ttu-id="5a79a-238">다음은 Azure AD에서 지원되는 다섯 가지 기본 응용 프로그램 시나리오입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-238">These are the five primary application scenarios supported by Azure AD:</span></span>

* <span data-ttu-id="5a79a-239">[웹 브라우저-웹 응용 프로그램](#web-browser-to-web-application): 사용자가 Azure AD에서 보호되는 웹 응용 프로그램에 로그인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-239">[Web Browser to Web Application](#web-browser-to-web-application): A user needs to sign in to a web application that is secured by Azure AD.</span></span>
* <span data-ttu-id="5a79a-240">[SPA(단일 페이지 응용 프로그램)](#single-page-application-spa): 사용자가 Azure AD에서 보호되는 단일 페이지 응용 프로그램에 로그인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-240">[Single Page Application (SPA)](#single-page-application-spa): A user needs to sign in to a single page application that is secured by Azure AD.</span></span>
* <span data-ttu-id="5a79a-241">[네이티브 응용 프로그램-Web API](#native-application-to-web-api): 전화, 태블릿 또는 PC에서 실행되는 네이티브 응용 프로그램이 Azure AD에서 보호되는 웹 API로부터 사용자가 리소스를 가져올 수 있도록 인증해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-241">[Native Application to Web API](#native-application-to-web-api): A native application that runs on a phone, tablet, or PC needs to authenticate a user to get resources from a web API that is secured by Azure AD.</span></span>
* <span data-ttu-id="5a79a-242">[웹 응용 프로그램-Web API](#web-application-to-web-api): 웹 응용 프로그램이 Azure AD에서 보호되는 웹 API로부터 리소스를 가져와야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-242">[Web Application to Web API](#web-application-to-web-api): A web application needs to get resources from a web API secured by Azure AD.</span></span>
* <span data-ttu-id="5a79a-243">[디먼 또는 서버 응용 프로그램-Web API](#daemon-or-server-application-to-web-api): 디먼 응용 프로그램 또는 웹 사용자 인터페이스가 없는 서버 응용 프로그램이 Azure AD에서 보호되는 웹 API로부터 리소스를 가져와야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-243">[Daemon or Server Application to Web API](#daemon-or-server-application-to-web-api): A daemon application or a server application with no web user interface needs to get resources from a web API secured by Azure AD.</span></span>

### <a name="web-browser-to-web-application"></a><span data-ttu-id="5a79a-244">웹 브라우저-웹 응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="5a79a-244">Web Browser to Web Application</span></span>
<span data-ttu-id="5a79a-245">이 섹션에서는 웹 브라우저-웹 응용 프로그램 시나리오에서 사용자를 인증하는 응용 프로그램에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-245">This section describes an application that authenticates a user in a web browser to a web application.</span></span> <span data-ttu-id="5a79a-246">이 시나리오에서는 웹 응용 프로그램이 사용자의 브라우저를 Azure AD에 로그인하도록 지시합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-246">In this scenario, the web application directs the user’s browser to sign them in to Azure AD.</span></span> <span data-ttu-id="5a79a-247">Azure AD는 보안 토큰에 사용자에 대한 클레임이 포함된 로그인 응답을 사용자의 브라우저를 통해 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-247">Azure AD returns a sign-in response through the user’s browser, which contains claims about the user in a security token.</span></span> <span data-ttu-id="5a79a-248">이 시나리오에서는 WS-Federation, SAML 2.0 및 OpenID Connect 프로토콜을 사용한 로그온이 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-248">This scenario supports sign-on using the WS-Federation, SAML 2.0, and OpenID Connect protocols.</span></span>

#### <a name="diagram"></a><span data-ttu-id="5a79a-249">다이어그램</span><span class="sxs-lookup"><span data-stu-id="5a79a-249">Diagram</span></span>
![브라우저-웹 응용 프로그램의 인증 흐름](./media/active-directory-authentication-scenarios/web_browser_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="5a79a-251">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="5a79a-251">Description of Protocol Flow</span></span>
1. <span data-ttu-id="5a79a-252">사용자가 응용 프로그램을 방문할 때 로그인해야 하는 경우 로그인 요청을 통해 Azure AD의 인증 끝점으로 리디렉션됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-252">When a user visits the application and needs to sign in, they are redirected via a sign-in request to the authentication endpoint in Azure AD.</span></span>
2. <span data-ttu-id="5a79a-253">사용자가 로그인 페이지에서 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-253">The user signs in on the sign-in page.</span></span>
3. <span data-ttu-id="5a79a-254">인증에 성공하는 경우 Azure AD는 인증 토큰을 만들고 Azure Portal에서 구성된 응용 프로그램의 회신 URL에 로그인 응답을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-254">If authentication is successful, Azure AD creates an authentication token and returns a sign-in response to the application’s Reply URL that was configured in the Azure Portal.</span></span> <span data-ttu-id="5a79a-255">프로덕션 응용 프로그램의 경우 이 회신 URL은 HTTPS여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-255">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="5a79a-256">반환된 토큰에는 응용 프로그램이 토큰의 유효성을 검사하는 데 필요한, 사용자 및 Azure AD에 대한 클레임이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-256">The returned token includes claims about the user and Azure AD that are required by the application to validate the token.</span></span>
4. <span data-ttu-id="5a79a-257">응용 프로그램이 Azure AD에 대한 페더레이션 메타데이터 문서에서 제공되는 공개 서명 키 및 발급자 정보를 사용하여 토큰의 유효성을 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-257">The application validates the token by using a public signing key and issuer information available at the federation metadata document for Azure AD.</span></span> <span data-ttu-id="5a79a-258">응용 프로그램이 토큰의 유효성을 검사한 후에는 Azure AD가 사용자의 새 세션을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-258">After the application validates the token, Azure AD starts a new session with the user.</span></span> <span data-ttu-id="5a79a-259">이 세션에서 사용자는 응용 프로그램이 만료될 때까지 응용 프로그램에 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-259">This session allows the user to access the application until it expires.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="5a79a-260">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="5a79a-260">Code Samples</span></span>
<span data-ttu-id="5a79a-261">웹 브라우저-웹 응용 프로그램 시나리오에 대한 코드 샘플을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-261">See the code samples for Web Browser to Web Application scenarios.</span></span> <span data-ttu-id="5a79a-262">또한 항상 새로운 샘플이 추가되므로, 자주 확인해 보세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-262">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="5a79a-263">[웹 브라우저-웹 응용 프로그램](active-directory-code-samples.md#web-browser-to-web-application).</span><span class="sxs-lookup"><span data-stu-id="5a79a-263">[Web Browser to Web Application](active-directory-code-samples.md#web-browser-to-web-application).</span></span>

#### <a name="registering"></a><span data-ttu-id="5a79a-264">등록</span><span class="sxs-lookup"><span data-stu-id="5a79a-264">Registering</span></span>
* <span data-ttu-id="5a79a-265">단일 테넌트: 조직 전용 응용 프로그램을 빌드하는 경우 Azure Portal을 사용하여 응용 프로그램을 회사 디렉터리에 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-265">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using the Azure Portal.</span></span>
* <span data-ttu-id="5a79a-266">다중 테넌트: 조직 외부 사용자가 사용할 수 있는 응용 프로그램을 빌드하는 경우 응용 프로그램을 회사 디렉터리에 등록해야 하며 동시에 응용 프로그램을 사용할 각 조직의 디렉터리에도 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-266">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using the application.</span></span> <span data-ttu-id="5a79a-267">해당 디렉터리에서 응용 프로그램을 사용할 수 있게 만들려면 고객이 응용 프로그램에 동의할 수 있게 하는 등록 프로세스를 포함하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-267">To make your application available in their directory, you can include a sign-up process for your customers that enables them to consent to your application.</span></span> <span data-ttu-id="5a79a-268">사용자가 응용 프로그램에 등록할 때 응용 프로그램에 필요한 권한을 보여 주는 대화 상자가 나타난 다음 동의하는 옵션이 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-268">When they sign up for your application, they will be presented with a dialog that shows the permissions the application requires, and then the option to consent.</span></span> <span data-ttu-id="5a79a-269">필요한 권한에 따라, 다른 조직의 관리자가 동의해야 할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-269">Depending on the required permissions, an administrator in the other organization may be required to give consent.</span></span> <span data-ttu-id="5a79a-270">사용자 또는 관리자가 동의하면 응용 프로그램이 이들의 디렉터리에 등록됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-270">When the user or administrator consents, the application is registered in their directory.</span></span> <span data-ttu-id="5a79a-271">자세한 내용은 [Azure Active Directory와 응용 프로그램 통합](active-directory-integrating-applications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-271">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="5a79a-272">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="5a79a-272">Token Expiration</span></span>
<span data-ttu-id="5a79a-273">Azure AD에서 발급된 토큰의 수명이 만료되면 사용자의 세션이 만료됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-273">The user’s session expires when the lifetime of the token issued by Azure AD expires.</span></span> <span data-ttu-id="5a79a-274">원한다면 비활성 기간을 기준으로 사용자를 로그아웃시키는 등, 응용 프로그램이 세션 만료 시간을 단축할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-274">Your application can shorten this time period if desired, such as signing out users based on a period of inactivity.</span></span> <span data-ttu-id="5a79a-275">세션이 만료되면 사용자에게는 다시 로그인하라는 메시지가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-275">When the session expires, the user will be prompted to sign in again.</span></span>

### <a name="single-page-application-spa"></a><span data-ttu-id="5a79a-276">SPA(단일 페이지 응용 프로그램)</span><span class="sxs-lookup"><span data-stu-id="5a79a-276">Single Page Application (SPA)</span></span>
<span data-ttu-id="5a79a-277">이 섹션에서는 Azure AD와 OAuth 2.0 암시적 권한 부여를 사용하여 웹 API 백 엔드의 보안을 유지하는 단일 페이지 응용 프로그램에 대한 인증을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-277">This section describes authentication for a Single Page Application, that uses Azure AD and the OAuth 2.0 implicit authorization grant to secure its web API back end.</span></span> <span data-ttu-id="5a79a-278">단일 페이지 응용 프로그램은 일반적으로 브라우저에서 실행되는 JavaScript 프레젠테이션 레이어(프런트 엔드) 및 서버에서 실행되며 응용 프로그램 비즈니스 논리를 구현하는 웹 API 백 엔드로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-278">Single Page Applications are typically structured as a JavaScript presentation layer (front end) that runs in the browser and a Web API back end that runs on a server and implements the application’s business logic.</span></span> <span data-ttu-id="5a79a-279">암시적 권한 부여에 관한 자세한 내용을 확인하고 자신의 응용 프로그램 시나리오에 적절한지 판단하려면 [Azure Active Directory에서 OAuth2 암시적 권한 부여 흐름 이해](active-directory-dev-understanding-oauth2-implicit-grant.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-279">To learn more about the implicit authorization grant, and help you decide whether it's right for your application scenario, see [Understanding the OAuth2 implicit grant flow in Azure Active Directory](active-directory-dev-understanding-oauth2-implicit-grant.md).</span></span>

<span data-ttu-id="5a79a-280">이 시나리오에서는 사용자가 로그인하면 JavaScript 프런트 엔드에서 [JavaScript용 Active Directory 인증 라이브러리(ADAL.JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) 및 암시적 권한 부여를 사용하여 Azure AD로부터 ID 토큰(id_token)을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-280">In this scenario, when the user signs in, the JavaScript front end uses [Active Directory Authentication Library for JavaScript (ADAL.JS)](https://github.com/AzureAD/azure-activedirectory-library-for-js/tree/dev) and the implicit authorization grant to obtain an ID token (id_token) from Azure AD.</span></span> <span data-ttu-id="5a79a-281">토큰이 캐시되고, 클라이언트가 웹 API 백 엔드에 대해 호출할 때 이 토큰을 요청에 전달자 토큰으로 첨부합니다. 그러면 OWIN 미들웨어를 사용하여 보안됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-281">The token is cached and the client attaches it to the request as the bearer token when making calls to its Web API back end, which is secured using the OWIN middleware.</span></span> 

#### <a name="diagram"></a><span data-ttu-id="5a79a-282">다이어그램</span><span class="sxs-lookup"><span data-stu-id="5a79a-282">Diagram</span></span>
![단일 페이지 응용 프로그램 다이어그램](./media/active-directory-authentication-scenarios/single_page_app.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="5a79a-284">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="5a79a-284">Description of Protocol Flow</span></span>
1. <span data-ttu-id="5a79a-285">사용자가 웹 응용 프로그램으로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-285">The user navigates to the web application.</span></span>
2. <span data-ttu-id="5a79a-286">응용 프로그램이 JavaScript 프런트 엔드(프레젠테이션 레이어)를 브라우저에 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-286">The application returns the JavaScript front end (presentation layer) to the browser.</span></span>
3. <span data-ttu-id="5a79a-287">사용자가 예를 들어 로그인 링크를 클릭하여 로그인을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-287">The user initiates sign in, for example by clicking a sign in link.</span></span> <span data-ttu-id="5a79a-288">브라우저가 Azure AD 권한 부여 끝점에 GET을 전송하여 ID 토큰을 요청합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-288">The browser sends a GET to the Azure AD authorization endpoint to request an ID token.</span></span> <span data-ttu-id="5a79a-289">이 요청에는 쿼리 매개 변수에 응용 프로그램 ID 및 회신 URL이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-289">This request includes the application ID and reply URL in the query parameters.</span></span>
4. <span data-ttu-id="5a79a-290">Azure AD가 Azure Portal에서 구성되어 등록된 회신 URL과 비교하여 회신 URL의 유효성을 검사합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-290">Azure AD validates the Reply URL against the registered Reply URL that was configured in the Azure Portal.</span></span>
5. <span data-ttu-id="5a79a-291">사용자가 로그인 페이지에서 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-291">The user signs in on the sign-in page.</span></span>
6. <span data-ttu-id="5a79a-292">인증에 성공하는 경우 Azure AD는 ID 토큰을 만들고 이 토큰을 응용 프로그램의 회신 URL에 URL 조각(#)으로 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-292">If authentication is successful, Azure AD creates an ID token and returns it as a URL fragment (#) to the application’s Reply URL.</span></span> <span data-ttu-id="5a79a-293">프로덕션 응용 프로그램의 경우 이 회신 URL은 HTTPS여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-293">For a production application, this Reply URL should be HTTPS.</span></span> <span data-ttu-id="5a79a-294">반환된 토큰에는 응용 프로그램이 토큰의 유효성을 검사하는 데 필요한, 사용자 및 Azure AD에 대한 클레임이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-294">The returned token includes claims about the user and Azure AD that are required by the application to validate the token.</span></span>
7. <span data-ttu-id="5a79a-295">브라우저에서 실행되는 JavaScript 클라이언트 코드가 응용 프로그램 웹 API 백 엔드를 보안 호출하는 데 사용할 토큰을 응답에서 추출합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-295">The JavaScript client code running in the browser extracts the token from the response to use in securing calls to the application’s web API back end.</span></span>
8. <span data-ttu-id="5a79a-296">브라우저가 권한 부여 헤더의 액세스 토큰을 사용하여 응용 프로그램의 웹 API 백 엔드를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-296">The browser calls the application’s web API back end with the access token in the authorization header.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="5a79a-297">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="5a79a-297">Code Samples</span></span>
<span data-ttu-id="5a79a-298">SPA(단일 페이지 응용 프로그램) 시나리오에 대한 코드 샘플을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-298">See the code samples for Single Page Application (SPA) scenarios.</span></span> <span data-ttu-id="5a79a-299">항상 새로운 샘플이 추가되므로, 자주 확인해 보세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-299">Be sure to check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="5a79a-300">[SPA(단일 페이지 응용 프로그램)](active-directory-code-samples.md#single-page-application-spa).</span><span class="sxs-lookup"><span data-stu-id="5a79a-300">[Single Page Application (SPA)](active-directory-code-samples.md#single-page-application-spa).</span></span>

#### <a name="registering"></a><span data-ttu-id="5a79a-301">등록</span><span class="sxs-lookup"><span data-stu-id="5a79a-301">Registering</span></span>
* <span data-ttu-id="5a79a-302">단일 테넌트: 조직 전용 응용 프로그램을 빌드하는 경우 Azure Portal을 사용하여 응용 프로그램을 회사 디렉터리에 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-302">Single Tenant: If you are building an application just for your organization, it must be registered in your company’s directory by using the Azure Portal.</span></span>
* <span data-ttu-id="5a79a-303">다중 테넌트: 조직 외부 사용자가 사용할 수 있는 응용 프로그램을 빌드하는 경우 응용 프로그램을 회사 디렉터리에 등록해야 하며 동시에 응용 프로그램을 사용할 각 조직의 디렉터리에도 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-303">Multi-Tenant: If you are building an application that can be used by users outside your organization, it must be registered in your company’s directory, but also must be registered in each organization’s directory that will be using the application.</span></span> <span data-ttu-id="5a79a-304">해당 디렉터리에서 응용 프로그램을 사용할 수 있게 만들려면 고객이 응용 프로그램에 동의할 수 있게 하는 등록 프로세스를 포함하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-304">To make your application available in their directory, you can include a sign-up process for your customers that enables them to consent to your application.</span></span> <span data-ttu-id="5a79a-305">사용자가 응용 프로그램에 등록할 때 응용 프로그램에 필요한 권한을 보여 주는 대화 상자가 나타난 다음 동의하는 옵션이 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-305">When they sign up for your application, they will be presented with a dialog that shows the permissions the application requires, and then the option to consent.</span></span> <span data-ttu-id="5a79a-306">필요한 권한에 따라, 다른 조직의 관리자가 동의해야 할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-306">Depending on the required permissions, an administrator in the other organization may be required to give consent.</span></span> <span data-ttu-id="5a79a-307">사용자 또는 관리자가 동의하면 응용 프로그램이 이들의 디렉터리에 등록됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-307">When the user or administrator consents, the application is registered in their directory.</span></span> <span data-ttu-id="5a79a-308">자세한 내용은 [Azure Active Directory와 응용 프로그램 통합](active-directory-integrating-applications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-308">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

<span data-ttu-id="5a79a-309">응용 프로그램을 등록한 후에는 OAuth 2.0 암시적 허용 프로토콜을 사용하도록 응용 프로그램을 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-309">After registering the application, it must be configured to use OAuth 2.0 Implicit Grant protocol.</span></span> <span data-ttu-id="5a79a-310">기본적으로 이 프로토콜은 응용 프로그램에 대해 사용하지 않도록 설정되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-310">By default, this protocol is disabled for applications.</span></span> <span data-ttu-id="5a79a-311">응용 프로그램에 대해 OAuth2 암시적 허용 프로토콜을 사용하려면 Azure Portal에서 해당 응용 프로그램 매니페스트를 편집하고 “oauth2AllowImplicitFlow” 값을 true로 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-311">To enable the OAuth2 Implicit Grant protocol for your application, edit its application manifest from the Azure Portal and set the “oauth2AllowImplicitFlow” value to true.</span></span> <span data-ttu-id="5a79a-312">자세한 지침은 [단일 페이지 응용 프로그램에 OAuth 2.0 암시적 허용 사용](active-directory-integrating-applications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-312">For detailed instructions, see [Enabling OAuth 2.0 Implicit Grant for Single Page Applications](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="5a79a-313">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="5a79a-313">Token Expiration</span></span>
<span data-ttu-id="5a79a-314">Azure AD에서 인증을 관리하는 데 ADAL.js를 사용하면 만료된 토큰을 쉽게 새로 고치고 응용 프로그램에서 호출할 수 있는 추가 웹 API 리소스에 대한 토큰을 가져오는 몇 가지 기능을 활용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-314">When you use ADAL.js to manage authentication with Azure AD, you benefit from several features that facilitate refreshing an expired token as well as getting tokens for additional web API resources that may be called by the application.</span></span> <span data-ttu-id="5a79a-315">사용자가 Azure AD에서 성공적으로 인증되면 브라우저와 Azure AD 사이에 쿠키를 통해 보안되는 세션이 사용자에 대해 설정됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-315">When the user successfully authenticates with Azure AD, a session secured by a cookie is established for the user between the browser and Azure AD.</span></span> <span data-ttu-id="5a79a-316">세션은 사용자와 서버에서 실행 중인 웹 응용 프로그램 사이가 아니라 사용자와 Azure AD 사이에 존재합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-316">It’s important to note that the session exists between the user and Azure AD and not between the user and the web application running on the server.</span></span> <span data-ttu-id="5a79a-317">토큰이 만료되면 ADAL.js가 이 세션을 사용하여 자동으로 다른 토큰을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-317">When a token expires, ADAL.js uses this session to silently obtain another token.</span></span> <span data-ttu-id="5a79a-318">이때 숨겨진 iFrame을 통해 OAuth 암시적 허용 프로토콜을 사용하여 요청을 보내고 받는 방법이 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-318">It does this by using a hidden iFrame to send and receive the request using the OAuth Implicit Grant protocol.</span></span> <span data-ttu-id="5a79a-319">ADAL.js는 또한 동일한 이 메커니즘을 사용하여 응용 프로그램이 호출하는 다른 웹 API 리소스에 대한 액세스 토큰을 자동으로 Azure AD에서 가져올 수 있습니다. 단, 이때 이 리소스가 CORS(크로스-원본 자원 공유)를 지원하며 사용자의 디렉터리에 등록되어 있어야 하고 로그인 도중에 요구되는 대로 사용자가 동의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-319">ADAL.js can also use this same mechanism to silently obtain access tokens from Azure AD for other web API resources that the application calls as long as these resources support cross-origin resource sharing (CORS), are registered in the user’s directory, and any required consent was given by the user during sign-in.</span></span>

### <a name="native-application-to-web-api"></a><span data-ttu-id="5a79a-320">네이티브 응용 프로그램-Web API</span><span class="sxs-lookup"><span data-stu-id="5a79a-320">Native Application to Web API</span></span>
<span data-ttu-id="5a79a-321">이 섹션에서는 사용자를 대신하여 웹 API를 호출하는 네이티브 응용 프로그램에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-321">This section describes a native application that calls a web API on behalf of a user.</span></span> <span data-ttu-id="5a79a-322">이 시나리오는 [OAuth 2.0 사양](http://tools.ietf.org/html/rfc6749)의 섹션 4.1에 설명된 대로 공용 클라이언트의 OAuth 2.0 인증 코드 권한 유형을 기반으로 구축되었습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-322">This scenario is built on the OAuth 2.0 authorization code grant type with a public client, as described in section 4.1 of the [OAuth 2.0 specification](http://tools.ietf.org/html/rfc6749).</span></span> <span data-ttu-id="5a79a-323">네이티브 응용 프로그램은 OAuth 2.0 프로토콜을 사용하여 사용자에 대한 액세스 토큰을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-323">The native application obtains an access token for the user by using the OAuth 2.0 protocol.</span></span> <span data-ttu-id="5a79a-324">그런 다음 이 액세스 토큰은 웹 API에 대한 요청으로 전송됩니다. 그러면 사용자가 인증되고 원하는 리소스가 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-324">This access token is then sent in the request to the web API, which authorizes the user and returns the desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="5a79a-325">다이어그램</span><span class="sxs-lookup"><span data-stu-id="5a79a-325">Diagram</span></span>
![네이티브 응용 프로그램-Web API 다이어그램](./media/active-directory-authentication-scenarios/native_app_to_web_api.png)

#### <a name="authentication-flow-for-native-application-to-api"></a><span data-ttu-id="5a79a-327">네이티브 응용 프로그램-API의 인증 흐름</span><span class="sxs-lookup"><span data-stu-id="5a79a-327">Authentication flow for native application to API</span></span>
#### <a name="description-of-protocol-flow"></a><span data-ttu-id="5a79a-328">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="5a79a-328">Description of Protocol Flow</span></span>
<span data-ttu-id="5a79a-329">AD 인증 라이브러리를 사용하는 경우 아래에서 설명하는 브라우저 팝업, 토큰 캐싱, 토큰 새로 고침 처리와 같은 프로토콜 세부 정보의 대부분은 자동으로 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-329">If you are using the AD Authentication Libraries, most of the protocol details described below are handled for you, such as the browser pop-up, token caching, and handling of refresh tokens.</span></span>

1. <span data-ttu-id="5a79a-330">네이티브 응용 프로그램이 브라우저 팝업을 사용하여 Azure AD의 권한 부여 끝점에 요청합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-330">Using a browser pop-up, the native application makes a request to the authorization endpoint in Azure AD.</span></span> <span data-ttu-id="5a79a-331">이 요청에는 응용 프로그램 ID 및 Azure Portal에 표시되는 네이티브 응용 프로그램의 리디렉션 URI, 그리고 웹 API에 대한 응용 프로그램 ID URI가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-331">This request includes the Application ID and the redirect URI of the native application as shown in the Azure Portal, and the application ID URI for the web API.</span></span> <span data-ttu-id="5a79a-332">사용자가 아직 로그인하지 않은 경우에는 로그인하라는 메시지가 다시 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-332">If the user hasn’t already signed in, they are prompted to sign in again</span></span>
2. <span data-ttu-id="5a79a-333">Azure AD가 사용자를 인증합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-333">Azure AD authenticates the user.</span></span> <span data-ttu-id="5a79a-334">다중 테넌트 응용 프로그램이며 응용 프로그램을 사용하는 데 동의가 필요한 경우에는 사용자가 아직 수행하지 않았다면 동의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-334">If it is a multi-tenant application and consent is required to use the application, the user will be required to consent if they haven’t already done so.</span></span> <span data-ttu-id="5a79a-335">동의한 후에 인증에 성공하면 Azure AD는 인증 코드 응답을 클라이언트 응용 프로그램 리디렉션 URI에 발급합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-335">After granting consent and upon successful authentication, Azure AD issues an authorization code response back to the client application’s redirect URI.</span></span>
3. <span data-ttu-id="5a79a-336">Azure AD가 인증 코드 응답을 리디렉션 URI에 발급하면 클라이언트 응용 프로그램이 브라우저 조작을 중지하고 응답에서 인증 코드를 추출합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-336">When Azure AD issues an authorization code response back to the redirect URI, the client application stops browser interaction and extracts the authorization code from the response.</span></span> <span data-ttu-id="5a79a-337">이 인증 코드를 사용하여 클라이언트 응용 프로그램은 인증 코드, 클라이언트 응용 프로그램에 대한 정보(응용 프로그램 ID 및 리디렉션 URI), 원하는 리소스(웹 API에 대한 응용 프로그램 ID URI) 등이 포함된 요청을 Azure AD의 토큰 끝점에 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-337">Using this authorization code, the client application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
4. <span data-ttu-id="5a79a-338">클라이언트 응용 프로그램 및 웹 API에 대한 정보와 인증 코드는 Azure AD에서 유효성이 검사됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-338">The authorization code and information about the client application and web API are validated by Azure AD.</span></span> <span data-ttu-id="5a79a-339">유효성 검사가 성공하면 Azure AD는 JWT 액세스 토큰과 JWT 새로 고침 토큰 등 두 가지 토큰을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-339">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span> <span data-ttu-id="5a79a-340">또한 Azure AD는 표시 이름 및 테넌트 ID와 같이 사용자에 대한 기본적인 정보를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-340">In addition, Azure AD returns basic information about the user, such as their display name and tenant ID.</span></span>
5. <span data-ttu-id="5a79a-341">HTTPS를 통해 클라이언트 응용 프로그램이 반환된 JWT 액세스 토큰을 사용해서 웹 API에 대한 요청의 권한 부여 헤더에 “전달자”를 지정한 JWT 문자열을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-341">Over HTTPS, the client application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="5a79a-342">그러면 웹 API에서 JWT 토큰의 유효성을 검사하여 유효성 검사가 성공하면 원하는 리소스를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-342">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>
6. <span data-ttu-id="5a79a-343">액세스 토큰이 만료되면 클라이언트 응용 프로그램에서 사용자가 다시 인증하도록 요구하는 오류가 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-343">When the access token expires, the client application will receive an error that indicates the user needs to authenticate again.</span></span> <span data-ttu-id="5a79a-344">응용 프로그램에 유효한 새로 고침 토큰이 있는 경우 사용자에게 다시 로그인하도록 하지 않고도 이 토큰을 사용하여 새 액세스 토큰을 획득할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-344">If the application has a valid refresh token, it can be used to acquire a new access token without prompting the user to sign in again.</span></span> <span data-ttu-id="5a79a-345">새로 고침 토큰이 만료되는 경우 응용 프로그램이 대화형으로 사용자를 다시 한 번 인증해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-345">If the refresh token expires, the application will need to interactively authenticate the user once again.</span></span>

> [!NOTE]
> <span data-ttu-id="5a79a-346">Azure AD에서 발급된 새로 고침 토큰은 여러 리소스에 액세스하는 데 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-346">The refresh token issued by Azure AD can be used to access multiple resources.</span></span> <span data-ttu-id="5a79a-347">예를 들어 두 개의 웹 API를 호출하는 권한을 가진 클라이언트 응용 프로그램이 있는 경우 새로 고침 토큰을 사용하여 다른 웹 API에 대한 액세스 토큰도 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-347">For example, if you have a client application that has permission to call two web APIs, the refresh token can be used to get an access token to the other web API as well.</span></span>
> 
> 

#### <a name="code-samples"></a><span data-ttu-id="5a79a-348">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="5a79a-348">Code Samples</span></span>
<span data-ttu-id="5a79a-349">네이티브 응용 프로그램-Web API 시나리오에 대한 코드 샘플을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-349">See the code samples for Native Application to Web API scenarios.</span></span> <span data-ttu-id="5a79a-350">또한 항상 새로운 샘플이 추가되므로, 자주 확인해 보세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-350">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="5a79a-351">[네이티브 응용 프로그램-Web API](active-directory-code-samples.md#native-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="5a79a-351">[Native Application to Web API](active-directory-code-samples.md#native-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="5a79a-352">등록</span><span class="sxs-lookup"><span data-stu-id="5a79a-352">Registering</span></span>
* <span data-ttu-id="5a79a-353">단일 테넌트: 네이티브 응용 프로그램과 웹 API를 모두 Azure AD의 동일한 디렉터리에 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-353">Single Tenant: Both the native application and the web API must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="5a79a-354">일련의 권한을 노출하도록 웹 API를 구성할 수 있으며, 이 방법은 해당 리소스에 대한 네이티브 응용 프로그램의 액세스를 제한하기 위해 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-354">The web API can be configured to expose a set of permissions, which are used to limit the native application’s access to its resources.</span></span> <span data-ttu-id="5a79a-355">그러면 클라이언트 응용 프로그램이 Azure Portal의 "다른 응용 프로그램에 대한 사용 권한" 드롭다운 메뉴에서 원하는 권한을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-355">The client application then selects the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span>
* <span data-ttu-id="5a79a-356">다중 테넌트: 먼저, 네이티브 응용 프로그램이 개발자 또는 게시자의 디렉터리에서만 등록됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-356">Multi-Tenant: First, the native application only ever registered in the developer or publisher’s directory.</span></span> <span data-ttu-id="5a79a-357">그런 다음, 네이티브 응용 프로그램이 작동에 필요한 권한을 나타내도록 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-357">Second, the native application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="5a79a-358">이러한 필수 권한 목록은 대상 디렉터리의 사용자나 관리자가 응용 프로그램에 동의하여 응용 프로그램을 조직에서 사용할 수 있도록 만들면 대화 상자에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-358">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="5a79a-359">일부 응용 프로그램에는 조직의 임의의 사용자가 동의할 수 있는 수준인 사용자 수준 권한만 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-359">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="5a79a-360">또 일부 응용 프로그램에는 조직의 사용자가 동의할 수 없는 수준인 관리자 수준 권한이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-360">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="5a79a-361">이 수준의 권한이 요구되는 응용 프로그램에 동의할 수 있는 사람은 디렉터리 관리자뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-361">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="5a79a-362">사용자 또는 관리자가 동의하면 웹 API만 이들의 디렉터리에 등록됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-362">When the user or administrator consents, only the web API is registered in their directory.</span></span> <span data-ttu-id="5a79a-363">자세한 내용은 [Azure Active Directory와 응용 프로그램 통합](active-directory-integrating-applications.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-363">For more information, see [Integrating Applications with Azure Active Directory](active-directory-integrating-applications.md).</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="5a79a-364">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="5a79a-364">Token Expiration</span></span>
<span data-ttu-id="5a79a-365">네이티브 응용 프로그램이 인증 코드를 사용하여 JWT 액세스 토큰을 가져오는 경우 JWT 새로 고침 토큰도 수신합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-365">When the native application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="5a79a-366">액세스 토큰이 만료되면 사용자에게 다시 로그인하도록 요구하지 않고 새로 고침 토큰을 사용하여 사용자를 다시 인증할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-366">When the access token expires, the refresh token can be used to re-authenticate the user without requiring them to sign in again.</span></span> <span data-ttu-id="5a79a-367">이 새로 고침 토큰을 사용하여 사용자를 인증하면 새 액세스 토큰 및 새로 고침 토큰을 얻습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-367">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

### <a name="web-application-to-web-api"></a><span data-ttu-id="5a79a-368">웹 응용 프로그램-Web API</span><span class="sxs-lookup"><span data-stu-id="5a79a-368">Web Application to Web API</span></span>
<span data-ttu-id="5a79a-369">이 섹션에서는 웹 API로부터 리소스를 가져와야 하는 웹 응용 프로그램에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-369">This section describes a web application that needs to get resources from a web API.</span></span> <span data-ttu-id="5a79a-370">이 시나리오에는 웹 응용 프로그램이 웹 API를 인증하고 호출하는 데 사용할 수 있는 두 가지 ID 형식, 즉 응용 프로그램 ID와 위임된 사용자 ID가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-370">In this scenario, there are two identity types that the web application can use to authenticate and call the web API: an application identity, or a delegated user identity.</span></span>

<span data-ttu-id="5a79a-371">*응용 프로그램 ID:* 이 시나리오에서는 OAuth 2.0 클라이언트 자격 증명 권한을 사용하여 응용 프로그램으로 인증하고 Web API에 액세스합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-371">*Application identity:* This scenario uses OAuth 2.0 client credentials grant to authenticate as the application and access the web API.</span></span> <span data-ttu-id="5a79a-372">응용 프로그램 ID를 사용할 때 웹 API는 사용자에 대한 정보를 수신하지 않기 때문에 웹 응용 프로그램의 호출만 검색할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-372">When using an application identity, the web API can only detect that the web application is calling it, as the web API does not receive any information about the user.</span></span> <span data-ttu-id="5a79a-373">응용 프로그램이 사용자에 대한 정보를 수신하는 경우 이 정보는 Azure AD에 의해 서명되지 않고 응용 프로그램 프로토콜을 통해 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-373">If the application receives information about the user, it will be sent via the application protocol, and it is not signed by Azure AD.</span></span> <span data-ttu-id="5a79a-374">웹 API는 웹 응용 프로그램이 사용자를 인증한 것으로 트러스트합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-374">The web API trusts that the web application authenticated the user.</span></span> <span data-ttu-id="5a79a-375">이런 이유로, 이 패턴을 신뢰할 수 있는 하위 시스템이라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-375">For this reason, this pattern is called a trusted subsystem.</span></span>

<span data-ttu-id="5a79a-376">*위임된 사용자 ID:* 기밀 클라이언트에서 OpenID Connect 및 OAuth 2.0 인증 코드 권한 등 두 가지 방법으로 시나리오를 완수할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-376">*Delegated user identity:* This scenario can be accomplished in two ways: OpenID Connect, and OAuth 2.0 authorization code grant with a confidential client.</span></span> <span data-ttu-id="5a79a-377">웹 응용 프로그램은 사용자에 대한 액세스 토큰을 가져옵니다. 그러면 사용자가 성공적으로 웹 응용 프로그램에 인증되었으며 웹 응용 프로그램이 웹 API 호출을 위한 위임된 사용자 ID를 획득했다는 것이 웹 API에 입증됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-377">The web application obtains an access token for the user, which proves to the web API that the user successfully authenticated to the web application and that the web application was able to obtain a delegated user identity to call the web API.</span></span> <span data-ttu-id="5a79a-378">이 액세스 토큰은 웹 API에 대한 요청으로 전송됩니다. 그러면 사용자가 인증되고 원하는 리소스가 반환됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-378">This access token is sent in the request to the web API, which authorizes the user and returns the desired resource.</span></span>

#### <a name="diagram"></a><span data-ttu-id="5a79a-379">다이어그램</span><span class="sxs-lookup"><span data-stu-id="5a79a-379">Diagram</span></span>
![웹 응용 프로그램-Web API 다이어그램](./media/active-directory-authentication-scenarios/web_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="5a79a-381">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="5a79a-381">Description of Protocol Flow</span></span>
<span data-ttu-id="5a79a-382">응용 프로그램 ID 및 위임된 사용자 ID 형식에 대해 아래 흐름에서 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-382">Both the application identity and delegated user identity types are discussed in the flow below.</span></span> <span data-ttu-id="5a79a-383">이들 ID 사이의 주요 차이점은 위임된 사용자 ID의 경우 먼저 인증 코드를 획득해야 사용자가 로그인하여 웹 API에 액세스할 수 있다는 점입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-383">The key difference between them is that the delegated user identity must first acquire an authorization code before the user can sign-in and gain access to the web API.</span></span>

##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="5a79a-384">OAuth 2.0 클라이언트 자격 증명 권한을 사용한 응용 프로그램 ID</span><span class="sxs-lookup"><span data-stu-id="5a79a-384">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="5a79a-385">사용자가 웹 응용 프로그램에서 Azure AD에 로그인합니다(위의 [웹 브라우저-웹 응용 프로그램](#web-browser-to-web-application) 참조).</span><span class="sxs-lookup"><span data-stu-id="5a79a-385">A user is signed in to Azure AD in the web application (see the [Web Browser to Web Application](#web-browser-to-web-application) above).</span></span>
2. <span data-ttu-id="5a79a-386">웹 응용 프로그램이 웹 API에 인증하고 원하는 리소스를 검색할 수 있도록 액세스 토큰을 획득해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-386">The web application needs to acquire an access token so that it can authenticate to the web API and retrieve the desired resource.</span></span> <span data-ttu-id="5a79a-387">Azure AD의 토큰 끝점에 요청하여 자격 증명, 응용 프로그램 ID, 웹 API의 응용 프로그램 ID URI를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-387">It makes a request to Azure AD’s token endpoint, providing the credential, Application ID, and web API’s application ID URI.</span></span>
3. <span data-ttu-id="5a79a-388">Azure AD가 응용 프로그램을 인증하고 웹 API를 호출하는 데 사용되는 JWT 액세스 토큰을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-388">Azure AD authenticates the application and returns a JWT access token that is used to call the web API.</span></span>
4. <span data-ttu-id="5a79a-389">HTTPS를 통해 웹 응용 프로그램이 반환된 JWT 액세스 토큰을 사용해서 웹 API에 대한 요청의 권한 부여 헤더에 “전달자”를 지정한 JWT 문자열을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-389">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="5a79a-390">그러면 웹 API에서 JWT 토큰의 유효성을 검사하여 유효성 검사가 성공하면 원하는 리소스를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-390">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-openid-connect"></a><span data-ttu-id="5a79a-391">OpenID Connect를 사용한 위임된 사용자 ID</span><span class="sxs-lookup"><span data-stu-id="5a79a-391">Delegated User Identity with OpenID Connect</span></span>
1. <span data-ttu-id="5a79a-392">사용자가 Azure AD를 사용하여 웹 응용 프로그램에 로그인합니다(위의 [웹 브라우저-웹 응용 프로그램](#web-browser-to-web-application) 섹션 참조).</span><span class="sxs-lookup"><span data-stu-id="5a79a-392">A user is signed in to a web application using Azure AD (see the [Web Browser to Web Application](#web-browser-to-web-application) section above).</span></span> <span data-ttu-id="5a79a-393">웹 응용 프로그램 사용자가 웹 응용 프로그램이 사용자를 대신하여 웹 API를 호출할 수 있도록 동의하지 않은 경우 동의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-393">If the user of the web application has not yet consented to allowing the web application to call the web API on its behalf, the user will need to consent.</span></span> <span data-ttu-id="5a79a-394">응용 프로그램에 필요한 권한이 표시됩니다. 이 권한 중 하나라도 관리자 수준 권한인 경우 디렉터리의 일반 사용자는 동의할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-394">The application will display the permissions it requires, and if any of these are administrator-level permissions, a normal user in the directory will not be able to consent.</span></span> <span data-ttu-id="5a79a-395">이러한 동의 프로세스는 단일 테넌트 응용 프로그램이 아니라 다중 테넌트 응용 프로그램에만 적용됩니다(응용 프로그램에 필수 권한이 이미 있으므로).</span><span class="sxs-lookup"><span data-stu-id="5a79a-395">This consent process only applies to multi-tenant applications, not single tenant applications, as the application will already have the necessary permissions.</span></span> <span data-ttu-id="5a79a-396">사용자가 로그인할 때 웹 응용 프로그램은 사용자에 대한 정보가 포함된 ID 토큰과 인증 코드를 수신했습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-396">When the user signed in, the web application received an ID token with information about the user, as well as an authorization code.</span></span>
2. <span data-ttu-id="5a79a-397">Azure AD에서 발급된 인증 코드를 사용하여 웹 응용 프로그램은 인증 코드, 클라이언트 응용 프로그램에 대한 정보(응용 프로그램 ID 및 리디렉션 URI), 원하는 리소스(웹 API에 대한 응용 프로그램 ID URI) 등이 포함된 요청을 Azure AD의 토큰 끝점에 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-397">Using the authorization code issued by Azure AD, the web application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
3. <span data-ttu-id="5a79a-398">웹 응용 프로그램 및 웹 API에 대한 정보와 인증 코드는 Azure AD에서 유효성이 검사됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-398">The authorization code and information about the web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="5a79a-399">유효성 검사가 성공하면 Azure AD는 JWT 액세스 토큰과 JWT 새로 고침 토큰 등 두 가지 토큰을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-399">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
4. <span data-ttu-id="5a79a-400">HTTPS를 통해 웹 응용 프로그램이 반환된 JWT 액세스 토큰을 사용해서 웹 API에 대한 요청의 권한 부여 헤더에 “전달자”를 지정한 JWT 문자열을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-400">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="5a79a-401">그러면 웹 API에서 JWT 토큰의 유효성을 검사하여 유효성 검사가 성공하면 원하는 리소스를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-401">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-authorization-code-grant"></a><span data-ttu-id="5a79a-402">OAuth 2.0 인증 코드 권한을 사용한 위임된 사용자 ID</span><span class="sxs-lookup"><span data-stu-id="5a79a-402">Delegated User Identity with OAuth 2.0 Authorization Code Grant</span></span>
1. <span data-ttu-id="5a79a-403">인증 메커니즘이 Azure AD와 독립적인 웹 응용 프로그램에 사용자가 이미 로그인되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-403">A user is already signed in to a web application, whose authentication mechanism is independent of Azure AD.</span></span>
2. <span data-ttu-id="5a79a-404">웹 응용 프로그램이 액세스 토큰을 획득하려면 인증 코드가 필요하므로, 웹 응용 프로그램이 브라우저를 통해 Azure AD의 권한 부여 끝점에 대한 요청을 발급하고 성공적인 인증 후에 응용 프로그램 ID 및 웹 응용 프로그램의 리디렉션 URI를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-404">The web application requires an authorization code to acquire an access token, so it issues a request through the browser to Azure AD’s authorization endpoint, providing the Application ID and redirect URI for the web application after successful authentication.</span></span> <span data-ttu-id="5a79a-405">사용자가 Azure AD에 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-405">The user signs in to Azure AD.</span></span>
3. <span data-ttu-id="5a79a-406">웹 응용 프로그램 사용자가 웹 응용 프로그램이 사용자를 대신하여 웹 API를 호출할 수 있도록 동의하지 않은 경우 동의해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-406">If the user of the web application has not yet consented to allowing the web application to call the web API on its behalf, the user will need to consent.</span></span> <span data-ttu-id="5a79a-407">응용 프로그램에 필요한 권한이 표시됩니다. 이 권한 중 하나라도 관리자 수준 권한인 경우 디렉터리의 일반 사용자는 동의할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-407">The application will display the permissions it requires, and if any of these are administrator-level permissions, a normal user in the directory will not be able to consent.</span></span> <span data-ttu-id="5a79a-408">이 동의는 단일 및 다중 테넌트 응용 프로그램 모두에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-408">This consent applies to both single and multi-tenant application.</span></span>  <span data-ttu-id="5a79a-409">단일 테넌트의 경우 관리자가 사용자 대신 관리자 동의를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-409">In the single tenant case, an admin can perform admin consent to consent on behalf of their users.</span></span>  <span data-ttu-id="5a79a-410">이 작업은 [Azure Portal](https://portal.azure.com)에서 `Grant Permissions` 단추를 사용하여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-410">This can be done using the `Grant Permissions` button in the [Azure Portal](https://portal.azure.com).</span></span> 
4. <span data-ttu-id="5a79a-411">사용자가 동의한 후에는 웹 응용 프로그램이 액세스 토큰을 획득하는 데 필요한 인증 코드를 수신합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-411">After the user has consented, the web application receives the authorization code that it needs to acquire an access token.</span></span>
5. <span data-ttu-id="5a79a-412">Azure AD에서 발급된 인증 코드를 사용하여 웹 응용 프로그램은 인증 코드, 클라이언트 응용 프로그램에 대한 정보(응용 프로그램 ID 및 리디렉션 URI), 원하는 리소스(웹 API에 대한 응용 프로그램 ID URI) 등이 포함된 요청을 Azure AD의 토큰 끝점에 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-412">Using the authorization code issued by Azure AD, the web application sends a request to Azure AD’s token endpoint that includes the authorization code, details about the client application (Application ID and redirect URI), and the desired resource (application ID URI for the web API).</span></span>
6. <span data-ttu-id="5a79a-413">웹 응용 프로그램 및 웹 API에 대한 정보와 인증 코드는 Azure AD에서 유효성이 검사됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-413">The authorization code and information about the web application and web API are validated by Azure AD.</span></span> <span data-ttu-id="5a79a-414">유효성 검사가 성공하면 Azure AD는 JWT 액세스 토큰과 JWT 새로 고침 토큰 등 두 가지 토큰을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-414">Upon successful validation, Azure AD returns two tokens: a JWT access token and a JWT refresh token.</span></span>
7. <span data-ttu-id="5a79a-415">HTTPS를 통해 웹 응용 프로그램이 반환된 JWT 액세스 토큰을 사용해서 웹 API에 대한 요청의 권한 부여 헤더에 “전달자”를 지정한 JWT 문자열을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-415">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="5a79a-416">그러면 웹 API에서 JWT 토큰의 유효성을 검사하여 유효성 검사가 성공하면 원하는 리소스를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-416">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="5a79a-417">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="5a79a-417">Code Samples</span></span>
<span data-ttu-id="5a79a-418">웹 응용 프로그램-Web API 시나리오에 대한 코드 샘플을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-418">See the code samples for Web Application to Web API scenarios.</span></span> <span data-ttu-id="5a79a-419">또한 항상 새로운 샘플이 추가되므로, 자주 확인해 보세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-419">And, check back frequently -- we add new samples all the time.</span></span> <span data-ttu-id="5a79a-420">웹 [응용 프로그램-Web API](active-directory-code-samples.md#web-application-to-web-api).</span><span class="sxs-lookup"><span data-stu-id="5a79a-420">Web [Application to Web API](active-directory-code-samples.md#web-application-to-web-api).</span></span>

#### <a name="registering"></a><span data-ttu-id="5a79a-421">등록</span><span class="sxs-lookup"><span data-stu-id="5a79a-421">Registering</span></span>
* <span data-ttu-id="5a79a-422">단일 테넌트: 응용 프로그램 ID 및 위임된 사용자 ID의 경우 모두, 웹 응용 프로그램과 웹 API를 Azure AD의 동일한 디렉터리에 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-422">Single Tenant: For both the application identity and delegated user identity cases, the web application and the web API must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="5a79a-423">일련의 권한을 노출하도록 웹 API를 구성할 수 있으며, 이 방법은 해당 리소스에 대한 웹 응용 프로그램의 액세스를 제한하기 위해 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-423">The web API can be configured to expose a set of permissions, which are used to limit the web application’s access to its resources.</span></span> <span data-ttu-id="5a79a-424">위임된 사용자 ID 형식을 사용 중인 경우 웹 응용 프로그램이 Azure Portal의 "다른 응용 프로그램에 대한 사용 권한" 드롭다운 메뉴에서 원하는 권한을 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-424">If a delegated user identity type is being used, the web application needs to select the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span> <span data-ttu-id="5a79a-425">이 단계는 응용 프로그램 ID 형식을 사용 중일 때는 필요 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-425">This step is not required if the application identity type is being used.</span></span>
* <span data-ttu-id="5a79a-426">다중 테넌트: 먼저, 웹 응용 프로그램이 작동에 필요한 권한을 나타내도록 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-426">Multi-Tenant: First, the web application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="5a79a-427">이러한 필수 권한 목록은 대상 디렉터리의 사용자나 관리자가 응용 프로그램에 동의하여 응용 프로그램을 조직에서 사용할 수 있도록 만들면 대화 상자에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-427">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="5a79a-428">일부 응용 프로그램에는 조직의 임의의 사용자가 동의할 수 있는 수준인 사용자 수준 권한만 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-428">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="5a79a-429">또 일부 응용 프로그램에는 조직의 사용자가 동의할 수 없는 수준인 관리자 수준 권한이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-429">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="5a79a-430">이 수준의 권한이 요구되는 응용 프로그램에 동의할 수 있는 사람은 디렉터리 관리자뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-430">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="5a79a-431">사용자 또는 관리자가 동의하면 웹 응용 프로그램과 웹 API가 모두 이들의 디렉터리에 등록됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-431">When the user or administrator consents, the web application and the web API are both registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="5a79a-432">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="5a79a-432">Token Expiration</span></span>
<span data-ttu-id="5a79a-433">웹 응용 프로그램이 인증 코드를 사용하여 JWT 액세스 토큰을 가져오는 경우 JWT 새로 고침 토큰도 수신합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-433">When the web application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="5a79a-434">액세스 토큰이 만료되면 사용자에게 다시 로그인하도록 요구하지 않고 새로 고침 토큰을 사용하여 사용자를 다시 인증할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-434">When the access token expires, the refresh token can be used to re-authenticate the user without requiring them to sign in again.</span></span> <span data-ttu-id="5a79a-435">이 새로 고침 토큰을 사용하여 사용자를 인증하면 새 액세스 토큰 및 새로 고침 토큰을 얻습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-435">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

### <a name="daemon-or-server-application-to-web-api"></a><span data-ttu-id="5a79a-436">디먼 또는 서버 응용 프로그램-Web API</span><span class="sxs-lookup"><span data-stu-id="5a79a-436">Daemon or Server Application to Web API</span></span>
<span data-ttu-id="5a79a-437">이 섹션에서는 웹 API로부터 리소스를 가져와야 하는 디먼 또는 서버 응용 프로그램에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-437">This section describes a daemon or server application that needs to get resources from a web API.</span></span> <span data-ttu-id="5a79a-438">이 섹션에 적용되는 두 가지 하위 시나리오가 있습니다. 하나는 웹 API를 호출하는 데 필요한 디먼으로, OAuth 2.0 클라이언트 자격 증명 권한 유형을 기반으로 구축되었으며 다른 하나는 웹 API를 호출해야 하는 서버 응용 프로그램(예: 웹 API)으로, OAuth 2.0 대리 초안 사양을 기반으로 구축되었습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-438">There are two sub-scenarios that apply to this section: A daemon that needs to call a web API, built on OAuth 2.0 client credentials grant type; and a server application (such as a web API) that needs to call a web API, built on OAuth 2.0 On-Behalf-Of draft specification.</span></span>

<span data-ttu-id="5a79a-439">디먼 응용 프로그램이 웹 API를 호출해야 하는 시나리오의 경우 이해해야 할 사항이 몇 가지 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-439">For the scenario when a daemon application needs to call a web API, it’s important to understand a few things.</span></span> <span data-ttu-id="5a79a-440">첫째, 디먼 응용 프로그램에서 사용자 조작이 불가능하므로, 이 응용 프로그램에 고유한 ID가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-440">First, user interaction is not possible with a daemon application, which requires the application to have its own identity.</span></span> <span data-ttu-id="5a79a-441">디먼 응용 프로그램의 예로는 일괄 처리 작업 또는 백그라운드에서 실행되는 운영 체제 서비스가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-441">An example of a daemon application is a batch job, or an operating system service running in the background.</span></span> <span data-ttu-id="5a79a-442">이러한 종류의 응용 프로그램은 응용 프로그램 ID를 사용하고 응용 프로그램 ID, 자격 증명(암호 또는 인증서), Azure AD에 대한 응용 프로그램 ID URI 등을 제시하여 액세스 토큰을 요청합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-442">This type of application requests an access token by using its application identity and presenting its Application ID, credential (password or certificate), and application ID URI to Azure AD.</span></span> <span data-ttu-id="5a79a-443">성공적인 인증 후에 디먼은 Azure AD로부터 액세스 토큰을 수신하며, 그런 다음 이 액세스 토큰을 사용하여 웹 API를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-443">After successful authentication, the daemon receives an access token from Azure AD, which is then used to call the web API.</span></span>

<span data-ttu-id="5a79a-444">서버 응용 프로그램이 API를 호출해야 하는 시나리오의 경우 예제를 사용하면 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-444">For the scenario when a server application needs to call a web API, it’s helpful to use an example.</span></span> <span data-ttu-id="5a79a-445">사용자가 네이티브 응용 프로그램에 대해 인증했으며 이 네이티브 응용 프로그램이 웹 API를 호출해야 한다고 가정하겠습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-445">Imagine that a user has authenticated on a native application, and this native application needs to call a web API.</span></span> <span data-ttu-id="5a79a-446">Azure AD는 웹 API를 호출하는 JWT 액세스 토큰을 발급합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-446">Azure AD issues a JWT access token to call the web API.</span></span> <span data-ttu-id="5a79a-447">웹 API는 다른 다운스트림 웹 API를 호출해야 하는 경우 대리 흐름을 사용하여 사용자의 ID를 위임하고 두 번째 계층 웹 API에 대해 인증할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-447">If the web API needs to call another downstream web API, it can use the on-behalf-of flow to delegate the user’s identity and authenticate to the second-tier web API.</span></span>

#### <a name="diagram"></a><span data-ttu-id="5a79a-448">다이어그램</span><span class="sxs-lookup"><span data-stu-id="5a79a-448">Diagram</span></span>
![디먼 또는 서버 응용 프로그램-Web API 다이어그램](./media/active-directory-authentication-scenarios/daemon_server_app_to_web_api.png)

#### <a name="description-of-protocol-flow"></a><span data-ttu-id="5a79a-450">프로토콜 흐름 설명</span><span class="sxs-lookup"><span data-stu-id="5a79a-450">Description of Protocol Flow</span></span>
##### <a name="application-identity-with-oauth-20-client-credentials-grant"></a><span data-ttu-id="5a79a-451">OAuth 2.0 클라이언트 자격 증명 권한을 사용한 응용 프로그램 ID</span><span class="sxs-lookup"><span data-stu-id="5a79a-451">Application Identity with OAuth 2.0 Client Credentials Grant</span></span>
1. <span data-ttu-id="5a79a-452">먼저, 서버 응용 프로그램이 대화형 로그온 대화 상자와 같은 사용자 개입 없이 자체적으로 Azure AD에서 인증해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-452">First, the server application needs to authenticate with Azure AD as itself, without any human interaction such as an interactive sign-on dialog.</span></span> <span data-ttu-id="5a79a-453">Azure AD의 토큰 끝점에 요청하여 자격 증명, 응용 프로그램 ID, 응용 프로그램 ID URI를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-453">It makes a request to Azure AD’s token endpoint, providing the credential, Application ID, and application ID URI.</span></span>
2. <span data-ttu-id="5a79a-454">Azure AD가 응용 프로그램을 인증하고 웹 API를 호출하는 데 사용되는 JWT 액세스 토큰을 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-454">Azure AD authenticates the application and returns a JWT access token that is used to call the web API.</span></span>
3. <span data-ttu-id="5a79a-455">HTTPS를 통해 웹 응용 프로그램이 반환된 JWT 액세스 토큰을 사용해서 웹 API에 대한 요청의 권한 부여 헤더에 “전달자”를 지정한 JWT 문자열을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-455">Over HTTPS, the web application uses the returned JWT access token to add the JWT string with a “Bearer” designation in the Authorization header of the request to the web API.</span></span> <span data-ttu-id="5a79a-456">그러면 웹 API에서 JWT 토큰의 유효성을 검사하여 유효성 검사가 성공하면 원하는 리소스를 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-456">The web API then validates the JWT token, and if validation is successful, returns the desired resource.</span></span>

##### <a name="delegated-user-identity-with-oauth-20-on-behalf-of-draft-specification"></a><span data-ttu-id="5a79a-457">OAuth 2.0 대리 초안 사양을 사용한 위임된 사용자 ID</span><span class="sxs-lookup"><span data-stu-id="5a79a-457">Delegated User Identity with OAuth 2.0 On-Behalf-Of Draft Specification</span></span>
<span data-ttu-id="5a79a-458">아래에서 설명하는 흐름에서는 사용자가 다른 응용 프로그램(예: 네이티브 응용 프로그램)에 대해 인증했으며 해당 사용자 ID를 사용해서 첫 번째 계층 웹 API에 대한 액세스 토큰을 획득했다고 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-458">The flow discussed below assumes that a user has been authenticated on another application (such as a native application), and their user identity has been used to acquire an access token to the first-tier web API.</span></span>

1. <span data-ttu-id="5a79a-459">네이티브 응용 프로그램이 첫 번째 계층 웹 API에 액세스 토큰을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-459">The native application sends the access token to the first-tier web API.</span></span>
2. <span data-ttu-id="5a79a-460">첫 번째 계층 웹 API가 Azure AD의 토큰 끝점에 요청을 보내 응용 프로그램 ID와 자격 증명 및 사용자의 액세스 토큰을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-460">The first-tier web API sends a request to Azure AD’s token endpoint, providing its Application ID and credentials, as well as the user’s access token.</span></span> <span data-ttu-id="5a79a-461">또 이 요청은 웹 API가 원래 사용자를 대신하여 다운스트림 웹 API를 호출하는 새 토큰을 요청한다는 것을 나타내는 on_behalf_of 매개 변수와 함께 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-461">In addition, the request is sent with an on_behalf_of parameter that indicates the web API is requesting new tokens to call a downstream web API on behalf of the original user.</span></span>
3. <span data-ttu-id="5a79a-462">Azure AD가 첫 번째 계층 웹 API에 두 번째 웹 API에 액세스할 권한이 있는지 확인하고 요청의 유효성을 검사하여 JWT 액세스 토큰 및 JWT 새로 고침 토큰을 첫 번째 계층 웹 API에 반환합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-462">Azure AD verifies that the first-tier web API has permissions to access the second-tier web API and validates the request, returning a JWT access token and a JWT refresh token to the first-tier web API.</span></span>
4. <span data-ttu-id="5a79a-463">HTTPS를 통해 첫 번째 계층 웹 API가 요청의 권한 부여 헤더에 토큰 문자열을 추가하여 두 번째 계층 웹 API를 호출합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-463">Over HTTPS, the first-tier web API then calls the second-tier web API by appending the token string in the Authorization header in the request.</span></span> <span data-ttu-id="5a79a-464">액세스 토큰 및 새로 고침 토큰이 유효한 경우 첫 번째 계층 웹 API는 두 번째 계층 웹 API를 계속 호출할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-464">The first-tier web API can continue to call the second-tier web API as long as the access token and refresh tokens are valid.</span></span>

#### <a name="code-samples"></a><span data-ttu-id="5a79a-465">코드 샘플</span><span class="sxs-lookup"><span data-stu-id="5a79a-465">Code Samples</span></span>
<span data-ttu-id="5a79a-466">디먼 또는 서버 응용 프로그램-Web API 시나리오에 대한 코드 샘플을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-466">See the code samples for Daemon or Server Application to Web API scenarios.</span></span> <span data-ttu-id="5a79a-467">또한 항상 새로운 샘플이 추가되므로, 자주 확인해 보세요.</span><span class="sxs-lookup"><span data-stu-id="5a79a-467">And, check back frequently -- we add new samples all the time.</span></span> [<span data-ttu-id="5a79a-468">서버 또는 디먼 응용 프로그램-Web API</span><span class="sxs-lookup"><span data-stu-id="5a79a-468">Server or Daemon Application to Web API</span></span>](active-directory-code-samples.md#server-or-daemon-application-to-web-api)

#### <a name="registering"></a><span data-ttu-id="5a79a-469">등록</span><span class="sxs-lookup"><span data-stu-id="5a79a-469">Registering</span></span>
* <span data-ttu-id="5a79a-470">단일 테넌트: 응용 프로그램 ID 및 위임된 사용자 ID의 경우 모두, 디먼 또는 서버 응용 프로그램을 Azure AD의 동일한 디렉터리에 등록해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-470">Single Tenant: For both the application identity and delegated user identity cases, the daemon or server application must be registered in the same directory in Azure AD.</span></span> <span data-ttu-id="5a79a-471">일련의 권한을 노출하도록 웹 API를 구성할 수 있으며, 이 방법은 해당 리소스에 대한 디먼 또는 서버의 액세스를 제한하기 위해 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-471">The web API can be configured to expose a set of permissions, which are used to limit the daemon or server’s access to its resources.</span></span> <span data-ttu-id="5a79a-472">위임된 사용자 ID 형식을 사용 중인 경우 서버 응용 프로그램이 Azure Portal의 "다른 응용 프로그램에 대한 사용 권한" 드롭다운 메뉴에서 원하는 권한을 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-472">If a delegated user identity type is being used, the server application needs to select the desired permissions from the “Permissions to Other Applications” drop-down menu in the Azure Portal.</span></span> <span data-ttu-id="5a79a-473">이 단계는 응용 프로그램 ID 형식을 사용 중일 때는 필요 없습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-473">This step is not required if the application identity type is being used.</span></span>
* <span data-ttu-id="5a79a-474">다중 테넌트: 먼저, 디먼 또는 서버 응용 프로그램이 작동에 필요한 권한을 나타내도록 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-474">Multi-Tenant: First, the daemon or server application is configured to indicate the permissions it requires to be functional.</span></span> <span data-ttu-id="5a79a-475">이러한 필수 권한 목록은 대상 디렉터리의 사용자나 관리자가 응용 프로그램에 동의하여 응용 프로그램을 조직에서 사용할 수 있도록 만들면 대화 상자에 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-475">This list of required permissions is shown in a dialog when a user or administrator in the destination directory gives consent to the application, which makes it available to their organization.</span></span> <span data-ttu-id="5a79a-476">일부 응용 프로그램에는 조직의 임의의 사용자가 동의할 수 있는 수준인 사용자 수준 권한만 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-476">Some applications require just user-level permissions, which any user in the organization can consent to.</span></span> <span data-ttu-id="5a79a-477">또 일부 응용 프로그램에는 조직의 사용자가 동의할 수 없는 수준인 관리자 수준 권한이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-477">Other applications require administrator-level permissions, which a user in the organization cannot consent to.</span></span> <span data-ttu-id="5a79a-478">이 수준의 권한이 요구되는 응용 프로그램에 동의할 수 있는 사람은 디렉터리 관리자뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-478">Only a directory administrator can give consent to applications that require this level of permissions.</span></span> <span data-ttu-id="5a79a-479">사용자 또는 관리자가 동의하면 웹 응용 프로그램과 웹 API가 모두 이들의 디렉터리에 등록됩니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-479">When the user or administrator consents, both of the web APIs are registered in their directory.</span></span>

#### <a name="token-expiration"></a><span data-ttu-id="5a79a-480">토큰 만료</span><span class="sxs-lookup"><span data-stu-id="5a79a-480">Token Expiration</span></span>
<span data-ttu-id="5a79a-481">첫 번째 응용 프로그램이 인증 코드를 사용하여 JWT 액세스 토큰을 가져오는 경우 JWT 새로 고침 토큰도 수신합니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-481">When the first application uses its authorization code to get a JWT access token, it also receives a JWT refresh token.</span></span> <span data-ttu-id="5a79a-482">액세스 토큰이 만료되면 사용자에게 자격 증명을 요구하지 않고 새로 고침 토큰을 사용하여 사용자를 다시 인증할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-482">When the access token expires, the refresh token can be used to re-authenticate the user without prompting for credentials.</span></span> <span data-ttu-id="5a79a-483">이 새로 고침 토큰을 사용하여 사용자를 인증하면 새 액세스 토큰 및 새로 고침 토큰을 얻습니다.</span><span class="sxs-lookup"><span data-stu-id="5a79a-483">This refresh token is then used to authenticate the user, which results in a new access token and refresh token.</span></span>

## <a name="see-also"></a><span data-ttu-id="5a79a-484">참고 항목</span><span class="sxs-lookup"><span data-stu-id="5a79a-484">See Also</span></span>
[<span data-ttu-id="5a79a-485">Azure Active Directory 개발자 가이드</span><span class="sxs-lookup"><span data-stu-id="5a79a-485">Azure Active Directory Developer's Guide</span></span>](active-directory-developers-guide.md)

[<span data-ttu-id="5a79a-486">Azure Active Directory 코드 샘플</span><span class="sxs-lookup"><span data-stu-id="5a79a-486">Azure Active Directory Code Samples</span></span>](active-directory-code-samples.md)

[<span data-ttu-id="5a79a-487">Azure AD의 서명 키 롤오버에 대한 중요한 정보</span><span class="sxs-lookup"><span data-stu-id="5a79a-487">Important Information About Signing Key Rollover in Azure AD</span></span>](active-directory-signing-key-rollover.md)

[<span data-ttu-id="5a79a-488">Azure AD의 OAuth 2.0</span><span class="sxs-lookup"><span data-stu-id="5a79a-488">OAuth 2.0 in Azure AD</span></span>](https://msdn.microsoft.com/library/azure/dn645545.aspx)

