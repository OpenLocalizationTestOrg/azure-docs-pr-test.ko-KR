---
title: "온-프레미스 앱에 대한 조건부 액세스 - Azure AD | Microsoft Docs"
description: "Azure AD 응용 프로그램 프록시를 사용하여, 게시하는 응용 프로그램에 대해 조건부 액세스를 설정하는 방법을 설명합니다."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: 2e97722b-eb4e-4078-b607-9fed210d8a0f
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/23/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: it-pro; oldportal
ms.openlocfilehash: 463946256f9e335fa6d98fc904835e5c3dc2725e
ms.sourcegitcommit: 02e69c4a9d17645633357fe3d46677c2ff22c85a
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/03/2017
---
# <a name="working-with-conditional-access-in-azure-ad-application-proxy"></a><span data-ttu-id="ad3b2-103">Azure AD 응용 프로그램 프록시에서 조건부 액세스 작업</span><span class="sxs-lookup"><span data-stu-id="ad3b2-103">Working with conditional access in Azure AD Application Proxy</span></span>

>[!NOTE]
><span data-ttu-id="ad3b2-104">이 문서는 사용 중지 중인 Azure 클래식 포털에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-104">This article applies to the Azure classic portal, which is being retired.</span></span> <span data-ttu-id="ad3b2-105">[Azure Portal](https://portal.azure.com)을 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-105">We recommend that you use the [Azure portal](https://portal.azure.com).</span></span> <span data-ttu-id="ad3b2-106">Azure Portal에서 응용 프로그램 프록시 앱은 다른 모든 SaaS 앱과 동일한 조건부 액세스 기능을 갖습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-106">In the Azure portal, Application Proxy apps have the same conditional access features as any other SaaS app.</span></span> <span data-ttu-id="ad3b2-107">조건부 액세스에 대한 자세한 내용은 [Azure Active Directory에서 조건부 액세스 시작](active-directory-conditional-access-azure-portal-get-started.md)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-107">To learn more about conditional access, see [Get started with conditional access in Azure Active Directory](active-directory-conditional-access-azure-portal-get-started.md).</span></span>

<span data-ttu-id="ad3b2-108">응용 프로그램 프록시를 사용하여 게시된 응용 프로그램에 대한 조건부 액세스 권한을 부여하도록 액세스 규칙을 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-108">You can configure access rules to grant conditional access to applications published using Application Proxy.</span></span> <span data-ttu-id="ad3b2-109">다음을 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-109">This enables you to:</span></span>

* <span data-ttu-id="ad3b2-110">응용 프로그램 당 Multi-Factor Authentication 요구</span><span class="sxs-lookup"><span data-stu-id="ad3b2-110">Require multi-factor authentication per application</span></span>
* <span data-ttu-id="ad3b2-111">사용자가 직장이 아닌 경우 Multi-Factor Authentication 요구</span><span class="sxs-lookup"><span data-stu-id="ad3b2-111">Require multi-factor authentication only when users are not at work</span></span>
* <span data-ttu-id="ad3b2-112">사용자가 직장이 아닌 경우 응용 프로그램에 액세스를 차단</span><span class="sxs-lookup"><span data-stu-id="ad3b2-112">Block users from accessing the application when they are not at work</span></span>

<span data-ttu-id="ad3b2-113">모든 사용자 및 그룹 또는 특정 사용자 및 그룹에만 이러한 규칙을 적용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-113">These rules can be applied to all users and groups or only to specific users and groups.</span></span> <span data-ttu-id="ad3b2-114">기본적으로 규칙은 응용 프로그램에 대한 액세스 권한이 있는 모든 사용자에게 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-114">By default the rule applies to all users who have access to the application.</span></span> <span data-ttu-id="ad3b2-115">그러나 규칙은 지정된 보안 그룹의 구성원인 사용자로만 제한될 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-115">However the rule can also be restricted to users that are members of specified security groups.</span></span>  

<span data-ttu-id="ad3b2-116">사용자가 OAuth 2.0, OpenID Connect, SAML 또는 WS-Federation을 사용하는 페더레이션된 응용 프로그램에 액세스할 때 액세스 규칙이 평가됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-116">Access rules are evaluated when a user accesses a federated application that uses OAuth 2.0, OpenID Connect, SAML, or WS-Federation.</span></span> <span data-ttu-id="ad3b2-117">또한 액세스 규칙은 새로 고침 토큰을 사용하여 액세스 토큰을 확보할 때 OAuth 2.0 및 OpenID Connect로 평가됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-117">In addition, access rules are evaluated with OAuth 2.0 and OpenID Connect when a refresh token is used to acquire an access token.</span></span>

## <a name="conditional-access-prerequisites"></a><span data-ttu-id="ad3b2-118">조건부 액세스 필수 조건</span><span class="sxs-lookup"><span data-stu-id="ad3b2-118">Conditional access prerequisites</span></span>
* <span data-ttu-id="ad3b2-119">Azure Active Directory Premium 구독</span><span class="sxs-lookup"><span data-stu-id="ad3b2-119">Subscription to Azure Active Directory Premium</span></span>
* <span data-ttu-id="ad3b2-120">페더레이션 또는 관리되는 Azure Active Directory 테넌트</span><span class="sxs-lookup"><span data-stu-id="ad3b2-120">A federated or managed Azure Active Directory tenant</span></span>
* <span data-ttu-id="ad3b2-121">페더레이션된 테넌트가 MFA(Multi-Factor Authentication) 요구</span><span class="sxs-lookup"><span data-stu-id="ad3b2-121">Federated tenants require multi-factor authentication (MFA)</span></span>  
    ![액세스 규칙 구성 - 다단계 인증 필요](./media/active-directory-application-proxy-conditional-access/application-proxy-conditional-access.png)

## <a name="configure-per-application-multi-factor-authentication"></a><span data-ttu-id="ad3b2-123">응용 프로그램당 Multi-Factor Authentication 구성</span><span class="sxs-lookup"><span data-stu-id="ad3b2-123">Configure per-application multi-factor authentication</span></span>
1. <span data-ttu-id="ad3b2-124">Azure 클래식 포털에서 관리자로 로그인합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-124">Sign in as an administrator in the Azure classic portal.</span></span>
2. <span data-ttu-id="ad3b2-125">Active Directory로 이동하여 응용 프로그램 프록시를 사용하도록 설정할 디렉터리를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-125">Go to Active Directory and select the directory in which you want to enable Application Proxy.</span></span>
3. <span data-ttu-id="ad3b2-126">**응용 프로그램**을 클릭하고 아래로 스크롤하여 **액세스 규칙** 섹션을 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-126">Click **Applications** and scroll down to the **Access Rules** section.</span></span> <span data-ttu-id="ad3b2-127">액세스 규칙 섹션은 페더레이션 인증을 사용하는 응용 프로그램 프록시를 사용하여 게시된 응용 프로그램에 대해서만 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-127">The access rules section only appears for applications published using Application Proxy that use federated authentication.</span></span>
4. <span data-ttu-id="ad3b2-128">**액세스 규칙 사용**을 **켜기**로 설정하여 규칙을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-128">Enable the rule by selecting **Enable Access Rules** to **On**.</span></span>
5. <span data-ttu-id="ad3b2-129">규칙을 적용할 사용자 및 그룹을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-129">Specify the users and groups to whom the rules apply.</span></span> <span data-ttu-id="ad3b2-130">**그룹 추가** 단추를 사용하여 액세스 규칙이 적용되는 하나 이상의 그룹을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-130">Use the **Add Group** button to select one or more groups to which the access rule applies.</span></span> <span data-ttu-id="ad3b2-131">이 대화 상자는 선택한 그룹을 제거하는 데 사용할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-131">This dialog can also be used to remove selected groups.</span></span>  <span data-ttu-id="ad3b2-132">그룹에 적용할 규칙이 선택되면 액세스 규칙이 지정된 보안 그룹 중 하나에 속한 사용자에 대해서만 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-132">When the rules are selected to apply to groups, the access rules are enforced only for users that belong to one of the specified security groups.</span></span>  

   * <span data-ttu-id="ad3b2-133">규칙에서 보안 그룹을 명시적으로 제외하려면 **제외** 를 선택하고 하나 이상의 그룹을 지정합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-133">To explicitly exclude security groups from the rule, check **Except** and specify one or more groups.</span></span> <span data-ttu-id="ad3b2-134">제외 목록에 있는 그룹 회원인 사용자는 Multi-Factor Authentication을 수행하지 않아도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-134">Users who are members of a group in the Except list are not required to perform multi-factor authentication.</span></span>  
   * <span data-ttu-id="ad3b2-135">사용자별 Multi-Factor Authentication을 사용하여 사용자가 구성된 경우 이 설정이 응용 프로그램 Multi-Factor Authentication 규칙보다 우선적으로 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-135">If a user was configured using the per-user multi-factor authentication feature, this setting takes precedence over the application multi-factor authentication rules.</span></span> <span data-ttu-id="ad3b2-136">사용자별 Multi-Factor Authentication을 위해 구성된 사용자는 응용 프로그램의 Multi-Factor Authentication 규칙에서 제외되더라도 Multi-Factor Authentication을 수행해야 함을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-136">A user who has been configured for per-user multi-factor authentication is required to perform multi-factor authentication even if they have been exempted from the application's multi-factor authentication rules.</span></span> <span data-ttu-id="ad3b2-137">[Multi-Factor Authentication 및 사용자별 설정](../multi-factor-authentication/multi-factor-authentication.md)에 대해 자세히 알아보세요.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-137">Learn more about [multi-factor authentication and per-user settings](../multi-factor-authentication/multi-factor-authentication.md).</span></span>
6. <span data-ttu-id="ad3b2-138">설정하려는 액세스 규칙을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-138">Select the access rule you want to set:</span></span>

   * <span data-ttu-id="ad3b2-139">**Multi-Factor Authentication 필요**: 액세스 규칙이 적용되는 사용자는 규칙이 적용되는 응용 프로그램에 액세스하기 전에 Multi-Factor Authentication을 완료해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-139">**Require Multi-factor authentication**: Users to whom access rules apply are required to complete multi-factor authentication before accessing the application to which the rule applies.</span></span>
   * <span data-ttu-id="ad3b2-140">**직장이 아닐 때 Multi-Factor Authentication 요구**: 신뢰되는 IP 주소에서 응용 프로그램에 액세스하고자 하는 사용자는 Multi-Factor Authentication을 수행하지 않아도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-140">**Require Multi-factor authentication when not at work**: Users trying to access the application from a trusted IP address will not be required to perform multi-factor authentication.</span></span> <span data-ttu-id="ad3b2-141">신뢰되는 IP 주소 범위는 Multi-Factor Authentication 설정 페이지에서 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-141">The trusted IP address ranges can be configured on the multi-factor authentication settings page.</span></span>
   * <span data-ttu-id="ad3b2-142">**직장이 아닐 때 액세스 차단**: 회사 네트워크 외부에서 응용 프로그램에 액세스하고자 하는 사용자는 응용 프로그램에 액세스할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-142">**Block access when not at work**: Users trying to access the application from outside your corporate network will not be able to access the application.</span></span>

## <a name="configuring-mfa-for-federation-services"></a><span data-ttu-id="ad3b2-143">페더레이션 서비스에 대한 MFA 구성</span><span class="sxs-lookup"><span data-stu-id="ad3b2-143">Configuring MFA for federation services</span></span>
<span data-ttu-id="ad3b2-144">페더레이션된 테넌트의 경우 MFA(다단계 인증)를 Azure Active Directory 또는 온-프레미스 AD FS 서버에서 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-144">For federated tenants, multi-factor authentication (MFA) may be performed by Azure Active Directory or by the on-premises AD FS server.</span></span> <span data-ttu-id="ad3b2-145">기본적으로 MFA는 Azure Active Directory에서 호스팅되는 모든 페이지에 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-145">By default, MFA occurs on any page hosted by Azure Active Directory.</span></span> <span data-ttu-id="ad3b2-146">MFA 온-프레미스를 구성하려면 Windows PowerShell을 실행하고 Azure AD 모듈을 설정하려면 SupportsMFA 속성을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-146">To configure MFA on-premises, run Windows PowerShell and use the –SupportsMFA property to set the Azure AD module.</span></span>

<span data-ttu-id="ad3b2-147">다음 예제는 contoso.com 테넌트에서 [Set-MsolDomainFederationSettings cmdlet](https://msdn.microsoft.com/library/azure/dn194088.aspx)을 사용하여 온-프레미스 MFA를 사용하도록 설정하는 방법을 보여 줍니다. `Set-MsolDomainFederationSettings -DomainName contoso.com -SupportsMFA $true `</span><span class="sxs-lookup"><span data-stu-id="ad3b2-147">The following example shows how to enable on-premises MFA by using the [Set-MsolDomainFederationSettings cmdlet](https://msdn.microsoft.com/library/azure/dn194088.aspx) on the contoso.com tenant: `Set-MsolDomainFederationSettings -DomainName contoso.com -SupportsMFA $true `</span></span>

<span data-ttu-id="ad3b2-148">이 플래그를 설정하는 것 외에도 페더레이션 테넌트 AD FS 인스턴스에서 다단계 인증을 수행하도록 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-148">In addition to setting this flag, the federated tenant AD FS instance must be configured to perform multi-factor authentication.</span></span> <span data-ttu-id="ad3b2-149">[온-프레미스에 Microsoft Azure Multi-Factor Authentication을 배포](../multi-factor-authentication/multi-factor-authentication-get-started-server.md)하기 위한 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="ad3b2-149">Follow the instructions for [deploying Microsoft Azure multi-factor authentication on-premises](../multi-factor-authentication/multi-factor-authentication-get-started-server.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="ad3b2-150">참고 항목</span><span class="sxs-lookup"><span data-stu-id="ad3b2-150">See also</span></span>
* [<span data-ttu-id="ad3b2-151">클레임 인식 응용 프로그램으로 작업</span><span class="sxs-lookup"><span data-stu-id="ad3b2-151">Working with claims aware applications</span></span>](active-directory-application-proxy-claims-aware-apps.md)
* [<span data-ttu-id="ad3b2-152">응용 프로그램 프록시를 사용하여 응용 프로그램 게시</span><span class="sxs-lookup"><span data-stu-id="ad3b2-152">Publish applications with Application Proxy</span></span>](active-directory-application-proxy-publish.md)
* [<span data-ttu-id="ad3b2-153">Single Sign-On 사용</span><span class="sxs-lookup"><span data-stu-id="ad3b2-153">Enable single-sign on</span></span>](active-directory-application-proxy-sso-using-kcd.md)
* [<span data-ttu-id="ad3b2-154">고유한 도메인 이름을 사용하여 응용 프로그램 게시</span><span class="sxs-lookup"><span data-stu-id="ad3b2-154">Publish applications using your own domain name</span></span>](active-directory-application-proxy-custom-domains.md)

<span data-ttu-id="ad3b2-155">최신 뉴스 및 업데이트는 [응용 프로그램 프록시 블로그](http://blogs.technet.com/b/applicationproxyblog/)</span><span class="sxs-lookup"><span data-stu-id="ad3b2-155">For the latest news and updates, check out the [Application Proxy blog](http://blogs.technet.com/b/applicationproxyblog/)</span></span>
