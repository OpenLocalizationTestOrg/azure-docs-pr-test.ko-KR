---
title: "Windows Server Active directory 배포 Azure 가상 컴퓨터에서 aaaGuidelines | Microsoft Docs"
description: "알아보려면 어떻게 해야 toodeploy AD 도메인 서비스 및 온-프레미스로 AD 페더레이션 서비스에서 Azure 가상 컴퓨터 작동 방식을 알고 있는 경우."
services: active-directory
documentationcenter: 
author: femila
manager: femila
editor: 
ms.assetid: 04df4c46-e6b6-4754-960a-57b823d617fa
ms.service: active-directory
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: identity
ms.date: 07/26/2017
ms.author: femila
ms.openlocfilehash: 9ad5a5f138a6402cbb656d9160545846051207b6
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="guidelines-for-deploying-windows-server-active-directory-on-azure-virtual-machines"></a><span data-ttu-id="fe649-103">Azure 가상 컴퓨터에 Windows Server Active Directory를 배포하기 위한 지침</span><span class="sxs-lookup"><span data-stu-id="fe649-103">Guidelines for deploying Windows Server Active Directory on Azure virtual machines</span></span>
<span data-ttu-id="fe649-104">이 문서에서는 hello 및 중요 한 차이점 배포 Windows Server Active Directory 도메인 서비스 (AD DS) Active Directory Federation Services (AD FS) 온-프레미스와 Microsoft Azure 가상 컴퓨터에 배포 하기를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-104">This article explains hello important differences between deploying Windows Server Active Directory Domain Services (AD DS) and Active Directory Federation Services (AD FS) on-premises versus deploying them on Microsoft Azure virtual machines.</span></span>

## <a name="scope-and-audience"></a><span data-ttu-id="fe649-105">범위 및 대상</span><span class="sxs-lookup"><span data-stu-id="fe649-105">Scope and audience</span></span>
<span data-ttu-id="fe649-106">hello 문서 경험이 이미 Active Directory 온-프레미스 배포에 대 한 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-106">hello article is intended for those already experienced with deploying Active Directory on-premises.</span></span> <span data-ttu-id="fe649-107">Hello Microsoft Azure 가상 컴퓨터/Azure 가상 네트워크와 기존의 온-프레미스 Active Directory 배포에서 Active Directory 배포의 차이점을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-107">It covers hello differences between deploying Active Directory on Microsoft Azure virtual machines/Azure virtual networks and traditional on-premises Active Directory deployments.</span></span> <span data-ttu-id="fe649-108">Azure 가상 컴퓨터와 Azure 가상 네트워크는 인프라-as a Service (IaaS) 조직 tooleverage 컴퓨팅 hello 클라우드에서 리소스에 대 한 제공 포함 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-108">Azure virtual machines and Azure virtual networks are part of an Infrastructure-as-a-Service (IaaS) offering for organizations tooleverage computing resources in hello cloud.</span></span>

<span data-ttu-id="fe649-109">필요한 AD 배포에 익숙하지 않은, 참조 hello [AD DS 배포 가이드](https://technet.microsoft.com/library/cc753963) 또는 [AD FS 배포 계획](https://technet.microsoft.com/library/dn151324.aspx) 적절 하 게 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-109">For those that are not familiar with AD deployment, see hello [AD DS Deployment Guide](https://technet.microsoft.com/library/cc753963) or [Plan your AD FS deployment](https://technet.microsoft.com/library/dn151324.aspx) as appropriate.</span></span>

<span data-ttu-id="fe649-110">이 문서 hello 판독기 hello 다음 개념에 잘 알고 있다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-110">This article assumes that hello reader is familiar with hello following concepts:</span></span>

* <span data-ttu-id="fe649-111">Windows Server AD DS 배포 및 관리</span><span class="sxs-lookup"><span data-stu-id="fe649-111">Windows Server AD DS deployment and management</span></span>
* <span data-ttu-id="fe649-112">배포 하 고 DNS toosupport Windows Server AD DS 인프라 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-112">Deployment and configuration of DNS toosupport a Windows Server AD DS infrastructure</span></span>
* <span data-ttu-id="fe649-113">Windows Server AD FS 배포 및 관리</span><span class="sxs-lookup"><span data-stu-id="fe649-113">Windows Server AD FS deployment and management</span></span>
* <span data-ttu-id="fe649-114">Windows Server AD FS 토큰을 사용할 수 있는 신뢰 당사자 응용 프로그램(웹 사이트 및 웹 서비스) 배포, 구성 및 관리</span><span class="sxs-lookup"><span data-stu-id="fe649-114">Deploying, configuring, and managing relying party applications (websites and web services) that can consume Windows Server AD FS tokens</span></span>
* <span data-ttu-id="fe649-115">어떻게 tooconfigure a 가상 컴퓨터, 가상 같은 일반적인 가상 컴퓨터 개념, 디스크 및 가상 네트워크</span><span class="sxs-lookup"><span data-stu-id="fe649-115">General virtual machine concepts, such as how tooconfigure a virtual machine, virtual disks, and virtual networks</span></span>

<span data-ttu-id="fe649-116">이 문서에 Windows Server AD DS 또는 AD FS가 부분적으로 온-프레미스로 배포 하 고 Azure 가상 컴퓨터에 부분적으로 배포 된 하이브리드 배포 시나리오에 대 한 hello 요구 사항을 강조 표시 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-116">This article highlights hello requirements for a hybrid deployment scenario in which Windows Server AD DS or AD FS are partly deployed on-premises and partly deployed on Azure virtual machines.</span></span> <span data-ttu-id="fe649-117">hello 먼저 살펴봅니다 hello의 중요 한 차이점과 디자인 및 배포에 영향을 주는 중요 한 결정 사항을와 온 프레미스 Azure 가상 컴퓨터에 Windows Server AD DS 및 AD FS를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-117">hello document first covers hello critical differences between running Windows Server AD DS and AD FS on Azure virtual machines versus on-premises, and important decision points that affect design and deployment.</span></span> <span data-ttu-id="fe649-118">hello 용지 hello 나머지 각 hello 의사 결정 사항을 좀 더 자세하게 및 어떻게 tooapply hello 지침 toovarious 배포 시나리오에 대 한 지침을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-118">hello rest of hello paper explains guidelines for each of hello decision points in more detail, and how tooapply hello guidelines toovarious deployment scenarios.</span></span>

<span data-ttu-id="fe649-119">이 문서에서의 hello 구성을 설명 하지 않습니다 [Azure Active Directory](http://azure.microsoft.com/services/active-directory/), 클라우드 응용 프로그램에 대 한 id 관리 및 액세스 제어 기능을 제공 하는 REST 기반 서비스인 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-119">This article does not discuss hello configuration of [Azure Active Directory](http://azure.microsoft.com/services/active-directory/), which is a REST-based service that provides identity management and access control capabilities for cloud applications.</span></span> <span data-ttu-id="fe649-120">그러나 Azure Active Directory (Azure AD) 및 Windows Server AD DS는 디자인 된 toowork 함께 tooprovide id 및 액세스 관리 솔루션을 지금의 하이브리드 IT 환경과 최신 응용 프로그램입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-120">Azure Active Directory (Azure AD) and Windows Server AD DS are, however, designed toowork together tooprovide an identity and access management solution for today’s hybrid IT environments and modern applications.</span></span> <span data-ttu-id="fe649-121">toohelp은 hello 차이 및 Windows Server AD DS와 Azure AD 간의 관계를 이해, hello 다음을 고려 하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-121">toohelp understand hello differences and relationships between Windows Server AD DS and Azure AD, consider hello following:</span></span>

1. <span data-ttu-id="fe649-122">발생할 수 있습니다 Windows Server AD DS hello 클라우드의 Azure 가상 컴퓨터에 Azure tooextend를 사용 하는 경우 온-프레미스 데이터 센터 hello 클라우드입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-122">You might run Windows Server AD DS in hello cloud on Azure virtual machines when you are using Azure tooextend your on-premises datacenter into hello cloud.</span></span>
2. <span data-ttu-id="fe649-123">사용자가 single sign on tooSoftware-as a Service (SaaS) 응용 프로그램 toogive Azure AD를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-123">You might use Azure AD toogive your users single sign-on tooSoftware-as-a-Service (SaaS) applications.</span></span> <span data-ttu-id="fe649-124">이 기술은 Microsoft Office 365에서 사용되며, Azure 또는 기타 클라우드 플랫폼에서 실행하는 응용 프로그램에서도 이 기술을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-124">Microsoft Office 365 uses this technology, for example, and applications running on Azure or other cloud platforms can also use it.</span></span>
3. <span data-ttu-id="fe649-125">Facebook, Google, Microsoft 및 hello 클라우드 또는 온-프레미스에서 호스트 되는 다른 identity 공급자 tooapplications의 id를 사용 하 여 Azure AD (액세스 제어 서비스) toolet 사용자 로그인을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-125">You might use Azure AD (its Access Control Service) toolet users sign in using identities from Facebook, Google, Microsoft, and other identity providers tooapplications that are hosted in hello cloud or on-premises.</span></span>

<span data-ttu-id="fe649-126">이러한 차이점에 대한 자세한 내용은 [Azure ID](fundamentals-identity.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-126">For more information about these differences, see [Azure Identity](fundamentals-identity.md).</span></span>

## <a name="related-resources"></a><span data-ttu-id="fe649-127">관련 리소스</span><span class="sxs-lookup"><span data-stu-id="fe649-127">Related resources</span></span>
<span data-ttu-id="fe649-128">다운로드 하 고 hello를 실행 하면 [Azure 가상 컴퓨터 준비 평가](https://www.microsoft.com/download/details.aspx?id=40898)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-128">You may download and run hello [Azure Virtual Machine Readiness Assessment](https://www.microsoft.com/download/details.aspx?id=40898).</span></span> <span data-ttu-id="fe649-129">hello 평가 자동으로 온-프레미스 환경 검사 하 고 hello에 따라 사용자 지정된 보고서를 생성 지침 있는이 항목 toohelp hello 환경 tooAzure 마이그레이션할 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-129">hello assessment will automatically inspect your on-premises environment and generate a customized report based on hello guidance found in this topic toohelp you migrate hello environment tooAzure.</span></span>

<span data-ttu-id="fe649-130">먼저 검토 하는 hello 자습서, 가이드 및 비디오 hello 다음 항목을 포함 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-130">We recommend that you also first review hello tutorials, guides, and videos that cover hello following topics:</span></span>

* [<span data-ttu-id="fe649-131">Hello Azure 포털에서에서 클라우드 전용 가상 네트워크 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-131">Configure a Cloud-Only Virtual Network in hello Azure Portal</span></span>](../virtual-network/virtual-networks-create-vnet-arm-pportal.md)
* [<span data-ttu-id="fe649-132">Hello Azure 포털에서에서 사이트 간 VPN 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-132">Configure a Site-to-Site VPN in hello Azure Portal</span></span>](../vpn-gateway/vpn-gateway-site-to-site-create.md)
* [<span data-ttu-id="fe649-133">Azure 가상 네트워크에 새 Active Directory 포리스트 설치</span><span class="sxs-lookup"><span data-stu-id="fe649-133">Install a new Active Directory forest on an Azure virtual network</span></span>](active-directory-new-forest-virtual-machine.md)
* [<span data-ttu-id="fe649-134">Azure에서 복제 Active Directory 도메인 컨트롤러 설치</span><span class="sxs-lookup"><span data-stu-id="fe649-134">Install a replica Active Directory domain controller on Azure</span></span>](active-directory-install-replica-active-directory-domain-controller.md)
* [<span data-ttu-id="fe649-135">Microsoft Azure IT Pro IaaS: (01) 가상 컴퓨터 기본 사항(영문)</span><span class="sxs-lookup"><span data-stu-id="fe649-135">Microsoft Azure IT Pro IaaS: (01) Virtual Machine Fundamentals</span></span>](https://channel9.msdn.com/Series/Windows-Azure-IT-Pro-IaaS/01)
* [<span data-ttu-id="fe649-136">Microsoft Azure IT Pro IaaS: (05) 가상 네트워크 및 프레미스 간 연결 만들기(영문)</span><span class="sxs-lookup"><span data-stu-id="fe649-136">Microsoft Azure IT Pro IaaS: (05) Creating Virtual Networks and Cross-Premises Connectivity</span></span>](https://channel9.msdn.com/Series/Windows-Azure-IT-Pro-IaaS/05)

## <a name="introduction"></a><span data-ttu-id="fe649-137">소개</span><span class="sxs-lookup"><span data-stu-id="fe649-137">Introduction</span></span>
<span data-ttu-id="fe649-138">hello Azure 가상 컴퓨터에 Windows Server Active Directory를 배포 하기 위한 기본적인 요구 사항은 거의 다르지에서 온-프레미스 가상 컴퓨터 (및, toosome 정도 까지는 물리적 컴퓨터)에 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-138">hello fundamental requirements for deploying Windows Server Active Directory on Azure virtual machines differ very little from deploying it in on-premises virtual machines (and, toosome extent, physical machines).</span></span> <span data-ttu-id="fe649-139">예를 들어 hello에서 Azure 가상 컴퓨터에 배포 하는 hello 도메인 컨트롤러 (Dc)는 복제본의 기존 Windows Server AD DS의 경우 온-프레미스 회사 도메인/포리스트에서 이면 hello Azure 배포 수 대부분 hello에 동일한 방식으로 있습니다 다른 모든 추가 Windows Server Active Directory 사이트를 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-139">For example, in hello case of Windows Server AD DS, if hello domain controllers (DCs) that you deploy on Azure virtual machines are replicas in an existing on-premises corporate domain/forest, then hello Azure deployment can largely be treated in hello same way as you might treat any other additional Windows Server Active Directory site.</span></span> <span data-ttu-id="fe649-140">즉, Windows Server AD ds에서 만든 사이트 서브넷을 정의 합니다, 그리고 hello 서브넷 toothat 사이트를 연결 하 고 적절 한 사이트 링크를 사용 하 여 tooother 사이트를 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-140">That is, subnets must be defined in Windows Server AD DS, a site created, hello subnets linked toothat site, and connected tooother sites using appropriate site-links.</span></span> <span data-ttu-id="fe649-141">그러나 어느 정도 차이가 있는 일반적인 tooall Azure 배포를 지 toohello 특정 배포 시나리오에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-141">There are, however, some differences that are common tooall Azure deployments and some that vary according toohello specific deployment scenario.</span></span> <span data-ttu-id="fe649-142">두 가지 근본적인 차이점은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-142">Two fundamental differences are outlined below:</span></span>

### <a name="azure-virtual-machines-may-need-connectivity-toohello-on-premises-corporate-network"></a><span data-ttu-id="fe649-143">Azure 가상 컴퓨터 연결 toohello 온-프레미스 회사 네트워크를 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-143">Azure virtual machines may need connectivity toohello on-premises corporate network.</span></span>
<span data-ttu-id="fe649-144">Azure 가상 컴퓨터 백 tooan 온-프레미스 회사 네트워크에 필요한 사이트-사이트를 포함 하는 Azure 가상 네트워크에서 또는 사이트와 지점 간 가상 사설망 (VPN) 연결 구성 요소 수 tooseamlessly Azure 가상 컴퓨터를 연결 하 고 온-프레미스 컴퓨터입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-144">Connecting Azure virtual machines back tooan on-premises corporate network requires Azure virtual network, which includes a site-to-site or site-to-point virtual private network (VPN) component able tooseamlessly connect Azure virtual machines and on-premises machines.</span></span> <span data-ttu-id="fe649-145">온-프레미스 도메인 구성원 컴퓨터 tooaccess Azure 가상 컴퓨터에 독점적으로 호스팅되는 도메인 컨트롤러를 소유한 Windows Server Active Directory 도메인이 VPN 구성 요소를 사용 하면 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-145">This VPN component could also enable on-premises domain member computers tooaccess a Windows Server Active Directory domain whose domain controllers are hosted exclusively on Azure virtual machines.</span></span> <span data-ttu-id="fe649-146">하지만 것이 중요 한 toonote, 경우 hello VPN 실패 하는지, 인증 및 Windows Server Active Directory에 종속 된 다른 작업이 실패할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-146">It is important toonote, though, that if hello VPN fails, authentication and other operations that depend on Windows Server Active Directory will also fail.</span></span> <span data-ttu-id="fe649-147">사용자가 기존 캐시 된 자격 증명을 사용할 모든 피어 투 피어에 수 toosign 수 있습니다 또는 toobe 발급 되거나 유효 하지 않게 된 아직는 티켓에 대 한 클라이언트와 서버 간 인증 시도 실패 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-147">While users may be able toosign in using existing cached credentials, all peer-to-peer or client-to-server authentication attempts for which tickets have yet toobe issued or have become stale will fail.</span></span>

<span data-ttu-id="fe649-148">참조 [가상 네트워크](http://azure.microsoft.com/documentation/services/virtual-network/) 비롯 한 단계별 자습서의 목록과 데모 비디오에 대 한 [hello Azure 포털에서에서 사이트 간 VPN 구성](../vpn-gateway/vpn-gateway-site-to-site-create.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-148">See [Virtual Network](http://azure.microsoft.com/documentation/services/virtual-network/) for a demonstration video and a list of step-by-step tutorials, including [Configure a Site-to-Site VPN in hello Azure portal](../vpn-gateway/vpn-gateway-site-to-site-create.md).</span></span>

> [!NOTE]
> <span data-ttu-id="fe649-149">또한 온-프레미스 네트워크와 연결되지 않은 Azure 가상 네트워크에 Windows Server Active Directory를 배포할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-149">You can also deploy Windows Server Active Directory on an Azure virtual network that does not have connectivity with an on-premises network.</span></span> <span data-ttu-id="fe649-150">그러나이 항목의 hello 지침은 Azure 가상 네트워크 주소 지정 기능을 필수 tooWindows 서버 IP를 제공 하기 때문에 사용 된다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-150">hello guidelines in this topic, however, assume that an Azure virtual network is used because it provides IP addressing capabilities that are essential tooWindows Server.</span></span>
> 
> 

### <a name="static-ip-addresses-must-be-configured-with-azure-powershell"></a><span data-ttu-id="fe649-151">고정 IP 주소는 Azure PowerShell을 통해 구성되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-151">Static IP addresses must be configured with Azure PowerShell.</span></span>
<span data-ttu-id="fe649-152">동적 주소는 기본적으로 할당 되지만 hello Set-azurestaticvnetip cmdlet tooassign 고정 IP 주소를 대신 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-152">Dynamic addresses are allocated by default, but use hello Set-AzureStaticVNetIP cmdlet tooassign a static IP address instead.</span></span> <span data-ttu-id="fe649-153">서비스 복구 및 VM 종료/다시 시작을 통해 유지되는 고정 IP 주소를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-153">That sets a static IP address that will persist through service healing and VM shutdown/restart.</span></span> <span data-ttu-id="fe649-154">자세한 내용은 [가상 컴퓨터에 대한 고정 내부 IP 주소](http://azure.microsoft.com/blog/static-internal-ip-address-for-virtual-machines/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-154">For more information, see [Static internal IP address for virtual machines](http://azure.microsoft.com/blog/static-internal-ip-address-for-virtual-machines/).</span></span>

## <span data-ttu-id="fe649-155"><a name="BKMK_Glossary"></a>용어 및 정의</span><span class="sxs-lookup"><span data-stu-id="fe649-155"><a name="BKMK_Glossary"></a>Terms and definitions</span></span>
<span data-ttu-id="fe649-156">hello 다음은이 문서에서 참조 되는 다양 한 Azure 기술에 대 한 조건의 부분 목록입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-156">hello following is a non-exhaustive list of terms for various Azure technologies which will be referenced in this article.</span></span>

* <span data-ttu-id="fe649-157">**Azure 가상 컴퓨터**: toodeploy Vm 거의 모두 실행 일반적으로 고객을 허용 하는 Azure의 hello IaaS 제공 온-프레미스 서버 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-157">**Azure virtual machines**: hello IaaS offering in Azure that allows customers toodeploy VMs running nearly any traditionally on-premises server workload.</span></span>
* <span data-ttu-id="fe649-158">**Azure 가상 네트워크**: hello 고객이 만들고 Azure에서 가상 네트워크를 관리 하며 안전 하 게 연결할 수 있게 해 주는 Azure 서비스에에서 직접 tootheir 네트워킹 온-프레미스 네트워킹 인프라 가상 사설망 (VPN)을 사용 하 여 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-158">**Azure virtual network**: hello networking service in Azure that lets customers create and manage virtual networks in Azure and securely link them tootheir own on-premises networking infrastructure by using a virtual private network (VPN).</span></span>
* <span data-ttu-id="fe649-159">**가상 IP 주소**:는 인터넷 연결 IP 주소 즉 바인딩되지 않았습니다 tooa 특정 컴퓨터나 네트워크 인터페이스 카드입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-159">**Virtual IP address**: An internet-facing IP address that is not bound tooa specific computer or network interface card.</span></span> <span data-ttu-id="fe649-160">클라우드 서비스는 리디렉션된 tooan Azure VM 네트워크 트래픽을 받기 위한 가상 IP 주소를 할당 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-160">Cloud services are assigned a virtual IP address for receiving network traffic which is redirected tooan Azure VM.</span></span> <span data-ttu-id="fe649-161">가상 IP 주소는 하나 이상의 Azure 가상 컴퓨터를 포함할 수 있는 클라우드 서비스의 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-161">A virtual IP address is a property of a cloud-service which can contain one or more Azure virtual machines.</span></span> <span data-ttu-id="fe649-162">또한 Azure 가상 네트워크는 하나 이상의 클라우드 서비스를 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-162">Also note that an Azure virtual network can contain one or more cloud-services.</span></span> <span data-ttu-id="fe649-163">가상 IP 주소는 기본 부하 분산 기능을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-163">Virtual IP addresses provide native load-balancing capabilities.</span></span>
* <span data-ttu-id="fe649-164">**동적 IP 주소**: hello IP 주소는 내부 전용입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-164">**Dynamic IP address**: This is hello IP address that is internal only.</span></span> <span data-ttu-id="fe649-165">구성 해야으로 고정 IP 주소 (사용 하 여 hello Set-azurestaticvnetip cmdlet) hello DC/DNS 서버 역할을 호스트 하는 Vm에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-165">It should be configured as a static IP address (by using hello Set-AzureStaticVNetIP cmdlet) for VMs that host hello DC/DNS server roles.</span></span>
* <span data-ttu-id="fe649-166">**서비스 복구가**: Azure 자동으로 반환 하는 서비스 tooa 실행 상태 다시 해당 hello 서비스를 검색 한 후 hello 프로세스가 실패 했습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-166">**Service healing**: hello process in which Azure automatically returns a service tooa running state again after it detects that hello service has failed.</span></span> <span data-ttu-id="fe649-167">서비스 복구는 가용성과 복원 력을 지 원하는 Azure의 hello 측면 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-167">Service healing is one of hello aspects of Azure that supports availability and resiliency.</span></span> <span data-ttu-id="fe649-168">낮지만 VM에서 실행 되는 DC에 대 한 복구 인시던트 이후의 서비스는 hello 결과 유사한 tooan 계획 되지 않은 부팅 하지만 몇 가지 부작용:</span><span class="sxs-lookup"><span data-stu-id="fe649-168">While unlikely, hello result following a service healing incident for a DC running on a VM is similar tooan unplanned reboot, but has a few side-effects:</span></span>
  
  * <span data-ttu-id="fe649-169">hello VM의에서 가상 네트워크 어댑터 hello 바뀝니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-169">hello virtual network adapter in hello VM will change</span></span>
  * <span data-ttu-id="fe649-170">hello hello 가상 네트워크 어댑터의 MAC 주소 바뀝니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-170">hello MAC address of hello virtual network adapter will change</span></span>
  * <span data-ttu-id="fe649-171">hello hello VM의 프로세서/c p U ID 바뀝니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-171">hello Processor/CPU ID of hello VM will change</span></span>
  * <span data-ttu-id="fe649-172">hello hello 가상 네트워크 어댑터의 IP 구성 변경 되지 않습니다 hello VM의 가상 네트워크에 연결 된 tooa 올바르고 hello VM의 IP 주소는 정적 하기만 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-172">hello IP configuration of hello virtual network adapter will not change as long as hello VM is attached tooa virtual network and hello VM’s IP address is static.</span></span>
  
  <span data-ttu-id="fe649-173">이러한 동작에 영향을 주지 Windows Server Active Directory 않기 때문에 hello MAC 주소 또는 프로세서/c p U ID에 의존 하지 않고 Azure에서 모든 Windows Server Active Directory 배포는 위에서 설명한 대로 Azure 가상 네트워크에서 실행 되는 toobe 것이 좋습니다. .</span><span class="sxs-lookup"><span data-stu-id="fe649-173">None of these behaviors affect Windows Server Active Directory because it has no dependency on hello MAC address or Processor/CPU ID, and all Windows Server Active Directory deployments on Azure are recommended toobe run on an Azure virtual network as outlined above.</span></span>

## <a name="is-it-safe-toovirtualize-windows-server-active-directory-domain-controllers"></a><span data-ttu-id="fe649-174">Windows Server Active Directory 도메인 컨트롤러 안전 toovirtualize 입니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-174">Is it safe toovirtualize Windows Server Active Directory domain controllers?</span></span>
<span data-ttu-id="fe649-175">Azure 가상 컴퓨터에 Windows Server Active Directory Dc를 배포는 주체 toohello 동일한 지침 가상 컴퓨터에서 온-프레미스로 Dc를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-175">Deploying Windows Server Active Directory DCs on Azure virtual machines is subject toohello same guidelines as running DCs on-premises in a virtual machine.</span></span> <span data-ttu-id="fe649-176">DC 백업 및 복원을 위한 지침을 따르는 한 가상화된 DC 실행은 안전한 사례입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-176">Running virtualized DCs is a safe practice as long as guidelines for backing up and restoring DCs are followed.</span></span> <span data-ttu-id="fe649-177">가상화된 DC를 실행하기 위한 제약 조건 및 지침에 대한 자세한 내용은 [Hyper-V에서 도메인 컨트롤러 실행](https://technet.microsoft.com/library/dd363553)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-177">For more information about constraints and guidelines for running virtualized DCs, see [Running Domain Controllers in Hyper-V](https://technet.microsoft.com/library/dd363553).</span></span>

<span data-ttu-id="fe649-178">하이퍼바이저는 Windows Server Active Directory를 비롯한 대부분의 분산된 시스템에 문제가 발생할 수 있는 기술을 제공 또는 하찮아 보이게 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-178">Hypervisors provide or trivialize technologies that can cause problems for many distributed systems, including Windows Server Active Directory.</span></span> <span data-ttu-id="fe649-179">예를 들어 물리적 서버에 디스크를 복제 하거나 San 등의 사용을 비롯 한 서버의 tooroll 백 hello 상태 지원 되지 않는 메서드를 사용할 수 있습니다 하지만 실제 서버에서 이렇게 하는 하이퍼바이저에서 가상 컴퓨터 스냅숏을 복원 보다 훨씬 더 어렵습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-179">For example, on a physical server, you can clone a disk or use unsupported methods tooroll back hello state of a server, including using SANs and so on, but doing that on a physical server is much harder than restoring a virtual machine snapshot in a hypervisor.</span></span> <span data-ttu-id="fe649-180">발생할 수 있는 hello 동일한 기능을 제공 하는 azure 바람직하지 않은 조건을 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-180">Azure offers functionality that can result in hello same undesirable condition.</span></span> <span data-ttu-id="fe649-181">예를 들어 Dc의 VHD 파일 복원 하면 비슷한 상황이 toousing 스냅숏 복원 기능 발생할 수 있기 때문에 정기 백업 미 실시를 수행 하는 대신 복사 하지 마세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-181">For example, you should not copy VHD files of DCs instead of performing regular backups because restoring them can result in a similar situation toousing snapshot restore features.</span></span>

<span data-ttu-id="fe649-182">이러한 롤백은 Dc 간 toopermanently 분기 상태를 일으킬 수 있는 USN 거품에 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-182">Such rollbacks introduce USN bubbles that can lead toopermanently divergent states between DCs.</span></span> <span data-ttu-id="fe649-183">다음과 같은 문제가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-183">That can cause issues such as:</span></span>

* <span data-ttu-id="fe649-184">느린 개체</span><span class="sxs-lookup"><span data-stu-id="fe649-184">Lingering objects</span></span>
* <span data-ttu-id="fe649-185">암호 불일치</span><span class="sxs-lookup"><span data-stu-id="fe649-185">Inconsistent passwords</span></span>
* <span data-ttu-id="fe649-186">특성 값 불일치</span><span class="sxs-lookup"><span data-stu-id="fe649-186">Inconsistent attribute values</span></span>
* <span data-ttu-id="fe649-187">Hello 스키마 마스터가 롤백되는 경우의 스키마 불일치</span><span class="sxs-lookup"><span data-stu-id="fe649-187">Schema mismatches if hello schema master is rolled back</span></span>

<span data-ttu-id="fe649-188">DC에 영향을 주는 방법에 대한 자세한 내용은 [USN 및 USN 롤백](https://technet.microsoft.com/library/virtual_active_directory_domain_controller_virtualization_hyperv.aspx#usn_and_usn_rollback)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-188">For more information about how DCs are impacted, see [USN and USN Rollback](https://technet.microsoft.com/library/virtual_active_directory_domain_controller_virtualization_hyperv.aspx#usn_and_usn_rollback).</span></span>

<span data-ttu-id="fe649-189">Windows Server 2012 부터는 [tooAD DS에에서 추가 세이프 가드가 작성 되며](https://technet.microsoft.com/library/hh831734.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-189">Beginning with Windows Server 2012, [additional safeguards are built in tooAD DS](https://technet.microsoft.com/library/hh831734.aspx).</span></span> <span data-ttu-id="fe649-190">이러한 보호 기능 hello 기본 하이퍼바이저 플랫폼이 Vm-generationid를 지 원하는 hello 앞에서 언급 한 문제 로부터 가상화 된 도메인 컨트롤러를 보호를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-190">These safeguards help protect virtualized domain controllers against hello aforementioned problems, as long as hello underlying hypervisor platform supports VM-GenerationID.</span></span> <span data-ttu-id="fe649-191">Azure는 Windows Server 2012 또는 나중에 Azure 가상 컴퓨터를 실행 하는 도메인 컨트롤러 hello 추가 세이프 가드가 있음을 의미 있는 Vm-generationid를 지원 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-191">Azure supports VM-GenerationID, which means that domain controllers that run Windows Server 2012 or later on Azure virtual machines have hello additional safeguards.</span></span>

> [!NOTE]
> <span data-ttu-id="fe649-192">종료 하 고 hello를 사용 하는 대신 hello 게스트 운영 체제 내에서 Azure의 hello 도메인 컨트롤러 역할을 실행 하는 VM을 다시 시작 해야 **종료** hello Azure 포털에서에서 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-192">You should shut down and restart a VM that runs hello domain controller role in Azure within hello guest operating system instead of using hello **Shut Down** option in hello Azure porta.</span></span> <span data-ttu-id="fe649-193">현재 VM 아래로 포털 tooshut hello를 사용 하 여 hello VM toobe 할당 취소 하면 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-193">Today, using hello portal tooshut down a VM causes hello VM toobe deallocated.</span></span> <span data-ttu-id="fe649-194">Deallocated VM hello 청구 요금을 발생 하지 않는다는 이점은 있지만 다시 설정 hello VM-생성 Id는 DC에 바람직하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-194">A deallocated VM has hello advantage of not incurring charges, but it also resets hello VM-GenerationID, which is undesirable for a DC.</span></span> <span data-ttu-id="fe649-195">Hello VM-생성 Id를 다시 설정 hello AD DS 데이터베이스의 hello invocationID도 다시 설정, hello RID 풀이 무시 되 고 SYSVOL이 신뢰할 수 없는로 표시 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-195">When hello VM-GenerationID is reset, hello invocationID of hello AD DS database is also reset, hello RID pool is discarded, and SYSVOL is marked as non-authoritative.</span></span> <span data-ttu-id="fe649-196">자세한 내용은 참조 [소개 tooActive Directory Domain Services (AD DS) Virtualization](https://technet.microsoft.com/library/hh831734.aspx) 및 [안전 하 게 DFSR 가상화](http://blogs.technet.com/b/filecab/archive/2013/04/05/safely-virtualizing-dfsr.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-196">For more information, see [Introduction tooActive Directory Domain Services (AD DS) Virtualization](https://technet.microsoft.com/library/hh831734.aspx) and [Safely Virtualizing DFSR](http://blogs.technet.com/b/filecab/archive/2013/04/05/safely-virtualizing-dfsr.aspx).</span></span>
> 
> 

## <a name="why-deploy-windows-server-ad-ds-on-azure-virtual-machines"></a><span data-ttu-id="fe649-197">Azure 가상 컴퓨터에 Windows Server AD DS를 배포하는 이유는 무엇입니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-197">Why deploy Windows Server AD DS on Azure Virtual Machines?</span></span>
<span data-ttu-id="fe649-198">많은 Windows Server AD DS 배포 시나리오는 Azure에서 VM으로 배포하기에 적합합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-198">Many Windows Server AD DS deployment scenarios are well-suited for deployment as VMs on Azure.</span></span> <span data-ttu-id="fe649-199">예를 들어 아시아의 원격 위치에서 tooauthenticate 사용자는 유럽의 회사가 있다고 가정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-199">For example, suppose you have a company in Europe that needs tooauthenticate users in a remote location in Asia.</span></span> <span data-ttu-id="fe649-200">hello 회사 이전에 배포 하지 아시아의 Windows Server Active Directory Dc 비용 toohello toodeploy 되 고 제한 된 전문 지식 toomanage hello 서버 배포 후 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-200">hello company has not previously deployed Windows Server Active Directory DCs in Asia due toohello cost toodeploy them and limited expertise toomanage hello servers post-deployment.</span></span> <span data-ttu-id="fe649-201">결과적으로, 아시아의 인증 요청은 최적이 아닌 결과로 유럽의 DC에서 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-201">As a result, authentication requests from Asia are serviced by DCs in Europe with suboptimal results.</span></span> <span data-ttu-id="fe649-202">이 경우 hello 아시아의 Azure 데이터 센터 내에서 실행 해야 사용자가 지정한 VM에 DC를 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-202">In this case, you can deploy a DC on a VM that you have specified must be run within hello Azure datacenter in Asia.</span></span> <span data-ttu-id="fe649-203">해당 DC tooan toohello 원격 위치에는 인증 성능이 향상 됩니다 직접 연결 된 Azure 가상 네트워크를 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-203">Attaching that DC tooan Azure virtual network that is connected directly toohello remote location will improve authentication performance.</span></span>

<span data-ttu-id="fe649-204">Azure에 잘 맞는 대체 toootherwise 비용이 많이 드는 재해 복구 (DR) 사이트로 이기도합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-204">Azure is also well-suited as a substitute toootherwise costly disaster recovery (DR) sites.</span></span> <span data-ttu-id="fe649-205">상대적으로 저렴 한 비용 적은 수의 도메인 컨트롤러와 Azure에서 단일 가상 네트워크를 호스팅 hello 때문에 매력적인 대안이 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-205">hello relatively low-cost of hosting a small number of domain controllers and a single virtual network on Azure represents an attractive alternative.</span></span>

<span data-ttu-id="fe649-206">마지막으로, 네트워크 응용 프로그램을 Azure에 SharePoint가 Windows Server Active Directory 필요 하지만 온-프레미스 네트워크 또는 회사 Windows Server Active Directory hello hello에 대 한 종속성 없이 같은 toodeploy를 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-206">Finally, you may want toodeploy a network application on Azure, such as SharePoint, that requires Windows Server Active Directory but has no dependency on hello on-premises network or hello corporate Windows Server Active Directory.</span></span> <span data-ttu-id="fe649-207">서버의 요구 사항을 Azure toomeet hello SharePoint에서 분리 된 포리스트를 배포 합니다.이 경우 최적입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-207">In this case, deploying an isolated forest on Azure toomeet hello SharePoint server’s requirements is optimal.</span></span> <span data-ttu-id="fe649-208">다시 연결 toohello 온-프레미스 네트워크와 회사 Active Directory hello 필요 네트워크 응용 프로그램 배포도 지원 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-208">Again, deploying network applications that do require connectivity toohello on-premises network and hello corporate Active Directory is also supported.</span></span>

> [!NOTE]
> <span data-ttu-id="fe649-209">계층 3 연결을 제공 하므로 hello Azure 가상 네트워크와 온-프레미스 네트워크 간의 연결 또한 Azure에서 Azure 가상 컴퓨터로 실행 되는 온-프레미스 tooleverage Dc를 실행 하는 구성원 서버를 사용할 수를 제공 하는 VPN 구성 요소 가상 네트워크입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-209">Since it provides a layer-3 connection, hello VPN component that provides connectivity between an Azure virtual network and an on-premises network can also enable member servers that run on-premises tooleverage DCs that run as Azure virtual machines on Azure virtual network.</span></span> <span data-ttu-id="fe649-210">그러나 hello VPN을 사용할 수 없는 경우 간 통신 온-프레미스 컴퓨터와 인증 되 고 다른 오류는 다양 한 Azure 기반 도메인 컨트롤러에서는 작동 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-210">But if hello VPN is unavailable, communication between on-premises computers and Azure-based domain controllers will not function, resulting in authentication and various other errors.</span></span>  
> 
> 

## <a name="contrasts-between-deploying-windows-server-active-directory-domain-controllers-on-azure-virtual-machines-versus-on-premises"></a><span data-ttu-id="fe649-211">Azure 가상 컴퓨터와 온-프레미스에 Windows Server Active Directory 도메인 컨트롤러 배포 간의 비교</span><span class="sxs-lookup"><span data-stu-id="fe649-211">Contrasts between deploying Windows Server Active Directory domain controllers on Azure Virtual Machines versus on-premises</span></span>
* <span data-ttu-id="fe649-212">단일 VM 두 개 이상 포함 된 Windows Server Active Directory 배포 시나리오, Azure 가상 네트워크 IP 주소 일관성을 위해 필요한 toouse입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-212">For any Windows Server Active Directory deployment scenario that includes more than a single VM, it is necessary toouse an Azure virtual network for IP address consistency.</span></span> <span data-ttu-id="fe649-213">이 가이드에서는 DC가 Azure 가상 네트워크에서 실행 중임을 가정합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-213">Note that this guide assumes that DCs are running on an Azure virtual network.</span></span>
* <span data-ttu-id="fe649-214">온-프레미스 DC와 마찬가지로 고정 IP 주소를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-214">As with on-premises DCs, static IP addresses are recommended.</span></span> <span data-ttu-id="fe649-215">고정 IP 주소는 Azure PowerShell을 사용하여 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-215">A static IP address can only be configured by using Azure PowerShell.</span></span> <span data-ttu-id="fe649-216">자세한 내용은 [VM에 대한 고정 내부 IP 주소](http://azure.microsoft.com/blog/static-internal-ip-address-for-virtual-machines/) 를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-216">See [Static internal IP address for VMs](http://azure.microsoft.com/blog/static-internal-ip-address-for-virtual-machines/) for more details.</span></span> <span data-ttu-id="fe649-217">모니터링 시스템 또는 hello 게스트 운영 체제 내에서 고정 IP 주소 구성을 확인 하는 기타 솔루션이 있는 경우 동일한 IP 주소 toohello 네트워크 어댑터의 정적 속성 hello VM hello를 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-217">If you have monitoring systems or other solutions that check for static IP address configuration within hello guest operating system, you can assign hello same static IP address toohello network adapter properties of hello VM.</span></span> <span data-ttu-id="fe649-218">하지만 hello VM 서비스 복구가 수행 하거나 hello 포털에서 종료 되 고 해당 주소가 할당 취소 하는 경우 해당 hello 네트워크 어댑터 취소 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-218">But be aware that hello network adapter will be discarded if hello VM undergoes service healing or is shut down in hello portal and has its address deallocated.</span></span> <span data-ttu-id="fe649-219">이 경우 hello hello 게스트 내의 고정 IP 주소 toobe 할 다시 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-219">In that case, hello static IP address within hello guest will need toobe reset.</span></span>
* <span data-ttu-id="fe649-220">가상 네트워크에 Vm을 배포 하지 의미 하는 것 (않거나 필요) 백 tooan 온-프레미스 네트워크를 연결 합니다. hello 가상 네트워크에는 단순히 그러한 가능성 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-220">Deploying VMs on a virtual network does not imply (or require) connectivity back tooan on-premises network; hello virtual network merely enables that possibility.</span></span> <span data-ttu-id="fe649-221">Azure와 온-프레미스 네트워크 간의 개인 통신에 대한 가상 네트워크를 만들어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-221">You must create a virtual network for private communication between Azure and your on-premises network.</span></span> <span data-ttu-id="fe649-222">Toodeploy hello 온-프레미스 네트워크 VPN 끝점이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-222">You need toodeploy a VPN endpoint on hello on-premises network.</span></span> <span data-ttu-id="fe649-223">hello VPN은 Azure toohello 온-프레미스 네트워크에서 열립니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-223">hello VPN is opened from Azure toohello on-premises network.</span></span> <span data-ttu-id="fe649-224">자세한 내용은 참조 [가상 네트워크 개요](../virtual-network/virtual-networks-overview.md) 및 [hello Azure 포털에서에서 사이트 간 VPN 구성](../vpn-gateway/vpn-gateway-site-to-site-create.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-224">For more information, see [Virtual Network Overview](../virtual-network/virtual-networks-overview.md) and [Configure a Site-to-Site VPN in hello Azure Portal](../vpn-gateway/vpn-gateway-site-to-site-create.md).</span></span>

> [!NOTE]
> <span data-ttu-id="fe649-225">옵션 너무[지점-사이트 VPN 만들기](../vpn-gateway/vpn-gateway-point-to-site-create.md) 사용할 수 있는 tooconnect 개별 Windows 기반 컴퓨터는 Azure 가상 네트워크를 tooan 직접 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-225">An option too[create a point-to-site VPN](../vpn-gateway/vpn-gateway-point-to-site-create.md) is available tooconnect individual Windows-based computers directly tooan Azure virtual network.</span></span>
> 
> 

* <span data-ttu-id="fe649-226">가상 네트워크를 만드는지 여부에 관계 없이 Azure는 송신 트래픽에 대한 요금을 청구하지만 하지만 수신 트래픽에 대한 요금을 청구하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-226">Regardless of whether you create a virtual network or not, Azure charges for egress traffic but not ingress.</span></span> <span data-ttu-id="fe649-227">다양한 Windows Server Active Directory 디자인 선택은 배포에서 생성되는 송신 트래픽의 양에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-227">Various Windows Server Active Directory design choices can affect how much egress traffic is generated by a deployment.</span></span> <span data-ttu-id="fe649-228">예를 들어 읽기 전용 도메인 컨트롤러(RODC) 배포는 아웃바운드를 복제하지 않으므로 송신 트래픽을 제한합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-228">For example, deploying a read-only domain controller (RODC) limits egress traffic because it does not replicate outbound.</span></span> <span data-ttu-id="fe649-229">하지만 쓰기 작업 hello DC 및 hello에 대 한 hello 결정 toodeploy RODC toobe hello 필요 tooperform에 대해 비교 평가 해야 [호환성](https://technet.microsoft.com/library/cc755190) Rodc와 응용 프로그램 및 서비스 hello 사이트에 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-229">But hello decision toodeploy an RODC needs toobe weighed against hello need tooperform write operations against hello DC and hello [compatibility](https://technet.microsoft.com/library/cc755190) that applications and services in hello site have with RODCs.</span></span> <span data-ttu-id="fe649-230">트래픽 요금에 대한 자세한 내용은 [Azure 가격 개요](http://azure.microsoft.com/pricing/)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-230">For more information about traffic charges, see [Azure pricing at-a-glance](http://azure.microsoft.com/pricing/).</span></span>
* <span data-ttu-id="fe649-231">Vm에서 온-프레미스, RAM, 디스크 크기 등과 같은 서버 리소스 toouse 어떤를 완전히 제어할 수 있을 때 Azure에서 미리 구성 된 서버 크기의 목록에서 선택 해야 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-231">While you have complete control over what server resources toouse for VMs on-premises, such as RAM, disk size, and so on, on Azure you must select from a list of preconfigured server sizes.</span></span> <span data-ttu-id="fe649-232">DC에 대 한 데이터 디스크 순서 toostore hello Windows Server Active Directory 데이터베이스에 추가 toohello 운영 체제 디스크에 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-232">For a DC, a data disk is needed in addition toohello operating system disk in order toostore hello Windows Server Active Directory database.</span></span>

## <a name="can-you-deploy-windows-server-ad-fs-on-azure-virtual-machines"></a><span data-ttu-id="fe649-233">Azure 가상 컴퓨터에 Windows Server AD FS를 배포할 수 있습니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-233">Can you deploy Windows Server AD FS on Azure virtual machines?</span></span>
<span data-ttu-id="fe649-234">예, Azure 가상 컴퓨터에 Windows Server AD FS를 배포 하 고 hello [AD FS 배포에 대 한 유용한](https://technet.microsoft.com/library/dn151324.aspx) 온-프레미스 동일 하 게 적용 tooAD FS 배포 Azure에서.</span><span class="sxs-lookup"><span data-stu-id="fe649-234">Yes, you can deploy Windows Server AD FS on Azure virtual machines, and hello [best practices for AD FS deployment](https://technet.microsoft.com/library/dn151324.aspx) on-premises apply equally tooAD FS deployment on Azure.</span></span> <span data-ttu-id="fe649-235">하지만 일부의 hello 모범 사례와 같은 부하 분산 및 고가용성 제공 이상의 기술이 필요한 어떤 AD FS 자체입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-235">But some of hello best practices such as load balancing and high availability require technologies beyond what AD FS offers itself.</span></span> <span data-ttu-id="fe649-236">Hello 기본 인프라에서 제공 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-236">They must be provided by hello underlying infrastructure.</span></span> <span data-ttu-id="fe649-237">몇 가지 모범 사례를 검토하고 Azure VM 및 Azure 가상 네트워크를 사용하여 실현할 수 있는 방법을 살펴 보겠습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-237">Let’s review some of those best practices and see how they can be achieved by using Azure VMs and an Azure virtual network.</span></span>

1. <span data-ttu-id="fe649-238">**보안 토큰 서비스 (STS) 서버를 제공 하는 대신 직접 toohello 인터넷 합니다.**</span><span class="sxs-lookup"><span data-stu-id="fe649-238">**Never expose security token service (STS) servers directly toohello Internet.**</span></span>
   
    <span data-ttu-id="fe649-239">Hello STS는 보안 토큰을 발급 하기 때문에 유용 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-239">This is important because hello STS issues security tokens.</span></span> <span data-ttu-id="fe649-240">따라서 STS 서버를 AD FS 서버를 처리 해야 같은 hello 동일 도메인 컨트롤러로 보호 수준입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-240">As a result, STS servers such as AD FS servers should be treated with hello same level of protection as a domain controller.</span></span> <span data-ttu-id="fe649-241">STS가 손상 되 면 악의적인 사용자가 잠재적으로 해당 선택 toorelying 당사자 응용 프로그램과 신뢰 조직의 다른 STS 서버의 클레임이 포함 된 hello 기능 tooissue 액세스 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-241">If an STS is compromised, malicious users have hello ability tooissue access tokens potentially containing claims of their choosing toorelying party applications and other STS servers in trusting organizations.</span></span>
2. <span data-ttu-id="fe649-242">**Hello hello AD FS 서버와 동일한 네트워크의 모든 사용자 도메인에 대 한 Active Directory 도메인 컨트롤러를 배포 합니다.**</span><span class="sxs-lookup"><span data-stu-id="fe649-242">**Deploy Active Directory domain controllers for all user domains in hello same network as hello AD FS servers.**</span></span>
   
    <span data-ttu-id="fe649-243">AD FS 서버 tooauthenticate 사용자가 Active Directory 도메인 서비스를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-243">AD FS servers use Active Directory Domain Services tooauthenticate users.</span></span> <span data-ttu-id="fe649-244">Hello hello AD FS 서버와 동일한 네트워크에서 도메인 컨트롤러 toodeploy 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-244">It is recommended toodeploy domain controllers on hello same network as hello AD FS servers.</span></span> <span data-ttu-id="fe649-245">이 경우 사이 링크 hello hello Azure 네트워크와 온-프레미스 네트워크를 중단 하 고 더 낮은 대기 시간 및 로그인에 대 한 향상 된 성능을 활성화 비즈니스 연속성을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-245">This provides business continuity in case hello link between hello Azure network and your on-premises network is broken, and enables lower latency and increased performance for logins.</span></span>
3. <span data-ttu-id="fe649-246">**Hello 부하 분산 및 고가용성에 대 한 여러 AD FS 노드를 배포 합니다.**</span><span class="sxs-lookup"><span data-stu-id="fe649-246">**Deploy multiple AD FS nodes for high availability and balancing hello load.**</span></span>
   
    <span data-ttu-id="fe649-247">대부분의 경우에서 AD FS를 사용 하도록 설정 하는 응용 프로그램의 hello 실패 허용 되지 않습니다 hello 필요한 응용 프로그램에 보안 토큰은 종종 중요 업무용 이므로.</span><span class="sxs-lookup"><span data-stu-id="fe649-247">In most cases, hello failure of an application that AD FS enables is unacceptable because hello applications that require security tokens are often mission critical.</span></span> <span data-ttu-id="fe649-248">결과적으로, AD FS 이제에 있으므로 hello 요주의 경로 tooaccessing 업무용 응용 프로그램, hello AD FS 서비스 여러 AD FS 프록시 및 AD FS 서버를 통해 항상 사용 가능 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-248">As a result, and because AD FS now resides in hello critical path tooaccessing mission critical applications, hello AD FS service must be highly available through multiple AD FS proxies and AD FS servers.</span></span> <span data-ttu-id="fe649-249">요청을 부하 분산 장치 배포 tooachieve hello AD FS 프록시 및 AD FS hello 서버 앞에 일반적으로 배포 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-249">tooachieve distribution of requests, load balancers are typically deployed in front of both hello AD FS Proxies and hello AD FS servers.</span></span>
4. <span data-ttu-id="fe649-250">**인터넷 액세스에 대한 하나 이상의 웹 응용 프로그램 프록시 노드를 배포합니다.**</span><span class="sxs-lookup"><span data-stu-id="fe649-250">**Deploy one or more Web Application Proxy nodes for internet access.**</span></span>
   
    <span data-ttu-id="fe649-251">사용자가 hello AD FS 서비스에 의해 보호 tooaccess 응용 프로그램을 할 때 hello AD FS 서비스 요구 toobe에서 사용할 수 있는 인터넷 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-251">When users need tooaccess applications protected by hello AD FS service, hello AD FS service needs toobe available from hello internet.</span></span> <span data-ttu-id="fe649-252">이 hello 웹 응용 프로그램 프록시 서비스를 배포 하 여 달성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-252">This is achieved by deploying hello Web Application Proxy service.</span></span> <span data-ttu-id="fe649-253">고가용성 및 부하 분산의 hello 목적을 위해 노드를 하나 이상 toodeploy 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-253">It is strongly recommended toodeploy more than one node for hello purposes of high availability and load balancing.</span></span>
5. <span data-ttu-id="fe649-254">**Hello 웹 응용 프로그램 프록시 노드 toointernal 네트워크 리소스에서 액세스를 제한 합니다.**</span><span class="sxs-lookup"><span data-stu-id="fe649-254">**Restrict access from hello Web Application Proxy nodes toointernal network resources.**</span></span>
   
    <span data-ttu-id="fe649-255">외부 사용자에 게 tooaccess AD FS에서 tooallow hello 인터넷 toodeploy 웹 응용 프로그램 프록시 노드 (또는 이전 버전의 Windows Server AD FS 프록시) 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-255">tooallow external users tooaccess AD FS from hello internet, you need toodeploy Web Application Proxy nodes (or AD FS Proxy in earlier versions of Windows Server).</span></span> <span data-ttu-id="fe649-256">hello 웹 응용 프로그램 프록시 노드는 직접 인터넷 toohello를 노출 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-256">hello Web Application proxy nodes are directly exposed toohello Internet.</span></span> <span data-ttu-id="fe649-257">액세스 하기만 toohello AD FS 서버 TCP 포트 443 및 80을 통해 및은 필요한 toobe 도메인에 가입 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-257">They are not required toobe domain-joined and they only need access toohello AD FS servers over TCP ports 443 and 80.</span></span> <span data-ttu-id="fe649-258">해당 통신 tooall 것이 좋습니다 (특히 도메인 컨트롤러) 다른 컴퓨터에서 차단 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-258">It is strongly recommended that communication tooall other computers (especially domain controllers) is blocked.</span></span>
   
    <span data-ttu-id="fe649-259">이는 일반적으로 DMZ를 통해 온-프레미스에서 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-259">This is typically achieved on-premises by means of a DMZ.</span></span> <span data-ttu-id="fe649-260">방화벽 작업 toorestrict 트래픽 hello DMZ toohello 온-프레미스 네트워크에서 허용 목록 모드를 사용 하 여 (즉,만 hello에서 트래픽을 지정 IP 주소 및 포트 허용 되 고 다른 모든 트래픽을 차단 over 지정).</span><span class="sxs-lookup"><span data-stu-id="fe649-260">Firewalls use a whitelist mode of operation toorestrict traffic from hello DMZ toohello on-premises network (that is, only traffic from hello specified IP addresses and over specified ports is allowed, and all other traffic is blocked).</span></span>

<span data-ttu-id="fe649-261">hello 다음 그림에 기존의 온-프레미스 AD FS 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-261">hello following diagram shows a traditional on-premises AD FS deployment.</span></span>

![기존의 온-프레미스 Active Directory Federation Services 배포 다이어그램](media/active-directory-deploying-ws-ad-guidelines/ADFS_onprem.png)

<span data-ttu-id="fe649-263">그러나 Azure 네이티브, 완전 한 기능의 방화벽 기능을 제공 하지 않는 때문에 다른 옵션에 사용 되는 toobe toorestrict 트래픽이 필요.</span><span class="sxs-lookup"><span data-stu-id="fe649-263">However, because Azure does not provide native, full-featured firewall capability, other options need toobe used toorestrict traffic.</span></span> <span data-ttu-id="fe649-264">hello 다음 표에 각 옵션의 장점 및 단점 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-264">hello following table shows each option and its advantages and disadvantages.</span></span>

| <span data-ttu-id="fe649-265">옵션</span><span class="sxs-lookup"><span data-stu-id="fe649-265">Option</span></span> | <span data-ttu-id="fe649-266">장점</span><span class="sxs-lookup"><span data-stu-id="fe649-266">Advantage</span></span> | <span data-ttu-id="fe649-267">단점</span><span class="sxs-lookup"><span data-stu-id="fe649-267">Disadvantage</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="fe649-268">Azure 네트워크 ACL</span><span class="sxs-lookup"><span data-stu-id="fe649-268">Azure network ACLs</span></span>](../virtual-network/virtual-networks-acl.md) |<span data-ttu-id="fe649-269">보다 저렴하고 간단한 초기 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-269">Less costly and simpler initial configuration</span></span> |<span data-ttu-id="fe649-270">네트워크 ACL 구성을 추가로 필요한 경우 새 Vm toohello 배포에 추가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-270">Additional network ACL configuration required if any new VMs are added toohello deployment</span></span> |
| [<span data-ttu-id="fe649-271">Barracuda NG 방화벽</span><span class="sxs-lookup"><span data-stu-id="fe649-271">Barracuda NG firewall</span></span>](https://www.barracuda.com/products/ngfirewall) |<span data-ttu-id="fe649-272">작업의 허용 목록 모드 및 네트워크 ACL 구성이 필요하지 않음</span><span class="sxs-lookup"><span data-stu-id="fe649-272">Whitelist mode of operation and it requires no network ACL configuration</span></span> |<span data-ttu-id="fe649-273">초기 설치에 대한 증가된 비용 및 복잡성</span><span class="sxs-lookup"><span data-stu-id="fe649-273">Increased cost and complexity for initial setup</span></span> |

<span data-ttu-id="fe649-274">hello 개략적인 단계 toodeploy AD FS이 경우에 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-274">hello high-level steps toodeploy AD FS in this case are as follows:</span></span>

1. <span data-ttu-id="fe649-275">VPN 또는 [ExpressRoute](http://azure.microsoft.com/services/expressroute/)를 사용하여 크로스-프레미스 연결로 가상 네트워크를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-275">Create a virtual network with cross-premises connectivity, using either a VPN or [ExpressRoute](http://azure.microsoft.com/services/expressroute/).</span></span>
2. <span data-ttu-id="fe649-276">Hello 가상 네트워크에서 도메인 컨트롤러를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-276">Deploy domain controllers on hello virtual network.</span></span> <span data-ttu-id="fe649-277">이 단계는 선택 사항이지만 권장됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-277">This step is optional but recommended.</span></span>
3. <span data-ttu-id="fe649-278">Hello 가상 네트워크에 도메인 가입 된 AD FS 서버를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-278">Deploy domain-joined AD FS servers on hello virtual network.</span></span>
4. <span data-ttu-id="fe649-279">만들기는 [내부 부하 분산 집합](http://azure.microsoft.com/blog/internal-load-balancing/) hello AD FS 서버를 포함 하 고 hello 가상 네트워크 (동적 IP 주소) 내에서 새 개인 IP 주소를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-279">Create an [internal load balanced set](http://azure.microsoft.com/blog/internal-load-balancing/) that includes hello AD FS servers and uses a new private IP address within hello virtual network (a dynamic IP address).</span></span>
   
   1. <span data-ttu-id="fe649-280">DNS toocreate hello FQDN toopoint toohello (동적)의 개인 IP 주소 hello 내부 부하 분산 집합을 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-280">Update DNS toocreate hello FQDN toopoint toohello private (dynamic) IP address of hello internal load balanced set.</span></span>
5. <span data-ttu-id="fe649-281">클라우드 서비스 (또는 별도 가상 네트워크) hello에 대 한 웹 응용 프로그램 프록시 노드 만들기.</span><span class="sxs-lookup"><span data-stu-id="fe649-281">Create a cloud service (or a separate virtual network) for hello Web Application Proxy nodes.</span></span>
6. <span data-ttu-id="fe649-282">Hello 웹 응용 프로그램 프록시 노드 hello 클라우드 서비스 또는 가상 네트워크에 배포</span><span class="sxs-lookup"><span data-stu-id="fe649-282">Deploy hello Web Application Proxy nodes in hello cloud service or virtual network</span></span>
   
   1. <span data-ttu-id="fe649-283">Hello 웹 응용 프로그램 프록시 노드를 포함 하는 외부 부하 분산 집합을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-283">Create an external load balanced set that includes hello Web Application Proxy nodes.</span></span>
   2. <span data-ttu-id="fe649-284">Hello 외부 DNS 이름 (FQDN) toopoint toohello 클라우드 서비스 공용 IP 주소 (가상 IP 주소 hello)를 업데이트 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-284">Update hello external DNS name (FQDN) toopoint toohello cloud service public IP address (hello virtual IP address).</span></span>
   3. <span data-ttu-id="fe649-285">AD FS 프록시 toouse hello hello AD FS 서버에 대 한 toohello 내부 부하 분산 집합을 해당 하는 FQDN을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-285">Configure AD FS proxies toouse hello FQDN that corresponds toohello internal load balanced set for hello AD FS servers.</span></span>
   4. <span data-ttu-id="fe649-286">클레임 기반 웹 사이트 toouse 업데이트 클레임 공급자에 대 한 외부 FQDN hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-286">Update claims-based web sites toouse hello external FQDN for their claims provider.</span></span>
7. <span data-ttu-id="fe649-287">Hello AD FS 가상 네트워크의 웹 응용 프로그램 프록시 tooany 컴퓨터 간의 액세스를 제한 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-287">Restrict access between Web Application Proxy tooany machine in hello AD FS virtual network.</span></span>

<span data-ttu-id="fe649-288">toorestrict 트래픽 hello Azure 내부 부하 분산 장치에 대 한 부하 분산 집합 hello toobe만 트래픽 tooTCP 포트 80 및 443에 대해 구성 되어야 하며 모든 다른 트래픽 toohello 동적의 내부 IP 주소 hello 부하 분산 집합에 대 한 삭제 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-288">toorestrict traffic, hello load-balanced set for hello Azure internal load balancer needs toobe configured for only traffic tooTCP ports 80 and 443, and all other traffic toohello internal dynamic IP address of hello load balanced set is dropped.</span></span>

![TCP 443 + 80 허용으로 ADFS 네트워크 ACL의 다이어그램.](media/active-directory-deploying-ws-ad-guidelines/ADFS_ACLs.png)

<span data-ttu-id="fe649-290">트래픽 toohello AD FS 서버 hello 원본에 의해서만 허용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-290">Traffic toohello AD FS servers would be permitted only by hello following sources:</span></span>

* <span data-ttu-id="fe649-291">hello Azure 내부 부하 분산 장치입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-291">hello Azure internal load balancer.</span></span>
* <span data-ttu-id="fe649-292">hello hello 온-프레미스 네트워크에 대 한 관리자의 IP 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-292">hello IP address of an administrator on hello on-premises network.</span></span>

> [!WARNING]
> <span data-ttu-id="fe649-293">hello 디자인 hello Azure 가상 네트워크의에서 다른 Vm 또는 hello 온-프레미스 네트워크에 있는 모든 위치에서 웹 응용 프로그램 프록시 노드 하지 못하도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-293">hello design must prevent Web Application Proxy nodes from reaching any other VMs in hello Azure virtual network or any locations on hello on-premises network.</span></span> <span data-ttu-id="fe649-294">Express 경로 연결에 대 한 hello 온-프레미스 어플라이언스 또는 사이트 간 VPN 연결에 대 한 hello VPN 장치에서 방화벽 규칙을 구성 하 여 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-294">That can be done by configuring firewall rules in hello on-premises appliance for Express Route connections or hello VPN device for site-to-site VPN connections.</span></span>
> 
> 

<span data-ttu-id="fe649-295">내부 부하 분산 장치, hello AD FS 서버 및 toohello 가상 네트워크 추가 하는 다른 서버 등의 여러 장치에 대 한 hello 필요 tooconfigure hello 네트워크 Acl을 단점은 toothis 옵션입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-295">A disadvantage toothis option is hello need tooconfigure hello network ACLs for multiple devices, including internal load balancer, hello AD FS servers, and any other servers that get added toohello virtual network.</span></span> <span data-ttu-id="fe649-296">장치 네트워크 Acl toorestrict 트래픽 tooit를 구성 하지 않고 toohello 배포를 추가 하 고, 위험 hello 전체 배포 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-296">If any device is added toohello deployment without configuring network ACLs toorestrict traffic tooit, hello entire deployment can be at risk.</span></span> <span data-ttu-id="fe649-297">Hello 웹 응용 프로그램 프록시 노드의 hello IP 주소가 변경 되 면 hello 네트워크 Acl 재설정 해야 합니다 (hello 프록시를 의미 하는 구성 된 toouse 해야 [동적 고정 IP 주소](http://azure.microsoft.com/blog/static-internal-ip-address-for-virtual-machines/)).</span><span class="sxs-lookup"><span data-stu-id="fe649-297">If hello IP addresses of hello Web Application Proxy nodes ever change, hello network ACLs must be reset (which means hello proxies should be configured toouse [static dynamic IP addresses](http://azure.microsoft.com/blog/static-internal-ip-address-for-virtual-machines/)).</span></span>

![네트워크 ACLS를 사용한 Azure의 ADFS.](media/active-directory-deploying-ws-ad-guidelines/ADFS_Azure.png)

<span data-ttu-id="fe649-299">두 번째 방법은 toouse hello [Barracuda NG Firewall](https://www.barracuda.com/products/ngfirewall) AD FS 프록시 서버와 hello AD FS 서버 간의 기기 toocontrol 트래픽입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-299">Another option is toouse hello [Barracuda NG Firewall](https://www.barracuda.com/products/ngfirewall) appliance toocontrol traffic between AD FS proxy servers and hello AD FS servers.</span></span> <span data-ttu-id="fe649-300">이 옵션 보안 및 고가용성을 위한 모범 사례를 준수 하며 hello 초기 설치 후에 덜 관리 hello Barracuda NG Firewall 어플라이언스는 방화벽 관리 허용 목록 모드를 제공 하 고 설치할 수 있습니다. Azure 가상 네트워크에서 직접</span><span class="sxs-lookup"><span data-stu-id="fe649-300">This option complies with best practices for security and high availability, and requires less administration after hello initial setup because hello Barracuda NG Firewall appliance provides a whitelist mode of firewall administration and it can be installed directly on an Azure virtual network.</span></span> <span data-ttu-id="fe649-301">새 서버를 toohello 배포를 추가 하는 언제 든 지 hello 필요 tooconfigure 네트워크 Acl 제거 하는 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-301">That eliminates hello need tooconfigure network ACLs any time a new server is added toohello deployment.</span></span> <span data-ttu-id="fe649-302">하지만 이 옵션은 초기 배포의 복잡성과 비용이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-302">But this option adds initial deployment complexity and cost.</span></span>

<span data-ttu-id="fe649-303">이 경우 두 개의 가상 네트워크가 하나 대신 배포됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-303">In this case, two virtual networks are deployed instead of one.</span></span> <span data-ttu-id="fe649-304">이를 VNet1 및 VNet2라고 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-304">We'll call them VNet1 and VNet2.</span></span> <span data-ttu-id="fe649-305">VNet1 hello 프록시를 포함 되 고 VNet2 hello Sts와 hello 네트워크 연결 백 toohello 회사 네트워크를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-305">VNet1 contains hello proxies and VNet2 contains hello STSs and hello network connection back toohello corporate network.</span></span> <span data-ttu-id="fe649-306">VNet1 실제로 (하지만 거의) 되므로 VNet2에서 및를 차례로 hello 회사 네트워크에서 격리 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-306">VNet1 is therefore physically (albeit virtually) isolated from VNet2 and, in turn, from hello corporate network.</span></span> <span data-ttu-id="fe649-307">VNet1은 다음 연결 된 tooVNet2 사용 하 여 특수 터널링 기술을 통해로 전송 독립 네트워크 아키텍처 (TINA).</span><span class="sxs-lookup"><span data-stu-id="fe649-307">VNet1 is then connected tooVNet2 using a special tunneling technology known as Transport Independent Network Architecture (TINA).</span></span> <span data-ttu-id="fe649-308">hello TINA 터널은 Barracuda NG firewall을 사용 하 여 hello 가상 네트워크의 연결 된 tooeach-hello 가상 네트워크 각각에서 한 Barracuda 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-308">hello TINA tunnel is attached tooeach of hello virtual networks using a Barracuda NG firewall—one Barracuda on each of hello virtual networks.</span></span>  <span data-ttu-id="fe649-309">가용성이 높은 것이 좋습니다; 각 가상 네트워크에 두 개의 Barracudas를 배포 하는 하나의 활성 hello 수동 하나씩 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-309">For high-availability, it is recommended that you deploy two Barracudas on each virtual network; one active, hello other passive.</span></span> <span data-ttu-id="fe649-310">Azure에서 기존 온-프레미스 DMZ의 toomimic hello 작업 수 있는 매우 효율적인 방화벽 기능이 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-310">They offer extremely rich firewalling capabilities which allow us toomimic hello operation of a traditional on-premises DMZ in Azure.</span></span>

![방화벽을 사용한 Azure의 ADFS.](media/active-directory-deploying-ws-ad-guidelines/ADFS_Azure_firewall.png)

<span data-ttu-id="fe649-312">자세한 내용은 참조 [AD FS: 클레임 인식 온-프레미스 프런트 엔드 응용 프로그램 toohello 인터넷 확장](#BKMK_CloudOnlyFed)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-312">For more information, see [AD FS: Extend a claims-aware on-premises front-end application toohello Internet](#BKMK_CloudOnlyFed).</span></span>

### <a name="an-alternative-tooad-fs-deployment-if-hello-goal-is-office-365-sso-alone"></a><span data-ttu-id="fe649-313">Hello ´ ֲ Office 365 SSO만 하는 경우에 대체 tooAD FS 배포</span><span class="sxs-lookup"><span data-stu-id="fe649-313">An alternative tooAD FS deployment if hello goal is Office 365 SSO alone</span></span>
<span data-ttu-id="fe649-314">목표는만 tooenable 로그인 Office 365에 대 한 다른 대체 toodeploying AD FS 모두가 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-314">There is another alternative toodeploying AD FS altogether if your goal is only tooenable sign-in for Office 365.</span></span> <span data-ttu-id="fe649-315">이 경우 단순히 동기화 온-프레미스 암호를 사용 하 여 디렉터리 동기화를 배포 하는 달성이 방법은 AD FS 또는 Azure 필요 하지 않기 때문에 동일한 최종 결과는 최소한의 배포 복잡성 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-315">In that case, you can simply deploy DirSync with password sync on-premises and achieve hello same end-result with minimal deployment complexity because this approach does not require AD FS or Azure.</span></span>

<span data-ttu-id="fe649-316">hello 다음 표에서 비교와 AD FS를 배포 하지 않고 hello 로그인 프로세스가 어떻게 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-316">hello following table compares how hello sign-in processes work with and without deploying AD FS.</span></span>

| <span data-ttu-id="fe649-317">AD FS 및 DirSync를 사용하여 Office 365 Single Sign-On</span><span class="sxs-lookup"><span data-stu-id="fe649-317">Office 365 single sign-on using AD FS and DirSync</span></span> | <span data-ttu-id="fe649-318">DirSync + 암호 동기화를 사용하여 Office 365 동일한 로그온</span><span class="sxs-lookup"><span data-stu-id="fe649-318">Office 365 same sign-on using DirSync + Password Sync</span></span> |
| --- | --- |
| <span data-ttu-id="fe649-319">1. hello 사용자 tooa 회사 네트워크에 로그온 및 인증 된 tooWindows Server Active Directory는 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-319">1. hello user logs on tooa corporate network, and is authenticated tooWindows Server Active Directory.</span></span> |<span data-ttu-id="fe649-320">1. hello 사용자 tooa 회사 네트워크에 로그온 및 인증 된 tooWindows Server Active Directory는 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-320">1. hello user logs on tooa corporate network, and is authenticated tooWindows Server Active Directory.</span></span> |
| <span data-ttu-id="fe649-321">2. hello 사용자가 Office 365 tooaccess (저는 @contoso.com).</span><span class="sxs-lookup"><span data-stu-id="fe649-321">2. hello user tries tooaccess Office 365 (I am @contoso.com).</span></span> |<span data-ttu-id="fe649-322">2. hello 사용자가 Office 365 tooaccess (저는 @contoso.com).</span><span class="sxs-lookup"><span data-stu-id="fe649-322">2. hello user tries tooaccess Office 365 (I am @contoso.com).</span></span> |
| <span data-ttu-id="fe649-323">3. Office 365 hello 사용자 tooAzure를 AD로 리디렉션합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-323">3. Office 365 redirects hello user tooAzure AD.</span></span> |<span data-ttu-id="fe649-324">3. Office 365 hello 사용자 tooAzure를 AD로 리디렉션합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-324">3. Office 365 redirects hello user tooAzure AD.</span></span> |
| <span data-ttu-id="fe649-325">4. Azure AD hello 사용자를 인증할 수 없는 하 고 온-프레미스 AD FS와 트러스트에 대 한 이해를 hello 사용자 tooAD를 FS로 리디렉션합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-325">4. Since Azure AD can’t authenticate hello user and understands there is a trust with AD FS on-premises, it redirects hello user tooAD FS.</span></span> |<span data-ttu-id="fe649-326">4. Azure AD는 Kerberos 티켓을 직접 수락할 수 없고 및 트러스트 관계가 없으므로 해당 hello 사용자 자격 증명을 입력 하도록 요청 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-326">4. Azure AD can’t accept Kerberos tickets directly and no trust relationship exists so it requests that hello user enter credentials.</span></span> |
| <span data-ttu-id="fe649-327">5. hello 사용자 보냅니다는 Kerberos 티켓 toohello AD FS STS 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-327">5. hello user sends a Kerberos ticket toohello AD FS STS.</span></span> |<span data-ttu-id="fe649-328">5. hello 사용자가 hello 입력 동일한 온-프레미스 암호를 및 Azure AD hello 사용자 이름 및 디렉터리 동기화에 의해 동기화 된 암호에 대해 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-328">5. hello user enters hello same on-premises password, and Azure AD validates them against hello user name and password that was synchronized by DirSync.</span></span> |
| <span data-ttu-id="fe649-329">6. AD FS는 Kerberos 티켓 toohello 필요한 토큰 형식/클레임으로 및 hello 사용자 tooAzure AD 리디렉션합니다 hello를 변환 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-329">6. AD FS transforms hello Kerberos ticket toohello required token format/claims and redirects hello user tooAzure AD.</span></span> |<span data-ttu-id="fe649-330">6. Azure AD 사용자 tooOffice를 hello 365로 리디렉션합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-330">6. Azure AD redirects hello user tooOffice 365.</span></span> |
| <span data-ttu-id="fe649-331">7. hello 사용자 tooAzure AD가 인증 (됩니다 또 다른 변환이 발생).</span><span class="sxs-lookup"><span data-stu-id="fe649-331">7. hello user authenticates tooAzure AD (another transformation occurs).</span></span> |<span data-ttu-id="fe649-332">7. hello 사용자 tooOffice 365와 OWA hello Azure AD 토큰을 사용 하 여 로그인 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-332">7. hello user can sign in tooOffice 365 and OWA using hello Azure AD token.</span></span> |
| <span data-ttu-id="fe649-333">8. Azure AD 사용자 tooOffice를 hello 365로 리디렉션합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-333">8. Azure AD redirects hello user tooOffice 365.</span></span> | |
| <span data-ttu-id="fe649-334">9. hello 사용자가 자동으로 tooOffice 365에 로그인 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-334">9. hello user is silently signed on tooOffice 365.</span></span> | |

<span data-ttu-id="fe649-335">Office 365 DirSync와 암호 동기화 시나리오 (AD FS 없음)와 hello에서 single sign on으로 바뀝니다 "동일 로그온" 여기서 "same" 이라는 의미로, 사용자가 Office 365에 액세스할 때 동일한 온-프레미스 자격 증명 입력 다시 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-335">In hello Office 365 with DirSync with password sync scenario (no AD FS), single sign-on is replaced by “same sign-on” where “same” simply means that users must re-enter their same on-premises credentials when accessing Office 365.</span></span> <span data-ttu-id="fe649-336">참고 hello 사용자의 브라우저 toohelp 하 여이 데이터를 기억 될 수 있는 후속 프롬프트를 줄입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-336">Note that this data can be remembered by hello user’s browser toohelp reduce subsequent prompts.</span></span>

### <a name="additional-food-for-thought"></a><span data-ttu-id="fe649-337">추가 고려 사항</span><span class="sxs-lookup"><span data-stu-id="fe649-337">Additional food for thought</span></span>
* <span data-ttu-id="fe649-338">Azure 가상 컴퓨터에서 AD FS 프록시를 배포 하는 경우 연결 toohello AD FS 서버가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-338">If you deploy an AD FS proxy on an Azure virtual machine, connectivity toohello AD FS servers is needed.</span></span> <span data-ttu-id="fe649-339">온-프레미스 인 경우 AD FS 서버와 hello 가상 네트워크 tooallow hello 웹 응용 프로그램 프록시 노드 toocommunicate에서 제공 하는 hello 사이트 간 VPN 연결을 활용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-339">If they are on-premises, it is recommended that you leverage hello site-to-site VPN connectivity provided by hello virtual network tooallow hello Web Application Proxy nodes toocommunicate with their AD FS servers.</span></span>
* <span data-ttu-id="fe649-340">Azure 가상에 AD FS 서버를 배포 하는 경우 컴퓨터를 연결 tooWindows Server Active Directory 도메인 컨트롤러, 특성 저장소 및 구성 데이터베이스는 필요 하며 사이트 간 VPN 연결 또는 express 경로도 필요할 수 있습니다. 사이의 hello Azure 가상 네트워크 및 hello 온-프레미스 네트워크입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-340">If you deploy an AD FS server on an Azure virtual machine, connectivity tooWindows Server Active Directory domain controllers, Attribute Stores, and Configuration databases is necessary and may also require an ExpressRoute or a site-to-site VPN connection between hello Azure virtual network and hello on-premises network.</span></span>
* <span data-ttu-id="fe649-341">요금이 적용 됩니다 (송신 트래픽)는 Azure 가상 컴퓨터에서 tooall 트래픽입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-341">Charges are applied tooall traffic from Azure virtual machines (egress traffic).</span></span> <span data-ttu-id="fe649-342">비용이 주요 요인인 hello 경우 좋습니다 toodeploy hello 웹 응용 프로그램 프록시 노드를 Azure에 AD FS hello 서버 온-프레미스 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-342">If cost is hello driving factor, it is advisable toodeploy hello Web Application Proxy nodes on Azure, leaving hello AD FS servers on-premises.</span></span> <span data-ttu-id="fe649-343">Hello AD FS 서버를 Azure 가상 컴퓨터에 배포 하는 경우 추가 비용이 발생된 tooauthenticate 온-프레미스 사용자가 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-343">If hello AD FS servers are deployed on Azure virtual machines as well, additional costs will be incurred tooauthenticate on-premises users.</span></span> <span data-ttu-id="fe649-344">송신 트래픽에 ExpressRoute hello 또는 hello VPN 사이트 간 연결을 순회 중인지 여부에 관계 없이 비용을 발생 시킵니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-344">Egress traffic incurs a cost regardless of whether or not it is traversing hello ExpressRoute or hello VPN site-to-site connection.</span></span>
* <span data-ttu-id="fe649-345">Toouse Azure의 기본 서버 부하 분산 AD FS 서버의 고가용성에 대 한 기능을 결정 한 경우 부하 분산 된 hello 클라우드 서비스 내에서 hello 가상 컴퓨터의 사용 되는 toodetermine hello 상태는 프로브를 제공 하는지 note 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-345">If you decide toouse Azure’s native server load balancing capabilities for high availability of AD FS servers, note that load balancing provides probes that are used toodetermine hello health of hello virtual machines within hello cloud service.</span></span> <span data-ttu-id="fe649-346">(것과 반대로 tooweb 또는 작업자 역할)로 가상 컴퓨터를 Azure의 hello 경우 toohello 기본 프로브 응답 하는 hello 에이전트가 Azure 가상 컴퓨터에 없기 때문에 사용자 지정 프로브 사용 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-346">In hello case of Azure virtual machines (as opposed tooweb or worker roles), a custom probe must be used since hello agent that responds toohello default probes is not present on Azure virtual machines.</span></span> <span data-ttu-id="fe649-347">여기에서는 편의 위해 사용자 지정 TCP 프로브를 사용할 수 있습니다-그러기 위해서는 TCP 연결 (TCP SYN 세그먼트 전송 했 고 toowith TCP SYN ACK 세그먼트) 여야 toodetermine 성공적으로 설정 된 가상 컴퓨터 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-347">For simplicity, you might use a custom TCP probe — this requires only that a TCP connection (a TCP SYN segment sent and responded toowith a TCP SYN ACK segment) be successfully established toodetermine virtual machine health.</span></span> <span data-ttu-id="fe649-348">가상 컴퓨터에서 실제로 수신 대기 하는 TCP 포트 toowhich hello 사용자 지정 프로브 toouse를 구성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-348">You can configure hello custom probe toouse any TCP port toowhich your virtual machines are actively listening.</span></span>

> [!NOTE]
> <span data-ttu-id="fe649-349">필요한 tooexpose hello toohello 인터넷 (예: 포트 80 및 443) 공유할 수 없으므로 직접 포트 설정 하는 동일한 컴퓨터는 hello 동일한 클라우드 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-349">Machines that need tooexpose hello same set of ports directly toohello Internet (such as port 80 and 443) cannot share hello same cloud service.</span></span> <span data-ttu-id="fe649-350">따라서 응용 프로그램에 대 한 포트 요구 사항 및 Windows Server AD FS 사이 겹치는 순서 tooavoid 잠재적인 대로 Windows Server AD FS 서버에 대 한 전용된 클라우드 서비스를 만드는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-350">It is, therefore, recommended that you create a dedicated cloud service for your Windows Server AD FS servers in order tooavoid potential overlaps between port requirements for an application and Windows Server AD FS.</span></span>
> 
> 

## <a name="deployment-scenarios"></a><span data-ttu-id="fe649-351">배포 시나리오</span><span class="sxs-lookup"><span data-stu-id="fe649-351">Deployment scenarios</span></span>
<span data-ttu-id="fe649-352">다음 단원을 hello 일반적인 배포 시나리오 toodraw 주의 tooimportant 고려 사항의 요점 계정에는 고려해 야 하는 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-352">hello following section outlines commonplace deployment scenarios toodraw attention tooimportant considerations that must be taken into account.</span></span> <span data-ttu-id="fe649-353">각 시나리오는 hello 결정 사항 및 요인 tooconsider 하는 방법에 대 한 링크 toomore 세부 정보를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-353">Each scenario has links toomore details about hello decisions and factors tooconsider.</span></span>

1. [<span data-ttu-id="fe649-354">AD DS: 회사 네트워크 연결에 대한 요구 사항 없이 AD DS 인식 응용 프로그램 배포</span><span class="sxs-lookup"><span data-stu-id="fe649-354">AD DS: Deploy an AD DS-aware application with no requirement for corporate network connectivity</span></span>](#BKMK_CloudOnly)
   
    <span data-ttu-id="fe649-355">예를 들어 인터넷 연결 SharePoint 서비스는 Azure 가상 컴퓨터에 배포됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-355">For example, an Internet-facing SharePoint service is deployed on an Azure virtual machine.</span></span> <span data-ttu-id="fe649-356">hello 응용 프로그램이 회사 네트워크 리소스에 의존 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-356">hello application has no dependencies on corporate-network resources.</span></span> <span data-ttu-id="fe649-357">hello 응용 프로그램이 Windows Server AD DS에 필요 하지만 하지 않아도 회사 Windows Server AD DS hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-357">hello application does require Windows Server AD DS but does NOT require hello corporate Windows Server AD DS.</span></span>
2. [<span data-ttu-id="fe649-358">AD FS: 클레임 인식 온-프레미스 프런트 엔드 응용 프로그램 toohello 인터넷 확장</span><span class="sxs-lookup"><span data-stu-id="fe649-358">AD FS: Extend a claims-aware on-premises front-end application toohello Internet</span></span>](#BKMK_CloudOnlyFed)
   
    <span data-ttu-id="fe649-359">예를 들어 온-프레미스 성공적으로 배포 되 고 회사 사용자가 사용 하는 클레임 인식 응용 프로그램 필요 toobecome hello 인터넷에서에서 액세스할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-359">For example, a claims-aware application that has been successfully deployed on-premises and used by corporate users needs toobecome accessible from hello Internet.</span></span> <span data-ttu-id="fe649-360">hello 응용 프로그램은 자체 회사 id를 사용 하 여 비즈니스 파트너와 기존 회사 사용자 hello 인터넷을 통해 직접 액세스 toobe가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-360">hello application needs toobe accessed directly over hello Internet both by business partners using their own corporate identities and by existing corporate users.</span></span>
3. [<span data-ttu-id="fe649-361">AD DS: toohello 회사 네트워크 연결을 필요로 하는 Windows Server AD DS 인식 응용 프로그램 배포</span><span class="sxs-lookup"><span data-stu-id="fe649-361">AD DS: Deploy a Windows Server AD DS-aware application that requires connectivity toohello corporate network</span></span>](#BKMK_HybridExt)
   
    <span data-ttu-id="fe649-362">예를 들어 Windows 통합 인증을 지원하고 구성 및 사용자 프로필 데이터에 대한 리포지토리로 Windows Server AD DS를 사용하는 LDAP 인식 응용 프로그램은 Azure 가상 컴퓨터에 배포됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-362">For example, an LDAP-aware application that supports Windows-integrated authentication and uses Windows Server AD DS as a repository for configuration and user-profile data is deployed on an Azure virtual machine.</span></span> <span data-ttu-id="fe649-363">기존의 회사 Windows Server AD DS hello 응용 프로그램 tooleverage hello 바람직하지 이며 single sign on 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-363">It is desirable for hello application tooleverage hello existing corporate Windows Server AD DS and provide single sign-on.</span></span> <span data-ttu-id="fe649-364">hello 응용 프로그램은 클레임 인식 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-364">hello application is not claims-aware.</span></span>

### <span data-ttu-id="fe649-365"><a name="BKMK_CloudOnly"></a>1. AD DS: 회사 네트워크 연결에 대한 요구 사항 없이 AD DS 인식 응용 프로그램 배포</span><span class="sxs-lookup"><span data-stu-id="fe649-365"><a name="BKMK_CloudOnly"></a>1. AD DS: Deploy an AD DS-aware application with no requirement for corporate network connectivity</span></span>
<span data-ttu-id="fe649-366">![클라우드 전용 AD DS 배포](media/active-directory-deploying-ws-ad-guidelines/ADDS_cloud.png)
**그림 1**</span><span class="sxs-lookup"><span data-stu-id="fe649-366">![Cloud-only AD DS deployment](media/active-directory-deploying-ws-ad-guidelines/ADDS_cloud.png)
**Figure 1**</span></span>

#### <a name="description"></a><span data-ttu-id="fe649-367">설명</span><span class="sxs-lookup"><span data-stu-id="fe649-367">Description</span></span>
<span data-ttu-id="fe649-368">SharePoint가 Azure 가상 컴퓨터에 배포 하 고 hello 응용 프로그램이 회사 네트워크 리소스에 대 한 종속성이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-368">SharePoint is deployed on an Azure virtual machine and hello application has no dependencies on corporate-network resources.</span></span> <span data-ttu-id="fe649-369">hello 응용 프로그램에서 필요 않도록 지정 되었으나 Windows Server AD DS *하지* 필요 회사 Windows Server AD DS hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-369">hello application does require Windows Server AD DS but does *not* require hello corporate Windows Server AD DS.</span></span> <span data-ttu-id="fe649-370">Kerberos 또는 페더레이션된 트러스트가 없습니다는 사용자가 자체 hello 클라우드의 Azure 가상 컴퓨터에도 호스트 된 hello Windows Server AD DS 도메인으로 hello 응용 프로그램을 통해 프로 비전 하기 때문에 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-370">No Kerberos or federated trusts are required because users are self-provisioned through hello application into hello Windows Server AD DS domain that is also hosted in hello cloud on Azure virtual machines.</span></span>

#### <a name="scenario-considerations-and-how-technology-areas-apply-toohello-scenario"></a><span data-ttu-id="fe649-371">시나리오 고려 사항 및 기술 영역 toohello 시나리오를 적용 하는 방법</span><span class="sxs-lookup"><span data-stu-id="fe649-371">Scenario considerations and how technology areas apply toohello scenario</span></span>
* <span data-ttu-id="fe649-372">[네트워크 토폴로지](#BKMK_NetworkTopology): 크로스-프레미스 연결(사이트 간 연결이라고도 함) 없이 Azure 가상 네트워크를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-372">[Network topology](#BKMK_NetworkTopology): Create an Azure virtual network without cross-premises connectivity (also known as site-to-site connectivity).</span></span>
* <span data-ttu-id="fe649-373">[DC 배포 구성](#BKMK_DeploymentConfig): 새로운 단일 도메인 Windows Server Active Directory 포리스트에 새 도메인 컨트롤러를 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-373">[DC deployment configuration](#BKMK_DeploymentConfig): Deploy a new domain controller into a new, single-domain, Windows Server Active Directory forest.</span></span> <span data-ttu-id="fe649-374">이것은 hello Windows DNS 서버와 함께 배포 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-374">This should be deployed along with hello Windows DNS server.</span></span>
* <span data-ttu-id="fe649-375">[Windows Server Active Directory 사이트 토폴로지](#BKMK_ADSiteTopology): 사용 하 여 hello 기본 Windows Server Active Directory 사이트 (모든 컴퓨터는 기본 첫 번째-사이트 이름에).</span><span class="sxs-lookup"><span data-stu-id="fe649-375">[Windows Server Active Directory site topology](#BKMK_ADSiteTopology): Use hello default Windows Server Active Directory site (all computers will be in Default-First-Site-Name).</span></span>
* <span data-ttu-id="fe649-376">[IP 주소 지정 및 DNS](#BKMK_IPAddressDNS):</span><span class="sxs-lookup"><span data-stu-id="fe649-376">[IP addressing and DNS](#BKMK_IPAddressDNS):</span></span>
  
  * <span data-ttu-id="fe649-377">Hello Set-azurestaticvnetip Azure PowerShell cmdlet을 사용 하 여 hello DC에 대 한 고정 IP 주소를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-377">Set a static IP address for hello DC by using hello Set-AzureStaticVNetIP Azure PowerShell cmdlet.</span></span>
  * <span data-ttu-id="fe649-378">설치 및 Windows Server DNS를 Azure에서 도메인 컨트롤러 hello 구성.</span><span class="sxs-lookup"><span data-stu-id="fe649-378">Install and configure Windows Server DNS on hello domain controller(s) on Azure.</span></span>
  * <span data-ttu-id="fe649-379">Hello 이름과 hello hello DC 및 DNS 서버 역할을 호스팅하는 VM의 IP 주소로 hello 가상 네트워크 속성을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-379">Configure hello virtual network properties with hello name and IP address of hello VM that hosts hello DC and DNS server roles.</span></span>
* <span data-ttu-id="fe649-380">[글로벌 카탈로그](#BKMK_GC): hello hello 포리스트의 첫 번째 DC 이어야 합니다는 글로벌 카탈로그 서버입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-380">[Global Catalog](#BKMK_GC): hello first DC in hello forest must be a global catalog server.</span></span> <span data-ttu-id="fe649-381">단일 도메인 포리스트에서 글로벌 카탈로그 hello hello DC에서에서 추가 작업 필요 하지 않기 때문에 추가 Dc Gc로도 구성 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-381">Additional DCs should also be configured as GCs because in a single domain forest, hello global catalog does not require any additional work from hello DC.</span></span>
* <span data-ttu-id="fe649-382">[Hello Windows Server AD DS 데이터베이스 및 SYSVOL의 배치](#BKMK_PlaceDB): 순서 toostore hello Windows Server Active Directory 데이터베이스, 로그 및 SYSVOL의 Azure Vm으로 실행 되는 데이터 디스크 tooDCs를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-382">[Placement of hello Windows Server AD DS database and SYSVOL](#BKMK_PlaceDB): Add a data disk tooDCs running as Azure VMs in order toostore hello Windows Server Active Directory database, logs, and SYSVOL.</span></span>
* <span data-ttu-id="fe649-383">[백업 및 복원](#BKMK_BUR): toostore 시스템 상태 백업 위치를 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-383">[Backup and Restore](#BKMK_BUR): Determine where you want toostore system state backups.</span></span> <span data-ttu-id="fe649-384">필요한 경우 다른 데이터 디스크 toohello DC VM toostore 백업을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-384">If necessary, add another data disk toohello DC VM toostore backups.</span></span>

### <span data-ttu-id="fe649-385"><a name="BKMK_CloudOnlyFed"></a>2의 AD FS: 클레임 인식 온-프레미스 프런트 엔드 응용 프로그램 toohello 인터넷 확장</span><span class="sxs-lookup"><span data-stu-id="fe649-385"><a name="BKMK_CloudOnlyFed"></a>2 AD FS: Extend a claims-aware on-premises front-end application toohello Internet</span></span>
<span data-ttu-id="fe649-386">![크로스-프레미스 연결로 페더레이션](media/active-directory-deploying-ws-ad-guidelines/Federation_xprem.png)
**그림 2**</span><span class="sxs-lookup"><span data-stu-id="fe649-386">![Federation with cross-premises connectivity](media/active-directory-deploying-ws-ad-guidelines/Federation_xprem.png)
**Figure 2**</span></span>

#### <a name="description"></a><span data-ttu-id="fe649-387">설명</span><span class="sxs-lookup"><span data-stu-id="fe649-387">Description</span></span>
<span data-ttu-id="fe649-388">온-프레미스 성공적으로 배포 되 고 회사 사용자에 게 요구 toobecome hello 인터넷에서 직접 액세스 하 여 사용 하는 클레임 인식 응용 프로그램입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-388">A claims-aware application that has been successfully deployed on-premises and used by corporate users needs toobecome accessible directly from hello Internet.</span></span> <span data-ttu-id="fe649-389">hello 응용 프로그램 데이터를 저장 하는 웹 프런트 엔드 tooa SQL 데이터베이스 역할을 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-389">hello application serves as a web frontend tooa SQL database in which it stores data.</span></span> <span data-ttu-id="fe649-390">hello 응용 프로그램에서 사용 하는 hello SQL 서버 hello 회사 네트워크에도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-390">hello SQL servers used by hello application are also located on hello corporate network.</span></span> <span data-ttu-id="fe649-391">두 개의 Windows Server AD FS Sts 및 부하 분산 장치가 온-프레미스 배포 tooprovide 액세스 toohello 회사 사용자에 게 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-391">Two Windows Server AD FS STSs and a load-balancer have been deployed on-premises tooprovide access toohello corporate users.</span></span> <span data-ttu-id="fe649-392">이제 hello 응용 프로그램은 자체 회사 id를 사용 하 여 비즈니스 파트너와 기존 회사 사용자 hello 인터넷을 통해 직접 추가로 액세스 toobe가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-392">hello application now needs toobe additionally accessed directly over hello Internet both by business partners using their own corporate identities and by existing corporate users.</span></span>

<span data-ttu-id="fe649-393">노력 toosimplify 및이 새로운 요구 사항의 배포 및 구성 요구를 충족 hello 결정 했습니다 추가 웹 프런트 엔드 및 두 개의 Windows Server AD FS 프록시 서버는 Azure 가상 컴퓨터에 설치할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-393">In an effort toosimplify and meet hello deployment and configuration needs of this new requirement, it is decided that two additional web frontends and two Windows Server AD FS proxy servers be installed on Azure virtual machines.</span></span> <span data-ttu-id="fe649-394">모든 4 개의 Vm 됩니다 toohello 인터넷에 직접 노출 하 고 연결 toohello 온-프레미스 네트워크를 Azure 가상 네트워크의 사이트 간 VPN 기능을 사용 하 여 제공 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-394">All four VMs will be exposed directly toohello Internet and will be provided connectivity toohello on-premises network using Azure Virtual Network’s site-to-site VPN capability.</span></span>

#### <a name="scenario-considerations-and-how-technology-areas-apply-toohello-scenario"></a><span data-ttu-id="fe649-395">시나리오 고려 사항 및 기술 영역 toohello 시나리오를 적용 하는 방법</span><span class="sxs-lookup"><span data-stu-id="fe649-395">Scenario considerations and how technology areas apply toohello scenario</span></span>
* <span data-ttu-id="fe649-396">[네트워크 토폴로지](#BKMK_NetworkTopology): Azure 가상 네트워크를 만들고 [크로스-프레미스 연결을 구성합니다](../vpn-gateway/vpn-gateway-site-to-site-create.md).</span><span class="sxs-lookup"><span data-stu-id="fe649-396">[Network topology](#BKMK_NetworkTopology): Create an Azure virtual network and [configure cross-premises connectivity](../vpn-gateway/vpn-gateway-site-to-site-create.md).</span></span>
  
  > [!NOTE]
  > <span data-ttu-id="fe649-397">각각의 hello Windows Server AD FS 인증서에 대 한 hello URL 내에 정의 된 hello 인증서 템플릿 및 hello 결과 인증서를 Azure에서 실행 되는 Windows Server AD FS hello 인스턴스를 통해 연결할 수 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-397">For each of hello Windows Server AD FS certificates, ensure that hello URL defined within hello certificate template and hello resulting certificates can be reached by hello Windows Server AD FS instances running on Azure.</span></span> <span data-ttu-id="fe649-398">PKI 인프라의 크로스-프레미스 연결 tooparts가 필요할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-398">This may require cross-premises connectivity tooparts of your PKI infrastructure.</span></span> <span data-ttu-id="fe649-399">예제 hello CRL의 끝점이 LDAP 기반이 고 단독으로 온-프레미스에 호스트 되는 경우 다음 크로스-프레미스 연결 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-399">For example if hello CRL's endpoint is LDAP-based and hosted exclusively on-premises, then cross-premises connectivity will be required.</span></span> <span data-ttu-id="fe649-400">필요 없는 경우 hello 인터넷을 통해 해당 CRL을 액세스할 수 있는 CA에서 발급 한 toouse 필요한 인증서 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-400">If this is not desirable, it may be necessary toouse certificates issued by a CA whose CRL is accessible over hello Internet.</span></span>
  > 
  > 
* <span data-ttu-id="fe649-401">[클라우드 서비스 구성](#BKMK_CloudSvcConfig): 두 개의 부하 분산된 가상 IP 주소를 제공하기 위해 두 개의 클라우드 서비스가 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-401">[Cloud services configuration](#BKMK_CloudSvcConfig): Ensure you have two cloud services in order provide two load-balanced virtual IP addresses.</span></span> <span data-ttu-id="fe649-402">hello 첫 번째 클라우드 서비스의 가상 IP 주소 toohello 방향이 지정 된 두 명의 Windows Server AD FS 프록시 Vm으로 포트 80 및 443 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-402">hello first cloud service’s virtual IP address will be directed toohello two Windows Server AD FS proxy VMs on ports 80 and 443.</span></span> <span data-ttu-id="fe649-403">hello Windows Server AD FS 프록시 Vm 됩니다 구성 hello Windows Server AD FS Sts를 향한은 hello 온-프레미스 부하 분산 장치의 toopoint toohello IP 주소.</span><span class="sxs-lookup"><span data-stu-id="fe649-403">hello Windows Server AD FS proxy VMs will be configured toopoint toohello IP address of hello on-premises load-balancer that fronts hello Windows Server AD FS STSs.</span></span> <span data-ttu-id="fe649-404">hello 두 번째 클라우드 서비스의 가상 IP 주소에 포트 80 및 443에서 hello 웹 프런트 엔드를 다시 실행 하는 방향이 지정 된 toohello 두 Vm 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-404">hello second cloud service’s virtual IP address will be directed toohello two VMs running hello web frontend again on ports 80 and 443.</span></span> <span data-ttu-id="fe649-405">사용자 지정 프로브를 구성 tooensure hello 부하 분산 장치에 트래픽을 toofunctioning Windows Server AD FS 프록시와 웹 프런트 엔드 Vm 으로만 전송 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-405">Configure a custom probe tooensure hello load-balancer only directs traffic toofunctioning Windows Server AD FS proxy and web frontend VMs.</span></span>
* <span data-ttu-id="fe649-406">[페더레이션 서버 구성](#BKMK_FedSrvConfig): hello 클라우드에서 만든 hello Windows Server Active Directory 포리스트에 대 한 구성 Windows Server AD FS 페더레이션 서버 (STS) toogenerate 보안 토큰입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-406">[Federation server configuration](#BKMK_FedSrvConfig): Configure Windows Server AD FS as a federation server (STS) toogenerate security tokens for hello Windows Server Active Directory forest created in hello cloud.</span></span> <span data-ttu-id="fe649-407">Tooaccept id를 원하는 다른 파트너를 hello와 페더레이션 클레임 공급자 트러스트 관계를 설정 하 고 hello 다른 응용 프로그램에 대 한 toogenerate 토큰을 원하는 신뢰 당사자 트러스트 관계를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-407">Set federation claims provider trust relationships with hello different partners you wish tooaccept identities from, and configure relying party trust relationships with hello different applications you want toogenerate tokens to.</span></span>
  
    <span data-ttu-id="fe649-408">대부분의 시나리오에서 Windows Server AD FS 프록시 서버는 보안용으로 인터넷 연결 용량에 배포되는 반면 해당 Windows Server AD FS 페더레이션 항목은 직접 인터넷 연결에서 격리됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-408">In most scenarios, Windows Server AD FS proxy servers are deployed in an Internet-facing capacity for security purposes while their Windows Server AD FS federation counterparts remain isolated from direct Internet connectivity.</span></span> <span data-ttu-id="fe649-409">배포 시나리오에 관계 없이 공개적으로 노출 된 IP 주소 및 포트 수를 tooload 분산으로가지고 있는 두 개의 Windows Server AD FS STS 인스턴스 또는 프록시 인스턴스를 제공 하는 가상 IP 주소와 함께 클라우드 서비스를 구성 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-409">Regardless of your deployment scenario, you must configure your cloud service with a virtual IP address that will provide a publicly exposed IP address and port that is able tooload-balance across either your two Windows Server AD FS STS instances or proxy instances.</span></span>
* <span data-ttu-id="fe649-410">[Windows Server AD FS 고가용성 구성](#BKMK_ADFSHighAvail): 것이 좋습니다 toodeploy 장애 조치 및 부하 분산에 대 한 두 개 이상의 서버가 포함 된 Windows Server AD FS 팜을 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-410">[Windows Server AD FS high availability configuration](#BKMK_ADFSHighAvail): It is advisable toodeploy a Windows Server AD FS farm with at least two servers for failover and load balancing.</span></span> <span data-ttu-id="fe649-411">Hello 내부의 부하 분산 기능 Azure toodistribute 들어오는 요청 hello 팜의 서버에서 hello 사용 하 tooconsider hello 내부 데이터베이스 WID (Windows)를 사용 하 여 Windows Server AD FS 구성 데이터에 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-411">You might want tooconsider using hello Windows Internal Database (WID) for Windows Server AD FS configuration data, and use hello internal load balancing capability of Azure toodistribute incoming requests across hello servers in hello farm.</span></span>

<span data-ttu-id="fe649-412">자세한 내용은 참조 hello [AD DS 배포 가이드](https://technet.microsoft.com/library/cc753963)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-412">For more information, see hello [AD DS Deployment Guide](https://technet.microsoft.com/library/cc753963).</span></span>

### <span data-ttu-id="fe649-413"><a name="BKMK_HybridExt"></a>3. AD DS: toohello 회사 네트워크 연결을 필요로 하는 Windows Server AD DS 인식 응용 프로그램 배포</span><span class="sxs-lookup"><span data-stu-id="fe649-413"><a name="BKMK_HybridExt"></a>3. AD DS: Deploy a Windows Server AD DS-aware application that requires connectivity toohello corporate network</span></span>
<span data-ttu-id="fe649-414">![크로스-프레미스 AD DS 배포](media/active-directory-deploying-ws-ad-guidelines/ADDS_xprem.png)
**그림 3**</span><span class="sxs-lookup"><span data-stu-id="fe649-414">![Cross-premises AD DS deployment](media/active-directory-deploying-ws-ad-guidelines/ADDS_xprem.png)
**Figure 3**</span></span>

#### <a name="description"></a><span data-ttu-id="fe649-415">설명</span><span class="sxs-lookup"><span data-stu-id="fe649-415">Description</span></span>
<span data-ttu-id="fe649-416">LDAP 인식 응용 프로그램이 Azure 가상 컴퓨터에 배포됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-416">An LDAP-aware application is deployed on an Azure virtual machine.</span></span> <span data-ttu-id="fe649-417">Windows 통합 인증을 지원하고 구성 및 사용자 프로필 데이터에 대한 리포지토리로 Windows Server AD DS를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-417">It supports Windows-integrated authentication and uses Windows Server AD DS as a repository for configuration and user profile data.</span></span> <span data-ttu-id="fe649-418">hello 목표 hello 응용 프로그램 tooleverage hello 기존의 회사 Windows Server AD DS 하며 single sign on 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-418">hello goal is for hello application tooleverage hello existing corporate Windows Server AD DS and provide single sign-on.</span></span> <span data-ttu-id="fe649-419">hello 응용 프로그램은 클레임 인식 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-419">hello application is not claims-aware.</span></span> <span data-ttu-id="fe649-420">사용자가 hello 인터넷에서 직접 tooaccess hello 응용 프로그램이 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-420">Users also need tooaccess hello application directly from hello Internet.</span></span> <span data-ttu-id="fe649-421">toooptimize 성능 및 비용에 대 한 결정 했습니다 hello 회사 도메인의 일부인 두 명의 추가 도메인 컨트롤러를 Azure의 hello 응용 프로그램과 함께 배포 하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-421">toooptimize for performance and cost, it is decided that two additional domain controllers that are part of hello corporate domain be deployed alongside hello application on Azure.</span></span>

#### <a name="scenario-considerations-and-how-technology-areas-apply-toohello-scenario"></a><span data-ttu-id="fe649-422">시나리오 고려 사항 및 기술 영역 toohello 시나리오를 적용 하는 방법</span><span class="sxs-lookup"><span data-stu-id="fe649-422">Scenario considerations and how technology areas apply toohello scenario</span></span>
* <span data-ttu-id="fe649-423">[네트워크 토폴로지](#BKMK_NetworkTopology): [크로스-프레미스 연결](../vpn-gateway/vpn-gateway-site-to-site-create.md)로 Azure 가상 네트워크를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-423">[Network topology](#BKMK_NetworkTopology): Create an Azure virtual network with [cross-premises connectivity](../vpn-gateway/vpn-gateway-site-to-site-create.md).</span></span>
* <span data-ttu-id="fe649-424">[설치 방법](#BKMK_InstallMethod): hello 회사 Windows Server Active Directory 도메인의 복제본 Dc를 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-424">[Installation method](#BKMK_InstallMethod): Deploy replica DCs from hello corporate Windows Server Active Directory domain.</span></span> <span data-ttu-id="fe649-425">복제본 DC에 대 한 VM hello에 Windows Server AD DS를 설치할 수 있습니다 및 toobe 필요한 데이터를 사용 하 여 hello 설치 IFM (미디어에서) 기능 tooreduce hello 양 toohello를 복제 하는 선택적으로 설치 하는 동안 새 DC입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-425">For a replica DC, you can install Windows Server AD DS on hello VM, and optionally use hello Install From Media (IFM) feature tooreduce hello amount of data that needs toobe replicated toohello new DC during installation.</span></span> <span data-ttu-id="fe649-426">자습서는 [Azure에서 복제 Active Directory 도메인 컨트롤러 설치](active-directory-install-replica-active-directory-domain-controller.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-426">For a tutorial, see [Install a replica Active Directory domain controller on Azure](active-directory-install-replica-active-directory-domain-controller.md).</span></span> <span data-ttu-id="fe649-427">IFM을 사용 하는 경우에 보다 효율적인 toobuild hello 가상 DC 온-프레미스 및 Windows Server AD DS를 설치 하는 동안 복제 하는 대신 hello 전체 가상 하드 디스크 (VHD) toohello 클라우드를 이동할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-427">Even if you use IFM, it may be more efficient toobuild hello virtual DC on-premises and move hello entire Virtual Hard Disk (VHD) toohello cloud instead of replicating Windows Server AD DS during installation.</span></span> <span data-ttu-id="fe649-428">보안을 위해 복사한 tooAzure 되 면 hello 온-프레미스 네트워크에서 VHD hello을 삭제 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-428">For safety, it is recommended that you delete hello VHD from hello on-premises network once it has been copied tooAzure.</span></span>
* <span data-ttu-id="fe649-429">[Windows Server Active Directory 사이트 토폴로지](#BKMK_ADSiteTopology): Active Directory 사이트 및 서비스에서 새로운 Azure 사이트를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-429">[Windows Server Active Directory site topology](#BKMK_ADSiteTopology): Create a new Azure site in Active Directory Sites and Services.</span></span> <span data-ttu-id="fe649-430">Windows Server Active Directory 서브넷 개체 toorepresent hello Azure 가상 네트워크를 만들고 hello 서브넷 toohello 사이트를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-430">Create a Windows Server Active Directory subnet object toorepresent hello Azure virtual network and add hello subnet toohello site.</span></span> <span data-ttu-id="fe649-431">Hello 새로운 Azure 사이트와는 hello Azure 가상 네트워크 VPN 끝점이 \ 순서 toocontrol hello 사이트를 포함 하 고 Azure에서 Windows Server Active Directory 트래픽을 tooand를 최적화 하는 새 사이트 링크를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-431">Create a new site link that includes hello new Azure site and hello site in which hello Azure virtual network VPN endpoint is located in order toocontrol and optimize Windows Server Active Directory traffic tooand from Azure.</span></span>
* <span data-ttu-id="fe649-432">[IP 주소 지정 및 DNS](#BKMK_IPAddressDNS):</span><span class="sxs-lookup"><span data-stu-id="fe649-432">[IP addressing and DNS](#BKMK_IPAddressDNS):</span></span>
  
  * <span data-ttu-id="fe649-433">Hello Set-azurestaticvnetip Azure PowerShell cmdlet을 사용 하 여 hello DC에 대 한 고정 IP 주소를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-433">Set a static IP address for hello DC by using hello Set-AzureStaticVNetIP Azure PowerShell cmdlet.</span></span>
  * <span data-ttu-id="fe649-434">설치 및 Windows Server DNS를 Azure에서 도메인 컨트롤러 hello 구성.</span><span class="sxs-lookup"><span data-stu-id="fe649-434">Install and configure Windows Server DNS on hello domain controller(s) on Azure.</span></span>
  * <span data-ttu-id="fe649-435">Hello 이름과 hello hello DC 및 DNS 서버 역할을 호스팅하는 VM의 IP 주소로 hello 가상 네트워크 속성을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-435">Configure hello virtual network properties with hello name and IP address of hello VM that hosts hello DC and DNS server roles.</span></span>
* <span data-ttu-id="fe649-436">[지리적으로 분산된 DC](#BKMK_DistributedDCs): 필요에 따라 추가 가상 네트워크를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-436">[Geo-distributed DCs](#BKMK_DistributedDCs): Configure additional virtual networks as needed.</span></span> <span data-ttu-id="fe649-437">Active Directory 사이트 토폴로지 toodifferent Azure 해당 하는 지역에 dc가 필요한 경우 영역 보다 적절 하 게 toocreate Active Directory 사이트를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-437">If your Active Directory site topology requires DCs in geographies that correspond toodifferent Azure regions, than you want toocreate Active Directory sites accordingly.</span></span>
* <span data-ttu-id="fe649-438">[읽기 전용 Dc](#BKMK_RODC): Rodc와 hello 사이트의 hello DC 및 hello 호환성에 대 한 응용 프로그램 및 서비스 작업 쓰기를 수행 하기 위한 요구 사항에 따라 hello Azure 사이트에서에서 RODC를 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-438">[Read-only DCs](#BKMK_RODC): You might deploy an RODC in hello Azure site, depending on your requirements for performing write operations against hello DC and hello compatibility of applications and services in hello site with RODCs.</span></span> <span data-ttu-id="fe649-439">응용 프로그램 호환성에 대 한 자세한 내용은 참조 hello [읽기 전용 도메인 컨트롤러 응용 프로그램 호환성 가이드](https://technet.microsoft.com/library/cc755190)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-439">For more information about application compatibility, see hello [Read-Only domain controllers application compatibility guide](https://technet.microsoft.com/library/cc755190).</span></span>
* <span data-ttu-id="fe649-440">[글로벌 카탈로그](#BKMK_GC): Gc는 다중 도메인 포리스트에서 로그온 요청 필요한 tooservice 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-440">[Global Catalog](#BKMK_GC): GCs are needed tooservice logon requests in multidomain forests.</span></span> <span data-ttu-id="fe649-441">Hello Azure 사이트에서에서 GC를 배포 하지 않는 경우 인증 요청 다른 사이트의 Gc를 쿼리해야 하면 송신 트래픽 비용이 시 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-441">If you do not deploy a GC in hello Azure site, you will incur egress traffic costs as authentication requests cause queries GCs in other sites.</span></span> <span data-ttu-id="fe649-442">트래픽는 toominimize, Active Directory 사이트 및 서비스에서 Azure 사이트 hello에 대 한 캐싱을 유니버설 그룹 구성원을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-442">toominimize that traffic, you can enable universal group membership caching for hello Azure site in Active Directory Sites and Services.</span></span>
  
    <span data-ttu-id="fe649-443">GC를 배포 하는 경우 사이트 링크를 구성 하 고 hello Azure 사이트에서에서 GC hello tooreplicate 해야 하는 다른 Gc에서 원본 DC로 선호 되지 않도록 사이트 링크 비용 동일한 부분 도메인 파티션을 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-443">If you deploy a GC, configure site links and site links costs so that hello GC in hello Azure site is not preferred as a source DC by other GCs that need tooreplicate hello same partial domain partitions.</span></span>
* <span data-ttu-id="fe649-444">[Hello Windows Server AD DS 데이터베이스 및 SYSVOL의 배치](#BKMK_PlaceDB): 순서 toostore hello Windows Server Active Directory 데이터베이스, 로그 및 SYSVOL의 Azure Vm에서 실행 되는 데이터 디스크 tooDCs를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-444">[Placement of hello Windows Server AD DS database and SYSVOL](#BKMK_PlaceDB): Add a data disk tooDCs running on Azure VMs in order toostore hello Windows Server Active Directory database, logs, and SYSVOL.</span></span>
* <span data-ttu-id="fe649-445">[백업 및 복원](#BKMK_BUR): toostore 시스템 상태 백업 위치를 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-445">[Backup and Restore](#BKMK_BUR): Determine where you want toostore system state backups.</span></span> <span data-ttu-id="fe649-446">필요한 경우 다른 데이터 디스크 toohello DC VM toostore 백업을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-446">If necessary, add another data disk toohello DC VM toostore backups.</span></span>

## <a name="deployment-decisions-and-factors"></a><span data-ttu-id="fe649-447">배포 결정 및 요인</span><span class="sxs-lookup"><span data-stu-id="fe649-447">Deployment decisions and factors</span></span>
<span data-ttu-id="fe649-448">이 테이블에는 hello Windows Server Active Directory 기술 영역 hello 시나리오 앞에 영향을 및 아래에 링크 toomore 자세히와 해당 결정 tooconsider hello에 요약 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-448">This table summarizes hello Windows Server Active Directory technology areas that are impacted in hello preceding scenarios and hello corresponding decisions tooconsider, with links toomore detail below.</span></span> <span data-ttu-id="fe649-449">어떤 기술 영역은 하지 않을 수 tooevery 적용 가능한 배포 시나리오에서는 있으며 어떤 기술 영역은 다른 기술 영역 보다 더 중요 tooa 배포 시나리오를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-449">Some technology areas might not be applicable tooevery deployment scenario, and some technology areas might be more critical tooa deployment scenario than other technology areas.</span></span>

<span data-ttu-id="fe649-450">예를 들어 가상 네트워크에서 복제본 DC를 배포 하 고 포리스트에 단일 도메인에 다음 toodeploy 글로벌 카탈로그 서버 선택이 경우 됩니다 중요 한 toohello 배포 시나리오는 추가적인 복제를 만들지 않으므로 요구 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-450">For example, if you deploy a replica DC on a virtual network and your forest has only a single domain, then choosing toodeploy a global catalog server in that case will not be critical toohello deployment scenario because it will not create any additional replication requirements.</span></span> <span data-ttu-id="fe649-451">에 hello 포리스트에 여러 도메인이 다른 손 hello에 다음 hello 의사 결정 toodeploy 가상 네트워크에 글로벌 카탈로그는 사용 가능한 대역폭, 성능, 인증, 디렉터리 조회 등에 영향을 줄 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-451">On hello other hand, if hello forest has several domains, then hello decision toodeploy a global catalog on a virtual network could affect available bandwidth, performance, authentication, directory lookups, and so on.</span></span>

| <span data-ttu-id="fe649-452">Windows Server Active Directory 기술 영역</span><span class="sxs-lookup"><span data-stu-id="fe649-452">Windows Server Active Directory technology area</span></span> | <span data-ttu-id="fe649-453">의사 결정</span><span class="sxs-lookup"><span data-stu-id="fe649-453">Decisions</span></span> | <span data-ttu-id="fe649-454">요소</span><span class="sxs-lookup"><span data-stu-id="fe649-454">Factors</span></span> |
| --- | --- | --- |
| [<span data-ttu-id="fe649-455">네트워크 토폴로지</span><span class="sxs-lookup"><span data-stu-id="fe649-455">Network topology</span></span>](#BKMK_NetworkTopology) |<span data-ttu-id="fe649-456">가상 네트워크를 만듭니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-456">Do you create a virtual network?</span></span> |<li><span data-ttu-id="fe649-457">요구 사항 tooaccess Corp 리소스</span><span class="sxs-lookup"><span data-stu-id="fe649-457">Requirements tooaccess Corp resources</span></span></li> <li><span data-ttu-id="fe649-458">인증</span><span class="sxs-lookup"><span data-stu-id="fe649-458">Authentication</span></span></li> <li><span data-ttu-id="fe649-459">계정 관리</span><span class="sxs-lookup"><span data-stu-id="fe649-459">Account management</span></span></li> |
| [<span data-ttu-id="fe649-460">DC 배포 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-460">DC deployment configuration</span></span>](#BKMK_DeploymentConfig) |<li><span data-ttu-id="fe649-461">트러스트 없이 별도 포리스트를 배포합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-461">Deploy a separate forest without any trusts?</span></span></li> <li><span data-ttu-id="fe649-462">페더레이션이 포함된 새 포리스트를 배포합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-462">Deploy a new forest with federation?</span></span></li> <li><span data-ttu-id="fe649-463">Windows Server Active Directory 포리스트 트러스트 또는 Kerberos가 포함된 새 포리스트를 배포합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-463">Deploy a new forest with Windows Server Active Directory forest trust or Kerberos?</span></span></li> <li><span data-ttu-id="fe649-464">복제본 DC를 배포하여 회사 포리스트를 확장합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-464">Extend Corp forest by deploying a replica DC?</span></span></li> <li><span data-ttu-id="fe649-465">새 자식 도메인 또는 도메인 트리를 배포하여 회사 포리스트를 확장합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-465">Extend Corp forest by deploying a new child domain or domain tree?</span></span></li> |<li><span data-ttu-id="fe649-466">보안</span><span class="sxs-lookup"><span data-stu-id="fe649-466">Security</span></span></li> <li><span data-ttu-id="fe649-467">규정 준수</span><span class="sxs-lookup"><span data-stu-id="fe649-467">Compliance</span></span></li> <li><span data-ttu-id="fe649-468">비용</span><span class="sxs-lookup"><span data-stu-id="fe649-468">Cost</span></span></li> <li><span data-ttu-id="fe649-469">복원력 및 내결함성</span><span class="sxs-lookup"><span data-stu-id="fe649-469">Resiliency and fault-tolerance</span></span></li> <li><span data-ttu-id="fe649-470">응용 프로그램 호환성</span><span class="sxs-lookup"><span data-stu-id="fe649-470">Application compatibility</span></span></li> |
| [<span data-ttu-id="fe649-471">Windows Server Active Directory 사이트 토폴로지</span><span class="sxs-lookup"><span data-stu-id="fe649-471">Windows Server Active Directory site topology</span></span>](#BKMK_ADSiteTopology) |<span data-ttu-id="fe649-472">어떻게 하면 toooptimize 트래픽이 Azure 가상 네트워크 서브넷, 사이트 및 사이트 링크를 구성 하 고 비용을 최소화?</span><span class="sxs-lookup"><span data-stu-id="fe649-472">How do you configure subnets, sites, and site links with Azure Virtual Network toooptimize traffic and minimize cost?</span></span> |<li><span data-ttu-id="fe649-473">서브넷 및 사이트 정의</span><span class="sxs-lookup"><span data-stu-id="fe649-473">Subnet and site definitions</span></span></li> <li><span data-ttu-id="fe649-474">사이트 링크 속성 및 변경 알림</span><span class="sxs-lookup"><span data-stu-id="fe649-474">Site link properties and change notification</span></span></li> <li><span data-ttu-id="fe649-475">복제 압축</span><span class="sxs-lookup"><span data-stu-id="fe649-475">Replication compression</span></span></li> |
| [<span data-ttu-id="fe649-476">IP 주소 지정 및 DNS</span><span class="sxs-lookup"><span data-stu-id="fe649-476">IP addressing and DNS</span></span>](#BKMK_IPAddressDNS) |<span data-ttu-id="fe649-477">Tooconfigure IP 주소 하 고 이름 확인을 어떻게?</span><span class="sxs-lookup"><span data-stu-id="fe649-477">How tooconfigure IP addresses and name resolution?</span></span> |<li><span data-ttu-id="fe649-478">Hello 사용 하 여 hello Set-azurestaticvnetip cmdlet tooassign 고정 IP 주소를 사용 하 여</span><span class="sxs-lookup"><span data-stu-id="fe649-478">Use hello Use hello Set-AzureStaticVNetIP cmdlet tooassign a static IP address</span></span></li> <li><span data-ttu-id="fe649-479">Windows Server DNS 서버를 설치 하 고 hello 이름과 hello hello DC 및 DNS 서버 역할을 호스팅하는 VM의 IP 주소로 hello 가상 네트워크 속성을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-479">Install Windows Server DNS server and configure hello virtual network properties with hello name and IP address of hello VM that hosts hello DC and DNS server roles</span></span></li> |
| [<span data-ttu-id="fe649-480">지리적으로 분산된 DC</span><span class="sxs-lookup"><span data-stu-id="fe649-480">Geo-distributed DCs</span></span>](#BKMK_DistributedDCs) |<span data-ttu-id="fe649-481">어떻게에 tooreplicate tooDCs 가상로 네트워크 구분?</span><span class="sxs-lookup"><span data-stu-id="fe649-481">How tooreplicate tooDCs on separate virtual networks?</span></span> |<span data-ttu-id="fe649-482">Active Directory 사이트 토폴로지 toodifferent Azure의 해당 지역에 dc가 필요한 경우 영역 보다 적절 하 게 toocreate Active Directory 사이트를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-482">If your Active Directory site topology requires DCs in geographies that corresponds toodifferent Azure regions, than you want toocreate Active Directory sites accordingly.</span></span> <span data-ttu-id="fe649-483">[가상 네트워크 toovirtual 네트워크 연결 구성](../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) 별도 가상 네트워크에 도메인 컨트롤러 간 tooreplicate 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-483">[Configure virtual network toovirtual network Connectivity](../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md) tooreplicate between domain controllers on separate virtual networks.</span></span> |
| [<span data-ttu-id="fe649-484">읽기 전용 DC</span><span class="sxs-lookup"><span data-stu-id="fe649-484">Read-only DCs</span></span>](#BKMK_RODC) |<span data-ttu-id="fe649-485">읽기 전용 또는 쓰기 가능 DC를 사용합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-485">Use read-only or writeable DCs?</span></span> |<li><span data-ttu-id="fe649-486">HBI/PII 특성 필터링</span><span class="sxs-lookup"><span data-stu-id="fe649-486">Filter HBI/PII attributes</span></span></li> <li><span data-ttu-id="fe649-487">암호 필터링</span><span class="sxs-lookup"><span data-stu-id="fe649-487">Filter secrets</span></span></li> <li><span data-ttu-id="fe649-488">아웃바운드 트래픽 제한</span><span class="sxs-lookup"><span data-stu-id="fe649-488">Limit outbound traffic</span></span></li> |
| [<span data-ttu-id="fe649-489">글로벌 카탈로그</span><span class="sxs-lookup"><span data-stu-id="fe649-489">Global catalog</span></span>](#BKMK_GC) |<span data-ttu-id="fe649-490">글로벌 카탈로그를 설치합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-490">Install global catalog?</span></span> |<li><span data-ttu-id="fe649-491">단일 도메인 포리스트의 경우 모든 DC GC를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-491">For single-domain forest, make all DCs GCs</span></span></li> <li><span data-ttu-id="fe649-492">다중 도메인 포리스트의 경우 인증에 GC가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-492">For multidomain forest, GCs are required for authentication</span></span></li> |
| [<span data-ttu-id="fe649-493">설치 방법</span><span class="sxs-lookup"><span data-stu-id="fe649-493">Installation method</span></span>](#BKMK_InstallMethod) |<span data-ttu-id="fe649-494">어떻게 Azure에서 DC tooinstall?</span><span class="sxs-lookup"><span data-stu-id="fe649-494">How tooinstall DC in Azure?</span></span> |<span data-ttu-id="fe649-495">다음 중 한 방법으로 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-495">Either:</span></span> <li><span data-ttu-id="fe649-496">Windows PowerShell 또는 Dcpromo를 사용하여 AD DS 설치</span><span class="sxs-lookup"><span data-stu-id="fe649-496">Install AD DS using Windows PowerShell or Dcpromo</span></span></li> <li><span data-ttu-id="fe649-497">온-프레미스 가상 DC의 VHD 이동</span><span class="sxs-lookup"><span data-stu-id="fe649-497">Move VHD of an on-premises virtual DC</span></span></li> |
| [<span data-ttu-id="fe649-498">Hello Windows Server AD DS 데이터베이스 및 SYSVOL의 배치</span><span class="sxs-lookup"><span data-stu-id="fe649-498">Placement of hello Windows Server AD DS database and SYSVOL</span></span>](#BKMK_PlaceDB) |<span data-ttu-id="fe649-499">여기서 toostore Windows Server AD DS 데이터베이스, 로그 및 SYSVOL?</span><span class="sxs-lookup"><span data-stu-id="fe649-499">Where toostore Windows Server AD DS database, logs, and SYSVOL?</span></span> |<span data-ttu-id="fe649-500">Dcpromo.exe 기본값을 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-500">Change Dcpromo.exe default values.</span></span> <span data-ttu-id="fe649-501">이러한 중요한 Active Directory 파일은 쓰기 캐싱을 구현하는 운영 체제 디스크 대신 Azure Data Disks에 배치 *되어야* 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-501">These critical Active Directory files *must* be placed on Azure Data Disks instead of Operating System disks that implement write caching.</span></span> |
| [<span data-ttu-id="fe649-502">백업 및 복원</span><span class="sxs-lookup"><span data-stu-id="fe649-502">Backup and Restore</span></span>](#BKMK_BUR) |<span data-ttu-id="fe649-503">어떻게 toosafeguard 및 복구 데이터?</span><span class="sxs-lookup"><span data-stu-id="fe649-503">How toosafeguard and recover data?</span></span> |<span data-ttu-id="fe649-504">시스템 상태 백업 만들기</span><span class="sxs-lookup"><span data-stu-id="fe649-504">Create system state backups</span></span> |
| [<span data-ttu-id="fe649-505">페더레이션 서버 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-505">Federation server configuration</span></span>](#BKMK_FedSrvConfig) |<li><span data-ttu-id="fe649-506">Hello 클라우드에서 페더레이션이 포함 된 새 포리스트를 배포 합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-506">Deploy a new forest with federation in hello cloud?</span></span></li> <li><span data-ttu-id="fe649-507">온-프레미스 AD FS를 배포 하 고 hello 클라우드에서 프록시를 노출?</span><span class="sxs-lookup"><span data-stu-id="fe649-507">Deploy AD FS on-premises and expose a proxy in hello cloud?</span></span></li> |<li><span data-ttu-id="fe649-508">보안</span><span class="sxs-lookup"><span data-stu-id="fe649-508">Security</span></span></li> <li><span data-ttu-id="fe649-509">규정 준수</span><span class="sxs-lookup"><span data-stu-id="fe649-509">Compliance</span></span></li> <li><span data-ttu-id="fe649-510">비용</span><span class="sxs-lookup"><span data-stu-id="fe649-510">Cost</span></span></li> <li><span data-ttu-id="fe649-511">비즈니스 파트너에 의해 액세스 tooapplications</span><span class="sxs-lookup"><span data-stu-id="fe649-511">Access tooapplications by business partners</span></span></li> |
| [<span data-ttu-id="fe649-512">클라우드 서비스 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-512">Cloud services configuration</span></span>](#BKMK_CloudSvcConfig) |<span data-ttu-id="fe649-513">클라우드 서비스는 암시적으로 배포 하는 가상 컴퓨터를 만들면 처음으로 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-513">A cloud service is implicitly deployed hello first time you create a virtual machine.</span></span> <span data-ttu-id="fe649-514">Toodeploy 추가 클라우드 서비스를 필요 한가요?</span><span class="sxs-lookup"><span data-stu-id="fe649-514">Do you need toodeploy additional cloud services?</span></span> |<li><span data-ttu-id="fe649-515">VM 또는 Vm에 직접 표시 toohello 인터넷 필요 합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-515">Does a VM or VMs require direct exposure toohello Internet?</span></span></li> <li> <span data-ttu-id="fe649-516">부하 분산 hello 서비스 필요 합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-516">Does hello service require load-balancing?</span></span></li> |
| [<span data-ttu-id="fe649-517">공용 및 개인 IP 주소 지정(동적 IP 및 가상 IP)에 대한 페더레이션 서버 요구 사항</span><span class="sxs-lookup"><span data-stu-id="fe649-517">Federation server requirements for public and private IP addressing (dynamic IP vs. virtual IP)</span></span>](#BKMK_FedReqVIPDIP) |<li><span data-ttu-id="fe649-518">Windows Server AD FS hello 인스턴스 toobe hello 인터넷에서 직접 액세스 해야 합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-518">Does hello Windows Server AD FS instance need toobe reached directly from hello Internet?</span></span></li> <li><span data-ttu-id="fe649-519">Hello 클라우드에서 배포 되는 hello 응용 프로그램에 고유한 인터넷 연결 IP 주소와 포트 필요 합니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-519">Does hello application being deployed in hello cloud require its own Internet-facing IP address and port?</span></span></li> |<span data-ttu-id="fe649-520">배포에 필요한 각 가상 IP 주소에 대한 단일 클라우드 서비스 만들기</span><span class="sxs-lookup"><span data-stu-id="fe649-520">Create one cloud-service for each virtual IP address that is required by your deployment</span></span> |
| [<span data-ttu-id="fe649-521">Windows Server AD FS 고가용성 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-521">Windows Server AD FS high availability configuration</span></span>](#BKMK_ADFSHighAvail) |<li><span data-ttu-id="fe649-522">Windows Server AD FS 서버 팜에 있는 노드는 몇 개입니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-522">How many nodes in my Windows Server AD FS server farm?</span></span></li> <li><span data-ttu-id="fe649-523">내 Windows Server AD FS 프록시 팜에 노드 toodeploy 몇 개입니까?</span><span class="sxs-lookup"><span data-stu-id="fe649-523">How many nodes toodeploy in my Windows Server AD FS proxy farm?</span></span></li> |<span data-ttu-id="fe649-524">복원력 및 내결함성</span><span class="sxs-lookup"><span data-stu-id="fe649-524">Resiliency and fault tolerance</span></span> |

### <span data-ttu-id="fe649-525"><a name="BKMK_NetworkTopology"></a>네트워크 토폴로지</span><span class="sxs-lookup"><span data-stu-id="fe649-525"><a name="BKMK_NetworkTopology"></a>Network topology</span></span>
<span data-ttu-id="fe649-526">순서 toomeet hello IP 주소 일관성과 DNS 요구 사항을 Windows Server AD DS는 toofirst 만들기는 [Azure 가상 네트워크](../virtual-network/virtual-networks-overview.md) 및 가상 컴퓨터 tooit 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-526">In order toomeet hello IP address consistency and DNS requirements of Windows Server AD DS, it is necessary toofirst create an [Azure virtual network](../virtual-network/virtual-networks-overview.md) and attach your virtual machines tooit.</span></span> <span data-ttu-id="fe649-527">투명 하 게 연결 Azure 가상 네트워크 컴퓨터 tooon 온-프레미스 컴퓨터 toooptionally 연결 tooyour 온-프레미스 회사를 확장 하는지 여부를 결정 해야를 만드는 동안 — 기존 VPN 기술을 사용 하 여 그렇게 하 고 VPN 끝점 hello hello 회사 네트워크 가장자리에서 노출 되어야 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-527">During its creation, you must decide whether toooptionally extend connectivity tooyour on-premises corporate network, which transparently connects Azure virtual machines tooon-premises machines — this is achieved using traditional VPN technologies and requires that a VPN endpoint be exposed on hello edge of hello corporate network.</span></span> <span data-ttu-id="fe649-528">즉, VPN hello 하지 반대로 Azure toohello 회사 네트워크에서 시작 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-528">That is, hello VPN is initiated from Azure toohello corporate network, not vice-versa.</span></span>

<span data-ttu-id="fe649-529">Note 초과 hello 표준 요금 tooeach VM 가상 네트워크 tooyour 온-프레미스 네트워크를 확장 하는 경우 추가 요금이 적용 됨.</span><span class="sxs-lookup"><span data-stu-id="fe649-529">Note that additional charges apply when extending a virtual network tooyour on-premises network beyond hello standard charges that apply tooeach VM.</span></span> <span data-ttu-id="fe649-530">특히, hello VPN에서 온-프레미스 컴퓨터와 통신 하는 각 VM에서 생성 하는 송신 트래픽에 hello 및 hello Azure 가상 네트워크 게이트웨이의 CPU 시간에 대 한 요금이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-530">Specifically, there are charges for CPU time of hello Azure Virtual Network gateway and for hello egress traffic generated by each VM that communicates with on-premises machines across hello VPN.</span></span> <span data-ttu-id="fe649-531">네트워크 트래픽 요금에 대한 자세한 내용은 [한눈에 보는 Azure 가격 책정](http://azure.microsoft.com/pricing/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-531">For more information about network traffic charges, see [Azure pricing at-a-glance](http://azure.microsoft.com/pricing/).</span></span>

### <span data-ttu-id="fe649-532"><a name="BKMK_DeploymentConfig"></a>DC 배포 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-532"><a name="BKMK_DeploymentConfig"></a>DC deployment configuration</span></span>
<span data-ttu-id="fe649-533">hello hello 서비스에 대 한 hello 요구 사항에 따라 달라 집니다 DC를 구성 하는 hello 방법은 Azure에서 toorun을 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-533">hello way you configure hello DC depends on hello requirements for hello service you want toorun on Azure.</span></span> <span data-ttu-id="fe649-534">예를 들어 회사 포리스트에서 분리, 새 포리스트를 배포할 수 있는, toointernal 회사 리소스에 특정 하지 않은 액세스 하지만 디렉터리 서비스를 필요로 하는의 개념 증명, 새 응용 프로그램 또는 일부 기타 단기 프로젝트를 테스트 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-534">For example, you might deploy a new forest, isolated from your own corporate forest, for testing a proof-of-concept, a new application, or some other short term project that requires directory services but not specific access toointernal corporate resources.</span></span>

<span data-ttu-id="fe649-535">가지이 점으로, 분리 된 포리스트 DC를 복제 하지 않는 온-프레미스 Dc hello 시스템 자체에서 생성 되는 아웃 바운드 네트워크 트래픽을 직접 비용을 절감 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-535">As a benefit, an isolated forest DC does not replicate with on-premises DCs, resulting in less outbound network traffic generated by hello system itself, directly reducing costs.</span></span> <span data-ttu-id="fe649-536">네트워크 트래픽 요금에 대한 자세한 내용은 [한눈에 보는 Azure 가격 책정](http://azure.microsoft.com/pricing/)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-536">For more information about network traffic charges, see [Azure pricing at-a-glance](http://azure.microsoft.com/pricing/).</span></span>

<span data-ttu-id="fe649-537">또 다른 예로 서비스에 대 한 개인 정보 보호 요구 사항이 있는 있고 hello 서비스 액세스 tooyour에 종속 되어 있다고 가정 내부 Windows Server Active Directory 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-537">As another example, suppose you have privacy requirements for a service, but hello service depends on access tooyour internal Windows Server Active Directory.</span></span> <span data-ttu-id="fe649-538">Hello 클라우드에서 hello 서비스에 대 한 toohost 데이터, 허용 되는 경우 Azure에서 내부 포리스트에 대해 새 자식 도메인을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-538">If you are allowed toohost data for hello service in hello cloud, you might deploy a new child domain for your internal forest on Azure.</span></span> <span data-ttu-id="fe649-539">이 경우 hello 순서 toohelp 주소 개인 정보 보호 문제가에 글로벌 카탈로그) (없이 새로운 자식 도메인을 hello에 대 한 DC를 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-539">In this case, you can deploy a DC for hello new child domain (without hello global catalog in order toohelp address privacy concerns).</span></span> <span data-ttu-id="fe649-540">이 시나리오에서는 복제본 DC 배포와 함께 온-프레미스 DC와 연결하기 위한 가상 네트워크가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-540">This scenario, along with a replica DC deployment, requires a virtual network for connectivity with your on-premises DCs.</span></span>

<span data-ttu-id="fe649-541">새 포리스트를 만들 경우 선택 여부 toouse [Active Directory 트러스트](https://technet.microsoft.com/library/cc771397) 또는 [페더레이션 트러스트](https://technet.microsoft.com/library/dd807036)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-541">If you create a new forest, choose whether toouse [Active Directory trusts](https://technet.microsoft.com/library/cc771397) or [Federation trusts](https://technet.microsoft.com/library/dd807036).</span></span> <span data-ttu-id="fe649-542">호환성, 보안, 규정 준수, 비용 및 복원 력으로 지정 된 hello 요구 사항의 균형을 조정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-542">Balance hello requirements dictated by compatibility, security, compliance, cost, and resiliency.</span></span> <span data-ttu-id="fe649-543">예를 들어 tootake 활용 [선택적 인증](https://technet.microsoft.com/library/cc755844) toodeploy Azure에서 새 포리스트를 선택 하 고 hello 온-프레미스 포리스트와 클라우드 포리스트 hello 간에 Windows Server Active Directory 트러스트를 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-543">For example, tootake advantage of [selective authentication](https://technet.microsoft.com/library/cc755844) you might choose toodeploy a new forest on Azure and create a Windows Server Active Directory trust between hello on-premises forest and hello cloud forest.</span></span> <span data-ttu-id="fe649-544">그러나 hello 응용 프로그램은 클레임 인식, Active Directory 포리스트 트러스트 대신 페더레이션 트러스트를 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-544">If hello application is claims-aware, however, you might deploy federation trusts instead of Active Directory forest trusts.</span></span> <span data-ttu-id="fe649-545">또 다른 요인은 hello 비용 tooeither replicate 더 많은 데이터가 온-프레미스 Windows Server Active Directory toohello 클라우드를 확장 하 여 될 되거나 아웃 바운드 트래픽을 더 인증 및 쿼리 로드의 결과로 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-545">Another factor will be hello cost tooeither replicate more data by extending your on-premises Windows Server Active Directory toohello cloud or generate more outbound traffic as a result of authentication and query load.</span></span>

<span data-ttu-id="fe649-546">가용성 및 내결함성에 대한 요구 사항은 선택에도 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-546">Requirements for availability and fault tolerance also affect your choice.</span></span> <span data-ttu-id="fe649-547">예를 들어 hello 링크 중단 되 면 Kerberos 트러스트 또는 페더레이션 트러스트를 활용 하는 응용 프로그램은 모든 가능성이 않는 한 완전히 작동 Azure에 충분 한 인프라가 배포 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-547">For example, if hello link is interrupted, applications leveraging either a Kerberos trust or a federation trust are all likely entirely broken unless you have deployed sufficient infrastructure on Azure.</span></span> <span data-ttu-id="fe649-548">복제본 Dc와 같은 대체 배포 구성은 (쓰기 가능 또는 Rodc) 수 tootolerate 링크 중단 되 고 hello 가능성이 증가 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-548">Alternative deployment configurations such as replica DCs (writeable or RODCs) increase hello likelihood of being able tootolerate link outages.</span></span>

### <span data-ttu-id="fe649-549"><a name="BKMK_ADSiteTopology"></a>Windows Server Active Directory 사이트 토폴로지</span><span class="sxs-lookup"><span data-stu-id="fe649-549"><a name="BKMK_ADSiteTopology"></a>Windows Server Active Directory site topology</span></span>
<span data-ttu-id="fe649-550">하면 필요한 toocorrectly 정의 사이트 및 사이트 링크 순서 toooptimize 트래픽 고 비용을 최소화 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-550">You need toocorrectly define sites and site links in order toooptimize traffic and minimize cost.</span></span> <span data-ttu-id="fe649-551">사이트, 사이트 링크 및 서브넷 Dc와 인증 트래픽 흐름 hello 간의 hello 복제 토폴로지에 영향을 줍니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-551">Sites, site-links, and subnets affect hello replication topology between DCs and hello flow of authentication traffic.</span></span> <span data-ttu-id="fe649-552">트래픽 요금에 따라 hello 고려 배포 및 배포 시나리오의 toohello 요구 사항에 따라 Dc 구성:</span><span class="sxs-lookup"><span data-stu-id="fe649-552">Consider hello following traffic charges and then deploy and configure DCs according toohello requirements of your deployment scenario:</span></span>

* <span data-ttu-id="fe649-553">Hello 게이트웨이 자체에 대 한 시간당 아주 적은 수수료가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-553">There is a nominal fee per hour for hello gateway itself:</span></span>
  
  * <span data-ttu-id="fe649-554">필요에 따라 시작 및 중지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-554">It can be started and stopped as you see fit</span></span>
  * <span data-ttu-id="fe649-555">Azure Vm은 hello 회사 네트워크에서 분리를 중지 하면</span><span class="sxs-lookup"><span data-stu-id="fe649-555">If stopped, Azure VMs are isolated from hello corporate network</span></span>
* <span data-ttu-id="fe649-556">인바운드 트래픽은 무료입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-556">Inbound traffic is free</span></span>
* <span data-ttu-id="fe649-557">아웃 바운드 트래픽을 너무에 따라 청구 됩니다[가격에서 요약 Azure](http://azure.microsoft.com/pricing/)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-557">Outbound traffic is charged, according too[Azure pricing at-a-glance](http://azure.microsoft.com/pricing/).</span></span> <span data-ttu-id="fe649-558">다음과 같이 온-프레미스 사이트와 hello 클라우드 사이트 간의 사이트 링크 속성을 최적화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-558">You can optimize site link properties between on-premises sites and hello cloud sites as follows:</span></span>
  
  * <span data-ttu-id="fe649-559">여러 개의 가상 네트워크를 사용 하는 경우 구성 hello 사이트 링크 및 비용과 우선 순위를 정하여 hello Azure에서에서 Windows Server AD DS tooprevent 하나 위에 동일한 수준의 서비스 비용 없이 hello를 제공할 수 있는 사이트 적절 하 게 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-559">If you are using multiple virtual networks, configure hello site-links and their costs appropriately tooprevent Windows Server AD DS from prioritizing hello Azure site over one that can provide hello same levels of service at no charge.</span></span> <span data-ttu-id="fe649-560">모든 사이트 링크 (BASL) 옵션 (기본적으로 활성화 되어) hello 브리지를 사용 하지 않도록 설정 고려할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-560">You might also consider disabling hello Bridge all site link (BASL) option (which is enabled by default).</span></span> <span data-ttu-id="fe649-561">이렇게 하면 직접 연결된 사이트만 서로 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-561">This ensures that only directly-connected sites replicate with one another.</span></span> <span data-ttu-id="fe649-562">전이적으로 연결 된 사이트의 Dc는 더 이상 서로 직접 공동 수 tooreplicate 하지만 공통 사이트 또는 사이트를 통해 복제 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-562">DCs in transitively connected sites are no longer able tooreplicate directly with each other, but must replicate through a common site or sites.</span></span> <span data-ttu-id="fe649-563">어떤 이유로 중개 사이트 hello 없게, 전이적으로 연결 된 사이트의 Dc 간 복제 hello 사이트 간 연결을 사용할 수 있는 경우에 발생 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-563">If hello intermediary sites become unavailable for some reason, replication between DCs in transitively connected sites will not occur even if connectivity between hello sites is available.</span></span> <span data-ttu-id="fe649-564">마지막으로, 섹션 전이적 복제 동작이 바람직한을 유지 하는 경우 사이트 링크 브리지를 만듭니다 hello 적절 한 사이트 링크와 사이트, 온-프레미스, 회사 네트워크 사이트를 포함 하는 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-564">Finally, where sections of transitive replication behavior remain desirable, create site link bridges that contain hello appropriate site-links and sites, such as on-premises, corporate network sites.</span></span>
  * <span data-ttu-id="fe649-565">[사이트 링크 비용 구성](https://technet.microsoft.com/library/cc794882) 적절 하 게 tooavoid 의도 하지 않은 트래픽을 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-565">[Configure site link costs](https://technet.microsoft.com/library/cc794882) appropriately tooavoid unintended traffic.</span></span> <span data-ttu-id="fe649-566">예를 들어 경우 **가장 가까운 다음 사이트 시도** 설정을 사용 하는, hello Azure 사이트 백 toohello를 연결 하는 hello 사이트 링크 개체와 관련 된 hello 비용을 증가 시켜 사이트는 다음 hello 되지 있는지 hello 가상 네트워크를 가장 가까운 확인 회사 네트워크입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-566">For example, if **Try Next Closest Site** setting is enabled, make sure hello virtual network sites are not hello next closest by increasing hello cost associated of hello site-link object that connects hello Azure site back toohello corporate network.</span></span>
  * <span data-ttu-id="fe649-567">사이트 링크를 구성 [간격](https://technet.microsoft.com/library/cc794878) 및 [일정](https://technet.microsoft.com/library/cc816906) tooconsistency 요구 사항과 개체 변경 비율에 따라 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-567">Configure site link [intervals](https://technet.microsoft.com/library/cc794878) and [schedules](https://technet.microsoft.com/library/cc816906) according tooconsistency requirements and rate of object changes.</span></span> <span data-ttu-id="fe649-568">복제 일정을 대기 시간 허용치에 맞춥니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-568">Align replication schedule with latency tolerance.</span></span> <span data-ttu-id="fe649-569">Dc는 hello 복제 간격 감소 이면 충분 한 개체 변경 비율 비용을 절약할 수 있으므로 값의 마지막 상태 hello만 복제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-569">DCs replicate only hello last state of a value, so decreasing hello replication interval can save costs if there is a sufficient object change rate.</span></span>
* <span data-ttu-id="fe649-570">비용 최소화가 매우 중요한 경우 복제가 예약되었고 변경 알림이 활성화되지 않았는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-570">If minimizing costs is a priority, ensure replication is scheduled and change notification is not enabled.</span></span> <span data-ttu-id="fe649-571">사이트 간 복제 시 hello 기본 구성입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-571">This is hello default configuration when replicating between sites.</span></span> <span data-ttu-id="fe649-572">이 hello RODC는 아웃 바운드 변경을 복제 하지 않습니다는 RODC를 가상 네트워크에 배포 하는 경우에 중요 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-572">This is not important if you are deploying an RODC on a virtual network because hello RODC will not replicate any changes outbound.</span></span> <span data-ttu-id="fe649-573">하지만 쓰기 가능 DC를 배포 하는 경우 hello 사이트 링크 불필요 한 빈도로 구성된 tooreplicate 업데이트 아닌지 확인 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-573">But if you deploy a writable DC, you should make sure hello site link is not configured tooreplicate updates with unnecessary frequency.</span></span> <span data-ttu-id="fe649-574">(GC) 글로벌 카탈로그 서버를 배포 하는 경우는 GC가 포함 된 다른 모든 사이트가 원본 사이트 링크를 통해 연결 된 사이트의 DC에서에서 도메인 파티션을 복제 또는 hello Azure 사이트를 hello의 GC 보다 비용이 낮은 사이트 링크에 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-574">If you deploy a global catalog server (GC), make sure that every other site that contains a GC replicates domain partitions from a source DC in a site that is connected with a site-link or site-links that have a lower cost than hello GC in hello Azure site.</span></span>
* <span data-ttu-id="fe649-575">수 toofurther는 여전히 hello 복제 압축 알고리즘을 변경 하 여 사이트 간 복제에 의해 발생 하는 네트워크 트래픽이 감소 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-575">It is possible toofurther still reduce network traffic generated by replication between sites by changing hello replication compression algorithm.</span></span> <span data-ttu-id="fe649-576">hello 압축 알고리즘 hello REG_DWORD 레지스트리 항목 HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\NTDS\Parameters\Replicator compression algorithm으로 제어 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-576">hello compression algorithm is controlled by hello REG_DWORD registry entry HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\NTDS\Parameters\Replicator compression algorithm.</span></span> <span data-ttu-id="fe649-577">hello 기본값은 3, toohello Xpress 압축 알고리즘을 연관 시킵니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-577">hello default value is 3, which correlates toohello Xpress Compress algorithm.</span></span> <span data-ttu-id="fe649-578">변경 내용을 hello 알고리즘 tooMSZip hello 값 too2, 변경할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-578">You can change hello value too2, which changes hello algorithm tooMSZip.</span></span> <span data-ttu-id="fe649-579">대부분의 경우에서 이렇게 하면 hello 압축 증가 하지만 CPU 사용률의 hello 부담을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-579">In most cases, this will increase hello compression, but it does so at hello expense of CPU utilization.</span></span> <span data-ttu-id="fe649-580">자세한 내용은 [Active Directory 복제 토폴로지 작동 방법](https://technet.microsoft.com/library/cc755994)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-580">For more information, see [How Active Directory replication topology works](https://technet.microsoft.com/library/cc755994).</span></span>

### <span data-ttu-id="fe649-581"><a name="BKMK_IPAddressDNS"></a>IP 주소 지정 및 DNS</span><span class="sxs-lookup"><span data-stu-id="fe649-581"><a name="BKMK_IPAddressDNS"></a>IP addressing and DNS</span></span>
<span data-ttu-id="fe649-582">Azure 가상 컴퓨터는 기본적으로 "DHCP 임대 주소"로 할당됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-582">Azure virtual machines are allocated “DHCP-leased addresses” by default.</span></span> <span data-ttu-id="fe649-583">Azure 가상 네트워크 동적 주소가 가상 컴퓨터와 hello 가상 컴퓨터의 hello 수명 동안 지속, 되기 때문에 Windows Server AD DS의 hello 요구 사항이 충족 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-583">Because Azure virtual network dynamic addresses persist with a virtual machine for hello lifetime of hello virtual machine, hello requirements of Windows Server AD DS are met.</span></span>

<span data-ttu-id="fe649-584">결과적으로, Azure에서 동적 주소를 사용 하는 경우 hello 임대 기간 동안 hello 라우팅할 수이 고 hello 임대 기간이 hello는 hello 클라우드 서비스의 수명과 같은 toohello 때문에 고정 IP 주소를 사용 하는 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-584">As a result, when you use a dynamic address on Azure, you are in effect using a static IP address because it is routable for hello period of hello lease, and hello period of hello lease is equal toohello lifetime of hello cloud service.</span></span>

<span data-ttu-id="fe649-585">그러나 hello VM이 종료 하는 경우 hello 동적 주소가 할당 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-585">However, hello dynamic address is deallocated if hello VM is shutdown.</span></span> <span data-ttu-id="fe649-586">tooprevent hello IP 주소 할당 취소를 할 수 있습니다 [Set-azurestaticvnetip tooassign 고정 IP 주소를 사용 하 여](http://social.technet.microsoft.com/wiki/contents/articles/23447.how-to-assign-a-private-static-ip-to-an-azure-vm.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-586">tooprevent hello IP address from being deallocated, you can [use Set-AzureStaticVNetIP tooassign a static IP address](http://social.technet.microsoft.com/wiki/contents/articles/23447.how-to-assign-a-private-static-ip-to-an-azure-vm.aspx).</span></span>

<span data-ttu-id="fe649-587">이름 확인을 위해 배포 사용자 고유의 (또는 기존 활용) DNS 서버 인프라; Azure 제공 DNS 이름 확인 요구 사항을 Windows Server AD DS의 고급 hello를 충족 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-587">For name resolution, deploy your own (or leverage your existing) DNS server infrastructure; Azure-provided DNS does not meet hello advanced name resolution needs of Windows Server AD DS.</span></span> <span data-ttu-id="fe649-588">예를 들어 동적 SRV 레코드 등을 지원하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-588">For example, it does not support dynamic SRV records, and so on.</span></span> <span data-ttu-id="fe649-589">이름 확인은 DC 및 도메인에 가입된 클라이언트에 대한 중요한 구성 항목입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-589">Name resolution is a critical configuration item for DCs and domain-joined clients.</span></span> <span data-ttu-id="fe649-590">DC는 리소스 레코드를 등록하고 다른 DC의 리소스 레코드를 해결해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-590">DCs must be capable of registering resource records and resolving other DC’s resource records.</span></span>
<span data-ttu-id="fe649-591">내결함성과 성능상의 이유로 것은 Azure에서 실행 하는 hello Dc 최적의 tooinstall hello Windows Server DNS 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-591">For fault tolerance and performance reasons, it is optimal tooinstall hello Windows Server DNS service on hello DCs running on Azure.</span></span> <span data-ttu-id="fe649-592">Hello 이름과 hello DNS 서버의 IP 주소가 있는 hello Azure 가상 네트워크 속성을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-592">Then configure hello Azure virtual network properties with hello name and IP address of hello DNS server.</span></span> <span data-ttu-id="fe649-593">Hello 가상 네트워크의 다른 Vm 시작 hello 동적 IP 주소 할당의 일부로 DNS 서버를 통해 해당 DNS 클라이언트 확인자 설정이 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-593">When other VMs on hello virtual network start, their DNS client resolver settings will be configured with DNS server as part of hello dynamic IP address allocation.</span></span>

> [!NOTE]
> <span data-ttu-id="fe649-594">Hello 인터넷을 통해 직접 Azure에서 호스트 되는 온-프레미스 컴퓨터 tooa Windows Server AD DS Active Directory 도메인에 가입할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-594">You cannot join on-premises computers tooa Windows Server AD DS Active Directory domain that is hosted on Azure directly over hello Internet.</span></span> <span data-ttu-id="fe649-595">Active Directory 및 도메인 가입 작업 hello 렌더링 비현실적 toodirectly 노출 hello 필요한 포트에 대 한와 사실상 전체 DC toohello 인터넷 포트 요구 사항 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-595">hello port requirements for Active Directory and hello domain-join operation render it impractical toodirectly expose hello necessary ports and in effect, an entire DC toohello Internet.</span></span>
> 
> 

<span data-ttu-id="fe649-596">VM은 시작 시 또는 이름 변경 내용이 있을 때 자동으로 해당 DNS 이름을 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-596">VMs register their DNS name automatically on startup or when there is a name change.</span></span>

<span data-ttu-id="fe649-597">이 예제에서 및 tooprovision 첫 번째 VM hello 하 고에 AD DS를 설치 하는 방법을 보여 주는 또 다른 예에 대 한 자세한 내용은 참조 [Microsoft Azure에서 새로운 Active Directory 포리스트 설치](active-directory-new-forest-virtual-machine.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-597">For more information about this example and another example that shows how tooprovision hello first VM and install AD DS on it, see [Install a new Active Directory forest on Microsoft Azure](active-directory-new-forest-virtual-machine.md).</span></span> <span data-ttu-id="fe649-598">Windows PowerShell 사용에 대한 자세한 내용은 [Azure PowerShell 설치](/powershell/azureps-cmdlets-docs) 및 [Azure 관리 Cmdlet](/powershell/module/azurerm.compute/#virtual_machines)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-598">For more information about using Windows PowerShell, see [Install Azure PowerShell](/powershell/azureps-cmdlets-docs) and [Azure Management Cmdlets](/powershell/module/azurerm.compute/#virtual_machines).</span></span>

### <span data-ttu-id="fe649-599"><a name="BKMK_DistributedDCs"></a>지리적으로 분산된 DC</span><span class="sxs-lookup"><span data-stu-id="fe649-599"><a name="BKMK_DistributedDCs"></a>Geo-distributed DCs</span></span>
<span data-ttu-id="fe649-600">Azure는 서로 다른 가상 네트워크에 여러 DC를 호스팅하는 경우 이점을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-600">Azure offers advantages when hosting multiple DCs on different virtual networks:</span></span>

* <span data-ttu-id="fe649-601">다중 사이트 내결함성</span><span class="sxs-lookup"><span data-stu-id="fe649-601">Multi-site fault-tolerance</span></span>
* <span data-ttu-id="fe649-602">물리적으로 접근 toobranch 사무실 (낮은 대기 시간)</span><span class="sxs-lookup"><span data-stu-id="fe649-602">Physical proximity toobranch offices (lower latency)</span></span>

<span data-ttu-id="fe649-603">가상 네트워크 간의 직접 통신을 구성 하는 방법에 대 한 정보를 참조 하십시오. [가상 네트워크 toovirtual 네트워크 연결을 구성](../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-603">For information about configuring direct communication between virtual networks, see [Configure virtual network toovirtual network connectivity](../vpn-gateway/virtual-networks-configure-vnet-to-vnet-connection.md).</span></span>

### <span data-ttu-id="fe649-604"><a name="BKMK_RODC"></a>읽기 전용 DC</span><span class="sxs-lookup"><span data-stu-id="fe649-604"><a name="BKMK_RODC"></a>Read-only DCs</span></span>
<span data-ttu-id="fe649-605">Toodeploy 읽기 지 toochoose 필요-유일한 아니면 쓰기 가능 Dc입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-605">You need toochoose whether toodeploy read-only or writeable DCs.</span></span> <span data-ttu-id="fe649-606">물리적으로 제어를 없을 것 이지만 Rodc는 위험한 클라이언트, 지점과 같이 물리적 보안 위치에서 배포 하는 디자인 된 toobe 때문에 저장할된 toodeploy Rodc를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-606">You might be inclined toodeploy RODCs because you will not have physical control over them, but RODCs are designed toobe deployed in locations where their physical security is at risk, such as branch offices.</span></span>

<span data-ttu-id="fe649-607">Azure hello 분기 지점의 물리적 보안 위험을 표시 하지 않는 않지만 Rodc 있습니다 toobe 비용 효율이 hello 지 원하는 기능으로는 전혀 다른 이유로 하지만 잘 맞는 toothese 환경 때문에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-607">Azure does not present hello physical security risk of a branch office, but RODCs might still prove toobe more cost effective because hello features they provide are well-suited toothese environments albeit for very different reasons.</span></span> <span data-ttu-id="fe649-608">예를 들어 Rodc에는 아웃 바운드 복제 하지을 수 tooselectively 됩니다 한 암호 (암호)를 채웁니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-608">For example, RODCs have no outbound replication and are able tooselectively populate secrets (passwords).</span></span> <span data-ttu-id="fe649-609">이 암호가 없는 hello hello 단점은에서 요청 시 아웃 바운드 트래픽을 toovalidate 필요할 수 있습니다 때 사용자 또는 컴퓨터를 인증 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-609">On hello downside, hello lack of these secrets might require on-demand outbound traffic toovalidate them as a user or computer authenticates.</span></span> <span data-ttu-id="fe649-610">그러나 암호는 선택적으로 미리 채워지고 캐시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-610">But secrets can be selectively prepopulated and cached.</span></span>

<span data-ttu-id="fe649-611">Rodc 중요 한 데이터 toohello RODC 포함 된 특성 된 특성 집합 fas (복제가)를 추가할 수 있으므로에 그리고 HBI 및 PII 문제와 관련 하 여 추가 이점을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-611">RODCs provide an additional advantage in and around HBI and PII concerns because you can add attributes that contain sensitive data toohello RODC filtered attribute set (FAS).</span></span> <span data-ttu-id="fe649-612">hello FAS는 사용자 지정 가능한 집합 복제 tooRODCs 없는 특성입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-612">hello FAS is a customizable set of attributes that are not replicated tooRODCs.</span></span> <span data-ttu-id="fe649-613">허용 되지 않거나 toostore PII 또는 HBI Azure에서 원하지 않는 경우 hello FAS를 안전 장치로 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-613">You can use hello FAS as a safeguard in case you are not permitted or do not want toostore PII or HBI on Azure.</span></span> <span data-ttu-id="fe649-614">자세한 내용은 RODC 필터링된 특성 집합[(https://technet.microsoft.com/library/cc753459)]을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-614">For more information, see [RODC filtered attribute set[(https://technet.microsoft.com/library/cc753459)].</span></span>

<span data-ttu-id="fe649-615">응용 프로그램이 Rodc와 호환 되도록 확인 toouse를 계획 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-615">Make sure that applications will be compatible with RODCs you plan toouse.</span></span> <span data-ttu-id="fe649-616">많은 Windows Server Active Directory 사용 응용 프로그램, Rodc와 잘 작동 하지만 일부 응용 프로그램 액세스 tooa 없는 경우 실패 또는 비효율적으로 수행할 수 쓰기 가능 DC입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-616">Many Windows Server Active Directory-enabled applications work well with RODCs, but some applications can perform inefficiently or fail if they do not have access tooa writable DC.</span></span> <span data-ttu-id="fe649-617">자세한 내용은 [읽기 전용 DC 응용 프로그램 호환성 가이드](https://technet.microsoft.com/library/cc755190)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-617">For more information, see [Read-Only DCs application compatibility guide](https://technet.microsoft.com/library/cc755190).</span></span>

### <span data-ttu-id="fe649-618"><a name="BKMK_GC"></a>글로벌 카탈로그</span><span class="sxs-lookup"><span data-stu-id="fe649-618"><a name="BKMK_GC"></a>Global catalog</span></span>
<span data-ttu-id="fe649-619">Toochoose 여부 필요한 tooinstall 글로벌 카탈로그 (GC).</span><span class="sxs-lookup"><span data-stu-id="fe649-619">You need toochoose whether tooinstall a global catalog (GC).</span></span> <span data-ttu-id="fe649-620">단일 도메인 포리스트에서 모든 DC를 글로벌 카탈로그 서버로 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-620">In a single domain forest, you should configure all DCs as global catalog servers.</span></span> <span data-ttu-id="fe649-621">추가 복제 트래픽이 없기 때문에 비용이 증가하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-621">It will not increase costs because there will be no additional replication traffic.</span></span>

<span data-ttu-id="fe649-622">다중 도메인 포리스트의 경우 Gc hello 인증 프로세스 중 필요한 tooexpand 유니버설 그룹 멤버 자격을는 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-622">In a multidomain forest, GCs are necessary tooexpand Universal Group memberships during hello authentication process.</span></span> <span data-ttu-id="fe649-623">GC를 배포 하지 않는 경우 Azure에서 DC에 대해 인증 하는 hello 가상 네트워크에 대 한 작업은 간접적으로 생성 아웃 바운드 인증 트래픽을 tooquery Gc 온-프레미스 각 인증 시도 중입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-623">If you do not deploy a GC, workloads on hello virtual network that authenticate against a DC on Azure will indirectly generate outbound authentication traffic tooquery GCs on-premises during each authentication attempt.</span></span>

<span data-ttu-id="fe649-624">hello 비용 Gc와 관련 된는 모든 도메인 (부분에서)를 호스트 하기 때문에 예측 하기가 어렵습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-624">hello costs associated with GCs are less-predictable because they host every domain (in-part).</span></span> <span data-ttu-id="fe649-625">인터넷 서비스를 호스트 하 고 Windows Server AD DS에 대해 사용자를 인증 하는 hello 작업을 하는 경우 hello 비용은 완전히 예측 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-625">If hello workload hosts an Internet-facing service and authenticates users against Windows Server AD DS, hello costs could be completely unpredictable.</span></span> <span data-ttu-id="fe649-626">toohelp 인증 하는 동안 hello 클라우드 사이트 외부의 GC 쿼리를 줄일 수 있습니다, [유니버설 그룹 구성원 자격 캐싱을 사용 하도록 설정](https://technet.microsoft.com/library/cc816928)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-626">toohelp reduce GC queries outside of hello cloud site during authentication, you can [enable Universal Group Membership Caching](https://technet.microsoft.com/library/cc816928).</span></span>

### <span data-ttu-id="fe649-627"><a name="BKMK_InstallMethod"></a>설치 방법</span><span class="sxs-lookup"><span data-stu-id="fe649-627"><a name="BKMK_InstallMethod"></a>Installation method</span></span>
<span data-ttu-id="fe649-628">Toochoose를 어떻게 해야 hello 가상 네트워크에서 Dc tooinstall hello:</span><span class="sxs-lookup"><span data-stu-id="fe649-628">You need toochoose how tooinstall hello DCs on hello virtual network:</span></span>

* <span data-ttu-id="fe649-629">새 DC를 승격합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-629">Promote new DCs.</span></span> <span data-ttu-id="fe649-630">자세한 내용은 [Azure 가상 네트워크에 새 Active Directory 포리스트 설치](active-directory-new-forest-virtual-machine.md)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-630">For more information, see [Install a new Active Directory forest on an Azure virtual network](active-directory-new-forest-virtual-machine.md).</span></span>
* <span data-ttu-id="fe649-631">Hello 온-프레미스 가상 DC toohello 클라우드의 VHD를 이동 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-631">Move hello VHD of an on-premises virtual DC toohello cloud.</span></span> <span data-ttu-id="fe649-632">이 경우 해당 hello 온-프레미스 가상 DC "이동" 없습니다 "복사" 또는 "복제 된". 있어야</span><span class="sxs-lookup"><span data-stu-id="fe649-632">In this case, you must ensure that hello on-premises virtual DC is “moved,” not “copied” or “cloned.”</span></span>

<span data-ttu-id="fe649-633">Dc에 대 한 (것과 반대로 tooAzure "웹" 또는 "작업자" 역할 Vm)로 Azure 가상 컴퓨터를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-633">Use only Azure virtual machines for DCs (as opposed tooAzure “web” or “worker” role VMs).</span></span> <span data-ttu-id="fe649-634">지속성이 있으며 DC에 대한 상태의 내구성이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-634">They are durable and durability of state for a DC is required.</span></span> <span data-ttu-id="fe649-635">Azure 가상 컴퓨터는 DC와 같은 작업을 위해 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-635">Azure virtual machines are designed for workloads such as DCs.</span></span>

<span data-ttu-id="fe649-636">Dc를 복제 하거나 toodeploy SYSPREP를 사용 하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="fe649-636">Do not use SYSPREP toodeploy or clone DCs.</span></span> <span data-ttu-id="fe649-637">hello 기능 tooclone Dc는 Windows Server 2012부터 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-637">hello ability tooclone DCs is only available beginning in Windows Server 2012.</span></span> <span data-ttu-id="fe649-638">복제 기능 hello hello 기본 하이퍼바이저에서 VMGenerationID에 대 한 지원이 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-638">hello cloning feature requires support for VMGenerationID in hello underlying hypervisor.</span></span> <span data-ttu-id="fe649-639">Windows Server 2012 및 Azure 가상 네트워크의 Hyper-V는 모두 타사 가상화 소프트웨어 공급 업체와 마찬가지로 VMGenerationID를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-639">Hyper-V in Windows Server 2012 and Azure virtual networks both support VMGenerationID, as do third-party virtualization software vendors.</span></span>

### <span data-ttu-id="fe649-640"><a name="BKMK_PlaceDB"></a>Hello Windows Server AD DS 데이터베이스 및 SYSVOL의 배치</span><span class="sxs-lookup"><span data-stu-id="fe649-640"><a name="BKMK_PlaceDB"></a>Placement of hello Windows Server AD DS database and SYSVOL</span></span>
<span data-ttu-id="fe649-641">Windows Server AD DS 데이터베이스, 로그 및 SYSVOL toolocate hello 하는 위치를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-641">Select where toolocate hello Windows Server AD DS database, logs, and SYSVOL.</span></span> <span data-ttu-id="fe649-642">Azure 데이터 디스크에 배포해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-642">They must be deployed on Azure Data disks.</span></span>

> [!NOTE]
> <span data-ttu-id="fe649-643">Azure 데이터 디스크는 제한 된 too1 TB입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-643">Azure Data disks are constrained too1 TB.</span></span>
> 
> 

<span data-ttu-id="fe649-644">데이터 디스크 드라이브는 기본적으로 쓰기를 캐시하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-644">Data disk drives do not cache writes by default.</span></span> <span data-ttu-id="fe649-645">데이터 디스크 드라이브는 연결 된 tooa VM은 쓰기 캐싱을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-645">Data disk drives that are attached tooa VM use write-through caching.</span></span> <span data-ttu-id="fe649-646">쓰기-캐싱을 통해을 사용 하면 있는지 hello 쓰기는 커밋된 toodurable Azure 저장소 hello hello VM의 운영 체제 측면에서 hello 트랜잭션이 완료 되기 전에입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-646">Write-through caching makes sure hello write is committed toodurable Azure storage before hello transaction is complete from hello perspective of hello VM’s operating system.</span></span> <span data-ttu-id="fe649-647">쓰기 속도가 약간 느려지는의 hello 부담 내 구성을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-647">It provides durability, at hello expense of slightly slower writes.</span></span>

<span data-ttu-id="fe649-648">이 쓰기 디스크 캐싱이 DC hello 가정을 무효화 하기 때문에 Windows Server AD DS에 대 한 중요 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-648">This is important for Windows Server AD DS because write-behind disk-caching invalidates assumptions made by hello DC.</span></span> <span data-ttu-id="fe649-649">Windows Server AD DS 시도 toodisable 쓰기 캐싱을 이지만 toohello 디스크 IO 시스템 toohonor을 것입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-649">Windows Server AD DS attempts toodisable write caching but it is up toohello disk IO system toohonor it.</span></span> <span data-ttu-id="fe649-650">오류 toodisable 쓰기 캐싱을 수, 특정 상황에서 USN 롤백이 생성 되어 느린 개체와 다른 문제입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-650">Failure toodisable write caching may, under certain circumstances, introduce USN rollback resulting in lingering objects and other problems.</span></span>

<span data-ttu-id="fe649-651">가상 Dc에 대 한 모범 사례로 수행 hello를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-651">As a best practice for virtual DCs, do hello following:</span></span>

* <span data-ttu-id="fe649-652">None hello Azure 데이터 디스크에 hello 호스트 캐시 기본 설정을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-652">Set hello Host Cache Preference setting on hello Azure data disk for NONE.</span></span> <span data-ttu-id="fe649-653">이는 AD DS 작업에 대한 쓰기 캐싱을 사용하여 문제를 방지합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-653">This prevents issues with write caching for AD DS operations.</span></span>
* <span data-ttu-id="fe649-654">동일한 데이터 디스크 또는 데이터 디스크를 분리 하는 hello에 hello 데이터베이스, 로그 및 SYSVOL을 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-654">Store hello database, logs, and SYSVOL on hello either same data disk or separate data disks.</span></span> <span data-ttu-id="fe649-655">일반적으로 이것이 hello 운영 체제 자체에 사용 되는 hello 디스크에서 별도 디스크입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-655">Typically, this is a separate disk from hello disk used for hello operating system itself.</span></span> <span data-ttu-id="fe649-656">hello 요점은 hello Windows Server AD DS 데이터베이스 및 SYSVOL Azure 운영 체제 디스크 유형에 저장 되지 않아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-656">hello key takeaway is that hello Windows Server AD DS database and SYSVOL must not be stored on an Azure Operating System disk type.</span></span> <span data-ttu-id="fe649-657">기본적으로 hello AD DS 설치 프로세스 이러한 구성 요소를 설치 Azure에 대 한 권장 되지 않는 %systemroot% 폴더에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-657">By default, hello AD DS installation process installs these components in %systemroot% folder, which is NOT recommended for Azure.</span></span>

### <span data-ttu-id="fe649-658"><a name="BKMK_BUR"></a>백업 및 복원</span><span class="sxs-lookup"><span data-stu-id="fe649-658"><a name="BKMK_BUR"></a>Backup and restore</span></span>
<span data-ttu-id="fe649-659">일반적으로 DC 및 보다 구체적으로 VM에서 실행되는 것의 백업 및 복원에 지원되는 것과 지원되지 않는 것을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-659">Be aware of what is and is not supported for backup and restore of a DC in general, and more specifically, those running in a VM.</span></span> <span data-ttu-id="fe649-660">[가상화된 DC에 대한 백업 및 복원 고려 사항](https://technet.microsoft.com/library/virtual_active_directory_domain_controller_virtualization_hyperv#backup_and_restore_considerations_for_virtualized_domain_controllers)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-660">See [Backup and Restore Considerations for Virtualized DCs](https://technet.microsoft.com/library/virtual_active_directory_domain_controller_virtualization_hyperv#backup_and_restore_considerations_for_virtualized_domain_controllers).</span></span>

<span data-ttu-id="fe649-661">Windows Server 백업과 같은 Windows Server AD DS에 대한 백업 요구 사항을 특별히 인식하는 백업 소프트웨어만을 사용하여 시스템 상태 백업을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-661">Create system state backups by using only backup software that is specifically aware of backup requirements for Windows Server AD DS, such as Windows Server Backup.</span></span>

<span data-ttu-id="fe649-662">정기 백업을 수행하는 대신 DC의 VHD 파일을 복사하거나 복제하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="fe649-662">Do not copy or clone VHD files of DCs instead of performing regular backups.</span></span> <span data-ttu-id="fe649-663">복원이 필요한 경우 Windows Server 2012 및 지원되는 하이퍼바이저 없이 복제되거나 복사된 VHD를 사용하여 수행하면 USN 거품이 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-663">Should a restore ever be required, doing so using cloned or copied VHDs without Windows Server 2012 and a supported hypervisor will introduce USN bubbles.</span></span>

### <span data-ttu-id="fe649-664"><a name="BKMK_FedSrvConfig"></a>페더레이션 서버 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-664"><a name="BKMK_FedSrvConfig"></a>Federation server configuration</span></span>
<span data-ttu-id="fe649-665">Windows Server AD FS 페더레이션 서버 (Sts)의 hello 구성 여부 hello toodeploy Azure에서 지정 하는 응용 프로그램 필요 tooaccess 온-프레미스 네트워크에 있는 리소스에 일부 의존 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-665">hello configuration of Windows Server AD FS federation servers (STSs) depends in part on whether hello applications that you want toodeploy on Azure need tooaccess resources on your on-premises network.</span></span>

<span data-ttu-id="fe649-666">Hello 다음 조건을 충족 하는 hello 응용 프로그램을 온-프레미스 네트워크에서 격리 된 상태로 hello 응용 프로그램을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-666">If hello applications meet hello following criteria, you could deploy hello applications in isolation from your on-premises network.</span></span>

* <span data-ttu-id="fe649-667">SAML 보안 토큰에 동의합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-667">They accept SAML security tokens</span></span>
* <span data-ttu-id="fe649-668">노출 가능한 경우 toohello 인터넷은</span><span class="sxs-lookup"><span data-stu-id="fe649-668">They are exposable toohello Internet</span></span>
* <span data-ttu-id="fe649-669">온-프레미스 리소스에 액세스하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-669">They do not access on-premises resources</span></span>

<span data-ttu-id="fe649-670">이 경우 Windows Server AD FS STS를 다음과 같이 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-670">In this case, configure Windows Server AD FS STSs as follows:</span></span>

1. <span data-ttu-id="fe649-671">Azure에서 분리된 단일 도메인 포리스트를 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-671">Configure an isolated single-domain forest on Azure.</span></span>
2. <span data-ttu-id="fe649-672">Windows Server AD FS 페더레이션 서버 팜을 구성 하 여 toohello 포리스트에 대 한 페더레이션된 액세스를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-672">Provide federated access toohello forest by configuring a Windows Server AD FS federation server farm.</span></span>
3. <span data-ttu-id="fe649-673">Hello 온-프레미스 포리스트에서 Windows Server AD FS (페더레이션 서버 팜 및 페더레이션 서버 프록시 팜을)를 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-673">Configure Windows Server AD FS (federation server farm and federation server proxy farm) in hello on-premises forest.</span></span>
4. <span data-ttu-id="fe649-674">Hello 온-프레미스 및 Windows Server AD FS의 Azure 인스턴스 간에 페더레이션 트러스트 관계를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-674">Establish a federation trust relationship between hello on-premises and Azure instances of Windows Server AD FS.</span></span>

<span data-ttu-id="fe649-675">다른 손 hello, hello에 해야 경우 tooon 온-프레미스 리소스에 액세스도 구성할 수 있습니다 Windows Server AD FS를 Azure에서 응용 프로그램 hello 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-675">On hello other hand, if hello applications require access tooon-premises resources, you could configure Windows Server AD FS with hello application on Azure as follows:</span></span>

1. <span data-ttu-id="fe649-676">온-프레미스 네트워크와 Azure 간의 연결을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-676">Configure connectivity between on-premises networks and Azure.</span></span>
2. <span data-ttu-id="fe649-677">Hello 온-프레미스 포리스트에서 Windows Server AD FS 페더레이션 서버 팜을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-677">Configure a Windows Server AD FS federation server farm in hello on-premises forest.</span></span>
3. <span data-ttu-id="fe649-678">Azure에서 Windows Server AD FS 페더레이션 서버 프록시 팜을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-678">Configure a Windows Server AD FS federation server proxy farm on Azure.</span></span>

<span data-ttu-id="fe649-679">이 구성은 hello 비슷한 tooconfiguring Windows Server AD FS 응용 프로그램과 함께 경계 네트워크에 온-프레미스 리소스의 hello 노출을 줄이는 이점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-679">This configuration has hello advantage of reducing hello exposure of on-premises resources, similar tooconfiguring Windows Server AD FS with applications in a perimeter network.</span></span>

<span data-ttu-id="fe649-680">어느 시나리오에서든 B2B 공동 작업이 필요한 경우 더 많은 ID 공급자로 트러스트 관계를 설정할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-680">Note that in either scenario, you can establish trusts relationships with more identity providers, if business-to-business collaboration is needed.</span></span>

### <span data-ttu-id="fe649-681"><a name="BKMK_CloudSvcConfig"></a>클라우드 서비스 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-681"><a name="BKMK_CloudSvcConfig"></a>Cloud services configuration</span></span>
<span data-ttu-id="fe649-682">클라우드 서비스는 직접 인터넷 toohello 또는 tooexpose 인터넷 연결 부하 분산 된 VM tooexpose를 높이려는 경우 응용 프로그램입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-682">Cloud services are necessary if you want tooexpose a VM directly toohello Internet or tooexpose an Internet-facing load-balanced application.</span></span> <span data-ttu-id="fe649-683">각 클라우드 서비스는 단일 구성 가능한 가상 IP 주소를 제공하기 때문에 이것이 가능합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-683">This is possible because each cloud service offers a single configurable virtual IP address.</span></span>

### <span data-ttu-id="fe649-684"><a name="BKMK_FedReqVIPDIP"></a>공용 및 개인 IP 주소 지정(동적 IP 및 가상 IP)에 대한 페더레이션 서버 요구 사항</span><span class="sxs-lookup"><span data-stu-id="fe649-684"><a name="BKMK_FedReqVIPDIP"></a>Federation server requirements for public and private IP addressing (dynamic IP vs. virtual IP)</span></span>
<span data-ttu-id="fe649-685">각 Azure 가상 컴퓨터는 동적 IP 주소를 받습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-685">Each Azure virtual machine receives a dynamic IP address.</span></span> <span data-ttu-id="fe649-686">동적 IP 주소는 Azure 내에서만 액세스할 수 있는 개인 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-686">A dynamic IP address is a private address accessible only within Azure.</span></span> <span data-ttu-id="fe649-687">그러나 대부분의 경우에서 됩니다 필요한 tooconfigure Windows Server AD FS 배포에 대 한 가상 IP 주소.</span><span class="sxs-lookup"><span data-stu-id="fe649-687">In most cases, however, it will be necessary tooconfigure a virtual IP address for your Windows Server AD FS deployments.</span></span> <span data-ttu-id="fe649-688">hello 가상 IP 필요한 tooexpose Windows Server AD FS 끝점 toohello 인터넷 이며 인증 및 지속적인 관리에 대 한 페더레이션된 파트너와 클라이언트에서 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-688">hello virtual IP is necessary tooexpose Windows Server AD FS endpoints toohello Internet, and will be used by federated partners and clients for authentication and ongoing management.</span></span> <span data-ttu-id="fe649-689">가상 IP 주소는 하나 이상의 Azure 가상 컴퓨터를 포함하는 클라우드 서비스의 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-689">A virtual IP address is a property of a cloud service which contains one or more Azure virtual machines.</span></span> <span data-ttu-id="fe649-690">Azure와 Windows Server AD FS에 배포 된 hello 클레임 인식 응용 프로그램은 공통 포트를 모두 인터넷 연결 및 공유, 각각 자체의 가상 IP 주소에 필요 하 고 hello 응용 프로그램에 대 한 필요한 toocreate 한 클라우드 서비스 수 없으므로 및 Windows Server AD FS에 대 한 두 번째.</span><span class="sxs-lookup"><span data-stu-id="fe649-690">If hello claims-aware application deployed on Azure and Windows Server AD FS are both Internet-facing and share common ports, each will require a virtual IP address of its own and it will therefore be necessary toocreate one cloud service for hello application and a second for Windows Server AD FS.</span></span>

<span data-ttu-id="fe649-691">Hello 용어 가상 IP 주소 및 IP 주소를 동적 정의 참조 하십시오. [용어 및 정의](#BKMK_Glossary)합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-691">For definitions of hello terms virtual IP address and dynamic IP address, see [Terms and definitions](#BKMK_Glossary).</span></span>

### <span data-ttu-id="fe649-692"><a name="BKMK_ADFSHighAvail"></a>Windows Server AD FS 고가용성 구성</span><span class="sxs-lookup"><span data-stu-id="fe649-692"><a name="BKMK_ADFSHighAvail"></a>Windows Server AD FS high availability configuration</span></span>
<span data-ttu-id="fe649-693">가능한 toodeploy 독립 실행형 Windows Server AD FS 페더레이션 서비스 이지만, AD FS STS 및 프로덕션 환경에 대 한 프록시를 모두에 대해 두 개 이상의 노드가 있는 팜이 toodeploy을 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-693">While it is possible toodeploy standalone Windows Server AD FS federation services, it is recommended toodeploy a farm with at least two nodes for both AD FS STS and proxies for production environments.</span></span>

<span data-ttu-id="fe649-694">참조 [AD FS 2.0 배포 토폴로지 고려 사항](https://technet.microsoft.com/library/gg982489) hello에 [AD FS 2.0 디자인 가이드](https://technet.microsoft.com/library/dd807036) toodecide 배포 구성에 가장 옵션을 특정 요구 사항에 맞게 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-694">See [AD FS 2.0 deployment topology considerations](https://technet.microsoft.com/library/gg982489) in hello [AD FS 2.0 Design Guide](https://technet.microsoft.com/library/dd807036) toodecide which deployment configuration options best suit your particular needs.</span></span>

> [!NOTE]
> <span data-ttu-id="fe649-695">순서 tooget 부하 분산 hello에 hello Windows Server AD FS 팜의 모든 멤버를 구성 하는 Azure에서 Windows Server AD FS 끝점에 대 한 동일한 클라우드 서비스, 항목과 hello Azure의 기능에 대해 부하 분산 (기본값 80) HTTP 및 HTTPS 포트 (기본값 443)를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-695">In order tooget load balancing for Windows Server AD FS endpoints on Azure, configure all members of hello Windows Server AD FS farm in hello same cloud service, and use hello load balancing capability of Azure for HTTP (default 80) and HTTPS ports (default 443).</span></span> <span data-ttu-id="fe649-696">자세한 내용은 [Azure 부하 분산 장치 프로브](https://msdn.microsoft.com/library/azure/jj151530)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="fe649-696">For more information, see [Azure load-balancer probe](https://msdn.microsoft.com/library/azure/jj151530).</span></span>
> <span data-ttu-id="fe649-697">Windows Server NLB(네트워크 부하 분산)는 Azure에서 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="fe649-697">Windows Server Network Load Balancing (NLB) is not supported on Azure.</span></span>
> 
> 

