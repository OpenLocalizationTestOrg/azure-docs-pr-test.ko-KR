---
title: "aaaSingle 로그온 응용 프로그램 프록시 | Microsoft Docs"
description: "Azure AD 응용 프로그램 프록시를 사용 하 여 sign-on tooprovide single 하는 방법에 대해 설명 합니다."
services: active-directory
documentationcenter: 
author: kgremban
manager: femila
ms.assetid: ded0d9c9-45f6-47d7-bd0f-3f7fd99ab621
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 07/25/2017
ms.author: kgremban
ms.reviewer: harshja
ms.custom: H1Hack27Feb2017, it-pro
ms.openlocfilehash: 0047e834cd42e057a75ebc0c5dcf860734464a05
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="kerberos-constrained-delegation-for-single-sign-on-tooyour-apps-with-application-proxy"></a><span data-ttu-id="370ee-103">Kerberos 제한 위임 single sign on tooyour 앱에 대 한 응용 프로그램 프록시</span><span class="sxs-lookup"><span data-stu-id="370ee-103">Kerberos Constrained Delegation for single sign-on tooyour apps with Application Proxy</span></span>

<span data-ttu-id="370ee-104">Windows 통합 인증으로 보안되는 응용 프로그램 프록시를 통해 게시된 온-프레미스 응용 프로그램에 대한 Single Sign-On을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-104">You can provide single sign-on for on-premises applications published through Application Proxy that are secured with Integrated Windows Authentication.</span></span> <span data-ttu-id="370ee-105">이러한 응용 프로그램은 액세스를 위해 Kerberos 티켓이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-105">These applications require a Kerberos ticket for access.</span></span> <span data-ttu-id="370ee-106">응용 프로그램 프록시는 제한 된 위임 KCD (Kerberos) toosupport 이러한 응용 프로그램을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-106">Application Proxy uses Kerberos Constrained Delegation (KCD) toosupport these applications.</span></span> 

<span data-ttu-id="370ee-107">Active Directory tooimpersonate 사용자에서 응용 프로그램 프록시 커넥터 권한을 지정 하 여 통합 IWA (Windows 인증)를 사용 하 여 single sign on tooyour 응용 프로그램을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-107">You can enable single sign-on tooyour applications using Integrated Windows Authentication (IWA) by giving Application Proxy connectors permission in Active Directory tooimpersonate users.</span></span> <span data-ttu-id="370ee-108">hello 커넥터가 권한을 toosend 사용 하며 사용자 대신 토큰을 수신 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-108">hello connectors use this permission toosend and receive tokens on their behalf.</span></span>

## <a name="how-single-sign-on-with-kcd-works"></a><span data-ttu-id="370ee-109">KCD를 사용하는 Single Sign-On 작동 방식</span><span class="sxs-lookup"><span data-stu-id="370ee-109">How single sign-on with KCD works</span></span>
<span data-ttu-id="370ee-110">이 다이어그램에서는 사용자가 IWA를 사용 하는 온-프레미스 응용 프로그램 tooaccess hello 흐름을 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-110">This diagram explains hello flow when a user attempts tooaccess an on-prem application that uses IWA.</span></span>

![Microsoft AAD 인증 흐름 다이어그램](./media/active-directory-application-proxy-sso-using-kcd/AuthDiagram.png)

1. <span data-ttu-id="370ee-112">hello 사용자 hello URL tooaccess hello 온-프레미스 응용 프로그램을 통해 응용 프로그램 프록시를 입력합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-112">hello user enters hello URL tooaccess hello on-prem application through Application Proxy.</span></span>
2. <span data-ttu-id="370ee-113">응용 프로그램 프록시는 hello 요청 tooAzure AD 인증 서비스 toopreauthenticate를 리디렉션합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-113">Application Proxy redirects hello request tooAzure AD authentication services toopreauthenticate.</span></span> <span data-ttu-id="370ee-114">이 시점에서 Azure AD는 다단계 인증 등, 모든 적용 가능한 인증 및 권한 부여 정책을 적용합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-114">At this point, Azure AD applies any applicable authentication and authorization policies, such as multifactor authentication.</span></span> <span data-ttu-id="370ee-115">Hello 사용자가 확인 되 면 Azure AD 토큰을 만들고 toohello 사용자 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-115">If hello user is validated, Azure AD creates a token and sends it toohello user.</span></span>
3. <span data-ttu-id="370ee-116">hello 사용자 hello 토큰 tooApplication 프록시를 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-116">hello user passes hello token tooApplication Proxy.</span></span>
4. <span data-ttu-id="370ee-117">응용 프로그램 프록시 hello 토큰의 유효성을 검사 및 검색, 이름 UPN (사용자 계정) hello 다음 고 보냅니다 hello 요청, UPN hello 이중 인증 된 보안 채널을 통해 이름 SPN (서비스 사용자) toohello 커넥터 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-117">Application Proxy validates hello token and retrieves hello User Principal Name (UPN) from it, and then sends hello request, hello UPN, and hello Service Principal Name (SPN) toohello Connector through a dually authenticated secure channel.</span></span>
5. <span data-ttu-id="370ee-118">hello 온-프레미스와 KCD Kerberos 제한 위임 () 협상을 수행 하는 hello 커넥터 광고를 hello 사용자 tooget Kerberos 토큰 toohello 응용 프로그램을 가장 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-118">hello Connector performs Kerberos Constrained Delegation (KCD) negotiation with hello on-prem AD, impersonating hello user tooget a Kerberos token toohello application.</span></span>
6. <span data-ttu-id="370ee-119">Active Directory hello 응용 프로그램 toohello 커넥터에 대 한 hello Kerberos 토큰을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-119">Active Directory sends hello Kerberos token for hello application toohello Connector.</span></span>
7. <span data-ttu-id="370ee-120">hello 커넥터 hello 원래 요청 toohello 응용 프로그램 서버를 AD에서 받은 hello Kerberos 토큰을 사용 하 여 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-120">hello Connector sends hello original request toohello application server, using hello Kerberos token it received from AD.</span></span>
8. <span data-ttu-id="370ee-121">hello 응용 프로그램 hello 응답 toohello toohello 응용 프로그램 프록시 서비스 및 마지막으로 toohello 사용자 그런 다음 반환 되는 커넥터를 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-121">hello application sends hello response toohello Connector, which is then returned toohello Application Proxy service and finally toohello user.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="370ee-122">필수 조건</span><span class="sxs-lookup"><span data-stu-id="370ee-122">Prerequisites</span></span>
<span data-ttu-id="370ee-123">Single sign-on에서 IWA 응용 프로그램에 대 한 시작 하기 전에 준비가 되었는지 확인 환경 hello로 다음 설정 및 구성:</span><span class="sxs-lookup"><span data-stu-id="370ee-123">Before you get started with single sign-on for IWA applications, make sure your environment is ready with hello following settings and configurations:</span></span>

* <span data-ttu-id="370ee-124">SharePoint 웹 앱 같은 앱 toouse 설정 되어 Windows 통합 인증입니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-124">Your apps, like SharePoint Web apps, are set toouse Integrated Windows Authentication.</span></span> <span data-ttu-id="370ee-125">자세한 내용은 [Kerberos 인증 지원 사용](https://technet.microsoft.com/library/dd759186.aspx) 또는 SharePoint의 경우 [SharePoint 2013에서 Kerberos 인증 계획](https://technet.microsoft.com/library/ee806870.aspx)(영문)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="370ee-125">For more information, see [Enable Support for Kerberos Authentication](https://technet.microsoft.com/library/dd759186.aspx), or for SharePoint see [Plan for Kerberos authentication in SharePoint 2013](https://technet.microsoft.com/library/ee806870.aspx).</span></span>
* <span data-ttu-id="370ee-126">모든 앱에는 [서비스 주체 이름](https://social.technet.microsoft.com/wiki/contents/articles/717.service-principal-names-spns-setspn-syntax-setspn-exe.aspx)이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-126">All your apps have [Service Principal Names](https://social.technet.microsoft.com/wiki/contents/articles/717.service-principal-names-spns-setspn-syntax-setspn-exe.aspx).</span></span>
* <span data-ttu-id="370ee-127">hello의 일부와 도메인에 가입 hello 서버 실행 중인 hello 커넥터 및 hello 응용 프로그램을 실행 하는 hello 서버는 동일한 도메인 또는 트러스트를 준 도메인입니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-127">hello server running hello Connector and hello server running hello app are domain joined and part of hello same domain or trusting domains.</span></span> <span data-ttu-id="370ee-128">도메인 가입에 대 한 자세한 내용은 참조 하십시오. [컴퓨터 tooa 도메인 가입](https://technet.microsoft.com/library/dd807102.aspx)합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-128">For more information on domain join, see [Join a Computer tooa Domain](https://technet.microsoft.com/library/dd807102.aspx).</span></span>
* <span data-ttu-id="370ee-129">hello 커넥터를 실행 하는 hello 서버는 사용자에 대 한 액세스 tooread hello TokenGroupsGlobalAndUniversal 특성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-129">hello server running hello Connector has access tooread hello TokenGroupsGlobalAndUniversal attribute for users.</span></span> <span data-ttu-id="370ee-130">이 기본 설정은 수 영향을 받았는지 보안 hello 환경을 강화 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-130">This default setting might have been impacted by security hardening hello environment.</span></span>

### <a name="configure-active-directory"></a><span data-ttu-id="370ee-131">Active Directory 구성</span><span class="sxs-lookup"><span data-stu-id="370ee-131">Configure Active Directory</span></span>
<span data-ttu-id="370ee-132">hello Active Directory 구성은 다릅니다, 그리고 여부 같은 도메인 hello 응용 프로그램 프록시 커넥터 및 hello 응용 프로그램 서버에서 지 여부에 따라 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-132">hello Active Directory configuration varies, depending on whether your Application Proxy connector and hello application server are in hello same domain or not.</span></span>

#### <a name="connector-and-application-server-in-hello-same-domain"></a><span data-ttu-id="370ee-133">커넥터 및 응용 프로그램 서버 hello에 동일한 도메인</span><span class="sxs-lookup"><span data-stu-id="370ee-133">Connector and application server in hello same domain</span></span>
1. <span data-ttu-id="370ee-134">Active Directory에서 이동 너무**도구** > **사용자 및 컴퓨터**합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-134">In Active Directory, go too**Tools** > **Users and Computers**.</span></span>
2. <span data-ttu-id="370ee-135">Hello 커넥터를 실행 하는 hello 서버를 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-135">Select hello server running hello connector.</span></span>
3. <span data-ttu-id="370ee-136">마우스 오른쪽 단추를 클릭하고 **속성** > **위임**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-136">Right-click and select **Properties** > **Delegation**.</span></span>
4. <span data-ttu-id="370ee-137">선택 **toospecified 서비스에만 위임에 대 한이 컴퓨터 트러스트**합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-137">Select **Trust this computer for delegation toospecified services only**.</span></span> 
5. <span data-ttu-id="370ee-138">아래 **서비스 toowhich이이 계정 위임 된 자격 증명을 제공할 수** hello hello 응용 프로그램 서버의 SPN id에 대 한 hello 값을 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-138">Under **Services toowhich this account can present delegated credentials** add hello value for hello SPN identity of hello application server.</span></span> <span data-ttu-id="370ee-139">이렇게 하면 hello 응용 프로그램 프록시 커넥터 tooimpersonate 사용자 ad에서 hello 목록에 정의 된 hello 응용 프로그램에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-139">This enables hello Application Proxy Connector tooimpersonate users in AD against hello applications defined in hello list.</span></span>

   ![커넥터 SVR 속성 창 스크린샷](./media/active-directory-application-proxy-sso-using-kcd/Properties.jpg)

#### <a name="connector-and-application-server-in-different-domains"></a><span data-ttu-id="370ee-141">다른 도메인 내의 커넥터와 응용 프로그램 서버</span><span class="sxs-lookup"><span data-stu-id="370ee-141">Connector and application server in different domains</span></span>
1. <span data-ttu-id="370ee-142">도메인에 걸쳐 KCD로 작업하기 위한 필수 구성 요소 목록은 [도메인 간의 Kerberos 제한 위임](https://technet.microsoft.com/library/hh831477.aspx)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="370ee-142">For a list of prerequisites for working with KCD across domains, see [Kerberos Constrained Delegation across domains](https://technet.microsoft.com/library/hh831477.aspx).</span></span>
2. <span data-ttu-id="370ee-143">사용 하 여 hello `principalsallowedtodelegateto` hello 커넥터 서버 tooenable hello 응용 프로그램 프록시 toodelegate hello 커넥터 서버에 대 한 속성.</span><span class="sxs-lookup"><span data-stu-id="370ee-143">Use hello `principalsallowedtodelegateto` property on hello Connector server tooenable hello Application Proxy toodelegate for hello Connector server.</span></span> <span data-ttu-id="370ee-144">hello 응용 프로그램 서버는 `sharepointserviceaccount` hello 서버 위임 되며 `connectormachineaccount`합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-144">hello application server is `sharepointserviceaccount` and hello delegating server is `connectormachineaccount`.</span></span> <span data-ttu-id="370ee-145">Windows 2012 R2의 경우 예로 이 코드를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-145">For Windows 2012 R2, use this code as an example:</span></span>

        $connector= Get-ADComputer -Identity connectormachineaccount -server dc.connectordomain.com

        Set-ADComputer -Identity sharepointserviceaccount -PrincipalsAllowedToDelegateToAccount $connector

        Get-ADComputer sharepointserviceaccount -Properties PrincipalsAllowedToDelegateToAccount

<span data-ttu-id="370ee-146">Sharepointserviceaccount은 hello SPS 컴퓨터 계정 또는 응용 프로그램 풀이 실행 되는 hello SPS 서비스 계정이 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-146">Sharepointserviceaccount can be hello SPS machine account or a service account under which hello SPS app pool is running.</span></span>

## <a name="configure-single-sign-on"></a><span data-ttu-id="370ee-147">Single Sign-On 구성</span><span class="sxs-lookup"><span data-stu-id="370ee-147">Configure single sign-on</span></span> 
1. <span data-ttu-id="370ee-148">에 설명 된 toohello 지침에 따라 응용 프로그램을 게시 [응용 프로그램 프록시는 응용 프로그램 게시](application-proxy-publish-azure-portal.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-148">Publish your application according toohello instructions described in [Publish applications with Application Proxy](application-proxy-publish-azure-portal.md).</span></span> <span data-ttu-id="370ee-149">있는지 tooselect 확인 **Azure Active Directory** hello로 **사전 인증 방법**합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-149">Make sure tooselect **Azure Active Directory** as hello **Preauthentication Method**.</span></span>
2. <span data-ttu-id="370ee-150">응용 프로그램이 엔터프라이즈 응용 프로그램의 hello 목록에 표시 되 고 나면 선택 하 고 클릭 **Single sign on**합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-150">After your application appears in hello list of enterprise applications, select it and click **Single sign-on**.</span></span>
3. <span data-ttu-id="370ee-151">너무 hello single sign on 모드 설정**Windows 통합 인증**합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-151">Set hello single sign-on mode too**Integrated Windows Authentication**.</span></span>  
4. <span data-ttu-id="370ee-152">Hello 입력 **내부 응용 프로그램 SPN** hello 응용 프로그램 서버.</span><span class="sxs-lookup"><span data-stu-id="370ee-152">Enter hello **Internal Application SPN** of hello application server.</span></span> <span data-ttu-id="370ee-153">이 예제에서는 게시 된 응용 프로그램에 대 한 SPN hello는 http/www.contoso.com입니다. 이 SPN 요구 toobe 서비스 toowhich hello 커넥터의 hello 목록에는 위임 된 자격 증명을 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-153">In this example, hello SPN for our published application is http/www.contoso.com. This SPN needs toobe in hello list of services toowhich hello connector can present delegated credentials.</span></span> 
5. <span data-ttu-id="370ee-154">Hello 선택 **로그인 Id 위임** 사용자를 대신 하 여 커넥터 toouse hello에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-154">Choose hello **Delegated Login Identity** for hello connector toouse on behalf of your users.</span></span> <span data-ttu-id="370ee-155">자세한 내용은 [다른 온-프레미스 및 클라우드 ID로 작업](#Working-with-different-on-premises-and-cloud-identities) 참조</span><span class="sxs-lookup"><span data-stu-id="370ee-155">For more information, see [Working with different on-premises and cloud identities](#Working-with-different-on-premises-and-cloud-identities)</span></span>

   ![고급 응용 프로그램 구성](./media/active-directory-application-proxy-sso-using-kcd/cwap_auth2.png)  


## <a name="sso-for-non-windows-apps"></a><span data-ttu-id="370ee-157">비 Windows 앱에 대한 SSO</span><span class="sxs-lookup"><span data-stu-id="370ee-157">SSO for non-Windows apps</span></span>
<span data-ttu-id="370ee-158">Azure AD 응용 프로그램 프록시에 Kerberos 위임 흐름 hello hello 클라우드에서 hello 사용자를 인증 하는 Azure AD를 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-158">hello Kerberos delegation flow in Azure AD Application Proxy starts when Azure AD authenticates hello user in hello cloud.</span></span> <span data-ttu-id="370ee-159">온-프레미스 hello 요청이 수신 되 면 Azure AD 응용 프로그램 프록시 커넥터와의 상호 작용 하 여 hello 사용자 대신 Kerberos 티켓을 발행 hello 로컬 Active Directory hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-159">Once hello request arrives on-premises, hello Azure AD Application Proxy connector issues a Kerberos ticket on behalf of hello user by interacting with hello local Active Directory.</span></span> <span data-ttu-id="370ee-160">이 프로세스는 참조 된 tooas 위임 KCD (Kerberos 제한).</span><span class="sxs-lookup"><span data-stu-id="370ee-160">This process is referred tooas Kerberos Constrained Delegation (KCD).</span></span> <span data-ttu-id="370ee-161">Hello에서 다음 단계에서는 요청이 전송 되 toohello 백 엔드 응용 프로그램이 Kerberos 티켓을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-161">In hello next phase, a request is sent toohello backend application with this Kerberos ticket.</span></span> <span data-ttu-id="370ee-162">어떻게 toosend 요청 등을 정의 하는 여러 프로토콜 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-162">There are several protocols that define how toosend such requests.</span></span> <span data-ttu-id="370ee-163">현재 비 Windows Server는 대부분 Azure AD 응용 프로그램 프록시에 지원되는 Negotiate/SPNego를 참조합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-163">Most non-Windows servers expect Negotiate/SPNego that is now supported on Azure AD Application Proxy.</span></span>

<span data-ttu-id="370ee-164">Kerberos에 대 한 자세한 내용은 참조 [모든 원하는 tooknow에 대 한 제한 된 위임 KCD (Kerberos)](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/21/all-you-want-to-know-about-kerberos-constrained-delegation-kcd)합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-164">For more information about Kerberos, see [All you want tooknow about Kerberos Constrained Delegation (KCD)](https://blogs.technet.microsoft.com/applicationproxyblog/2015/09/21/all-you-want-to-know-about-kerberos-constrained-delegation-kcd).</span></span>

<span data-ttu-id="370ee-165">비 Windows 앱은 일반적으로 도메인 이메일 주소 대신 사용자 이름 또는 SAM 계정 이름을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-165">Non-Windows apps typically user usernames or SAM account names instead of domain email addresses.</span></span> <span data-ttu-id="370ee-166">상황 tooyour 응용 프로그램을 적용 해야 tooconfigure 위임 hello 로그인 identity 필드 tooconnect 클라우드 identities tooyour 응용 프로그램 id.</span><span class="sxs-lookup"><span data-stu-id="370ee-166">If that situation applies tooyour applications, you need tooconfigure hello delegated login identity field tooconnect your cloud identities tooyour application identities.</span></span> 

## <a name="working-with-different-on-premises-and-cloud-identities"></a><span data-ttu-id="370ee-167">다른 온-프레미스 및 클라우드 ID로 작업</span><span class="sxs-lookup"><span data-stu-id="370ee-167">Working with different on-premises and cloud identities</span></span>
<span data-ttu-id="370ee-168">사용자가 정확 하 게 있다고 가정 하는 응용 프로그램 프록시 hello hello 클라우드 및 온-프레미스에서 동일한 id입니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-168">Application Proxy assumes that users have exactly hello same identity in hello cloud and on-premises.</span></span> <span data-ttu-id="370ee-169">경우 않은 hello 경우 사용할 수 있습니다 수 여전히 KCD single sign on에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-169">If that's not hello case, you can can still use KCD for single sign-on.</span></span> <span data-ttu-id="370ee-170">구성 된 **로그인 id를 위임** single sign on을 수행할 때 어떤 id를 사용 해야 하는 각 응용 프로그램 toospecify에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-170">Configure a **Delegated login identity** for each application toospecify which identity should be used when performing single sign-on.</span></span>  

<span data-ttu-id="370ee-171">다른 온-프레미스와 hello 클라우드 tooon 온-프레미스 응용 프로그램에서 SSO identities toohave hello 사용자 tooenter 서로 다른 사용자 이름 및 암호를 요구 하지 않고 클라우드 많은 조직에서는이 기능을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-171">This capability allows many organizations that have different on-premises and cloud identities toohave SSO from hello cloud tooon-premises apps without requiring hello users tooenter different usernames and passwords.</span></span> <span data-ttu-id="370ee-172">이 작업은 다음의 조직을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-172">This includes organizations that:</span></span>

* <span data-ttu-id="370ee-173">내부적으로 여러 도메인이 있는 (joe@us.contoso.com, joe@eu.contoso.com) 및 hello 클라우드에서 단일 도메인 (joe@contoso.com).</span><span class="sxs-lookup"><span data-stu-id="370ee-173">Have multiple domains internally (joe@us.contoso.com, joe@eu.contoso.com) and a single domain in hello cloud (joe@contoso.com).</span></span>
* <span data-ttu-id="370ee-174">라우팅할 수 없는 도메인 이름이 내부적으로 (joe@contoso.usa)와 hello 클라우드에서 법적 비밀 번호입니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-174">Have non-routable domain name internally (joe@contoso.usa) and a legal one in hello cloud.</span></span>
* <span data-ttu-id="370ee-175">내부적으로 도메인 이름을 사용하지 마십시오(joe).</span><span class="sxs-lookup"><span data-stu-id="370ee-175">Do not use domain names internally (joe)</span></span>
* <span data-ttu-id="370ee-176">서로 다른 별칭 온-프레미스를 사용 하 여 hello 클라우드에서 하 고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-176">Use different aliases on-prem and in hello cloud.</span></span> <span data-ttu-id="370ee-177">예제: joe-johns@contoso.com 및 joej@contoso.com</span><span class="sxs-lookup"><span data-stu-id="370ee-177">For example, joe-johns@contoso.com vs. joej@contoso.com</span></span>  

<span data-ttu-id="370ee-178">응용 프로그램 프록시는 identity toouse tooobtain hello Kerberos 티켓을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-178">With Application Proxy, you can select which identity toouse tooobtain hello Kerberos ticket.</span></span> <span data-ttu-id="370ee-179">이 설정은 응용 프로그램별입니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-179">This setting is per application.</span></span> <span data-ttu-id="370ee-180">이러한 옵션 중 일부는 전자 메일 주소 형식을 받아들이지 않는 시스템에 적합한 반면 다른 것들은 대체 로그인을 위해 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-180">Some of these options are suitable for systems that do not accept email address format, others are designed for alternative login.</span></span>

![위임된 로그인 ID 매개 변수 스크린샷](./media/active-directory-application-proxy-sso-using-kcd/app_proxy_sso_diff_id_upn.png)

<span data-ttu-id="370ee-182">위임 된 로그인 id를 사용 하는 경우 hello 수 고유할 모든 hello 도메인 또는 조직에서 포리스트 간에 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-182">If delegated login identity is used, hello value might not be unique across all hello domains or forests in your organization.</span></span> <span data-ttu-id="370ee-183">다른 두 가지 커넥터 그룹을 사용하여 이러한 응용 프로그램을 두 번 게시함으로써 이 문제를 방지할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-183">You can avoid this issue by publishing these applications twice using two different Connector groups.</span></span> <span data-ttu-id="370ee-184">각 응용 프로그램의 다른 사용자 그룹에 있으므로 해당 커넥터 tooa 다른 도메인에 조인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-184">Since each application has a different user audience, you can join its Connectors tooa different domain.</span></span>

### <a name="configure-sso-for-different-identities"></a><span data-ttu-id="370ee-185">다른 ID에 대한 SSO 구성</span><span class="sxs-lookup"><span data-stu-id="370ee-185">Configure SSO for different identities</span></span>
1. <span data-ttu-id="370ee-186">Hello 주 id는 hello 전자 메일 주소 (메일) Azure AD Connect 설정을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-186">Configure Azure AD Connect settings so hello main identity is hello email address (mail).</span></span> <span data-ttu-id="370ee-187">이 작업은 수행 hello 부분의 hello를 변경 하 여 프로세스를 사용자 지정할 **사용자 계정 이름** 필드 hello 동기화 설정에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-187">This is done as part of hello customize process, by changing hello **User Principal Name** field in hello sync settings.</span></span> <span data-ttu-id="370ee-188">이러한 설정은 또한 사용자 tooOffice365, 및 Windows10 장치 및 해당 id 저장소로 Azure AD를 사용 하는 다른 응용 프로그램에 로그인 하는 방법을 결정 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-188">These settings also determine how users log in tooOffice365, Windows10 devices, and other applications that use Azure AD as their identity store.</span></span>  
   <span data-ttu-id="370ee-189">![사용자 식별 스크린샷 - 사용자 계정 이름 드롭다운](./media/active-directory-application-proxy-sso-using-kcd/app_proxy_sso_diff_id_connect_settings.png)</span><span class="sxs-lookup"><span data-stu-id="370ee-189">![Identifying users screenshot - User Principal Name dropdown](./media/active-directory-application-proxy-sso-using-kcd/app_proxy_sso_diff_id_connect_settings.png)</span></span>  
2. <span data-ttu-id="370ee-190">Hello 응용 프로그램에 대 한 hello 응용 프로그램 구성 설정에서 원하는 toomodify, 선택 hello **로그인 Id 위임** toobe 사용:</span><span class="sxs-lookup"><span data-stu-id="370ee-190">In hello Application Configuration settings for hello application you would like toomodify, select hello **Delegated Login Identity** toobe used:</span></span>

   * <span data-ttu-id="370ee-191">사용자 계정 이름(예: joe@contoso.com)</span><span class="sxs-lookup"><span data-stu-id="370ee-191">User Principal Name (for example, joe@contoso.com)</span></span>
   * <span data-ttu-id="370ee-192">대체 사용자 계정 이름(예: joed@contoso.local)</span><span class="sxs-lookup"><span data-stu-id="370ee-192">Alternate User Principal Name (for example, joed@contoso.local)</span></span>
   * <span data-ttu-id="370ee-193">사용자 계정 이름의 사용자 이름 일부(예: joe)</span><span class="sxs-lookup"><span data-stu-id="370ee-193">Username part of User Principal Name (for example, joe)</span></span>
   * <span data-ttu-id="370ee-194">대체 사용자 계정 이름의 사용자 이름 일부(예: joed)</span><span class="sxs-lookup"><span data-stu-id="370ee-194">Username part of Alternate User Principal Name (for example, joed)</span></span>
   * <span data-ttu-id="370ee-195">온-프레미스 SAM 계정 이름 (hello 도메인 컨트롤러 구성에 따라 다름)</span><span class="sxs-lookup"><span data-stu-id="370ee-195">On-premises SAM account name (depends on hello domain controller configuration)</span></span>

### <a name="troubleshooting-sso-for-different-identities"></a><span data-ttu-id="370ee-196">다른 ID에 대한 SSO 문제 해결</span><span class="sxs-lookup"><span data-stu-id="370ee-196">Troubleshooting SSO for different identities</span></span>
<span data-ttu-id="370ee-197">에 설명 된 대로 hello 커넥터 컴퓨터 이벤트 로그에 표시 hello SSO 프로세스에에서 오류가 있으면 [문제 해결](application-proxy-back-end-kerberos-constrained-delegation-how-to.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-197">If there is an error in hello SSO process, it appears in hello connector machine event log as explained in [Troubleshooting](application-proxy-back-end-kerberos-constrained-delegation-how-to.md).</span></span>
<span data-ttu-id="370ee-198">그러나 경우에 따라 hello 요청은 성공적으로 보낸 toohello 백 엔드 응용 프로그램 다른 다양 한 HTTP 응답에이 응용 프로그램에 응답 하는 동안.</span><span class="sxs-lookup"><span data-stu-id="370ee-198">But, in some cases, hello request is successfully sent toohello backend application while this application replies in various other HTTP responses.</span></span> <span data-ttu-id="370ee-199">이러한 경우 문제 해결 이벤트 번호 24029 hello 응용 프로그램 프록시 세션 이벤트 로그에 hello 커넥터 컴퓨터에서 검사 하 여 시작 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-199">Troubleshooting these cases should start by examining event number 24029 on hello connector machine in hello Application Proxy session event log.</span></span> <span data-ttu-id="370ee-200">hello 사용자 id 위임에 대해 사용 된 hello 이벤트 세부 정보 내 hello "user" 필드에 나타납니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-200">hello user identity that was used for delegation appears in hello “user” field within hello event details.</span></span> <span data-ttu-id="370ee-201">세션 로그에 tooturn 선택 **분석 및 디버그 로그 표시** hello 이벤트 뷰어 보기 메뉴에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="370ee-201">tooturn on session log, select **Show analytic and debug logs** in hello event viewer view menu.</span></span>

## <a name="next-steps"></a><span data-ttu-id="370ee-202">다음 단계</span><span class="sxs-lookup"><span data-stu-id="370ee-202">Next steps</span></span>

* [<span data-ttu-id="370ee-203">어떻게 tooconfigure 응용 프로그램 프록시 응용 프로그램 toouse Kerberos 제한 위임</span><span class="sxs-lookup"><span data-stu-id="370ee-203">How tooconfigure an Application Proxy application toouse Kerberos Constrained Delegation</span></span>](application-proxy-back-end-kerberos-constrained-delegation-how-to.md)
* [<span data-ttu-id="370ee-204">응용 프로그램 프록시에서 발생한 문제 해결</span><span class="sxs-lookup"><span data-stu-id="370ee-204">Troubleshoot issues you're having with Application Proxy</span></span>](active-directory-application-proxy-troubleshoot.md)


<span data-ttu-id="370ee-205">Hello 최신 뉴스 및 업데이트에 대 한 체크 아웃 hello [응용 프로그램 프록시 블로그](http://blogs.technet.com/b/applicationproxyblog/)</span><span class="sxs-lookup"><span data-stu-id="370ee-205">For hello latest news and updates, check out hello [Application Proxy blog](http://blogs.technet.com/b/applicationproxyblog/)</span></span>

