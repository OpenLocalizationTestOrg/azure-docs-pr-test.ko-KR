---
title: "Azure의 보안 그룹 aaaNetwork | Microsoft Docs"
description: "네트워크 보안 그룹을 사용 하 여 Azure에 배포 된 hello 방화벽을 사용 하 여 가상 네트워크 내에서 tooisolate 및 제어 트래픽 흐름이 하는 방법에 대해 알아봅니다."
services: virtual-network
documentationcenter: na
author: jimdial
manager: timlt
editor: tysonn
ms.assetid: 20e850fc-6456-4b5f-9a3f-a8379b052bc9
ms.service: virtual-network
ms.devlang: na
ms.topic: get-started-article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/11/2016
ms.author: jdial
ms.openlocfilehash: 3528ce833dab17977327c3c9ae0e78316e5e6a05
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="filter-network-traffic-with-network-security-groups"></a><span data-ttu-id="c490d-103">네트워크 보안 그룹을 사용하여 네트워크 트래픽 필터링</span><span class="sxs-lookup"><span data-stu-id="c490d-103">Filter network traffic with network security groups</span></span>

<span data-ttu-id="c490d-104">네트워크 보안 그룹 NSG ()를 허용 하거나 거부할 네트워크 트래픽 tooresources tooAzure 가상 네트워크 (VNet) 연결 하는 보안 규칙 목록이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-104">A network security group (NSG) contains a list of security rules that allow or deny network traffic tooresources connected tooAzure Virtual Networks (VNet).</span></span> <span data-ttu-id="c490d-105">개별 네트워크 인터페이스 (NIC) 연결 tooVMs (리소스 관리자) 또는 Nsg 연결된 toosubnets, 개별 Vm (클래식)를 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-105">NSGs can be associated toosubnets, individual VMs (classic), or individual network interfaces (NIC) attached tooVMs (Resource Manager).</span></span> <span data-ttu-id="c490d-106">NSG 연결된 tooa 서브넷 이면 tooall 리소스 연결 된 toohello 서브넷 hello 규칙에 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-106">When an NSG is associated tooa subnet, hello rules apply tooall resources connected toohello subnet.</span></span> <span data-ttu-id="c490d-107">또한 VM 또는 NIC.는 NSG tooa를 연결 하 여 트래픽을 추가로 제한할 수</span><span class="sxs-lookup"><span data-stu-id="c490d-107">Traffic can further be restricted by also associating an NSG tooa VM or NIC.</span></span>

> [!NOTE]
> <span data-ttu-id="c490d-108">Azure에는 리소스를 만들고 작업하는 [Resource Manager와 클래식](../resource-manager-deployment-model.md)이라는 두 가지 배포 모델이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-108">Azure has two different deployment models for creating and working with resources:  [Resource Manager and classic](../resource-manager-deployment-model.md).</span></span> <span data-ttu-id="c490d-109">이 문서에서는 두 모델을 사용 하 여 있지만 대부분의 새로운 배포 hello 리소스 관리자 모델을 사용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-109">This article covers using both models, but Microsoft recommends that most new deployments use hello Resource Manager model.</span></span>

## <a name="nsg-resource"></a><span data-ttu-id="c490d-110">NSG 리소스</span><span class="sxs-lookup"><span data-stu-id="c490d-110">NSG resource</span></span>
<span data-ttu-id="c490d-111">Nsg에는 다음과 같은 속성 hello 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-111">NSGs contain hello following properties:</span></span>

| <span data-ttu-id="c490d-112">속성</span><span class="sxs-lookup"><span data-stu-id="c490d-112">Property</span></span> | <span data-ttu-id="c490d-113">설명</span><span class="sxs-lookup"><span data-stu-id="c490d-113">Description</span></span> | <span data-ttu-id="c490d-114">제약 조건</span><span class="sxs-lookup"><span data-stu-id="c490d-114">Constraints</span></span> | <span data-ttu-id="c490d-115">고려 사항</span><span class="sxs-lookup"><span data-stu-id="c490d-115">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="c490d-116">이름</span><span class="sxs-lookup"><span data-stu-id="c490d-116">Name</span></span> |<span data-ttu-id="c490d-117">NSG hello에 대 한 이름</span><span class="sxs-lookup"><span data-stu-id="c490d-117">Name for hello NSG</span></span> |<span data-ttu-id="c490d-118">Hello 지역 내에서 고유 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-118">Must be unique within hello region.</span></span><br/><span data-ttu-id="c490d-119">문자, 숫자, 밑줄, 마침표 및 하이픈을 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-119">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="c490d-120">문자 또는 숫자로 시작해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-120">Must start with a letter or number.</span></span><br/><span data-ttu-id="c490d-121">문자, 숫자 또는 밑줄로 끝나야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-121">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="c490d-122">80자를 초과할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-122">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="c490d-123">여러 Nsg toocreate를 할 수 있습니다, 때문에 Nsg의 쉽게 tooidentify hello 기능을 게 한다는 명명 규칙이 있는지 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-123">Since you may need toocreate several NSGs, make sure you have a naming convention that makes it easy tooidentify hello function of your NSGs.</span></span> |
| <span data-ttu-id="c490d-124">지역</span><span class="sxs-lookup"><span data-stu-id="c490d-124">Region</span></span> |<span data-ttu-id="c490d-125">Azure [지역](https://azure.microsoft.com/regions) hello NSG를 만들 위치입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-125">Azure [region](https://azure.microsoft.com/regions) where hello NSG is created.</span></span> |<span data-ttu-id="c490d-126">Nsg hello 내에서 관련된 tooresources 수 NSG hello와 동일한 영역입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-126">NSGs can only be associated tooresources within hello same region as hello NSG.</span></span> |<span data-ttu-id="c490d-127">hello를 읽기 지역당, 있어야 수 toolearn 개수 Nsg에 대 한 [Azure 제한](../azure-subscription-service-limits.md#virtual-networking-limits-classic) 문서.</span><span class="sxs-lookup"><span data-stu-id="c490d-127">toolearn about how many NSGs you can have per region, read hello [Azure limits](../azure-subscription-service-limits.md#virtual-networking-limits-classic) article.</span></span>|
| <span data-ttu-id="c490d-128">리소스 그룹</span><span class="sxs-lookup"><span data-stu-id="c490d-128">Resource group</span></span> |<span data-ttu-id="c490d-129">hello [리소스 그룹](../azure-resource-manager/resource-group-overview.md#resource-groups) hello NSG에 존재 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-129">hello [resource group](../azure-resource-manager/resource-group-overview.md#resource-groups) hello NSG exists in.</span></span> |<span data-ttu-id="c490d-130">NSG에는 리소스 그룹에 없는 수 있습니다 모든 리소스 그룹에 연결 된 tooresources hello 리소스 hello의 일부인으로 NSG hello와 같은 Azure 지역입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-130">Although an NSG exists in a resource group, it can be associated tooresources in any resource group, as long as hello resource is part of hello same Azure region as hello NSG.</span></span> |<span data-ttu-id="c490d-131">리소스 그룹에 리소스가 사용 되는 toomanage 여러 개 배포 단위로 함께 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-131">Resource groups are used toomanage multiple resources together, as a deployment unit.</span></span><br/><span data-ttu-id="c490d-132">Hello NSG를 연결 하는 리소스와 그룹화를 고려할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-132">You may consider grouping hello NSG with resources it is associated to.</span></span> |
| <span data-ttu-id="c490d-133">규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-133">Rules</span></span> |<span data-ttu-id="c490d-134">허용되거나 거부되는 트래픽을 정의하는 인바운드 또는 아웃바운드 규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-134">Inbound or outbound rules that define what traffic is allowed or denied.</span></span> | |<span data-ttu-id="c490d-135">Hello 참조 [NSG 규칙](#Nsg-rules) 이 문서의 섹션.</span><span class="sxs-lookup"><span data-stu-id="c490d-135">See hello [NSG rules](#Nsg-rules) section of this article.</span></span> |

> [!NOTE]
> <span data-ttu-id="c490d-136">끝점 기반 Acl 및 네트워크 보안 그룹에서 지원 되지 않습니다 hello 동일한 VM 인스턴스.</span><span class="sxs-lookup"><span data-stu-id="c490d-136">Endpoint-based ACLs and network security groups are not supported on hello same VM instance.</span></span> <span data-ttu-id="c490d-137">Toouse NSG를 원하는 위치에 끝점 ACL을 이미 있는 경우 먼저 hello 끝점 ACL을 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-137">If you want toouse an NSG and have an endpoint ACL already in place, first remove hello endpoint ACL.</span></span> <span data-ttu-id="c490d-138">tooremove ACL을 읽는 방법 toolearn hello [관리 액세스 제어 목록 (Acl) PowerShell을 사용 하 여 끝점에 대 한](virtual-networks-acl-powershell.md) 문서.</span><span class="sxs-lookup"><span data-stu-id="c490d-138">toolearn how tooremove an ACL, read hello [Managing Access Control Lists (ACLs) for Endpoints by using PowerShell](virtual-networks-acl-powershell.md) article.</span></span>
> 

### <a name="nsg-rules"></a><span data-ttu-id="c490d-139">NSG 규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-139">NSG rules</span></span>
<span data-ttu-id="c490d-140">NSG 규칙 hello 다음 속성이 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-140">NSG rules contain hello following properties:</span></span>

| <span data-ttu-id="c490d-141">속성</span><span class="sxs-lookup"><span data-stu-id="c490d-141">Property</span></span> | <span data-ttu-id="c490d-142">설명</span><span class="sxs-lookup"><span data-stu-id="c490d-142">Description</span></span> | <span data-ttu-id="c490d-143">제약 조건</span><span class="sxs-lookup"><span data-stu-id="c490d-143">Constraints</span></span> | <span data-ttu-id="c490d-144">고려 사항</span><span class="sxs-lookup"><span data-stu-id="c490d-144">Considerations</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="c490d-145">**Name**</span><span class="sxs-lookup"><span data-stu-id="c490d-145">**Name**</span></span> |<span data-ttu-id="c490d-146">Hello 규칙에 대 한 이름입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-146">Name for hello rule.</span></span> |<span data-ttu-id="c490d-147">Hello 지역 내에서 고유 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-147">Must be unique within hello region.</span></span><br/><span data-ttu-id="c490d-148">문자, 숫자, 밑줄, 마침표 및 하이픈을 포함할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-148">Can contain letters, numbers, underscores, periods, and hyphens.</span></span><br/><span data-ttu-id="c490d-149">문자 또는 숫자로 시작해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-149">Must start with a letter or number.</span></span><br/><span data-ttu-id="c490d-150">문자, 숫자 또는 밑줄로 끝나야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-150">Must end with a letter, number, or underscore.</span></span><br/><span data-ttu-id="c490d-151">80자를 초과할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-151">Cannot exceed 80 characters.</span></span> |<span data-ttu-id="c490d-152">NSG 내에 여러 규칙을 규칙의 tooidentify hello 함수를 허용 하는 명명 규칙을 따르는 있는지 확인 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-152">You may have several rules within an NSG, so make sure you follow a naming convention that allows you tooidentify hello function of your rule.</span></span> |
| <span data-ttu-id="c490d-153">**프로토콜**</span><span class="sxs-lookup"><span data-stu-id="c490d-153">**Protocol**</span></span> |<span data-ttu-id="c490d-154">Hello 규칙에 대 한 프로토콜 toomatch 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-154">Protocol toomatch for hello rule.</span></span> |<span data-ttu-id="c490d-155">TCP, UDP, 또는 *</span><span class="sxs-lookup"><span data-stu-id="c490d-155">TCP, UDP, or *</span></span> |<span data-ttu-id="c490d-156">사용 하 여 * ICMP (동-서 트래픽에만 해당), 포함 되는 프로토콜으로, UDP 및 TCP와 마찬가지로 hello 해야 하는 규칙 수를 줄일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-156">Using * as a protocol includes ICMP (East-West traffic only), as well as UDP and TCP, and may reduce hello number of rules you need.</span></span><br/><span data-ttu-id="c490d-157">At hello 동일한 시간을 사용 하 여 * 수 너무 광범위 한 접근 방식을 있으므로 사용 하는 것이 좋습니다. * 필요한 경우에 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-157">At hello same time, using * might be too broad an approach, so it's recommended that you use * only when necessary.</span></span> |
| <span data-ttu-id="c490d-158">**원본 포트 범위**</span><span class="sxs-lookup"><span data-stu-id="c490d-158">**Source port range**</span></span> |<span data-ttu-id="c490d-159">Hello 규칙에 대 한 원본 포트 범위 toomatch 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-159">Source port range toomatch for hello rule.</span></span> |<span data-ttu-id="c490d-160">단일 1 too65535, 포트 범위에서에서 포트 번호 (예: 1-65535), 또는 * (모든 포트)에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-160">Single port number from 1 too65535, port range (example: 1-65535), or * (for all ports).</span></span> |<span data-ttu-id="c490d-161">원본 포트는 사용 후 삭제될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-161">Source ports could be ephemeral.</span></span> <span data-ttu-id="c490d-162">클라이언트 프로그램에서 특정 포트를 사용하지 않는 한 대부분의 경우 "*"를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-162">Unless your client program is using a specific port, use * in most cases.</span></span><br/><span data-ttu-id="c490d-163">여러 규칙에 대 한 가능한 tooavoid hello 필요한 만큼 toouse 포트 범위를 시도 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-163">Try toouse port ranges as much as possible tooavoid hello need for multiple rules.</span></span><br/><span data-ttu-id="c490d-164">여러 포트 또는 포트 범위는 쉼표로 그룹화할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-164">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="c490d-165">**대상 포트 범위**</span><span class="sxs-lookup"><span data-stu-id="c490d-165">**Destination port range**</span></span> |<span data-ttu-id="c490d-166">Hello 규칙에 대 한 대상 포트 범위 toomatch 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-166">Destination port range toomatch for hello rule.</span></span> |<span data-ttu-id="c490d-167">단일 1 too65535, 포트 범위에서에서 포트 번호 (예: 1-65535), 또는 \* (모든 포트)에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-167">Single port number from 1 too65535, port range (example: 1-65535), or \* (for all ports).</span></span> |<span data-ttu-id="c490d-168">여러 규칙에 대 한 가능한 tooavoid hello 필요한 만큼 toouse 포트 범위를 시도 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-168">Try toouse port ranges as much as possible tooavoid hello need for multiple rules.</span></span><br/><span data-ttu-id="c490d-169">여러 포트 또는 포트 범위는 쉼표로 그룹화할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-169">Multiple ports or port ranges cannot be grouped by a comma.</span></span> |
| <span data-ttu-id="c490d-170">**원본 주소 접두사**</span><span class="sxs-lookup"><span data-stu-id="c490d-170">**Source address prefix**</span></span> |<span data-ttu-id="c490d-171">소스 주소 접두사 또는 태그 toomatch hello 규칙에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-171">Source address prefix or tag toomatch for hello rule.</span></span> |<span data-ttu-id="c490d-172">단일 IP 주소(예: 10.10.10.10), IP 서브넷(예: 192.168.1.0/24), [기본 태그](#default-tags) 또는 *(모든 주소의 경우)</span><span class="sxs-lookup"><span data-stu-id="c490d-172">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="c490d-173">범위, 기본 태그를 사용 하는 것이 좋습니다 및 * 규칙 tooreduce hello 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-173">Consider using ranges, default tags, and * tooreduce hello number of rules.</span></span> |
| <span data-ttu-id="c490d-174">**대상 주소 접두사**</span><span class="sxs-lookup"><span data-stu-id="c490d-174">**Destination address prefix**</span></span> |<span data-ttu-id="c490d-175">대상 주소 접두사 또는 태그 toomatch hello 규칙에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-175">Destination address prefix or tag toomatch for hello rule.</span></span> | <span data-ttu-id="c490d-176">단일 IP 주소(예: 10.10.10.10), IP 서브넷(예: 192.168.1.0/24), [기본 태그](#default-tags) 또는 *(모든 주소의 경우)</span><span class="sxs-lookup"><span data-stu-id="c490d-176">Single IP address (example: 10.10.10.10), IP subnet (example: 192.168.1.0/24), [default tag](#default-tags), or * (for all addresses).</span></span> |<span data-ttu-id="c490d-177">범위, 기본 태그를 사용 하는 것이 좋습니다 및 * 규칙 tooreduce hello 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-177">Consider using ranges, default tags, and * tooreduce hello number of rules.</span></span> |
| <span data-ttu-id="c490d-178">**방향**</span><span class="sxs-lookup"><span data-stu-id="c490d-178">**Direction**</span></span> |<span data-ttu-id="c490d-179">Hello 규칙에 대 한 트래픽 toomatch의 방향입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-179">Direction of traffic toomatch for hello rule.</span></span> |<span data-ttu-id="c490d-180">인바운드 또는 아웃바운드</span><span class="sxs-lookup"><span data-stu-id="c490d-180">Inbound or outbound.</span></span> |<span data-ttu-id="c490d-181">인바운드 규칙과 아웃바운드 규칙은 방향에 따라 개별적으로 처리됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-181">Inbound and outbound rules are processed separately, based on direction.</span></span> |
| <span data-ttu-id="c490d-182">**우선 순위**</span><span class="sxs-lookup"><span data-stu-id="c490d-182">**Priority**</span></span> |<span data-ttu-id="c490d-183">우선 순위에 따라 hello 규칙이 확인 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-183">Rules are checked in hello order of priority.</span></span> <span data-ttu-id="c490d-184">규칙이 적용되면 일치하는 규칙은 더 이상 테스트되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-184">Once a rule applies, no more rules are tested for matching.</span></span> | <span data-ttu-id="c490d-185">100~4096 사이의 숫자</span><span class="sxs-lookup"><span data-stu-id="c490d-185">Number between 100 and 4096.</span></span> | <span data-ttu-id="c490d-186">만들 수 있습니다 hello 이후 100이 새 규칙에 대 한 각 규칙 tooleave 공간에 대 한 우선 순위를 점프 규칙을 만드는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-186">Consider creating rules jumping priorities by 100 for each rule tooleave space for new rules you might create in hello future.</span></span> |
| <span data-ttu-id="c490d-187">**Access**</span><span class="sxs-lookup"><span data-stu-id="c490d-187">**Access**</span></span> |<span data-ttu-id="c490d-188">액세스 tooapply hello 규칙과 일치 하는 경우의 형식입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-188">Type of access tooapply if hello rule matches.</span></span> | <span data-ttu-id="c490d-189">허용 또는 거부</span><span class="sxs-lookup"><span data-stu-id="c490d-189">Allow or deny.</span></span> | <span data-ttu-id="c490d-190">패킷을 허용 규칙 없으면 hello 패킷은 삭제 됩니다 염두에서에 둬야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-190">Keep in mind that if an allow rule is not found for a packet, hello packet is dropped.</span></span> |

<span data-ttu-id="c490d-191">NSG에는 두 가지 규칙 집합, 즉 인바운드 및 아웃바운드가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-191">NSGs contain two sets of rules: Inbound and outbound.</span></span> <span data-ttu-id="c490d-192">hello 우선 순위 규칙에 대 한 각 집합 내에서 고유 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-192">hello priority for a rule must be unique within each set.</span></span> 

![NSG 규칙 처리](./media/virtual-network-nsg-overview/figure3.png) 

<span data-ttu-id="c490d-194">이전 그림 hello NSG 규칙이 처리 되는 방법을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-194">hello previous picture shows how NSG rules are processed.</span></span>

### <a name="default-tags"></a><span data-ttu-id="c490d-195">기본 태그</span><span class="sxs-lookup"><span data-stu-id="c490d-195">Default Tags</span></span>
<span data-ttu-id="c490d-196">기본 태그는 시스템 제공 식별자 tooaddress의 IP 주소 범주입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-196">Default tags are system-provided identifiers tooaddress a category of IP addresses.</span></span> <span data-ttu-id="c490d-197">기본 태그를 사용 하 여 hello에 **소스 주소 접두사** 및 **대상 주소 접두사** 모든 규칙의 속성입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-197">You can use default tags in hello **source address prefix** and **destination address prefix** properties of any rule.</span></span> <span data-ttu-id="c490d-198">다음 3개의 기본 태그를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-198">There are three default tags you can use:</span></span>

* <span data-ttu-id="c490d-199">**VirtualNetwork** (리소스 관리자) (**VIRTUAL_NETWORK** 기본에 대 한):이 태그 포함 hello 가상 네트워크 주소 공간 (CIDR 범위를 Azure에 정의 되어 있는 경우), 모든 온-프레미스 주소 공간을 연결 되 고 연결 Azure Vnet (로컬 네트워크)입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-199">**VirtualNetwork** (Resource Manager) (**VIRTUAL_NETWORK** for classic): This tag includes hello virtual network address space (CIDR ranges defined in Azure), all connected on-premises address spaces, and connected Azure VNets (local networks).</span></span>
* <span data-ttu-id="c490d-200">**AZURE_LOADBALANCER**(Resource Manager) (클래식의 경우 **AzureLoadBalancer**): 이 태그는 Azure의 인프라 부하 분산 장치를 나타내며,</span><span class="sxs-lookup"><span data-stu-id="c490d-200">**AzureLoadBalancer** (Resource Manager) (**AZURE_LOADBALANCER** for classic): This tag denotes Azure’s infrastructure load balancer.</span></span> <span data-ttu-id="c490d-201">hello 태그 tooan 발생 하는 Azure의 상태를 조사 하는 Azure 데이터 센터 IP로 변환 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-201">hello tag translates tooan Azure datacenter IP where Azure’s health probes originate.</span></span>
* <span data-ttu-id="c490d-202">**인터넷** (리소스 관리자) (**인터넷** 기본에 대 한):이 태그는 hello hello 가상 네트워크 외부 및 공용 인터넷에서 연결할 수 있는 IP 주소 공간을 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-202">**Internet** (Resource Manager) (**INTERNET** for classic): This tag denotes hello IP address space that is outside hello virtual network and reachable by public Internet.</span></span> <span data-ttu-id="c490d-203">hello 범위 포함 hello [Azure 공용 IP 공간 소유](https://www.microsoft.com/download/details.aspx?id=41653)합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-203">hello range includes hello [Azure owned public IP space](https://www.microsoft.com/download/details.aspx?id=41653).</span></span>

### <a name="default-rules"></a><span data-ttu-id="c490d-204">기본 규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-204">Default rules</span></span>
<span data-ttu-id="c490d-205">모든 NSG에는 기본 규칙 집합이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-205">All NSGs contain a set of default rules.</span></span> <span data-ttu-id="c490d-206">hello 기본 규칙은 삭제할 수 있지만 여 hello 만드는 규칙을 재정의할 수 hello 가장 낮은 우선 순위를 할당 되었으므로 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-206">hello default rules cannot be deleted, but because they are assigned hello lowest priority, they can be overridden by hello rules that you create.</span></span> 

<span data-ttu-id="c490d-207">hello 기본 규칙에는 다음과 같이 트래픽을 허용 안 함 및 허용:</span><span class="sxs-lookup"><span data-stu-id="c490d-207">hello default rules allow and disallow traffic as follows:</span></span>
- <span data-ttu-id="c490d-208">**가상 네트워크:** 가상 네트워크에서 시작하고 끝나는 트래픽은 인바운드와 아웃바운드 방향 둘 다에서 허용됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-208">**Virtual network:** Traffic originating and ending in a virtual network is allowed both in inbound and outbound directions.</span></span>
- <span data-ttu-id="c490d-209">**인터넷:** 아웃바운드 트래픽은 허용되지만 인바운드 트래픽은 차단됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-209">**Internet:** Outbound traffic is allowed, but inbound traffic is blocked.</span></span>
- <span data-ttu-id="c490d-210">**부하 분산 장치:** 의 Vm 및 역할 인스턴스 수 있도록 Azure의 부하 분산 장치 tooprobe hello 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-210">**Load balancer:** Allow Azure’s load balancer tooprobe hello health of your VMs and role instances.</span></span> <span data-ttu-id="c490d-211">부하 분산된 집합을 사용하지 않는 경우 이 규칙을 무시할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-211">If you are not using a load balanced set you can override this rule.</span></span>

<span data-ttu-id="c490d-212">**인바운드 기본 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-212">**Inbound default rules**</span></span>

| <span data-ttu-id="c490d-213">Name</span><span class="sxs-lookup"><span data-stu-id="c490d-213">Name</span></span> | <span data-ttu-id="c490d-214">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-214">Priority</span></span> | <span data-ttu-id="c490d-215">원본 IP</span><span class="sxs-lookup"><span data-stu-id="c490d-215">Source IP</span></span> | <span data-ttu-id="c490d-216">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-216">Source Port</span></span> | <span data-ttu-id="c490d-217">대상 IP</span><span class="sxs-lookup"><span data-stu-id="c490d-217">Destination IP</span></span> | <span data-ttu-id="c490d-218">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-218">Destination Port</span></span> | <span data-ttu-id="c490d-219">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-219">Protocol</span></span> | <span data-ttu-id="c490d-220">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-220">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-221">AllowVNetInBound</span><span class="sxs-lookup"><span data-stu-id="c490d-221">AllowVNetInBound</span></span> |<span data-ttu-id="c490d-222">65000</span><span class="sxs-lookup"><span data-stu-id="c490d-222">65000</span></span> | <span data-ttu-id="c490d-223">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="c490d-223">VirtualNetwork</span></span> | * | <span data-ttu-id="c490d-224">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="c490d-224">VirtualNetwork</span></span> | * | * | <span data-ttu-id="c490d-225">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-225">Allow</span></span> |
| <span data-ttu-id="c490d-226">AllowAzureLoadBalancerInBound</span><span class="sxs-lookup"><span data-stu-id="c490d-226">AllowAzureLoadBalancerInBound</span></span> | <span data-ttu-id="c490d-227">65001</span><span class="sxs-lookup"><span data-stu-id="c490d-227">65001</span></span> | <span data-ttu-id="c490d-228">AzureLoadBalancer</span><span class="sxs-lookup"><span data-stu-id="c490d-228">AzureLoadBalancer</span></span> | * | * | * | * | <span data-ttu-id="c490d-229">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-229">Allow</span></span> |
| <span data-ttu-id="c490d-230">DenyAllInBound</span><span class="sxs-lookup"><span data-stu-id="c490d-230">DenyAllInBound</span></span> |<span data-ttu-id="c490d-231">65500</span><span class="sxs-lookup"><span data-stu-id="c490d-231">65500</span></span> | * | * | * | * | * | <span data-ttu-id="c490d-232">거부</span><span class="sxs-lookup"><span data-stu-id="c490d-232">Deny</span></span> |

<span data-ttu-id="c490d-233">**아웃바운드 기본 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-233">**Outbound default rules**</span></span>

| <span data-ttu-id="c490d-234">Name</span><span class="sxs-lookup"><span data-stu-id="c490d-234">Name</span></span> | <span data-ttu-id="c490d-235">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-235">Priority</span></span> | <span data-ttu-id="c490d-236">원본 IP</span><span class="sxs-lookup"><span data-stu-id="c490d-236">Source IP</span></span> | <span data-ttu-id="c490d-237">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-237">Source Port</span></span> | <span data-ttu-id="c490d-238">대상 IP</span><span class="sxs-lookup"><span data-stu-id="c490d-238">Destination IP</span></span> | <span data-ttu-id="c490d-239">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-239">Destination Port</span></span> | <span data-ttu-id="c490d-240">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-240">Protocol</span></span> | <span data-ttu-id="c490d-241">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-241">Access</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-242">AllowVnetOutBound</span><span class="sxs-lookup"><span data-stu-id="c490d-242">AllowVnetOutBound</span></span> | <span data-ttu-id="c490d-243">65000</span><span class="sxs-lookup"><span data-stu-id="c490d-243">65000</span></span> | <span data-ttu-id="c490d-244">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="c490d-244">VirtualNetwork</span></span> | * | <span data-ttu-id="c490d-245">VirtualNetwork</span><span class="sxs-lookup"><span data-stu-id="c490d-245">VirtualNetwork</span></span> | * | * | <span data-ttu-id="c490d-246">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-246">Allow</span></span> |
| <span data-ttu-id="c490d-247">AllowInternetOutBound</span><span class="sxs-lookup"><span data-stu-id="c490d-247">AllowInternetOutBound</span></span> | <span data-ttu-id="c490d-248">65001</span><span class="sxs-lookup"><span data-stu-id="c490d-248">65001</span></span> | * | * | <span data-ttu-id="c490d-249">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-249">Internet</span></span> | * | * | <span data-ttu-id="c490d-250">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-250">Allow</span></span> |
| <span data-ttu-id="c490d-251">DenyAllOutBound</span><span class="sxs-lookup"><span data-stu-id="c490d-251">DenyAllOutBound</span></span> | <span data-ttu-id="c490d-252">65500</span><span class="sxs-lookup"><span data-stu-id="c490d-252">65500</span></span> | * | * | * | * | * | <span data-ttu-id="c490d-253">거부</span><span class="sxs-lookup"><span data-stu-id="c490d-253">Deny</span></span> |

## <a name="associating-nsgs"></a><span data-ttu-id="c490d-254">NSG 연결</span><span class="sxs-lookup"><span data-stu-id="c490d-254">Associating NSGs</span></span>
<span data-ttu-id="c490d-255">NSG tooVMs, Nic 및 서브넷을 다음과 같이 사용 중인 hello 배포 모델에 따라 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-255">You can associate an NSG tooVMs, NICs, and subnets, depending on hello deployment model you are using, as follows:</span></span>

* <span data-ttu-id="c490d-256">**VM (기본에만 해당):** 보안 규칙이 적용 됩니다 tooall 트래픽을/hello VM에서에서 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-256">**VM (classic only):** Security rules are applied tooall traffic to/from hello VM.</span></span> 
* <span data-ttu-id="c490d-257">**NIC (리소스 관리자에만 해당):** 보안 규칙이 적용 됩니다 tooall 트래픽을/hello NIC hello NSG에서에서에 연결 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-257">**NIC (Resource Manager only):** Security rules are applied tooall traffic to/from hello NIC hello NSG is associated to.</span></span> <span data-ttu-id="c490d-258">다중 NIC VM에서 있습니다 수 다른 적용 (또는 동일한 hello) NSG tooeach NIC 개별적으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-258">In a multi-NIC VM, you can apply different (or hello same) NSG tooeach NIC individually.</span></span> 
* <span data-ttu-id="c490d-259">**(리소스 관리자 및 기본) 서브넷:** 보안 규칙이 적용 됩니다 tooany 트래픽을/리소스에서 toohello VNet를 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-259">**Subnet (Resource Manager and classic):** Security rules are applied tooany traffic to/from any resources connected toohello VNet.</span></span>

<span data-ttu-id="c490d-260">다른 Nsg tooa VM (또는 NIC hello 배포 모델에 따라 다름)를 연결 하 고 hello NIC 또는 VM에 연결 되어 있는 서브넷 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-260">You can associate different NSGs tooa VM (or NIC, depending on hello deployment model) and hello subnet that a NIC or VM is connected to.</span></span> <span data-ttu-id="c490d-261">보안 규칙는 적용 된 toohello 트래픽 hello에 각 NSG의 우선 순위에 따라 다음과 같습니다. 순서:</span><span class="sxs-lookup"><span data-stu-id="c490d-261">Security rules are applied toohello traffic, by priority, in each NSG, in hello following order:</span></span>

- <span data-ttu-id="c490d-262">**인바운드 트래픽**</span><span class="sxs-lookup"><span data-stu-id="c490d-262">**Inbound traffic**</span></span>

  1. <span data-ttu-id="c490d-263">**NSG 적용 toosubnet:** 서브넷 NSG가 일치 하는 규칙 toodeny 트래픽 hello 패킷은 삭제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-263">**NSG applied toosubnet:** If a subnet NSG has a matching rule toodeny traffic, hello packet is dropped.</span></span>

  2. <span data-ttu-id="c490d-264">**NSG 적용 tooNIC** (리소스 관리자) 또는 VM (클래식): 경우 VM\NIC NSG에 트래픽을 거부 하는 일치 하는 규칙이, 서브넷 NSG에는 일치 하는 규칙이 트래픽을 허용 하는 경우에 hello VM\NIC, 패킷은 삭제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-264">**NSG applied tooNIC** (Resource Manager) or VM (classic): If VM\NIC NSG has a matching rule that denies traffic, packets are dropped at hello VM\NIC, even if a subnet NSG has a matching rule that allows traffic.</span></span>

- <span data-ttu-id="c490d-265">**아웃바운드 트래픽**</span><span class="sxs-lookup"><span data-stu-id="c490d-265">**Outbound traffic**</span></span>

  1. <span data-ttu-id="c490d-266">**NSG 적용 tooNIC** (리소스 관리자) 또는 VM (클래식): VM\NIC NSG 트래픽을 거부 하는 일치 하는 규칙이 있으면 패킷이 삭제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-266">**NSG applied tooNIC** (Resource Manager) or VM (classic): If a VM\NIC NSG has a matching rule that denies traffic, packets are dropped.</span></span>

  2. <span data-ttu-id="c490d-267">**NSG 적용 toosubnet:** 서브넷 NSG 트래픽을 거부 하는 일치 하는 규칙이 있으면 패킷이 삭제 될 경우에 VM\NIC NSG가 트래픽을 허용 하는 일치 하는 규칙입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-267">**NSG applied toosubnet:** If a subnet NSG has a matching rule that denies traffic, packets are dropped, even if a VM\NIC NSG has a matching rule that allows traffic.</span></span>

> [!NOTE]
> <span data-ttu-id="c490d-268">단일 NSG tooa 서브넷, VM 또는 NIC;만 연결할 수 있지만 연결할 수 있습니다 원하는 만큼 많은 리소스 동일한 NSG tooas hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-268">Although you can only associate a single NSG tooa subnet, VM, or NIC; you can associate hello same NSG tooas many resources as you want.</span></span>
>

## <a name="implementation"></a><span data-ttu-id="c490d-269">구현</span><span class="sxs-lookup"><span data-stu-id="c490d-269">Implementation</span></span>
<span data-ttu-id="c490d-270">리소스 관리자 hello 또는 hello 다음 도구를 사용 하 여 클래식 배포 모델에서 Nsg를 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-270">You can implement NSGs in hello Resource Manager or classic deployment models using hello following tools:</span></span>

| <span data-ttu-id="c490d-271">배포 도구</span><span class="sxs-lookup"><span data-stu-id="c490d-271">Deployment tool</span></span> | <span data-ttu-id="c490d-272">클래식</span><span class="sxs-lookup"><span data-stu-id="c490d-272">Classic</span></span> | <span data-ttu-id="c490d-273">리소스 관리자</span><span class="sxs-lookup"><span data-stu-id="c490d-273">Resource Manager</span></span> |
| --- | --- | --- |
| <span data-ttu-id="c490d-274">Azure Portal</span><span class="sxs-lookup"><span data-stu-id="c490d-274">Azure portal</span></span>   | <span data-ttu-id="c490d-275">예</span><span class="sxs-lookup"><span data-stu-id="c490d-275">Yes</span></span> | [<span data-ttu-id="c490d-276">예</span><span class="sxs-lookup"><span data-stu-id="c490d-276">Yes</span></span>](virtual-networks-create-nsg-arm-pportal.md) |
| <span data-ttu-id="c490d-277">PowerShell</span><span class="sxs-lookup"><span data-stu-id="c490d-277">PowerShell</span></span>     | [<span data-ttu-id="c490d-278">예</span><span class="sxs-lookup"><span data-stu-id="c490d-278">Yes</span></span>](virtual-networks-create-nsg-classic-ps.md) | [<span data-ttu-id="c490d-279">예</span><span class="sxs-lookup"><span data-stu-id="c490d-279">Yes</span></span>](virtual-networks-create-nsg-arm-ps.md) |
| <span data-ttu-id="c490d-280">Azure CLI **V1**</span><span class="sxs-lookup"><span data-stu-id="c490d-280">Azure CLI **V1**</span></span>   | [<span data-ttu-id="c490d-281">예</span><span class="sxs-lookup"><span data-stu-id="c490d-281">Yes</span></span>](virtual-networks-create-nsg-classic-cli.md) | [<span data-ttu-id="c490d-282">예</span><span class="sxs-lookup"><span data-stu-id="c490d-282">Yes</span></span>](virtual-networks-create-nsg-cli-nodejs.md) |
| <span data-ttu-id="c490d-283">Azure CLI **V2**</span><span class="sxs-lookup"><span data-stu-id="c490d-283">Azure CLI **V2**</span></span>   | <span data-ttu-id="c490d-284">아니요</span><span class="sxs-lookup"><span data-stu-id="c490d-284">No</span></span> | [<span data-ttu-id="c490d-285">예</span><span class="sxs-lookup"><span data-stu-id="c490d-285">Yes</span></span>](virtual-networks-create-nsg-arm-cli.md) |
| <span data-ttu-id="c490d-286">Azure Resource Manager 템플릿</span><span class="sxs-lookup"><span data-stu-id="c490d-286">Azure Resource Manager template</span></span>   | <span data-ttu-id="c490d-287">아니요</span><span class="sxs-lookup"><span data-stu-id="c490d-287">No</span></span>  | [<span data-ttu-id="c490d-288">예</span><span class="sxs-lookup"><span data-stu-id="c490d-288">Yes</span></span>](virtual-networks-create-nsg-arm-template.md) |

## <a name="planning"></a><span data-ttu-id="c490d-289">계획</span><span class="sxs-lookup"><span data-stu-id="c490d-289">Planning</span></span>
<span data-ttu-id="c490d-290">Nsg를 구현 하기 전에 다음 질문 tooanswer hello가 필요 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-290">Before implementing NSGs, you need tooanswer hello following questions:</span></span>

1. <span data-ttu-id="c490d-291">어떤 유형의 리소스에서 toofilter 트래픽 tooor 할까요?</span><span class="sxs-lookup"><span data-stu-id="c490d-291">What types of resources do you want toofilter traffic tooor from?</span></span> <span data-ttu-id="c490d-292">NIC(Resource Manager), VM(클래식), Cloud Services, Application Service Environments 및 VM Scale Sets와 같은 리소스를 연결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-292">You can connect resources such as NICs (Resource Manager), VMs (classic), Cloud Services, Application Service Environments, and VM Scale Sets.</span></span> 
2. <span data-ttu-id="c490d-293">리소스가 hello toofilter 트래픽이 기존 Vnet에 연결 된 toosubnets에서 원하는?</span><span class="sxs-lookup"><span data-stu-id="c490d-293">Are hello resources you want toofilter traffic to/from connected toosubnets in existing VNets?</span></span>

<span data-ttu-id="c490d-294">Azure에서 네트워크 보안에 대 한 자세한 내용은 hello 읽을 [클라우드 서비스 및 네트워크 보안](../best-practices-network-security.md) 문서.</span><span class="sxs-lookup"><span data-stu-id="c490d-294">For more information on planning for network security in Azure, read hello [Cloud services and network security](../best-practices-network-security.md) article.</span></span> 

## <a name="design-considerations"></a><span data-ttu-id="c490d-295">디자인 고려 사항</span><span class="sxs-lookup"><span data-stu-id="c490d-295">Design considerations</span></span>
<span data-ttu-id="c490d-296">Hello에 toohello 질문 hello 답변을 알고 있다면 [계획](#Planning) 섹션를 hello 여 Nsg를 정의 하기 전에 다음 섹션을 검토 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-296">Once you know hello answers toohello questions in hello [Planning](#Planning) section, review hello following sections before defining your NSGs:</span></span>

### <a name="limits"></a><span data-ttu-id="c490d-297">제한</span><span class="sxs-lookup"><span data-stu-id="c490d-297">Limits</span></span>
<span data-ttu-id="c490d-298">제한은 당 NSG 규칙의 수와 toohello 수 Nsg는 구독에 있을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-298">There are limits toohello number of NSGs you can have in a subscription and number of rules per NSG.</span></span> <span data-ttu-id="c490d-299">hello 제한, hello 읽기에 대 한 자세한 toolearn [Azure 제한](../azure-subscription-service-limits.md#networking-limits) 문서.</span><span class="sxs-lookup"><span data-stu-id="c490d-299">toolearn more about hello limits, read hello [Azure limits](../azure-subscription-service-limits.md#networking-limits) article.</span></span>

### <a name="vnet-and-subnet-design"></a><span data-ttu-id="c490d-300">VNet 및 서브넷 디자인</span><span class="sxs-lookup"><span data-stu-id="c490d-300">VNet and subnet design</span></span>
<span data-ttu-id="c490d-301">Nsg 적용된 toosubnets이 될 수 있으므로 서브넷으로 리소스를 그룹화 하 고 Nsg toosubnets 적용 하 여 hello 수가 Nsg 최소화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-301">Since NSGs can be applied toosubnets, you can minimize hello number of NSGs by grouping your resources by subnet, and applying NSGs toosubnets.</span></span>  <span data-ttu-id="c490d-302">Tooapply Nsg toosubnets 결정 한 경우에 기존 Vnet 및 있는 서브넷 되지 정의 된 Nsg에 주의 알 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-302">If you decide tooapply NSGs toosubnets, you may find that existing VNets and subnets you have were not defined with NSGs in mind.</span></span> <span data-ttu-id="c490d-303">NSG 디자인 toodefine 새 Vnet 및 서브넷 toosupport 필요 하 고 새 리소스 tooyour 새 서브넷을 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-303">You may need toodefine new VNets and subnets toosupport your NSG design and deploy your new resources tooyour new subnets.</span></span> <span data-ttu-id="c490d-304">다음 리소스 toohello 새 서브넷을 기존 마이그레이션 전략 toomove를 정의할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-304">You could then define a migration strategy toomove existing resources toohello new subnets.</span></span> 

### <a name="special-rules"></a><span data-ttu-id="c490d-305">특별한 규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-305">Special rules</span></span>
<span data-ttu-id="c490d-306">Hello 규칙에서 허용 하는 트래픽을 차단 하는 경우 인프라 핵심 Azure 서비스와 통신할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-306">If you block traffic allowed by hello following rules, your infrastructure can't communicate with essential Azure services:</span></span>

* <span data-ttu-id="c490d-307">**Hello 호스트 노드의 가상 IP:** DHCP, DNS 및 상태 모니터링을 통해 제공 됩니다 hello 가상화 된 호스트 IP 주소 168.63.129.16 같은 기본 인프라 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-307">**Virtual IP of hello host node:** Basic infrastructure services such as DHCP, DNS, and health monitoring are provided through hello virtualized host IP address 168.63.129.16.</span></span> <span data-ttu-id="c490d-308">이 공용 IP 주소 tooMicrosoft 속하고 hello만 가상화 된 IP 주소가이 용도로 모든 지역에서 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-308">This public IP address belongs tooMicrosoft and is hello only virtualized IP address used in all regions for this purpose.</span></span> <span data-ttu-id="c490d-309">이 IP 주소를 toohello 물리적 컴퓨터의 IP 주소를 hello 서버 (호스트 노드) hello VM 호스트를 매핑합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-309">This IP address maps toohello physical IP address of hello server machine (host node) hosting hello VM.</span></span> <span data-ttu-id="c490d-310">hello 호스트 노드는 부하 분산 장치 상태 프로브와 컴퓨터 상태 프로브의 hello hello DHCP 릴레이, DNS 재귀 확인자 hello, 및 hello에 대 한 hello 프로브 원본으로 작동 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-310">hello host node acts as hello DHCP relay, hello DNS recursive resolver, and hello probe source for hello load balancer health probe and hello machine health probe.</span></span> <span data-ttu-id="c490d-311">통신 toothis IP 주소가 한 공격 않습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-311">Communication toothis IP address is not an attack.</span></span>
* <span data-ttu-id="c490d-312">**라이선싱(키 관리 서비스)**: VM에서 실행되는 Windows 이미지를 사용하려면 라이선스가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-312">**Licensing (Key Management Service):** Windows images running in VMs must be licensed.</span></span> <span data-ttu-id="c490d-313">tooensure 라이선스 요청을 이러한 쿼리를 처리 하는 toohello 키 관리 서비스 호스트 서버에 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-313">tooensure licensing, a request is sent toohello Key Management Service host servers that handle such queries.</span></span> <span data-ttu-id="c490d-314">hello 요청은 포트 1688 통해 아웃 바운드 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-314">hello request is made outbound through port 1688.</span></span>

### <a name="icmp-traffic"></a><span data-ttu-id="c490d-315">ICMP 트래픽</span><span class="sxs-lookup"><span data-stu-id="c490d-315">ICMP traffic</span></span>
<span data-ttu-id="c490d-316">현재 NSG 규칙 hello 프로토콜만 허용 *TCP* 또는 *UDP*합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-316">hello current NSG rules only allow for protocols *TCP* or *UDP*.</span></span> <span data-ttu-id="c490d-317">*ICMP*에 대한 고유 태그는 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-317">There is not a specific tag for *ICMP*.</span></span> <span data-ttu-id="c490d-318">그러나 모든 포트와 프로토콜 hello VNet 내에서 트래픽을 tooand 있도록 hello AllowVNetInBound 기본 규칙에 의해 VNet 내에서 ICMP 트래픽이 허용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-318">However, ICMP traffic is allowed within a VNet by hello AllowVNetInBound default rule, that allows traffic tooand from any port and protocol within hello VNet.</span></span>

### <a name="subnets"></a><span data-ttu-id="c490d-319">서브넷</span><span class="sxs-lookup"><span data-stu-id="c490d-319">Subnets</span></span>
* <span data-ttu-id="c490d-320">Hello 단계 수를의 사용자 작업에 필요한 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-320">Consider hello number of tiers your workload requires.</span></span> <span data-ttu-id="c490d-321">서브넷에 NSG 적용 toohello 서브넷과 사용 하 여 각 계층을 격리 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-321">Each tier can be isolated by using a subnet, with an NSG applied toohello subnet.</span></span> 
* <span data-ttu-id="c490d-322">VPN 게이트웨이 또는 ExpressRoute 회로 대 한 tooimplement 서브넷을 필요한 경우에 **하지** NSG toothat 서브넷을 적용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-322">If you need tooimplement a subnet for a VPN gateway, or ExpressRoute circuit, do **not** apply an NSG toothat subnet.</span></span> <span data-ttu-id="c490d-323">그렇게 하면 VNet 간 또는 온-프레미스 간 연결이 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-323">If you do so, cross-VNet or cross-premises connectivity may fail.</span></span> 
* <span data-ttu-id="c490d-324">Tooimplement 해야 할 경우 네트워크 가상 어플라이언스 (NVA) hello NVA tooits 고유한 서브넷을 연결 하 고 hello NVA에서에서 사용자 정의 경로 (UDR) tooand를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-324">If you need tooimplement a network virtual appliance (NVA), connect hello NVA tooits own subnet and create user-defined routes (UDR) tooand from hello NVA.</span></span> <span data-ttu-id="c490d-325">서브넷 수준 NSG toofilter 트래픽을이 서브넷 아웃을 구현할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-325">You can implement a subnet level NSG toofilter traffic in and out of this subnet.</span></span> <span data-ttu-id="c490d-326">hello 읽을 UDRs에 대 한 자세한 toolearn [사용자 정의 경로](virtual-networks-udr-overview.md) 문서.</span><span class="sxs-lookup"><span data-stu-id="c490d-326">toolearn more about UDRs, read hello [User-defined routes](virtual-networks-udr-overview.md) article.</span></span>

### <a name="load-balancers"></a><span data-ttu-id="c490d-327">부하 분산 장치</span><span class="sxs-lookup"><span data-stu-id="c490d-327">Load balancers</span></span>
* <span data-ttu-id="c490d-328">각 작업에서 사용 하는 각 부하 분산 장치에 대 한 nat 규칙 hello 부하 분산 및 네트워크 주소를 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-328">Consider hello load balancing and network address translation (NAT) rules for each load balancer used by each of your workloads.</span></span> <span data-ttu-id="c490d-329">NAT 규칙은 Nic (리소스 관리자) 또는 Vm/클라우드 서비스 역할 인스턴스 (클래식)를 포함 하는 바인딩된 tooa 백 엔드 풀입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-329">NAT rules are bound tooa back-end pool that contains NICs (Resource Manager) or VMs/Cloud Services role instances (classic).</span></span> <span data-ttu-id="c490d-330">만드는 각 백 엔드 풀에 대 한 NSG hello 부하 분산 장치에서 구현 된 hello 규칙을 통해 매핑된 트래픽만 허용 하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-330">Consider creating an NSG for each back-end pool, allowing only traffic mapped through hello rules implemented in hello load balancers.</span></span> <span data-ttu-id="c490d-331">각 백 엔드 풀에 대 한 NSG 만들기도 필터링 됩니다 (하지 않고 직접 hello 부하 분산 장치를 통해), toohello 백 엔드 풀 들어오는 트래픽을 보장 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-331">Creating an NSG for each back-end pool guarantees that traffic coming toohello back-end pool directly (rather than through hello load balancer), is also filtered.</span></span>
* <span data-ttu-id="c490d-332">클래식 배포 포트 역할 인스턴스 또는 Vm에서 부하 분산 장치 tooports에 매핑되는 끝점을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-332">In classic deployments, you create endpoints that map ports on a load balancer tooports on your VMs or role instances.</span></span> <span data-ttu-id="c490d-333">또한 Resource Manager를 통해 사용자 고유의 개별적인 공용 부하 분산 장치를 만들 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-333">You can also create your own individual public-facing load balancer through Resource Manager.</span></span> <span data-ttu-id="c490d-334">들어오는 트래픽을 hello 대상 포트 hello hello VM에서에서 실제 포트 또는 역할 인스턴스를 부하 분산 장치에 의해 노출 된 hello 포트가 아닌 경우</span><span class="sxs-lookup"><span data-stu-id="c490d-334">hello destination port for incoming traffic is hello actual port in hello VM or role instance, not hello port exposed by a load balancer.</span></span> <span data-ttu-id="c490d-335">hello 원본 포트 및 주소 hello 연결 toohello VM이 포트와 주소에 대 한 hello hello 포트 및 주소 hello 부하 분산 장치에 의해 노출 아닌 hello 인터넷에서에서 원격 컴퓨터.</span><span class="sxs-lookup"><span data-stu-id="c490d-335">hello source port and address for hello connection toohello VM is a port and address on hello remote computer in hello Internet, not hello port and address exposed by hello load balancer.</span></span>
* <span data-ttu-id="c490d-336">내부 부하 분산 장치 ILB ()를 통해 들어오는 Nsg toofilter 트래픽을 만들면 hello 원본 컴퓨터를 하지 hello 부하 분산 장치에서에서 hello 원본 포트와 주소 범위 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-336">When you create NSGs toofilter traffic coming through an internal load balancer (ILB), hello source port and address range applied are  from hello originating computer, not hello load balancer.</span></span> <span data-ttu-id="c490d-337">hello 대상 포트와 주소 범위는 hello 부하 분산 하지 hello 대상 컴퓨터의입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-337">hello destination port and address range are those of hello destination computer, not hello load balancer.</span></span>

### <a name="other"></a><span data-ttu-id="c490d-338">기타</span><span class="sxs-lookup"><span data-stu-id="c490d-338">Other</span></span>
* <span data-ttu-id="c490d-339">끝점 기반 액세스 제어 목록 (ACL) 및 Nsg hello에 지원 되지 않습니다 동일한 VM 인스턴스.</span><span class="sxs-lookup"><span data-stu-id="c490d-339">Endpoint-based access control lists (ACL) and NSGs are not supported on hello same VM instance.</span></span> <span data-ttu-id="c490d-340">Toouse NSG를 원하는 위치에 끝점 ACL을 이미 있는 경우 먼저 hello 끝점 ACL을 제거 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-340">If you want toouse an NSG and have an endpoint ACL already in place, first remove hello endpoint ACL.</span></span> <span data-ttu-id="c490d-341">방법에 대 한 정보에 대 한 끝점 ACL tooremove 참조 hello [끝점 Acl을 관리](virtual-networks-acl-powershell.md) 문서.</span><span class="sxs-lookup"><span data-stu-id="c490d-341">For information about how tooremove an endpoint ACL, see hello [Manage endpoint ACLs](virtual-networks-acl-powershell.md) article.</span></span>
* <span data-ttu-id="c490d-342">리소스 관리자의 여러 Nic tooenable 관리 (원격 액세스) 당 NIC 별로 연결 된 NSG tooa NIC Vm에 대 한 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-342">In Resource Manager, you can use an NSG associated tooa NIC for VMs with multiple NICs tooenable management (remote access) on a per NIC basis.</span></span> <span data-ttu-id="c490d-343">고유한 Nsg tooeach NIC 연결 Nic에서 한 트래픽 유형 구분을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-343">Associating unique NSGs tooeach NIC enables separation of traffic types across NICs.</span></span>
* <span data-ttu-id="c490d-344">부하 분산 장치, 다른 Vnet의 트래픽을 필터링 하는 경우 비슷한 toohello 사용, 하지 hello Vnet를 연결 하는 hello 게이트웨이 hello 원격 컴퓨터의 hello 소스 주소 범위를 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-344">Similar toohello use of load balancers, when filtering traffic from other VNets, you must use hello source address range of hello remote computer, not hello gateway connecting hello VNets.</span></span>
* <span data-ttu-id="c490d-345">여러 Azure 서비스에 연결 된 tooVNets 일 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-345">Many Azure services cannot be connected tooVNets.</span></span> <span data-ttu-id="c490d-346">Azure 리소스를 없는 경우 연결 된 tooa VNet에서 NSG toofilter 트래픽 toohello 리소스를 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-346">If an Azure resource is not connected tooa VNet, you cannot use an NSG toofilter traffic toohello resource.</span></span>  <span data-ttu-id="c490d-347">Hello 서비스에 대 한 hello 설명서를 읽기 사용 하면 toodetermine hello 서비스에 연결 된 VNet tooa 될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-347">Read hello documentation for hello services you use toodetermine whether hello service can be connected tooa VNet.</span></span>

## <a name="sample-deployment"></a><span data-ttu-id="c490d-348">샘플 배포</span><span class="sxs-lookup"><span data-stu-id="c490d-348">Sample deployment</span></span>
<span data-ttu-id="c490d-349">이 문서에서는 hello 정보의 tooillustrate hello 적용 hello 다음 그림에에서 표시 된 2 계층 응용 프로그램의 일반적인 시나리오를 고려 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-349">tooillustrate hello application of hello information in this article, consider a common scenario of a two tier application shown in hello following picture:</span></span>

![NSG](./media/virtual-network-nsg-overview/figure1.png)

<span data-ttu-id="c490d-351">Hello 다이어그램에 나와 있는 것 처럼 hello *Web1* 및 *Web2* Vm이 연결 된 toohello *프런트 엔드* 서브넷 및 hello *DB1* 및 *DB2* Vm이 연결 된 toohello *백 엔드* 서브넷입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-351">As shown in hello diagram, hello *Web1* and *Web2* VMs are connected toohello *FrontEnd* subnet, and hello *DB1* and *DB2* VMs are connected toohello *BackEnd* subnet.</span></span>  <span data-ttu-id="c490d-352">두 서브넷 hello의 일부인 *TestVNet* VNet입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-352">Both subnets are part of hello *TestVNet* VNet.</span></span> <span data-ttu-id="c490d-353">hello 응용 프로그램 구성 요소 각 연결 된 Azure VM tooa VNet 내에서 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-353">hello application components each run within an Azure VM connected tooa VNet.</span></span> <span data-ttu-id="c490d-354">hello 시나리오 요구 사항을 준수 하는 hello에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-354">hello scenario has hello following requirements:</span></span>

1. <span data-ttu-id="c490d-355">Hello 웹 및 DB 서버 간의 트래픽 분리 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-355">Separation of traffic between hello WEB and DB servers.</span></span>
2. <span data-ttu-id="c490d-356">로드 균형 조정 규칙 hello 부하 분산 장치 tooall 웹 서버에서 포트 80에서 트래픽을 전달 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-356">Load balancing rules forward traffic from hello load balancer tooall web servers on port 80.</span></span>
3. <span data-ttu-id="c490d-357">분산 장치 NAT 규칙 트래픽을 전달 hello WEB1 VM에서 포트 50001 tooport 3389에 내용이 hello 부하 분산 장치에 로드 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-357">Load balancer NAT rules forward traffic coming into hello load balancer on port 50001 tooport 3389 on hello WEB1 VM.</span></span>
4. <span data-ttu-id="c490d-358">없음 액세스 toohello 2와 3의 요구 사항 제외 하 고 hello 인터넷에서에서 프런트 엔드 또는 백 엔드 Vm입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-358">No access toohello front-end or back-end VMs from hello Internet, except requirements 2 and 3.</span></span>
5. <span data-ttu-id="c490d-359">아웃 바운드 인터넷 액세스가 없는 hello 웹 또는 DB 서버에서 합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-359">No outbound Internet access from hello WEB or DB servers.</span></span>
6. <span data-ttu-id="c490d-360">Hello 프런트 엔드 서브넷에 대 한 액세스는 웹 서버의 3389 tooport를 허용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-360">Access from hello FrontEnd subnet is allowed tooport 3389 of any web server.</span></span>
7. <span data-ttu-id="c490d-361">Hello 프런트 엔드 서브넷에 대 한 액세스는 DB 서버의 3389 tooport를 허용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-361">Access from hello FrontEnd subnet is allowed tooport 3389 of any DB server.</span></span>
8. <span data-ttu-id="c490d-362">Hello 프런트 엔드 서브넷에 대 한 액세스는 모든 DB 서버의 1433 tooport를 허용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-362">Access from hello FrontEnd subnet is allowed tooport 1433 of all DB servers.</span></span>
9. <span data-ttu-id="c490d-363">DB 서버의 다른 NIC에서 관리 트래픽(3389 포트)과 데이터베이스 트래픽(1433 포트)을 분리합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-363">Separation of management traffic (port 3389) and database traffic (1433) on different NICs in DB servers.</span></span>

<span data-ttu-id="c490d-364">요구 사항 1-6 (제외 요구 사항 3 및 4)는 모든 예외일된 toosubnet 공간입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-364">Requirements 1-6 (except requirements 3 and 4) are all confined toosubnet spaces.</span></span> <span data-ttu-id="c490d-365">hello 다음 Nsg hello 이전 요구 사항을 충족 필요한 Nsg의 hello 수를 최소화 하는 동안:</span><span class="sxs-lookup"><span data-stu-id="c490d-365">hello following NSGs meet hello previous requirements, while minimizing hello number of NSGs required:</span></span>

### <a name="frontend"></a><span data-ttu-id="c490d-366">FrontEnd</span><span class="sxs-lookup"><span data-stu-id="c490d-366">FrontEnd</span></span>
<span data-ttu-id="c490d-367">**인바운드 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-367">**Inbound rules**</span></span>

| <span data-ttu-id="c490d-368">규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-368">Rule</span></span> | <span data-ttu-id="c490d-369">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-369">Access</span></span> | <span data-ttu-id="c490d-370">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-370">Priority</span></span> | <span data-ttu-id="c490d-371">원본 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-371">Source address range</span></span> | <span data-ttu-id="c490d-372">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-372">Source port</span></span> | <span data-ttu-id="c490d-373">대상 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-373">Destination address range</span></span> | <span data-ttu-id="c490d-374">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-374">Destination port</span></span> | <span data-ttu-id="c490d-375">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-375">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-376">Allow-Inbound-HTTP-Internet(인바운드 HTTP 인터넷 허용)</span><span class="sxs-lookup"><span data-stu-id="c490d-376">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="c490d-377">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-377">Allow</span></span> | <span data-ttu-id="c490d-378">100</span><span class="sxs-lookup"><span data-stu-id="c490d-378">100</span></span> | <span data-ttu-id="c490d-379">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-379">Internet</span></span> | * | * | <span data-ttu-id="c490d-380">80</span><span class="sxs-lookup"><span data-stu-id="c490d-380">80</span></span> | <span data-ttu-id="c490d-381">TCP</span><span class="sxs-lookup"><span data-stu-id="c490d-381">TCP</span></span> |
| <span data-ttu-id="c490d-382">Allow-Inbound-RDP-Internet(인바운드 RDP 인터넷 허용)</span><span class="sxs-lookup"><span data-stu-id="c490d-382">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="c490d-383">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-383">Allow</span></span> | <span data-ttu-id="c490d-384">200</span><span class="sxs-lookup"><span data-stu-id="c490d-384">200</span></span> | <span data-ttu-id="c490d-385">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-385">Internet</span></span> | * | * | <span data-ttu-id="c490d-386">3389</span><span class="sxs-lookup"><span data-stu-id="c490d-386">3389</span></span> | <span data-ttu-id="c490d-387">TCP</span><span class="sxs-lookup"><span data-stu-id="c490d-387">TCP</span></span> |
| <span data-ttu-id="c490d-388">Deny-Inbound-All(모든 인바운드 거부)</span><span class="sxs-lookup"><span data-stu-id="c490d-388">Deny-Inbound-All</span></span> | <span data-ttu-id="c490d-389">거부</span><span class="sxs-lookup"><span data-stu-id="c490d-389">Deny</span></span> | <span data-ttu-id="c490d-390">300</span><span class="sxs-lookup"><span data-stu-id="c490d-390">300</span></span> | <span data-ttu-id="c490d-391">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-391">Internet</span></span> | * | * | * | <span data-ttu-id="c490d-392">TCP</span><span class="sxs-lookup"><span data-stu-id="c490d-392">TCP</span></span> |

<span data-ttu-id="c490d-393">**아웃바운드 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-393">**Outbound rules**</span></span>

| <span data-ttu-id="c490d-394">규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-394">Rule</span></span> | <span data-ttu-id="c490d-395">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-395">Access</span></span> | <span data-ttu-id="c490d-396">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-396">Priority</span></span> | <span data-ttu-id="c490d-397">원본 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-397">Source address range</span></span> | <span data-ttu-id="c490d-398">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-398">Source port</span></span> | <span data-ttu-id="c490d-399">대상 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-399">Destination address range</span></span> | <span data-ttu-id="c490d-400">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-400">Destination port</span></span> | <span data-ttu-id="c490d-401">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-401">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-402">Deny-Internet-All(모든 인터넷 거부)</span><span class="sxs-lookup"><span data-stu-id="c490d-402">Deny-Internet-All</span></span> |<span data-ttu-id="c490d-403">거부</span><span class="sxs-lookup"><span data-stu-id="c490d-403">Deny</span></span> |<span data-ttu-id="c490d-404">100</span><span class="sxs-lookup"><span data-stu-id="c490d-404">100</span></span> | * | * | <span data-ttu-id="c490d-405">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-405">Internet</span></span> | * | * |

### <a name="backend"></a><span data-ttu-id="c490d-406">BackEnd</span><span class="sxs-lookup"><span data-stu-id="c490d-406">BackEnd</span></span>
<span data-ttu-id="c490d-407">**인바운드 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-407">**Inbound rules**</span></span>

| <span data-ttu-id="c490d-408">규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-408">Rule</span></span> | <span data-ttu-id="c490d-409">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-409">Access</span></span> | <span data-ttu-id="c490d-410">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-410">Priority</span></span> | <span data-ttu-id="c490d-411">원본 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-411">Source address range</span></span> | <span data-ttu-id="c490d-412">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-412">Source port</span></span> | <span data-ttu-id="c490d-413">대상 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-413">Destination address range</span></span> | <span data-ttu-id="c490d-414">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-414">Destination port</span></span> | <span data-ttu-id="c490d-415">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-415">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-416">Deny-Internet-All(모든 인터넷 거부)</span><span class="sxs-lookup"><span data-stu-id="c490d-416">Deny-Internet-All</span></span> | <span data-ttu-id="c490d-417">거부</span><span class="sxs-lookup"><span data-stu-id="c490d-417">Deny</span></span> | <span data-ttu-id="c490d-418">100</span><span class="sxs-lookup"><span data-stu-id="c490d-418">100</span></span> | <span data-ttu-id="c490d-419">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-419">Internet</span></span> | * | * | * | * |

<span data-ttu-id="c490d-420">**아웃바운드 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-420">**Outbound rules**</span></span>

| <span data-ttu-id="c490d-421">규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-421">Rule</span></span> | <span data-ttu-id="c490d-422">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-422">Access</span></span> | <span data-ttu-id="c490d-423">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-423">Priority</span></span> | <span data-ttu-id="c490d-424">원본 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-424">Source address range</span></span> | <span data-ttu-id="c490d-425">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-425">Source port</span></span> | <span data-ttu-id="c490d-426">대상 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-426">Destination address range</span></span> | <span data-ttu-id="c490d-427">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-427">Destination port</span></span> | <span data-ttu-id="c490d-428">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-428">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-429">Deny-Internet-All(모든 인터넷 거부)</span><span class="sxs-lookup"><span data-stu-id="c490d-429">Deny-Internet-All</span></span> | <span data-ttu-id="c490d-430">거부</span><span class="sxs-lookup"><span data-stu-id="c490d-430">Deny</span></span> | <span data-ttu-id="c490d-431">100</span><span class="sxs-lookup"><span data-stu-id="c490d-431">100</span></span> | * | * | <span data-ttu-id="c490d-432">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-432">Internet</span></span> | * | * |

<span data-ttu-id="c490d-433">다음 Nsg 만들어지고 tooNICs hello 다음 Vm에에서 연결 된 hello:</span><span class="sxs-lookup"><span data-stu-id="c490d-433">hello following NSGs are created and associated tooNICs in hello following VMs:</span></span>

### <a name="web1"></a><span data-ttu-id="c490d-434">WEB1</span><span class="sxs-lookup"><span data-stu-id="c490d-434">WEB1</span></span>
<span data-ttu-id="c490d-435">**인바운드 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-435">**Inbound rules**</span></span>

| <span data-ttu-id="c490d-436">규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-436">Rule</span></span> | <span data-ttu-id="c490d-437">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-437">Access</span></span> | <span data-ttu-id="c490d-438">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-438">Priority</span></span> | <span data-ttu-id="c490d-439">원본 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-439">Source address range</span></span> | <span data-ttu-id="c490d-440">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-440">Source port</span></span> | <span data-ttu-id="c490d-441">대상 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-441">Destination address range</span></span> | <span data-ttu-id="c490d-442">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-442">Destination port</span></span> | <span data-ttu-id="c490d-443">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-443">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-444">Allow-Inbound-RDP-Internet(인바운드 RDP 인터넷 허용)</span><span class="sxs-lookup"><span data-stu-id="c490d-444">Allow-Inbound-RDP-Internet</span></span> | <span data-ttu-id="c490d-445">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-445">Allow</span></span> | <span data-ttu-id="c490d-446">100</span><span class="sxs-lookup"><span data-stu-id="c490d-446">100</span></span> | <span data-ttu-id="c490d-447">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-447">Internet</span></span> | * | * | <span data-ttu-id="c490d-448">3389</span><span class="sxs-lookup"><span data-stu-id="c490d-448">3389</span></span> | <span data-ttu-id="c490d-449">TCP</span><span class="sxs-lookup"><span data-stu-id="c490d-449">TCP</span></span> |
| <span data-ttu-id="c490d-450">Allow-Inbound-HTTP-Internet(인바운드 HTTP 인터넷 허용)</span><span class="sxs-lookup"><span data-stu-id="c490d-450">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="c490d-451">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-451">Allow</span></span> | <span data-ttu-id="c490d-452">200</span><span class="sxs-lookup"><span data-stu-id="c490d-452">200</span></span> | <span data-ttu-id="c490d-453">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-453">Internet</span></span> | * | * | <span data-ttu-id="c490d-454">80</span><span class="sxs-lookup"><span data-stu-id="c490d-454">80</span></span> | <span data-ttu-id="c490d-455">TCP</span><span class="sxs-lookup"><span data-stu-id="c490d-455">TCP</span></span> |

> [!NOTE]
> <span data-ttu-id="c490d-456">hello 이전 규칙에 대 한 hello 소스 주소 범위는 **인터넷**, hello 부하 분산의 가상 IP 주소를 hello 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-456">hello source address range for hello previous rules is **Internet**, not hello virtual IP address of for hello load balancer.</span></span> <span data-ttu-id="c490d-457">hello 원본 포트는 *, 500001 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-457">hello source port is *, not 500001.</span></span> <span data-ttu-id="c490d-458">부하 분산 장치에 대 한 NAT 규칙 NSG 보안 규칙으로 동일한는 hello 있습니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-458">NAT rules for load balancers are not hello same as NSG security rules.</span></span> <span data-ttu-id="c490d-459">NSG 보안 규칙은 항상 관련된 toohello 원본 소스와의 트래픽 최종 대상 **하지** hello 2 사이 hello 부하 분산 장치입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-459">NSG security rules are always related toohello original source and final destination of traffic, **not** hello load balancer between hello two.</span></span> 
> 
> 

### <a name="web2"></a><span data-ttu-id="c490d-460">WEB2</span><span class="sxs-lookup"><span data-stu-id="c490d-460">WEB2</span></span>
<span data-ttu-id="c490d-461">**인바운드 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-461">**Inbound rules**</span></span>

| <span data-ttu-id="c490d-462">규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-462">Rule</span></span> | <span data-ttu-id="c490d-463">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-463">Access</span></span> | <span data-ttu-id="c490d-464">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-464">Priority</span></span> | <span data-ttu-id="c490d-465">원본 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-465">Source address range</span></span> | <span data-ttu-id="c490d-466">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-466">Source port</span></span> | <span data-ttu-id="c490d-467">대상 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-467">Destination address range</span></span> | <span data-ttu-id="c490d-468">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-468">Destination port</span></span> | <span data-ttu-id="c490d-469">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-469">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-470">Deny-Inbound-RDP-Internet( 인바운드 RDP 인터넷 거부)</span><span class="sxs-lookup"><span data-stu-id="c490d-470">Deny-Inbound-RDP-Internet</span></span> | <span data-ttu-id="c490d-471">거부</span><span class="sxs-lookup"><span data-stu-id="c490d-471">Deny</span></span> | <span data-ttu-id="c490d-472">100</span><span class="sxs-lookup"><span data-stu-id="c490d-472">100</span></span> | <span data-ttu-id="c490d-473">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-473">Internet</span></span> | * | * | <span data-ttu-id="c490d-474">3389</span><span class="sxs-lookup"><span data-stu-id="c490d-474">3389</span></span> | <span data-ttu-id="c490d-475">TCP</span><span class="sxs-lookup"><span data-stu-id="c490d-475">TCP</span></span> |
| <span data-ttu-id="c490d-476">Allow-Inbound-HTTP-Internet(인바운드 HTTP 인터넷 허용)</span><span class="sxs-lookup"><span data-stu-id="c490d-476">Allow-Inbound-HTTP-Internet</span></span> | <span data-ttu-id="c490d-477">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-477">Allow</span></span> | <span data-ttu-id="c490d-478">200</span><span class="sxs-lookup"><span data-stu-id="c490d-478">200</span></span> | <span data-ttu-id="c490d-479">인터넷</span><span class="sxs-lookup"><span data-stu-id="c490d-479">Internet</span></span> | * | * | <span data-ttu-id="c490d-480">80</span><span class="sxs-lookup"><span data-stu-id="c490d-480">80</span></span> | <span data-ttu-id="c490d-481">TCP</span><span class="sxs-lookup"><span data-stu-id="c490d-481">TCP</span></span> |

### <a name="db-servers-management-nic"></a><span data-ttu-id="c490d-482">DB 서버(관리 NIC)</span><span class="sxs-lookup"><span data-stu-id="c490d-482">DB servers (Management NIC)</span></span>
<span data-ttu-id="c490d-483">**인바운드 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-483">**Inbound rules**</span></span>

| <span data-ttu-id="c490d-484">규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-484">Rule</span></span> | <span data-ttu-id="c490d-485">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-485">Access</span></span> | <span data-ttu-id="c490d-486">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-486">Priority</span></span> | <span data-ttu-id="c490d-487">원본 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-487">Source address range</span></span> | <span data-ttu-id="c490d-488">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-488">Source port</span></span> | <span data-ttu-id="c490d-489">대상 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-489">Destination address range</span></span> | <span data-ttu-id="c490d-490">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-490">Destination port</span></span> | <span data-ttu-id="c490d-491">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-491">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-492">Allow-Inbound-RDP-Front-end(인바운드 RDP 프런트 엔드 허용)</span><span class="sxs-lookup"><span data-stu-id="c490d-492">Allow-Inbound-RDP-Front-end</span></span> | <span data-ttu-id="c490d-493">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-493">Allow</span></span> | <span data-ttu-id="c490d-494">100</span><span class="sxs-lookup"><span data-stu-id="c490d-494">100</span></span> | <span data-ttu-id="c490d-495">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="c490d-495">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="c490d-496">3389</span><span class="sxs-lookup"><span data-stu-id="c490d-496">3389</span></span> | <span data-ttu-id="c490d-497">TCP</span><span class="sxs-lookup"><span data-stu-id="c490d-497">TCP</span></span> |

### <a name="db-servers-database-traffic-nic"></a><span data-ttu-id="c490d-498">DB 서버(데이터베이스 트래픽 NIC)</span><span class="sxs-lookup"><span data-stu-id="c490d-498">DB servers (Database traffic NIC)</span></span>
<span data-ttu-id="c490d-499">**인바운드 규칙**</span><span class="sxs-lookup"><span data-stu-id="c490d-499">**Inbound rules**</span></span>

| <span data-ttu-id="c490d-500">규칙</span><span class="sxs-lookup"><span data-stu-id="c490d-500">Rule</span></span> | <span data-ttu-id="c490d-501">Access</span><span class="sxs-lookup"><span data-stu-id="c490d-501">Access</span></span> | <span data-ttu-id="c490d-502">우선 순위</span><span class="sxs-lookup"><span data-stu-id="c490d-502">Priority</span></span> | <span data-ttu-id="c490d-503">원본 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-503">Source address range</span></span> | <span data-ttu-id="c490d-504">원본 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-504">Source port</span></span> | <span data-ttu-id="c490d-505">대상 주소 범위</span><span class="sxs-lookup"><span data-stu-id="c490d-505">Destination address range</span></span> | <span data-ttu-id="c490d-506">대상 포트</span><span class="sxs-lookup"><span data-stu-id="c490d-506">Destination port</span></span> | <span data-ttu-id="c490d-507">프로토콜</span><span class="sxs-lookup"><span data-stu-id="c490d-507">Protocol</span></span> |
| --- | --- | --- | --- | --- | --- | --- | --- |
| <span data-ttu-id="c490d-508">Allow-Inbound-SQL-Front-end(인바운드 SQL 프런트 엔드 허용)</span><span class="sxs-lookup"><span data-stu-id="c490d-508">Allow-Inbound-SQL-Front-end</span></span> | <span data-ttu-id="c490d-509">허용</span><span class="sxs-lookup"><span data-stu-id="c490d-509">Allow</span></span> | <span data-ttu-id="c490d-510">100</span><span class="sxs-lookup"><span data-stu-id="c490d-510">100</span></span> | <span data-ttu-id="c490d-511">192.168.1.0/24</span><span class="sxs-lookup"><span data-stu-id="c490d-511">192.168.1.0/24</span></span> | * | * | <span data-ttu-id="c490d-512">1433</span><span class="sxs-lookup"><span data-stu-id="c490d-512">1433</span></span> | <span data-ttu-id="c490d-513">TCP</span><span class="sxs-lookup"><span data-stu-id="c490d-513">TCP</span></span> |

<span data-ttu-id="c490d-514">일부 hello Nsg 연결된 tooindividual Nic와 되므로 리소스 관리자를 통해 배포 된 리소스에 대 한 hello 규칙은입니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-514">Since some of hello NSGs are associated tooindividual NICs, hello rules are for resources deployed through Resource Manager.</span></span> <span data-ttu-id="c490d-515">규칙은 연결되는 방법에 따라 서브넷과 NIC에 대해 결합됩니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-515">Rules are combined for subnet and NIC, depending on how they are associated.</span></span> 

## <a name="next-steps"></a><span data-ttu-id="c490d-516">다음 단계</span><span class="sxs-lookup"><span data-stu-id="c490d-516">Next steps</span></span>
* <span data-ttu-id="c490d-517">[NSG 배포(Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span><span class="sxs-lookup"><span data-stu-id="c490d-517">[Deploy NSGs (Resource Manager)](virtual-networks-create-nsg-arm-pportal.md).</span></span>
* <span data-ttu-id="c490d-518">[NSG 배포(클래식)](virtual-networks-create-nsg-classic-ps.md).</span><span class="sxs-lookup"><span data-stu-id="c490d-518">[Deploy NSGs (classic)](virtual-networks-create-nsg-classic-ps.md).</span></span>
* <span data-ttu-id="c490d-519">[NSG 로그를 관리](virtual-network-nsg-manage-log.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="c490d-519">[Manage NSG logs](virtual-network-nsg-manage-log.md).</span></span>
* <span data-ttu-id="c490d-520">[NSG 문제 해결](virtual-network-nsg-troubleshoot-portal.md)</span><span class="sxs-lookup"><span data-stu-id="c490d-520">[Troubleshoot NSGs] (virtual-network-nsg-troubleshoot-portal.md)</span></span>
