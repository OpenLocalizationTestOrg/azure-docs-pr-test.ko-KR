---
title: "Azure 부하 분산 장치에 대 한 Vip aaaMultiple | Microsoft Docs"
description: "Azure Load Balancer의 다중 VIP에 대한 개요"
services: load-balancer
documentationcenter: na
author: chkuhtz
manager: narayan
editor: 
ms.assetid: 748e50cd-3087-4c2e-a9e1-ac0ecce4f869
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 08/11/2016
ms.author: chkuhtz
ms.openlocfilehash: e186e1248e7d187e7efd0668dc3244465ce3e156
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="multiple-vips-for-azure-load-balancer"></a><span data-ttu-id="ec90c-103">Azure Load Balancer에 대한 다중 VIP</span><span class="sxs-lookup"><span data-stu-id="ec90c-103">Multiple VIPs for Azure Load Balancer</span></span>

<span data-ttu-id="ec90c-104">Azure 부하 분산 장치 tooload 균형 서비스를 여러 포트, 여러 개의 IP 주소 또는 둘 다 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-104">Azure Load Balancer allows you tooload balance services on multiple ports, multiple IP addresses, or both.</span></span> <span data-ttu-id="ec90c-105">Vm의 조합에 대해 public 및 내부 부하 분산 장치 정의 tooload 균형 흐름을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-105">You can use public and internal load balancer definitions tooload balance flows across a set of VMs.</span></span>

<span data-ttu-id="ec90c-106">이 문서에서는이 기능, 중요 한 개념 및 제약 조건의 fundamentals hello를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-106">This article describes hello fundamentals of this ability, important concepts, and constraints.</span></span> <span data-ttu-id="ec90c-107">하나의 IP 주소에 tooexpose 서비스만 가져오려는 경우에 대 한 간단한 지침을 찾을 수 있습니다 [공용](load-balancer-get-started-internet-portal.md) 또는 [내부](load-balancer-get-started-ilb-arm-portal.md) 부하 분산 장치 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-107">If you only intend tooexpose services on one IP address, you can find simplified instructions for [public](load-balancer-get-started-internet-portal.md) or [internal](load-balancer-get-started-ilb-arm-portal.md) load balancer configurations.</span></span> <span data-ttu-id="ec90c-108">여러 Vip를 추가 하는 것은 증분 tooa 단일 VIP 구성입니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-108">Adding Multiple VIPs is incremental tooa single VIP configuration.</span></span> <span data-ttu-id="ec90c-109">이 문서의 hello 개념을 사용 하 여, 언제 든 지 단순화 된 구성을 확장할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-109">Using hello concepts in this article, you can expand a simplified configuration at any time.</span></span>

<span data-ttu-id="ec90c-110">Azure Load Balancer를 정의할 때 프런트 엔드 및 백 엔드 구성이 규칙과 연결됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-110">When you define an Azure Load Balancer, a frontend and a backend configuration are connected with rules.</span></span> <span data-ttu-id="ec90c-111">hello hello 규칙에서 참조 하는 상태 검색은 사용 되는 toodetermine 새로운 흐름 hello 백 엔드 풀의 tooa 노드 전송 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-111">hello health probe referenced by hello rule is used toodetermine how new flows are sent tooa node in hello backend pool.</span></span> <span data-ttu-id="ec90c-112">hello 프런트 엔드는 여는 VIP (가상 IP), IP 주소 (공용 또는 내부), (UDP 또는 TCP) 전송 프로토콜 및 포트 번호를 구성 하는 3-튜플은 정의 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-112">hello frontend is defined by a Virtual IP (VIP), which is a 3-tuple comprised of an IP address (public or internal), a transport protocol (UDP or TCP), and a port number.</span></span> <span data-ttu-id="ec90c-113">DIP는 가상 NIC Azure의 IP 주소를 tooa hello 백 엔드 풀에서 VM을 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-113">A DIP is an IP address on an Azure virtual NIC attached tooa VM in hello backend pool.</span></span>

<span data-ttu-id="ec90c-114">다음 표에 hello 일부 예제에서는 프런트 엔드 구성은 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-114">hello following table contains some example frontend configurations:</span></span>

| <span data-ttu-id="ec90c-115">VIP</span><span class="sxs-lookup"><span data-stu-id="ec90c-115">VIP</span></span> | <span data-ttu-id="ec90c-116">IP 주소</span><span class="sxs-lookup"><span data-stu-id="ec90c-116">IP address</span></span> | <span data-ttu-id="ec90c-117">protocol</span><span class="sxs-lookup"><span data-stu-id="ec90c-117">protocol</span></span> | <span data-ttu-id="ec90c-118">포트</span><span class="sxs-lookup"><span data-stu-id="ec90c-118">port</span></span> |
| --- | --- | --- | --- |
| <span data-ttu-id="ec90c-119">1</span><span class="sxs-lookup"><span data-stu-id="ec90c-119">1</span></span> |<span data-ttu-id="ec90c-120">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="ec90c-120">65.52.0.1</span></span> |<span data-ttu-id="ec90c-121">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-121">TCP</span></span> |<span data-ttu-id="ec90c-122">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-122">80</span></span> |
| <span data-ttu-id="ec90c-123">2</span><span class="sxs-lookup"><span data-stu-id="ec90c-123">2</span></span> |<span data-ttu-id="ec90c-124">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="ec90c-124">65.52.0.1</span></span> |<span data-ttu-id="ec90c-125">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-125">TCP</span></span> |<span data-ttu-id="ec90c-126">*8080*</span><span class="sxs-lookup"><span data-stu-id="ec90c-126">*8080*</span></span> |
| <span data-ttu-id="ec90c-127">3</span><span class="sxs-lookup"><span data-stu-id="ec90c-127">3</span></span> |<span data-ttu-id="ec90c-128">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="ec90c-128">65.52.0.1</span></span> |<span data-ttu-id="ec90c-129">*UDP*</span><span class="sxs-lookup"><span data-stu-id="ec90c-129">*UDP*</span></span> |<span data-ttu-id="ec90c-130">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-130">80</span></span> |
| <span data-ttu-id="ec90c-131">4</span><span class="sxs-lookup"><span data-stu-id="ec90c-131">4</span></span> |<span data-ttu-id="ec90c-132">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="ec90c-132">*65.52.0.2*</span></span> |<span data-ttu-id="ec90c-133">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-133">TCP</span></span> |<span data-ttu-id="ec90c-134">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-134">80</span></span> |

<span data-ttu-id="ec90c-135">hello 표에서 4 개의 다른 프런트엔드 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-135">hello table shows four different frontends.</span></span> <span data-ttu-id="ec90c-136">프런트 엔드 #1, # 2 및 #3는 여러 규칙을 가진 단일 VIP입니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-136">Frontends #1, #2 and #3 are a single VIP with multiple rules.</span></span> <span data-ttu-id="ec90c-137">hello 동일한 IP 주소를 사용 하지만 hello 포트 또는 프로토콜은 각 프런트 엔드 마다 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-137">hello same IP address is used but hello port or protocol is different for each frontend.</span></span> <span data-ttu-id="ec90c-138">프런트엔드 # 1과 4은 여기서 hello 동일한 프런트 엔드 프로토콜 및 포트 다시 사용 된 여러 vip가에서 여러 vip가의 예입니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-138">Frontends #1 and #4 are an example of Multiple VIPs, where hello same frontend protocol and port are reused across multiple VIPs.</span></span>

<span data-ttu-id="ec90c-139">Azure 부하 분산 장치는 hello 부하 분산 규칙 정의에 유연성을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-139">Azure Load Balancer provides flexibility in defining hello load balancing rules.</span></span> <span data-ttu-id="ec90c-140">규칙 주소 및 포트 hello 프런트 엔드에 매핑된 toohello 대상 주소와 포트 hello 백 엔드에는 하는 방법을 선언 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-140">A rule declares how an address and port on hello frontend is mapped toohello destination address and port on hello backend.</span></span> <span data-ttu-id="ec90c-141">규칙에서 백 엔드 포트 다시 사용 된 여부 hello 유형의 hello 규칙에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-141">Whether or not backend ports are reused across rules depends on hello type of hello rule.</span></span> <span data-ttu-id="ec90c-142">각 규칙 유형에는 호스트 구성 및 프로브 디자인에 영향을 줄 수 있는 특정 요구 사항이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-142">Each type of rule has specific requirements that can affect host configuration and probe design.</span></span> <span data-ttu-id="ec90c-143">다음과 같은 두 가지 규칙 유형이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-143">There are two types of rules:</span></span>

1. <span data-ttu-id="ec90c-144">백 엔드 포트가 없는와 hello 기본 규칙을 다시 사용</span><span class="sxs-lookup"><span data-stu-id="ec90c-144">hello default rule with no backend port reuse</span></span>
2. <span data-ttu-id="ec90c-145">백 엔드 포트는 다시 사용 하는 hello 부동 IP 규칙</span><span class="sxs-lookup"><span data-stu-id="ec90c-145">hello Floating IP rule where backend ports are reused</span></span>

<span data-ttu-id="ec90c-146">Azure 부하 분산 장치는 모두 규칙 유형에 toomix 허용 hello 동일한 부하 분산 장치 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-146">Azure Load Balancer allows you toomix both rule types on hello same load balancer configuration.</span></span> <span data-ttu-id="ec90c-147">hello 부하 분산 장치에 사용할 수 동시에 지정 된 VM 또는 조합으로 hello 규칙의 hello 제약 조건에 의해 준수 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-147">hello load balancer can use them simultaneously for a given VM, or any combination, as long as you abide by hello constraints of hello rule.</span></span> <span data-ttu-id="ec90c-148">규칙 유형을 선택 하면 해당 구성을 지 원하는 응용 프로그램 및 hello 복잡성 프로그램의 hello 요구 사항에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-148">Which rule type you choose depends on hello requirements of your application and hello complexity of supporting that configuration.</span></span> <span data-ttu-id="ec90c-149">어떤 규칙 유형이 시나리오에 가장 적합한지 평가해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-149">You should evaluate which rule types are best for your scenario.</span></span>

<span data-ttu-id="ec90c-150">Hello 기본 동작을 사용 하 여 이러한 시나리오를 보다을 탐색 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-150">We explore these scenarios further by starting with hello default behavior.</span></span>

## <a name="rule-type-1-no-backend-port-reuse"></a><span data-ttu-id="ec90c-151">규칙 유형 #1: 백 엔드 포트 재사용하지 않음.</span><span class="sxs-lookup"><span data-stu-id="ec90c-151">Rule type #1: No backend port reuse</span></span>

![MultiVIP 그림](./media/load-balancer-multivip-overview/load-balancer-multivip.png)

<span data-ttu-id="ec90c-153">이 시나리오에서는 hello 프런트 엔드 Vip는 다음과 같이 구성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-153">In this scenario, hello frontend VIPs are configured as follows:</span></span>

| <span data-ttu-id="ec90c-154">VIP</span><span class="sxs-lookup"><span data-stu-id="ec90c-154">VIP</span></span> | <span data-ttu-id="ec90c-155">IP 주소</span><span class="sxs-lookup"><span data-stu-id="ec90c-155">IP address</span></span> | <span data-ttu-id="ec90c-156">protocol</span><span class="sxs-lookup"><span data-stu-id="ec90c-156">protocol</span></span> | <span data-ttu-id="ec90c-157">포트</span><span class="sxs-lookup"><span data-stu-id="ec90c-157">port</span></span> |
| --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="ec90c-159">1</span><span class="sxs-lookup"><span data-stu-id="ec90c-159">1</span></span> |<span data-ttu-id="ec90c-160">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="ec90c-160">65.52.0.1</span></span> |<span data-ttu-id="ec90c-161">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-161">TCP</span></span> |<span data-ttu-id="ec90c-162">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-162">80</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="ec90c-164">2</span><span class="sxs-lookup"><span data-stu-id="ec90c-164">2</span></span> |<span data-ttu-id="ec90c-165">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="ec90c-165">*65.52.0.2*</span></span> |<span data-ttu-id="ec90c-166">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-166">TCP</span></span> |<span data-ttu-id="ec90c-167">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-167">80</span></span> |

<span data-ttu-id="ec90c-168">hello DIP는 hello의 hello 대상 흐름 인바운드 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-168">hello DIP is hello destination of hello inbound flow.</span></span> <span data-ttu-id="ec90c-169">Hello 백 엔드 풀의 각 VM에서 DIP에 고유한 포트 hello 필요한 서비스를 노출합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-169">In hello backend pool, each VM exposes hello desired service on a unique port on a DIP.</span></span> <span data-ttu-id="ec90c-170">이 서비스는 규칙 정의 통해 hello 프런트 엔드 연관 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-170">This service is associated with hello frontend through a rule definition.</span></span>

<span data-ttu-id="ec90c-171">두 가지 규칙을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-171">We define two rules:</span></span>

| <span data-ttu-id="ec90c-172">규칙</span><span class="sxs-lookup"><span data-stu-id="ec90c-172">Rule</span></span> | <span data-ttu-id="ec90c-173">맵 프론트 엔드</span><span class="sxs-lookup"><span data-stu-id="ec90c-173">Map frontend</span></span> | <span data-ttu-id="ec90c-174">toobackend 풀</span><span class="sxs-lookup"><span data-stu-id="ec90c-174">toobackend pool</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ec90c-175">1</span><span class="sxs-lookup"><span data-stu-id="ec90c-175">1</span></span> |![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="ec90c-177">VIP1:80</span><span class="sxs-lookup"><span data-stu-id="ec90c-177">VIP1:80</span></span> |![백 엔드](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="ec90c-179">DIP1:80,</span><span class="sxs-lookup"><span data-stu-id="ec90c-179">DIP1:80,</span></span> ![백 엔드](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="ec90c-181">DIP2:80</span><span class="sxs-lookup"><span data-stu-id="ec90c-181">DIP2:80</span></span> |
| <span data-ttu-id="ec90c-182">2</span><span class="sxs-lookup"><span data-stu-id="ec90c-182">2</span></span> |![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="ec90c-184">VIP2:80</span><span class="sxs-lookup"><span data-stu-id="ec90c-184">VIP2:80</span></span> |![백 엔드](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="ec90c-186">DIP1:81,</span><span class="sxs-lookup"><span data-stu-id="ec90c-186">DIP1:81,</span></span> ![백 엔드](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="ec90c-188">DIP2:81</span><span class="sxs-lookup"><span data-stu-id="ec90c-188">DIP2:81</span></span> |

<span data-ttu-id="ec90c-189">Azure 부하 분산 장치에서 전체 매핑 hello는 이제 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-189">hello complete mapping in Azure Load Balancer is now as follows:</span></span>

| <span data-ttu-id="ec90c-190">규칙</span><span class="sxs-lookup"><span data-stu-id="ec90c-190">Rule</span></span> | <span data-ttu-id="ec90c-191">VIP IP 주소</span><span class="sxs-lookup"><span data-stu-id="ec90c-191">VIP IP address</span></span> | <span data-ttu-id="ec90c-192">protocol</span><span class="sxs-lookup"><span data-stu-id="ec90c-192">protocol</span></span> | <span data-ttu-id="ec90c-193">포트</span><span class="sxs-lookup"><span data-stu-id="ec90c-193">port</span></span> | <span data-ttu-id="ec90c-194">대상</span><span class="sxs-lookup"><span data-stu-id="ec90c-194">Destination</span></span> | <span data-ttu-id="ec90c-195">포트</span><span class="sxs-lookup"><span data-stu-id="ec90c-195">port</span></span> |
| --- | --- | --- | --- | --- | --- |
| ![규칙](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="ec90c-197">1</span><span class="sxs-lookup"><span data-stu-id="ec90c-197">1</span></span> |<span data-ttu-id="ec90c-198">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="ec90c-198">65.52.0.1</span></span> |<span data-ttu-id="ec90c-199">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-199">TCP</span></span> |<span data-ttu-id="ec90c-200">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-200">80</span></span> |<span data-ttu-id="ec90c-201">DIP IP 주소</span><span class="sxs-lookup"><span data-stu-id="ec90c-201">DIP IP Address</span></span> |<span data-ttu-id="ec90c-202">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-202">80</span></span> |
| ![규칙](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="ec90c-204">2</span><span class="sxs-lookup"><span data-stu-id="ec90c-204">2</span></span> |<span data-ttu-id="ec90c-205">65.52.0.2</span><span class="sxs-lookup"><span data-stu-id="ec90c-205">65.52.0.2</span></span> |<span data-ttu-id="ec90c-206">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-206">TCP</span></span> |<span data-ttu-id="ec90c-207">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-207">80</span></span> |<span data-ttu-id="ec90c-208">DIP IP 주소</span><span class="sxs-lookup"><span data-stu-id="ec90c-208">DIP IP Address</span></span> |<span data-ttu-id="ec90c-209">81</span><span class="sxs-lookup"><span data-stu-id="ec90c-209">81</span></span> |

<span data-ttu-id="ec90c-210">각 규칙은 대상 IP 주소 및 대상 포트의 고유한 조합으로 흐름을 생성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-210">Each rule must produce a flow with a unique combination of destination IP address and destination port.</span></span> <span data-ttu-id="ec90c-211">Hello 흐름의 다양 한 hello 대상 포트가 동일한 DIP 서로 다른 포트에서 여러 규칙 흐름 toohello 제공할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-211">By varying hello destination port of hello flow, multiple rules can deliver flows toohello same DIP on different ports.</span></span>

<span data-ttu-id="ec90c-212">상태 검색이 directed toohello VM의 DIP는 항상입니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-212">Health probes are always directed toohello DIP of a VM.</span></span> <span data-ttu-id="ec90c-213">확인 해야 하면 프로그램 프로브 hello VM의 hello 상태를 반영 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-213">You must ensure you that your probe reflects hello health of hello VM.</span></span>

## <a name="rule-type-2-backend-port-reuse-by-using-floating-ip"></a><span data-ttu-id="ec90c-214">규칙 유형 #2: 부동 IP를 사용하여 백엔드 포트 재사용</span><span class="sxs-lookup"><span data-stu-id="ec90c-214">Rule type #2: backend port reuse by using Floating IP</span></span>

<span data-ttu-id="ec90c-215">Azure 부하 분산 장치 hello 유연성 tooreuse hello 프런트 엔드 포트에서 사용 되는 hello 규칙 종류에 관계 없이 여러 vip가 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-215">Azure Load Balancer provides hello flexibility tooreuse hello frontend port across multiple VIPs regardless of hello rule type used.</span></span> <span data-ttu-id="ec90c-216">또한 일부 응용 프로그램 시나리오 선호 또는 hello toobe hello 백 엔드 풀의 단일 VM의 여러 응용 프로그램 인스턴스에 사용 되는 동일한 포트 필요로 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-216">Additionally, some application scenarios prefer or require hello same port toobe used by multiple application instances on a single VM in hello backend pool.</span></span> <span data-ttu-id="ec90c-217">포트 재사용의 일반적인 예에는 고가용성을 위한 클러스터링, 네트워크 가상 어플라이언스 및 재암호화 없이 다중 TLS 끝점 노출이 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-217">Common examples of port reuse include clustering for high availability, network virtual appliances, and exposing multiple TLS endpoints without re-encryption.</span></span>

<span data-ttu-id="ec90c-218">여러 규칙에서 tooreuse hello 백 엔드 포트를 원하는 경우에 hello 규칙 정의에 부동 IP를 활성화 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-218">If you want tooreuse hello backend port across multiple rules, you must enable Floating IP in hello rule definition.</span></span>

<span data-ttu-id="ec90c-219">부동 IP는 Direct Server Return (DSR)으로 알려진 것의 일부입니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-219">Floating IP is a portion of what is known as Direct Server Return (DSR).</span></span> <span data-ttu-id="ec90c-220">DSR는 흐름 토폴로지와 IP 주소 매핑 구성표라는 두 부분으로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-220">DSR consists of two parts: a flow topology and an IP address mapping scheme.</span></span> <span data-ttu-id="ec90c-221">플랫폼 수준에서 Azure Load Balancer는 부동 IP 사용 여부에 관계 없이 DSR 흐름 토폴로지에서 항상 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-221">At a platform level, Azure Load Balancer always operates in a DSR flow topology regardless of whether Floating IP is enabled or not.</span></span> <span data-ttu-id="ec90c-222">이 흐름의 아웃 바운드 일부 hello은 항상 올바르게 다시 쓴된 tooflow 직접 백 toohello 원점 것을 의미 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-222">This means that hello outbound part of a flow is always correctly rewritten tooflow directly back toohello origin.</span></span>

<span data-ttu-id="ec90c-223">Azure는 hello 기본 규칙 종류와 기존 부하 분산 사용 편의성에 대 한 IP 주소 매핑 구성표를 노출 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-223">With hello default rule type, Azure exposes a traditional load balancing IP address mapping scheme for ease of use.</span></span> <span data-ttu-id="ec90c-224">부동 IP를 사용할 수 있도록 유연성이 아래 설명 참조에 대 한 IP 주소 매핑 구성표 tooallow hello를 변경합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-224">Enabling Floating IP changes hello IP address mapping scheme tooallow for additional flexibility as explained below.</span></span>

<span data-ttu-id="ec90c-225">hello 다음 다이어그램에서는이 구성을 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-225">hello following diagram illustrates this configuration:</span></span>

![MultiVIP 그림](./media/load-balancer-multivip-overview/load-balancer-multivip-dsr.png)

<span data-ttu-id="ec90c-227">이 시나리오에서는 hello 백 엔드 풀의 모든 VM에 3 개의 네트워크 인터페이스가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-227">For this scenario, every VM in hello backend pool has three network interfaces:</span></span>

* <span data-ttu-id="ec90c-228">DIP: hello VM (Azure의 NIC 리소스의 IP 구성)와 관련 된 한 가상 NIC</span><span class="sxs-lookup"><span data-stu-id="ec90c-228">DIP: a Virtual NIC associated with hello VM (IP configuration of Azure's NIC resource)</span></span>
* <span data-ttu-id="ec90c-229">VIP1: VIP1의 IP 주소로 구성된 게스트 OS 내의루프백 인터페이스</span><span class="sxs-lookup"><span data-stu-id="ec90c-229">VIP1: a loopback interface within guest OS that is configured with IP address of VIP1</span></span>
* <span data-ttu-id="ec90c-230">VIP2: VIP2의 IP 주소로 구성된 게스트 OS 내의루프백 인터페이스</span><span class="sxs-lookup"><span data-stu-id="ec90c-230">VIP2: a loopback interface within guest OS that is configured with IP address of VIP2</span></span>

> [!IMPORTANT]
> <span data-ttu-id="ec90c-231">hello 논리 인터페이스의 hello 구성은 hello 게스트 운영 체제 내에서 수행 됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-231">hello configuration of hello logical interfaces is performed within hello guest OS.</span></span> <span data-ttu-id="ec90c-232">이 구성은 Azure에서 수행하거나 관리하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-232">This configuration is not performed or managed by Azure.</span></span> <span data-ttu-id="ec90c-233">이 구성이 없으면 hello 규칙이 작동 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-233">Without this configuration, hello rules will not function.</span></span> <span data-ttu-id="ec90c-234">상태 프로브 정의 논리 VIP hello 않고 hello hello VM의 DIP를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-234">Health probe definitions use hello DIP of hello VM rather than hello logical VIP.</span></span> <span data-ttu-id="ec90c-235">따라서 서비스는 hello 논리 VIP에서 제공 하는 hello 서비스의 hello 상태를 반영 하는 DIP 포트에서 프로브 응답을 제공 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-235">Therefore, your service must provide probe responses on a DIP port that reflect hello status of hello service offered on hello logical VIP.</span></span>

<span data-ttu-id="ec90c-236">Hello를 가정해 보겠습니다 hello 이전 시나리오에서와 같이 동일한 프런트 엔드 구성:</span><span class="sxs-lookup"><span data-stu-id="ec90c-236">Let's assume hello same frontend configuration as in hello previous scenario:</span></span>

| <span data-ttu-id="ec90c-237">VIP</span><span class="sxs-lookup"><span data-stu-id="ec90c-237">VIP</span></span> | <span data-ttu-id="ec90c-238">IP 주소</span><span class="sxs-lookup"><span data-stu-id="ec90c-238">IP address</span></span> | <span data-ttu-id="ec90c-239">protocol</span><span class="sxs-lookup"><span data-stu-id="ec90c-239">protocol</span></span> | <span data-ttu-id="ec90c-240">포트</span><span class="sxs-lookup"><span data-stu-id="ec90c-240">port</span></span> |
| --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="ec90c-242">1</span><span class="sxs-lookup"><span data-stu-id="ec90c-242">1</span></span> |<span data-ttu-id="ec90c-243">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="ec90c-243">65.52.0.1</span></span> |<span data-ttu-id="ec90c-244">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-244">TCP</span></span> |<span data-ttu-id="ec90c-245">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-245">80</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="ec90c-247">2</span><span class="sxs-lookup"><span data-stu-id="ec90c-247">2</span></span> |<span data-ttu-id="ec90c-248">*65.52.0.2*</span><span class="sxs-lookup"><span data-stu-id="ec90c-248">*65.52.0.2*</span></span> |<span data-ttu-id="ec90c-249">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-249">TCP</span></span> |<span data-ttu-id="ec90c-250">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-250">80</span></span> |

<span data-ttu-id="ec90c-251">두 가지 규칙을 정의합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-251">We define two rules:</span></span>

| <span data-ttu-id="ec90c-252">규칙</span><span class="sxs-lookup"><span data-stu-id="ec90c-252">Rule</span></span> | <span data-ttu-id="ec90c-253">맵 프론트 엔드</span><span class="sxs-lookup"><span data-stu-id="ec90c-253">Map frontend</span></span> | <span data-ttu-id="ec90c-254">toobackend 풀</span><span class="sxs-lookup"><span data-stu-id="ec90c-254">toobackend pool</span></span> |
| --- | --- | --- |
| <span data-ttu-id="ec90c-255">1</span><span class="sxs-lookup"><span data-stu-id="ec90c-255">1</span></span> |![규칙](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="ec90c-257">VIP1:80</span><span class="sxs-lookup"><span data-stu-id="ec90c-257">VIP1:80</span></span> |![백 엔드](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="ec90c-259">VIP1:80 (VM1 및 VM2에서)</span><span class="sxs-lookup"><span data-stu-id="ec90c-259">VIP1:80 (in VM1 and VM2)</span></span> |
| <span data-ttu-id="ec90c-260">2</span><span class="sxs-lookup"><span data-stu-id="ec90c-260">2</span></span> |![규칙](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="ec90c-262">VIP2:80</span><span class="sxs-lookup"><span data-stu-id="ec90c-262">VIP2:80</span></span> |![백 엔드](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="ec90c-264">VIP2:80 (VM1 및 VM2에서)</span><span class="sxs-lookup"><span data-stu-id="ec90c-264">VIP2:80 (in VM1 and VM2)</span></span> |

<span data-ttu-id="ec90c-265">다음 표에서 hello hello 부하 분산 장치에서 hello 전체 매핑을 보여 줍니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-265">hello following table shows hello complete mapping in hello load balancer:</span></span>

| <span data-ttu-id="ec90c-266">규칙</span><span class="sxs-lookup"><span data-stu-id="ec90c-266">Rule</span></span> | <span data-ttu-id="ec90c-267">VIP IP 주소</span><span class="sxs-lookup"><span data-stu-id="ec90c-267">VIP IP address</span></span> | <span data-ttu-id="ec90c-268">protocol</span><span class="sxs-lookup"><span data-stu-id="ec90c-268">protocol</span></span> | <span data-ttu-id="ec90c-269">포트</span><span class="sxs-lookup"><span data-stu-id="ec90c-269">port</span></span> | <span data-ttu-id="ec90c-270">대상</span><span class="sxs-lookup"><span data-stu-id="ec90c-270">Destination</span></span> | <span data-ttu-id="ec90c-271">포트</span><span class="sxs-lookup"><span data-stu-id="ec90c-271">port</span></span> |
| --- | --- | --- | --- | --- | --- |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-green.png) <span data-ttu-id="ec90c-273">1</span><span class="sxs-lookup"><span data-stu-id="ec90c-273">1</span></span> |<span data-ttu-id="ec90c-274">65.52.0.1</span><span class="sxs-lookup"><span data-stu-id="ec90c-274">65.52.0.1</span></span> |<span data-ttu-id="ec90c-275">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-275">TCP</span></span> |<span data-ttu-id="ec90c-276">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-276">80</span></span> |<span data-ttu-id="ec90c-277">VIP (65.52.0.1)과 동일함</span><span class="sxs-lookup"><span data-stu-id="ec90c-277">same as VIP (65.52.0.1)</span></span> |<span data-ttu-id="ec90c-278">VIP (80)과 동일함</span><span class="sxs-lookup"><span data-stu-id="ec90c-278">same as VIP (80)</span></span> |
| ![VIP](./media/load-balancer-multivip-overview/load-balancer-rule-purple.png) <span data-ttu-id="ec90c-280">2</span><span class="sxs-lookup"><span data-stu-id="ec90c-280">2</span></span> |<span data-ttu-id="ec90c-281">65.52.0.2</span><span class="sxs-lookup"><span data-stu-id="ec90c-281">65.52.0.2</span></span> |<span data-ttu-id="ec90c-282">TCP</span><span class="sxs-lookup"><span data-stu-id="ec90c-282">TCP</span></span> |<span data-ttu-id="ec90c-283">80</span><span class="sxs-lookup"><span data-stu-id="ec90c-283">80</span></span> |<span data-ttu-id="ec90c-284">VIP (65.52.0.2)과 동일함</span><span class="sxs-lookup"><span data-stu-id="ec90c-284">same as VIP (65.52.0.2)</span></span> |<span data-ttu-id="ec90c-285">VIP (80)과 동일함</span><span class="sxs-lookup"><span data-stu-id="ec90c-285">same as VIP (80)</span></span> |

<span data-ttu-id="ec90c-286">hello 대상의 hello 인바운드 흐름은 VM hello hello 루프백 인터페이스에서 hello VIP 주소입니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-286">hello destination of hello inbound flow is hello VIP address on hello loopback interface in hello VM.</span></span> <span data-ttu-id="ec90c-287">각 규칙은 대상 IP 주소 및 대상 포트의 고유한 조합으로 흐름을 생성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-287">Each rule must produce a flow with a unique combination of destination IP address and destination port.</span></span> <span data-ttu-id="ec90c-288">다양 한 hello 대상 IP 주소로 hello 흐름의 포트를 재사용할 수 있기에 동일한 VM hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-288">By varying hello destination IP address of hello flow, port reuse is possible on hello same VM.</span></span> <span data-ttu-id="ec90c-289">사용자 서비스 toohello VIP의 IP 주소와 포트 hello 해당 루프백 인터페이스를 바인딩하여 노출된 toohello 부하 분산 장치는입니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-289">Your service is exposed toohello load balancer by binding it toohello VIP’s IP address and port of hello respective loopback interface.</span></span>

<span data-ttu-id="ec90c-290">이 예제에서는 hello 대상 포트를 변경 하지 않습니다 확인 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-290">Notice that this example does not change hello destination port.</span></span> <span data-ttu-id="ec90c-291">이 값은 부동 IP 시나리오, Azure 부하 분산 장치도 지원 규칙 toorewrite hello 백 엔드 대상 포트 및 toomake 정의 다름 hello 프런트 엔드 대상 포트입니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-291">Even though this is a Floating IP scenario, Azure Load Balancer also supports defining a rule toorewrite hello backend destination port and toomake it different from hello frontend destination port.</span></span>

<span data-ttu-id="ec90c-292">hello 부동 IP 규칙 종류는 여러 가지 부하 분산 장치 구성 패턴의 hello 기반 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-292">hello Floating IP rule type is hello foundation of several load balancer configuration patterns.</span></span> <span data-ttu-id="ec90c-293">현재 사용할 수 있는 한 가지 예는 hello [여러 수신기와 함께 SQL AlwaysOn](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-293">One example that is currently available is hello [SQL AlwaysOn with Multiple Listeners](../virtual-machines/windows/sql/virtual-machines-windows-portal-sql-ps-alwayson-int-listener.md) configuration.</span></span> <span data-ttu-id="ec90c-294">앞으로 이러한 시나리오 더욱 자세히 설명할 것입니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-294">Over time, we will document more of these scenarios.</span></span>

## <a name="limitations"></a><span data-ttu-id="ec90c-295">제한 사항</span><span class="sxs-lookup"><span data-stu-id="ec90c-295">Limitations</span></span>

* <span data-ttu-id="ec90c-296">다중 VIP 구성은 IaaS VM을 사용할 때만 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-296">Multiple VIP configurations are only supported with IaaS VMs.</span></span>
* <span data-ttu-id="ec90c-297">Hello 부동 IP 규칙을 사용 하면 응용 프로그램 아웃 바운드 전송에 대 한 hello DIP를 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-297">With hello Floating IP rule, your application must use hello DIP for outbound flows.</span></span> <span data-ttu-id="ec90c-298">응용 프로그램 hello 게스트 OS의에서 hello 루프백 인터페이스에 구성 된 toohello VIP 주소를 바인딩할 경우 다음 SNAT 사용할 수 있는 toorewrite hello에 대 한 아웃 바운드 흐름 아니며 hello 흐름 실패.</span><span class="sxs-lookup"><span data-stu-id="ec90c-298">If your application binds toohello VIP address configured on hello loopback interface in hello guest OS, then SNAT is not available toorewrite hello outbound flow and hello flow fails.</span></span>
* <span data-ttu-id="ec90c-299">공용 IP 주소는 대금 청구에 영향을 미칩니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-299">Public IP addresses have an effect on billing.</span></span> <span data-ttu-id="ec90c-300">자세한 내용은 [IP 주소 가격 책정](https://azure.microsoft.com/pricing/details/ip-addresses/)</span><span class="sxs-lookup"><span data-stu-id="ec90c-300">For more information, see [IP Address pricing](https://azure.microsoft.com/pricing/details/ip-addresses/)</span></span>
* <span data-ttu-id="ec90c-301">구독 제한이 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="ec90c-301">Subscription limits apply.</span></span> <span data-ttu-id="ec90c-302">자세한 내용은 [서비스 제한](../azure-subscription-service-limits.md#networking-limits) 을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="ec90c-302">For more information, see [Service limits](../azure-subscription-service-limits.md#networking-limits) for details.</span></span>
