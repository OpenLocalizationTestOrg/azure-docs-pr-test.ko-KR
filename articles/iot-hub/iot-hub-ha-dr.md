---
title: "IoT Hub 고가용성 및 재해 복구 aaaAzure | Microsoft Docs"
description: "재해 복구 기능을 사용 하는 항상 사용 가능한 Azure IoT 솔루션 toobuild 수 있는 hello Azure와 IoT 허브 기능에 설명 합니다."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 74e1fa1682258819ffb3fd84eb79e42fc6e4120f
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="48380-103">IoT Hub 고가용성 및 재해 복구</span><span class="sxs-lookup"><span data-stu-id="48380-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="48380-104">IoT Hub와 Azure 서비스로 HA (고가용성) hello Azure 지역 수준에서 중복을 사용 하 여 hello 솔루션에 필요한 추가 작업 없이 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at hello Azure region level, without any additional work required by hello solution.</span></span> <span data-ttu-id="48380-105">hello Microsoft Azure 플랫폼에는 지역 간 가용성 또는 재해 복구 (DR) 기능을 사용 하 여 솔루션을 작성 하는 기능 toohelp 포함 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="48380-105">hello Microsoft Azure platform also includes features toohelp you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="48380-106">Tooprovide를 전역 원하는 지역 간 고가용성 장치 또는 사용자가에 대 한 디자인 하 고 이러한 Azure dr 간의 보호 기능을 활용 tootake 솔루션을 준비 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-106">If you want tooprovide global, cross-region high availability for devices or users, design and prepare your solutions tootake advantage of these Azure DR features.</span></span> <span data-ttu-id="48380-107">hello 문서 [Azure 비즈니스 연속성 기술 지침](../resiliency/resiliency-technical-guidance.md) 비즈니스 연속성 및 DR을 위한 Azure의 hello 기본 제공 기능에 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-107">hello article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes hello built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="48380-108">hello [Azure 응용 프로그램에 대 한 고가용성 및 재해 복구] [ Disaster recovery and high availability for Azure applications] 문서 tooachieve Azure 응용 프로그램에 대 한 전략에 아키텍처 지침에서는 HA과 DR 기능을 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-108">hello [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications tooachieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="48380-109">Azure IoT Hub DR</span><span class="sxs-lookup"><span data-stu-id="48380-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="48380-110">또한 toointra 지역 HA IoT Hub hello 사용자의 개입 없이 필요로 하는 재해 복구에 대 한 장애 조치 메커니즘을 구현 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-110">In addition toointra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from hello user.</span></span> <span data-ttu-id="48380-111">IoT 허브 DR 자체 시작 되었으며 2-26, 시간 및 복구 지점 목표 (Rpo)를 수행 하는 hello의 복구 시간 목표 (RTO).</span><span class="sxs-lookup"><span data-stu-id="48380-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and hello following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="48380-112">기능</span><span class="sxs-lookup"><span data-stu-id="48380-112">Functionality</span></span> | <span data-ttu-id="48380-113">RPO</span><span class="sxs-lookup"><span data-stu-id="48380-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="48380-114">레지스트리 및 통신 작업에 대 한 서비스 가용성</span><span class="sxs-lookup"><span data-stu-id="48380-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="48380-115">CName 손실 가능성</span><span class="sxs-lookup"><span data-stu-id="48380-115">Possible CName loss</span></span> |
| <span data-ttu-id="48380-116">ID 레지스트리의 ID 데이터</span><span class="sxs-lookup"><span data-stu-id="48380-116">Identity data in identity registry</span></span> |<span data-ttu-id="48380-117">0-5분 데이터 손실</span><span class="sxs-lookup"><span data-stu-id="48380-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="48380-118">장치-클라우드 메시지</span><span class="sxs-lookup"><span data-stu-id="48380-118">Device-to-cloud messages</span></span> |<span data-ttu-id="48380-119">읽지 않은 메시지가 모두 손실됨</span><span class="sxs-lookup"><span data-stu-id="48380-119">All unread messages are lost</span></span> |
| <span data-ttu-id="48380-120">작업 모니터링 메시지</span><span class="sxs-lookup"><span data-stu-id="48380-120">Operations monitoring messages</span></span> |<span data-ttu-id="48380-121">읽지 않은 메시지가 모두 손실됨</span><span class="sxs-lookup"><span data-stu-id="48380-121">All unread messages are lost</span></span> |
| <span data-ttu-id="48380-122">클라우드-장치 메시지</span><span class="sxs-lookup"><span data-stu-id="48380-122">Cloud-to-device messages</span></span> |<span data-ttu-id="48380-123">0-5분 데이터 손실</span><span class="sxs-lookup"><span data-stu-id="48380-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="48380-124">클라우드-장치 피드백 큐</span><span class="sxs-lookup"><span data-stu-id="48380-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="48380-125">읽지 않은 메시지가 모두 손실됨</span><span class="sxs-lookup"><span data-stu-id="48380-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="48380-126">IoT Hub를 통한 국가별 장애 조치</span><span class="sxs-lookup"><span data-stu-id="48380-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="48380-127">IoT 솔루션에서 배포 토폴로지에 대가 문서의 hello 범위를 벗어납니다.</span><span class="sxs-lookup"><span data-stu-id="48380-127">A complete treatment of deployment topologies in IoT solutions is outside hello scope of this article.</span></span> <span data-ttu-id="48380-128">hello 설명 hello *국가별 장애 조치가* 고가용성 및 재해 복구의 hello 용도 대 한 배포 모델입니다.</span><span class="sxs-lookup"><span data-stu-id="48380-128">hello article discusses hello *regional failover* deployment model for hello purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="48380-129">국가별 장애 조치가 모델에서는 기본적으로 하나의 데이터 센터 위치에서 백 엔드 실행 솔루션 hello 하 고 보조 IoT hub 및 백 엔드 다른 데이터 센터 위치에 배포 됩니다.</span><span class="sxs-lookup"><span data-stu-id="48380-129">In a regional failover model, hello solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="48380-130">Hello IoT hub hello 기본 데이터 센터에서 가동 중단의 성능이 경우 hello 장치 toohello 기본 데이터 센터에서 hello 네트워크 연결이 중단 되었습니다.</span><span class="sxs-lookup"><span data-stu-id="48380-130">If hello IoT hub in hello primary datacenter suffers an outage or hello network connectivity from hello device toohello primary datacenter is interrupted.</span></span> <span data-ttu-id="48380-131">장치는 hello 기본 게이트웨이에 연결할 수 없는 보조 서비스 끝점을 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-131">Devices use a secondary service endpoint whenever hello primary gateway cannot be reached.</span></span> <span data-ttu-id="48380-132">지역 간 장애 조치 기능을 통해 단일 영역의 hello 고가용성 외 hello 솔루션 가용성을 높일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="48380-132">With a cross-region failover capability, hello solution availability can be improved beyond hello high availability of a single region.</span></span>

<span data-ttu-id="48380-133">IoT 허브를 사용 하 여 국가별 장애 조치가 모델 tooimplement 높은 수준 hello 다음이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-133">At a high level, tooimplement a regional failover model with IoT Hub, you need hello following:</span></span>

* <span data-ttu-id="48380-134">**보조 IoT hub 및 라우팅 논리 장치**: hello 하면 기본 지역의 서비스 중단의 경우에 장치 연결 tooyour 보조 지역 시작 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-134">**A secondary IoT hub and device routing logic**: In hello case of a service disruption in your primary region, devices must start connecting tooyour secondary region.</span></span> <span data-ttu-id="48380-135">관련 된 대부분의 서비스의 상태를 인식 특성 hello 들어 것 솔루션 관리자 tootrigger hello 지역 간 장애 조치 프로세스에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-135">Given hello state-aware nature of most services involved, it is common for solution administrators tootrigger hello inter-region failover process.</span></span> <span data-ttu-id="48380-136">hello 가장 좋은 방법은 toocommunicate hello 새 끝점 toodevices, hello 프로세스의 제어를 유지 하면서은 toohave 정기적으로 확인 하는 *호텔* hello 현재 활성 상태인 끝점에 대 한 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="48380-136">hello best way toocommunicate hello new endpoint toodevices, while maintaining control of hello process, is toohave them regularly check a *concierge* service for hello current active endpoint.</span></span> <span data-ttu-id="48380-137">hello 호텔 서비스 일 수 있습니다 복제 되 고 연결할 수를 유지 하는 웹 응용 프로그램 리디렉션 DNS 기술을 사용 하 여 (예를 들어를 사용 하 여 [Azure 트래픽 관리자][Azure Traffic Manager]).</span><span class="sxs-lookup"><span data-stu-id="48380-137">hello concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="48380-138">**Identity 레지스트리 복제** -사용 가능한 toobe, hello 보조 IoT 허브 toohello 솔루션에 연결할 수 있는 모든 장치 id를 포함 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-138">**Identity registry replication** - toobe usable, hello secondary IoT hub must contain all device identities that can connect toohello solution.</span></span> <span data-ttu-id="48380-139">hello 솔루션 장치 id의 지리적으로 복제 된 백업을 유지 하 고 hello 장치에 대 한 활성 끝점이 hello를 전환 하기 전에 toohello 보조 IoT 허브를 업로드 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-139">hello solution should keep geo-replicated backups of device identities, and upload them toohello secondary IoT hub before switching hello active endpoint for hello devices.</span></span> <span data-ttu-id="48380-140">IoT Hub의 hello 장치 identity 내보내기 기능은이 컨텍스트에서 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-140">hello device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="48380-141">자세한 내용은 [IoT Hub 개발자 가이드 - ID 레지스트리][IoT Hub developer guide - identity registry]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="48380-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="48380-142">**논리 병합** -다시 사용할 수 있게 hello 기본 지역, 모든 hello 상태 및 hello 보조 사이트에서 생성 된 데이터에는 마이그레이션된 백 toohello 기본 지역 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-142">**Merging logic** - When hello primary region becomes available again, all hello state and data that have been created in hello secondary site must be migrated back toohello primary region.</span></span> <span data-ttu-id="48380-143">이 상태 및 데이터 대부분와 관련 된 toodevice id 및 응용 프로그램 메타 데이터를 hello 기본 IoT 허브 및 다른 응용 프로그램 관련 저장소 hello 기본 지역에 병합 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-143">This state and data mostly relates toodevice identities and application metadata, which must be merged with hello primary IoT hub and any other application-specific stores in hello primary region.</span></span> <span data-ttu-id="48380-144">toosimplify이이 단계에서는 idempotent 작업을 사용 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-144">toosimplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="48380-145">Idempotent 작업 hello 예기치 않은 결과 및 중복 또는 이벤트의 순서가 배달 hello 결과적 일관성 있게 배포 이벤트의에서 최소화합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-145">Idempotent operations minimize hello side-effects from hello eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="48380-146">또한 응용 프로그램 논리를 hello 디자인 된 tootolerate 잠재적인 불일치 또는 날짜 상태에서 해제 "약간" 여야 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-146">In addition, hello application logic should be designed tootolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="48380-147">이 경우 복구 지점 목표 (RPO)에 따라 "치료" toohello 추가 시간이 걸리는 hello 시스템에 대 한 너무 인해 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="48380-147">This situation can occur due toohello additional time it takes for hello system too"heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="48380-148">다음 단계</span><span class="sxs-lookup"><span data-stu-id="48380-148">Next steps</span></span>
<span data-ttu-id="48380-149">이러한 링크 toolearn Azure IoT 허브에 대 한 자세한를 수행 합니다.</span><span class="sxs-lookup"><span data-stu-id="48380-149">Follow these links toolearn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="48380-150">[IoT Hub 시작(자습서)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="48380-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="48380-151">[Azure IoT Hub란?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="48380-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
