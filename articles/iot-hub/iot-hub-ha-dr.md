---
title: "Azure IoT Hub 고가용성 및 재해 복구 | Microsoft Docs"
description: "재해 복구 기능을 사용하여 고가용성 Azure IoT 솔루션을 빌드할 수 있도록 지원하는 Azure and IoT Hub 기능을 설명합니다."
services: iot-hub
documentationcenter: 
author: fsautomata
manager: timlt
editor: 
ms.assetid: ae320e58-aa20-45b9-abdc-fa4faae8e6dd
ms.service: iot-hub
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 11/16/2016
ms.author: elioda
ms.openlocfilehash: 76c3187549e1821908263c30e394db26ee6f75e6
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="iot-hub-high-availability-and-disaster-recovery"></a><span data-ttu-id="3ebcd-103">IoT Hub 고가용성 및 재해 복구</span><span class="sxs-lookup"><span data-stu-id="3ebcd-103">IoT Hub high availability and disaster recovery</span></span>
<span data-ttu-id="3ebcd-104">Azure 서비스로 IoT Hub는 Azure 지역 수준에서 중복을 사용하여 솔루션의 추가 작업 없이도 HA(고가용성)를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-104">As an Azure service, IoT Hub provides high availability (HA) using redundancies at the Azure region level, without any additional work required by the solution.</span></span> <span data-ttu-id="3ebcd-105">Microsoft Azure Platform에는 재해 복구(DR) 기능 또는 지역 간 가용성을 포함하는 솔루션을 빌드하도록 도와주는 기능도 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-105">The Microsoft Azure platform also includes features to help you build solutions with disaster recovery (DR) capabilities or cross-region availability.</span></span> <span data-ttu-id="3ebcd-106">장치 또는 사용자에게 전역, 지역 간 고가용성을 제공하려면 이러한 Azure DR 기능을 활용하도록 솔루션을 설계하고 준비합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-106">If you want to provide global, cross-region high availability for devices or users, design and prepare your solutions to take advantage of these Azure DR features.</span></span> <span data-ttu-id="3ebcd-107">[Azure 비즈니스 연속성 기술 지침](../resiliency/resiliency-technical-guidance.md) 문서에서는 비즈니스 연속성 및 DR에 대한 Azure의 기본 제공 기능을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-107">The article [Azure Business Continuity Technical Guidance](../resiliency/resiliency-technical-guidance.md) describes the built-in features in Azure for business continuity and DR.</span></span> <span data-ttu-id="3ebcd-108">[Azure 응용 프로그램에 대한 재해 복구 및 고가용성][Disaster recovery and high availability for Azure applications] 문서는 Azure 응용 프로그램에서 HA 및 DR을 수행하는 전략에 대한 아키텍처 지침을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-108">The [Disaster recovery and high availability for Azure applications][Disaster recovery and high availability for Azure applications] paper provides architecture guidance on strategies for Azure applications to achieve HA and DR.</span></span>

## <a name="azure-iot-hub-dr"></a><span data-ttu-id="3ebcd-109">Azure IoT Hub DR</span><span class="sxs-lookup"><span data-stu-id="3ebcd-109">Azure IoT Hub DR</span></span>
<span data-ttu-id="3ebcd-110">역내 HA 외에도 IoT Hub는 사용자 개입이 필요 없는 재해 복구용 장애 조치(Failover) 메커니즘을 구현합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-110">In addition to intra-region HA, IoT Hub implements failover mechanisms for disaster recovery that require no intervention from the user.</span></span> <span data-ttu-id="3ebcd-111">IoT Hub DR는 자체적으로 시작되고 2-26시간의 복구 시간 목표(RTO)과 다음 복구 지점 목표(RPO)를 가집니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-111">IoT Hub DR is self-initiated and has a recovery time objective (RTO) of 2-26 hours, and the following recovery point objectives (RPOs).</span></span>

| <span data-ttu-id="3ebcd-112">기능</span><span class="sxs-lookup"><span data-stu-id="3ebcd-112">Functionality</span></span> | <span data-ttu-id="3ebcd-113">RPO</span><span class="sxs-lookup"><span data-stu-id="3ebcd-113">RPO</span></span> |
| --- | --- |
| <span data-ttu-id="3ebcd-114">레지스트리 및 통신 작업에 대 한 서비스 가용성</span><span class="sxs-lookup"><span data-stu-id="3ebcd-114">Service availability for registry and communication operations</span></span> |<span data-ttu-id="3ebcd-115">CName 손실 가능성</span><span class="sxs-lookup"><span data-stu-id="3ebcd-115">Possible CName loss</span></span> |
| <span data-ttu-id="3ebcd-116">ID 레지스트리의 ID 데이터</span><span class="sxs-lookup"><span data-stu-id="3ebcd-116">Identity data in identity registry</span></span> |<span data-ttu-id="3ebcd-117">0-5분 데이터 손실</span><span class="sxs-lookup"><span data-stu-id="3ebcd-117">0-5 mins data loss</span></span> |
| <span data-ttu-id="3ebcd-118">장치-클라우드 메시지</span><span class="sxs-lookup"><span data-stu-id="3ebcd-118">Device-to-cloud messages</span></span> |<span data-ttu-id="3ebcd-119">읽지 않은 메시지가 모두 손실됨</span><span class="sxs-lookup"><span data-stu-id="3ebcd-119">All unread messages are lost</span></span> |
| <span data-ttu-id="3ebcd-120">작업 모니터링 메시지</span><span class="sxs-lookup"><span data-stu-id="3ebcd-120">Operations monitoring messages</span></span> |<span data-ttu-id="3ebcd-121">읽지 않은 메시지가 모두 손실됨</span><span class="sxs-lookup"><span data-stu-id="3ebcd-121">All unread messages are lost</span></span> |
| <span data-ttu-id="3ebcd-122">클라우드-장치 메시지</span><span class="sxs-lookup"><span data-stu-id="3ebcd-122">Cloud-to-device messages</span></span> |<span data-ttu-id="3ebcd-123">0-5분 데이터 손실</span><span class="sxs-lookup"><span data-stu-id="3ebcd-123">0-5 mins data loss</span></span> |
| <span data-ttu-id="3ebcd-124">클라우드-장치 피드백 큐</span><span class="sxs-lookup"><span data-stu-id="3ebcd-124">Cloud-to-device feedback queue</span></span> |<span data-ttu-id="3ebcd-125">읽지 않은 메시지가 모두 손실됨</span><span class="sxs-lookup"><span data-stu-id="3ebcd-125">All unread messages are lost</span></span> |

## <a name="regional-failover-with-iot-hub"></a><span data-ttu-id="3ebcd-126">IoT Hub를 통한 국가별 장애 조치</span><span class="sxs-lookup"><span data-stu-id="3ebcd-126">Regional failover with IoT Hub</span></span>
<span data-ttu-id="3ebcd-127">IoT 솔루션으로 배포 토폴로지를 완벽하게 수행하는 것은 이 문서의 범위를 벗어납니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-127">A complete treatment of deployment topologies in IoT solutions is outside the scope of this article.</span></span> <span data-ttu-id="3ebcd-128">이 문서는 고가용성 및 재해 복구를 목적으로 하는 *국가별 장애 조치* 배포 모델을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-128">The article discusses the *regional failover* deployment model for the purpose of high availability and disaster recovery.</span></span>

<span data-ttu-id="3ebcd-129">국가별 장애 조치 모델에서 솔루션 백 엔드는 기본적으로 하나의 데이터 센터 위치에서 실행되며 보조 IoT Hub 및 백 엔드가 다른 데이터 센터 위치에 배포됩니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-129">In a regional failover model, the solution back end runs primarily in one datacenter location, and a secondary IoT hub and back end are deployed in another datacenter location.</span></span> <span data-ttu-id="3ebcd-130">기본 데이터센터의 IoT Hub에 중단이 발생하거나 장치에서 기본 데이터센터로의 네트워크 연결이 중단되는 경우입니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-130">If the IoT hub in the primary datacenter suffers an outage or the network connectivity from the device to the primary datacenter is interrupted.</span></span> <span data-ttu-id="3ebcd-131">장치는 기본 게이트웨이에 연결할 수 없는 경우 항상 보조 서비스 끝점을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-131">Devices use a secondary service endpoint whenever the primary gateway cannot be reached.</span></span> <span data-ttu-id="3ebcd-132">지역 간 장애 조치 기능을 통해 솔루션 가용성을 단일 지역의 고가용성 이상으로 향상시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-132">With a cross-region failover capability, the solution availability can be improved beyond the high availability of a single region.</span></span>

<span data-ttu-id="3ebcd-133">높은 수준에서 IoT Hub로 국가별 장애 조치를 구현하려면 다음이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-133">At a high level, to implement a regional failover model with IoT Hub, you need the following:</span></span>

* <span data-ttu-id="3ebcd-134">**보조 IoT Hub 및 장치 라우팅 논리**- 주 지역에서 서비스 중단이 발생하는 경우 장치에서 보조 지역으로 연결을 시작해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-134">**A secondary IoT hub and device routing logic**: In the case of a service disruption in your primary region, devices must start connecting to your secondary region.</span></span> <span data-ttu-id="3ebcd-135">관련된 대부분의 서비스가 상태를 인식하는 특성이 있으므로 일반적으로 솔루션 관리자는 국가 간 장애 조치 프로세스를 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-135">Given the state-aware nature of most services involved, it is common for solution administrators to trigger the inter-region failover process.</span></span> <span data-ttu-id="3ebcd-136">프로세스에 대한 제어를 유지하면서 새 끝점에서 장치로 통신하는 가장 좋은 방법은 현재 활성 끝점에 대해 *안내자* 서비스를 정기적으로 확인하는 것입니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-136">The best way to communicate the new endpoint to devices, while maintaining control of the process, is to have them regularly check a *concierge* service for the current active endpoint.</span></span> <span data-ttu-id="3ebcd-137">안내자 서비스는 DNS-리디렉션 기술(예: [Azure Traffic Manager][Azure Traffic Manager])을 사용하여 복제되고 연결을 유지할 수 있는 웹 응용 프로그램입니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-137">The concierge service can be a web application that is replicated and kept reachable using DNS-redirection techniques (for example, using [Azure Traffic Manager][Azure Traffic Manager]).</span></span>
* <span data-ttu-id="3ebcd-138">**ID 레지스트리 복제** - 사용하려면 보조 IoT Hub가 솔루션에 연결할 수 있는 모든 장치 ID를 포함해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-138">**Identity registry replication** - To be usable, the secondary IoT hub must contain all device identities that can connect to the solution.</span></span> <span data-ttu-id="3ebcd-139">솔루션은 지역에서 복제된 장치 ID의 백업을 유지하고 이를 보조 IoT Hub로 업로드한 후 장치에 대한 활성 끝점을 전환해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-139">The solution should keep geo-replicated backups of device identities, and upload them to the secondary IoT hub before switching the active endpoint for the devices.</span></span> <span data-ttu-id="3ebcd-140">이 경우 IoT Hub의 장치 ID 내보내기 기능은 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-140">The device identity export functionality of IoT Hub is useful in this context.</span></span> <span data-ttu-id="3ebcd-141">자세한 내용은 [IoT Hub 개발자 가이드 - ID 레지스트리][IoT Hub developer guide - identity registry]를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-141">For more information, see [IoT Hub developer guide - identity registry][IoT Hub developer guide - identity registry].</span></span>
* <span data-ttu-id="3ebcd-142">**논리 병합** - 주 지역을 다시 사용할 수 있게 된 경우 보조 사이트에 생성된 모든 상태 및 데이터를 주 지역으로 다시 마이그레이션해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-142">**Merging logic** - When the primary region becomes available again, all the state and data that have been created in the secondary site must be migrated back to the primary region.</span></span> <span data-ttu-id="3ebcd-143">이러한 상태 및 데이터는 주로 장치 ID 및 응용 프로그램 메타데이터와 관련되며 기본 IoT Hub 및 주 지역의 기타 가능한 응용 프로그램별 저장소에 병합되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-143">This state and data mostly relates to device identities and application metadata, which must be merged with the primary IoT hub and any other application-specific stores in the primary region.</span></span> <span data-ttu-id="3ebcd-144">이러한 단계를 간소화하려면 멱등 연산을 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-144">To simplify this step, you should use idempotent operations.</span></span> <span data-ttu-id="3ebcd-145">멱등 연산은 최후의 일관적인 이벤트 배포 및 중복되거나 비순차적인 이벤트 배달로 인한 부작용을 최소화합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-145">Idempotent operations minimize the side-effects from the eventual consistent distribution of events, and from duplicates or out-of-order delivery of events.</span></span> <span data-ttu-id="3ebcd-146">또한 응용 프로그램 논리는 잠재적인 불일치 또는 "약간"의 날짜 중단 상태를 허용할 수 있도록 설계되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-146">In addition, the application logic should be designed to tolerate potential inconsistencies or "slightly" out of date-state.</span></span> <span data-ttu-id="3ebcd-147">이러한 상황은 시스템이 복구 지점 목표(RPO)에 기반하여 "치료"하는 데 추가로 소요되는 시간으로 인해 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-147">This situation can occur due to the additional time it takes for the system to "heal" based on recovery point objectives (RPO).</span></span>

## <a name="next-steps"></a><span data-ttu-id="3ebcd-148">다음 단계</span><span class="sxs-lookup"><span data-stu-id="3ebcd-148">Next steps</span></span>
<span data-ttu-id="3ebcd-149">Azure IoT Hub에 대한 자세한 내용을 보려면 다음 링크를 따라가세요.</span><span class="sxs-lookup"><span data-stu-id="3ebcd-149">Follow these links to learn more about Azure IoT Hub:</span></span>

* <span data-ttu-id="3ebcd-150">[IoT Hub 시작(자습서)][lnk-get-started]</span><span class="sxs-lookup"><span data-stu-id="3ebcd-150">[Get started with IoT Hubs (Tutorial)][lnk-get-started]</span></span>
* <span data-ttu-id="3ebcd-151">[Azure IoT Hub란?][What is Azure IoT Hub?]</span><span class="sxs-lookup"><span data-stu-id="3ebcd-151">[What is Azure IoT Hub?][What is Azure IoT Hub?]</span></span>

[Disaster recovery and high availability for Azure applications]: ../resiliency/resiliency-disaster-recovery-high-availability-azure-applications.md
[Azure Business Continuity Technical Guidance]: https://azure.microsoft.com/documentation/articles/resiliency-technical-guidance/
[Azure Traffic Manager]: https://azure.microsoft.com/documentation/services/traffic-manager/
[IoT Hub developer guide - identity registry]: iot-hub-devguide-identity-registry.md

[lnk-get-started]: iot-hub-csharp-csharp-getstarted.md
[What is Azure IoT Hub?]: iot-hub-what-is-iot-hub.md
