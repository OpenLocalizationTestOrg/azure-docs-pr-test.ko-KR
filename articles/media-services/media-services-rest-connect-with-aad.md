---
title: "Azure AD 인증을 사용하여 REST로 Azure Media Services API 액세스 | Microsoft Docs"
description: "REST를 사용하여 Azure Active Directory 인증으로 Azure Media Services API를 액세스하는 방법을 알아봅니다."
services: media-services
documentationcenter: 
author: willzhan
manager: cfowler
editor: 
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 06/17/2017
ms.author: willzhan;juliako
ms.openlocfilehash: 1c62857699fb29b3583363e1c6f2dc7874635f40
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/29/2017
---
# <a name="use-azure-ad-authentication-to-access-the-azure-media-services-api-with-rest"></a><span data-ttu-id="e52ec-103">Azure AD 인증을 사용하여 REST로 Azure Media Services API 액세스</span><span class="sxs-lookup"><span data-stu-id="e52ec-103">Use Azure AD authentication to access the Azure Media Services API with REST</span></span>

<span data-ttu-id="e52ec-104">Azure Media Services 팀은 Azure Media Services 액세스를 위한 Azure AD(Azure Active Directory) 인증 지원을 공개했습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-104">The Azure Media Services team has released Azure Active Directory (Azure AD) authentication support for Azure Media Services access.</span></span> <span data-ttu-id="e52ec-105">또한 Media Services 액세스를 위한 Azure Access Control 서비스 인증을 더 이상 사용하지 않을 계획이라고 발표했습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-105">It also announced plans to deprecate Azure Access Control service authentication for Media Services access.</span></span> <span data-ttu-id="e52ec-106">모든 Azure 구독과 Media Services 계정은 Azure AD 테넌트에 연결되며 Azure AD 인증 지원은 다양한 보안 이점을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-106">Because every Azure subscription, and every Media Services account, is attached to an Azure AD tenant, Azure AD authentication support brings many security benefits.</span></span> <span data-ttu-id="e52ec-107">이 변경 내용과 마이그레이션에 대한 자세한 내용은 다음 블로그 게시물 및 문서를 참조하세요(앱에 Media Services .NET SDK을 사용하는 경우).</span><span class="sxs-lookup"><span data-stu-id="e52ec-107">For details about this change and migration (if you use the Media Services .NET SDK for your app), see the following blog posts and articles:</span></span>

- [<span data-ttu-id="e52ec-108">Azure Media Services의 Azure AD 지원 및 Access Control 인증 중단 발표</span><span class="sxs-lookup"><span data-stu-id="e52ec-108">Azure Media Services announces support for Azure AD and deprecation of Access Control authentication</span></span>](https://azure.microsoft.com/blog/azure%20media%20service%20aad%20auth%20and%20acs%20deprecation)
- [<span data-ttu-id="e52ec-109">Azure AD 인증을 사용하여 Azure Media Services API 액세스</span><span class="sxs-lookup"><span data-stu-id="e52ec-109">Access Azure Media Services API by using Azure AD authentication</span></span>](media-services-use-aad-auth-to-access-ams-api.md)
- [<span data-ttu-id="e52ec-110">Azure AD 인증을 사용하여 Microsoft .NET으로 Azure Media Services API 액세스</span><span class="sxs-lookup"><span data-stu-id="e52ec-110">Use Azure AD authentication to access Azure Media Services API by using Microsoft .NET</span></span>](media-services-dotnet-get-started-with-aad.md)
- [<span data-ttu-id="e52ec-111">Azure Portal을 사용하여 Azure AD 인증 시작</span><span class="sxs-lookup"><span data-stu-id="e52ec-111">Getting started with Azure AD authentication by using the Azure portal</span></span>](media-services-portal-get-started-with-aad.md)

<span data-ttu-id="e52ec-112">일부 고객은 다음 제약 조건에 따라 해당 Media Services 솔루션을 개발해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-112">Some customers need to develop their Media Services solutions under the following constraints:</span></span>

*   <span data-ttu-id="e52ec-113">이들은 Microsoft .NET 또는 C#이 아닌 프로그래밍 언어를 사용하거나 런타임 환경이 Windows가 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-113">They use a programming language that is not Microsoft .NET or C#, or the runtime environment is not Windows.</span></span>
*   <span data-ttu-id="e52ec-114">Active Directory 인증 라이브러리와 같은 Azure AD 라이브러리는 이러한 프로그래밍 언어 또는 런타임 환경에 사용할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-114">Azure AD libraries such as Active Directory Authentication Libraries are not available for the programming language or can't be used for their runtime environment.</span></span>

<span data-ttu-id="e52ec-115">일부 고객은 Access Control 인증 및 Azure Media Services 액세스 모두에 REST API를 사용하여 응용 프로그램을 개발했습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-115">Some customers have developed applications by using REST API for both Access Control authentication and Azure Media Services access.</span></span> <span data-ttu-id="e52ec-116">이러한 고객에게는 Azure AD 인증 및 후속 Azure Media Services 액세스에 REST API만 사용하는 방법이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-116">For these customers, you need a way to use only the REST API for Azure AD authentication and subsequent Azure Media Services access.</span></span> <span data-ttu-id="e52ec-117">Azure AD 라이브러리나 Media Services .NET SDK에 의존하지 않아도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-117">You need to not rely on any of the Azure AD libraries or on the Media Services .NET SDK.</span></span> <span data-ttu-id="e52ec-118">이 문서에서는 솔루션에 대해 설명하고 이 시나리오에 대한 심플 코드를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-118">In this article, we describe a solution and provide sample code for this scenario.</span></span> <span data-ttu-id="e52ec-119">코드는 모두 REST API 호출이고 Azure AD 또는 Azure Media Services 라이브러리에 종속성이 없으므로 코드를 다른 프로그래밍 언어로 쉽게 변환할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-119">Because the code is all REST API calls, with no dependency on any Azure AD or Azure Media Services library, the code can easily be translated to any other programming language.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="e52ec-120">현재 Media Services는 Azure Access Control 서비스 인증 모델을 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-120">Currently, Media Services supports the Azure Access Control services authentication model.</span></span> <span data-ttu-id="e52ec-121">하지만 Access Control 인증은 2018년 6월 1일부로 사용 중단되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-121">However, Access Control authentication will be deprecated June 1, 2018.</span></span> <span data-ttu-id="e52ec-122">가능한 빨리 Azure AD 인증 모델로 마이그레이션하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-122">We recommend that you migrate to the Azure AD authentication model as soon as possible.</span></span>


## <a name="design"></a><span data-ttu-id="e52ec-123">디자인</span><span class="sxs-lookup"><span data-stu-id="e52ec-123">Design</span></span>

<span data-ttu-id="e52ec-124">이 문서에서는 다음 인증 및 권한 부여 디자인을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-124">In this article, we use the following authentication and authorization design:</span></span>

*  <span data-ttu-id="e52ec-125">권한 부여 프로토콜: OAuth 2.0.</span><span class="sxs-lookup"><span data-stu-id="e52ec-125">Authorization protocol: OAuth 2.0.</span></span> <span data-ttu-id="e52ec-126">OAuth 2.0은 인증 및 권한 부여 모두에 적용되는 웹 보안 표준입니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-126">OAuth 2.0 is a web security standard that covers both authentication and authorization.</span></span> <span data-ttu-id="e52ec-127">Google, Microsoft, Facebook 및 PayPal에서 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-127">It is supported by Google, Microsoft, Facebook, and PayPal.</span></span> <span data-ttu-id="e52ec-128">2012년 10월에 비준되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-128">It was ratified October 2012.</span></span> <span data-ttu-id="e52ec-129">Microsoft는 OAuth 2.0 및 OpenID Connect를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-129">Microsoft firmly supports OAuth 2.0 and OpenID Connect.</span></span> <span data-ttu-id="e52ec-130">이러한 두 표준은 Azure Active Directory, .NET용 OWIN(Open Web Interface for .NET), Katana 및 Azure AD 라이브러리와 같은 여러 서비스 및 클라이언트 라이브러리에서 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-130">Both of these standards are supported in multiple services and client libraries, including Azure Active Directory, Open Web Interface for .NET (OWIN) Katana, and Azure AD libraries.</span></span>
*  <span data-ttu-id="e52ec-131">부여 유형: 클라이언트 자격 증명 부여 유형.</span><span class="sxs-lookup"><span data-stu-id="e52ec-131">Grant type: Client credentials grant type.</span></span> <span data-ttu-id="e52ec-132">클라이언트 자격 증명은 OAuth 2.0에서 4가지 부여 유형 중 하나입니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-132">Client credentials is one of the four grant types in OAuth 2.0.</span></span> <span data-ttu-id="e52ec-133">Azure AD Microsoft Graph API 액세스에 주로 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-133">It's often used for Azure AD Microsoft Graph API access.</span></span>
*  <span data-ttu-id="e52ec-134">인증 모드: 서비스 주체.</span><span class="sxs-lookup"><span data-stu-id="e52ec-134">Authentication mode: Service principal.</span></span> <span data-ttu-id="e52ec-135">다른 인증 모드는 사용자 또는 대화형 인증입니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-135">The other authentication mode is user or interactive authentication.</span></span>

<span data-ttu-id="e52ec-136">Media Services 사용에 대한 Azure AD 인증 및 권한 부여 흐름에는 총 4가지 응용 프로그램 또는 서비스가 포함되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-136">A total of four applications or services are involved in the Azure AD authentication and authorization flow for using Media Services.</span></span> <span data-ttu-id="e52ec-137">응용 프로그램 및 서비스, 흐름은 다음 표에 설명되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-137">The applications and services, and the flow, are described in the following table:</span></span>

|<span data-ttu-id="e52ec-138">응용 프로그램 형식</span><span class="sxs-lookup"><span data-stu-id="e52ec-138">Application type</span></span> |<span data-ttu-id="e52ec-139">응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="e52ec-139">Application</span></span> |<span data-ttu-id="e52ec-140">흐름</span><span class="sxs-lookup"><span data-stu-id="e52ec-140">Flow</span></span>|
|---|---|---|
|<span data-ttu-id="e52ec-141">클라이언트</span><span class="sxs-lookup"><span data-stu-id="e52ec-141">Client</span></span> | <span data-ttu-id="e52ec-142">고객 앱 또는 솔루션</span><span class="sxs-lookup"><span data-stu-id="e52ec-142">Customer app or solution</span></span> | <span data-ttu-id="e52ec-143">이 앱(실제로는 프록시)은 Azure 구독 및 미디어 서비스 계정이 상주하는 Azure AD 테넌트에 등록됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-143">This app (actually, its proxy) is registered in the Azure AD tenant in which the Azure subscription and the media service account reside.</span></span> <span data-ttu-id="e52ec-144">그런 다음 등록된 앱의 서비스 주체는 미디어 서비스 계정의 액세스 제어(IAM)에서 소유자 또는 참가자 역할을 부여받습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-144">The service principal of the registered app is then granted with Owner or Contributor role in the Access Control (IAM) of the media service account.</span></span> <span data-ttu-id="e52ec-145">서비스 주체는 앱 클라이언트 ID 및 클라이언트 암호로 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-145">The service principal is represented by the app client ID and client secret.</span></span> |
|<span data-ttu-id="e52ec-146">IDP(ID 공급자)</span><span class="sxs-lookup"><span data-stu-id="e52ec-146">Identity Provider (IDP)</span></span> | <span data-ttu-id="e52ec-147">IDP로 Azure AD</span><span class="sxs-lookup"><span data-stu-id="e52ec-147">Azure AD as IDP</span></span> | <span data-ttu-id="e52ec-148">등록된 앱 서비스 주체(클라이언트 ID 및 클라이언트 암호)는 IDP로 Azure AD에 의해 인증됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-148">The registered app service principal (client ID and client secret) is authenticated by Azure AD as the IDP.</span></span> <span data-ttu-id="e52ec-149">이 인증은 내부에서 암시적으로 수행됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-149">This authentication is performed internally and implicitly.</span></span> <span data-ttu-id="e52ec-150">클라이언트 자격 증명 흐름에서와 같이 클라이언트는 사용자 대신 인증됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-150">As in client credentials flow, the client is authenticated instead of the user.</span></span> |
|<span data-ttu-id="e52ec-151">STS(보안 토큰 서비스)/OAuth 서버</span><span class="sxs-lookup"><span data-stu-id="e52ec-151">Secure Token Service (STS)/OAuth server</span></span> | <span data-ttu-id="e52ec-152">STS로 Azure AD</span><span class="sxs-lookup"><span data-stu-id="e52ec-152">Azure AD as STS</span></span> | <span data-ttu-id="e52ec-153">IDP에 의한 인증 후(또는 OAuth 2.0 조건에서 OAuth 서버), 액세스 토큰 또는 JWT(JSON Web Token)가 중간 계층 리소스(여기서는 Media Services REST API 끝점)에 액세스하기 위한 STS/OAuth 서버로서의 Azure AD에 의해 발급됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-153">After authentication by the IDP (or OAuth Server in OAuth 2.0 terms), an access token or JSON Web Token (JWT) is issued by Azure AD as STS/OAuth Server for access to the middle-tier resource: in our case, the Media Services REST API endpoint.</span></span> |
|<span data-ttu-id="e52ec-154">리소스</span><span class="sxs-lookup"><span data-stu-id="e52ec-154">Resource</span></span> | <span data-ttu-id="e52ec-155">Media Services REST API</span><span class="sxs-lookup"><span data-stu-id="e52ec-155">Media Services REST API</span></span> | <span data-ttu-id="e52ec-156">모든 Media Services REST API 호출은 STS 또는 OAuth 서버로서 Azure AD에서 발급한 액세스 토큰으로 권한 부여됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-156">Every Media Services REST API call is authorized by an access token that is issued by Azure AD as STS or the OAuth server.</span></span> |

<span data-ttu-id="e52ec-157">샘플 코드를 실행하고 JWT 또는 액세스 토큰을 캡처하면 JWT에 다음 특성이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-157">If you run the sample code and capture a JWT or an access token, the JWT has the following attributes:</span></span>

    aud: "https://rest.media.azure.net",

    iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    iat: 1497146280,

    nbf: 1497146280,
    exp: 1497150180,

    aio: "Y2ZgYDjuy7SptPzO/muf+uRu1B+ZDQA=",

    appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6",

    appidacr: "1",

    idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/",

    oid: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    sub: "a938cfcc-d3de-479c-b0dd-d4ffe6f50f7c",

    tid: "72f988bf-86f1-41af-91ab-2d7cd011db47",

<span data-ttu-id="e52ec-158">다음은 JWT에 있는 특성과 이전 표에서 4가지 응용 프로그램 또는 서비스 간의 매핑입니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-158">Here are the mappings between the attributes in the JWT and the four applications or services in the preceding table:</span></span>

|<span data-ttu-id="e52ec-159">응용 프로그램 형식</span><span class="sxs-lookup"><span data-stu-id="e52ec-159">Application type</span></span> |<span data-ttu-id="e52ec-160">응용 프로그램</span><span class="sxs-lookup"><span data-stu-id="e52ec-160">Application</span></span> |<span data-ttu-id="e52ec-161">JWT 특성</span><span class="sxs-lookup"><span data-stu-id="e52ec-161">JWT attribute</span></span> |
|---|---|---|
|<span data-ttu-id="e52ec-162">클라이언트</span><span class="sxs-lookup"><span data-stu-id="e52ec-162">Client</span></span> |<span data-ttu-id="e52ec-163">고객 앱 또는 솔루션</span><span class="sxs-lookup"><span data-stu-id="e52ec-163">Customer app or solution</span></span> |<span data-ttu-id="e52ec-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span><span class="sxs-lookup"><span data-stu-id="e52ec-164">appid: "02ed1e8e-af8b-477e-af3d-7e7219a99ac6".</span></span> <span data-ttu-id="e52ec-165">다음 섹션에서 Azure AD에 등록할 응용 프로그램의 클라이언트 ID입니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-165">The client ID of an application you will register to Azure AD in the next section.</span></span> |
|<span data-ttu-id="e52ec-166">IDP(ID 공급자)</span><span class="sxs-lookup"><span data-stu-id="e52ec-166">Identity Provider (IDP)</span></span> | <span data-ttu-id="e52ec-167">IDP로 Azure AD</span><span class="sxs-lookup"><span data-stu-id="e52ec-167">Azure AD as IDP</span></span> |<span data-ttu-id="e52ec-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="e52ec-168">idp: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span>  <span data-ttu-id="e52ec-169">GUID는 Microsoft 테넌트의 ID입니다(microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="e52ec-169">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="e52ec-170">각 테넌트가 자기만의 ID를 가지고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-170">Each tenant has its own, unique ID.</span></span> |
|<span data-ttu-id="e52ec-171">STS(보안 토큰 서비스)/OAuth 서버</span><span class="sxs-lookup"><span data-stu-id="e52ec-171">Secure Token Service (STS)/OAuth server</span></span> |<span data-ttu-id="e52ec-172">STS로 Azure AD</span><span class="sxs-lookup"><span data-stu-id="e52ec-172">Azure AD as STS</span></span> | <span data-ttu-id="e52ec-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span><span class="sxs-lookup"><span data-stu-id="e52ec-173">iss: "https://sts.windows.net/72f988bf-86f1-41af-91ab-2d7cd011db47/".</span></span> <span data-ttu-id="e52ec-174">GUID는 Microsoft 테넌트의 ID입니다(microsoft.onmicrosoft.com).</span><span class="sxs-lookup"><span data-stu-id="e52ec-174">The GUID is the ID of Microsoft tenant (microsoft.onmicrosoft.com).</span></span> |
|<span data-ttu-id="e52ec-175">리소스</span><span class="sxs-lookup"><span data-stu-id="e52ec-175">Resource</span></span> | <span data-ttu-id="e52ec-176">Media Services REST API</span><span class="sxs-lookup"><span data-stu-id="e52ec-176">Media Services REST API</span></span> |<span data-ttu-id="e52ec-177">aud: "https://rest.media.azure.net".</span><span class="sxs-lookup"><span data-stu-id="e52ec-177">aud: "https://rest.media.azure.net".</span></span> <span data-ttu-id="e52ec-178">액세스 토큰의 받는 사람 또는 대상입니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-178">The recipient or audience of the access token.</span></span> |

## <a name="steps-for-setup"></a><span data-ttu-id="e52ec-179">설치 단계</span><span class="sxs-lookup"><span data-stu-id="e52ec-179">Steps for setup</span></span>

<span data-ttu-id="e52ec-180">Azure AD 인증을 위해 Azure AD 응용 프로그램을 등록 및 설정하고 Azure Media Services REST API 끝점 호출을 위해 액세스 토큰을 가져오려면 다음 단계를 완료합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-180">To register and set up an Azure AD application for Azure AD authentication, and to obtain an access token for calling the Azure Media Services REST API endpoint, complete the following steps:</span></span>

1.  <span data-ttu-id="e52ec-181">[Azure 클래식 포털](http://go.microsoft.com/fwlink/?LinkID=213885)에서 Azure AD 응용 프로그램(예를 들어, wzmediaservice)을 Azure AD 테넌트(예를 들어, microsoft.onmicrosoft.com)에 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-181">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), register an Azure AD application (for example, wzmediaservice) to the Azure AD tenant (for example, microsoft.onmicrosoft.com).</span></span> <span data-ttu-id="e52ec-182">웹앱 또는 원시 앱으로 등록했는지 여부는 중요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-182">It doesn't matter whether you registered as web app or native app.</span></span> <span data-ttu-id="e52ec-183">또한 로그온 URL 및 회신 URL(예를 들어, 둘 다로 http://wzmediaservice.com )을 선택할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-183">Also, you can choose any sign-on URL and reply URL (for example, http://wzmediaservice.com for both).</span></span>
2. <span data-ttu-id="e52ec-184">[Azure 클래식 포털](http://go.microsoft.com/fwlink/?LinkID=213885)에서 응용 프로그램의 **구성** 탭으로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-184">In the [Azure classic portal](http://go.microsoft.com/fwlink/?LinkID=213885), go to the **Configure** tab of your application.</span></span> <span data-ttu-id="e52ec-185">**클라이언트 ID**를 적어둡니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-185">Note the **client ID**.</span></span> <span data-ttu-id="e52ec-186">그런 다음 **키** 아래에서 **클라이언트 키**(클라이언트 암호)를 생성합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-186">Then, under **Keys**, generate a **client key** (client secret).</span></span> 

    > [!NOTE] 
    > <span data-ttu-id="e52ec-187">클라이언트 암호를 기록해 둡니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-187">Take note of the client secret.</span></span> <span data-ttu-id="e52ec-188">다시 표시되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-188">It won't be shown again.</span></span>
    
3.  <span data-ttu-id="e52ec-189">[Azure Portal](http://ms.portal.azure.com)에서 Media Services 계정으로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-189">In the [Azure portal](http://ms.portal.azure.com), go to the Media Services account.</span></span> <span data-ttu-id="e52ec-190">**액세스 제어(IAM)** 창을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-190">Select the **Access Control** (IAM) pane.</span></span> <span data-ttu-id="e52ec-191">소유자 또는 참가자 역할의 새 멤버를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-191">Add a new member that has either the Owner or the Contributor role.</span></span> <span data-ttu-id="e52ec-192">보안 주체의 경우, 1단계에서 등록한 응용 프로그램 이름을 검색합니다(이 예에서 wzmediaservice).</span><span class="sxs-lookup"><span data-stu-id="e52ec-192">For the principal, search for the application name you registered in step 1 (in this example, wzmediaservice).</span></span>

## <a name="info-to-collect"></a><span data-ttu-id="e52ec-193">수집할 정보</span><span class="sxs-lookup"><span data-stu-id="e52ec-193">Info to collect</span></span>

<span data-ttu-id="e52ec-194">REST 코딩을 준비하려면 코드에 포함할 다음 데이터 요소를 수집합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-194">To prepare REST coding, collect the following data points to include in the code:</span></span>

*   <span data-ttu-id="e52ec-195">STS 끝점으로 Azure AD: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span><span class="sxs-lookup"><span data-stu-id="e52ec-195">Azure AD as an STS endpoint: https://login.microsoftonline.com/microsoft.onmicrosoft.com/oauth2/token.</span></span> <span data-ttu-id="e52ec-196">이 끝점에서 JWT 액세스 토큰이 요청됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-196">From this endpoint, a JWT access token is requested.</span></span> <span data-ttu-id="e52ec-197">Azure AD는 IDP 외에 STS로도 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-197">In addition to serving as an IDP, Azure AD also serves as an STS.</span></span> <span data-ttu-id="e52ec-198">Azure AD는 리소스 액세스를 위한 JWT(액세스 토큰)를 발급합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-198">Azure AD issues a JWT for resource access (an access token).</span></span> <span data-ttu-id="e52ec-199">JWT 토큰은 다양한 클레임을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-199">A JWT token has various claims.</span></span>
*   <span data-ttu-id="e52ec-200">리소스 또는 대상으로 Azure Media Services REST API: https://rest.media.azure.net.</span><span class="sxs-lookup"><span data-stu-id="e52ec-200">Azure Media Services REST API as resource or audience: https://rest.media.azure.net.</span></span>
*   <span data-ttu-id="e52ec-201">클라이언트 ID: [설치 단계](#steps-for-setup)의 2단계를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e52ec-201">Client ID: See step 2 in [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="e52ec-202">클라이언트 암호: [설치 단계](#steps-for-setup)의 2단계를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="e52ec-202">Client secret: See step 2 in  [Steps for setup](#steps-for-setup).</span></span>
*   <span data-ttu-id="e52ec-203">다음과 같은 형식의 Media Services 계정 REST API 끝점:</span><span class="sxs-lookup"><span data-stu-id="e52ec-203">Your Media Services account REST API endpoint in the following format:</span></span>

    <span data-ttu-id="e52ec-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span><span class="sxs-lookup"><span data-stu-id="e52ec-204">https://[media_service_account_name].restv2.[data_center].media.azure.net/API</span></span> 

    <span data-ttu-id="e52ec-205">응용 프로그램에서 모든 Media Services REST API 호출이 수행되는 끝점입니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-205">This is the endpoint against which all Media Services REST API calls in your application are made.</span></span> <span data-ttu-id="e52ec-206">예를 들어, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span><span class="sxs-lookup"><span data-stu-id="e52ec-206">For example, https://willzhanmswjapan.restv2.japanwest.media.azure.net/API.</span></span>

<span data-ttu-id="e52ec-207">그런 다음 코드에 사용하기 위해 이러한 5개의 매개 변수를 web.config 또는 app.config 파일에 넣을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-207">You can then put these five parameters in your web.config or app.config file, to use in your code.</span></span>

## <a name="sample-code"></a><span data-ttu-id="e52ec-208">샘플 코드</span><span class="sxs-lookup"><span data-stu-id="e52ec-208">Sample code</span></span>

<span data-ttu-id="e52ec-209">[Azure Media Services 액세스를 위한 Azure AD 인증: 둘 다 REST API를 통해](https://github.com/willzhan/WAMSRESTSoln)에서 샘플 코드를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-209">You can find the sample code in [Azure AD Authentication for Azure Media Services Access: Both via REST API](https://github.com/willzhan/WAMSRESTSoln).</span></span>

<span data-ttu-id="e52ec-210">샘플 코드는 두 부분으로 구성되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-210">The sample code has two parts:</span></span>

*   <span data-ttu-id="e52ec-211">Azure AD 인증 및 권한 부여를 위한 모든 REST API 코드를 포함하는 DLL 라이브러리 프로젝트.</span><span class="sxs-lookup"><span data-stu-id="e52ec-211">A DLL library project that has all the REST API code for Azure AD authentication and authorization.</span></span> <span data-ttu-id="e52ec-212">또한 액세스 토큰을 이용해 Media Services REST API 끝점에 대해 REST API 호출을 수행하는 메서드도 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-212">It also has a method for making REST API calls to the Media Services REST API endpoint, with the access token.</span></span>
*   <span data-ttu-id="e52ec-213">Azure AD 인증을 시작하고 다양한 Media Services REST API를 호출하는 콘솔 테스트 클라이언트.</span><span class="sxs-lookup"><span data-stu-id="e52ec-213">A console test client, which initiates Azure AD authentication and calls different Media Services REST API.</span></span>

<span data-ttu-id="e52ec-214">샘플 프로젝트는 3가지 기능을 포함합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-214">The sample project has three features:</span></span>

*   <span data-ttu-id="e52ec-215">REST API만 사용하여 클라이언트 자격 증명 부여를 통한 Azure AD 인증.</span><span class="sxs-lookup"><span data-stu-id="e52ec-215">Azure AD authentications via the client credentials grant by using only the REST API.</span></span>
*   <span data-ttu-id="e52ec-216">REST API만 사용하여 Azure Media Services 액세스.</span><span class="sxs-lookup"><span data-stu-id="e52ec-216">Azure Media Services access by using only the REST API.</span></span>
*   <span data-ttu-id="e52ec-217">REST API만 사용하여 Azure Storage 액세스(REST API를 사용하여 Media Services 계정을 만드는 데 사용됨).</span><span class="sxs-lookup"><span data-stu-id="e52ec-217">Azure Storage access by using only the REST API (as used to create a Media Services account, by using REST API).</span></span>


## <a name="where-is-the-refresh-token"></a><span data-ttu-id="e52ec-218">새로 고침 토큰 위치</span><span class="sxs-lookup"><span data-stu-id="e52ec-218">Where is the refresh token?</span></span>

<span data-ttu-id="e52ec-219">일부 독자는 새로 고침 토큰이 있는 위치를 궁금해할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-219">Some readers might ask: Where is the refresh token?</span></span> <span data-ttu-id="e52ec-220">여기서 새로 고침을 사용하지 않는 이유</span><span class="sxs-lookup"><span data-stu-id="e52ec-220">Why not use a refresh token here?</span></span>

<span data-ttu-id="e52ec-221">새로 고침 토큰의 용도는 액세스 토큰을 새로 고치는 것이 아닙니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-221">The purpose of a refresh token is not to refresh an access token.</span></span> <span data-ttu-id="e52ec-222">대신 최종 사용자 인증이나 사용자 개입을 바이패스하고 이전 토큰이 만료될 때 유효한 액세스 토큰을 계속 가져오기 위해 설계되었습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-222">Instead, it is designed to bypass end-user authentication or user intervention and still get a valid access token when an earlier token expires.</span></span> <span data-ttu-id="e52ec-223">새로 고침 토큰에는 “사용자 다시 로그인 바이패스 토큰”과 같은 표현이 더 적절한 이름일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-223">A better name for a refresh token might be something like "bypass user re-sign-in token."</span></span>

<span data-ttu-id="e52ec-224">OAuth 2.0 권한 부여 흐름(사용자 이름 및 암호, 사용자를 대신하여 작동)을 사용하는 경우 새로 고침 토큰을 사용하여 사용자 개입을 요청하지 않고도 갱신된 액세스 토큰을 가져올 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-224">If you use the OAuth 2.0 authorization grant flow (username and password, acting on behalf of a user), a refresh token helps you get a renewed access token without requesting user intervention.</span></span> <span data-ttu-id="e52ec-225">하지만 이 문서에서 설명한 OAuth 2.0 클라이언트 자격 증명 부여 흐름의 경우 클라이언트는 자체적으로 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-225">However, for the OAuth 2.0 client credentials grant flow that we describe in this article, the client acts on its own behalf.</span></span> <span data-ttu-id="e52ec-226">사용자 개입이 전혀 필요하지 않으며 권한 부여 서버에서 사용자에게 새로 고침 토큰을 제공하지 않아도 되며 제공하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-226">You don't need user intervention at all, and the authorization server doesn't need to (and won't) give you a refresh token.</span></span> <span data-ttu-id="e52ec-227">**GetUrlEncodedJWT** 메서드를 디버깅하는 경우 토큰 끝점에서의 응답에는 액세스 토큰이 있지만 새로 고침 토큰은 없습니다.</span><span class="sxs-lookup"><span data-stu-id="e52ec-227">If you debug the **GetUrlEncodedJWT** method, you notice that the response from the token endpoint has an access token, but no refresh token.</span></span>

## <a name="next-steps"></a><span data-ttu-id="e52ec-228">다음 단계</span><span class="sxs-lookup"><span data-stu-id="e52ec-228">Next steps</span></span>

<span data-ttu-id="e52ec-229">[계정에 파일 업로드](media-services-dotnet-upload-files.md) 시작</span><span class="sxs-lookup"><span data-stu-id="e52ec-229">Get started with [uploading files to your account](media-services-dotnet-upload-files.md).</span></span>
