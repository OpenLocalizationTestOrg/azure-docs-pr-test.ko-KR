---
title: "Azure Site Recovery에서 Azure에 대한 Hyper-V 복제가 작동하는 방식 | Microsoft Docs"
description: "이 문서에서는 Azure Site Recovery 서비스를 사용하여 온-프레미스 Hyper-V VM을 Azure로 복제할 때 사용되는 구성 요소 및 아키텍처 개요를 제공합니다."
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: carmonm
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/23/2017
ms.author: raynew
ms.openlocfilehash: 28f775afaf72b11eec0c22f755e4dbd6a485c895
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="how-does-hyper-v-replication-to-azure-work-in-site-recovery"></a><span data-ttu-id="61bbe-104">Site Recovery에서 Azure에 대한 Hyper-V 복제가 작동하는 방식</span><span class="sxs-lookup"><span data-stu-id="61bbe-104">How does Hyper-V replication to Azure work in Site Recovery?</span></span>


<span data-ttu-id="61bbe-105">이 문서에서는 Azure Portal에서 [Azure Site Recovery](site-recovery-overview.md) 서비스를 사용하여 온-프레미스 Hyper-V 가상 컴퓨터를 Azure에 복제할 때 포함된 구성 요소 및 프로세스를 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-105">This article describes the components and processes involved when replicating on-premises Hyper-V virtual machines, to Azure using the [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="61bbe-106">Site Recovery는 System Center VMM(Virtual Machine Manager)의 사용과 상관없이 관리되는 Hyper-V 클러스터 및 독립 실행형 호스트에서 Hyper-V VM을 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-106">Site Recovery can replicate Hyper-V VMs on Hyper-V clusters and standalone hosts that are managed with or without System Center Virtual Machine Manager (VMM).</span></span>

<span data-ttu-id="61bbe-107">이 문서의 하단 또는 [Azure Recovery Services 포럼](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr)에서 의견을 게시합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-107">Post any comments at the bottom of this article, or in the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>



## <a name="architectural-components"></a><span data-ttu-id="61bbe-108">아키텍처 구성 요소</span><span class="sxs-lookup"><span data-stu-id="61bbe-108">Architectural components</span></span>

<span data-ttu-id="61bbe-109">Hyper-V VM을 Azure에 복제하는 경우 여러 가지 구성 요소가 관련됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-109">There are a number of components involved when replicating Hyper-V VMs to Azure.</span></span>

<span data-ttu-id="61bbe-110">**구성 요소**</span><span class="sxs-lookup"><span data-stu-id="61bbe-110">**Component**</span></span> | <span data-ttu-id="61bbe-111">**위치**</span><span class="sxs-lookup"><span data-stu-id="61bbe-111">**Location**</span></span> | <span data-ttu-id="61bbe-112">**세부 정보**</span><span class="sxs-lookup"><span data-stu-id="61bbe-112">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="61bbe-113">**Azure**</span><span class="sxs-lookup"><span data-stu-id="61bbe-113">**Azure**</span></span> | <span data-ttu-id="61bbe-114">Azure에서는 Microsoft Azure 계정, Azure Storage 계정 및 Azure 네트워크가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-114">In Azure you need a Microsoft Azure account, an Azure storage account, and a Azure network.</span></span> | <span data-ttu-id="61bbe-115">복제된 데이터를 저장소 계정에 저장하고 온-프레미스 사이트에서 장애 조치가 발생한 경우 복제된 데이터를 사용하여 Azure VM을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-115">Replicated data is stored in the storage account, and Azure VMs are created with the replicated data when failover from your on-premises site occurs.</span></span><br/><br/> <span data-ttu-id="61bbe-116">Azure VM을 만들 때 Azure 가상 네트워크에 연결합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-116">The Azure VMs connect to the Azure virtual network when they're created.</span></span>
<span data-ttu-id="61bbe-117">**VMM 서버**</span><span class="sxs-lookup"><span data-stu-id="61bbe-117">**VMM server**</span></span> | <span data-ttu-id="61bbe-118">Hyper-V 호스트는 VMM 클라우드에 위치합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-118">Hyper-V hosts are located in VMM clouds</span></span> | <span data-ttu-id="61bbe-119">VMM 클라우드에서 Hyper-V 호스트를 관리하는 경우 Recovery Services 자격 증명 모음에 VMM 서버를 등록합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-119">If Hyper-V hosts are managed in VMM clouds, you register the VMM server in the Recovery Services vault.</span></span><br/><br/> <span data-ttu-id="61bbe-120">VMM 서버에서 Site Recovery Provider를 설치하여 Azure로 복제를 오케스트레이션합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-120">On the VMM server you install the Site Recovery Provider to orchestrate replication with Azure.</span></span><br/><br/> <span data-ttu-id="61bbe-121">논리 및 VM 네트워크를 설정하여 네트워크 매핑을 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-121">You need logical and VM networks set up to configure network mapping.</span></span> <span data-ttu-id="61bbe-122">VM 네트워크는 클라우드와 연결된 논리 네트워크에 연결되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-122">A VM network should be linked to a logical network that's associated with the cloud.</span></span>
<span data-ttu-id="61bbe-123">**Hyper-V 호스트**</span><span class="sxs-lookup"><span data-stu-id="61bbe-123">**Hyper-V host**</span></span> | <span data-ttu-id="61bbe-124">Hyper-V 호스트 및 클러스터는 VMM 서버를 사용하거나 사용하지 않고 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-124">Hyper-V hosts and clusters can be deployed with or without VMM server.</span></span> | <span data-ttu-id="61bbe-125">VMM 서버가 없는 경우 Site Recovery 복제를 오케스트레이션하기 위해 Site Recovery Provider가 인터넷을 통해 호스트에 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-125">If there's no VMM server, the Site Recovery Provider is installed on the host to orchestrate replication with Site Recovery over the internet.</span></span> <span data-ttu-id="61bbe-126">VMM 서버가 있는 경우, 공급자는 호스트가 아니라 서버에 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-126">If there's a VMM server, the Provider is installed on it, and not on the host.</span></span><br/><br/> <span data-ttu-id="61bbe-127">Recovery Services 에이전트는 호스트에 설치되어 데이터 복제를 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-127">The Recovery Services agent is installed on the host to handle data replication.</span></span><br/><br/> <span data-ttu-id="61bbe-128">공급자 및 에이전트로부터의 통신은 모두 보호 및 암호화됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-128">Communications from both the Provider and the agent are secure and encrypted.</span></span> <span data-ttu-id="61bbe-129">Azure 저장소에 복제된 데이터도 암호화됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-129">Replicated data in Azure storage is also encrypted.</span></span>
<span data-ttu-id="61bbe-130">**Hyper-V VM**</span><span class="sxs-lookup"><span data-stu-id="61bbe-130">**Hyper-V VMs**</span></span> | <span data-ttu-id="61bbe-131">Hyper-V 호스트 서버에서 실행되는 하나 이상의 VM이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-131">You need one or more VMs running on a Hyper-V host server.</span></span> | <span data-ttu-id="61bbe-132">명시적으로 VM에 설치해야 하는 것은 없습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-132">Nothing needs to explicitly installed on VMs.</span></span>

<span data-ttu-id="61bbe-133">[지원 매트릭스](site-recovery-support-matrix-to-azure.md)에서 이러한 구성 요소에 대한 배포 필수 구성 요소 및 요구 사항을 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-133">Learn about the deployment prerequisites and requirements for each of these components in the [support matrix](site-recovery-support-matrix-to-azure.md).</span></span>

<span data-ttu-id="61bbe-134">**그림 1: Hyper-V 사이트에서 Azure로 복제**</span><span class="sxs-lookup"><span data-stu-id="61bbe-134">**Figure 1: Hyper-V site to Azure replication**</span></span>

![구성 요소](./media/site-recovery-components/arch-onprem-azure-hypervsite.png)

<span data-ttu-id="61bbe-136">**그림 2: VMM 클라우드의 Hyper-V에서 Azure로 복제**</span><span class="sxs-lookup"><span data-stu-id="61bbe-136">**Figure 2: Hyper-V in VMM clouds to Azure replication**</span></span>

![구성 요소](./media/site-recovery-components/arch-onprem-onprem-azure-vmm.png)


## <a name="replication-process"></a><span data-ttu-id="61bbe-138">복제 프로세스</span><span class="sxs-lookup"><span data-stu-id="61bbe-138">Replication process</span></span>

<span data-ttu-id="61bbe-139">**그림 3: Azure로 Hyper-V 복제의 복제 및 복구 프로세스**</span><span class="sxs-lookup"><span data-stu-id="61bbe-139">**Figure 3: Replication and recovery process for Hyper-V replication to Azure**</span></span>

![워크플로](./media/site-recovery-components/arch-hyperv-azure-workflow.png)

### <a name="enable-protection"></a><span data-ttu-id="61bbe-141">보호 사용</span><span class="sxs-lookup"><span data-stu-id="61bbe-141">Enable protection</span></span>

1. <span data-ttu-id="61bbe-142">Azure Portal 또는 온-프레미스에서 Hyper-V VM에 대한 보호를 사용하도록 설정하면 **보호 활성화**가 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-142">After you enable protection for a Hyper-V VM, in the Azure portal or on-premises, the **Enable protection** starts.</span></span>
2. <span data-ttu-id="61bbe-143">이 작업은 사용자가 구성한 설정으로 Azure에 대한 복제를 설정하기 위해 [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx) 메서드를 호출하기 전에 해당 컴퓨터가 전제 조건에 부합하는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-143">The job checks that the machine complies with prerequisites, before invoking the [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), to set up replication with the settings you've configured.</span></span>
3. <span data-ttu-id="61bbe-144">작업은 [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) 메서드를 호출하여 초기 복제를 시작하여 전체 VM 복제를 초기화하고 Azure로 VM의 가상 디스크를 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-144">The job starts initial replication by invoking the [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) method, to initialize a full VM replication, and send the VM's virtual disks to Azure.</span></span>
4. <span data-ttu-id="61bbe-145">**작업** 탭에서 작업을 모니터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-145">You can monitor the job in the **Jobs** tab.</span></span>
        <span data-ttu-id="61bbe-146">![작업 목록](media/site-recovery-hyper-v-azure-architecture/image1.png)![보호 드릴 다운 사용](media/site-recovery-hyper-v-azure-architecture/image2.png)</span><span class="sxs-lookup"><span data-stu-id="61bbe-146">![Jobs list](media/site-recovery-hyper-v-azure-architecture/image1.png) ![Enable protection drill down](media/site-recovery-hyper-v-azure-architecture/image2.png)</span></span>

### <a name="replicate-the-initial-data"></a><span data-ttu-id="61bbe-147">초기 데이터 복제</span><span class="sxs-lookup"><span data-stu-id="61bbe-147">Replicate the initial data</span></span>

1. <span data-ttu-id="61bbe-148">초기 복제가 트리거될 때 [Hyper-V VM 스냅숏](https://technet.microsoft.com/library/dd560637.aspx)이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-148">A [Hyper-V VM snapshot](https://technet.microsoft.com/library/dd560637.aspx) snapshot is taken when initial replication is triggered.</span></span>
2. <span data-ttu-id="61bbe-149">가상 하드 디스크는 모두 Azure에 복사될 때까지 하나씩 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-149">Virtual hard disks are replicated one by one until they're all copied to Azure.</span></span> <span data-ttu-id="61bbe-150">VM 크기 및 네트워크 대역폭에 따라 시간이 오래 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-150">It could take a while, depending on the VM size, and network bandwidth.</span></span> <span data-ttu-id="61bbe-151">네트워크 사용을 최적화하려면 [Azure 보호 네트워크 대역폭 사용에 대한 온-프레미스 관리 방법](https://support.microsoft.com/kb/3056159)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="61bbe-151">To optimize your network usage, see [How to manage on-premises to Azure protection network bandwidth usage](https://support.microsoft.com/kb/3056159).</span></span>
3. <span data-ttu-id="61bbe-152">초기 복제 진행 중에 디스크가 변경될 경우, Hyper-V 복제 로그(.hrl)로 Hyper-V 복제본 복제 추적자가 이러한 변경 내용을 추적합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-152">If disk changes occur while initial replication is in progress, the Hyper-V Replica Replication Tracker tracks those changes as Hyper-V Replication Logs (.hrl).</span></span> <span data-ttu-id="61bbe-153">이러한 파일은 디스크와 동일한 폴더에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-153">These files are located in the same folder as the disks.</span></span> <span data-ttu-id="61bbe-154">각 디스크에는 보조 저장소로 전송되는 .hrl 파일이 연결되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-154">Each disk has an associated .hrl file that will be sent to secondary storage.</span></span>
4. <span data-ttu-id="61bbe-155">초기 복제 진행 중에는 스냅숏과 로그 파일이 디스크 리소스를 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-155">The snapshot and log files consume disk resources while initial replication is in progress.</span></span>
5. <span data-ttu-id="61bbe-156">초기 복제가 완료되면 VM 스냅숏은 삭제됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-156">When the initial replication finishes, the VM snapshot is deleted.</span></span> <span data-ttu-id="61bbe-157">로그의 델타 디스크 변경 내용이 동기화되고 부모 디스크로 병합합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-157">Delta disk changes in the log are synchronized and merged to the parent disk.</span></span>


### <a name="finalize-protection"></a><span data-ttu-id="61bbe-158">보호 완료</span><span class="sxs-lookup"><span data-stu-id="61bbe-158">Finalize protection</span></span>

1. <span data-ttu-id="61bbe-159">초기 복제를 완료한 후에 **가상 컴퓨터에서 보호 완료** 작업에서 가상 컴퓨터를 보호하도록 네트워크 및 기타 복제 후 설정을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-159">After the initial replication finishes, the **Finalize protection on the virtual machine** job configures network and other post-replication settings, so that the virtual machine is protected.</span></span>
    <span data-ttu-id="61bbe-160">![보호 작업 완료](media/site-recovery-hyper-v-azure-architecture/image3.png)</span><span class="sxs-lookup"><span data-stu-id="61bbe-160">![Finalize protection job](media/site-recovery-hyper-v-azure-architecture/image3.png)</span></span>
2. <span data-ttu-id="61bbe-161">Azure에 복제할 경우 장애 조치를 위해 가상 컴퓨터에 대한 설정을 조정해야 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-161">If you're replicating to Azure, you might need to tweak the settings for the virtual machine so that it's ready for failover.</span></span> <span data-ttu-id="61bbe-162">이 시점에서 테스트 장애 조치(Failover)를 실행하여 모든 것이 예상대로 작동하는지 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-162">At this point you can run a test failover to check everything is working as expected.</span></span>

### <a name="replicate-the-delta"></a><span data-ttu-id="61bbe-163">델타 복제</span><span class="sxs-lookup"><span data-stu-id="61bbe-163">Replicate the delta</span></span>

1. <span data-ttu-id="61bbe-164">초기 복제 후에는 복제 설정에 따라 델타 동기화가 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-164">After the initial replication, delta synchronization begins, in accordance with replication settings.</span></span>
2. <span data-ttu-id="61bbe-165">Hyper-V 복제본 복제 추적자가 .hrl 파일로 가상 하드 디스크에 변경 내용을 추적합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-165">The Hyper-V Replica Replication Tracker tracks the changes to a virtual hard disk as .hrl files.</span></span> <span data-ttu-id="61bbe-166">복제를 위해 구성된 각 디스크에는 연결된 .hrl 파일이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-166">Each disk that's configured for replication has an associated .hrl file.</span></span> <span data-ttu-id="61bbe-167">이 로그는 초기 복제가 완료된 후 고객의 저장소 계정으로 전송됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-167">This log is sent to the customer's storage account after initial replication is complete.</span></span> <span data-ttu-id="61bbe-168">로그가 Azure로 전송 중인 경우 주 디스크의 변경 내용은 같은 디렉터리의 다른 로그 파일에 추적됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-168">When a log is in transit to Azure, the changes in the primary disk are tracked in another log file, in the same directory.</span></span>
3. <span data-ttu-id="61bbe-169">초기 및 델타 복제가 진행되는 동안 VM 보기에서 VM을 모니터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-169">During initial and delta replication, you can monitor the VM in the VM view.</span></span> <span data-ttu-id="61bbe-170">[자세히 알아보기](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="61bbe-170">[Learn more](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span></span>  

### <a name="synchronize-replication"></a><span data-ttu-id="61bbe-171">복제 동기화</span><span class="sxs-lookup"><span data-stu-id="61bbe-171">Synchronize replication</span></span>

1. <span data-ttu-id="61bbe-172">델타 복제에 실패했고 전체 복제에는 대역폭이나 시간이 많이 소모될 경우 VM에서 다시 동기화가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-172">If delta replication fails, and a full replication would be costly in terms of bandwidth or time, then a VM is marked for resynchronization.</span></span> <span data-ttu-id="61bbe-173">예를 들어 .hrl 파일이 디스크 크기에 50%에 달한다면 VM이 다시 동기화되도록 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-173">For example, if the .hrl files reach 50% of the disk size, then the VM will be marked for resynchronization.</span></span>
2.  <span data-ttu-id="61bbe-174">다시 동기화는 원본 및 대상 가상 컴퓨터의 체크섬을 계산하고 델타 데이터만 전송하므로 보내는 데이터 크기가 최소화됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-174">Resynchronization minimizes the amount of data sent by computing checksums of the source and target virtual machines, and sending only the delta data.</span></span> <span data-ttu-id="61bbe-175">다시 동기화는 고정 블록 청크 알고리즘을 사용하며 이 경우 원본 및 대상 파일이 고정 청크로 나누어집니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-175">Resynchronization uses a fixed-block chunking algorithm where source and target files are divided into fixed chunks.</span></span> <span data-ttu-id="61bbe-176">각 청크에 대한 체크섬을 생성한 후 이를 비교하여 원본의 어떤 블록을 대상에 적용해야 하는지 결정합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-176">Checksums for each chunk are generated and then compared to determine which blocks from the source need to be applied to the target.</span></span>
3. <span data-ttu-id="61bbe-177">다시 동기화를 마치면 일반 델타 복제가 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-177">After resynchronization finishes, normal delta replication should resume.</span></span> <span data-ttu-id="61bbe-178">기본적으로 다시 동기화는 업무 시간 이외에 실행되도록 예약되나 수동으로 가상 컴퓨터를 다시 동기화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-178">By default resynchronization is scheduled to run automatically outside office hours, but you can resynchronize a virtual machine manually.</span></span> <span data-ttu-id="61bbe-179">예를 들어 네트워크 중단 또는 다른 중단이 발생하면 다시 동기화를 다시 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-179">For example, you can resume resynchronization if a network outage or another outage occurs.</span></span> <span data-ttu-id="61bbe-180">이렇게 하려면 포털 > **다시 동기화**에서 VM을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-180">To do this, select the VM in the portal > **Resynchronize**.</span></span>

    ![수동 다시 동기화](media/site-recovery-hyper-v-azure-architecture/image4.png)


### <a name="retry-logic"></a><span data-ttu-id="61bbe-182">재시도 논리</span><span class="sxs-lookup"><span data-stu-id="61bbe-182">Retry logic</span></span>

<span data-ttu-id="61bbe-183">복제 오류가 발생한 경우 기본 제공 재시도가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-183">If a replication error occurs, there's a built-in retry.</span></span> <span data-ttu-id="61bbe-184">이 논리는 두 가지 범주로 분류할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-184">This logic can be classified into two categories:</span></span>

<span data-ttu-id="61bbe-185">**범주**</span><span class="sxs-lookup"><span data-stu-id="61bbe-185">**Category**</span></span> | <span data-ttu-id="61bbe-186">**세부 정보**</span><span class="sxs-lookup"><span data-stu-id="61bbe-186">**Details**</span></span>
--- | ---
<span data-ttu-id="61bbe-187">**복구할 수 없는 오류**</span><span class="sxs-lookup"><span data-stu-id="61bbe-187">**Non-recoverable errors**</span></span> | <span data-ttu-id="61bbe-188">재시도가 수행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-188">No retry is attempted.</span></span> <span data-ttu-id="61bbe-189">VM 상태가 **위험**으로 표시되고 관리자 개입이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-189">VM status will be **Critical**, and administrator intervention is required.</span></span> <span data-ttu-id="61bbe-190">이러한 오류의 예로는 VHD 체인 손상, VM 복제본에 대한 잘못된 상태, 네트워크 인증 오류, 권한 부여 오류, VM 찾을 수 없음 오류(독립 실행형 Hyper-V 서버의 경우)가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-190">Examples of these errors include: broken VHD chain; Invalid state for the replica VM; Network authentication errors: authorization errors; VM not found errors (for standalone Hyper-V servers)</span></span>
<span data-ttu-id="61bbe-191">**복구할 수 있는 오류**</span><span class="sxs-lookup"><span data-stu-id="61bbe-191">**Recoverable errors**</span></span> | <span data-ttu-id="61bbe-192">첫 번째 시도부터 재시도 간격을 늘리는 기하급수적인 백오프(1, 2, 4, 8, 10분)를 사용하여 복제 간격마다 재시도가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-192">Retries occur every replication interval, using an exponential back-off that increases the retry interval from the start of the first attempt by 1, 2, 4, 8, and 10 minutes.</span></span> <span data-ttu-id="61bbe-193">오류가 계속되면 30분마다 다시 시도하십시오.</span><span class="sxs-lookup"><span data-stu-id="61bbe-193">If an error persists, retry every 30 minutes.</span></span> <span data-ttu-id="61bbe-194">이러한 예로는 네트워크 오류, 디스크 공간 부족, 메모리 부족 상태가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-194">Examples include: network errors; low disk  errors; low memory conditions</span></span> |



## <a name="failover-and-failback-process"></a><span data-ttu-id="61bbe-195">장애 조치 및 장애 복구 프로세스</span><span class="sxs-lookup"><span data-stu-id="61bbe-195">Failover and failback process</span></span>

1. <span data-ttu-id="61bbe-196">온-프레미스 Hyper-V VM에서 Azure로 계획된 또는 계획되지 않은 [장애 조치](site-recovery-failover.md)를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-196">You can run a planned or unplanned [failover](site-recovery-failover.md) from on-premises Hyper-V VMs to Azure.</span></span> <span data-ttu-id="61bbe-197">계획된 장애 조치를 실행할 경우 데이터 손실을 방지하기 위해 원본 VM이 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-197">If you run a planned failover, then source VMs are shut down to ensure no data loss.</span></span>
2. <span data-ttu-id="61bbe-198">단일 컴퓨터에 장애 조치를 수행하거나 [복구 계획](site-recovery-create-recovery-plans.md)을 만들어서 여러 컴퓨터의 장애 조치를 오케스트레이션할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-198">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md) to orchestrate failover of multiple machines.</span></span>
4. <span data-ttu-id="61bbe-199">장애 조치를 실행한 후에 Azure에서 만들어진 복제본 VM이 표시되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-199">After you run the failover, you should be able to see the created replica VMs in Azure.</span></span> <span data-ttu-id="61bbe-200">필요한 경우 VM에 공용 IP 주소를 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-200">You can assign a public IP address to the VM if required.</span></span>
5. <span data-ttu-id="61bbe-201">그런 다음 복제본 Azure VM에서 워크로드에 액세스하려면 장애 조치를 커밋합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-201">You then commit the failover to start accessing the workload from the replica Azure VM.</span></span>
6. <span data-ttu-id="61bbe-202">기본 온-프레미스 사이트를 다시 사용할 수 있는 경우 [장애 복구](site-recovery-failback-from-azure-to-hyper-v.md)를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-202">When your primary on-premises site is available again, you can [fail back](site-recovery-failback-from-azure-to-hyper-v.md).</span></span> <span data-ttu-id="61bbe-203">Azure에서 기본 사이트로 계획된 장애 조치를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-203">You kick off a planned failover from Azure to the primary site.</span></span> <span data-ttu-id="61bbe-204">계획된 장애 조치의 경우 데이터가 손실되지 않도록 동일한 VM 또는 대체 위치에 장애 복구를 수행하고 Azure와 온-프레미스 간의 변경 내용을 동기화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-204">For a planned failover you can select to failback to the same VM or to an alternate location, and synchronize changes between Azure and on-premises, to ensure no data loss.</span></span> <span data-ttu-id="61bbe-205">온-프레미스에 VM이 만들어지면 장애 조치를 커밋합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-205">When VMs are created on-premises, you commit the failover.</span></span>




## <a name="next-steps"></a><span data-ttu-id="61bbe-206">다음 단계</span><span class="sxs-lookup"><span data-stu-id="61bbe-206">Next steps</span></span>

<span data-ttu-id="61bbe-207">[지원 매트릭스](site-recovery-support-matrix-to-azure.md)를 검토합니다.</span><span class="sxs-lookup"><span data-stu-id="61bbe-207">Review the [support matrix](site-recovery-support-matrix-to-azure.md)</span></span>
