---
title: "Site Recovery에서 Azure로 테스트 장애 조치(failover) | Microsoft Docs"
description: "온-프레미스에서 Azure로 테스트 장애 조치 실행에 대해 자세히 알아보기"
services: site-recovery
documentationcenter: 
author: prateek9us
manager: gauravd
editor: 
ms.assetid: 44813a48-c680-4581-a92e-cecc57cc3b1e
ms.service: site-recovery
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: storage-backup-recovery
ms.date: 07/04/2017
ms.author: pratshar
ms.openlocfilehash: 54f62af6abcdd38254fd5379b95baa05656dc90b
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="test--failover-to-azure-in-site-recovery"></a><span data-ttu-id="09359-103">Site Recovery에서 Azure로 테스트 장애 조치(failover)</span><span class="sxs-lookup"><span data-stu-id="09359-103">Test  Failover to Azure in Site Recovery</span></span>



<span data-ttu-id="09359-104">이 문서는 Azure를 복구 사이트로 사용하여 Site Recovery로 보호되는 가상 컴퓨터 및 물리적 서버의 테스트 장애 조치(failover) 또는 재해 복구 훈련을 수행하기 위한 정보와 지침을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-104">This article provides information and instructions for doing a test failover or a DR drill of virtual machines and physical servers that are protected with Site Recovery using Azure as the recovery site.</span></span>

<span data-ttu-id="09359-105">이 문서의 하단 또는 [Azure 복구 서비스 포럼](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr)에서 의견이나 질문을 게시합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-105">Post any comments or questions at the bottom of this article, or on the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

<span data-ttu-id="09359-106">데이터 손실 또는 가동 중지 없이 복제 전략의 유효성을 검사하거나 재해 복구 훈련을 수행하기 위해 테스트 장애 조치(failover)가 실행됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-106">Test failover is run to validate your replication strategy or perform a disaster recovery drill without any data loss or downtime.</span></span> <span data-ttu-id="09359-107">테스트 장애 조치(failover)를 수행해도 진행 중인 복제 또는 프로덕션 환경에 영향을 주지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-107">Doing a test failover doesn't have any impact on the ongoing replication or on your production environment.</span></span> <span data-ttu-id="09359-108">가상 컴퓨터 또는 [복구 계획](site-recovery-create-recovery-plans.md)에서 테스트 장애 조치(failover)를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-108">Test failover can be done either on a virtual machine or a [recovery plan](site-recovery-create-recovery-plans.md).</span></span> <span data-ttu-id="09359-109">테스트 장애 조치를 트리거할 때 테스트 가상 컴퓨터를 연결할 네트워크를 지정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-109">When triggering a test failover, you need to specify the network to which test virtual machines would connect to.</span></span> <span data-ttu-id="09359-110">테스트 장애 조치가 트리거되면 **작업** 페이지에서 진행 상황을 추적할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-110">Once a test failover is triggered, you can track progress in the **Jobs** page.</span></span>  


## <a name="supported-scenarios"></a><span data-ttu-id="09359-111">지원되는 시나리오</span><span class="sxs-lookup"><span data-stu-id="09359-111">Supported scenarios</span></span>
<span data-ttu-id="09359-112">테스트 장애 조치(Failover)는 [기존 VMware 사이트에서 Azure로](site-recovery-vmware-to-azure-classic-legacy.md) 배포하는 시나리오를 제외한 모든 배포 시나리오에서 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-112">Test failover is supported in all deployment scenarios other than [legacy VMware site to Azure](site-recovery-vmware-to-azure-classic-legacy.md).</span></span> <span data-ttu-id="09359-113">가상 컴퓨터가 Azure로 장애 조치(Failover)된 경우에도 테스트 장애 조치(Failover)가 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-113">Test failover is also not supported when virtual machine has been failed over to Azure.</span></span>  


## <a name="run-a-test-failover"></a><span data-ttu-id="09359-114">테스트 장애 조치(Failover) 실행</span><span class="sxs-lookup"><span data-stu-id="09359-114">Run a test failover</span></span>
<span data-ttu-id="09359-115">이 절차는 복구 계획에 대한 테스트 장애 조치를 실행하는 방법을 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-115">This procedure describes how to run a test failover for a recovery plan.</span></span> <span data-ttu-id="09359-116">또는 적절한 옵션을 사용하여 단일 컴퓨터에 대해 테스트 장애 조치(Failover)를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-116">Alternatively you can also run test failover for a single machine by using the appropriate option on it.</span></span>

![테스트 장애 조치(Failover)](./media/site-recovery-test-failover-to-azure/TestFailover.png)


1. <span data-ttu-id="09359-118">**복구 계획** > *recoveryplan_name*을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-118">Select **Recovery Plans** > *recoveryplan_name*.</span></span> <span data-ttu-id="09359-119">**테스트 장애 조치(failover)**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-119">Click **Test Failover**.</span></span>
1. <span data-ttu-id="09359-120">장애 조치(Failover)할 **복구 지점**을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-120">Select a **Recovery Point** to failover to.</span></span> <span data-ttu-id="09359-121">다음 옵션 중 하나를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-121">You can use one of the following options:</span></span>
    1.  <span data-ttu-id="09359-122">**가장 최근에 처리된 시점**: 복구 계획의 모든 가상 컴퓨터를 Site Recovery 서비스에서 이미 처리한 최근 복구 지점으로 장애 조치합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-122">**Latest processed**: This option fails over all virtual machines of the recovery plan to the latest recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="09359-123">가상 컴퓨터의 테스트 장애 조치(Failover)를 수행할 때 가장 최근에 처리된 복구 지점의 타임스탬프도 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-123">When you are doing test failover of a virtual machine, time stamp of the latest processed recovery point is also shown.</span></span> <span data-ttu-id="09359-124">복구 계획의 장애 조치를 수행하는 경우 개별 가상 컴퓨터로 이동하여 **최근 복구 지점** 타일을 살펴보면 이 정보를 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-124">If you are doing failover of a recovery plan, you can go to individual virtual machine and look at **Latest Recovery Points** tile to get this information.</span></span> <span data-ttu-id="09359-125">처리되지 않은 데이터를 처리하느라 소요되는 시간이 없기 때문에 이 옵션은 낮은 RTO(복구 시간 목표) 장애 조치(Failover) 옵션을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-125">As no time is spent to process the unprocessed data, this option provides a low RTO (Recovery Time Objective) failover option.</span></span>
    1.  <span data-ttu-id="09359-126">**최신 응용 프로그램 일치**: 복구 계획의 모든 가상 컴퓨터를 Site Recovery 서비스에서 이미 처리한 최신 응용 프로그램 일치 복구 지점으로 장애 조치합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-126">**Latest app-consistent**: This option fails over all virtual machines of the recovery plan to the latest application consistent recovery point that has already been processed by Site Recovery service.</span></span> <span data-ttu-id="09359-127">가상 컴퓨터의 테스트 장애 조치(Failover)를 수행할 때 최신 앱 일치 복구 지점의 타임스탬프도 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-127">When you are doing test failover of a virtual machine, time stamp of the latest app-consistent recovery point is also shown.</span></span> <span data-ttu-id="09359-128">복구 계획의 장애 조치를 수행하는 경우 개별 가상 컴퓨터로 이동하여 **최근 복구 지점** 타일을 살펴보면 이 정보를 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-128">If you are doing failover of a recovery plan, you can go to individual virtual machine and look at **Latest Recovery Points** tile to get this information.</span></span>
    1.  <span data-ttu-id="09359-129">**최신**: 먼저 Site Recovery 서비스로 보낸 모든 데이터를 처리한 다음 각 가상 컴퓨터에 대한 복구 지점을 만든 후에 해당 복구 지점에 장애 조치합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-129">**Latest**: This option first processes all the data that has been sent to Site Recovery service to create a recovery point for each virtual machine before failing them over to it.</span></span> <span data-ttu-id="09359-130">이 옵션은 장애 조치를 트리거했을 때 Site Recovery 서비스로 복제된 모든 데이터가 장애 조치 후에 만들어진 가상 컴퓨터에 있게 되므로 가장 낮은 RPO(복구 지점 목표)를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-130">This option provides the lowest RPO (Recovery Point Objective) as the virtual machine created after failover will have all the data that has been replicated to Site Recovery service when the failover was triggered.</span></span>
    1.  <span data-ttu-id="09359-131">**최신 다중 VM 처리**: 이 옵션은 다중 VM 일관성이 켜져 있는 하나 이상의 가상 컴퓨터가 포함된 복구 계획에만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-131">**Latest multi-VM processed**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="09359-132">복제 그룹에 속하는 가상 컴퓨터는 공통된 최신 다중 VM 일관성 복구 지점으로 장애 조치(failover)됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-132">Virtual machines that are part of a replication group failover to the latest common multi-VM consistent recovery point.</span></span> <span data-ttu-id="09359-133">다른 가상 컴퓨터는 최근에 처리된 복구 지점으로 장애 조치(failover)됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-133">Other virtual machines failover to their latest processed recovery point.</span></span>  
    1.  <span data-ttu-id="09359-134">**최신 다중 VM 앱 일치**: 이 옵션은 다중 VM 일관성이 켜져 있는 하나 이상의 가상 컴퓨터가 포함된 복구 계획에만 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-134">**Latest multi-VM app-consistent**: This option is only available for recovery plans that have at least one virtual machine with multi-VM consistency ON.</span></span> <span data-ttu-id="09359-135">복제 그룹에 속하는 가상 컴퓨터는 공통된 최신 다중 VM 응용 프로그램 일관성 복구 지점으로 장애 조치(failover)됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-135">Virtual machines that are part of a replication group failover to the latest common multi-VM application-consistent recovery point.</span></span> <span data-ttu-id="09359-136">다른 가상 컴퓨터는 최근의 응용 프로그램 일치 복구 지점으로 장애 조치(failover)됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-136">Other virtual machines failover to their latest application-consistent recovery point.</span></span> 
    1.  <span data-ttu-id="09359-137">**사용자 지정**: 가상 컴퓨터의 테스트 장애 조치를 수행하는 경우 이 옵션을 사용하여 특정 복구 지점으로 장애 조치할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-137">**Custom**: If you are doing test failover of a virtual machine, then you can use this option to failover to a particular recovery point.</span></span>
1. <span data-ttu-id="09359-138">**Azure 가상 네트워크** 선택: 테스트 가상 컴퓨터를 만들 Azure 가상 네트워크를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-138">Select an **Azure virtual network**: Provide an Azure virtual network where the test virtual machines would be created.</span></span> <span data-ttu-id="09359-139">Site Recovery는 가상 컴퓨터의 **계산 및 네트워크** 설정에서 제공한 것과 동일한 IP를 사용하여 동일한 이름의 서브넷에 테스트 가상 컴퓨터를 만들려고 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-139">Site Recovery attempts to create test virtual machines in a subnet of same name and using the same IP as that provided in **Compute and Network** settings of the virtual machine.</span></span> <span data-ttu-id="09359-140">테스트 장애 조치에 제공된 Azure 가상 네트워크에서 이름이 동일한 서브넷을 사용할 수 없는 경우 사전순으로 첫 번째 서브넷에 테스트 가상 컴퓨터가 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="09359-140">If subnet of same name is not available in the Azure virtual network provided for test failover, then test virtual machine is created in the first subnet alphabetically.</span></span> <span data-ttu-id="09359-141">서브넷에서 동일한 IP를 사용할 수 없는 경우 가상 컴퓨터는 서브넷에서 사용할 수 있는 다른 IP 주소를 얻습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-141">If same IP is not available in the subnet, then virtual machine gets another IP address available in the subnet.</span></span> <span data-ttu-id="09359-142">[자세한 내용](#creating-a-network-for-test-failover)은 이 섹션을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="09359-142">Read this section for [more details](#creating-a-network-for-test-failover)</span></span>
1. <span data-ttu-id="09359-143">Azure에 장애 조치(Failover)하고 데이터 암호화를 사용하는 경우 **암호화 키**에서 공급자 설치 중에 데이터 암호화를 활성화할 때 발행된 인증서를 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-143">If you're failing over to Azure and data encryption is enabled, in **Encryption Key** select the certificate that was issued when you enabled data encryption during Provider installation.</span></span> <span data-ttu-id="09359-144">가상 컴퓨터에서 암호화를 사용하지 않는 경우 이 단계를 무시해도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-144">You can ignore this step if you have not enabled encryption on the virtual machine.</span></span>
1. <span data-ttu-id="09359-145">**작업** 탭에서 장애 조치 진행 상황을 추적합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-145">Track failover progress on the **Jobs** tab.</span></span> <span data-ttu-id="09359-146">Azure 포털에서 테스트 복제본 컴퓨터가 표시되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-146">You should be able to see the test replica machine in the Azure portal.</span></span>
1. <span data-ttu-id="09359-147">가상 컴퓨터에서 RDP 연결을 시작하려면 장애 조치된 가상 컴퓨터의 네트워크 인터페이스에서 [공용 IP를 추가](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine)해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-147">To initiate an RDP connection on the virtual machine, you will need to [add a public ip](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on the network interface of the failed over virtual machine.</span></span> <span data-ttu-id="09359-148">클래식 가상 컴퓨터에 장애 조치하는 경우 3389 포트에서 [끝점을 추가](../virtual-machines/windows/classic/setup-endpoints.md)해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-148">If you are failing over to a Classic virtual machine, then you need to [add an endpoint](../virtual-machines/windows/classic/setup-endpoints.md) on port 3389</span></span>
1. <span data-ttu-id="09359-149">작업이 완료되면 복구 계획에서 **테스트 장애 조치 정리**를 클릭합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-149">Once you're done, click **Cleanup test failover** on the recovery plan.</span></span> <span data-ttu-id="09359-150">**참고** 에서 테스트 장애 조치와 연관된 모든 관측 내용을 기록하고 저장합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-150">In **Notes** record and save any observations associated with the test failover.</span></span> <span data-ttu-id="09359-151">그러면 테스트 장애 조치 중에 만든 가상 컴퓨터가 삭제됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-151">This deletes the virtual machines that were created during test failover.</span></span>


> [!TIP]
> <span data-ttu-id="09359-152">Site Recovery는 가상 컴퓨터의 **계산 및 네트워크** 설정에서 제공한 것과 동일한 IP를 사용하여 동일한 이름의 서브넷에 테스트 가상 컴퓨터를 만들려고 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-152">Site Recovery attempts to create test virtual machines in a subnet of same name and using the same IP as that provided in **Compute and Network** settings of the virtual machine.</span></span> <span data-ttu-id="09359-153">테스트 장애 조치에 제공된 Azure 가상 네트워크에서 이름이 동일한 서브넷을 사용할 수 없는 경우 사전순으로 첫 번째 서브넷에 테스트 가상 컴퓨터가 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="09359-153">If subnet of same name is not available in the Azure virtual network provided for test failover, then test virtual machine is created in the first subnet alphabetically.</span></span> <span data-ttu-id="09359-154">대상 IP가 선택한 서브넷에 포함되는 경우 Site Recovery는 대상 IP를 사용하여 테스트 장애 조치(failover) 가상 컴퓨터를 만들려고 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-154">If the target IP is part of the chosen subnet, then site recovery tries to create the test failover virtual machine using the target IP.</span></span> <span data-ttu-id="09359-155">대상 IP가 선택한 서브넷에 포함되지 않는 경우 선택한 서브넷에서 사용 가능한 임의의 IP를 사용하여 테스트 장애 조치(failover) 가상 컴퓨터가 생성됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-155">If the target IP is not part of the chosen subnet then test failover virtual machine gets created using any available IP in the chosen subnet.</span></span>
>
>

## <a name="test-failover-job"></a><span data-ttu-id="09359-156">테스트 장애 조치 작업</span><span class="sxs-lookup"><span data-stu-id="09359-156">Test failover job</span></span>

![테스트 장애 조치(Failover)](./media/site-recovery-test-failover-to-azure/TestFailoverJob.png)

<span data-ttu-id="09359-158">장애 조치가 트리거되면 다음 단계를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-158">When a test failover is triggered, it involves following steps:</span></span>

1. <span data-ttu-id="09359-159">필수 조건 확인: 장애 조치에 필요한 모든 조건이 충족되는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-159">Prerequisites check: This step ensures that all conditions required for failover are met</span></span>
1. <span data-ttu-id="09359-160">장애 조치: 데이터를 처리하고 Azure 가상 컴퓨터를 만들 수 있도록 준비합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-160">Failover: This step processes the data and makes it ready so that an Azure virtual machine can be created out of it.</span></span> <span data-ttu-id="09359-161">**최신** 복구 지점을 선택한 경우 이 단계는 서비스로 보낸 데이터에서 복구 지점을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="09359-161">If you have chosen **Latest** recovery point, this step creates a recovery point from the data that has been sent to the service.</span></span>
1. <span data-ttu-id="09359-162">시작: 이전 단계에서 처리한 데이터를 사용하여 Azure 가상 컴퓨터를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="09359-162">Start: This step creates an Azure virtual machine using the data processed in the previous step.</span></span>

## <a name="time-taken-for-failover"></a><span data-ttu-id="09359-163">장애 조치(Failover)에 걸리는 시간</span><span class="sxs-lookup"><span data-stu-id="09359-163">Time taken for failover</span></span>

<span data-ttu-id="09359-164">경우에 따라 가상 컴퓨터의 장애 조치(failover)에는 추가적인 중간 단계가 필요하며 일반적으로 완료하는 데 8 ~ 10분 정도가 소요됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-164">In certain cases, failover of virtual machines requires an extra intermediate step that usually takes around 8  to 10 minutes to complete.</span></span> <span data-ttu-id="09359-165">여기에 해당하는 경우는 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-165">These cases are as following:</span></span>

* <span data-ttu-id="09359-166">9.8 이전의 모바일 서비스 버전을 사용하는 VMware 가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="09359-166">VMware virtual machines using a version of the Mobility service older than 9.8</span></span>
* <span data-ttu-id="09359-167">물리적 서버</span><span class="sxs-lookup"><span data-stu-id="09359-167">Physical servers</span></span>
* <span data-ttu-id="09359-168">VMware Linux 가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="09359-168">VMware Linux virtual machines</span></span>
* <span data-ttu-id="09359-169">물리적 서버로 보호되는 Hyper-V 가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="09359-169">Hyper-V virtual machines protected as physical servers</span></span>
* <span data-ttu-id="09359-170">다음 드라이버가 부팅 드라이버로 제공되지 않는 VMware 가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="09359-170">VMware virtual machines where following drivers are not present as boot drivers</span></span>
    * <span data-ttu-id="09359-171">storvsc</span><span class="sxs-lookup"><span data-stu-id="09359-171">storvsc</span></span>
    * <span data-ttu-id="09359-172">vmbus</span><span class="sxs-lookup"><span data-stu-id="09359-172">vmbus</span></span>
    * <span data-ttu-id="09359-173">storflt</span><span class="sxs-lookup"><span data-stu-id="09359-173">storflt</span></span>
    * <span data-ttu-id="09359-174">intelide</span><span class="sxs-lookup"><span data-stu-id="09359-174">intelide</span></span>
    * <span data-ttu-id="09359-175">atapi</span><span class="sxs-lookup"><span data-stu-id="09359-175">atapi</span></span>
* <span data-ttu-id="09359-176">DHCP 또는 고정 IP 주소 사용 여부와 관계없이 DHCP 서비스를 사용할 수 없는 VMware 가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="09359-176">VMware virtual machines that don't have DHCP service enabled irrespective of whether they are using DHCP or static IP addresses</span></span>

<span data-ttu-id="09359-177">다른 모든 경우에는 이러한 중간 단계가 필요하지 않으며 장애 조치(failover)에 소요되는 시간이 훨씬 짧습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-177">In all the other cases this intermediate step is not required and the time taken for the failover is significantly lower.</span></span>


## <a name="creating-a-network-for-test-failover"></a><span data-ttu-id="09359-178">테스트 장애 조치(Failover)를 위한 네트워크 만들기</span><span class="sxs-lookup"><span data-stu-id="09359-178">Creating a network for test failover</span></span>
<span data-ttu-id="09359-179">테스트 장애 조치(Failover)를 수행할 때 가상 컴퓨터의 **계산 및 네트워크** 설정에서 입력한 프로덕션 복구 사이트 네트워크와 격리된 네트워크를 선택하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-179">It is recommended that when you are doing a test failover you choose a network that is isolated from your production recovery site network that you provided in **Compute and Network** settings for the virtual machine.</span></span> <span data-ttu-id="09359-180">사용자가 만드는 Azure 가상 네트워크는 기본적으로 다른 네트워크와 격리됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-180">By default when you create an Azure virtual network, it is isolated from other networks.</span></span> <span data-ttu-id="09359-181">이 네트워크는 프로덕션 네트워크와 비슷해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-181">This network should mimic your production network:</span></span>

1. <span data-ttu-id="09359-182">테스트 네트워크는 프로덕션 네트워크와 서브넷 수가 같아야 하고 프로덕션 네트워크의 서브넷과 이름이 같아야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-182">Test network should have same number of subnets as that in your production network and with the same name as those of the subnets in your production network.</span></span>
1. <span data-ttu-id="09359-183">테스트 네트워크는 프로덕션 네트워크와 동일한 IP 범위를 사용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-183">Test network should use the same IP range as that of your production network.</span></span>
1. <span data-ttu-id="09359-184">테스트 네트워크의 DNS를 **계산 및 네트워크** 설정에서 DNS 가상 컴퓨터의 대상 IP로 제공한 IP로 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-184">Update the DNS of the Test Network as the IP that you gave as target IP for the DNS virtual machine under **Compute and Network** settings.</span></span> <span data-ttu-id="09359-185">자세한 내용은 [Active Directory의 테스트 장애 조치(failover) 시 고려 사항](site-recovery-active-directory.md#test-failover-considerations) 섹션을 살펴보세요.</span><span class="sxs-lookup"><span data-stu-id="09359-185">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>


## <a name="test-failover-to-a-production-network-on-recovery-site"></a><span data-ttu-id="09359-186">복구 사이트의 프로덕션 네트워크로 테스트 장애 조치(failover)</span><span class="sxs-lookup"><span data-stu-id="09359-186">Test failover to a production network on recovery site</span></span>
<span data-ttu-id="09359-187">테스트 장애 조치(Failover)를 수행할 때 가상 컴퓨터의 **계산 및 네트워크** 설정에서 입력한 프로덕션 복구 사이트 네트워크와 다른 네트워크를 선택하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-187">It is recommended that when you are doing a test failover you choose a network that is different from your production recovery site network that you provided in **Compute and Network** settings for the virtual machine.</span></span> <span data-ttu-id="09359-188">그러나 장애 조치된 가상 컴퓨터에서 종단 간 네트워크 연결의 유효성을 실제로 검사하려는 경우 다음 사항에 유의하세요.</span><span class="sxs-lookup"><span data-stu-id="09359-188">But if you really want to validate end to end network connectivity in a failed over virtual machine, note the following points:</span></span>

1. <span data-ttu-id="09359-189">테스트 장애 조치(failover)를 수행할 때 기본 가상 컴퓨터를 종료합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-189">Make sure that the primary virtual machine is shutdown when you are doing the test failover.</span></span> <span data-ttu-id="09359-190">이렇게 하지 않으면 ID가 동일한 두 가상 컴퓨터가 동일한 네트워크에서 동시에 실행되므로 원치 않는 결과가 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-190">If you don't do so, there will be two virtual machines with the same identity running in the same network at the same time and that can lead to undesired consequences.</span></span>
1. <span data-ttu-id="09359-191">테스트 장애 조치(failover) 가상 컴퓨터에 수행하는 모든 변경 내용은 테스트 장애 조치(failover) 가상 컴퓨터를 정리할 때 손실됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-191">Any changes that you make into the test failover virtual machines would be lost when you cleanup the test failover virtual machines.</span></span> <span data-ttu-id="09359-192">이러한 변경 내용은 기본 가상 컴퓨터에 다시 복제되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-192">These changes will not be replicated back to the primary virtual machine.</span></span>
1. <span data-ttu-id="09359-193">이러한 방법으로 테스트를 수행하면 프로덕션 응용 프로그램이 가동 중지되는 결과를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="09359-193">This way of doing testing leads to a downtime of your production application.</span></span> <span data-ttu-id="09359-194">DR(재해 복구) 훈련이 진행 중인 동안에는 응용 프로그램을 사용하지 않도록 응용 프로그램 사용자에게 알려야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-194">Users of the application should be asked to not use the application when the DR drill is in progress.</span></span>  



## <a name="prepare-active-directory-and-dns"></a><span data-ttu-id="09359-195">Active Directory 및 DNS 준비</span><span class="sxs-lookup"><span data-stu-id="09359-195">Prepare Active Directory and DNS</span></span>
<span data-ttu-id="09359-196">응용프로그램 테스트를 위해 테스트 장애 조치를 실행하려면 테스트 환경에서 프로덕션 Active Directory 환경의 복사본이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-196">To run a test failover for application testing, you need a copy of the production Active Directory environment in your test environment.</span></span> <span data-ttu-id="09359-197">자세한 내용은 [Active Directory의 테스트 장애 조치(failover) 시 고려 사항](site-recovery-active-directory.md#test-failover-considerations) 섹션을 살펴보세요.</span><span class="sxs-lookup"><span data-stu-id="09359-197">Go through [test failover considerations for active directory](site-recovery-active-directory.md#test-failover-considerations) section for more details.</span></span>

## <a name="prepare-to-connect-to-azure-vms-after-failover"></a><span data-ttu-id="09359-198">장애 조치(Failover) 후 Azure VM에 연결할 준비</span><span class="sxs-lookup"><span data-stu-id="09359-198">Prepare to connect to Azure VMs after failover</span></span>

<span data-ttu-id="09359-199">장애 조치(failover) 후 RDP를 사용하여 Azure VM에 연결하려면 표에 요약된 작업을 수행해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-199">If you want to connect to Azure VMs using RDP after failover, make sure you do the actions summarized in the table.</span></span>

<span data-ttu-id="09359-200">**장애 조치(Failover)**</span><span class="sxs-lookup"><span data-stu-id="09359-200">**Failover**</span></span> | <span data-ttu-id="09359-201">**위치**:</span><span class="sxs-lookup"><span data-stu-id="09359-201">**Location**</span></span> | <span data-ttu-id="09359-202">**actions**</span><span class="sxs-lookup"><span data-stu-id="09359-202">**Actions**</span></span>
--- | --- | ---
<span data-ttu-id="09359-203">**Windows를 실행하는 Azure VM**</span><span class="sxs-lookup"><span data-stu-id="09359-203">**Azure VM running Windows**</span></span> | <span data-ttu-id="09359-204">장애 조치(failover) 전에 온-프레미스 컴퓨터에서</span><span class="sxs-lookup"><span data-stu-id="09359-204">On on-premises machine before failover</span></span> | <span data-ttu-id="09359-205">인터넷을 통해 Azure VM에 액세스하려면 RDP를 활성화하고, TCP 및 UDP 규칙이 **공용**에 추가되었는지 그리고 **Windows 방화벽** > **허용되는 앱**에서 모든 프로필에 대해 RDP가 허용되는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-205">To access the Azure VM over the internet, enable RDP, make sure TCP, and UDP rules are added for the **Public**, and that RDP is allowed in **Windows Firewall** > **Allowed Apps**, for all profiles.</span></span><br/><br/> <span data-ttu-id="09359-206">사이트 간 연결을 통해 액세스하려면 컴퓨터에서 RDP를 활성화하고, **도메인 및 개인** 네트워크의 **Windows 방화벽** -> **허용되는 앱 및 기능**에서 RDP를 허용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-206">To access over a site-to-site connection, enable RDP on the machine, and ensure that RDP is allowed in the **Windows Firewall** -> **Allowed apps and features** for **Domain and Private** networks.</span></span><br/><br/>  <span data-ttu-id="09359-207">운영 체제의 SAN 정책이 **OnlineAll**로 설정되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-207">Make sure the operating system's SAN policy is set to **OnlineAll**.</span></span> <span data-ttu-id="09359-208">[자세히 알아보세요](https://support.microsoft.com/kb/3031135)을 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="09359-208">[Learn more](https://support.microsoft.com/kb/3031135).</span></span><br/><br/> <span data-ttu-id="09359-209">장애 조치를 트리거할 때 가상 컴퓨터에 보류 중인 Windows 업데이트가 없는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-209">Make sure there are no Windows updates pending on the virtual machine when you trigger a failover.</span></span> <span data-ttu-id="09359-210">장애 조치 시 Windows 업데이트가 시작될 수 있으며, 업데이트를 완료할 때까지 가상 컴퓨터에 로그인할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-210">Windows update might start when you failover and you will not be able to login to the virtual machine until the update completes.</span></span> <br/><br/>
<span data-ttu-id="09359-211">**Windows를 실행하는 Azure VM**</span><span class="sxs-lookup"><span data-stu-id="09359-211">**Azure VM running Windows**</span></span> | <span data-ttu-id="09359-212">장애 조치(failover) 후 Azure VM에서</span><span class="sxs-lookup"><span data-stu-id="09359-212">On Azure VM after failover</span></span> | <span data-ttu-id="09359-213">클래식 가상 컴퓨터의 경우 RDP 프로토콜(3389 포트)에 대한 [공용 끝점을 추가](../virtual-machines/windows/classic/setup-endpoints.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-213">For a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) for the RDP protocol (port 3389)</span></span><br/><br/>  <span data-ttu-id="09359-214">Resource Manager 가상 컴퓨터의 경우 [공용 IP를 추가](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine)합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-214">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="09359-215">장애 조치된 VM 및 해당 VM이 연결된 Azure 서브넷에 대한 네트워크 보안 그룹 규칙에서 RDP 포트로 들어오는 연결을 허용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-215">The network security group rules on the failed over VM, and the Azure subnet to which it is connected, need to allow incoming connections to the RDP port.</span></span><br/><br/> <span data-ttu-id="09359-216">Resource Manager 가상 컴퓨터의 경우 **부트 진단**을 선택하여 가상 컴퓨터의 스크린샷을 살펴볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-216">For a Resource Manager virtual machine, you can check **Boot diagnostics** to look at a screenshot of the virtual machine</span></span><br/><br/> <span data-ttu-id="09359-217">연결할 수 없는 경우 VM이 실행 중인지 확인한 다음 해당 [문제 해결 팁](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx)(영문)을 살펴봅니다.</span><span class="sxs-lookup"><span data-stu-id="09359-217">If you can't connect, check that the VM is running and then look at these [troubleshooting tips](http://social.technet.microsoft.com/wiki/contents/articles/31666.troubleshooting-remote-desktop-connection-after-failover-using-asr.aspx).</span></span><br/><br/>
<span data-ttu-id="09359-218">**Linux를 실행하는 Azure VM**</span><span class="sxs-lookup"><span data-stu-id="09359-218">**Azure VM running Linux**</span></span> | <span data-ttu-id="09359-219">장애 조치(failover) 전에 온-프레미스 컴퓨터에서</span><span class="sxs-lookup"><span data-stu-id="09359-219">On on-premises machine before failover</span></span> | <span data-ttu-id="09359-220">Azure VM의 보안 셸 서비스가 시스템 부팅 시 자동으로 시작되도록 설정되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-220">Ensure that the Secure Shell service on the Azure VM is set to start automatically on system boot.</span></span><br/><br/> <span data-ttu-id="09359-221">방화벽 규칙이 SSH 연결을 허용하는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-221">Check that firewall rules allow an SSH connection to it.</span></span>
<span data-ttu-id="09359-222">**Linux를 실행하는 Azure VM**</span><span class="sxs-lookup"><span data-stu-id="09359-222">**Azure VM running Linux**</span></span> | <span data-ttu-id="09359-223">장애 조치(failover) 후 Azure VM</span><span class="sxs-lookup"><span data-stu-id="09359-223">Azure VM after failover</span></span> | <span data-ttu-id="09359-224">장애 조치(Failover)된 VM 그리고 해당 VM이 연결된 Azure 서브넷의 네트워크 보안 그룹 규칙이 SSH 포트로 들어오는 연결을 허용해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-224">The network security group rules on the failed over VM, and the Azure subnet to which it is connected, need to allow incoming connections to the SSH port.</span></span><br/><br/> <span data-ttu-id="09359-225">클래식 가상 컴퓨터의 경우 SSH 포트(기본적으로 22 TCP 포트)에서 들어오는 연결을 허용하려면 [공용 끝점을 추가](../virtual-machines/windows/classic/setup-endpoints.md)해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-225">For  a classic virtual machine, [add a public endpoint](../virtual-machines/windows/classic/setup-endpoints.md) should be created, to allow incoming connections on the SSH port (TCP port 22 by default).</span></span><br/><br/> <span data-ttu-id="09359-226">Resource Manager 가상 컴퓨터의 경우 [공용 IP를 추가](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine)합니다.</span><span class="sxs-lookup"><span data-stu-id="09359-226">For a Resource Manager virtual machine, [add a public IP](site-recovery-monitoring-and-troubleshooting.md#adding-a-public-ip-on-a-resource-manager-virtual-machine) on it.</span></span><br/><br/> <span data-ttu-id="09359-227">Resource Manager 가상 컴퓨터의 경우 **부트 진단**을 선택하여 가상 컴퓨터의 스크린샷을 살펴볼 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="09359-227">For a Resource Manager virtual machine, you can check **Boot diagnostics** to look at a screenshot of the virtual machine</span></span><br/><br/>



## <a name="next-steps"></a><span data-ttu-id="09359-228">다음 단계</span><span class="sxs-lookup"><span data-stu-id="09359-228">Next steps</span></span>
<span data-ttu-id="09359-229">테스트 장애 조치(failover)를 성공적으로 수행한 후에는 [장애 조치](site-recovery-failover.md)(failover)를 수행해도 됩니다.</span><span class="sxs-lookup"><span data-stu-id="09359-229">Once you have successfully tried a test failover you can try doing a [failover](site-recovery-failover.md).</span></span>
