---
title: "사이트 복구에서 Hyper-v 복제 tooAzure 작업을 수행 하는 aaaHow? | Microsoft Docs"
description: "이 문서에서는 Azure Site Recovery에서 Hyper-V 복제가 어떻게 작동하는지에 대한 개요를 제공합니다."
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: jwhit
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/14/2017
ms.author: raynew
ROBOTS: NOINDEX, NOFOLLOW
redirect_url: site-recovery-architecture-hyper-v-to-azure
ms.openlocfilehash: e982806b4d6cdec2f71f82d8c73c17cc50ad3c33
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="how-does-hyper-v-replication-tooazure-work"></a><span data-ttu-id="f51d8-104">Hyper-v 복제 tooAzure 어떻게 작동 합니까?</span><span class="sxs-lookup"><span data-stu-id="f51d8-104">How does Hyper-V replication tooAzure work?</span></span>

<span data-ttu-id="f51d8-105">이 문서 toounderstand hello 아키텍처 및 Hyper-v 복제 tooAzure hello를 사용 하 여에 대 한 워크플로 읽은 [Azure Site Recovery](site-recovery-overview.md) 서비스입니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-105">Read this article toounderstand hello architecture and workflows for Hyper-V replication tooAzure using hello [Azure Site Recovery](site-recovery-overview.md) service.</span></span>

<span data-ttu-id="f51d8-106">Hello 또는이 문서의 hello 맨 아래에 모든 메모를 게시 [Azure 복구 서비스 포럼](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr)합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-106">Post any comments at hello bottom of this article, or in hello [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>

<span data-ttu-id="f51d8-107">Hello tooAzure 다음 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-107">You can replicate hello following tooAzure:</span></span>
- <span data-ttu-id="f51d8-108">**Hyper-V(VMM 포함)**: System Center VMM(Virtual Machine Manager) 클라우드에서 관리되는 온-프레미스 Hyper-V 호스트에 있는 VM.</span><span class="sxs-lookup"><span data-stu-id="f51d8-108">**Hyper-V with VMM**: VMs located on on-premises Hyper-V hosts managed in  System Center Virtual MAchine Manager (VMM) clouds.</span></span> <span data-ttu-id="f51d8-109">[지원 되는 운영 체제](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers)에서 실행할 수 있는 호스트.</span><span class="sxs-lookup"><span data-stu-id="f51d8-109">Hosts can be running any [supported operating system](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers).</span></span> <span data-ttu-id="f51d8-110">[Hyper-V 및 Azure에서 지원하는](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows) 게스트 운영 체제를 실행하는 Hyper-V VM을 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-110">You can replicate Hyper-V VMs running any guest operating system [supported by Hyper-V and Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span></span>
- <span data-ttu-id="f51d8-111">**Hyper-V(VMM 없음)**: VMM 클라우드에서 관리되지 않는 Hyper-V 호스트에 있는 온-프레미스 VM.</span><span class="sxs-lookup"><span data-stu-id="f51d8-111">**Hyper-V without VMM**: On-premises VMs located on Hyper-V hosts that aren't managed in VMM clouds.</span></span> <span data-ttu-id="f51d8-112">호스트에 hello를 실행할 수 [지원 되는 운영 체제](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions)합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-112">Hosts can run any of hello [supported operating systems](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions).</span></span> <span data-ttu-id="f51d8-113">[Hyper-V 및 Azure에서 지원하는](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows) 게스트 운영 체제를 실행하는 Hyper-V VM을 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-113">You can replicate Hyper-V VMs running any guest operating system [supported by Hyper-V and Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span></span>


## <a name="architectural-components"></a><span data-ttu-id="f51d8-114">아키텍처 구성 요소</span><span class="sxs-lookup"><span data-stu-id="f51d8-114">Architectural components</span></span>

<span data-ttu-id="f51d8-115">**영역**</span><span class="sxs-lookup"><span data-stu-id="f51d8-115">**Area**</span></span> | <span data-ttu-id="f51d8-116">**구성 요소**</span><span class="sxs-lookup"><span data-stu-id="f51d8-116">**Component**</span></span> | <span data-ttu-id="f51d8-117">**세부 정보**</span><span class="sxs-lookup"><span data-stu-id="f51d8-117">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="f51d8-118">**Azure**</span><span class="sxs-lookup"><span data-stu-id="f51d8-118">**Azure**</span></span> | <span data-ttu-id="f51d8-119">Azure에서는 Microsoft Azure 계정, Azure Storage 계정 및 Azure 네트워크가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-119">In Azure you need a Microsoft Azure account, an Azure storage account, and a Azure network.</span></span> | <span data-ttu-id="f51d8-120">저장소 및 네트워크는 Resource Manager 기반 계정 또는 기존 계정일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-120">Storage and network can be Resource Manager-based, or classic accounts.</span></span><br/><br/> <span data-ttu-id="f51d8-121">복제 된 데이터는 hello 저장소 계정에 저장 하 고 Azure Vm이 온-프레미스 사이트에서 장애 조치 발생 시 hello 복제 된 데이터와 함께 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-121">Replicated data is stored in hello storage account, and Azure VMs are created with hello replicated data when failover from your on-premises site occurs.</span></span><br/><br/> <span data-ttu-id="f51d8-122">Azure Vm hello 처음 만들어질 때 toohello Azure 가상 네트워크를 연결 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-122">hello Azure VMs connect toohello Azure virtual network when they're created.</span></span>
<span data-ttu-id="f51d8-123">**VMM 서버**</span><span class="sxs-lookup"><span data-stu-id="f51d8-123">**VMM server**</span></span> | <span data-ttu-id="f51d8-124">VMM 클라우드에 있는 Hyper-V 호스트</span><span class="sxs-lookup"><span data-stu-id="f51d8-124">Hyper-V hosts located in VMM clouds</span></span> | <span data-ttu-id="f51d8-125">VMM 클라우드에서 Hyper-v 호스트를 관리 하는 경우에 hello 복구 서비스 자격 증명 모음에 hello VMM 서버를 등록 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-125">If Hyper-V hosts are managed in VMM clouds, you register hello VMM server in hello Recovery Services vault.</span></span><br/><br/> <span data-ttu-id="f51d8-126">Hello VMM 서버의 azure hello Site Recovery Provider tooorchestrate 복제를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-126">On hello VMM server you install hello Site Recovery Provider tooorchestrate replication with Azure.</span></span><br/><br/> <span data-ttu-id="f51d8-127">논리 및 VM 네트워크가 tooconfigure 네트워크 매핑을 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-127">You need logical and VM networks set up tooconfigure network mapping.</span></span> <span data-ttu-id="f51d8-128">VM 네트워크는 hello 클라우드와 연결 된 논리 네트워크를 연결 된 tooa 이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-128">A VM network should be linked tooa logical network that's associated with hello cloud.</span></span>
<span data-ttu-id="f51d8-129">**Hyper-V 호스트**</span><span class="sxs-lookup"><span data-stu-id="f51d8-129">**Hyper-V host**</span></span> | <span data-ttu-id="f51d8-130">Hyper-V 서버는 VMM 서버를 사용하거나 사용하지 않고 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-130">Hyper-V servers can be deployed with or without VMM server.</span></span> | <span data-ttu-id="f51d8-131">VMM 서버가 없는 경우 사이트 복구 공급자를 통해 Site Recovery와 hello 호스트 tooorchestrate 복제에 설치 되어 hello 인터넷 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-131">If there's no VMM server, hello Site Recovery Provider is installed on hello host tooorchestrate replication with Site Recovery over hello internet.</span></span> <span data-ttu-id="f51d8-132">VMM 서버인 경우 hello 공급자가 설치 되어 있는지, 및 hello 호스트에 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-132">If there's a VMM server, hello Provider is installed on it, and not on hello host.</span></span><br/><br/> <span data-ttu-id="f51d8-133">hello 호스트 toohandle 데이터 복제에 hello 복구 서비스 에이전트가 설치 되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-133">hello Recovery Services agent is installed on hello host toohandle data replication.</span></span><br/><br/> <span data-ttu-id="f51d8-134">Hello 공급자 및 hello 에이전트 모두의 통신을 안전 하 고 암호화 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-134">Communications from both hello Provider and hello agent are secure and encrypted.</span></span> <span data-ttu-id="f51d8-135">Azure 저장소에 복제된 데이터도 암호화됩니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-135">Replicated data in Azure storage is also encrypted.</span></span>
<span data-ttu-id="f51d8-136">**Hyper-V VM**</span><span class="sxs-lookup"><span data-stu-id="f51d8-136">**Hyper-V VMs**</span></span> | <span data-ttu-id="f51d8-137">Hello Hyper-v 호스트 서버에서 Vm을 하나 이상 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-137">You need one or more VMs on hello Hyper-V host server.</span></span> | <span data-ttu-id="f51d8-138">Vm에 설치 된 tooexplicitly 필요 없습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-138">Nothing needs tooexplicitly installed on VMs</span></span>

## <a name="deployment-steps"></a><span data-ttu-id="f51d8-139">배포 단계</span><span class="sxs-lookup"><span data-stu-id="f51d8-139">Deployment steps</span></span>

1. <span data-ttu-id="f51d8-140">**Azure**: Azure 구성 요소 hello를 설정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-140">**Azure**: You set up hello Azure components.</span></span> <span data-ttu-id="f51d8-141">Site Recovery 배포를 시작하기 전에 저장소 및 네트워크 계정을 설정하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-141">We recommend you set up storage and network accounts before you begin Site Recovery deployment.</span></span>
2. <span data-ttu-id="f51d8-142">**자격 증명 모음**: Site Recovery에 대한 Recovery Services 자격 증명 모음을 만들고 원본 및 대상 설정 구성, 복제 정책 설정 및 복제 활성화를 포함하는 자격 증명 모음 설정을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-142">**Vault**: You create a Recovery Services vault for Site Recovery, and configure vault settings, including configuring source and target settings, setting up a replication policy, and enabling replication.</span></span>
3. <span data-ttu-id="f51d8-143">**원본 및 대상**:</span><span class="sxs-lookup"><span data-stu-id="f51d8-143">**Source and target**:</span></span>
    - <span data-ttu-id="f51d8-144">**VMM 클라우드에서 Hyper-v 호스트**: 소스 설정 지정의 일부로 다운로드 하 고이 hello VMM 서버와 각 Hyper-v 호스트에서 hello Azure 복구 서비스 에이전트에서 hello Azure Site Recovery Provider를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-144">**Hyper-V hosts in VMM clouds**: As part of specifying source settings, you download and install hello Azure Site Recovery Provider on hello VMM server, and hello Azure Recovery Services agent on each Hyper-V host.</span></span> <span data-ttu-id="f51d8-145">hello 원본 VMM 서버 hello 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-145">hello source will be hello VMM server.</span></span> <span data-ttu-id="f51d8-146">hello 대상이 Azure입니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-146">hello target is Azure.</span></span>
    - <span data-ttu-id="f51d8-147">Hyper-v 호스트가 VMM 없이: 소스 설정을 지정 하면 다운로드 해 서 각 Hyper-v 호스트에 hello 공급자 및 에이전트를 설치 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-147">Hyper-V hosts without VMM: When you specify source settings, you download and install hello Provider and agent on each Hyper-V host.</span></span> <span data-ttu-id="f51d8-148">배포 하는 동안 hello 호스트 하이퍼-V 사이트에 모으고이 사이트 hello 원본으로 지정 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-148">During deployment you gather hello hosts into a Hyper-V site, and specify this site as hello source.</span></span> <span data-ttu-id="f51d8-149">hello 대상이 Azure입니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-149">hello target is Azure.</span></span>

    <span data-ttu-id="f51d8-150">![하이퍼-V/v m M 복제 tooAzure](./media/site-recovery-components/arch-onprem-onprem-azure-vmm.png) ![하이퍼-V 사이트 복제 tooAzure](./media/site-recovery-components/arch-onprem-azure-hypervsite.png)</span><span class="sxs-lookup"><span data-stu-id="f51d8-150">![Hyper-V/VMM replication tooAzure](./media/site-recovery-components/arch-onprem-onprem-azure-vmm.png) ![Hyper-V site replication tooAzure](./media/site-recovery-components/arch-onprem-azure-hypervsite.png)</span></span>


4. <span data-ttu-id="f51d8-151">**복제 정책**: hello 하이퍼-V 사이트 또는 VMM 클라우드에 대 한 복제 정책을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-151">**Replication policy**: You create a replication policy for hello Hyper-V site or VMM cloud.</span></span> <span data-ttu-id="f51d8-152">hello 정책이 적용 된 tooall Vm의 hello 사이트 또는 클라우드 호스트에 있는입니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-152">hello policy is applied tooall VMs located on hosts in hello site or cloud.</span></span>
5. <span data-ttu-id="f51d8-153">**복제 활성화**: Hyper-V VM에 대한 복제를 활성화합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-153">**Enable replication**: You enable replication for Hyper-V VMs.</span></span> <span data-ttu-id="f51d8-154">초기 복제 hello 복제 정책 설정에 따라 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-154">Initial replication occurs in accordance with hello replication policy settings.</span></span> <span data-ttu-id="f51d8-155">데이터 변경 내용을 추적 하 고 hello 초기 복제가 완료 된 후에 델타 변경 내용 tooAzure의 복제 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-155">Data changes are tracked, and replication of delta changes tooAzure begins after hello initial replication finishes.</span></span> <span data-ttu-id="f51d8-156">.hrl 파일에는 항목에 대한 추적된 변경 내용이 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-156">Tracked changes for an item are held in a .hrl file.</span></span>
6. <span data-ttu-id="f51d8-157">**테스트 장애 조치**: 모든 것이 예상 대로 작동 하는지 테스트 장애 조치 toomake를 실행 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-157">**Test failover**:  You run a test failover toomake sure everything's working as expected.</span></span>

<span data-ttu-id="f51d8-158">배포에 대해 자세히 알아보세요.</span><span class="sxs-lookup"><span data-stu-id="f51d8-158">Learn more about deployment:</span></span>
- [<span data-ttu-id="f51d8-159">VMM과 Hyper-v VM 복제 tooAzure-시작</span><span class="sxs-lookup"><span data-stu-id="f51d8-159">Get started with Hyper-V VM replication tooAzure - with VMM</span></span>](site-recovery-vmm-to-azure.md)
- [<span data-ttu-id="f51d8-160">Hyper-v VM 복제 tooAzure-VMM 하지 않고 시작</span><span class="sxs-lookup"><span data-stu-id="f51d8-160">Get started with Hyper-V VM replication tooAzure - without VMM</span></span>](site-recovery-hyper-v-site-to-azure.md)

## <a name="hyper-v-replication-workflow"></a><span data-ttu-id="f51d8-161">Hyper-V 복제 워크플로</span><span class="sxs-lookup"><span data-stu-id="f51d8-161">Hyper-V replication workflow</span></span>

### <a name="enable-protection"></a><span data-ttu-id="f51d8-162">보호 사용</span><span class="sxs-lookup"><span data-stu-id="f51d8-162">Enable protection</span></span>

1. <span data-ttu-id="f51d8-163">Hyper-v VM에 대 한 보호를 사용 하도록 설정한 후 hello에 Azure 포털 또는 온-프레미스, hello **보호 사용** 시작 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-163">After you enable protection for a Hyper-V VM, in hello Azure portal or on-premises, hello **Enable protection** starts.</span></span>
2. <span data-ttu-id="f51d8-164">hello 작업 확인 hello를 호출 하기 전에 해당 hello 컴퓨터 필수 구성 요소를 준수 [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx)를 구성 하는 hello 설정 사용 하 여 복제를 tooset 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-164">hello job checks that hello machine complies with prerequisites, before invoking hello [CreateReplicationRelationship](https://msdn.microsoft.com/library/hh850036.aspx), tooset up replication with hello settings you've configured.</span></span>
3. <span data-ttu-id="f51d8-165">hello 작업이 hello를 호출 하 여 초기 복제 시작 [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) 메서드와 tooinitialize 전체 VM 복제를 송신 hello VM의 가상 디스크 tooAzure 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-165">hello job starts initial replication by invoking hello [StartReplication](https://msdn.microsoft.com/library/hh850303.aspx) method, tooinitialize a full VM replication, and send hello VM's virtual disks tooAzure.</span></span>
4. <span data-ttu-id="f51d8-166">Hello에 hello 작업을 모니터링할 수 있습니다 **작업** 탭 합니다.      ![작업 목록](media/site-recovery-hyper-v-azure-architecture/image1.png)![보호 드릴 다운 사용](media/site-recovery-hyper-v-azure-architecture/image2.png)</span><span class="sxs-lookup"><span data-stu-id="f51d8-166">You can monitor hello job in hello **Jobs** tab.      ![Jobs list](media/site-recovery-hyper-v-azure-architecture/image1.png) ![Enable protection drill down](media/site-recovery-hyper-v-azure-architecture/image2.png)</span></span>

### <a name="initial-replication"></a><span data-ttu-id="f51d8-167">초기 복제</span><span class="sxs-lookup"><span data-stu-id="f51d8-167">Initial replication</span></span>

1. <span data-ttu-id="f51d8-168">초기 복제가 트리거될 때 [Hyper-V VM 스냅숏](https://technet.microsoft.com/library/dd560637.aspx)이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-168">A [Hyper-V VM snapshot](https://technet.microsoft.com/library/dd560637.aspx) snapshot is taken when initial replication is triggered.</span></span>
2. <span data-ttu-id="f51d8-169">가상 하드 디스크 모두 복사한 tooAzure 하기가 하나씩 복제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-169">Virtual hard disks are replicated one by one until they're all copied tooAzure.</span></span> <span data-ttu-id="f51d8-170">Hello VM 크기에 따라 시간이 오래 걸릴 하 고 네트워크 대역폭을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-170">It could take a while, depending on hello VM size, and network bandwidth.</span></span> <span data-ttu-id="f51d8-171">toooptimize 네트워크 사용을 참조 [어떻게 toomanage 온-프레미스 tooAzure 보호 네트워크 대역폭 사용량](https://support.microsoft.com/kb/3056159)합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-171">toooptimize your network usage, see [How toomanage on-premises tooAzure protection network bandwidth usage](https://support.microsoft.com/kb/3056159).</span></span>
3. <span data-ttu-id="f51d8-172">초기 복제가 진행 중인 동안 디스크 변경 내용이 발생 한 경우 Hyper-v 복제본 복제 추적기 hello Hyper-v 복제 로그 (.hrl)으로 변경 된 내용을 추적 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-172">If disk changes occur while initial replication is in progress, hello Hyper-V Replica Replication Tracker tracks those changes as Hyper-V Replication Logs (.hrl).</span></span> <span data-ttu-id="f51d8-173">이러한 파일은 hello hello 디스크와 같은 폴더입니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-173">These files are located in hello same folder as hello disks.</span></span> <span data-ttu-id="f51d8-174">각 디스크 toosecondary 저장소를 전송 하는 관련된.hrl 파일을 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-174">Each disk has an associated .hrl file that will be sent toosecondary storage.</span></span>
4. <span data-ttu-id="f51d8-175">초기 복제가 진행 중인 동안 hello 스냅숏 및 로그 파일에서 디스크 리소스를 소비 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-175">hello snapshot and log files consume disk resources while initial replication is in progress.</span></span>
5. <span data-ttu-id="f51d8-176">Hello 초기 복제가 완료 되 면 hello VM 스냅숏이 삭제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-176">When hello initial replication finishes, hello VM snapshot is deleted.</span></span> <span data-ttu-id="f51d8-177">델타 디스크 hello 로그에 변경은 동기화 되거나 병합 된 toohello 부모 디스크입니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-177">Delta disk changes in hello log are synchronized and merged toohello parent disk.</span></span>


### <a name="finalize-protection"></a><span data-ttu-id="f51d8-178">보호 완료</span><span class="sxs-lookup"><span data-stu-id="f51d8-178">Finalize protection</span></span>

1. <span data-ttu-id="f51d8-179">Hello 초기 복제가 완료 되 면 hello **hello 가상 컴퓨터에 대 한 보호 완료** hello 가상 컴퓨터가 보호 되 고 있도록 작업 네트워크 및 기타 복제 후 설정을 구성 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-179">After hello initial replication finishes, hello **Finalize protection on hello virtual machine** job configures network and other post-replication settings, so that hello virtual machine is protected.</span></span>
    <span data-ttu-id="f51d8-180">![보호 작업 완료](media/site-recovery-hyper-v-azure-architecture/image3.png)</span><span class="sxs-lookup"><span data-stu-id="f51d8-180">![Finalize protection job](media/site-recovery-hyper-v-azure-architecture/image3.png)</span></span>
2. <span data-ttu-id="f51d8-181">TooAzure를 복제 하는 경우 장애 조치에 대해 준비 되도록 hello 가상 컴퓨터에 대 한 tootweak hello 설정을 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-181">If you're replicating tooAzure, you might need tootweak hello settings for hello virtual machine so that it's ready for failover.</span></span> <span data-ttu-id="f51d8-182">이 시점에서 모든 것이 예상 대로 작동 하는 테스트 장애 조치 toocheck를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-182">At this point you can run a test failover toocheck everything is working as expected.</span></span>

### <a name="delta-replication"></a><span data-ttu-id="f51d8-183">델타 복제</span><span class="sxs-lookup"><span data-stu-id="f51d8-183">Delta replication</span></span>

1. <span data-ttu-id="f51d8-184">Hello 초기 복제 후 델타 동기화가 시작 되, 복제 설정에 따라 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-184">After hello initial replication, delta synchronization begins, in accordance with replication settings.</span></span>
2. <span data-ttu-id="f51d8-185">Hyper-v 복제본 복제 추적기 hello.hrl 파일로 hello 변경 tooa 가상 하드 디스크를 추적합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-185">hello Hyper-V Replica Replication Tracker tracks hello changes tooa virtual hard disk as .hrl files.</span></span> <span data-ttu-id="f51d8-186">복제를 위해 구성된 각 디스크에는 연결된 .hrl 파일이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-186">Each disk that's configured for replication has an associated .hrl file.</span></span> <span data-ttu-id="f51d8-187">초기 복제가 완료 된 후이 로그 toohello 고객 저장소 계정을 보내집니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-187">This log is sent toohello customer's storage account after initial replication is complete.</span></span> <span data-ttu-id="f51d8-188">주 디스크 hello hello 변경 내용을 hello에 다른 로그 파일에서 추적 로그 전송 tooAzure 이면 동일한 디렉터리입니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-188">When a log is in transit tooAzure, hello changes in hello primary disk are tracked in another log file, in hello same directory.</span></span>
3. <span data-ttu-id="f51d8-189">초기 및 델타 복제 하는 동안 VM 보기 hello에 VM hello를 모니터링할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-189">During initial and delta replication, you can monitor hello VM in hello VM view.</span></span> <span data-ttu-id="f51d8-190">[자세히 알아봅니다](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span><span class="sxs-lookup"><span data-stu-id="f51d8-190">[Learn more](site-recovery-monitoring-and-troubleshooting.md#monitor-replication-health-for-virtual-machines).</span></span>  

### <a name="replication-synchronization"></a><span data-ttu-id="f51d8-191">복제 동기화</span><span class="sxs-lookup"><span data-stu-id="f51d8-191">Replication synchronization</span></span>

1. <span data-ttu-id="f51d8-192">델타 복제에 실패했고 전체 복제에는 대역폭이나 시간이 많이 소모될 경우 VM에서 다시 동기화가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-192">If delta replication fails, and a full replication would be costly in terms of bandwidth or time, then a VM is marked for resynchronization.</span></span> <span data-ttu-id="f51d8-193">예를 들어 hello.hrl 파일이 hello 디스크 크기의 50%에 도달 하는 경우 다음 hello VM 표시될지 다시 동기화에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-193">For example, if hello .hrl files reach 50% of hello disk size, then hello VM will be marked for resynchronization.</span></span>
2.  <span data-ttu-id="f51d8-194">다시 동기화 hello hello 소스 및 대상 가상 컴퓨터의 체크섬을 계산 하 고만 hello 델타 데이터를 보내는 여 보내지는 데이터 양을 최소화 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-194">Resynchronization minimizes hello amount of data sent by computing checksums of hello source and target virtual machines, and sending only hello delta data.</span></span> <span data-ttu-id="f51d8-195">다시 동기화는 고정 블록 청크 알고리즘을 사용하며 이 경우 원본 및 대상 파일이 고정 청크로 나누어집니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-195">Resynchronization uses a fixed-block chunking algorithm where source and target files are divided into fixed chunks.</span></span> <span data-ttu-id="f51d8-196">각 청크에 대 한 체크섬 생성 되 고 hello 소스 필요 toobe 적용 된 toohello 대상에서 차단 되 toodetermine와 비교 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-196">Checksums for each chunk are generated and then compared toodetermine which blocks from hello source need toobe applied toohello target.</span></span>
3. <span data-ttu-id="f51d8-197">다시 동기화를 마치면 일반 델타 복제가 다시 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-197">After resynchronization finishes, normal delta replication should resume.</span></span> <span data-ttu-id="f51d8-198">기본적으로 다시 동기화가 자동으로 근무 시간 외부 예약된 toorun 하지만 수동으로 가상 컴퓨터를 동기화 할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-198">By default resynchronization is scheduled toorun automatically outside office hours, but you can resynchronize a virtual machine manually.</span></span> <span data-ttu-id="f51d8-199">예를 들어 네트워크 중단 또는 다른 중단이 발생하면 다시 동기화를 다시 시작할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-199">For example, you can resume resynchronization if a network outage or another outage occurs.</span></span> <span data-ttu-id="f51d8-200">toodo hello 포털에서이 선택 hello VM > **다시 동기화**합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-200">toodo this, select hello VM in hello portal > **Resynchronize**.</span></span>

    ![수동 다시 동기화](media/site-recovery-hyper-v-azure-architecture/image4.png)


### <a name="retries"></a><span data-ttu-id="f51d8-202">다시 시도</span><span class="sxs-lookup"><span data-stu-id="f51d8-202">Retries</span></span>

<span data-ttu-id="f51d8-203">복제 오류가 발생한 경우 기본 제공 재시도가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-203">If a replication error occurs, there's a built-in retry.</span></span> <span data-ttu-id="f51d8-204">이 논리는 두 가지 범주로 분류할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-204">This logic can be classified into two categories:</span></span>

<span data-ttu-id="f51d8-205">**범주**</span><span class="sxs-lookup"><span data-stu-id="f51d8-205">**Category**</span></span> | <span data-ttu-id="f51d8-206">**세부 정보**</span><span class="sxs-lookup"><span data-stu-id="f51d8-206">**Details**</span></span>
--- | ---
<span data-ttu-id="f51d8-207">**복구할 수 없는 오류**</span><span class="sxs-lookup"><span data-stu-id="f51d8-207">**Non-recoverable errors**</span></span> | <span data-ttu-id="f51d8-208">재시도가 수행되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-208">No retry is attempted.</span></span> <span data-ttu-id="f51d8-209">VM 상태가 **위험**으로 표시되고 관리자 개입이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-209">VM status will be **Critical**, and administrator intervention is required.</span></span> <span data-ttu-id="f51d8-210">이러한 오류의 예로: VHD 체인; 분할 Hello 복제본 VM;에 대 한 잘못 된 상태 네트워크 인증 오류: 권한 부여 오류; VM (독립 실행형 Hyper-v 서버)에 대 한 오류를 찾을 수 없습니다</span><span class="sxs-lookup"><span data-stu-id="f51d8-210">Examples of these errors include: broken VHD chain; Invalid state for hello replica VM; Network authentication errors: authorization errors; VM not found errors (for standalone Hyper-V servers)</span></span>
<span data-ttu-id="f51d8-211">**복구할 수 있는 오류**</span><span class="sxs-lookup"><span data-stu-id="f51d8-211">**Recoverable errors**</span></span> | <span data-ttu-id="f51d8-212">다시 시도 횟수는 지 수 백오프 hello 다시 시도 간격에서 시작 하 여 1, 2, 4, 8, 첫 번째 시도 hello hello 및 10 분 증가 하는 사용 하 여 복제 간격 마다 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-212">Retries occur every replication interval, using an exponential back-off that increases hello retry interval from hello start of hello first attempt by 1, 2, 4, 8, and 10 minutes.</span></span> <span data-ttu-id="f51d8-213">오류가 계속되면 30분마다 다시 시도하십시오.</span><span class="sxs-lookup"><span data-stu-id="f51d8-213">If an error persists, retry every 30 minutes.</span></span> <span data-ttu-id="f51d8-214">이러한 예로는 네트워크 오류, 디스크 공간 부족, 메모리 부족 상태가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="f51d8-214">Examples include: network errors; low disk  errors; low memory conditions</span></span> |

## <a name="protection-and-recovery-lifecycle"></a><span data-ttu-id="f51d8-215">보호 및 복구 수명 주기</span><span class="sxs-lookup"><span data-stu-id="f51d8-215">Protection and recovery lifecycle</span></span>

![워크플로](./media/site-recovery-components/arch-hyperv-azure-workflow.png)

## <a name="next-steps"></a><span data-ttu-id="f51d8-217">다음 단계</span><span class="sxs-lookup"><span data-stu-id="f51d8-217">Next steps</span></span>

- [<span data-ttu-id="f51d8-218">배포 필수 조건 확인</span><span class="sxs-lookup"><span data-stu-id="f51d8-218">Check deployment prerequisites</span></span>](site-recovery-prereq.md)
- <span data-ttu-id="f51d8-219">문제 해결:</span><span class="sxs-lookup"><span data-stu-id="f51d8-219">Troubleshoot with:</span></span>
    - [<span data-ttu-id="f51d8-220">보호 모니터링 및 문제 해결</span><span class="sxs-lookup"><span data-stu-id="f51d8-220">Monitor and troubleshoot protection</span></span>](site-recovery-monitoring-and-troubleshooting.md)
    - [<span data-ttu-id="f51d8-221">Microsoft 지원의 도움</span><span class="sxs-lookup"><span data-stu-id="f51d8-221">Help from Microsoft support</span></span>](site-recovery-monitoring-and-troubleshooting.md#reach-out-for-microsoft-support)
    - [<span data-ttu-id="f51d8-222">일반적인 문제 및 해결 방법</span><span class="sxs-lookup"><span data-stu-id="f51d8-222">Common errors and resolutions</span></span>](site-recovery-monitoring-and-troubleshooting.md#common-azure-site-recovery-errors-and-their-resolutions)
