---
title: "Site Recovery가 작동하는 방식 | Microsoft Docs"
description: "이 문서는 사이트 복구 아키텍처의 개요를 제공합니다."
services: site-recovery
documentationcenter: 
author: rayne-wiselman
manager: jwhit
editor: 
ms.assetid: c413efcd-d750-4b22-b34b-15bcaa03934a
ms.service: site-recovery
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: get-started-article
ms.date: 06/14/2017
ms.author: raynew
ROBOTS: NOINDEX, NOFOLLOW
redirect_url: site-recovery-azure-to-azure-architecture
ms.openlocfilehash: e8faa2c7cde18fc08f0255e80f0acdb961082fcb
ms.sourcegitcommit: f537befafb079256fba0529ee554c034d73f36b0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 07/11/2017
---
# <a name="how-does-azure-site-recovery-work-for-on-premises-infrastructure"></a><span data-ttu-id="a3627-104">온-프레미스 인프라에 Azure Site Recovery가 작동하나요?</span><span class="sxs-lookup"><span data-stu-id="a3627-104">How does Azure Site Recovery work for on-premises infrastructure?</span></span>

> [!div class="op_single_selector"]
> * [<span data-ttu-id="a3627-105">Azure 가상 컴퓨터 복제</span><span class="sxs-lookup"><span data-stu-id="a3627-105">Replicate Azure virtual machines</span></span>](site-recovery-azure-to-azure-architecture.md)
> * [<span data-ttu-id="a3627-106">온-프레미스 컴퓨터 복제</span><span class="sxs-lookup"><span data-stu-id="a3627-106">Replicate on-premises machines</span></span>](site-recovery-components.md)

<span data-ttu-id="a3627-107">이 문서에서는 [Azure Site Recovery](site-recovery-overview.md) 서비스의 기본 아키텍처와 온-프레미스에서 Azure로 복제를 위해 이를 작동하게 하는 구성 요소에 대해 설명합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-107">This article describes underlying architecture of the [Azure Site Recovery](site-recovery-overview.md) service, and the components that make it work for replicating workloads from on-premises to Azure.</span></span>

<span data-ttu-id="a3627-108">이 문서의 하단 또는 [Azure Recovery Services 포럼](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr)에서 의견을 게시합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-108">Post any comments at the bottom of this article, or in the [Azure Recovery Services Forum](https://social.msdn.microsoft.com/forums/azure/home?forum=hypervrecovmgr).</span></span>


## <a name="replicate-to-azure"></a><span data-ttu-id="a3627-109">Azure에 복제</span><span class="sxs-lookup"><span data-stu-id="a3627-109">Replicate to Azure</span></span>

<span data-ttu-id="a3627-110">다음 온-프레미스 인프라에서 Azure로 복제 및 보호할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-110">You can replicate and protect the following on premises infrastructure to Azure:</span></span>

- <span data-ttu-id="a3627-111">**VMware**: [지원되는 호스트](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers)에서 실행되는 온-프레미스 VMware VM.</span><span class="sxs-lookup"><span data-stu-id="a3627-111">**VMware**: On-premises VMware VMs running on a [supported host](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers).</span></span> <span data-ttu-id="a3627-112">[지원되는 운영 체제](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions)에서 실행되는 VMware VM을 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-112">You can replicate VMware VMs running [supported operating systems](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions)</span></span>
- <span data-ttu-id="a3627-113">**Hyper-V**: [지원되는 호스트](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers)에서 실행되는 온-프레미스 Hyper-V VM.</span><span class="sxs-lookup"><span data-stu-id="a3627-113">**Hyper-V**: On-premises Hyper-V VMs running on [supported hosts](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers).</span></span>
- <span data-ttu-id="a3627-114">**물리적 컴퓨터**: [지원되는 운영 체제](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions)에서 Windows 또는 Linux를 실행하는 온-프레미스 물리적 서버.</span><span class="sxs-lookup"><span data-stu-id="a3627-114">**Physical machines**: On-premises physical servers running Windows or Linux on [supported operating systems](site-recovery-support-matrix-to-azure.md#support-for-replicated-machine-os-versions).</span></span> <span data-ttu-id="a3627-115">[Hyper-V 및 Azure에서 지원하는](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows) 게스트 운영 체제를 실행하는 Hyper-V VM을 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-115">You can replicate Hyper-V VMs running any guest operating system [supported by Hyper-V and Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span></span>

## <a name="vmware-to-azure"></a><span data-ttu-id="a3627-116">VMware에서 Azure로</span><span class="sxs-lookup"><span data-stu-id="a3627-116">VMware to Azure</span></span>

<span data-ttu-id="a3627-117">VMware VM을 Azure에 복제하는 데 필요한 사항은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-117">Here's what you need for replicating VMware VMs to Azure.</span></span>

<span data-ttu-id="a3627-118">영역</span><span class="sxs-lookup"><span data-stu-id="a3627-118">Area</span></span> | <span data-ttu-id="a3627-119">구성 요소</span><span class="sxs-lookup"><span data-stu-id="a3627-119">Component</span></span> | <span data-ttu-id="a3627-120">세부 정보</span><span class="sxs-lookup"><span data-stu-id="a3627-120">Details</span></span>
--- | --- | ---
<span data-ttu-id="a3627-121">**구성 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-121">**Configuration server**</span></span> | <span data-ttu-id="a3627-122">모든 온-프레미스 구성 요소(단일 관리 서버구성 서버, 프로세스 서버, 마스터 대상 서버)를 실행하는 단일 관리 서버(VMWare VM)</span><span class="sxs-lookup"><span data-stu-id="a3627-122">A single management server (VMWare VM) runs all on-premises components - configuration server, process server, master target server</span></span> | <span data-ttu-id="a3627-123">구성 서버는 온-프레미스와 Azure 간의 통신을 조정하여 데이터 복제를 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-123">The configuration server coordinates communications between on-premises and Azure, and manages data replication.</span></span>
 <span data-ttu-id="a3627-124">**프로세스 서버**:</span><span class="sxs-lookup"><span data-stu-id="a3627-124">**Process server**:</span></span>  | <span data-ttu-id="a3627-125">기본적으로 구성 서버에 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-125">Installed by default on the configuration server.</span></span> | <span data-ttu-id="a3627-126">복제 게이트웨이의 역할을 합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-126">Acts as a replication gateway.</span></span> <span data-ttu-id="a3627-127">복제 데이터를 수신하고 캐싱, 압축 및 암호화를 사용하여 최적화하며 복제 데이터를 Azure Storage로 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-127">Receives replication data, optimizes it with caching, compression, and encryption, and sends it to Azure storage.</span></span><br/><br/> <span data-ttu-id="a3627-128">또한 프로세스 서버는 보호되는 컴퓨터에서 모바일 서비스의 푸시 설치를 처리하며 VMware VM의 자동 복구를 수행합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-128">The process server also handles push installation of the Mobility service to protected machines, and performs automatic discovery of VMware VMs.</span></span><br/><br/> <span data-ttu-id="a3627-129">배포가 늘어나면 프로세스 서버로 실행하는 별도의 추가 전용 서버를 추가하여 증가하는 복제 트래픽을 처리할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-129">As your deployment grows you can add additional separate dedicated process servers to handle increasing volumes of replication traffic.</span></span>
 <span data-ttu-id="a3627-130">**마스터 대상 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-130">**Master target server**</span></span> | <span data-ttu-id="a3627-131">기본적으로 온-프레미스 구성 서버에 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-131">Installed by default on the on-premises configuration server.</span></span> | <span data-ttu-id="a3627-132">Azure에서 장애 복구 중에 복제 데이터를 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-132">Handles replication data during failback from Azure.</span></span><br/><br/> <span data-ttu-id="a3627-133">장애 복구 트래픽 볼륨이 높은 경우 장애 복구를 위해 별도 마스터 대상 서버를 배포할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-133">If volumes of failback traffic are high, you can deploy a separate master target server for failback.</span></span>
<span data-ttu-id="a3627-134">**VMware 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-134">**VMware servers**</span></span> | <span data-ttu-id="a3627-135">VMware VM은 vSphere ESXi 서버에서 호스트되며 호스트를 관리하는 vCenter 서버를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-135">VMware VMs are hosted on vSphere ESXi servers, and we recommend a vCenter server to manage the hosts.</span></span> | <span data-ttu-id="a3627-136">VMware 서버를 사용자의 Recovery Services 자격 증명 모음에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-136">You add VMware servers to your Recovery Services vault.</span></span><br/><br/>
<span data-ttu-id="a3627-137">**복제된 컴퓨터**</span><span class="sxs-lookup"><span data-stu-id="a3627-137">**Replicated machines**</span></span> | <span data-ttu-id="a3627-138">복제하려는 각 VMware VM에 모바일 서비스가 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-138">The Mobility service will be installed on each VMware VM you want to replicate.</span></span> <span data-ttu-id="a3627-139">각 컴퓨터에 수동으로 설치되거나 프로세스 서버에서 강제 설치로 설치될 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-139">It can be installed manually on each machine, or with a push installation from the process server.</span></span>| -

<span data-ttu-id="a3627-140">**그림 1: VMware에서 Azure 구성 요소로**</span><span class="sxs-lookup"><span data-stu-id="a3627-140">**Figure 1: VMware to Azure components**</span></span>

![구성 요소](./media/site-recovery-components/arch-enhanced.png)

### <a name="replication-process"></a><span data-ttu-id="a3627-142">복제 프로세스</span><span class="sxs-lookup"><span data-stu-id="a3627-142">Replication process</span></span>

1. <span data-ttu-id="a3627-143">Azure 구성 요소 및 Recovery Services 자격 증명 모음을 포함하여 배포를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-143">You set up the deployment, including Azure components, and a Recovery Services vault.</span></span> <span data-ttu-id="a3627-144">자격 증명 모음에서 복제 원본 및 대상을 지정하고 구성 서버를 설정하며 VMware 서버를 추가하고 복제 정책을 만들고 모바일 서비스를 배포하고 복제를 사용하도록 설정하며 테스트 장애 조치를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-144">In the vault you specify the replication source and target, set up the configuration server, add VMware servers, create a replication policy, deploy the Mobility service, enable replication, and run a test failover.</span></span>
2.  <span data-ttu-id="a3627-145">컴퓨터는 복제 정책에 따라 복제를 시작하고 데이터의 초기 복사본은 Azure Storage로 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-145">Machines start replicating in accordance with the replication policy, and an initial copy of the data is replicated to Azure storage.</span></span>
4. <span data-ttu-id="a3627-146">Azure에 대한 델타 변경 내용의 복제는 초기 복제가 완료된 후에 시작됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-146">Replication of delta changes to Azure begins after the initial replication finishes.</span></span> <span data-ttu-id="a3627-147">.hrl 파일에는 컴퓨터에 대한 추적된 변경 내용이 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-147">Tracked changes for a machine are held in a .hrl file.</span></span>
    - <span data-ttu-id="a3627-148">컴퓨터를 복제하는 작업은 복제 관리를 위해 HTTPS 443 인바운드 포트에 대한 구성 서버와 통신합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-148">Replicating machines communicate with the configuration server on port HTTPS 443 inbound, for replication management.</span></span>
    - <span data-ttu-id="a3627-149">컴퓨터를 복제하는 작업은 복제 데이터를 HTTPS 9443 인바운드 포트(구성될 수 있음)에 대한 프로세스 서버로 전달합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-149">Replicating machines send replication data to the process server on port HTTPS 9443 inbound (can be configured).</span></span>
    - <span data-ttu-id="a3627-150">구성 서버는 HTTPS 443 아웃바운드 포트를 통해 Azure를 사용하는 복제 관리를 오케스트레이션합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-150">The configuration server orchestrates replication management with Azure over port HTTPS 443 outbound.</span></span>
    - <span data-ttu-id="a3627-151">프로세스 서버가 원본 컴퓨터에서 데이터를 수신하고 이를 최적화 및 암호화하며 443 아웃바운드 포트를 통해 Azure Storage로 전송합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-151">The process server receives data from source machines, optimizes and encrypts it, and sends it to Azure storage over port 443 outbound.</span></span>
    - <span data-ttu-id="a3627-152">다중 VM 일관성을 사용하도록 설정하면 복제 그룹의 컴퓨터는 20004 포트를 통해 서로 통신하게 됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-152">If you enable multi-VM consistency, then machines in the replication group communicate with each other over port 20004.</span></span> <span data-ttu-id="a3627-153">다중 VM은 장애 조치 시(failover) 크래시 일관성 및 앱 일관성 복구 지점을 공유하는 복제 그룹에 여러 컴퓨터를 그룹화하는 경우 사용됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-153">Multi-VM is used if you group multiple machines into replication groups that share crash-consistent and app-consistent recovery points when they fail over.</span></span> <span data-ttu-id="a3627-154">이 기능은 컴퓨터가 동일한 워크로드를 실행하고 일관성을 유지해야 할 경우에 유용합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-154">This is useful if machines are running the same workload and need to be consistent.</span></span>
5. <span data-ttu-id="a3627-155">트래픽은 인터넷을 통해 Azure Storage 공용 끝점에 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-155">Traffic is replicated to Azure storage public endpoints, over the internet.</span></span> <span data-ttu-id="a3627-156">Azure ExpressRoute [공용 피어링](https://docs.microsoft.com/en-us/azure/expressroute/expressroute-circuit-peerings#public-peering)을 사용할 수도 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-156">Alternately, you can use Azure ExpressRoute [public peering](https://docs.microsoft.com/en-us/azure/expressroute/expressroute-circuit-peerings#public-peering).</span></span> <span data-ttu-id="a3627-157">온-프레미스 사이트에서 Azure로의 사이트 간 VPN을 통한 트래픽 복제는 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-157">Replicating traffic over a site-to-site VPN from an on-premises site to Azure isn't supported.</span></span>

<span data-ttu-id="a3627-158">**그림 2: VMware에서 Azure 복제로**</span><span class="sxs-lookup"><span data-stu-id="a3627-158">**Figure 2: VMware to Azure replication**</span></span>

![향상된](./media/site-recovery-components/v2a-architecture-henry.png)

### <a name="failover-and-failback"></a><span data-ttu-id="a3627-160">장애 조치 및 장애 복구</span><span class="sxs-lookup"><span data-stu-id="a3627-160">Failover and failback</span></span>

1. <span data-ttu-id="a3627-161">예상대로 작동하는 테스트 장애 조치(failover)를 확인한 후에 필요에 따라 Azure에 계획되지 않은 장애 조치(failover)를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-161">After you verify that test failover is working as expected, you can run unplanned failovers to Azure as required.</span></span> <span data-ttu-id="a3627-162">계획된 장애 조치는 지원되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-162">Planned failover isn't supported.</span></span>
2. <span data-ttu-id="a3627-163">단일 컴퓨터에 장애 조치를 수행하거나 [복구 계획](site-recovery-create-recovery-plans.md)을 만들어서 여러 VM의 장애 조치를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-163">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md), to fail over multiple VMs.</span></span>
3. <span data-ttu-id="a3627-164">장애 조치를 실행하면 Azure에 복제본 VM이 만들어집니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-164">When you run a failover, replica VMs are created in Azure.</span></span> <span data-ttu-id="a3627-165">복제본 Azure VM에서 워크로드에 액세스하려면 장애 조치를 커밋합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-165">You commit a failover to start accessing the workload from the replica Azure VM.</span></span>
4. <span data-ttu-id="a3627-166">기본 온-프레미스 사이트를 다시 사용할 수 있는 경우 장애 복구를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-166">When your primary on-premises site is available again, you can fail back.</span></span> <span data-ttu-id="a3627-167">장애 복구 인프라를 설정하고 보조 사이트에서 기본 사이트에 컴퓨터를 복제하기 시작하며 보조 사이트에서 계획되지 않은 장애 조치를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-167">You set up a failback infrastructure, start replicating the machine from the secondary site to the primary, and run an unplanned failover from the secondary site.</span></span> <span data-ttu-id="a3627-168">이 장애 조치를 커밋한 후에 데이터가 다시 온-프레미스로 돌아오면 Azure에 다시 복제를 사용하도록 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-168">After you commit this failover, data will be back on-premises, and you need to enable replication to Azure again.</span></span> [<span data-ttu-id="a3627-169">자세히 알아보기</span><span class="sxs-lookup"><span data-stu-id="a3627-169">Learn more</span></span>](site-recovery-failback-azure-to-vmware.md)

<span data-ttu-id="a3627-170">**그림 3: VMware/물리적 장애 복구**</span><span class="sxs-lookup"><span data-stu-id="a3627-170">**Figure 3: VMware/physical failback**</span></span>

![장애 복구](./media/site-recovery-components/enhanced-failback.png)

## <a name="physical-to-azure"></a><span data-ttu-id="a3627-172">물리적 서버에서 Azure로</span><span class="sxs-lookup"><span data-stu-id="a3627-172">Physical to Azure</span></span>

<span data-ttu-id="a3627-173">물리적 온-프레미스 서버를 Azure에 복제할 때 [VMware에서 Azure](#vmware-replication-to-azure)와 동일한 구성 요소와 프로세스를 사용합니다. 단, 다음과 같은 차이점이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-173">When you replicate physical on-premises servers to Azure, replication uses also the same components and processes as [VMware to Azure](#vmware-replication-to-azure), but note these differences:</span></span>

- <span data-ttu-id="a3627-174">VMware VM 대신 구성 서버에 대한 물리적 서버를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-174">You can use a physical server for the configuration server, instead of a VMware VM</span></span>
- <span data-ttu-id="a3627-175">장애 복구를 위해 온-프레미스 VMware 인프라가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-175">You will need an on-premises VMware infrastructure for failback.</span></span> <span data-ttu-id="a3627-176">실제 컴퓨터로 장애 복구를 수행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-176">You can't fail back to a physical machine.</span></span>

## <a name="hyper-v-to-azure"></a><span data-ttu-id="a3627-177">Hyper-V에서 Azure로</span><span class="sxs-lookup"><span data-stu-id="a3627-177">Hyper-V to Azure</span></span>

### <a name="replication-process"></a><span data-ttu-id="a3627-178">복제 프로세스</span><span class="sxs-lookup"><span data-stu-id="a3627-178">Replication process</span></span>

1. <span data-ttu-id="a3627-179">Azure 구성 요소를 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-179">You set up the Azure components.</span></span> <span data-ttu-id="a3627-180">Site Recovery 배포를 시작하기 전에 저장소 및 네트워크 계정을 설정하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-180">We recommend you set up storage and network accounts before you begin Site Recovery deployment.</span></span>
2. <span data-ttu-id="a3627-181">Site Recovery에 대한 복제 서비스 자격 증명 모음을 만들고 다음을 포함한 자격 증명 모음 설정을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-181">You create a Replication Services vault for Site Recovery, and configure vault settings, including:</span></span>
    - <span data-ttu-id="a3627-182">원본 및 대상 설정.</span><span class="sxs-lookup"><span data-stu-id="a3627-182">Source and target settings.</span></span> <span data-ttu-id="a3627-183">VMM 클라우드에서 Hyper-V 호스트를 관리하지 않으면 대상의 경우 Hyper-V 사이트 컨테이너를 만들고 여기에 Hyper-V 호스트를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-183">If you're not managing Hyper-V hosts in a VMM cloud, for the target you create a Hyper-V site container, and add Hyper-V hosts to it.</span></span> <span data-ttu-id="a3627-184">Hyper-V 호스트가 VMM에서 관리하는 경우 원본은 VMM 클라우드입니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-184">If Hyper-V hosts are managed in VMM, the source is the VMM cloud.</span></span> <span data-ttu-id="a3627-185">대상은 Azure입니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-185">The target is Azure.</span></span>
    - <span data-ttu-id="a3627-186">Azure Site Recovery 공급자 및 Microsoft Azure Recovery Services 에이전트 설치</span><span class="sxs-lookup"><span data-stu-id="a3627-186">Installation of the Azure Site Recovery Provider and the Microsoft Azure Recovery Services agent.</span></span> <span data-ttu-id="a3627-187">VMM을 사용하는 경우 여기에 공급자가 설치되고 각 Hyper-V 호스트에 에이전트가 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-187">If you have VMM the Provider will be installed on it, and the agent on each Hyper-V host.</span></span> <span data-ttu-id="a3627-188">VMM이 없는 경우 공급자와 에이전트는 각 호스트에 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-188">If you don't have VMM, both the Provider and agent are installed on each host.</span></span>
    - <span data-ttu-id="a3627-189">Hyper-V 사이트 또는 VMM 클라우드에 대한 복제 정책을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-189">You create a replication policy for the Hyper-V site or VMM cloud.</span></span> <span data-ttu-id="a3627-190">정책은 사이트 또는 클라우드의 호스트에 있는 모든 VM에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-190">The policy is applied to all VMs located on hosts in the site or cloud.</span></span>
    - <span data-ttu-id="a3627-191">Hyper-V VM에 복제를 사용하도록 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-191">You enable replication for Hyper-V VMs.</span></span> <span data-ttu-id="a3627-192">초기 복제는 복제 정책 설정에 따라 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-192">Initial replication occurs in accordance with the replication policy settings.</span></span>
4. <span data-ttu-id="a3627-193">데이터 변경을 추적하고 Azure에 대한 델타 변경 내용의 복제를 초기 복제가 완료된 후에 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-193">Data changes are tracked, and replication of delta changes to Azure begins after the initial replication finishes.</span></span> <span data-ttu-id="a3627-194">.hrl 파일에는 항목에 대한 추적된 변경 내용이 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-194">Tracked changes for an item are held in a .hrl file.</span></span>
5. <span data-ttu-id="a3627-195">모든 것이 제대로 작동하는지 확인할 수 있도록 테스트 장애 조치를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-195">You run a test failover to make sure everything's working.</span></span>

### <a name="failover-and-failback-process"></a><span data-ttu-id="a3627-196">장애 조치 및 장애 복구 프로세스</span><span class="sxs-lookup"><span data-stu-id="a3627-196">Failover and failback process</span></span>

1. <span data-ttu-id="a3627-197">온-프레미스 Hyper-V VM에서 Azure로 계획된 또는 계획되지 않은 [장애 조치](site-recovery-failover.md)를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-197">You can run a planned or unplanned [failover](site-recovery-failover.md) from on-premises Hyper-V VMs to Azure.</span></span> <span data-ttu-id="a3627-198">계획된 장애 조치를 실행할 경우 데이터 손실을 방지하기 위해 원본 VM이 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-198">If you run a planned failover, then source VMs are shut down to ensure no data loss.</span></span>
2. <span data-ttu-id="a3627-199">단일 컴퓨터에 장애 조치를 수행하거나 [복구 계획](site-recovery-create-recovery-plans.md)을 만들어서 여러 컴퓨터의 장애 조치를 오케스트레이션할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-199">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md) to orchestrate failover of multiple machines.</span></span>
4. <span data-ttu-id="a3627-200">장애 조치를 실행한 후에 Azure에서 만들어진 복제본 VM이 표시되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-200">After you run the failover, you should be able to see the created replica VMs in Azure.</span></span> <span data-ttu-id="a3627-201">필요한 경우 VM에 공용 IP 주소를 할당할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-201">You can assign a public IP address to the VM if required.</span></span>
5. <span data-ttu-id="a3627-202">그런 다음 복제본 Azure VM에서 워크로드에 액세스하려면 장애 조치를 커밋합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-202">You then commit the failover to start accessing the workload from the replica Azure VM.</span></span>
6. <span data-ttu-id="a3627-203">기본 온-프레미스 사이트를 다시 사용할 수 있는 경우 [장애 복구](site-recovery-failback-from-azure-to-hyper-v.md)를 수행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-203">When your primary on-premises site is available again, you can [fail back](site-recovery-failback-from-azure-to-hyper-v.md).</span></span> <span data-ttu-id="a3627-204">Azure에서 기본 사이트로 계획된 장애 조치를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-204">You kick off a planned failover from Azure to the primary site.</span></span> <span data-ttu-id="a3627-205">계획된 장애 조치의 경우 데이터가 손실되지 않도록 동일한 VM 또는 대체 위치에 장애 복구를 수행하고 Azure와 온-프레미스 간의 변경 내용을 동기화할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-205">For a planned failover you can select to failback to the same VM or to an alternate location, and synchronize changes between Azure and on-premises, to ensure no data loss.</span></span> <span data-ttu-id="a3627-206">온-프레미스에 VM이 만들어지면 장애 조치를 커밋합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-206">When VMs are created on-premises, you commit the failover.</span></span>

<span data-ttu-id="a3627-207">**그림 4: Hyper-V 사이트에서 Azure로 복제**</span><span class="sxs-lookup"><span data-stu-id="a3627-207">**Figure 4: Hyper-V site to Azure replication**</span></span>

![구성 요소](./media/site-recovery-components/arch-onprem-azure-hypervsite.png)

<span data-ttu-id="a3627-209">**그림 5: VMM 클라우드의 Hyper-V에서 Azure로 복제**</span><span class="sxs-lookup"><span data-stu-id="a3627-209">**Figure 5: Hyper-V in VMM clouds to Azure replication**</span></span>

![구성 요소](./media/site-recovery-components/arch-onprem-onprem-azure-vmm.png)


## <a name="replicate-to-a-secondary-site"></a><span data-ttu-id="a3627-211">보조 사이트에 복제</span><span class="sxs-lookup"><span data-stu-id="a3627-211">Replicate to a secondary site</span></span>

<span data-ttu-id="a3627-212">다음 사항을 보조 사이트로 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-212">You can replicate the following to your secondary site:</span></span>

- <span data-ttu-id="a3627-213">**VMware**: [지원되는 호스트](site-recovery-support-matrix-to-sec-site.md#on-premises-servers)에서 실행되는 온-프레미스 VMware VM.</span><span class="sxs-lookup"><span data-stu-id="a3627-213">**VMware**: On-premises VMware VMs running on a [supported host](site-recovery-support-matrix-to-sec-site.md#on-premises-servers).</span></span> <span data-ttu-id="a3627-214">[지원되는 운영 체제](site-recovery-support-matrix-to-sec-site.md#support-for-replicated-machine-os-versions)에서 실행되는 VMware VM을 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-214">You can replicate VMware VMs running [supported operating systems](site-recovery-support-matrix-to-sec-site.md#support-for-replicated-machine-os-versions)</span></span>
- <span data-ttu-id="a3627-215">**물리적 컴퓨터**: [지원되는 운영 체제](site-recovery-support-matrix-to-sec-site.md#support-for-replicated-machine-os-versions)에서 Windows 또는 Linux를 실행하는 온-프레미스 물리적 서버.</span><span class="sxs-lookup"><span data-stu-id="a3627-215">**Physical machines**: On-premises physical servers running Windows or Linux on [supported operating systems](site-recovery-support-matrix-to-sec-site.md#support-for-replicated-machine-os-versions).</span></span>
- <span data-ttu-id="a3627-216">**Hyper-V**: VMM 클라우드에서 관리되는 [지원되는 Hyper-V 호스트](site-recovery-support-matrix-to-sec-site.md#on-premises-servers)에서 실행되는 온-프레미스 Hyper-V VM.</span><span class="sxs-lookup"><span data-stu-id="a3627-216">**Hyper-V**: On-premises Hyper-V VMs running on [supported Hyper-V hosts](site-recovery-support-matrix-to-sec-site.md#on-premises-servers) managed in VMM clouds.</span></span> <span data-ttu-id="a3627-217">[지원되는 호스트](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers).</span><span class="sxs-lookup"><span data-stu-id="a3627-217">[supported hosts](site-recovery-support-matrix-to-azure.md#support-for-datacenter-management-servers).</span></span> <span data-ttu-id="a3627-218">[Hyper-V 및 Azure에서 지원하는](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows) 게스트 운영 체제를 실행하는 Hyper-V VM을 복제할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-218">You can replicate Hyper-V VMs running any guest operating system [supported by Hyper-V and Azure](https://technet.microsoft.com/en-us/windows-server-docs/compute/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).</span></span>


## <a name="vmwarephysical-to-a-secondary-site"></a><span data-ttu-id="a3627-219">VMware/물리적 서버에서 보조 사이트로</span><span class="sxs-lookup"><span data-stu-id="a3627-219">VMware/physical to a secondary site</span></span>

<span data-ttu-id="a3627-220">InMage Scout을 사용하여 VMware VM 또는 물리적 서버에서 보조 사이트로 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-220">You replicate VMware VMs or physical servers to a secondary site using InMage Scout.</span></span>

### <a name="components"></a><span data-ttu-id="a3627-221">구성 요소</span><span class="sxs-lookup"><span data-stu-id="a3627-221">Components</span></span>

<span data-ttu-id="a3627-222">**영역**</span><span class="sxs-lookup"><span data-stu-id="a3627-222">**Area**</span></span> | <span data-ttu-id="a3627-223">**구성 요소**</span><span class="sxs-lookup"><span data-stu-id="a3627-223">**Component**</span></span> | <span data-ttu-id="a3627-224">**세부 정보**</span><span class="sxs-lookup"><span data-stu-id="a3627-224">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="a3627-225">**프로세스 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-225">**Process server**</span></span> | <span data-ttu-id="a3627-226">기본 사이트에 있음</span><span class="sxs-lookup"><span data-stu-id="a3627-226">Located in primary site</span></span> | <span data-ttu-id="a3627-227">프로세스 서버를 배포하여 캐시, 압축 및 데이터 최적화를 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-227">You deploy the process server to handle caching, compression, and data optimization.</span></span><br/><br/> <span data-ttu-id="a3627-228">또한 보호하려는 컴퓨터에 대해 통합 에이전트의 푸시 설치를 처리합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-228">It also handles push installation of the Unified Agent to machines you want to protect.</span></span>
<span data-ttu-id="a3627-229">**구성 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-229">**Configuration server**</span></span> | <span data-ttu-id="a3627-230">보조 사이트에 있음</span><span class="sxs-lookup"><span data-stu-id="a3627-230">Located in secondary site</span></span> | <span data-ttu-id="a3627-231">구성 서버는 관리 웹 사이트나 vContinuum 콘솔을 사용하여 배포를 관리, 구성 및 모니터링합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-231">The configuration server manages, configure, and monitor your deployment, either using the management website or the vContinuum console.</span></span>
<span data-ttu-id="a3627-232">**vContinuum 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-232">**vContinuum server**</span></span> | <span data-ttu-id="a3627-233">선택 사항입니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-233">Optional.</span></span> <span data-ttu-id="a3627-234">구성 서버와 동일한 위치에 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-234">Installed in the same location as the configuration server.</span></span> | <span data-ttu-id="a3627-235">보호되는 환경을 관리 및 모니터링하기 위한 콘솔을 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-235">It provides a console for managing and monitoring your protected environment.</span></span>
<span data-ttu-id="a3627-236">**마스터 대상 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-236">**Master target server**</span></span> | <span data-ttu-id="a3627-237">보조 사이트에 있음</span><span class="sxs-lookup"><span data-stu-id="a3627-237">Located in the secondary site</span></span> | <span data-ttu-id="a3627-238">마스터 대상 서버는 복제된 데이터를 보유합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-238">The master target server holds replicated data.</span></span> <span data-ttu-id="a3627-239">프로세스 서버로부터 데이터를 수신하고 보조 사이트에 복제본 컴퓨터를 만들며 데이터 보존 지점을 유지합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-239">It receives data from the process server, creates a replica machine in the secondary site, and holds the data retention points.</span></span><br/><br/> <span data-ttu-id="a3627-240">필요한 마스터 대상 서버의 수는 보호하는 컴퓨터의 수에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-240">The number of master target servers you need depends on the number of machines you're protecting.</span></span><br/><br/> <span data-ttu-id="a3627-241">기본 사이트로 다시 장애 복구할 경우 해당 기본 사이트에도 마스터 대상 서버가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-241">If you want to fail back to the primary site, you need a master target server there too.</span></span> <span data-ttu-id="a3627-242">통합 에이전트는 이 서버에 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-242">The Unified Agent is installed on this server.</span></span>
<span data-ttu-id="a3627-243">**VMware ESX/ESXi 및 vCenter 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-243">**VMware ESX/ESXi and vCenter server**</span></span> |  <span data-ttu-id="a3627-244">ESX/ESXi 호스트에서 호스트되는 VM.</span><span class="sxs-lookup"><span data-stu-id="a3627-244">VMs are hosted on ESX/ESXi hosts.</span></span> <span data-ttu-id="a3627-245">vCenter 서버로 관리되는 호스트.</span><span class="sxs-lookup"><span data-stu-id="a3627-245">Hosts are managed with a vCenter server</span></span> | <span data-ttu-id="a3627-246">VMware VM을 복제하려면 VMware 인프라가 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-246">You need a VMware infrastructure to replicate VMware VMs.</span></span>
<span data-ttu-id="a3627-247">**VM/물리적 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-247">**VMs/physical servers**</span></span> |  <span data-ttu-id="a3627-248">복제하려는 VMware VM 또는 물리적 서버에 설치되는 통합 에이전트.</span><span class="sxs-lookup"><span data-stu-id="a3627-248">Unified Agent installed on VMware VMs and physical servers you want to replicate.</span></span> | <span data-ttu-id="a3627-249">에이전트는 모든 구성 요소 간의 통신 공급자 역할을 합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-249">The agent acts as a communication provider between all of the components.</span></span>


### <a name="replication-process"></a><span data-ttu-id="a3627-250">복제 프로세스</span><span class="sxs-lookup"><span data-stu-id="a3627-250">Replication process</span></span>

1. <span data-ttu-id="a3627-251">각 사이트(구성, 프로세스, 마스터 대상)에 구성 요소 서버를 설정하고 복제할 컴퓨터에 통합 에이전트를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-251">You set up the component servers in each site (configuration, process, master target), and install the Unified Agent on machines that you want to replicate.</span></span>
2. <span data-ttu-id="a3627-252">초기 복제 후 각 컴퓨터에서 에이전트는 델타 복제 변경을 프로세스 서버로 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-252">After initial replication, the agent on each machine sends delta replication changes to the process server.</span></span>
3. <span data-ttu-id="a3627-253">프로세스 서버가 데이터를 최적화하고 보조 사이트의 마스터 대상 서버로 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-253">The process server optimizes the data, and transfers it to the master target server on the secondary site.</span></span> <span data-ttu-id="a3627-254">구성 서버는 복제 프로세스를 관리합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-254">The configuration server manages the replication process.</span></span>

<span data-ttu-id="a3627-255">**그림 6: VMware에서 VMware로 복제**</span><span class="sxs-lookup"><span data-stu-id="a3627-255">**Figure 6: VMware to VMware replication**</span></span>

![VMware 간](./media/site-recovery-components/vmware-to-vmware.png)



## <a name="hyper-v-to-a-secondary-site"></a><span data-ttu-id="a3627-257">Hyper-V에서 보조 사이트로</span><span class="sxs-lookup"><span data-stu-id="a3627-257">Hyper-V to a secondary site</span></span>

<span data-ttu-id="a3627-258">Hyper-V VM을 보조 사이트에 복제하는 데 필요한 사항은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-258">Here's what you need for replicating Hyper-V VMs to a secondary site.</span></span>


<span data-ttu-id="a3627-259">**영역**</span><span class="sxs-lookup"><span data-stu-id="a3627-259">**Area**</span></span> | <span data-ttu-id="a3627-260">**구성 요소**</span><span class="sxs-lookup"><span data-stu-id="a3627-260">**Component**</span></span> | <span data-ttu-id="a3627-261">**세부 정보**</span><span class="sxs-lookup"><span data-stu-id="a3627-261">**Details**</span></span>
--- | --- | ---
<span data-ttu-id="a3627-262">**VMM 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-262">**VMM server**</span></span> | <span data-ttu-id="a3627-263">VMM 서버는 기본 사이트에서 1개, 보조 사이트에서 1개를 사용하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-263">We recommend a VMM server in the primary site, and one in the secondary site</span></span> | <span data-ttu-id="a3627-264">각 VMM 서버는 인터넷에 연결되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-264">Each VMM server should be connected to the internet.</span></span><br/><br/> <span data-ttu-id="a3627-265">각 서버에는 Hyper-V 기능 프로필 집합을 가진 하나 이상의 VMM 사설 클라우드가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-265">Each server should have at least one VMM private cloud, with the Hyper-V capability profile set.</span></span><br/><br/> <span data-ttu-id="a3627-266">VMM 서버에 Azure Site Recovery 공급자를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-266">You install the Azure Site Recovery Provider on the VMM server.</span></span> <span data-ttu-id="a3627-267">공급자는 인터넷을 통해 사이트 복구 서비스에서의 복제를 조정 및 오케스트레이션합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-267">The Provider coordinates and orchestrates replication with the Site Recovery service over the internet.</span></span> <span data-ttu-id="a3627-268">공급자와 Azure 간의 통신은 모두 안전하고 암호화됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-268">Communications between the Provider and Azure are secure and encrypted.</span></span>
<span data-ttu-id="a3627-269">**Hyper-V 서버**</span><span class="sxs-lookup"><span data-stu-id="a3627-269">**Hyper-V server**</span></span> |  <span data-ttu-id="a3627-270">기본 및 보조 VMM 클라우드에 있는 하나 이상의 Hyper-V 호스트 서버.</span><span class="sxs-lookup"><span data-stu-id="a3627-270">One or more Hyper-V host servers in the primary and secondary VMM clouds.</span></span><br/><br/> <span data-ttu-id="a3627-271">서버는 인터넷에 연결되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-271">Servers should be connected to the internet.</span></span><br/><br/> <span data-ttu-id="a3627-272">Kerberos 또는 인증서 인증을 사용하여 LAN 또는 VPN을 통해 기본 및 보조 Hyper-V 호스트 서버 간에 데이터가 복제됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-272">Data is replicated between the primary and secondary Hyper-V host servers over the LAN or VPN, using Kerberos or certificate authentication.</span></span>  
<span data-ttu-id="a3627-273">**Hyper-V VM**</span><span class="sxs-lookup"><span data-stu-id="a3627-273">**Hyper-V VMs**</span></span> | <span data-ttu-id="a3627-274">원본 Hyper-V 호스트 서버에 있음.</span><span class="sxs-lookup"><span data-stu-id="a3627-274">Located on the source Hyper-V host server.</span></span> | <span data-ttu-id="a3627-275">원본 호스트 서버에는 복제하려는 VM이 하나 이상 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-275">The source host server should have at least one VM that you want to replicate.</span></span>

### <a name="replication-process"></a><span data-ttu-id="a3627-276">복제 프로세스</span><span class="sxs-lookup"><span data-stu-id="a3627-276">Replication process</span></span>

1. <span data-ttu-id="a3627-277">Azure 계정을 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-277">You set up the Azure account.</span></span>
2. <span data-ttu-id="a3627-278">Site Recovery에 대한 복제 서비스 자격 증명 모음을 만들고 다음을 포함한 자격 증명 모음 설정을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-278">You create a Replication Services vault for Site Recovery, and configure vault settings, including:</span></span>

    - <span data-ttu-id="a3627-279">복제 원본 및 대상(기본 및 보조 사이트)</span><span class="sxs-lookup"><span data-stu-id="a3627-279">The replication source and target (primary and secondary sites).</span></span>
    - <span data-ttu-id="a3627-280">Azure Site Recovery 공급자 및 Microsoft Azure Recovery Services 에이전트 설치</span><span class="sxs-lookup"><span data-stu-id="a3627-280">Installation of the Azure Site Recovery Provider and the Microsoft Azure Recovery Services agent.</span></span> <span data-ttu-id="a3627-281">공급자는 VMM 서버 및 각 Hyper-V 호스트의 에이전트에 설치됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-281">The Provider is installed on VMM servers, and the agent on each Hyper-V host.</span></span>
    - <span data-ttu-id="a3627-282">원본 VMM 클라우드에 대한 복제 정책을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-282">You create a replication policy for source VMM cloud.</span></span> <span data-ttu-id="a3627-283">정책은 클라우드의 호스트에 있는 모든 VM에 적용됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-283">The policy is applied to all VMs located on hosts in the cloud.</span></span>
    - <span data-ttu-id="a3627-284">Hyper-V VM에 복제를 사용하도록 설정합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-284">You enable replication for Hyper-V VMs.</span></span> <span data-ttu-id="a3627-285">초기 복제는 복제 정책 설정에 따라 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-285">Initial replication occurs in accordance with the replication policy settings.</span></span>
4. <span data-ttu-id="a3627-286">데이터 변경을 추적하고 델타 변경 내용의 복제를 초기 복제가 완료된 후에 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-286">Data changes are tracked, and replication of delta changes to begins after the initial replication finishes.</span></span> <span data-ttu-id="a3627-287">.hrl 파일에는 항목에 대한 추적된 변경 내용이 유지됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-287">Tracked changes for an item are held in a .hrl file.</span></span>
5. <span data-ttu-id="a3627-288">모든 것이 제대로 작동하는지 확인할 수 있도록 테스트 장애 조치를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-288">You run a test failover to make sure everything's working.</span></span>

<span data-ttu-id="a3627-289">**그림 7: VMM에서 VMM 복제로**</span><span class="sxs-lookup"><span data-stu-id="a3627-289">**Figure 7: VMM to VMM replication**</span></span>

![온-프레미스 간](./media/site-recovery-components/arch-onprem-onprem.png)

### <a name="failover-and-failback"></a><span data-ttu-id="a3627-291">장애 조치 및 장애 복구</span><span class="sxs-lookup"><span data-stu-id="a3627-291">Failover and failback</span></span>

1. <span data-ttu-id="a3627-292">온-프레미스 사이트 간에 계획된 또는 계획되지 않은 [장애 조치](site-recovery-failover.md)를 실행할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-292">You can run a planned or unplanned [failover](site-recovery-failover.md) between on-premises sites.</span></span> <span data-ttu-id="a3627-293">계획된 장애 조치를 실행할 경우 데이터 손실을 방지하기 위해 원본 VM이 종료됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-293">If you run a planned failover, then source VMs are shut down to ensure no data loss.</span></span>
2. <span data-ttu-id="a3627-294">단일 컴퓨터에 장애 조치를 수행하거나 [복구 계획](site-recovery-create-recovery-plans.md)을 만들어서 여러 컴퓨터의 장애 조치를 오케스트레이션할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-294">You can fail over a single machine, or create [recovery plans](site-recovery-create-recovery-plans.md) to orchestrate failover of multiple machines.</span></span>
4. <span data-ttu-id="a3627-295">보조 사이트에 계획되지 않은 장애 조치를 수행했다면 장애 조치 후에 보조 위치에 있는 장애 조치 컴퓨터는 보호 또는 복제하도록 설정되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-295">If you perform an unplanned failover to a secondary site, after the failover machines in the secondary location aren't enabled for protection or replication.</span></span> <span data-ttu-id="a3627-296">계획된 장애 조치를 실행했으면 장애 조치 후에 보조 위치에 있는 컴퓨터가 보호됩니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-296">If you ran a planned failover, after the failover, machines in the secondary location are protected.</span></span>
5. <span data-ttu-id="a3627-297">그런 다음 장애 조치를 커밋하여 복제본 VM에서 워크로드에 액세스합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-297">Then, you commit the failover to start accessing the workload from the replica VM.</span></span>
6. <span data-ttu-id="a3627-298">기본 사이트를 사용할 수 있는 경우 역방향 복제를 시작하여 보조 사이트에서 기본 사이트로 복제합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-298">When your primary site is available again, you initiate reverse replication to replicate from the secondary site to the primary.</span></span> <span data-ttu-id="a3627-299">역방향 복제는 가상 컴퓨터를 보호된 상태로 가져오지만 보조 데이터 센터는 여전히 활성 위치입니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-299">Reverse replication brings the virtual machines into a protected state, but the secondary datacenter is still the active location.</span></span>
7. <span data-ttu-id="a3627-300">기본 사이트를 활성 위치로 다시 만들려면 다른 역방향 복제 후에 보조 사이트에서 기본 사이트로 계획된 장애 조치를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="a3627-300">To make the primary site into the active location again, you initiate a planned failover from secondary to primary, followed by another reverse replication.</span></span>


## <a name="next-steps"></a><span data-ttu-id="a3627-301">다음 단계</span><span class="sxs-lookup"><span data-stu-id="a3627-301">Next steps</span></span>

- <span data-ttu-id="a3627-302">Hyper-V 복제 워크플로에 대해 [자세히 알아보세요](site-recovery-hyper-v-azure-architecture.md).</span><span class="sxs-lookup"><span data-stu-id="a3627-302">[Learn more](site-recovery-hyper-v-azure-architecture.md) about the Hyper-V replication workflow.</span></span>
- [<span data-ttu-id="a3627-303">필수 구성 요소 확인</span><span class="sxs-lookup"><span data-stu-id="a3627-303">Check prerequisites</span></span>](site-recovery-prereq.md)
