---
title: "Azure Network Watcher를 사용하여 VPN 게이트웨이를 통한 온-프레미스 연결 진단 | Microsoft Docs"
description: "이 문서에서는 Azure Network Watcher 리소스 문제 해결을 사용하여 VPN 게이트웨이를 통해 온-프레미스 연결을 진단하는 방법을 설명합니다."
services: network-watcher
documentationcenter: na
author: georgewallace
manager: timlt
editor: 
ms.assetid: aeffbf3d-fd19-4d61-831d-a7114f7534f9
ms.service: network-watcher
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 02/22/2017
ms.author: gwallace
ms.openlocfilehash: 8f5534c83adf2ee4a696131afb45a658c89dd298
ms.sourcegitcommit: 50e23e8d3b1148ae2d36dad3167936b4e52c8a23
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/18/2017
---
# <a name="diagnose-on-premises-connectivity-via-vpn-gateways"></a><span data-ttu-id="1690d-103">VPN Gateway를 통한 온-프레미스 연결 진단</span><span class="sxs-lookup"><span data-stu-id="1690d-103">Diagnose on-premises connectivity via VPN gateways</span></span>

<span data-ttu-id="1690d-104">Azure VPN Gateway를 사용하여 온-프레미스 네트워크와 Azure 가상 네트워크 간의 보안 연결에 대한 필요성을 해결하는 하이브리드 솔루션을 만들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-104">Azure VPN Gateway enables you to create hybrid solution that address the need for a secure connection between your on-premises network and your Azure virtual network.</span></span> <span data-ttu-id="1690d-105">요구 사항이 고유하므로 온-프레미스 VPN 장치의 선택도 고유합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-105">As your requirements are unique, so is the choice of on-premises VPN device.</span></span> <span data-ttu-id="1690d-106">Azure는 현재 장치 공급 업체와 협력하여 지속적으로 유효성이 검사되는 [여러 VPN 장치](../vpn-gateway/vpn-gateway-about-vpn-devices.md#devicetable)를 지원합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-106">Azure currently supports [several VPN devices](../vpn-gateway/vpn-gateway-about-vpn-devices.md#devicetable) that are constantly validated in partnership with the device vendors.</span></span> <span data-ttu-id="1690d-107">온-프레미스 VPN 장치를 구성하기 전에 장치 관련 구성 설정을 검토합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-107">Review the device-specific configuration settings before configuring your on-premises VPN device.</span></span> <span data-ttu-id="1690d-108">마찬가지로 Azure VPN Gateway는 연결을 설정하는 데 사용되는 [지원되는 IPsec 매개 변수](../vpn-gateway/vpn-gateway-about-vpn-devices.md#ipsec)의 집합으로 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-108">Similarly, Azure VPN Gateway is configured with a set of [supported IPsec parameters](../vpn-gateway/vpn-gateway-about-vpn-devices.md#ipsec) that are used for establishing connections.</span></span> <span data-ttu-id="1690d-109">현재 Azure VPN Gateway에서 IPsec 매개 변수의 특정 조합을 지정하거나 선택하는 방법이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-109">Currently there is no way for you to specify or select a specific combination of IPsec parameters from the Azure VPN Gateway.</span></span> <span data-ttu-id="1690d-110">온-프레미스와 Azure 간의 성공적인 연결 설정을 위해 온-프레미스 VPN 장치 설정은 Azure VPN Gateway에서 지정한 IPsec 매개 변수를 따라야 합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-110">For establishing a successful connection between on-premises and Azure, the on-premises VPN device settings must be in accordance with the IPsec parameters prescribed by Azure VPN Gateway.</span></span> <span data-ttu-id="1690d-111">설정이 정확하지 않으면 연결이 손실되고 현재까지 해당 문제에 대한 해결은 간단하지 않았으며 보통 문제를 식별하고 해결하는 데 시간이 걸렸습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-111">If the settings are in correct, there is a loss of connectivity and until now troubleshooting these issues was not trivial and usually took hours to identify and fix the issue.</span></span>

<span data-ttu-id="1690d-112">Azure Network Watcher 문제 해결 기능을 사용하여 게이트웨이 및 연결로 모든 문제를 진단하고 몇 분 안에 문제를 해결하기 위해 정보를 바탕으로 결정을 내릴 수 있는 충분한 정보를 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-112">With the Azure Network Watcher troubleshoot feature, you are able to diagnose any issues with your Gateway and Connections and within minutes have enough information to make an informed decision to rectify the issue.</span></span>

## <a name="scenario"></a><span data-ttu-id="1690d-113">시나리오</span><span class="sxs-lookup"><span data-stu-id="1690d-113">Scenario</span></span>

<span data-ttu-id="1690d-114">온-프레미스 VPN Gateway로 FortiGate를 사용하여 Azure와 온-프레미스 간에 사이트 간 연결을 구성하려고 합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-114">You want to configure a site-to-site connection between Azure and on-premises using FortiGate as the on-premises VPN Gateway.</span></span> <span data-ttu-id="1690d-115">이 시나리오를 달성하려면 다음 설치 프로그램이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-115">To achieve this scenario, you would require the following setup:</span></span>

1. <span data-ttu-id="1690d-116">Virtual Network 게이트웨이 - Azure의 VPN Gateway</span><span class="sxs-lookup"><span data-stu-id="1690d-116">Virtual Network Gateway - The VPN Gateway on Azure</span></span>
1. <span data-ttu-id="1690d-117">로컬 네트워크 게이트웨이 - Azure 클라우드에서 [온-프레미스(FortiGate) VPN Gateway](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md#LocalNetworkGateway) 표현</span><span class="sxs-lookup"><span data-stu-id="1690d-117">Local Network Gateway - The [on-premises (FortiGate) VPN Gateway](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md#LocalNetworkGateway) representation in Azure cloud</span></span>
1. <span data-ttu-id="1690d-118">사이트 간 연결(정책 기반) - [VPN Gateway와 온-프레미스 라우터 간의 연결](https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md#createconnection)</span><span class="sxs-lookup"><span data-stu-id="1690d-118">Site-to-site connection (policy based) - [Connection between the VPN Gateway and the on-premises router](https://docs.microsoft.com/en-us/azure/vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md#createconnection)</span></span>
1. [<span data-ttu-id="1690d-119">FortiGate 구성</span><span class="sxs-lookup"><span data-stu-id="1690d-119">Configuring FortiGate</span></span>](https://github.com/Azure/Azure-vpn-config-samples/blob/master/Fortinet/Current/Site-to-Site_VPN_using_FortiGate.md)

<span data-ttu-id="1690d-120">사이트 간 구성에 대한 자세한 단계별 지침은 [Azure Portal을 사용하여 사이트 간 연결로 VNet 만들기](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md)를 방문하여 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-120">Detailed step by step guidance for configuring a Site-to-Site configuration can be found by visiting: [Create a VNet with a Site-to-Site connection using the Azure portal](../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-portal.md).</span></span>

<span data-ttu-id="1690d-121">중요한 구성 단계 중 하나는 IPsec 통신 매개 변수를 구성하는 것이며 모든 잘못된 구성은 온-프레미스 네트워크와 Azure 간의 연결 손실로 이어집니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-121">One of the critical configuration steps is configuring the IPsec communication parameters, any misconfiguration leads to loss of connectivity between the on-premises network and Azure.</span></span> <span data-ttu-id="1690d-122">현재 Azure VPN Gateway는 1단계에 대해 다음 IPsec 매개 변수를 지원하도록 구성됩니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-122">Currently Azure VPN Gateways are configured to support the following IPsec parameters for Phase 1.</span></span> <span data-ttu-id="1690d-123">앞에서 언급했듯이 이러한 설정은 수정할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-123">Note, as mentioned earlier these settings cannot be modified.</span></span>  <span data-ttu-id="1690d-124">다음 표에서 볼 수 있듯이 Azure VPN Gateway에서 지원하는 암호화 알고리즘은 AES256, AES128 및 3DES입니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-124">As you can see in the table below, the encryption algorithms supported by Azure VPN Gateway are AES256, AES128, and 3DES.</span></span>

### <a name="ike-phase-1-setup"></a><span data-ttu-id="1690d-125">IKE 1단계 설정</span><span class="sxs-lookup"><span data-stu-id="1690d-125">IKE phase 1 setup</span></span>

| <span data-ttu-id="1690d-126">**속성**</span><span class="sxs-lookup"><span data-stu-id="1690d-126">**Property**</span></span> | <span data-ttu-id="1690d-127">**정책 기반**</span><span class="sxs-lookup"><span data-stu-id="1690d-127">**PolicyBased**</span></span> | <span data-ttu-id="1690d-128">**경로 기반 및 표준 또는 고성능 VPN Gateway**</span><span class="sxs-lookup"><span data-stu-id="1690d-128">**RouteBased and Standard or High-Performance VPN gateway**</span></span> |
| --- | --- | --- |
| <span data-ttu-id="1690d-129">IKE 버전</span><span class="sxs-lookup"><span data-stu-id="1690d-129">IKE Version</span></span> |<span data-ttu-id="1690d-130">IKEv1</span><span class="sxs-lookup"><span data-stu-id="1690d-130">IKEv1</span></span> |<span data-ttu-id="1690d-131">IKEv2</span><span class="sxs-lookup"><span data-stu-id="1690d-131">IKEv2</span></span> |
| <span data-ttu-id="1690d-132">Diffie-Hellman 그룹</span><span class="sxs-lookup"><span data-stu-id="1690d-132">Diffie-Hellman Group</span></span> |<span data-ttu-id="1690d-133">그룹 2(1024비트)</span><span class="sxs-lookup"><span data-stu-id="1690d-133">Group 2 (1024 bit)</span></span> |<span data-ttu-id="1690d-134">그룹 2(1024비트)</span><span class="sxs-lookup"><span data-stu-id="1690d-134">Group 2 (1024 bit)</span></span> |
| <span data-ttu-id="1690d-135">인증 방법</span><span class="sxs-lookup"><span data-stu-id="1690d-135">Authentication Method</span></span> |<span data-ttu-id="1690d-136">미리 공유한 키</span><span class="sxs-lookup"><span data-stu-id="1690d-136">Pre-Shared Key</span></span> |<span data-ttu-id="1690d-137">미리 공유한 키</span><span class="sxs-lookup"><span data-stu-id="1690d-137">Pre-Shared Key</span></span> |
| <span data-ttu-id="1690d-138">암호화 알고리즘</span><span class="sxs-lookup"><span data-stu-id="1690d-138">Encryption Algorithms</span></span> |<span data-ttu-id="1690d-139">AES256 AES128 3DES</span><span class="sxs-lookup"><span data-stu-id="1690d-139">AES256 AES128 3DES</span></span> |<span data-ttu-id="1690d-140">AES256 (3DES)</span><span class="sxs-lookup"><span data-stu-id="1690d-140">AES256 3DES</span></span> |
| <span data-ttu-id="1690d-141">해시 알고리즘</span><span class="sxs-lookup"><span data-stu-id="1690d-141">Hashing Algorithm</span></span> |<span data-ttu-id="1690d-142">SHA1(SHA128)</span><span class="sxs-lookup"><span data-stu-id="1690d-142">SHA1(SHA128)</span></span> |<span data-ttu-id="1690d-143">SHA1(SHA128), SHA2(SHA256)</span><span class="sxs-lookup"><span data-stu-id="1690d-143">SHA1(SHA128), SHA2(SHA256)</span></span> |
| <span data-ttu-id="1690d-144">1단계 SA(보안 연결) 수명(시간)</span><span class="sxs-lookup"><span data-stu-id="1690d-144">Phase 1 Security Association (SA) Lifetime (Time)</span></span> |<span data-ttu-id="1690d-145">28,800초</span><span class="sxs-lookup"><span data-stu-id="1690d-145">28,800 seconds</span></span> |<span data-ttu-id="1690d-146">10,800초</span><span class="sxs-lookup"><span data-stu-id="1690d-146">10,800 seconds</span></span> |

<span data-ttu-id="1690d-147">사용자로서 FortiGate를 구성해야 합니다. 샘플 구성은 [GitHub](https://github.com/Azure/Azure-vpn-config-samples/blob/master/Fortinet/Current/fortigate_show%20full-configuration.txt)에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-147">As a user, you would be required to configure your FortiGate, a sample configuration can be found on [GitHub](https://github.com/Azure/Azure-vpn-config-samples/blob/master/Fortinet/Current/fortigate_show%20full-configuration.txt).</span></span> <span data-ttu-id="1690d-148">자신도 모르게 해시 알고리즘으로 SHA-512를 사용하도록 FortiGate를 구성했습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-148">Unknowingly you configured your FortiGate to use SHA-512 as the hashing algorithm.</span></span> <span data-ttu-id="1690d-149">이 알고리즘은 정책 기반 연결에 대해 지원되는 알고리즘이 아니므로 VPN 연결이 작동합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-149">As this algorithm is not a supported algorithm for policy-based connections, your VPN connection does work.</span></span>

<span data-ttu-id="1690d-150">이러한 문제는 해결하기 어려우며 근본 원인은 직관적이지 않은 경우가 많습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-150">These issues are hard to troubleshoot and root causes are often non-intuitive.</span></span> <span data-ttu-id="1690d-151">이 경우 문제 해결에 대한 도움을 얻기 위해 지원 티켓을 열 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-151">In this case, you can open a support ticket to get help on resolving the issue.</span></span> <span data-ttu-id="1690d-152">그러나 Azure Network Watcher 문제 해결 API를 사용하면 이러한 문제를 직접 식별할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-152">But with Azure Network Watcher troubleshoot API, you can identify these issues on your own.</span></span>

## <a name="troubleshooting-using-azure-network-watcher"></a><span data-ttu-id="1690d-153">Azure Network Watcher를 사용하여 문제 해결</span><span class="sxs-lookup"><span data-stu-id="1690d-153">Troubleshooting using Azure Network Watcher</span></span>

<span data-ttu-id="1690d-154">연결을 진단하려면 Azure PowerShell에 연결하고 `Start-AzureRmNetworkWatcherResourceTroubleshooting` cmdlet을 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-154">To diagnose your connection, connect to Azure PowerShell and initiate the `Start-AzureRmNetworkWatcherResourceTroubleshooting` cmdlet.</span></span> <span data-ttu-id="1690d-155">[Virtual Network 게이트웨이 및 연결 문제 해결 - PowerShell](network-watcher-troubleshoot-manage-powershell.md)에서 이 cmdlet 사용에 대한 세부 정보를 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-155">You can find the details on using this cmdlet at [Troubleshoot Virtual Network Gateway and connections - PowerShell](network-watcher-troubleshoot-manage-powershell.md).</span></span> <span data-ttu-id="1690d-156">이 cmdlet을 완료하는 데는 몇 분 정도 걸릴 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-156">This cmdlet may take up to few minutes to complete.</span></span>

<span data-ttu-id="1690d-157">cmdlet이 완료되면 cmdlet에 지정된 저장소 위치로 이동하여 문제 및 로그에 대한 자세한 정보를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-157">Once the cmdlet completes, you can navigate to the storage location specified in the cmdlet to get detailed information on about the issue and logs.</span></span> <span data-ttu-id="1690d-158">Azure Network Watcher는 다음 로그 파일을 포함하는 zip 폴더를 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-158">Azure Network Watcher creates a zip folder that contains the following log files:</span></span>

![1][1]

<span data-ttu-id="1690d-160">IKEErrors.txt라는 파일을 열면 온-프레미스 IKE 설정 잘못된 구성의 문제를 표시하는 다음 오류를 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-160">Open the file called IKEErrors.txt and it displays the following error, indicating an issue with on-premises IKE setting misconfiguration.</span></span>

```
Error: On-premises device rejected Quick Mode settings. Check values.
     based on log : Peer sent NO_PROPOSAL_CHOSEN notify
```

<span data-ttu-id="1690d-161">이 경우 연결이 제대로 작동하지 않게 되는 `ERROR_IPSEC_IKE_POLICY_MATCH`가 있었다고 언급하므로 Scrubbed-wfpdiag.txt에서 오류에 대한 자세한 정보를 얻을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-161">You can get detailed information from the Scrubbed-wfpdiag.txt about the error, as in this case it mentions that there was `ERROR_IPSEC_IKE_POLICY_MATCH` that lead to connection not working properly.</span></span>

<span data-ttu-id="1690d-162">또 다른 일반적인 잘못된 구성은 잘못된 공유 키 지정입니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-162">Another common misconfiguration is the specifying incorrect shared keys.</span></span> <span data-ttu-id="1690d-163">앞의 예제에서 다른 공유 키를 지정한 경우 IKEErrors.txt는 다음과 같은 오류를 표시합니다. `Error: Authentication failed. Check shared key`</span><span class="sxs-lookup"><span data-stu-id="1690d-163">If in the preceding example you had specified different shared keys, the IKEErrors.txt shows the following error: `Error: Authentication failed. Check shared key`.</span></span>

<span data-ttu-id="1690d-164">Azure Network Watcher 문제 해결 기능을 사용하면 간단한 PowerShell cmdlet의 편의성으로 VPN Gateway 및 연결을 진단하고 문제를 해결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-164">Azure Network Watcher troubleshoot feature enables you to diagnose and troubleshoot your VPN Gateway and Connection with the ease of a simple PowerShell cmdlet.</span></span> <span data-ttu-id="1690d-165">현재 다음 조건 진단을 지원하고 더 많은 조건을 추가하기 위해 노력하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-165">Currently we support diagnosing the following conditions and are working towards adding more condition.</span></span>

### <a name="gateway"></a><span data-ttu-id="1690d-166">게이트웨이</span><span class="sxs-lookup"><span data-stu-id="1690d-166">Gateway</span></span>

| <span data-ttu-id="1690d-167">오류 유형</span><span class="sxs-lookup"><span data-stu-id="1690d-167">Fault Type</span></span> | <span data-ttu-id="1690d-168">이유</span><span class="sxs-lookup"><span data-stu-id="1690d-168">Reason</span></span> | <span data-ttu-id="1690d-169">로그</span><span class="sxs-lookup"><span data-stu-id="1690d-169">Log</span></span>|
|---|---|---|
| <span data-ttu-id="1690d-170">NoFault</span><span class="sxs-lookup"><span data-stu-id="1690d-170">NoFault</span></span> | <span data-ttu-id="1690d-171">오류가 발견되지 않은 경우를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-171">When no error is detected.</span></span> |<span data-ttu-id="1690d-172">예</span><span class="sxs-lookup"><span data-stu-id="1690d-172">Yes</span></span>|
| <span data-ttu-id="1690d-173">GatewayNotFound</span><span class="sxs-lookup"><span data-stu-id="1690d-173">GatewayNotFound</span></span> | <span data-ttu-id="1690d-174">게이트웨이를 찾을 수 없거나 게이트웨이가 프로비저닝되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-174">Cannot find Gateway or Gateway is not provisioned.</span></span> |<span data-ttu-id="1690d-175">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-175">No</span></span>|
| <span data-ttu-id="1690d-176">PlannedMaintenance</span><span class="sxs-lookup"><span data-stu-id="1690d-176">PlannedMaintenance</span></span> |  <span data-ttu-id="1690d-177">게이트웨이 인스턴스가 유지 관리되고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-177">Gateway instance is under maintenance.</span></span>  |<span data-ttu-id="1690d-178">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-178">No</span></span>|
| <span data-ttu-id="1690d-179">UserDrivenUpdate</span><span class="sxs-lookup"><span data-stu-id="1690d-179">UserDrivenUpdate</span></span> | <span data-ttu-id="1690d-180">사용자 업데이트를 진행 중인 경우를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-180">When a user update is in progress.</span></span> <span data-ttu-id="1690d-181">크기 조정 작업일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-181">This could be a resize operation.</span></span> | <span data-ttu-id="1690d-182">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-182">No</span></span> |
| <span data-ttu-id="1690d-183">VipUnResponsive</span><span class="sxs-lookup"><span data-stu-id="1690d-183">VipUnResponsive</span></span> | <span data-ttu-id="1690d-184">게이트웨이의 기본 인스턴스에 연결할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-184">Cannot reach the primary instance of the Gateway.</span></span> <span data-ttu-id="1690d-185">상태 검색에 실패하면 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-185">This happens when the health probe fails.</span></span> | <span data-ttu-id="1690d-186">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-186">No</span></span> |
| <span data-ttu-id="1690d-187">PlatformInActive</span><span class="sxs-lookup"><span data-stu-id="1690d-187">PlatformInActive</span></span> | <span data-ttu-id="1690d-188">플랫폼에 문제가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-188">There is an issue with the platform.</span></span> | <span data-ttu-id="1690d-189">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-189">No</span></span>|
| <span data-ttu-id="1690d-190">ServiceNotRunning</span><span class="sxs-lookup"><span data-stu-id="1690d-190">ServiceNotRunning</span></span> | <span data-ttu-id="1690d-191">기본 서비스가 실행되고 있지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-191">The underlying service is not running.</span></span> | <span data-ttu-id="1690d-192">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-192">No</span></span>|
| <span data-ttu-id="1690d-193">NoConnectionsFoundForGateway</span><span class="sxs-lookup"><span data-stu-id="1690d-193">NoConnectionsFoundForGateway</span></span> | <span data-ttu-id="1690d-194">게이트웨이에 연결이 존재하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-194">No Connections exists on the gateway.</span></span> <span data-ttu-id="1690d-195">단지 경고일 뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-195">This is only a warning.</span></span>| <span data-ttu-id="1690d-196">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-196">No</span></span>|
| <span data-ttu-id="1690d-197">ConnectionsNotConnected</span><span class="sxs-lookup"><span data-stu-id="1690d-197">ConnectionsNotConnected</span></span> | <span data-ttu-id="1690d-198">연결이 이루어지지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-198">None of the Connections are connected.</span></span> <span data-ttu-id="1690d-199">단지 경고일 뿐입니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-199">This is only a warning.</span></span>| <span data-ttu-id="1690d-200">예</span><span class="sxs-lookup"><span data-stu-id="1690d-200">Yes</span></span>|
| <span data-ttu-id="1690d-201">GatewayCPUUsageExceeded</span><span class="sxs-lookup"><span data-stu-id="1690d-201">GatewayCPUUsageExceeded</span></span> | <span data-ttu-id="1690d-202">현재 게이트웨이 CPU 사용량이 95%를 초과했습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-202">The current Gateway usage CPU usage is > 95%.</span></span> | <span data-ttu-id="1690d-203">예</span><span class="sxs-lookup"><span data-stu-id="1690d-203">Yes</span></span> |

### <a name="connection"></a><span data-ttu-id="1690d-204">연결</span><span class="sxs-lookup"><span data-stu-id="1690d-204">Connection</span></span>

| <span data-ttu-id="1690d-205">오류 유형</span><span class="sxs-lookup"><span data-stu-id="1690d-205">Fault Type</span></span> | <span data-ttu-id="1690d-206">이유</span><span class="sxs-lookup"><span data-stu-id="1690d-206">Reason</span></span> | <span data-ttu-id="1690d-207">로그</span><span class="sxs-lookup"><span data-stu-id="1690d-207">Log</span></span>|
|---|---|---|
| <span data-ttu-id="1690d-208">NoFault</span><span class="sxs-lookup"><span data-stu-id="1690d-208">NoFault</span></span> | <span data-ttu-id="1690d-209">오류가 발견되지 않은 경우를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-209">When no error is detected.</span></span> |<span data-ttu-id="1690d-210">예</span><span class="sxs-lookup"><span data-stu-id="1690d-210">Yes</span></span>|
| <span data-ttu-id="1690d-211">GatewayNotFound</span><span class="sxs-lookup"><span data-stu-id="1690d-211">GatewayNotFound</span></span> | <span data-ttu-id="1690d-212">게이트웨이를 찾을 수 없거나 게이트웨이가 프로비저닝되지 않았습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-212">Cannot find Gateway or Gateway is not provisioned.</span></span> |<span data-ttu-id="1690d-213">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-213">No</span></span>|
| <span data-ttu-id="1690d-214">PlannedMaintenance</span><span class="sxs-lookup"><span data-stu-id="1690d-214">PlannedMaintenance</span></span> | <span data-ttu-id="1690d-215">게이트웨이 인스턴스가 유지 관리되고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-215">Gateway instance is under maintenance.</span></span>  |<span data-ttu-id="1690d-216">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-216">No</span></span>|
| <span data-ttu-id="1690d-217">UserDrivenUpdate</span><span class="sxs-lookup"><span data-stu-id="1690d-217">UserDrivenUpdate</span></span> | <span data-ttu-id="1690d-218">사용자 업데이트를 진행 중인 경우를 나타냅니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-218">When a user update is in progress.</span></span> <span data-ttu-id="1690d-219">크기 조정 작업일 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-219">This could be a resize operation.</span></span>  | <span data-ttu-id="1690d-220">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-220">No</span></span> |
| <span data-ttu-id="1690d-221">VipUnResponsive</span><span class="sxs-lookup"><span data-stu-id="1690d-221">VipUnResponsive</span></span> | <span data-ttu-id="1690d-222">게이트웨이의 기본 인스턴스에 연결할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-222">Cannot reach the primary instance of the Gateway.</span></span> <span data-ttu-id="1690d-223">상태 검색에 실패하면 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-223">It happens when the health probe fails.</span></span> | <span data-ttu-id="1690d-224">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-224">No</span></span> |
| <span data-ttu-id="1690d-225">ConnectionEntityNotFound</span><span class="sxs-lookup"><span data-stu-id="1690d-225">ConnectionEntityNotFound</span></span> | <span data-ttu-id="1690d-226">연결 구성이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-226">Connection configuration is missing.</span></span> | <span data-ttu-id="1690d-227">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-227">No</span></span> |
| <span data-ttu-id="1690d-228">ConnectionIsMarkedDisconnected</span><span class="sxs-lookup"><span data-stu-id="1690d-228">ConnectionIsMarkedDisconnected</span></span> | <span data-ttu-id="1690d-229">연결이 "연결 끊김"으로 표시되었습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-229">The Connection is marked "disconnected."</span></span> |<span data-ttu-id="1690d-230">아니요</span><span class="sxs-lookup"><span data-stu-id="1690d-230">No</span></span>|
| <span data-ttu-id="1690d-231">ConnectionNotConfiguredOnGateway</span><span class="sxs-lookup"><span data-stu-id="1690d-231">ConnectionNotConfiguredOnGateway</span></span> | <span data-ttu-id="1690d-232">기본 서비스에 연결이 구성되어 있지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-232">The underlying service does not have the Connection configured.</span></span> | <span data-ttu-id="1690d-233">예</span><span class="sxs-lookup"><span data-stu-id="1690d-233">Yes</span></span> |
| <span data-ttu-id="1690d-234">ConnectionMarkedStandy</span><span class="sxs-lookup"><span data-stu-id="1690d-234">ConnectionMarkedStandy</span></span> | <span data-ttu-id="1690d-235">기본 서비스가 대기로 표시되었습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-235">The underlying service is marked as standby.</span></span>| <span data-ttu-id="1690d-236">예</span><span class="sxs-lookup"><span data-stu-id="1690d-236">Yes</span></span>|
| <span data-ttu-id="1690d-237">인증</span><span class="sxs-lookup"><span data-stu-id="1690d-237">Authentication</span></span> | <span data-ttu-id="1690d-238">미리 공유한 키가 일치하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-238">Preshared Key mismatch.</span></span> | <span data-ttu-id="1690d-239">예</span><span class="sxs-lookup"><span data-stu-id="1690d-239">Yes</span></span>|
| <span data-ttu-id="1690d-240">PeerReachability</span><span class="sxs-lookup"><span data-stu-id="1690d-240">PeerReachability</span></span> | <span data-ttu-id="1690d-241">피어 게이트웨이에 연결할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-241">The peer gateway is not reachable.</span></span> | <span data-ttu-id="1690d-242">예</span><span class="sxs-lookup"><span data-stu-id="1690d-242">Yes</span></span>|
| <span data-ttu-id="1690d-243">IkePolicyMismatch</span><span class="sxs-lookup"><span data-stu-id="1690d-243">IkePolicyMismatch</span></span> | <span data-ttu-id="1690d-244">피어 게이트웨이에 Azure에서 지원되지 않는 IKE 정책이 있습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-244">The peer gateway has IKE policies that are not supported by Azure.</span></span> | <span data-ttu-id="1690d-245">예</span><span class="sxs-lookup"><span data-stu-id="1690d-245">Yes</span></span>|
| <span data-ttu-id="1690d-246">WfpParse 오류</span><span class="sxs-lookup"><span data-stu-id="1690d-246">WfpParse Error</span></span> | <span data-ttu-id="1690d-247">WFP 로그를 구문 분석하는 동안 오류가 발생했습니다.</span><span class="sxs-lookup"><span data-stu-id="1690d-247">An error occurred parsing the WFP log.</span></span> |<span data-ttu-id="1690d-248">예</span><span class="sxs-lookup"><span data-stu-id="1690d-248">Yes</span></span>|

## <a name="next-steps"></a><span data-ttu-id="1690d-249">다음 단계</span><span class="sxs-lookup"><span data-stu-id="1690d-249">Next steps</span></span>

<span data-ttu-id="1690d-250">[Azure Network Watcher 문제 해결을 사용하여 VPN 게이트웨이 모니터링](network-watcher-monitor-with-azure-automation.md)을 방문하여 PowerShell 및 Azure Automation으로 VPN Gateway 연결 확인에 대해 알아보기</span><span class="sxs-lookup"><span data-stu-id="1690d-250">Learn to check VPN Gateway connectivity with PowerShell and Azure Automation by visiting [Monitor VPN gateways with Azure Network Watcher troubleshooting](network-watcher-monitor-with-azure-automation.md)</span></span>

[1]: ./media/network-watcher-diagnose-on-premises-connectivity/figure1.png
