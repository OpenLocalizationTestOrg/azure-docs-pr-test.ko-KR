---
title: "Azure Virtual Machines의 백업 오류 문제 해결 | Microsoft Docs"
description: "Azure 가상 컴퓨터의 백업 및 복원 문제 해결"
services: backup
documentationcenter: 
author: trinadhk
manager: shreeshd
editor: 
ms.assetid: 73214212-57a4-4b57-a2e2-eaf9d7fde67f
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/17/2017
ms.author: trinadhk;markgal;jpallavi;
ms.openlocfilehash: dbd70bdbb17d99c5025018e76ea756b1b1528a3e
ms.sourcegitcommit: 18ad9bc049589c8e44ed277f8f43dcaa483f3339
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 08/29/2017
---
# <a name="troubleshoot-azure-virtual-machine-backup"></a><span data-ttu-id="98d92-103">Azure 가상 컴퓨터 백업 문제 해결</span><span class="sxs-lookup"><span data-stu-id="98d92-103">Troubleshoot Azure virtual machine backup</span></span>
> [!div class="op_single_selector"]
> * [<span data-ttu-id="98d92-104">복구 서비스 자격 증명 모음</span><span class="sxs-lookup"><span data-stu-id="98d92-104">Recovery services vault</span></span>](backup-azure-vms-troubleshoot.md)
> * [<span data-ttu-id="98d92-105">백업 자격 증명 모음</span><span class="sxs-lookup"><span data-stu-id="98d92-105">Backup vault</span></span>](backup-azure-vms-troubleshoot-classic.md)
>
>

<span data-ttu-id="98d92-106">아래 표에 나열된 정보를 참조하여 Azure 백업을 사용하는 동안 발생하는 오류를 해결할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-106">You can troubleshoot errors encountered while using Azure Backup with information listed in the table below.</span></span>

## <a name="backup"></a><span data-ttu-id="98d92-107">백업</span><span class="sxs-lookup"><span data-stu-id="98d92-107">Backup</span></span>
| <span data-ttu-id="98d92-108">오류 세부 정보</span><span class="sxs-lookup"><span data-stu-id="98d92-108">Error details</span></span> | <span data-ttu-id="98d92-109">해결 방법</span><span class="sxs-lookup"><span data-stu-id="98d92-109">Workaround</span></span> |
| --- | --- |
| <span data-ttu-id="98d92-110">VM이 더 이상 존재하지 않기 때문에 작업을 수행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-110">Could not perform the operation as VM no longer exists.</span></span> <span data-ttu-id="98d92-111">- 백업 데이터를 삭제하지 않고 가상 컴퓨터의 보호를 중지합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-111">- Stop protecting virtual machine without deleting backup data.</span></span> <span data-ttu-id="98d92-112">자세한 내용: http://go.microsoft.com/fwlink/?LinkId=808124</span><span class="sxs-lookup"><span data-stu-id="98d92-112">More details at http://go.microsoft.com/fwlink/?LinkId=808124</span></span> |<span data-ttu-id="98d92-113">이는 주 VM이 삭제되었지만 백업 정책이 백업을 수행하기 위해 계속 VM을 검색할 때 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-113">This happens when the primary VM is deleted, but the backup policy continues looking for a VM to back up.</span></span> <span data-ttu-id="98d92-114">이 오류를 해결하려면 </span><span class="sxs-lookup"><span data-stu-id="98d92-114">To fix this error:</span></span> <ol><li> <span data-ttu-id="98d92-115">동일한 이름 및 동일한 리소스 그룹 이름[클라우드 서비스 이름]으로 가상 컴퓨터를 다시 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-115">Recreate the virtual machine with the same name and same resource group name [cloud service name],</span></span><br><span data-ttu-id="98d92-116">또는</span><span class="sxs-lookup"><span data-stu-id="98d92-116">(OR)</span></span></li><li> <span data-ttu-id="98d92-117">백업 데이터를 삭제하거나 삭제하지 않고 가상 컴퓨터의 보호를 중지합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-117">Stop protecting virtual machine with or without deleting the backup data.</span></span> <span data-ttu-id="98d92-118">[자세한 내용](http://go.microsoft.com/fwlink/?LinkId=808124).</span><span class="sxs-lookup"><span data-stu-id="98d92-118">[More details](http://go.microsoft.com/fwlink/?LinkId=808124)</span></span></li></ol> |
| <span data-ttu-id="98d92-119">가상 컴퓨터에 네트워크 연결이 없으므로 스냅숏 작업이 실패했습니다. VM이 네트워크에 액세스할 수 있는지 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-119">Snapshot operation failed due to no network connectivity on the virtual machine - Ensure that VM has network access.</span></span> <span data-ttu-id="98d92-120">스냅숏이 성공하기 위해서는 Azure 데이터 센터 IP 범위를 허용 목록에 추가하거나 네트워크 액세스를 위해 프록시 서버를 설정하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-120">For snapshot to succeed, either whitelist Azure datacenter IP ranges or set up a proxy server for network access.</span></span> <span data-ttu-id="98d92-121">자세한 내용은 http://go.microsoft.com/fwlink/?LinkId=800034를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-121">For more details, refer to  http://go.microsoft.com/fwlink/?LinkId=800034.</span></span> <span data-ttu-id="98d92-122">이미 프록시 서버를 사용 중인 경우 프록시 서버 설정이 제대로 구성되어 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-122">If you are already using proxy server, make sure that proxy server settings are configured correctly</span></span> | <span data-ttu-id="98d92-123">이 오류는 가상 컴퓨터에서 아웃바운드 인터넷 연결을 거부하는 경우 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-123">This error is thrown when you deny the outbound internet connectivity on the virtual machine.</span></span> <span data-ttu-id="98d92-124">가상 컴퓨터의 기본 디스크 스냅숏을 만들기 위해서는 VM 스냅숏 확장에 인터넷 연결이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-124">Internet connectivity is required for VM snapshot extension to take a snapshot of underlying disks of the virtual machine.</span></span> <span data-ttu-id="98d92-125">네트워크 액세스 차단으로 인한 스냅숏 오류를 해결하는 방법에 대해 [자세히 알아보세요](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#snapshot-operation-failed-due-to-no-network-connectivity-on-the-virtual-machine).</span><span class="sxs-lookup"><span data-stu-id="98d92-125">[Learn more](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#snapshot-operation-failed-due-to-no-network-connectivity-on-the-virtual-machine) on how to fix snapshot failures due to blocked network access.</span></span> |
| <span data-ttu-id="98d92-126">VM 에이전트가 Azure Backup 서비스와 통신할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-126">VM agent is unable to communicate with the Azure Backup Service.</span></span> <span data-ttu-id="98d92-127">- VM이 네트워크에 연결되어 있고 VM 에이전트가 최신이며 실행 중인지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-127">- Ensure the VM has network connectivity and the VM agent is latest and running.</span></span> <span data-ttu-id="98d92-128">자세한 내용은 http://go.microsoft.com/fwlink/?LinkId=800034를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-128">For more information, please refer to  http://go.microsoft.com/fwlink/?LinkId=800034</span></span> |<span data-ttu-id="98d92-129">이 오류는 VM 에이전트에 문제가 있거나 Azure 인프라에 대한 네트워크 액세스가 어떤 방식으로든 차단된 경우에 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-129">This error is thrown if there is a problem with the VM Agent or network access to the Azure infrastructure is blocked in some way.</span></span> <span data-ttu-id="98d92-130">VM 스냅숏 문제 디버깅에 대해 [자세히 알아봅니다](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#vm-agent-unable-to-communicate-with-azure-backup).</span><span class="sxs-lookup"><span data-stu-id="98d92-130">[Learn more](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#vm-agent-unable-to-communicate-with-azure-backup) about debugging up VM snapshot issues.</span></span><br> <span data-ttu-id="98d92-131">VM 에이전트가 아무 문제도 유발하지 않으면, VM을 다시 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-131">If the VM agent is not causing any issues, then restart the VM.</span></span> <span data-ttu-id="98d92-132">가끔 잘못된 VM 상태가 문제를 일으킬 수 있으며 VM을 다시 시작하여 “잘못된 상태”를 초기화합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-132">At times an incorrect VM state can cause issues, and restarting the VM resets this "bad state".</span></span> |
| <span data-ttu-id="98d92-133">VM이 실패한 프로비전 상태임 - VM을 다시 시작하고 VM이 실행 중이거나 백업을 위해 종료 상태인지 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-133">VM is in Failed Provisioning State - Please restart the VM and make sure that the VM is in Running or Shut-down state for backup</span></span> | <span data-ttu-id="98d92-134">확장 오류 중 하나로 인해 VM 상태가 실패한 프로비전 상태로 이어질 때 이러한 현상이 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-134">This occurs when one of the extension failures leads VM state to be in failed provisioning state.</span></span> <span data-ttu-id="98d92-135">확장 목록으로 이동하여 실패한 확장이 있는지 확인하고 제거한 후 가상 컴퓨터를 다시 시작해 보세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-135">Go to extensions list and see if there is a failed extension, remove it and try restarting the virtual machine.</span></span> <span data-ttu-id="98d92-136">모든 확장이 실행 중 상태인 경우 VM 에이전트 서비스가 실행 중인지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-136">If all extensions are in running state, check if VM agent service is running.</span></span> <span data-ttu-id="98d92-137">실행 중이 아니면 VM 에이전트 서비스를 다시 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-137">If not, restart the VM agent service.</span></span> | 
| <span data-ttu-id="98d92-138">관리 디스크에 대해 VMSnapshot 확장 작업이 실패함 - 백업 작업을 다시 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-138">VMSnapshot extension operation failed for managed disks - Please retry the backup operation.</span></span> <span data-ttu-id="98d92-139">문제가 반복되면 'http://go.microsoft.com/fwlink/?LinkId=800034'의 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-139">If the issue repeats, follow the instructions at 'http://go.microsoft.com/fwlink/?LinkId=800034'.</span></span> <span data-ttu-id="98d92-140">그래도 실패하면 Microsoft 지원에 문의하시기 바랍니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-140">If it fails further, please contact Microsoft support</span></span> | <span data-ttu-id="98d92-141">Azure Backup 서비스에서 스냅숏을 트리거하는 데 실패한 경우 이 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-141">This error when Azure Backup service fails to trigger a snapshot.</span></span> <span data-ttu-id="98d92-142">VM 스냅숏 디버깅 문제에 대해 [자세히 알아보세요](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#vmsnapshot-extension-operation-failed).</span><span class="sxs-lookup"><span data-stu-id="98d92-142">[Learn more](backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout.md#vmsnapshot-extension-operation-failed) about debugging VM snapshot issues.</span></span> |
| <span data-ttu-id="98d92-143">저장소 계정에 사용 가능한 공간이 부족하여 가상 컴퓨터의 스냅숏을 복사할 수 없음 - 저장소 계정에 가상 컴퓨터에 연결된 프리미엄 저장소 디스크에 있는 데이터에 해당하는 만큼의 여유 공간이 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-143">Could not copy the snapshot of the virtual machine, due to insufficient free space in the storage account - Ensure that storage account has free space equivalent to the data present on the premium storage disks attached to the virtual machine</span></span> | <span data-ttu-id="98d92-144">프리미엄 VM의 경우 저장소 계정에 스냅숏을 복사합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-144">In case of premium VMs, we copy the snapshot to storage account.</span></span> <span data-ttu-id="98d92-145">이 작업은 스냅숏에서 작동하는 백업 관리 트래픽이 프리미엄 디스크를 사용하는 응용 프로그램에서 사용 가능한 IOPS 수를 제한하지 않도록 하기 위한 것입니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-145">This is to make sure that backup management traffic, which works on snapshot, doesn't limit the number of IOPS available to the application using premium disks.</span></span> <span data-ttu-id="98d92-146">Azure Backup 서비스에서 저장소 계정에 스냅숏을 복사하고 저장소 계정의 복사된 위치에서 자격 증명 모음으로 데이터를 전송할 수 있도록 총 저장소 계정 공간의 50%만 할당하는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-146">Microsoft recommends you allocate only 50% of the total storage account space so the Azure Backup service can copy the snapshot to storage account and transfer data from this copied location in storage account to the vault.</span></span> | 
| <span data-ttu-id="98d92-147">VM 에이전트가 응답하지 않으므로 작업을 수행할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-147">Unable to perform the operation as the VM agent is not responsive</span></span> |<span data-ttu-id="98d92-148">이 오류는 VM 에이전트에 문제가 있거나 Azure 인프라에 대한 네트워크 액세스가 어떤 방식으로든 차단된 경우에 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-148">This error is thrown if there is a problem with the VM Agent or network access to the Azure infrastructure is blocked in some way.</span></span> <span data-ttu-id="98d92-149">Windows VM의 경우 서비스의 VM 에이전트 서비스 상태 및 에이전트가 제어판의 프로그램에 표시되는 여부를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-149">For Windows VMs, check the VM agent service status in services and whether the agent appears in programs in control panel.</span></span> <span data-ttu-id="98d92-150">제어판에서 프로그램을 제거하고 [아래](#vm-agent) 설명에 따라 에이전트를 다시 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-150">Try removing the program from control panel and re-installing the agent as mentioned [below](#vm-agent).</span></span> <span data-ttu-id="98d92-151">에이전트를 다시 설치한 후 임시 백업을 트리거하여 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-151">After re-installing the agent, trigger an adhoc backup to verify.</span></span> |
| <span data-ttu-id="98d92-152">복구 서비스 확장 작업이 실패했습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-152">Recovery services extension operation failed.</span></span> <span data-ttu-id="98d92-153">- 최신 가상 컴퓨터 에이전트가 가상 컴퓨터에 표시되고 에이전트 서비스가 실행되도록 하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-153">- Please make sure that latest virtual machine agent is present on the virtual machine and agent service is running.</span></span> <span data-ttu-id="98d92-154">백업 작업을 다시 시도하고 실패한 경우 Microsoft 지원에 문의하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-154">Please retry backup operation and if it fails, contact Microsoft support.</span></span> |<span data-ttu-id="98d92-155">VM 에이전트가 만료된 경우에 이 오류가 throw됩니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-155">This error is thrown when VM agent is out of date.</span></span> <span data-ttu-id="98d92-156">아래의 "VM 에이전트 업데이트" 섹션을 참조하여 VM 에이전트를 업데이트합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-156">Refer “Updating the VM Agent” section below to update the VM agent.</span></span> |
| <span data-ttu-id="98d92-157">가상 컴퓨터가 존재하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-157">Virtual machine doesn't exist.</span></span> <span data-ttu-id="98d92-158">- 해당 가상 컴퓨터가 존재하는지 확인하거나 다른 가상 컴퓨터를 선택하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-158">- Please make sure that virtual machine exists or select a different virtual machine.</span></span> |<span data-ttu-id="98d92-159">이는 주 VM이 삭제되었지만 백업 정책이 백업을 수행하기 위해 계속 VM을 검색할 때 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-159">This happens when the primary VM is deleted but the backup policy continues to look for a VM to perform backup.</span></span> <span data-ttu-id="98d92-160">이 오류를 해결하려면 </span><span class="sxs-lookup"><span data-stu-id="98d92-160">To fix this error:</span></span> <ol><li> <span data-ttu-id="98d92-161">동일한 이름 및 동일한 리소스 그룹 이름[클라우드 서비스 이름]으로 가상 컴퓨터를 다시 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-161">Recreate the virtual machine with the same name and same resource group name [cloud service name],</span></span><br><span data-ttu-id="98d92-162">또는</span><span class="sxs-lookup"><span data-stu-id="98d92-162">(OR)</span></span><br></li><li><span data-ttu-id="98d92-163">백업 데이터를 삭제하지 않고 가상 컴퓨터의 보호를 중지합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-163">Stop protecting the virtual machine without deleting the backup data.</span></span> <span data-ttu-id="98d92-164">[자세한 내용](http://go.microsoft.com/fwlink/?LinkId=808124).</span><span class="sxs-lookup"><span data-stu-id="98d92-164">[More details](http://go.microsoft.com/fwlink/?LinkId=808124)</span></span></li></ol> |
| <span data-ttu-id="98d92-165">명령을 실행하지 못했습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-165">Command execution failed.</span></span> <span data-ttu-id="98d92-166">- 현재 이 항목에 대해 다른 작업이 진행 중입니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-166">- Another operation is currently in progress on this item.</span></span> <span data-ttu-id="98d92-167">이전 작업이 완료될 때까지 기다린 후 다시 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-167">Please wait until the previous operation is completed, and then retry</span></span> |<span data-ttu-id="98d92-168">VM에 대한 기존 백업이 실행 중이며, 기존 작업이 실행되는 동안에는 새 작업을 시작할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-168">An existing backup on the VM is running, and a new job cannot be started while the existing job is running.</span></span> |
| <span data-ttu-id="98d92-169">백업 자격 증명 모음에서 VHD를 복사하는 작업이 시간 초과되었습니다. 몇 분 후에 작업을 다시 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-169">Copying VHDs from the backup vault timed out - Please retry the operation in a few minutes.</span></span> <span data-ttu-id="98d92-170">문제가 지속되면 Microsoft 지원에 문의하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-170">If the problem persists, contact Microsoft Support.</span></span> | <span data-ttu-id="98d92-171">저장소 쪽에서 일시적인 오류가 발생하거나 백업 서비스가 제한 시간 내에 VM을 호스트하는 저장소 계정에서 Vault로 데이터를 전송하기 위한 충분한 IOPS를 얻지 못하는 경우에 이러한 문제가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-171">This happens if there is a transient error on storage side or if backup service is not getting sufficient IOPS from storage account hosting the VM in order to transfer data within timeout period to vault.</span></span> <span data-ttu-id="98d92-172">백업을 설정하는 동안 [모범 사례](backup-azure-vms-introduction.md#best-practices)를 따랐는지 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-172">Make sure that you followed [Best practices](backup-azure-vms-introduction.md#best-practices) while setting up backup.</span></span> <span data-ttu-id="98d92-173">VM을 로드되지 않은 다른 저장소 계정으로 이동한 후 백업을 다시 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-173">Try moving VM to a different storage account which is not loaded and retry backup.</span></span>|
| <span data-ttu-id="98d92-174">내부 오류가 발생하여 백업하지 못했습니다. 몇 분 후에 작업을 다시 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-174">Backup failed with an internal error - Please retry the operation in a few minutes.</span></span> <span data-ttu-id="98d92-175">문제가 지속되면 Microsoft 지원에 문의하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-175">If the problem persists, contact Microsoft Support</span></span> |<span data-ttu-id="98d92-176">이 오류는 다음 두 가지 이유로 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-176">You can get this error for 2 reasons:</span></span> <ol><li> <span data-ttu-id="98d92-177">VM 저장소에 액세스하는 데 일시적인 문제가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-177">There is a transient issue in accessing the VM storage.</span></span> <span data-ttu-id="98d92-178">[Azure 상태](https://azure.microsoft.com/en-us/status/)를 확인하여 하위 지역의 계산, 저장소 또는 네트워크와 관련하여 진행 중인 문제가 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-178">Please check [Azure Status](https://azure.microsoft.com/en-us/status/) to see if there is any on-going issue related to compute, storage, or networking in the region.</span></span> <span data-ttu-id="98d92-179">문제가 해결되면 백업 작업을 다시 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-179">Then retry the backup job once the issue is resolved.</span></span> <li><span data-ttu-id="98d92-180">원래 VM이 삭제되었으므로 복구 지점을 가져올 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-180">The original VM has been deleted and therefore, the recovery point cannot be taken.</span></span> <span data-ttu-id="98d92-181">삭제된 VM의 백업 데이터를 유지하지만 백업 오류를 제거하려면 VM의 보호를 해제하고 데이터 유지 옵션을 선택합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-181">To keep the backup data for a deleted VM, but remove the backup errors: Unprotect the VM and choose the option to keep the data.</span></span> <span data-ttu-id="98d92-182">이 작업을 수행하면 예약된 백업 작업 및 되풀이 오류 메시지가 중지됩니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-182">This action stops the scheduled backup job and the recurring error messages.</span></span> |
| <span data-ttu-id="98d92-183">선택한 항목에 Azure Recovery Services 서비스 확장을 설치하지 못했습니다. Azure Recovery Services 확장의 필수 조건인 VM 에이전트가 있어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-183">Failed to install the Azure Recovery Services extension on the selected item - The VM agent is a prerequisite for the Azure Recovery Services Extension.</span></span> <span data-ttu-id="98d92-184">Azure VM 에이전트를 설치하고 등록 작업 다시 시작</span><span class="sxs-lookup"><span data-stu-id="98d92-184">Install the Azure VM agent and restart the registration operation</span></span> |<ol> <li><span data-ttu-id="98d92-185">VM 에이전트가 제대로 설치되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-185">Check if the VM agent has been installed correctly.</span></span> <li><span data-ttu-id="98d92-186">VM 구성의 플래그가 올바르게 설정되었는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-186">Ensure the flag on the VM config is set correctly.</span></span></ol> <span data-ttu-id="98d92-187">VM 에이전트 설치 및 VM 에이전트 설치의 유효성을 검사하는 방법에 대해 [자세히 알아보세요](#validating-vm-agent-installation).</span><span class="sxs-lookup"><span data-stu-id="98d92-187">[Read more](#validating-vm-agent-installation) about installing the VM agent, and how to validate the VM agent installation.</span></span> |
| <span data-ttu-id="98d92-188">“COM+” 오류로 인해 확장 설치가 실패하면 Microsoft Distributed Transaction Coordinator와 통신할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-188">Extension installation failed with the error "COM+ was unable to talk to the Microsoft Distributed Transaction Coordinator</span></span> |<span data-ttu-id="98d92-189">이는 대개 COM+ 서비스가 실행되고 있지 않음을 의미합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-189">This usually means that the COM+ service is not running.</span></span> <span data-ttu-id="98d92-190">이 문제 해결에 대한 도움은 Microsoft 지원에 문의하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-190">Contact Microsoft support for help on fixing this issue.</span></span> |
| <span data-ttu-id="98d92-191">“이 드라이브는 BitLocker 드라이브 암호화로 잠겨 있습니다.”라는 VSS 작업 오류와 함께 스냅숏 작업이 실패했습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-191">Snapshot operation failed with the VSS operation error "This drive is locked by BitLocker Drive Encryption.</span></span> <span data-ttu-id="98d92-192">제어판에서 이 드라이브의 잠금을 해제해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-192">You must unlock this drive from the Control Panel.</span></span> |<span data-ttu-id="98d92-193">VM에 있는 모든 드라이브의 BitLocker를 끄고 VSS 문제가 해결 되었는지 관찰합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-193">Turn off BitLocker for all drives on the VM and observe if the VSS issue is resolved</span></span> |
| <span data-ttu-id="98d92-194">VM이 백업을 허용하지 않는 상태입니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-194">VM is not in a state that allows backups.</span></span> |<ul><li><span data-ttu-id="98d92-195">VM이 실행 중 및 종료 사이의 일시적 상태인지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-195">Check if VM is in a transient state between Running and Shut down.</span></span> <span data-ttu-id="98d92-196">그럴 경우 VM 상태가 이러한 상태 중 하나가 될 때까지 기다렸다가 백업을 다시 트리거하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-196">If it is, wait for the VM state to be one of them and trigger backup again.</span></span> <li> <span data-ttu-id="98d92-197">VM이 Linux 에이전트이고 [Security Enhanced Linux] 커널 모듈을 사용하는 경우 보안 정책에서 Linux 에이전트 경로(_/var/lib/waagent_)를 제외하여 백업 확장이 설치되도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-197">If the VM is a Linux VM and uses [Security Enhanced Linux] kernel module, you need to exclude the Linux Agent path(_/var/lib/waagent_) from security policy to make sure backup extension gets installed.</span></span>  |
| <span data-ttu-id="98d92-198">Azure 가상 컴퓨터를 찾을 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-198">Azure Virtual Machine Not Found.</span></span> |<span data-ttu-id="98d92-199">이는 주 VM이 삭제되었지만 백업 정책이 백업을 수행하기 위해 계속 VM을 검색할 때 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-199">This happens when the primary VM is deleted but the backup policy continues to look for a VM to perform back up.</span></span> <span data-ttu-id="98d92-200">이 오류를 해결하려면 </span><span class="sxs-lookup"><span data-stu-id="98d92-200">To fix this error:</span></span> <ol><li><span data-ttu-id="98d92-201">동일한 이름 및 동일한 리소스 그룹 이름[클라우드 서비스 이름]으로 가상 컴퓨터를 다시 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-201">Recreate the virtual machine with the same name and same resource group name [cloud service name],</span></span> <br><span data-ttu-id="98d92-202">또는</span><span class="sxs-lookup"><span data-stu-id="98d92-202">(OR)</span></span> <li> <span data-ttu-id="98d92-203">이 VM에 대한 보호를 사용하지 않도록 설정하여 백업 작업이 생성되지 않게 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-203">Disable protection for this VM so the backup jobs will not be created.</span></span> </ol> |
| <span data-ttu-id="98d92-204">가상 컴퓨터에는 가상 컴퓨터 에이전트가 존재하지 않습니다. 필수 구성 요소 및 VM 에이전트를 설치하고 작업을 다시 시작하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-204">Virtual machine agent is not present on the virtual machine - Please install any prerequisite and the VM agent, and then restart the operation.</span></span> |<span data-ttu-id="98d92-205">[자세히 알아보세요](#vm-agent) .</span><span class="sxs-lookup"><span data-stu-id="98d92-205">[Read more](#vm-agent) about VM agent installation, and how to validate the VM agent installation.</span></span> |
| <span data-ttu-id="98d92-206">VSS 기록기가 오류 상태이므로 스냅숏 작업이 실패함</span><span class="sxs-lookup"><span data-stu-id="98d92-206">Snapshot operation failed due to VSS Writers in bad state</span></span> |<span data-ttu-id="98d92-207">오류 상태인 VSS(볼륨 섀도 복사본 서비스) 기록기를 다시 시작해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-207">You need to restart VSS(Volume Shadow copy Service) writers that are in bad state.</span></span> <span data-ttu-id="98d92-208">이를 위해 관리자 권한 명령 프롬프트에서 _vssadmin list writers_를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-208">To achieve this, from an elevated command prompt, run _vssadmin list writers_.</span></span> <span data-ttu-id="98d92-209">출력에는 모든 VSS 기록기와 해당 상태가 포함됩니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-209">Output contains all VSS writers and their state.</span></span> <span data-ttu-id="98d92-210">“[1] 안정” 상태가 아닌 모든 VSS 기록기는 관리자 권한 명령 프롬프트에서 다음 명령을 실행하여 다시 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-210">For every VSS writer whose state is not "[1] Stable", restart VSS writer by running following commands from an elevated command prompt:</span></span><br> <span data-ttu-id="98d92-211">_net stop serviceName_</span><span class="sxs-lookup"><span data-stu-id="98d92-211">_net stop serviceName_</span></span> <br> <span data-ttu-id="98d92-212">_net start serviceName_</span><span class="sxs-lookup"><span data-stu-id="98d92-212">_net start serviceName_</span></span>|
| <span data-ttu-id="98d92-213">구성의 구문 분석 실패로 인해 스냅숏 작업이 실패함</span><span class="sxs-lookup"><span data-stu-id="98d92-213">Snapshot operation failed due to a parsing failure of the configuration</span></span> |<span data-ttu-id="98d92-214">이 문제는 MachineKeys 디렉터리 _%systemdrive%\programdata\microsoft\crypto\rsa\machinekeys_에 대한 권한 변경 때문에 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-214">This happens due to changed permissions on the MachineKeys directory: _%systemdrive%\programdata\microsoft\crypto\rsa\machinekeys_</span></span> <br><span data-ttu-id="98d92-215">아래 명령을 실행하고 MachineKeys 디렉터리에 대한 권한이 기본 권한인지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-215">Please run below command and verify that permissions on MachineKeys directory are default-ones:</span></span><br><span data-ttu-id="98d92-216">_icacls %systemdrive%\programdata\microsoft\crypto\rsa\machinekeys_</span><span class="sxs-lookup"><span data-stu-id="98d92-216">_icacls %systemdrive%\programdata\microsoft\crypto\rsa\machinekeys_</span></span> <br><br> <span data-ttu-id="98d92-217">기본 권한은 다음과 같습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-217">Default permissions are:</span></span><br><span data-ttu-id="98d92-218">Everyone:(R,W)</span><span class="sxs-lookup"><span data-stu-id="98d92-218">Everyone:(R,W)</span></span> <br><span data-ttu-id="98d92-219">BUILTIN\Administrators:(F)</span><span class="sxs-lookup"><span data-stu-id="98d92-219">BUILTIN\Administrators:(F)</span></span><br><br><span data-ttu-id="98d92-220">MachineKeys 디렉터리에 대해 기본값과 다른 권한이 표시되면 아래 단계에 따라 권한을 수정하고, 인증서를 삭제한 후 백업을 트리거하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-220">If you see permissions on MachineKeys directory different than default, please follow below steps to correct permissions, delete the certificate and trigger the backup.</span></span><ol><li><span data-ttu-id="98d92-221">MachineKeys 디렉터리에 대한 권한을 수정합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-221">Fix permissions on MachineKeys directory.</span></span><br><span data-ttu-id="98d92-222">디렉터리에 대해 탐색기 보안 속성 및 고급 보안 설정을 사용하여 권한을 기본값으로 다시 설정하고, 디렉터리에서 추가(기본값 이외) 사용자 개체를 제거하고, 'Everyone ' 권한이 다음에 대해 특수한 액세스 권한을 갖는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-222">Using Explorer Security Properties and Advanced Security Settings on the directory, reset permissions back to the default values, remove any extra (than default) user object from the directory, and ensure that the ‘Everyone’ permissions had special access for:</span></span><br><span data-ttu-id="98d92-223">-폴더 나열/데이터 읽기</span><span class="sxs-lookup"><span data-stu-id="98d92-223">-List folder / read data</span></span> <br><span data-ttu-id="98d92-224">-특성 읽기</span><span class="sxs-lookup"><span data-stu-id="98d92-224">-Read attributes</span></span> <br><span data-ttu-id="98d92-225">-확장된 특성 읽기</span><span class="sxs-lookup"><span data-stu-id="98d92-225">-Read extended attributes</span></span> <br><span data-ttu-id="98d92-226">-파일 만들기/데이터 쓰기</span><span class="sxs-lookup"><span data-stu-id="98d92-226">-Create files / write data</span></span> <br><span data-ttu-id="98d92-227">-폴더 만들기/데이터 추가</span><span class="sxs-lookup"><span data-stu-id="98d92-227">-Create folders / append data</span></span><br><span data-ttu-id="98d92-228">-특성 쓰기</span><span class="sxs-lookup"><span data-stu-id="98d92-228">-Write attributes</span></span><br><span data-ttu-id="98d92-229">-확장된 특성 쓰기</span><span class="sxs-lookup"><span data-stu-id="98d92-229">-Write extended attributes</span></span><br><span data-ttu-id="98d92-230">- 읽기 권한</span><span class="sxs-lookup"><span data-stu-id="98d92-230">-Read permissions</span></span><br><br><li><span data-ttu-id="98d92-231">‘Issued To’ 필드 = "Windows Azure Service Management for Extensions" 또는 "Windows Azure CRP Certificate Generator"가 지정된 인증서를 모두 삭제합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-231">Delete all certificates with field ‘Issued To’ = "Windows Azure Service Management for Extensions" or "Windows Azure CRP Certificate Generator”.</span></span><ul><li><span data-ttu-id="98d92-232">[인증서(로컬 컴퓨터) 콘솔 열기](https://msdn.microsoft.com/library/ms788967(v=vs.110).aspx)</span><span class="sxs-lookup"><span data-stu-id="98d92-232">[Open Certificates(Local computer) console](https://msdn.microsoft.com/library/ms788967(v=vs.110).aspx)</span></span><li><span data-ttu-id="98d92-233">‘Issued To’ 필드 = "Windows Azure Service Management for Extensions" 또는 "Windows Azure CRP Certificate Generator"가 지정된 인증서를 모두 삭제합니다(개인 -> 인증서).</span><span class="sxs-lookup"><span data-stu-id="98d92-233">Delete all certificates (under Personal -> Certificates) with field ‘Issued To’ = "Windows Azure Service Management for Extensions" or "Windows Azure CRP Certificate Generator”.</span></span></ul><li><span data-ttu-id="98d92-234">VM 백업을 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-234">Trigger VM backup.</span></span> </ol>|
| <span data-ttu-id="98d92-235">가상 컴퓨터가 BEK만으로 암호화되었기 때문에 유효성 검사에 실패했습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-235">Validation failed as virtual machine is encrypted with BEK alone.</span></span> <span data-ttu-id="98d92-236">BEK와 KEK 모두로 암호화된 가상 컴퓨터에서만 백업을 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-236">Backups can be enabled only for virtual machines encrypted with both BEK and KEK.</span></span> |<span data-ttu-id="98d92-237">이 경우 가상 시스템을 BitLocker 암호화 키와 키 암호화 키를 모두 사용하여 암호화해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-237">Virtual machine should be encrypted using both BitLocker Encryption Key and Key Encryption Key.</span></span> <span data-ttu-id="98d92-238">그런 후에 백업을 사용하도록 설정해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-238">After that, backup should be enabled.</span></span> |
| <span data-ttu-id="98d92-239">Azure Backup 서비스에는 암호화된 가상 컴퓨터의 백업을 위한 Key Vault에 대해 충분한 권한이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-239">Azure Backup Service does not have sufficient permissions to Key Vault for Backup of Encrypted Virtual Machines.</span></span> |<span data-ttu-id="98d92-240">Backup 서비스에는 [PowerShell 설명서](backup-azure-vms-automation.md)의 **백업 사용** 섹션에 설명된 단계를 사용하여 PowerShell에서 이러한 권한을 제공해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-240">Backup service should be provided these permissions in PowerShell using steps mentioned in **Enable Backup** section of [PowerShell documentation](backup-azure-vms-automation.md).</span></span> |
|<span data-ttu-id="98d92-241">COM+ 오류로 인해 스냅숏 확장 설치가 실패하면 Microsoft Distributed Transaction Coordinator와 통신할 수 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-241">Installation of snapshot extension failed with error - COM+ was unable to talk to the Microsoft Distributed Transaction Coordinator</span></span> | <span data-ttu-id="98d92-242">"COM+ 시스템 응용 프로그램" Windows 서비스를 시작하세요(관리자 권한 명령 프롬프트에서 _net start COMSysApp_).</span><span class="sxs-lookup"><span data-stu-id="98d92-242">Please try to start windows service "COM+ System Application" (from an elevated command prompt - _net start COMSysApp_).</span></span> <br><span data-ttu-id="98d92-243">시작하는 동안 실패하면 아래 단계를 수행하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-243">If it fails while starting, please follow below steps:</span></span><ol><li> <span data-ttu-id="98d92-244">"Distributed Transaction Coordinator" 서비스의 로그온 계정이 "Network Service"인지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-244">Validate that the Logon account of service "Distributed Transaction Coordinator" is "Network Service".</span></span> <span data-ttu-id="98d92-245">그렇지 않으면 "Network Service"로 변경하고 이 서비스를 다시 시작한 후 "COM+ 시스템 응용 프로그램" 서비스를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-245">If it is not, please change it to "Network Service", restart this service and then try to start service "COM+ System Application".'</span></span><li><span data-ttu-id="98d92-246">여전히 시작할 수 없으면 아래 단계에 따라 "Distributed Transaction Coordinator" 서비스를 제거한 후 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-246">If it still fails to start, uninstall/install service "Distributed Transaction Coordinator" by following below steps:</span></span><br> <span data-ttu-id="98d92-247">- MSDTC 서비스 중지</span><span class="sxs-lookup"><span data-stu-id="98d92-247">- Stop the MSDTC service</span></span><br> <span data-ttu-id="98d92-248">- 명령 프롬프트 열기(cmd)</span><span class="sxs-lookup"><span data-stu-id="98d92-248">- Open a command prompt (cmd)</span></span> <br> <span data-ttu-id="98d92-249">- “msdtc -uninstall” 명령 실행</span><span class="sxs-lookup"><span data-stu-id="98d92-249">- Run command “msdtc -uninstall”</span></span> <br> <span data-ttu-id="98d92-250">- “msdtc -install” 명령 실행</span><span class="sxs-lookup"><span data-stu-id="98d92-250">- Run command “msdtc -install”</span></span> <br> <span data-ttu-id="98d92-251">- MSDTC 서비스 시작</span><span class="sxs-lookup"><span data-stu-id="98d92-251">- Start the MSDTC service</span></span><li><span data-ttu-id="98d92-252">Windows 서비스 "COM+ 시스템 응용 프로그램"을 시작한 후 포털에서 백업을 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-252">Start windows service "COM+ System Application" and after it is started, trigger backup from portal.</span></span></ol> |
|  <span data-ttu-id="98d92-253">COM+ 오류로 인해 스냅숏 작업이 실패했습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-253">Snapshot operation failed due to COM+ error</span></span> | <span data-ttu-id="98d92-254">권장 조치는 Windows 서비스 "COM+ 시스템 응용 프로그램"을 다시 시작하는 것입니다(관리자 권한 명령 프롬프트에서 _net start COMSysApp_ 실행).</span><span class="sxs-lookup"><span data-stu-id="98d92-254">The recommended action is to restart windows service "COM+ System Application" (from an elevated command prompt - _net start COMSysApp_).</span></span> <span data-ttu-id="98d92-255">문제가 지속되면 VM을 다시 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-255">If the issue persists, restart the VM.</span></span> <span data-ttu-id="98d92-256">VM을 다시 시작해도 문제가 해결되지 않으면 [VMSnapshot 확장을 제거](https://docs.microsoft.com/en-us/azure/backup/backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout#cause-3-the-backup-extension-fails-to-update-or-load)하고 수동으로 백업을 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-256">If restarting the VM doesn't help, try [removing the VMSnapshot Extension](https://docs.microsoft.com/en-us/azure/backup/backup-azure-troubleshoot-vm-backup-fails-snapshot-timeout#cause-3-the-backup-extension-fails-to-update-or-load) and trigger the backup manually.</span></span> |
| <span data-ttu-id="98d92-257">파일-시스템의 일관된 스냅숏을 생성하기 위해 VM의 탑재 지점 하나 이상을 고정하지 못함</span><span class="sxs-lookup"><span data-stu-id="98d92-257">Failed to freeze one or more mount-points of the VM to take a file-system consistent snapshot</span></span> | <span data-ttu-id="98d92-258">다음 단계를 사용하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-258">Use the following steps:</span></span> <ol><li><span data-ttu-id="98d92-259">_'tune2fs'_ 명령을 사용하여 탑재된 모든 장치의 파일-시스템 상태를 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-259">Check the file-system state of all mounted devices using _'tune2fs'_ command.</span></span><br> <span data-ttu-id="98d92-260">예: tune2fs -l /dev/sdb1 \\</span><span class="sxs-lookup"><span data-stu-id="98d92-260">Eg: tune2fs -l /dev/sdb1 \\</span></span>| <span data-ttu-id="98d92-261">grep "Filesystem state"</span><span class="sxs-lookup"><span data-stu-id="98d92-261">grep "Filesystem state"</span></span> <li><span data-ttu-id="98d92-262">_'umount'_ 명령을 사용하여 파일 시스템 상태가 정리되지 않은 장치를 탑재 해제합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-262">Unmount the devices for which filesystem state is not clean using _'umount'_ command</span></span> <li> <span data-ttu-id="98d92-263">_'fsck'_ 명령을 사용하여 이러한 장치에 대해 FileSystemConsistency Check를 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-263">Run FileSystemConsistency Check on these devices using _'fsck'_ command</span></span> <li> <span data-ttu-id="98d92-264">장치를 다시 탑재하고 백업을 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-264">Mount the devices again and try backup.</span></span></ol> |
| <span data-ttu-id="98d92-265">보안 네트워크 통신 채널을 생성하지 못하여 스냅숏 작업이 실패함</span><span class="sxs-lookup"><span data-stu-id="98d92-265">Snapshot operation failed due to failure in creating secure network communication channel</span></span> | <ol><Li> <span data-ttu-id="98d92-266">관리자 권한 모드에서 regedit.exe를 실행하여 레지스트리 편집기를 엽니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-266">Open Registry Editor by running regedit.exe in an elevated mode.</span></span> <li> <span data-ttu-id="98d92-267">시스템에 있는 모든 버전의 .NetFramework를 파악합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-267">Identify all versions of .NetFramework present in system.</span></span> <span data-ttu-id="98d92-268">이러한 버전은 레지스트리 키 "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft" 아래에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-268">They are present under the hierarchy of registry key "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft"</span></span> <li> <span data-ttu-id="98d92-269">레지스트리 키에 있는 각 .NetFramework에 대해 다음 키를 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-269">For each .NetFramework present in registry key, add following key:</span></span> <br> <span data-ttu-id="98d92-270">"SchUseStrongCrypto"=dword:00000001</span><span class="sxs-lookup"><span data-stu-id="98d92-270">"SchUseStrongCrypto"=dword:00000001</span></span> </ol>|
| <span data-ttu-id="98d92-271">Visual Studio 2012용 Visual C++ 재배포 가능 패키지의 설치 실패로 인해 스냅숏 작업이 실패함</span><span class="sxs-lookup"><span data-stu-id="98d92-271">Snapshot operation failed due to failure in installation of Visual C++ Redistributable for Visual Studio 2012</span></span> | <span data-ttu-id="98d92-272">C:\Packages\Plugins\Microsoft.Azure.RecoveryServices.VMSnapshot\agentVersion으로 이동한 후 vcredist2012_x64를 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-272">Navigate to C:\Packages\Plugins\Microsoft.Azure.RecoveryServices.VMSnapshot\agentVersion and install vcredist2012_x64.</span></span> <span data-ttu-id="98d92-273">이 서비스 설치를 허용하는 레지스트리 키 값이 올바른 값으로 설정되어 있는지 확인합니다. 예를 들어 레지스트리 키 _HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Msiserver_의 값은 4가 아닌 3으로 설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-273">Make sure that registry key value for allowing this service installation is set to correct value i.e. value of registry key  _HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Services\Msiserver_ is set to 3 and not 4.</span></span> <span data-ttu-id="98d92-274">설치하는 데 여전히 문제가 발생할 경우 관리자 권한 명령 프롬프트에서 _MSIEXEC /UNREGISTER_를 실행한 후 _MSIEXEC /REGISTER_를 실행하여 설치 서비스를 다시 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-274">If you are still facing issues with installation, restart installation service by running _MSIEXEC /UNREGISTER_ followed by _MSIEXEC /REGISTER_ from an elevated command prompt.</span></span>  |


## <a name="jobs"></a><span data-ttu-id="98d92-275">작업</span><span class="sxs-lookup"><span data-stu-id="98d92-275">Jobs</span></span>
| <span data-ttu-id="98d92-276">오류 세부 정보</span><span class="sxs-lookup"><span data-stu-id="98d92-276">Error details</span></span> | <span data-ttu-id="98d92-277">해결 방법</span><span class="sxs-lookup"><span data-stu-id="98d92-277">Workaround</span></span> |
| --- | --- |
| <span data-ttu-id="98d92-278">이 작업 유형에 대해서는 취소가 지원되지 않습니다. 작업이 완료될 때까지 기다려주세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-278">Cancellation is not supported for this job type - Please wait until the job completes.</span></span> |<span data-ttu-id="98d92-279">없음</span><span class="sxs-lookup"><span data-stu-id="98d92-279">None</span></span> |
| <span data-ttu-id="98d92-280">작업이 취소 가능한 상태에 있지 않습니다. 작업이 완료될 때까지 기다려주세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-280">The job is not in a cancelable state - Please wait until the job completes.</span></span> <br><span data-ttu-id="98d92-281">또는</span><span class="sxs-lookup"><span data-stu-id="98d92-281">OR</span></span><br> <span data-ttu-id="98d92-282">선택한 작업이 취소 가능한 상태가 아닙니다. 작업이 완료될 때까지 기다려주세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-282">The selected job is not in a cancelable state - Please wait for the job to complete.</span></span> |<span data-ttu-id="98d92-283">작업이 거의 완료되었습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-283">In all likelihood, the job is almost completed.</span></span> <span data-ttu-id="98d92-284">작업이 완료될 때까지 기다리세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-284">Please wait until the job is completed.</span></span>|
| <span data-ttu-id="98d92-285">진행되고 있지 않기 때문에 작업을 취소할 수 없습니다. 취소는 작업이 진행 중인 경우에만 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-285">Cannot cancel the job because it is not in progress - Cancellation is only supported for jobs which are in progress.</span></span> <span data-ttu-id="98d92-286">진행 중인 작업에 대해 취소를 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-286">Please attempt cancel on an in progress job.</span></span> |<span data-ttu-id="98d92-287">이는 일시적인 상태 때문에 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-287">This happens due to a transitory state.</span></span> <span data-ttu-id="98d92-288">잠시 기다렸다가 취소 작업을 다시 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-288">Wait for a minute and retry the cancel operation.</span></span> |
| <span data-ttu-id="98d92-289">작업을 취소하지 못했습니다. 작업이 완료될 때까지 기다려주세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-289">Failed to cancel the Job - Please wait till job finishes.</span></span> |<span data-ttu-id="98d92-290">없음</span><span class="sxs-lookup"><span data-stu-id="98d92-290">None</span></span> |

## <a name="restore"></a><span data-ttu-id="98d92-291">복원</span><span class="sxs-lookup"><span data-stu-id="98d92-291">Restore</span></span>
| <span data-ttu-id="98d92-292">오류 세부 정보</span><span class="sxs-lookup"><span data-stu-id="98d92-292">Error details</span></span> | <span data-ttu-id="98d92-293">해결 방법</span><span class="sxs-lookup"><span data-stu-id="98d92-293">Workaround</span></span> |
| --- | --- |
| <span data-ttu-id="98d92-294">클라우드 내부 오류로 인해 복원 실패</span><span class="sxs-lookup"><span data-stu-id="98d92-294">Restore failed with Cloud Internal error</span></span> |<ol><li><span data-ttu-id="98d92-295">복원하려는 클라우드 서비스가 DNS 설정을 사용하여 구성되었습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-295">Cloud service to which you are trying to restore is configured with DNS settings.</span></span> <span data-ttu-id="98d92-296">다음을 확인하면 알 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-296">You can check</span></span> <br><span data-ttu-id="98d92-297">$deployment = Get-AzureDeployment -ServiceName "ServiceName" -Slot "Production"     Get-AzureDns -DnsSettings $deployment.DnsSettings</span><span class="sxs-lookup"><span data-stu-id="98d92-297">$deployment = Get-AzureDeployment -ServiceName "ServiceName" -Slot "Production"     Get-AzureDns -DnsSettings $deployment.DnsSettings</span></span><br><span data-ttu-id="98d92-298">구성된 주소가 있으면 DNS 설정이 구성되었다는 의미입니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-298">If there is Address configured, this means that DNS settings are configured.</span></span><br> <li><span data-ttu-id="98d92-299">복원하려는 클라우드 서비스가 ReservedIP를 사용하여 구성되고 클라우드 서비스의 기존 VM이 중단된 상태에 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-299">Cloud service to which to you are trying to restore is configured with ReservedIP and existing VMs in cloud service are in stopped state.</span></span><br><span data-ttu-id="98d92-300">다음 powershell cmdlet을 사용하여 클라우드 서비스에 예약된 IP가 있는지 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-300">You can check a cloud service has reserved IP by using following powershell cmdlets:</span></span><br><span data-ttu-id="98d92-301">$deployment = Get-AzureDeployment -ServiceName "servicename" -Slot "Production" $dep.ReservedIPName</span><span class="sxs-lookup"><span data-stu-id="98d92-301">$deployment = Get-AzureDeployment -ServiceName "servicename" -Slot "Production" $dep.ReservedIPName</span></span> <br><li><span data-ttu-id="98d92-302">동일한 클라우드 서비스에 다음과 같이 특수한 네트워크 구성을 사용하여 가상 컴퓨터를 복원하려고 시도하고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-302">You are trying to restore a virtual machine with following special network configurations in to same cloud service.</span></span> <br><span data-ttu-id="98d92-303">- 부하 분산 장치 구성의 가상 컴퓨터(내부 및 외부)</span><span class="sxs-lookup"><span data-stu-id="98d92-303">- Virtual machines under load balancer configuration (Internal and external)</span></span><br><span data-ttu-id="98d92-304">- 여러 개의 예약된 IP를 사용하는 가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="98d92-304">- Virtual machines with multiple Reserved IPs</span></span><br><span data-ttu-id="98d92-305">- 여러 NIC가 있는 가상 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="98d92-305">- Virtual machines with multiple NICs</span></span><br><span data-ttu-id="98d92-306">특수한 네트워크 구성을 가진 VM의 경우 [복원 고려 사항](backup-azure-arm-restore-vms.md#restoring-vms-with-special-network-configurations)을 참조하거나 UI에서 새 클라우드 서비스를 선택하세요</span><span class="sxs-lookup"><span data-stu-id="98d92-306">Please select a new cloud service in the UI or please refer to [restore considerations](backup-azure-arm-restore-vms.md#restoring-vms-with-special-network-configurations) for VMs with special network configurations.</span></span></ol> |
| <span data-ttu-id="98d92-307">선택한 DNS 이름이 이미 사용 되었습니다. 다른 DNS 이름을 지정하고 다시 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-307">The selected DNS name is already taken - Please specify a different DNS name and try again.</span></span> |<span data-ttu-id="98d92-308">여기에서 DNS 이름은 클라우드 서비스 이름을 가리킵니다(일반적으로 cloudapp.net로 끝남).</span><span class="sxs-lookup"><span data-stu-id="98d92-308">The DNS name here refers to the cloud service name (usually ending with .cloudapp.net).</span></span> <span data-ttu-id="98d92-309">이름은 고유한 것이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-309">This needs to be unique.</span></span> <span data-ttu-id="98d92-310">이러한 오류가 발생하는 경우, 복원하는 동안 다른 VM 이름을 선택해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-310">If you encounter this error, you need to choose a different VM name during restore.</span></span> <br><br> <span data-ttu-id="98d92-311">이 오류는 Azure 포털의 사용자에게만 표시됩니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-311">This error is shown only to users of the Azure portal.</span></span> <span data-ttu-id="98d92-312">PowerShell 통한 복원 작업은 디스크만 복원하고 VM을 만들지 않기 때문에 성공합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-312">The restore operation through PowerShell will succeed because it only restores the disks and doesn't create the VM.</span></span> <span data-ttu-id="98d92-313">디스크 복원 작업 후 사용자가 명시적으로 VM를 만들 경우 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-313">The error will be faced when the VM is explicitly created by you after the disk restore operation.</span></span> |
| <span data-ttu-id="98d92-314">지정된 가상 네트워크 구성이 올바르지 않습니다. 다른 가상 네트워크 구성에 지정하고 다시 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-314">The specified virtual network configuration is not correct - Please specify a different virtual network configuration and try again.</span></span> |<span data-ttu-id="98d92-315">없음</span><span class="sxs-lookup"><span data-stu-id="98d92-315">None</span></span> |
| <span data-ttu-id="98d92-316">지정된 클라우드 서비스는 복원 중인 가상 컴퓨터의 구성과 일치하지 않는 예약된 IP를 사용하고 있습니다. 예약된 IP를 사용하지 않는 다른 클라우드 서비스를 지정하거나 복원하려면 다른 복구 지점을 선택하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-316">The specified cloud service is using a reserved IP, which doesn't match with the configuration of the virtual machine being restored - Please specify a different cloud service, which is not using reserved IP, or choose another recovery point to restore from.</span></span> |<span data-ttu-id="98d92-317">없음</span><span class="sxs-lookup"><span data-stu-id="98d92-317">None</span></span> |
| <span data-ttu-id="98d92-318">클라우드 서비스가 입력된 끝점 제한 수에 도달 했습니다. 다른 클라우드 서비스를 지정하거나 기존 끝점을 사용하여 작업을 다시 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-318">Cloud service has reached limit on number of input end points - Retry the operation by specifying a different cloud service or by using an existing endpoint.</span></span> |<span data-ttu-id="98d92-319">없음</span><span class="sxs-lookup"><span data-stu-id="98d92-319">None</span></span> |
| <span data-ttu-id="98d92-320">서로 다른 두 지역에 백업 저장소와 대상 저장소 계정이 있습니다. 복원 작업에서 지정된 저장소 계정이 백업 저장소와 동일한 Azure 지역에 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-320">Backup vault and target storage account are in two different regions - Ensure that the storage account specified in restore operation is in the same Azure region as the backup vault.</span></span> |<span data-ttu-id="98d92-321">없음</span><span class="sxs-lookup"><span data-stu-id="98d92-321">None</span></span> |
| <span data-ttu-id="98d92-322">복원 작업에 대해 지정된 저장소 계정은 지원되지 않습니다. 로컬 중복 또는 지리적 중복 복제 설정이 있는 기본/표준만 저장소 계정만 지원됩니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-322">Storage Account specified for the restore operation is not supported - Only Basic/Standard storage accounts with locally redundant or geo redundant replication settings are supported.</span></span> <span data-ttu-id="98d92-323">지원되는 저장소 계정을 선택하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-323">Please select a supported storage account</span></span> |<span data-ttu-id="98d92-324">없음</span><span class="sxs-lookup"><span data-stu-id="98d92-324">None</span></span> |
| <span data-ttu-id="98d92-325">복원 작업에 지정된 저장소 계정 유형은 온라인 상태가 아닙니다. 복원 작업에 지정된 저장소 계정이 온라인 상태인지 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-325">Type of Storage Account specified for restore operation is not online - Make sure that the storage account specified in restore operation is online</span></span> |<span data-ttu-id="98d92-326">이는 Azure 저장소의 일시적인 오류 또는 가동 중지로 인해 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-326">This might happen because of a transient error in Azure Storage or due to an outage.</span></span> <span data-ttu-id="98d92-327">다른 저장소 계정을 선택하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-327">Please choose another storage account.</span></span> |
| <span data-ttu-id="98d92-328">리소스 그룹 할당량에 도달했습니다. Azure 포털의 일부 리소스 그룹을 삭제하거나 Azure 지원에 문의하여 제한을 늘리세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-328">Resource Group Quota has been reached - Please delete some resource groups from Azure portal or contact Azure support to increase the limits.</span></span> |<span data-ttu-id="98d92-329">없음</span><span class="sxs-lookup"><span data-stu-id="98d92-329">None</span></span> |
| <span data-ttu-id="98d92-330">선택한 서브넷이 존재하지 않습니다. 존재하는 서브넷을 선택하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-330">Selected subnet does not exist - Please select a subnet which exists</span></span> |<span data-ttu-id="98d92-331">없음</span><span class="sxs-lookup"><span data-stu-id="98d92-331">None</span></span> |
| <span data-ttu-id="98d92-332">백업 서비스는 구독의 리소스에 액세스할 수 있는 권한이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-332">Backup Service does not have authorization to access resources in your subscription.</span></span> |<span data-ttu-id="98d92-333">이 문제를 해결하려면 먼저 [VM 복원 구성 선택](backup-azure-arm-restore-vms.md#choosing-a-vm-restore-configuration)의 **백업된 디스크 복원** 섹션에 제공된 단계에 따라 디스크를 복원합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-333">To resolve this, first Restore Disks using steps mentioned in section **Restore backed up disks** in [Choosing VM restore configuration](backup-azure-arm-restore-vms.md#choosing-a-vm-restore-configuration).</span></span> <span data-ttu-id="98d92-334">그 후에는 [복원된 디스크에서 VM 만들기](backup-azure-vms-automation.md#create-a-vm-from-restored-disks)에 설명된 PowerShell 단계를 사용하여 복원된 디스크에서 전체 VM을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-334">After that, use PowerShell steps mentioned in [Create a VM from restored disks](backup-azure-vms-automation.md#create-a-vm-from-restored-disks) to create full VM from restored disks.</span></span> |

## <a name="backup-or-restore-taking-time"></a><span data-ttu-id="98d92-335">백업 또는 복원에 시간이 걸림</span><span class="sxs-lookup"><span data-stu-id="98d92-335">Backup or Restore taking time</span></span>
<span data-ttu-id="98d92-336">백업(12시간 초과) 또는 복원 소요 시간(6시간 초과)이 표시되는 경우</span><span class="sxs-lookup"><span data-stu-id="98d92-336">If you see your backup(>12 hours) or restore taking time(>6 hours):</span></span>
* <span data-ttu-id="98d92-337">[백업 시간에 영향을 주는 요인](backup-azure-vms-introduction.md#total-vm-backup-time) 및 [복원 시간에 영향을 주는 요인](backup-azure-vms-introduction.md#total-restore-time)을 파악합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-337">Understand [factors contributing to backup time](backup-azure-vms-introduction.md#total-vm-backup-time) and [factors contributing to restore time](backup-azure-vms-introduction.md#total-restore-time).</span></span>
* <span data-ttu-id="98d92-338">[백업 모범 사례](backup-azure-vms-introduction.md#best-practices)를 따라야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-338">Make sure that you follow [Backup best practices](backup-azure-vms-introduction.md#best-practices).</span></span> 

## <a name="vm-agent"></a><span data-ttu-id="98d92-339">VM 에이전트</span><span class="sxs-lookup"><span data-stu-id="98d92-339">VM Agent</span></span>
### <a name="setting-up-the-vm-agent"></a><span data-ttu-id="98d92-340">VM 에이전트 설정</span><span class="sxs-lookup"><span data-stu-id="98d92-340">Setting up the VM Agent</span></span>
<span data-ttu-id="98d92-341">일반적으로, Azure 갤러리에서 만든 VM에는 VM 에이전트가 이미 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-341">Typically, the VM Agent is already present in VMs that are created from the Azure gallery.</span></span> <span data-ttu-id="98d92-342">그러나 온-프레미스 데이터 센터에서 마이그레이션한 가상 컴퓨터에는 VM 에이전트가 설치되어 있지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-342">However, virtual machines that are migrated from on-premises datacenters would not have the VM Agent installed.</span></span> <span data-ttu-id="98d92-343">이러한 VM의 경우 VM 에이전트를 명시적으로 설치해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-343">For such VMs, the VM Agent needs to be installed explicitly.</span></span>

<span data-ttu-id="98d92-344">Windows VM의 경우</span><span class="sxs-lookup"><span data-stu-id="98d92-344">For Windows VMs:</span></span>

* <span data-ttu-id="98d92-345">[에이전트 MSI](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409)를 다운로드하여 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-345">Download and install the [agent MSI](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span></span> <span data-ttu-id="98d92-346">설치를 완료하려면 관리자 권한이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-346">You need Administrator privileges to complete the installation.</span></span>
* <span data-ttu-id="98d92-347">클래식 가상 컴퓨터의 경우 [VM 속성을 업데이트](http://blogs.msdn.com/b/mast/archive/2014/04/08/install-the-vm-agent-on-an-existing-azure-vm.aspx)하여 에이전트가 설치되었다고 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-347">For Classic virtual machines, [Update the VM property](http://blogs.msdn.com/b/mast/archive/2014/04/08/install-the-vm-agent-on-an-existing-azure-vm.aspx) to indicate that the agent is installed.</span></span> <span data-ttu-id="98d92-348">리소스 관리자 가상 컴퓨터의 경우 이 단계가 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-348">This step is not required for Resource Manager virtual machines.</span></span>

<span data-ttu-id="98d92-349">Linux VM의 경우</span><span class="sxs-lookup"><span data-stu-id="98d92-349">For Linux VMs:</span></span>

* <span data-ttu-id="98d92-350">배포 리포지토리에서 최신 버전을 설치합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-350">Install latest from distribution repository.</span></span> <span data-ttu-id="98d92-351">배포 리포지토리를 사용할 때만 에이전트를 설치할 것을 **강력히 권장**합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-351">We **strongly recommend** installing agent only through distribution repository.</span></span> <span data-ttu-id="98d92-352">패키지 이름에 대한 자세한 내용은 [Linux 에이전트 리포지토리](https://github.com/Azure/WALinuxAgent)를 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-352">For details on package name, please refer to [Linux agent repository](https://github.com/Azure/WALinuxAgent)</span></span> 
* <span data-ttu-id="98d92-353">클래식 VM의 경우 [VM 속성을 업데이트](http://blogs.msdn.com/b/mast/archive/2014/04/08/install-the-vm-agent-on-an-existing-azure-vm.aspx)하여 에이전트가 설치되었다고 표시합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-353">For classic VMs, [Update the VM property](http://blogs.msdn.com/b/mast/archive/2014/04/08/install-the-vm-agent-on-an-existing-azure-vm.aspx) to indicate that the agent is installed.</span></span> <span data-ttu-id="98d92-354">리소스 관리자 가상 컴퓨터의 경우 이 단계가 필요하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-354">This step is not required for Resource Manager virtual machines.</span></span>

### <a name="updating-the-vm-agent"></a><span data-ttu-id="98d92-355">VM 에이전트 업데이트</span><span class="sxs-lookup"><span data-stu-id="98d92-355">Updating the VM Agent</span></span>
<span data-ttu-id="98d92-356">Windows VM의 경우</span><span class="sxs-lookup"><span data-stu-id="98d92-356">For Windows VMs:</span></span>

* <span data-ttu-id="98d92-357">VM 에이전트 업데이트는 [VM 에이전트 이진](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409)을 다시 설치하면 되는 간단한 작업입니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-357">Updating the VM Agent is as simple as reinstalling the [VM Agent binaries](http://go.microsoft.com/fwlink/?LinkID=394789&clcid=0x409).</span></span> <span data-ttu-id="98d92-358">그러나 VM 에이전트를 업데이트하는 동안 실행 중인 백업 작업이 없도록 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-358">However, you need to ensure that no backup operation is running while the VM Agent is being updated.</span></span>

<span data-ttu-id="98d92-359">Linux VM의 경우</span><span class="sxs-lookup"><span data-stu-id="98d92-359">For Linux VMs:</span></span>

* <span data-ttu-id="98d92-360">[Linux VM 에이전트 업데이트](../virtual-machines/linux/update-agent.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json)의 지침을 따르세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-360">Follow the instructions on [Updating Linux VM Agent](../virtual-machines/linux/update-agent.md?toc=%2fazure%2fvirtual-machines%2flinux%2ftoc.json).</span></span>
<span data-ttu-id="98d92-361">배포 리포지토리를 사용할 때만 에이전트를 업데이트할 것을 **강력히 권장**합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-361">We **strongly recommend** updating agent only through distribution repository.</span></span> <span data-ttu-id="98d92-362">github에서 에이전트 코드를 직접 다운로드한 후 업데이트하는 것은 바람직하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-362">We do not recommend downloading the agent code from directly github and updating it.</span></span> <span data-ttu-id="98d92-363">최신 에이전트를 배포할 수 없는 경우 배포 지원에 문의하여 최신 에이전트를 설치하는 방법에 대한 지침을 얻으세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-363">If latest agent is not available for your distribution, please reach out to distribution support for instructions on how to install latest agent.</span></span> <span data-ttu-id="98d92-364">github 리포지토리에서 최신 [Microsoft Azure Linux 에이전트](https://github.com/Azure/WALinuxAgent/releases) 정보를 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-364">You can check latest [Windows Azure Linux agent](https://github.com/Azure/WALinuxAgent/releases) information in github repository.</span></span>

### <a name="validating-vm-agent-installation"></a><span data-ttu-id="98d92-365">VM 에이전트 설치의 유효성 검사</span><span class="sxs-lookup"><span data-stu-id="98d92-365">Validating VM Agent installation</span></span>
<span data-ttu-id="98d92-366">Windows VM에서 VM 에이전트 버전을 확인하는 방법</span><span class="sxs-lookup"><span data-stu-id="98d92-366">How to check for the VM Agent version on Windows VMs:</span></span>

1. <span data-ttu-id="98d92-367">Azure Virtual Machine에 로그온하고 *C:\WindowsAzure\Packages* 폴더로 이동합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-367">Log on to the Azure virtual machine and navigate to the folder *C:\WindowsAzure\Packages*.</span></span> <span data-ttu-id="98d92-368">WaAppAgent.exe 파일을 찾습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-368">You should find the WaAppAgent.exe file present.</span></span>
2. <span data-ttu-id="98d92-369">파일을 마우스 오른쪽 단추로 클릭하고 **속성**으로 이동한 다음 **세부 정보** 탭을 선택합니다. 제품 버전 필드가 2.6.1198.718 이상이어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-369">Right-click the file, go to **Properties**, and then select the **Details** tab. The Product Version field should be 2.6.1198.718 or higher</span></span>

## <a name="troubleshoot-vm-snapshot-issues"></a><span data-ttu-id="98d92-370">VM 스냅숏 문제 해결</span><span class="sxs-lookup"><span data-stu-id="98d92-370">Troubleshoot VM Snapshot Issues</span></span>
<span data-ttu-id="98d92-371">VM 백업은 기본 저장소에 대한 스냅숏 명령 실행을 사용합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-371">VM backup relies on issuing snapshot commands to underlying storage.</span></span> <span data-ttu-id="98d92-372">저장소에 액세스할 수 없거나 스냅숏 작업 실행이 지연되는 경우 백업 작업이 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-372">Not having access to storage, or delays in a snapshot task execution can cause the backup job to fail.</span></span> <span data-ttu-id="98d92-373">다음으로 인해 스냅숏 작업이 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-373">The following can cause snapshot task failure.</span></span>

1. <span data-ttu-id="98d92-374">NSG를 사용하여 저장소에 대한 네트워크 액세스 차단</span><span class="sxs-lookup"><span data-stu-id="98d92-374">Network access to Storage is blocked using NSG</span></span><br>
    <span data-ttu-id="98d92-375">IP의 허용 목록을 사용하거나 프록시 서버를 통해 저장소에 대한 [네트워크 액세스를 허용](backup-azure-vms-prepare.md#network-connectivity)하는 방법을 자세히 알아봅니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-375">Learn more on how to [enable network access](backup-azure-vms-prepare.md#network-connectivity) to Storage using either WhiteListing of IPs or through proxy server.</span></span>
2. <span data-ttu-id="98d92-376">Sql Server 백업이 구성된 VM이 스냅숏 작업을 지연시킬 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-376">VMs with Sql Server backup configured can cause snapshot task delay</span></span> <br>
   <span data-ttu-id="98d92-377">기본적으로 VM 백업은 Windows VM에서 VSS 전체를 백업합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-377">By default VM backup issues VSS Full backup on Windows VMs.</span></span> <span data-ttu-id="98d92-378">VM에서 Sql Server를 실행하고 있으며 Sql Server 백업이 구성된 경우 스냅숏 실행 시 지연이 발생할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-378">On VMs that are running Sql Servers and if Sql Server backup is configured, this might cause delay in snapshot execution.</span></span> <span data-ttu-id="98d92-379">스냅숏 문제로 인해 백업이 실패하면 다음 레지스트리 키를 설정하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-379">Please set following registry key if you are experiencing backup failures because of snapshot issues.</span></span>

   ```
   [HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\BCDRAGENT]
   "USEVSSCOPYBACKUP"="TRUE"
   ```
3. <span data-ttu-id="98d92-380">VM이 RDP에서 종료되므로 VM 상태가 잘못 보고됩니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-380">VM status reported incorrectly because VM is shut down in RDP.</span></span>  <br>
   <span data-ttu-id="98d92-381">RDP에서 가상 컴퓨터를 종료하는 경우 VM 상태가 올바르게 반영되는지 포털에서 다시 확인하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-381">If you have Shut down the virtual machine in RDP, please check back in the portal that VM status is reflected correctly.</span></span> <span data-ttu-id="98d92-382">그렇지 않은 경우 VM 대시보드의 '종료' 옵션을 사용하여 포털에서 VM을 종료하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-382">If not, please shut down the VM in portal using 'Shutdown' option in VM dashboard.</span></span>
4. <span data-ttu-id="98d92-383">4개를 초과하는 VM이 동일한 클라우드 서비스를 공유하는 경우에는, 4개를 초과하는 VM 백업이 한 번에 시작되지 않게 백업 시간을 준비하도록 여러 백업 정책을 구성합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-383">If more than four VMs share the same cloud service, configure multiple backup policies to stage the backup times so no more than four VM backups are started at the same time.</span></span> <span data-ttu-id="98d92-384">백업 시작 시간을 정책 사이에 한 시간 분산시키도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-384">Try to spread the backup start times an hour apart between policies.</span></span>
5. <span data-ttu-id="98d92-385">VM이 높은 CPU/메모리에서 실행 중입니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-385">VM is running at High CPU/Memory.</span></span><br>
   <span data-ttu-id="98d92-386">가상 컴퓨터가 높은 CPU/메모리 사용량(&gt;90%)에서 실행 중인 경우 스냅숏 작업이 큐 대기되고 지연되어 결국 시간이 초과됩니다. 이러한 상황에서는 주문형 백업을 시도하세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-386">If the virtual machine is running at High CPU usage(>90%) or memory, snapshot task is queued, delayed and will eventually gets timed-out. Try on-demand backup in such situations.</span></span>

<br>

## <a name="networking"></a><span data-ttu-id="98d92-387">네트워킹</span><span class="sxs-lookup"><span data-stu-id="98d92-387">Networking</span></span>
<span data-ttu-id="98d92-388">모든 확장과 마찬가지로, 백업 확장이 작동하려면 공용 인터넷에 액세스해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-388">Like all extensions, Backup extension need access to the public internet to work.</span></span> <span data-ttu-id="98d92-389">공용 인터넷에 액세스할 수 없는 경우는 다음과 같은 여러 방법으로 확인할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-389">Not having access to the public internet can manifest itself in various ways:</span></span>

* <span data-ttu-id="98d92-390">확장 설치가 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-390">The extension installation can fail</span></span>
* <span data-ttu-id="98d92-391">백업 작업(예: 디스크 스냅숏)이 실패할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-391">The backup operations (like disk snapshot) can fail</span></span>
* <span data-ttu-id="98d92-392">백업 작업의 상태가 표시되지 않을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-392">Displaying the status of the backup operation can fail</span></span>

<span data-ttu-id="98d92-393">공용 인터넷 주소를 확인해야 하는 이유는 [여기](http://blogs.msdn.com/b/mast/archive/2014/06/18/azure-vm-provisioning-stuck-on-quot-installing-extensions-on-virtual-machine-quot.aspx)에 명시되어 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-393">The need for resolving public internet addresses has been articulated [here](http://blogs.msdn.com/b/mast/archive/2014/06/18/azure-vm-provisioning-stuck-on-quot-installing-extensions-on-virtual-machine-quot.aspx).</span></span> <span data-ttu-id="98d92-394">VNET에 대한 DNS 구성을 검사하고 Azure URI를 확인할 수 있는지 확인해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-394">You need to check the DNS configurations for the VNET and ensure that the Azure URIs can be resolved.</span></span>

<span data-ttu-id="98d92-395">이름 확인이 올바르게 완료된 후에는 Azure IP에 대한 액세스 권한을 부여해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-395">Once the name resolution is done correctly, access to the Azure IPs also needs to be provided.</span></span> <span data-ttu-id="98d92-396">Azure 인프라에 대한 액세스 차단을 해제하려면 다음 단계 중 하나를 따르세요.</span><span class="sxs-lookup"><span data-stu-id="98d92-396">To unblock access to the Azure infrastructure, follow one of these steps:</span></span>

1. <span data-ttu-id="98d92-397">Azure 데이터 센터 IP 범위를 허용 목록에 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-397">WhiteList the Azure datacenter IP ranges.</span></span>
   * <span data-ttu-id="98d92-398">허용 목록에 추가할 [Azure datacenter IP](https://www.microsoft.com/download/details.aspx?id=41653) 목록을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-398">Get the list of [Azure datacenter IPs](https://www.microsoft.com/download/details.aspx?id=41653) to be whitelisted.</span></span>
   * <span data-ttu-id="98d92-399">[New-NetRoute](https://technet.microsoft.com/library/hh826148.aspx) cmdlet을 사용하여 IP 차단을 해제합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-399">Unblock the IPs using the [New-NetRoute](https://technet.microsoft.com/library/hh826148.aspx) cmdlet.</span></span> <span data-ttu-id="98d92-400">관리자 권한 PowerShell 창(관리자 권한으로 실행)을 통해 Azure VM 내에서 이 cmdlet을 실행합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-400">Run this cmdlet within the Azure VM, in an elevated PowerShell window (run as Administrator).</span></span>
   * <span data-ttu-id="98d92-401">IP에 대한 액세스를 허용하도록 NSG(있는 경우)에 규칙을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-401">Add rules to the NSG (if you have one in place) to allow access to the IPs.</span></span>
2. <span data-ttu-id="98d92-402">HTTP 트래픽을 보내는 경로 만들기</span><span class="sxs-lookup"><span data-stu-id="98d92-402">Create a path for HTTP traffic to flow</span></span>
   * <span data-ttu-id="98d92-403">일부 네트워크 제한이 있는 경우(예: 네트워크 보안 그룹) 트래픽을 라우팅하는 HTTP 프록시 서버를 배포합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-403">If you have some network restriction in place (a Network Security Group, for example) deploy an HTTP proxy server to route the traffic.</span></span> <span data-ttu-id="98d92-404">HTTP 프록시 서버를 배포하는 단계는 [여기](backup-azure-vms-prepare.md#network-connectivity)에서 찾을 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-404">Steps to deploy an HTTP Proxy server can found [here](backup-azure-vms-prepare.md#network-connectivity).</span></span>
   * <span data-ttu-id="98d92-405">HTTP 프록시에서 인터넷에 액세스할 수 있도록 NSG(있는 경우)에 규칙을 추가합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-405">Add rules to the NSG (if you have one in place) to allow access to the INTERNET from the HTTP Proxy.</span></span>

> [!NOTE]
> <span data-ttu-id="98d92-406">IaaS VM 백업이 작동하려면 게스트 내에 DHCP를 사용하도록 설정되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-406">DHCP must be enabled inside the guest for IaaS VM Backup to work.</span></span>  <span data-ttu-id="98d92-407">고정 개인 IP가 필요한 경우 플랫폼을 통해 구성해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-407">If you need a static private IP, you should configure it through the platform.</span></span> <span data-ttu-id="98d92-408">VM 내 DHCP 옵션은 사용 가능한 상태로 두어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-408">The DHCP option inside the VM should be left enabled.</span></span>
> <span data-ttu-id="98d92-409">[고정 내부 개인 IP 설정](../virtual-network/virtual-networks-reserved-private-ip.md)에 대한 자세한 내용을 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="98d92-409">View more information about [Setting a Static Internal Private IP](../virtual-network/virtual-networks-reserved-private-ip.md).</span></span>
>
>
