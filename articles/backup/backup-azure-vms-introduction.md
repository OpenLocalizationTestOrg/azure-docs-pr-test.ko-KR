---
title: "aaaPlanning Azure에서 VM 백업 인프라 | Microsoft Docs"
description: "Azure에서 가상 컴퓨터를 tooback를 계획할 때 중요 한 고려 사항"
services: backup
documentationcenter: 
author: markgalioto
manager: carmonm
editor: 
keywords: "vm 백업, virtual machines 백업"
ms.assetid: 19d2cf82-1f60-43e1-b089-9238042887a9
ms.service: backup
ms.workload: storage-backup-recovery
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 7/18/2017
ms.author: markgal;trinadhk
ms.openlocfilehash: d11982431610000293038ee6aa7df8e7bc2d8b70
ms.sourcegitcommit: 523283cc1b3c37c428e77850964dc1c33742c5f0
ms.translationtype: MT
ms.contentlocale: ko-KR
ms.lasthandoff: 10/06/2017
---
# <a name="plan-your-vm-backup-infrastructure-in-azure"></a><span data-ttu-id="9698c-104">Azure에서 VM 백업 인프라 계획</span><span class="sxs-lookup"><span data-stu-id="9698c-104">Plan your VM backup infrastructure in Azure</span></span>
<span data-ttu-id="9698c-105">이 문서에서는 성능 및 리소스 제안 toohelp VM 백업 인프라를 계획을 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-105">This article provides performance and resource suggestions toohelp you plan your VM backup infrastructure.</span></span> <span data-ttu-id="9698c-106">Hello 백업 서비스의 주요 측면을 정의 합니다. 이러한 측면을이 충분히를 해당 아키텍처를 결정 하는 데 사용할 수 있습니다 용량 계획 및 예약 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-106">It also defines key aspects of hello Backup service; these aspects can be critical in determining your architecture, capacity planning, and scheduling.</span></span> <span data-ttu-id="9698c-107">선택한 경우 [환경이 준비](backup-azure-vms-prepare.md), hello 다음 단계를 시작 하기 전에 계획은 [vm tooback](backup-azure-vms.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-107">If you've [prepared your environment](backup-azure-vms-prepare.md), planning is hello next step before you begin [tooback up VMs](backup-azure-vms.md).</span></span> <span data-ttu-id="9698c-108">Azure 가상 컴퓨터에 대 한 자세한 정보를 보려면 hello 참고 [가상 컴퓨터 설명서](https://azure.microsoft.com/documentation/services/virtual-machines/)합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-108">If you need more information about Azure virtual machines, see hello [Virtual Machines documentation](https://azure.microsoft.com/documentation/services/virtual-machines/).</span></span>

## <a name="how-does-azure-back-up-virtual-machines"></a><span data-ttu-id="9698c-109">Azure에서 가상 컴퓨터를 백업하는 방법</span><span class="sxs-lookup"><span data-stu-id="9698c-109">How does Azure back up virtual machines?</span></span>
<span data-ttu-id="9698c-110">Azure 백업 서비스 hello가 hello 예약 된 시간에 백업 작업을 시작 hello 예비 내선 번호 tootake를 지정 시간에 스냅숏으로 트리거합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-110">When hello Azure Backup service initiates a backup job at hello scheduled time, it triggers hello backup extension tootake a point-in-time snapshot.</span></span> <span data-ttu-id="9698c-111">Azure 백업 서비스 hello hello를 사용 하 여 _VMSnapshot_ 창과 hello에서 확장 _VMSnapshotLinux_ Linux에서 확장 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-111">hello Azure Backup service uses hello _VMSnapshot_ extension in Windows, and hello _VMSnapshotLinux_ extension in Linux.</span></span> <span data-ttu-id="9698c-112">hello 확장 hello 첫 번째 VM 백업 하는 동안 설치 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-112">hello extension is installed during hello first VM backup.</span></span> <span data-ttu-id="9698c-113">tooinstall hello 확장 hello VM 실행 되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-113">tooinstall hello extension, hello VM must be running.</span></span> <span data-ttu-id="9698c-114">Hello VM 실행 되지 않는 경우, hello 백업 서비스는 hello (응용 프로그램 쓰기가 수행 되지 hello VM을 중지 하는 동안) 이후 기본 저장소의 스냅숏을 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-114">If hello VM is not running, hello Backup service takes a snapshot of hello underlying storage (since no application writes occur while hello VM is stopped).</span></span>

<span data-ttu-id="9698c-115">Windows Vm의 스냅숏을 만드는, hello 백업 서비스 hello 가상 컴퓨터의 디스크의 일관 된 스냅숏을 hello 볼륨 섀도 복사본 서비스 (VSS) tooget와 동등 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-115">When taking a snapshot of Windows VMs, hello Backup service coordinates with hello Volume Shadow Copy Service (VSS) tooget a consistent snapshot of hello virtual machine's disks.</span></span> <span data-ttu-id="9698c-116">Linux Vm을 백업 하는 경우 VM 스냅숏을 만드는 경우 사용자 고유의 사용자 지정 스크립트 tooensure 일관성을 작성할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-116">If you're backing up Linux VMs, you can write your own custom scripts tooensure consistency when taking a VM snapshot.</span></span> <span data-ttu-id="9698c-117">이러한 스크립트 호출에 대한 자세한 내용은 이 문서의 뒷부분에 제공됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-117">Details on invoking these scripts are provided later in this article.</span></span>

<span data-ttu-id="9698c-118">Hello Azure 백업 서비스는 hello 스냅숏을, 되 면 hello 데이터는 전송 된 toohello 자격 증명 모음입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-118">Once hello Azure Backup service takes hello snapshot, hello data is transferred toohello vault.</span></span> <span data-ttu-id="9698c-119">toomaximize 효율성 hello 서비스를 식별 하 고 hello 이전 백업 이후에 변경 된 데이터의 hello 블록만 전송 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-119">toomaximize efficiency, hello service identifies and transfers only hello blocks of data that have changed since hello previous backup.</span></span>

![Azure 가상 컴퓨터 백업 아키텍처](./media/backup-azure-vms-introduction/vmbackup-architecture.png)

<span data-ttu-id="9698c-121">Hello 데이터 전송이 완료 되 면 hello 스냅숏을 제거 되 고 복구 지점이 생성 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-121">When hello data transfer is complete, hello snapshot is removed and a recovery point is created.</span></span>

> [!NOTE]
> 1. <span data-ttu-id="9698c-122">Hello 백업 프로세스 중 Azure 백업 하지 않습니다 hello 연결 된 임시 디스크 toohello 가상 컴퓨터를 포함 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-122">During hello backup process, Azure Backup doesn't include hello temporary disk attached toohello virtual machine.</span></span> <span data-ttu-id="9698c-123">자세한 내용은 블로그를 참조 하세요 hello에 [임시 저장소](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/)합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-123">For more information, see hello blog on [temporary storage](https://blogs.msdn.microsoft.com/mast/2013/12/06/understanding-the-temporary-drive-on-windows-azure-virtual-machines/).</span></span>
> 2. <span data-ttu-id="9698c-124">Azure 백업에서는 저장소 수준의 스냅숏 및 스냅숏 toovault 전송, 이후 hello 백업 작업이 완료 될 때까지 hello 저장소 계정 키 변경 하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="9698c-124">Since Azure Backup takes a storage-level snapshot and transfers that snapshot toovault, do not change hello storage account keys until hello backup job finishes.</span></span>
> 3. <span data-ttu-id="9698c-125">프리미엄 Vm hello 스냅숏 toostorage 계정에 복사 했습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-125">For premium VMs, we copy hello snapshot toostorage account.</span></span> <span data-ttu-id="9698c-126">이 toomake 있는지 Azure 백업 서비스 toovault 데이터를 전송 하는 데 충분 한 IOPS를 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-126">This is toomake sure that Azure Backup service gets sufficient IOPS for transferring data toovault.</span></span> <span data-ttu-id="9698c-127">이 저장소의 추가 복사본 hello VM 할당 크기를 기준으로 대금이 청구 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-127">This additional copy of storage is charged as per hello VM allocated size.</span></span> 
>

### <a name="data-consistency"></a><span data-ttu-id="9698c-128">데이터 일관성</span><span class="sxs-lookup"><span data-stu-id="9698c-128">Data consistency</span></span>
<span data-ttu-id="9698c-129">백업 및 복원 중요 한 비즈니스 데이터 hello 응용 프로그램 데이터를 사용 중인 hello를 생성 하는 동안 중요 한 비즈니스 데이터 백업 해야 하는 hello 팩트 복잡 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-129">Backing up and restoring business critical data is complicated by hello fact that business critical data must be backed up while hello applications that produce hello data are running.</span></span> <span data-ttu-id="9698c-130">tooaddress Windows와 Linux Vm에 대 한이 Azure 백업 지원 응용 프로그램 일치 백업을</span><span class="sxs-lookup"><span data-stu-id="9698c-130">tooaddress this, Azure Backup supports application-consistent backups for both Windows and Linux VMs</span></span>
#### <a name="windows-vm"></a><span data-ttu-id="9698c-131">Windows VM</span><span class="sxs-lookup"><span data-stu-id="9698c-131">Windows VM</span></span>
<span data-ttu-id="9698c-132">Windows VM에서 Azure 백업은 VSS 전체 백업을 사용합니다( [VSS 전체 백업](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)에 대해 자세히 알아보기).</span><span class="sxs-lookup"><span data-stu-id="9698c-132">Azure Backup takes VSS full backups on Windows VMs (read more about [VSS full backup](http://blogs.technet.com/b/filecab/archive/2008/05/21/what-is-the-difference-between-vss-full-backup-and-vss-copy-backup-in-windows-server-2008.aspx)).</span></span> <span data-ttu-id="9698c-133">tooenable VSS는 백업, hello 레지스트리 키 필요 toobe 집합에 나오는 hello VM에 복사 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-133">tooenable VSS copy backups, hello following registry key needs toobe set on hello VM.</span></span>

```
[HKEY_LOCAL_MACHINE\SOFTWARE\MICROSOFT\BCDRAGENT]
"USEVSSCOPYBACKUP"="TRUE"
```

#### <a name="linux-vms"></a><span data-ttu-id="9698c-134">Linux VM</span><span class="sxs-lookup"><span data-stu-id="9698c-134">Linux VMs</span></span>
<span data-ttu-id="9698c-135">Azure Backup은 스크립팅 프레임워크를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-135">Azure Backup provides a scripting framework.</span></span> <span data-ttu-id="9698c-136">Linux Vm을 백업할 때 tooensure 응용 프로그램 일관성에는 사용자 지정 사전 스크립트 및 사후 스크립트로 hello 백업 워크플로 및 환경 제어 하는 만듭니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-136">tooensure application consistency when backing up Linux VMs, create custom pre-scripts and post-scripts that control hello backup workflow and environment.</span></span> <span data-ttu-id="9698c-137">Azure 백업 hello VM 스냅샷을 수행 하기 전에 hello 전 스크립트를 호출 하 고 hello VM 스냅숏 작업이 완료 되 면 hello 후 스크립트를 호출 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-137">Azure Backup invokes hello pre-script before taking hello VM snapshot and invokes hello post-script once hello VM snapshot job completes.</span></span> <span data-ttu-id="9698c-138">자세한 내용은 [사전 스크립트 및 사후 스크립트를 사용하여 응용 프로그램 일치 VM 백업](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent)을 참조하세요.</span><span class="sxs-lookup"><span data-stu-id="9698c-138">For more details, see [application consistent VM backups using pre-script and post-script](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span>
> [!NOTE]
> <span data-ttu-id="9698c-139">Azure 백업에만 hello 고객 작성 호출 사전 및 사후 스크립트로 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-139">Azure Backup only invokes hello customer-written pre- and post-scripts.</span></span> <span data-ttu-id="9698c-140">Hello 사전 스크립트 및 사후 스크립트로 성공적으로 실행 하는 경우 Azure 백업 hello 복구 지점으로 표시 응용 프로그램 일치 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-140">If hello pre-script and post-scripts execute successfully, Azure Backup marks hello recovery point as application consistent.</span></span> <span data-ttu-id="9698c-141">그러나 사용자 지정 스크립트를 사용 하는 경우 hello 고객 hello 응용 프로그램 일관성에 대 한 최종 책임은 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-141">However, hello customer is ultimately responsible for hello application consistency when using custom scripts.</span></span>
>


<span data-ttu-id="9698c-142">이 표에서 hello 유형의 일관성과 hello 조건에서 Azure VM 백업 하는 동안 발생 하 고 복원 절차를 설명 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-142">This table explains hello types of consistency and hello conditions that they occur under during Azure VM backup and restore procedures.</span></span>

| <span data-ttu-id="9698c-143">일관성</span><span class="sxs-lookup"><span data-stu-id="9698c-143">Consistency</span></span> | <span data-ttu-id="9698c-144">VSS 기반</span><span class="sxs-lookup"><span data-stu-id="9698c-144">VSS-based</span></span> | <span data-ttu-id="9698c-145">설명 및 세부 정보</span><span class="sxs-lookup"><span data-stu-id="9698c-145">Explanation and details</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9698c-146">응용 프로그램 일관성</span><span class="sxs-lookup"><span data-stu-id="9698c-146">Application consistency</span></span> |<span data-ttu-id="9698c-147">Windows 경우 예</span><span class="sxs-lookup"><span data-stu-id="9698c-147">Yes for Windows</span></span>|<span data-ttu-id="9698c-148">응용 프로그램 일관성은 다음을 보장하므로 워크로드에 이상적입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-148">Application consistency is ideal for workloads as it ensures that:</span></span><ol><li> <span data-ttu-id="9698c-149">hello VM *가상 컴퓨터를 부팅*합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-149">hello VM *boots up*.</span></span> <li><span data-ttu-id="9698c-150">*손상이 없습니다*.</span><span class="sxs-lookup"><span data-stu-id="9698c-150">There is *no corruption*.</span></span> <li><span data-ttu-id="9698c-151">*데이터 손실*이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-151">There is *no data loss*.</span></span><li> <span data-ttu-id="9698c-152">hello 데이터는 백업-VSS 또는 사전/사후 스크립트를 사용 하 여 hello 시 hello 응용 프로그램을 포함 하 여 hello 데이터를 사용 하는 일관 된 toohello 응용 프로그램입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-152">hello data is consistent toohello application that uses hello data, by involving hello application at hello time of backup--using VSS or pre/post script.</span></span></ol> <li><span data-ttu-id="9698c-153">*Windows Vm*-가장 Microsoft 작업 관련된 toodata 일관성 작업 관련 동작을 수행 하는 VSS 기록기가 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-153">*Windows VMs*- Most Microsoft workloads have VSS writers that do workload-specific actions related toodata consistency.</span></span> <span data-ttu-id="9698c-154">예를 들어 Microsoft SQL Server hello 쓰기 toohello 트랜잭션 로그 파일 및 hello 데이터베이스 올바르게 수행 되도록 하려면 VSS 기록기를 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-154">For example, Microsoft SQL Server has a VSS writer that ensures that hello writes toohello transaction log file and hello database are done correctly.</span></span> <span data-ttu-id="9698c-155">Windows Azure VM 백업, toocreate는 응용 프로그램 일치 복구 지점에 대 한 hello 예비 내선 번호 hello VSS 워크플로 호출 하 고 hello VM 스냅샷을 수행 하기 전에 완료 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-155">For Azure Windows VM backups, toocreate an application-consistent recovery point, hello backup extension must invoke hello VSS workflow and complete it before taking hello VM snapshot.</span></span> <span data-ttu-id="9698c-156">Hello Azure VM 스냅샷 toobe 정확 하 게에 대 한 모든 Azure VM 응용 프로그램의 hello VSS 기록기도 완료 해야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-156">For hello Azure VM snapshot toobe accurate, hello VSS writers of all Azure VM applications must complete as well.</span></span> <span data-ttu-id="9698c-157">(자세한 hello [VSS의 기본 사항](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) hello 세부 정보를 심층적으로 및 [작동 방식을](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span><span class="sxs-lookup"><span data-stu-id="9698c-157">(Learn hello [basics of VSS](http://blogs.technet.com/b/josebda/archive/2007/10/10/the-basics-of-the-volume-shadow-copy-service-vss.aspx) and dive deep into hello details of [how it works](https://technet.microsoft.com/library/cc785914%28v=ws.10%29.aspx)).</span></span> </li> <li> <span data-ttu-id="9698c-158">*Linux Vm*-고객 실행할 수 있는 [전 스크립트와 사후 스크립트 tooensure 사용자 지정 응용 프로그램 일관성](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent)합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-158">*Linux VMs*- Customers can execute [custom pre-script and post-script tooensure application consistency](https://docs.microsoft.com/azure/backup/backup-azure-linux-app-consistent).</span></span> </li> |
| <span data-ttu-id="9698c-159">파일 시스템 일관성</span><span class="sxs-lookup"><span data-stu-id="9698c-159">File-system consistency</span></span> |<span data-ttu-id="9698c-160">예 - Windows 기반 컴퓨터</span><span class="sxs-lookup"><span data-stu-id="9698c-160">Yes - for Windows-based computers</span></span> |<span data-ttu-id="9698c-161">두 가지 시나리오 hello 복구 지점이 될 수 있는 *파일 시스템 일관성 있는*:</span><span class="sxs-lookup"><span data-stu-id="9698c-161">There are two scenarios where hello recovery point can be *file-system consistent*:</span></span><ul><li><span data-ttu-id="9698c-162">사전 스크립트/사후 스크립트 없이 또는 사전 스크립트/사후 스크립트가 실패한 경우 Azure에서 Linux VM의 백업.</span><span class="sxs-lookup"><span data-stu-id="9698c-162">Backups of Linux VMs in Azure, without pre-script/post-script or if pre-script/post-script failed.</span></span> <li><span data-ttu-id="9698c-163">Azure에서 Windows VM을 백업하는 중에 VSS 오류가 발생합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-163">VSS failure during backup for Windows VMs in Azure.</span></span></li></ul> <span data-ttu-id="9698c-164">두이 경우 모두 수행할 수 있는 최상의 hello는 tooensure입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-164">In both these cases, hello best that can be done is tooensure that:</span></span> <ol><li> <span data-ttu-id="9698c-165">hello VM *가상 컴퓨터를 부팅*합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-165">hello VM *boots up*.</span></span> <li><span data-ttu-id="9698c-166">*손상이 없습니다*.</span><span class="sxs-lookup"><span data-stu-id="9698c-166">There is *no corruption*.</span></span><li><span data-ttu-id="9698c-167">*데이터 손실*이 없습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-167">There is *no data loss*.</span></span></ol> <span data-ttu-id="9698c-168">응용 프로그램에는 복원 hello 데이터에 대해 자신의 "픽스업" tooimplement 메커니즘이 필요합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-168">Applications need tooimplement their own "fix-up" mechanism on hello restored data.</span></span> |
| <span data-ttu-id="9698c-169">충돌 일관성</span><span class="sxs-lookup"><span data-stu-id="9698c-169">Crash consistency</span></span> |<span data-ttu-id="9698c-170">아니요</span><span class="sxs-lookup"><span data-stu-id="9698c-170">No</span></span> |<span data-ttu-id="9698c-171">이 상황은 (소프트 또는 하드 리셋)를 통해 발생 하는 "크래시" tooa 해당 가상 컴퓨터입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-171">This situation is equivalent tooa virtual machine experiencing a "crash" (through either a soft or hard reset).</span></span> <span data-ttu-id="9698c-172">크래시 일관성에는 일반적으로 백업 hello 시 hello Azure 가상 컴퓨터 종료 될 때 발생 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-172">Crash consistency typically happens when hello Azure virtual machine is shut down at hello time of backup.</span></span> <span data-ttu-id="9698c-173">크래시 일관성이 있는 복구 지점을 hello 운영 체제 또는 hello 응용 프로그램의 hello 관점에서 hello 저장 매체-에 hello hello 데이터 일관성이 보장은 없습니다를 제공합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-173">A crash-consistent recovery point provides no guarantees around hello consistency of hello data on hello storage medium--either from hello perspective of hello operating system or hello application.</span></span> <span data-ttu-id="9698c-174">백업 hello 시 hello 디스크에 이미 할당 된 hello 데이터만 캡처되고를 백업 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-174">Only hello data that already exists on hello disk at hello time of backup is captured and backed up.</span></span> <br/> <br/> <span data-ttu-id="9698c-175">일반적으로 보장 되지 않습니다, 동안 hello 뒤에 디스크를 확인 하 여 운영 체제 부팅 프로시저 chkdsk toofix 처럼 한 손상 오류입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-175">While there are no guarantees, usually, hello operating system boots, followed by disk-checking procedure, like chkdsk, toofix any corruption errors.</span></span> <span data-ttu-id="9698c-176">모든 메모리 내 데이터 또는 쓰기에 전송 된 toohello 디스크 않은 손실 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-176">Any in-memory data or writes that have not been transferred toohello disk are lost.</span></span> <span data-ttu-id="9698c-177">hello 응용 프로그램 데이터 롤백 toobe 수행 해야 하는 경우에 일반적으로 확인 메커니즘을를 따릅니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-177">hello application typically follows with its own verification mechanism in case data rollback needs toobe done.</span></span> <br><br><span data-ttu-id="9698c-178">예를 들어 hello 트랜잭션 로그에 항목이 hello 데이터베이스에 존재 하지 않는 경우 다음 hello 데이터베이스 소프트웨어에서는 롤백이 hello 데이터가 일관 될 때까지 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-178">As an example, if hello transaction log has entries that are not present in hello database, then hello database software does a rollback until hello data is consistent.</span></span> <span data-ttu-id="9698c-179">여러 가상 디스크 (예: 스팬된 볼륨)에 걸쳐 분산 되는 데이터는 크래시 일관성 복구 지점 hello 데이터의 hello 정확성에 대 한 보장은 없습니다를 제공 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-179">When data is spread across multiple virtual disks (like spanned volumes), a crash-consistent recovery point provides no guarantees for hello correctness of hello data.</span></span> |

## <a name="performance-and-resource-utilization"></a><span data-ttu-id="9698c-180">성능 및 리소스 사용률</span><span class="sxs-lookup"><span data-stu-id="9698c-180">Performance and resource utilization</span></span>
<span data-ttu-id="9698c-181">온-프레미스에 배포되는 백업 소프트웨어와 마찬가지로 Azure에서 VM을 백업하는 경우 용량 및 리소스 사용률에 대한 계획을 세워야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-181">Like backup software that is deployed on-premises, you should plan for capacity and resource utilization needs when backing up VMs in Azure.</span></span> <span data-ttu-id="9698c-182">hello [Azure 저장소 제한](../azure-subscription-service-limits.md#storage-limits) toostructure VM 배포 tooget 최대 성능을 최소한으로 toorunning 워크 로드에 영향 방법을 정의 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-182">hello [Azure Storage limits](../azure-subscription-service-limits.md#storage-limits) define how toostructure VM deployments tooget maximum performance with minimum impact toorunning workloads.</span></span>

<span data-ttu-id="9698c-183">백업 성능을 계획할 때 다음 Azure 저장소를 제한 하는 주의 기울여야 toohello 비용을 지불 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-183">Pay attention toohello following Azure Storage limits when planning backup performance:</span></span>

* <span data-ttu-id="9698c-184">저장소 계정당 최대 송신</span><span class="sxs-lookup"><span data-stu-id="9698c-184">Max egress per storage account</span></span>
* <span data-ttu-id="9698c-185">저장소 계정당 총 요청 속도</span><span class="sxs-lookup"><span data-stu-id="9698c-185">Total request rate per storage account</span></span>

### <a name="storage-account-limits"></a><span data-ttu-id="9698c-186">저장소 계정 제한</span><span class="sxs-lookup"><span data-stu-id="9698c-186">Storage account limits</span></span>
<span data-ttu-id="9698c-187">백업 데이터는 저장소 계정에서 복사, toohello 입/출력 작업 IOPS (초당) 및 송신 (또는 처리량) 메트릭 hello 저장소 계정의 수를 추가 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-187">Backup data copied from a storage account, adds toohello input/output operations per second (IOPS) and egress (or throughput) metrics of hello storage account.</span></span> <span data-ttu-id="9698c-188">At hello 동일 IOPS 및 처리량에도 시간, 가상 컴퓨터가 사용 하 고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-188">At hello same time, virtual machines are also consuming IOPS and throughput.</span></span> <span data-ttu-id="9698c-189">hello ´ ֲ tooensure 백업 및 가상 컴퓨터 트래픽 저장소 계정 제한 초과 하지 않도록 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-189">hello goal is tooensure Backup and virtual machine traffic don't exceed your storage account limits.</span></span>

### <a name="number-of-disks"></a><span data-ttu-id="9698c-190">디스크 수</span><span class="sxs-lookup"><span data-stu-id="9698c-190">Number of disks</span></span>
<span data-ttu-id="9698c-191">hello 백업 프로세스는 최대한 빨리 toocomplete 백업 작업을 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-191">hello backup process tries toocomplete a backup job as quickly as possible.</span></span> <span data-ttu-id="9698c-192">이렇게 하면 가능한 많은 리소스를 소모합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-192">In doing so, it consumes as many resources as it can.</span></span> <span data-ttu-id="9698c-193">그러나 모든 I/O 작업은 hello에 의해 제한 *단일 Blob의 목표 처리량*, 하는 초당 60MB 제한 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-193">However, all I/O operations are limited by hello *Target Throughput for Single Blob*, which has a limit of 60 MB per second.</span></span> <span data-ttu-id="9698c-194">속도가 시도 toomaximize에 hello 백업 프로세스에서 각 hello VM 디스크를 tooback *병렬로*합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-194">In an attempt toomaximize its speed, hello backup process tries tooback up each of hello VM's disks *in parallel*.</span></span> <span data-ttu-id="9698c-195">VM에 4 개의 디스크가, hello 서비스 tooback 동시에 모든 4 개의 디스크를 시도 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-195">If a VM has four disks, hello service attempts tooback up all four disks in parallel.</span></span> <span data-ttu-id="9698c-196">hello **디스크 번호** hello 저장소 계정에 대 한 백업 트래픽을 결정 하는 데 가장 중요 한 요소에는 백업 중인 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-196">hello **number of disks** being backed up, is hello most important factor in determining storage account backup traffic.</span></span>

### <a name="backup-schedule"></a><span data-ttu-id="9698c-197">백업 일정</span><span class="sxs-lookup"><span data-stu-id="9698c-197">Backup schedule</span></span>
<span data-ttu-id="9698c-198">성능에 영향을 주는 추가 요소는 hello **백업 일정**합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-198">An additional factor that impacts performance is hello **backup schedule**.</span></span> <span data-ttu-id="9698c-199">모든 Vm에서 백업 hello 동일 하므로 hello 정책을 구성 하는 경우 트래픽 걸림은 예정 된 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-199">If you configure hello policies so all VMs are backed up at hello same time, you have scheduled a traffic jam.</span></span> <span data-ttu-id="9698c-200">백업 프로세스 hello tooback 동시에 모든 디스크를 시도합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-200">hello backup process attempts tooback up all disks in parallel.</span></span> <span data-ttu-id="9698c-201">겹치지 않는 hello 일 서로 다른 시간에 여러 Vm 백업 저장소 계정에서 tooreduce hello의 백업 트래픽을 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-201">tooreduce hello backup traffic from a storage account, back up different VMs at different time of hello day, with no overlap.</span></span>

## <a name="capacity-planning"></a><span data-ttu-id="9698c-202">용량 계획</span><span class="sxs-lookup"><span data-stu-id="9698c-202">Capacity planning</span></span>
<span data-ttu-id="9698c-203">Tooplan hello 저장소 계정 사용 해야 하는 필요 hello 이전 요소를 함께 배치 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-203">Putting hello previous factors together, you need tooplan for hello storage account usage needs.</span></span> <span data-ttu-id="9698c-204">Hello 다운로드 [VM 백업 용량 계획 Excel 스프레드시트](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) toosee hello 영향 디스크 및 백업 일정 선택 항목의 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-204">Download hello [VM backup capacity planning Excel spreadsheet](https://gallery.technet.microsoft.com/Azure-Backup-Storage-a46d7e33) toosee hello impact of your disk and backup schedule choices.</span></span>

### <a name="backup-throughput"></a><span data-ttu-id="9698c-205">백업 처리량</span><span class="sxs-lookup"><span data-stu-id="9698c-205">Backup throughput</span></span>
<span data-ttu-id="9698c-206">백업 중인 각 디스크에 대 한 Azure 백업 hello 디스크에 블록 hello 읽고 저장소에만 변경 된 데이터 (증분 백업) hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-206">For each disk being backed up, Azure Backup reads hello blocks on hello disk and stores only hello changed data (incremental backup).</span></span> <span data-ttu-id="9698c-207">hello 다음 표에 hello 평균 백업 서비스 처리량 값 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-207">hello following table shows hello average Backup service throughput values.</span></span> <span data-ttu-id="9698c-208">같은 데이터가 hello를 사용 하 여 hello 기간 필요한 tooback 지정된 된 크기의 디스크를 예측할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-208">Using hello following data, you can estimate hello amount of time needed tooback up a disk of a given size.</span></span>

| <span data-ttu-id="9698c-209">백업 작업</span><span class="sxs-lookup"><span data-stu-id="9698c-209">Backup operation</span></span> | <span data-ttu-id="9698c-210">최상의 처리량</span><span class="sxs-lookup"><span data-stu-id="9698c-210">Best-case throughput</span></span> |
| --- | --- |
| <span data-ttu-id="9698c-211">초기 백업</span><span class="sxs-lookup"><span data-stu-id="9698c-211">Initial backup</span></span> |<span data-ttu-id="9698c-212">160Mbps</span><span class="sxs-lookup"><span data-stu-id="9698c-212">160 Mbps</span></span> |
| <span data-ttu-id="9698c-213">증분 백업(DR)</span><span class="sxs-lookup"><span data-stu-id="9698c-213">Incremental backup (DR)</span></span> |<span data-ttu-id="9698c-214">640Mbps </span><span class="sxs-lookup"><span data-stu-id="9698c-214">640 Mbps</span></span> <br><br> <span data-ttu-id="9698c-215">처리량이 감소 크게 hello에 필요한 다른 데이터 (백업 toobe) 변경 된 경우 분산 된 hello 디스크 간에 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-215">Throughput drops significantly if hello changed data (that needs toobe backed up) is dispersed across hello disk.</span></span>|

## <a name="total-vm-backup-time"></a><span data-ttu-id="9698c-216">총 VM 백업 시간</span><span class="sxs-lookup"><span data-stu-id="9698c-216">Total VM backup time</span></span>
<span data-ttu-id="9698c-217">대부분의 hello 백업 시간 소비 읽는 데이터 복사, 동안 toohello 데 필요한 총 시간은 tooback VM 다른 작업에 기여:</span><span class="sxs-lookup"><span data-stu-id="9698c-217">While most of hello backup time is spent reading and copying data, other operations contribute toohello total time needed tooback up a VM:</span></span>

* <span data-ttu-id="9698c-218">시간이 너무 필요[hello 백업 확장을 설치 또는](backup-azure-vms.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-218">Time needed too[install or update hello backup extension](backup-azure-vms.md).</span></span>
* <span data-ttu-id="9698c-219">스냅숏 시간을 hello에 걸린 시간 tootrigger 스냅숏으로 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-219">Snapshot time, which is hello time taken tootrigger a snapshot.</span></span> <span data-ttu-id="9698c-220">스냅숏은 트리거된 닫기 toohello 예약 된 백업 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-220">Snapshots are triggered close toohello scheduled backup time.</span></span>
* <span data-ttu-id="9698c-221">큐 대기 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-221">Queue wait time.</span></span> <span data-ttu-id="9698c-222">Hello 백업 서비스가 백업을 여러 고객 으로부터 처리 하 고, 이후 스냅숏 toohello 백업 또는 복구 서비스에서 백업 데이터를 복사 자격 증명 모음을 시작할 수 없습니다 즉시 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-222">Since hello Backup service is processing backups from multiple customers, copying backup data from snapshot toohello backup or Recovery Services vault might not start immediately.</span></span> <span data-ttu-id="9698c-223">최대 부하 시간, hello 대기는 처리 중인 백업의 toohello 수 인해 tooeight 시간을 늘릴 수 있는 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-223">In times of peak load, hello wait can stretch up tooeight hours due toohello number of backups being processed.</span></span> <span data-ttu-id="9698c-224">그러나 VM 백업 시간을 총 hello는 매일 백업 정책에 대 한 24 시간 보다 작습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-224">However, hello total VM backup time is less than 24 hours for daily backup policies.</span></span>
* <span data-ttu-id="9698c-225">데이터 전송 시간, 백업에 필요한 시간은 toocompute hello 증분 변경 내용은 이전 백업에서 서비스 및 이러한 변경 내용을 toovault 저장소를 전송 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-225">Data transfer time, time needed for backup service toocompute hello incremental changes from previous backup and transfer those changes toovault storage.</span></span>

### <a name="why-am-i-observing-longer12-hours-backup-time"></a><span data-ttu-id="9698c-226">백업 시간이 길어진(12시간 초과) 이유는 무엇인가요?</span><span class="sxs-lookup"><span data-stu-id="9698c-226">Why am I observing longer(>12 hours) backup time?</span></span>
<span data-ttu-id="9698c-227">백업은 다음과 같은 두 단계로 구성 됩니다: 스냅숏 만들기 및 전송 hello 스냅숏을 toohello 자격 증명 모음입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-227">Backup consists of two phases: taking snapshots and transferring hello snapshots toohello vault.</span></span> <span data-ttu-id="9698c-228">hello 백업 서비스 저장소에 대 한 최적화합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-228">hello Backup service optimizes for storage.</span></span> <span data-ttu-id="9698c-229">Hello 스냅숏 데이터 tooa 자격 증명 모음으로 내보낼 때 hello 서비스 hello 이전 스냅숏에서 증분 변경만 전송 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-229">When transferring hello snapshot data tooa vault, hello service only transfers incremental changes from hello previous snapshot.</span></span>  <span data-ttu-id="9698c-230">toodetermine hello 증분 변경 hello 서비스는 hello 블록의 hello 체크섬을 계산합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-230">toodetermine hello incremental changes, hello service computes hello checksum of hello blocks.</span></span> <span data-ttu-id="9698c-231">블록 변경 되 면 hello 블록은 toohello 자격 증명 모음을 전송 하는 블록 toobe로 식별 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-231">If a block is changed, hello block is identified as a block toobe sent toohello vault.</span></span> <span data-ttu-id="9698c-232">그런 다음 hello 서비스 드릴 각 hello로 식별 된 블록, 기회 toominimize hello 데이터 tootransfer 찾고 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-232">Then hello service drills further into each of hello identified blocks, looking for opportunities toominimize hello data tootransfer.</span></span> <span data-ttu-id="9698c-233">변경 된 모든 블록을 평가한 후 hello 서비스 hello 변경 내용을 결합 하 고 자격 증명 모음 toohello 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-233">After evaluating all changed blocks, hello service coalesces hello changes and sends them toohello vault.</span></span> <span data-ttu-id="9698c-234">일부 레거시 응용 프로그램의 경우 소규모의 조각난 쓰기는 저장소에 적합하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-234">In some legacy applications, small, fragmented writes are not optimal for storage.</span></span> <span data-ttu-id="9698c-235">Hello 스냅숏 작은, 조각난 쓰기 작업이 잦은 있으면 hello 서비스 대부분 hello 응용 프로그램에 의해 기록 된 hello 데이터를 처리 하는 추가 시간을 보냅니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-235">If hello snapshot contains many small, fragmented writes, hello service spends additional time processing hello data written by hello applications.</span></span> <span data-ttu-id="9698c-236">hello VM 내에서 실행 되는 응용 프로그램에 azure에서 응용 프로그램 쓰기 블록을 권장 하는 hello 8KB의 최소값입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-236">hello recommended application write block from Azure, for applications running inside hello VM, is a minimum of 8 KB.</span></span> <span data-ttu-id="9698c-237">응용 프로그램에서 8KB 보다 작은 블록을 사용할 경우 백업 성능에 영향을 미칩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-237">If your application uses a block of less than 8 KB, backup performance is effected.</span></span> <span data-ttu-id="9698c-238">응용 프로그램 tooimprove 백업 성능 조정 도움말을 참조 하십시오. [Azure 저장소의 성능 최적화에 대 한 응용 프로그램 튜닝](../storage/common/storage-premium-storage-performance.md)합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-238">For help with tuning your application tooimprove backup performance, see [Tuning applications for optimal performance with Azure storage](../storage/common/storage-premium-storage-performance.md).</span></span> <span data-ttu-id="9698c-239">경우에 백업 성능에 hello 문서 프리미엄 저장소 예제를 사용 하는 hello 지침 표준 저장소 디스크에 대 한 적용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-239">Though hello article on backup performance uses Premium storage examples, hello guidance is applicable for Standard storage disks.</span></span>

## <a name="total-restore-time"></a><span data-ttu-id="9698c-240">총 복원 시간</span><span class="sxs-lookup"><span data-stu-id="9698c-240">Total restore time</span></span>
<span data-ttu-id="9698c-241">복원 작업을 두 가지 주요 하위 작업으로 구성 됩니다: hello 자격 증명 모음 선택 toohello 고객 저장소 계정에서 다시 데이터를 복사 하 고 hello 가상 컴퓨터를 만드는 중입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-241">A restore operation consists of two main sub tasks: Copying data back from hello vault toohello chosen customer storage account, and creating hello virtual machine.</span></span> <span data-ttu-id="9698c-242">Hello 자격 증명 모음에서 다시 데이터를 복사 하는 작업은 hello 백업은 Azure에 내부적으로 저장 되어 있는 hello 고객 저장소 계정 저장 된 등에 따라 다릅니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-242">Copying data back from hello vault depends on where hello backups are stored internally in Azure, and where hello customer storage account is stored.</span></span> <span data-ttu-id="9698c-243">Toocopy 데이터에 걸린 시간에 따라 달라 집니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-243">Time taken toocopy data depends upon:</span></span>
* <span data-ttu-id="9698c-244">큐 대기 시간-hello에 여러 고객 으로부터 hello 서비스 프로세스 복원 작업 후 같은 시간 복원 요청은 큐에 저장 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-244">Queue wait time - Since hello service processes restore jobs from multiple customers at hello same time, restore requests are put in a queue.</span></span>
* <span data-ttu-id="9698c-245">데이터 복사 작업에 시간-hello 자격 증명 모음 toohello 고객 저장소 계정에서 복사 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-245">Data copy time - Data is copied from hello vault toohello customer storage account.</span></span> <span data-ttu-id="9698c-246">복원 시간은 iops 수에 따라 및 hello 선택한 고객 저장소 계정에 Azure 백업 서비스 처리량을 가져옵니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-246">Restore time depends on IOPS and throughput Azure Backup service gets on hello selected customer storage account.</span></span> <span data-ttu-id="9698c-247">tooreduce는 hello 복원 프로세스 중에 시간 복사 hello, 및 다른 응용 프로그램 쓰기 및 읽기 로드 되지 않음 저장소 계정을 선택 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-247">tooreduce hello copying time during hello restore process, select a storage account not loaded with other application writes and reads.</span></span>

## <a name="best-practices"></a><span data-ttu-id="9698c-248">모범 사례</span><span class="sxs-lookup"><span data-stu-id="9698c-248">Best practices</span></span>
<span data-ttu-id="9698c-249">가상 컴퓨터에 대한 백업을 구성하는 동안 다음 사례를 따르는 것이 좋습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-249">We suggest following these practices while configuring backups for virtual machines:</span></span>

* <span data-ttu-id="9698c-250">동일한 클라우드 서비스 tooback hello에 hello에서 10 개 이상의 클래식 Vm 예약 안 함 동시 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-250">Don't schedule more than 10 classic VMs from hello same cloud service tooback up at hello same time.</span></span> <span data-ttu-id="9698c-251">동일한 클라우드 서비스에서 여러 vm tooback 하려는 경우 한 시간 hello 백업 시작 시간을 분산 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-251">If you want tooback up multiple VMs from same cloud service, stagger hello backup start times by an hour.</span></span>
* <span data-ttu-id="9698c-252">40 개 이상의 Vm tooback를 hello에 예약 하지 않는 같은 시간입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-252">Do not schedule more than 40 VMs tooback up at hello same time.</span></span>
* <span data-ttu-id="9698c-253">사용량이 많지 않은 시간에 VM 백업을 예약하세요.</span><span class="sxs-lookup"><span data-stu-id="9698c-253">Schedule VM backups during non-peak hours.</span></span> <span data-ttu-id="9698c-254">이 방식으로 hello 백업 서비스는 hello 고객 저장소 계정 toohello 자격 증명 모음에서 데이터를 전송에 대 한 IOPS를 사용 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-254">This way hello Backup service uses IOPS for transferring data from hello customer storage account toohello vault.</span></span>
* <span data-ttu-id="9698c-255">정책이 서로 다른 저장소 계정에 분산된 VM에 적용되어야 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-255">Make sure that a policy is applied on VMs spread across different storage accounts.</span></span> <span data-ttu-id="9698c-256">20 개 이하의 제안 hello에 의해 단일 저장소 계정에서 총 디스크 보호 동일한 백업 일정.</span><span class="sxs-lookup"><span data-stu-id="9698c-256">We suggest no more than 20 total disks from a single storage account be protected by hello same backup schedule.</span></span> <span data-ttu-id="9698c-257">20 디스크는 저장소 계정에 확산 하는 보다 큰 경우 해당 Vm에서 여러 정책 tooget 필요한 IOPS hello 백업 프로세스의 hello 전송 단계 동안 hello 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-257">If you have greater than 20 disks in a storage account, spread those VMs across multiple policies tooget hello required IOPS during hello transfer phase of hello backup process.</span></span>
* <span data-ttu-id="9698c-258">프리미엄 저장소 toosame 저장소 계정에서 실행 하 고 복원 하지 마십시오.</span><span class="sxs-lookup"><span data-stu-id="9698c-258">Do not restore a VM running on Premium storage toosame storage account.</span></span> <span data-ttu-id="9698c-259">Hello 감소 hello 복원 작업 프로세스 hello 백업 작업, 일치 하는 경우 백업에 대 한 IOPS를 사용할 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-259">If hello restore operation process coincides with hello backup operation, it reduces hello available IOPS for backup.</span></span>
* <span data-ttu-id="9698c-260">프리미엄 VM 백업의 경우 프리미엄 디스크를 호스트하는 저장소 계정에 성공적인 백업을 위해 스냅샷 준비에 사용할 50% 이상의 사용 가능한 공간이 있는지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-260">For Premium VM backup, ensure that storage account that hosts premium disks has atleast 50% free space for staging snapshot for a successful backup.</span></span> 
* <span data-ttu-id="9698c-261">백업에 사용할 수 있는 Linux VM의 python 버전이 2.7인지 확인합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-261">Make sure that python version on Linux VMs enabled for backup is 2.7</span></span>

## <a name="data-encryption"></a><span data-ttu-id="9698c-262">데이터 암호화.</span><span class="sxs-lookup"><span data-stu-id="9698c-262">Data encryption</span></span>
<span data-ttu-id="9698c-263">Azure 백업 hello 백업 프로세스의 일부로 데이터를 암호화 하지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-263">Azure Backup does not encrypt data as a part of hello backup process.</span></span> <span data-ttu-id="9698c-264">그러나 hello VM 내에서 데이터를 암호화할 수 있으며 hello를 백업 데이터 보호 데이터를 원활 하 게 (에 대해 자세히 알아보세요 [암호화 된 데이터의 백업](backup-azure-vms-encryption.md)).</span><span class="sxs-lookup"><span data-stu-id="9698c-264">However, you can encrypt data within hello VM and back up hello protected data seamlessly (read more about [backup of encrypted data](backup-azure-vms-encryption.md)).</span></span>

## <a name="calculating-hello-cost-of-protected-instances"></a><span data-ttu-id="9698c-265">보호 된 인스턴스의 hello 비용 계산</span><span class="sxs-lookup"><span data-stu-id="9698c-265">Calculating hello cost of protected instances</span></span>
<span data-ttu-id="9698c-266">Azure 백업을 통해 백업 된 azure 가상 컴퓨터는 너무[Azure 백업 가격](https://azure.microsoft.com/pricing/details/backup/)합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-266">Azure virtual machines that are backed up through Azure Backup are subject too[Azure Backup pricing](https://azure.microsoft.com/pricing/details/backup/).</span></span> <span data-ttu-id="9698c-267">hello 인스턴스 보호 계산 hello 기반 *실제* "리소스 디스크" hello 제외 하 고-hello 가상 컴퓨터의 모든 hello 데이터의 합계와 hello hello 가상 컴퓨터의 크기</span><span class="sxs-lookup"><span data-stu-id="9698c-267">hello Protected Instances calculation is based on hello *actual* size of hello virtual machine, which is hello sum of all hello data in hello virtual machine--excluding hello “resource disk.”</span></span>

<span data-ttu-id="9698c-268">Vm의 백업은 대 한 가격 책정 *하지* 각 데이터 디스크 연결 된 toohello 가상 컴퓨터에 대 한 hello 최대 지원 크기를 기반 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-268">Pricing for backing up VMs is *not* based on hello maximum supported size for each data disk attached toohello virtual machine.</span></span> <span data-ttu-id="9698c-269">가격 책정 hello 데이터 디스크에 저장 된 hello 실제 데이터를 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-269">Pricing is based on hello actual data stored in hello data disk.</span></span> <span data-ttu-id="9698c-270">마찬가지로, hello 백업 저장소 요금 hello 양의 hello 각 복구 지점에 실제 데이터의 hello 합계는 Azure 백업에 저장 된 데이터를 기반으로 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-270">Similarly, hello backup storage bill is based on hello amount of data that is stored in Azure Backup, which is hello sum of hello actual data in each recovery point.</span></span>

<span data-ttu-id="9698c-271">최대 크기가 각각 1TB인 두 개의 추가 데이터 디스크가 있는 A2 표준 크기 가상 컴퓨터를 예로 들 수 있습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-271">For example, take an A2 Standard-sized virtual machine that has two additional data disks with a maximum size of 1 TB each.</span></span> <span data-ttu-id="9698c-272">hello 다음 표에 나와 각이 디스크에 저장 된 hello 실제 데이터:</span><span class="sxs-lookup"><span data-stu-id="9698c-272">hello following table gives hello actual data stored on each of these disks:</span></span>

| <span data-ttu-id="9698c-273">디스크 유형</span><span class="sxs-lookup"><span data-stu-id="9698c-273">Disk type</span></span> | <span data-ttu-id="9698c-274">최대 크기</span><span class="sxs-lookup"><span data-stu-id="9698c-274">Max size</span></span> | <span data-ttu-id="9698c-275">실제 데이터 표시</span><span class="sxs-lookup"><span data-stu-id="9698c-275">Actual data present</span></span> |
| --- | --- | --- |
| <span data-ttu-id="9698c-276">운영 체제 디스크</span><span class="sxs-lookup"><span data-stu-id="9698c-276">Operating system disk</span></span> |<span data-ttu-id="9698c-277">1023GB</span><span class="sxs-lookup"><span data-stu-id="9698c-277">1023 GB</span></span> |<span data-ttu-id="9698c-278">17GB</span><span class="sxs-lookup"><span data-stu-id="9698c-278">17 GB</span></span> |
| <span data-ttu-id="9698c-279">로컬 디스크/리소스 디스크</span><span class="sxs-lookup"><span data-stu-id="9698c-279">Local disk / Resource disk</span></span> |<span data-ttu-id="9698c-280">135GB</span><span class="sxs-lookup"><span data-stu-id="9698c-280">135 GB</span></span> |<span data-ttu-id="9698c-281">5GB(백업에 포함되지 않음)</span><span class="sxs-lookup"><span data-stu-id="9698c-281">5 GB (not included for backup)</span></span> |
| <span data-ttu-id="9698c-282">데이터 디스크 1</span><span class="sxs-lookup"><span data-stu-id="9698c-282">Data disk 1</span></span> |<span data-ttu-id="9698c-283">1023GB</span><span class="sxs-lookup"><span data-stu-id="9698c-283">1023 GB</span></span> |<span data-ttu-id="9698c-284">30GB</span><span class="sxs-lookup"><span data-stu-id="9698c-284">30 GB</span></span> |
| <span data-ttu-id="9698c-285">데이터 디스크 2</span><span class="sxs-lookup"><span data-stu-id="9698c-285">Data disk 2</span></span> |<span data-ttu-id="9698c-286">1023GB</span><span class="sxs-lookup"><span data-stu-id="9698c-286">1023 GB</span></span> |<span data-ttu-id="9698c-287">0GB</span><span class="sxs-lookup"><span data-stu-id="9698c-287">0 GB</span></span> |

<span data-ttu-id="9698c-288">hello *실제* hello 가상 컴퓨터의 크기는이 경우 17 GB + 30GB + 0 = 47 g B입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-288">hello *actual* size of hello virtual machine in this case is 17 GB + 30 GB + 0 GB = 47 GB.</span></span> <span data-ttu-id="9698c-289">이 보호 된 인스턴스 크기 (47 GB) hello 월별 요금은 hello 기준이 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-289">This Protected Instance size (47 GB) becomes hello basis for hello monthly bill.</span></span> <span data-ttu-id="9698c-290">Hello hello 가상 컴퓨터의 데이터 양을 많아지면, 그에 따라 청구 변경 내용에 대해 사용 되는 hello 보호 된 인스턴스 크기입니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-290">As hello amount of data in hello virtual machine grows, hello Protected Instance size used for billing changes accordingly.</span></span>

<span data-ttu-id="9698c-291">청구는 hello 첫 번째 성공적인 백업 완료 될 때까지 시작 되지 않습니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-291">Billing does not start until hello first successful backup completes.</span></span> <span data-ttu-id="9698c-292">이 시점에서 저장소 및 보호 된 인스턴스 모두에 대 한 hello 청구를 시작합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-292">At this point, hello billing for both Storage and Protected Instances begins.</span></span> <span data-ttu-id="9698c-293">이 때만 요금이 계속 청구 *자격 증명 모음에 저장 된 데이터를 백업 하는 모든* hello 가상 컴퓨터에 대 한 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-293">Billing continues as long as there is *any backup data stored in a vault* for hello virtual machine.</span></span> <span data-ttu-id="9698c-294">Hello 가상 컴퓨터 보호를 중지 되지만 자격 증명 모음에 가상 컴퓨터 백업 데이터가 있는 요금이 계속 청구 합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-294">If you stop protection on hello virtual machine, but virtual machine backup data exists in a vault, billing continues.</span></span>

<span data-ttu-id="9698c-295">지정 된 가상 컴퓨터 중지 hello 보호가 중지 된 경우에 대금 청구 *및* 모든 백업 데이터가 삭제 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-295">Billing for a specified virtual machine stops only if hello protection is stopped *and* all backup data is deleted.</span></span> <span data-ttu-id="9698c-296">보호를 중지 하 고 현재 백업 작업이 없는지, hello 마지막으로 성공한 VM 백업 hello 크기 hello 보호 된 인스턴스 크기 hello 월별 요금 청구에 사용 됩니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-296">When protection stops and there are no active backup jobs, hello size of hello last successful VM backup becomes hello Protected Instance size used for hello monthly bill.</span></span>

## <a name="questions"></a><span data-ttu-id="9698c-297">질문이 있으십니까?</span><span class="sxs-lookup"><span data-stu-id="9698c-297">Questions?</span></span>
<span data-ttu-id="9698c-298">기능의 경우 원하는 toosee 포함 또는 질문이 있는 경우 [피드백](http://aka.ms/azurebackup_feedback)합니다.</span><span class="sxs-lookup"><span data-stu-id="9698c-298">If you have questions, or if there is any feature that you would like toosee included, [send us feedback](http://aka.ms/azurebackup_feedback).</span></span>

## <a name="next-steps"></a><span data-ttu-id="9698c-299">다음 단계</span><span class="sxs-lookup"><span data-stu-id="9698c-299">Next steps</span></span>
* [<span data-ttu-id="9698c-300">가상 컴퓨터 설정</span><span class="sxs-lookup"><span data-stu-id="9698c-300">Back up virtual machines</span></span>](backup-azure-vms.md)
* [<span data-ttu-id="9698c-301">가상 컴퓨터 백업 관리</span><span class="sxs-lookup"><span data-stu-id="9698c-301">Manage virtual machine backup</span></span>](backup-azure-manage-vms.md)
* [<span data-ttu-id="9698c-302">가상 컴퓨터 복원</span><span class="sxs-lookup"><span data-stu-id="9698c-302">Restore virtual machines</span></span>](backup-azure-restore-vms.md)
* [<span data-ttu-id="9698c-303">VM 백업 문제 해결</span><span class="sxs-lookup"><span data-stu-id="9698c-303">Troubleshoot VM backup issues</span></span>](backup-azure-vms-troubleshoot.md)
